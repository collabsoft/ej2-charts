/*!
*  filename: ej2-charts.umd.min.js.map
*  version : 1.0.20
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/

{"version":3,"sources":["ej2-charts.umd.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_85__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","index_1","index_2","index_3","__export","hasOwnProperty","Object","defineProperty","value","apply","chart_1","axis_1","date_time_axis_1","category_axis_1","logarithmic_axis_1","strip_line_1","base_1","line_series_1","column_series_1","area_series_1","bar_series_1","polar_series_1","radar_series_1","stacking_bar_series_1","candle_series_1","stacking_column_series_1","step_line_series_1","step_area_series_1","stacking_area_series_1","scatter_series_1","range_column_series_1","waterfall_series_1","hilo_series_1","hilo_open_close_series_1","range_area_series_1","bubble_series_1","spline_series_1","technical_indicator_1","sma_indicator_1","ema_indicator_1","tma_indicator_1","ad_indicator_1","atr_indicator_1","momentum_indicator_1","rsi_indicator_1","stochastic_indicator_1","bollinger_bands_1","macd_indicator_1","trend_line_1","helper_1","crosshair_1","tooltip_1","zooming_1","selection_1","data_label_1","error_bar_1","chart_series_1","legend_1","annotation_1","chart_base_1","box_and_whisker_series_1","constants_1","BubbleSeries","prototype","render","series","xAxis","yAxis","isInverted","shapeOption","argsData","segmentRadius","radius","marker","visiblePoints","points","Math","max","chart","initialClipRect","height","width","percentChange","maxRadius","minRadius","maximumSize","maxValue","_i","_a","visibleSeries","length","value_1","type","visible","sizeMax","_b","visiblePoints_1","bubblePoint","symbolLocations","regions","withInRange","index","push","getPoint","xValue","yValue","abs","size","cancel","name","pointRender","point","fill","setPointColor","interior","border","setBorderColor","color","trigger","PathOption","element","opacity","seriesElement","appendChild","drawSymbol","Size","imageUrl","x","toString","Rect","y","destroy","getModuleName","doAnimation","duration","animation","delay","rectElements","childNodes","count","markerAnimate","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","create","ej2_base_1","ej2_base_2","ej2_base_3","measureText","text","font","htmlObject","document","getElementById","createElement","body","innerHTML","style","position","fontSize","fontWeight","fontStyle","fontFamily","visibility","top","left","whiteSpace","lineHeight","clientWidth","clientHeight","rotateTextSize","angle","box","options","renderer","SvgRenderer","font-size","font-style","font-family","font-weight","transform","text-anchor","createText","delayRedraw","svgObject","getBoundingClientRect","remove","right","bottom","removeElement","getElement","logBase","base","log","showTooltip","areaWidth","isTouch","tooltip","styles","setTimeout","inside","range","min","withIn","previousPoint","currentPoint","nextPoint","mX2","logWithIn","mX1","mX3","xStart","floor","visibleRange","xEnd","ceil","sum","values","values_1","subArraySum","first","last","indexOf","yName","subtractThickness","rect","thickness","subtractRect","degreeToLocation","degree","center","radian","PI","ChartLocation","cos","sin","getAccumulationLegend","locX","locY","r","mode","cartesianlarge","cartesiansmall","getAngle","atan2","subArray","valueToCoefficient","axis","result","isInversed","TransformToVisible","valueType","labelPlacement","CoefficientToVector","valueToPolarCoefficient","primaryXAxis","startAngle","clipRect","coefficient","delta","dateTimeInterval","interval","visibleLabels","createTooltip","setAttribute","createZoomingLabels","parent","isVertical","arrowLocation","direction","opposedPosition","anchor","chartRect","availableSize","endLabel","startLabel","labelStyle","findDirection","drawPath","textElement","TextOption","withInBounds","bounds","getValueXByPoint","getValueYByPoint","findClipRect","requireInvertedAxis","firstToLowerCase","str","substr","toLowerCase","getMinPointsDelta","seriesCollection","xValues","minVal","minDelta","Number","MAX_VALUE","forEach","xAxisName","map","sort","second","xMin","getAnimationFunction","effect","functionName","linear","currentTime","startValue","endValue","pointIndex","isLabel","centerX","centerY","Animation","animate","progress","args","timeStamp","end","model","removeAttribute","templateAnimate","isRemove","location","shape","url","label","temp","calculateShapes","renderOption","path","merge","rx","ry","cx","cy","concat","href","calculateLegendShapes","getRectLocation","startLocation","endLocation","outerRect","minMax","getTemplateFunction","template","templateFn","querySelectorAll","compile","querySelector","trim","e","createTemplate","childElement","content","templateElement","getFontStyle","measureElementRect","findlElement","elements","length_1","xLength","yLength","xvalue","yvalue","appendElement","child","hasChildNodes","getDraggedRectLocation","x1","y1","x2","y2","checkBounds","start","getLabelText","labelFormat","customLabelFormat","match","seriesType","high","low","open","close","median","maximum","minimum","upperQuartile","lowerQuartile","outliers","liers","replace","format","parseFloat","stopTimer","timer","window","clearInterval","isCollide","collections","currentRect","some","isOverlap","containsRect","calculateRect","textSize","margin","convertToHexCode","componentToHex","g","hex","convertHexToColor","exec","ColorValue","parseInt","colorNameToHex","getComputedStyle","exp","isRGBValue","getSaturationColor","factor","colorCode","rgb","round","getMedian","half","space","stroke","textTrim","maxWidth","textLength","substring","stringToNumber","containerSize","rX","rY","arrowPadding","tipX","tipY","tipRadius","startX","startY","isMinus","tspanElement","renderOptions","dominant-baseline","baseLine","len","createTSpan","calculateSize","containerWidth","containerHeight","createSvg","titlePositionX","chartSize","leftPadding","rightPadding","titleStyle","textAlignment","Mean","verticalStandardMean","verticalSquareRoot","horizontalStandardMean","horizontalSquareRoot","verticalMean","horizontalMean","PolarArc","endAngle","innerRadius","currentXPosition","CustomizeOption","StackValues","startValues","endValues","_super","_this","dashArray","RectOption","CircleOption","PolygonOption","Thickness","PointData","lierIndex","ControlPoints","controlPoint1","controlPoint2","load","animationComplete","legendRender","textRender","seriesRender","axisLabelRender","tooltipRender","chartMouseMove","chartMouseClick","chartMouseLeave","chartMouseDown","chartMouseUp","zoomComplete","dragComplete","resized","beforePrint","annotationRender","__decorate","decorators","target","key","desc","arguments","getOwnPropertyDescriptor","Reflect","decorate","ej2_base_4","ej2_base_5","ej2_base_6","helper_2","theme_1","cartesian_panel_1","helper_3","data_1","marker_1","export_1","helper_4","TooltipSettings","ChildProperty","Property","Complex","Theme","tooltipLabelFont","Font","Border","CrosshairSettings","ZoomSettings","Chart","chartAreaType","preRender","unWireEvents","initPrivateVariable","setCulture","setTheme","createChartSvg","wireEvents","animateSeries","horizontalAxes","verticalAxes","refreshAxis","refreshDefinition","rows","columns","tooltipModule","previousPoints","markerRender","Marker","calculateAreaType","calculateVisibleSeries","initTechnicalIndicators","initTrendLines","calculateVisibleAxis","processData","getLocalizedLabel","localeObject","getConstant","refreshBound","legendModule","legendSettings","getLegendOptions","isCalculateStacking","rectCount","drawType","calculateStackedValue","calculateBounds","renderElements","renderBorder","renderTitle","renderAreaBorder","renderSeriesElements","applyZoomkit","performSelection","setSecondaryElementPosition","renderAnnotation","svgRect","initializeModuleElements","dataLabelCollections","seriesElements","createGroup","yAxisElements","indicators","indicatorElements","hasTrendlines","trendLineElements","dataLabelElements","isTrendline","trendlines","chartAxisLayoutPanel","renderAxes","tooltipDiv","enable","indicator","createIndicatorElements","_c","trendLineModule","getTrendLineElements","_d","_e","item","renderSeries","appendSeriesElements","drawClipPath","seriesClipRect","stroke-width","stripLineModule","renderStripLine","axisCollections","renderLegend","legendBounds","zoomModule","isZoomed","applyZoomToolkit","annotationModule","renderAnnotations","selectedDataIndexes","selectionModule","extend","invokeSelection","redrawSelection","selectionMode","visibleSeriesCount","check","series_1","category","initializeDataModule","seriesName","dataSource","techIndicator","xData","yData","dataModule","Data","query","refreshDataManager","titleHeight","title","chartArea","calculateLegendBounds","measureAxis","print","ExportUtils","export","fileName","trendIndex","trendline","trendLine","sourceIndex","initSeriesCollection","targetSeries","isTransposed","polarSeriesModule","radarSeriesModule","CartesianAxisLayoutPanel","axes","primaryYAxis","labels","series_2","initAxis","orientation","measure","Series","yAxisName","refreshTechnicalIndicator","targetIndicator","setDataSource","TechnicalIndicator","colors","palettes","getSeriesColor","theme","maxTitleSize","trimmedTitle","elementSize","description","tabIndex","background","drawRectangle","addSeries","seriesCollection_1","refresh","classList","getPersistData","keyEntity","addOnPersist","removeSvg","startEvent","Browser","touchStartEvent","moveEvent","touchMoveEvent","stopEvent","touchEndEvent","cancelEvent","isPointer","EventHandler","chartOnMouseDown","mouseMove","mouseEnd","chartOnMouseClick","chartRightClick","mouseLeave","removeEventListener","chartResize","add","addEventListener","bind","longPress","Touch","tapHold","tapHoldThreshold","setStyle","event","crosshair","crosshairModule","buttons","which","pointerType","preventDefault","stopPropagation","zooming","zoomSettings","disableScroll","enableSelectionZooming","enableMouseWheelZooming","enablePinchZooming","touchAction","msTouchAction","msContentZooming","msUserSelect","webkitUserSelect","display","isOrientation","mouseX","originalEvent","changedTouches","mouseY","startMove","setMouseXY","notify","pageX","pageY","resizeTo","clearTimeout","isDestroyed","touchArg","clientX","clientY","chartOnMouseMove","chartOnMouseLeave","isChartDrag","titleTooltip","axisTooltip","textContent","offsetWidth","targetId","findAxisLabel","texts","split","originalText","offset","isDevice","mouseDownX","previousMouseMoveX","mouseDownY","previousMouseMoveY","isDoubleTap","Date","getTime","threshold","chartOnMouseUp","intl","Internationalization","setLocaleConstants","L10n","defaultLocalConstants","locale","ZoomIn","Zoom","ZoomOut","Pan","Reset","ResetZoom","requiredModules","moduleName","enableAnnotation","errorBarVisible","dataLabelEnable","member","isLegend","errorBar","dataLabel","findIndicatorModules","findTrendLineModules","findAxisModule","annotations","datetimeEnabled","categoryEnabled","logarithmicEnabled","striplineEnabled","axisCollections_1","findStriplineVisibility","stripLines","macdEnable","bandEnable","isLine","isSpline","this_1","markerEnable","striplines","striplines_1","removeLength","pinchTarget","removeChild","firstChild","parentNode","definitions","definitions_1","isStack100","axisChange","onPropertyChanged","newProp","oldProp","refreshBounds","keys","edgeLabelPlacement","crosshairTooltip","isMultiSelect","Component","chartTitleFont","Margin","chartBackgroundColor","ChartArea","Axis","Collection","Row","Column","ChartAnnotationSettings","LegendSettings","Indexes","Event","NotifyPropertyChanges","double_range_1","double_axis_1","nearSizes","farSizes","computeSize","titleSize","majorTickLines","maxLabelSize","lineStyle","padding","MajorGridLines","axisMajorGridLineColor","MinorGridLines","axisMinorGridLineColor","AxisLine","axisLineColor","MajorTickLines","axisMajorTickLineColor","MinorTickLines","axisMinorTickLineColor","CrosshairTooltip","crossHairLabelColor","crosshairLabelFont","axisBottomLine","intervalDivs","labelRotation","setRange","calculateVisibleRange","zoomFactor","zoomPosition","baseRange","actualRange","doubleRange","DoubleRange","getActualDesiredIntervalsCount","desiredIntervals","desiredIntervalsCount","maximumLabels","triggerLabelRender","tempInterval","VisibleLabels","getRangePadding","rangePadding","getMaxLabelWidth","pointX","previousEnd","isIntersect","action","labelIntersectAction","rotatedLabel","findMultiRows","findWrap","currentX","currentLabel","intervalLength","textCollection","labelCollection","isMultiRows","store","getModule","baseModule","Double","axisLabelFont","axisTitleFont","StripLineSettings","mStart","mEnd","get","enumerable","configurable","Connector","CornerRadius","Index","seriesIndex","EmptyPointSettings","calculateNumericNiceInterval","actualDesiredIntervalsCount","niceInterval","minInterval","pow","currentInterval","getActualRange","initializeDoubleRange","POSITIVE_INFINITY","NEGATIVE_INFINITY","calculateRangeAndInterval","calculateRange","applyRangePadding","calculateVisibleLabels","paddingInterval","findMinMax","yMin","yMax","xMax","findAdditional","findNormal","updateActualRange","remaining","enableAutoIntervalOnZooming","getFormat","isCustom","getNumberFormat","useGrouping","useGroupingSeparator","formatValue","palette","legendLabelFont","stripLineLabelFont","selectionRectFill","selectionRectStroke","chartModule","leftSize","rightSize","topSize","bottomSize","measureRowAxis","measureColumnAxis","calculateAxisSize","row","calculateRowSize","arrangeAxis","measureDefinition","computedHeight","column","calculateColumnSize","computedWidth","definition","nearCount","farCount","j","len_1","k","len_2","span","computedTop","plotOffset","len_3","len_4","computedLeft","actualIndex","axis_2","getActualRow","pushAxis","getActualColumn","axisCollection","actualLength","pos","columnIndex","rowIndex","rowTop","remainingHeight","columnLeft","remainingWidth","axisElement","drawAxisLine","majorGridLines","drawXAxisGridLine","drawXAxisLabels","drawXAxisTitle","drawYAxisGridLine","drawYAxisLabels","drawYAxisTitle","drawBottomLine","isRow","definitionName","optionsLine","drawLine","plotX","plotY","stroke-dasharray","minorDirection","pointY","majorGrid","majorTick","minorGird","minorTick","tickSize","axisLineSize","ticksbwtLabel","isBorder","minorGridLines","minorTickLines","minorTicksPerInterval","drawAxisMinorLine","renderGridLine","renderTickLine","startIndex","endIndex","labelElement","createZoomingLabel","logStart","logEnd","coor","logInterval","logPosition","findLogNumeric","labelPadding","rotateSize","diffHeight","yLocation","anglePadding","zoomElement","replaceChild","Points","regionData","DataLabelSettings","MarkerSettings","Trendline","initDataSource","ErrorBarCapSettings","ErrorBarSettings","SeriesBase","currentViewData","processJsonData","textMappingName","processWaterfallData","Infinity","getSeriesType","dataPoint","pushCategoryData","pushData","setEmptyPoint","option","skeleton","dateParser","getDateParser","dateFormatter","getDateFormat","parse","splineSeriesModule","findSplinePoint","xName","volume","findVisibility","isEmpty","emptyPointSettings","isNullOrUndefined","getAverage","yValues","setXYMinMax","setHiloMinMax","filter","isIndexed","data","dataManagerSuccess","getData","generateQuery","requiresCount","then","isRemoteData","recordsCount","refreshChart","propName","defaultValue","isArray","isRectSeries","drawPoints","delayedAnimation","refreshAxisLabel","findSeriesCollection","isStack","rowAxis","rowSeries","_f","_g","rectSeriesInChart","isStacking100","columnItem","calculateStackingValues","stackingGroup","lastValue","lastPositive","lastNegative","frequencies","findFrequencies","pointsLength","isNaN","percent","toFixed","stackedValues","seriesCollection_2","createSeriesElements","errorBarModule","dataLabelModule","appendSeriesElement","performAnimation","elementId","explodeValue","markerHeight","markerWidth","clipRectElement","drawCircularClipPath","symbolElement","clip-path","errorBarElement","shapeElement","doErrorBarAnimation","doMarkerAnimation","doDataLabelAnimation","ej2_data_1","initDataManager","dataManager","DataManager","Query","clone","executeQuery","marker_explode_1","renderMarker","symbolId","borderColor","isBoxPlot","parentElement","markerClipRect","getRangeLowPoint","region","markerElements","incFactor","lowPoint","MarkerExplode","get_data_1","on","mouseMoveHandler","mouseUpHandler","markerMove","currentPoints","explodeSeries","shared","pointData","chartSeries","enableTooltip","getClosestX","removeHighlightedMarker","markerExplode","drawTrackBall","colorValue","symbol","getElementsByClassName","getRectPoint","fromCenterX","fromCenterY","clickAngle","distanceFromCenter","arcAngle","sqrt","checkRegionContainsPoint","regionRect","getClosest","closest","xData_1","Location","BaseLegend","rowCount","columnCount","pageButtonSize","pageXCollections","maxColumns","isTrimmed","currentPage","legend","legendID","isChartControl","getPosition","library","getLegendBounds","getLocation","alignment","setBounds","maxItemHeight","legendHeight","legendWidth","marginBottom","alignLegend","legendSize","firstLegend","findFirstLegendPosition","legendCollections","shapeHeight","legendGroup","legendTranslateGroup","createLegendElements","legendSeriesGroup","shapeWidth","textOptions","totalPages","textPadding","shapePadding","previousLegend","legendOption","generateId","getRenderPoint","renderSymbol","renderText","toggleVisibility","isPaging","renderPagingElements","legendCollection","legendCollection_1","legendItemsGroup","clippath","createClipPath","group","symbolColor","markerShape","symbolOption","markerVisibility","fontcolor","textStyle","textOption","paginggroup","iconSize","clipPathHeight","pageTextElement","translatePage","pagingText","page","pageNumber","translate","changePage","pageUp","pageText","prefix","move","location_1","removeSvgOffset","clearTooltip","LegendOptions","control","printWindow","outerHeight","outerWidth","moveTo","screen","availWidth","availHeight","htmlContent","getHTMLContent","div","cloneNode","Element","attrs","URL","createObjectURL","Blob","XMLSerializer","serializeToString","image","Image","ctx","getContext","onload","drawImage","revokeObjectURL","navigator","msSaveOrOpenBlob","msToBlob","toLocaleLowerCase","imgURI","toDataURL","download","dispatchEvent","MouseEvent","view","bubbles","cancelable","src","DateTime","datetimeInterval","calculateDateTimeNiceInterval","intervalType","actualIntervalType","getYear","getMonth","getDay","getHour","minute","getMinutes","endMinute","getFullYear","getDate","getHours","getSeconds","endSecond","startYear","endYear","month","endMonth","day","endDay","hour","endHour","increaseDateTimeInterval","alignRangeStart","skeletonType","getSkeleton","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","sDate","intervalSize","sResult","year","minutes","seconds","startDate","endDate","totalDays","Category","ticks","Logarithmic","isFinite","calculateLogNiceInterval","axisFormat","isCustomFormat","StripLine","measureStripLine","stripline","getFromTovalue","startFromAxis","to","from","findValue","getToValue","striplineGroup","axes_1","zIndex","renderRectangle","textMid","ty","rotation","tx","getTextStart","horizontalAlignment","verticalAlignment","invertAlignment","xy","line_base_1","LineSeries","point1","point2","prevPoint","startPoint","getCoordinate","improveChartPerformance","isClosed","appendLinePath","doProgressiveAnimation","LineBase","tempPoints","xVisibleRange","yVisibleRange","seriesPoints","areaBounds","xTolerance","yTolerance","prevXValue","prevYValue","xVal","yVal","seriesPoints_1","currentPoint_1","pathElement","strokeDashArray","getAttribute","pathLength","getTotalLength","doLinearAnimation","elementHeight","elementWidth","xCenter","yCenter","column_base_1","ColumnSeries","sideBySideInfo","getSideBySideInfo","origin","pointColumn","getRectangle","triggerEvent","updateSymbolLocation","ColumnBase","enableSideBySidePlacement","getSideBySidePositions","seriesSpacing","columnSpacing","pointSpacing","columnWidth","minimumPointDelta","findRectPosition","vSeries","updateYRegion","updateXRegion","calculateRoundedRectPath","cornerRadius","topLeft","topRight","bottomLeft","bottomRight","animateRect","isPlot","lastElementChild","children","childElementCount","AreaSeries","firstPoint","endPoint","currentXValue","symbolLocation","BarSeries","pointBar","polar_radar_panel_1","PolarSeries","columnDrawTypeRender","itemCurrentXPos","pointStartAngle","pointEndAngle","dStartX","dStartY","dEndX","dEndY","inversedValue","vector","sumofYValues","rangeInterval","getSeriesPosition","doPolarRadarAnimation","animateElement","chartcenterX","chartcenterY","PolarRadarPanel","drawYAxisLine","axisLine","vector2","drawCircle","minorGirdLine","minorTickLine","labelText","firstLabelX","lastLabelX","textAnchor","majorTickLine","tickOptions","gridOptions","RadarSeries","StackingBarSeries","stackedValue","pointStack","CandleSeries","borderWidth","centerRegion","tickRegion","getPathString","triggerPointRenderEvent","drawCandle","getCandleColor","enableSolidCandles","bullFillColor","bearFillColor","topRect","midRect","candleElement","StackingColumnSeries","StepLineSeries","pathOptions","lineLength","StepAreaSeries","secondPoint","StackingAreaSeries","lineDirection","stackedvalue","previousSeries","getPreviousSeries","ScatterSeries","RangeColumnSeries","rangePoint","WaterfallSeries","originValue","prevEndValue","currentEndValue","prevRegion","intermediateOrigin","isSum","isIntermediateSum","totalSum","isSumIndex","currentRegion","prevLeft","currentLeft","prevBottom","currentBottom","connector","intermediateSumIndexes","sumIndexes","summaryFillColor","negativeFillColor","json","intermediateSum","sumIndex","HiloSeries","HiloOpenCloseSeries","highLowRect","updateTickRegion","open_1","close_1","drawHiloOpenClosePath","horizontal","RangeAreaSeries","command","closed","highPoint","closeRangeAreaPath","SplineSeries","splinePoints","pt1","pt2","bpt1","bpt2","previous","filterEmptyPoints","points_1","getPreviousIndex","getNextIndex","findSplineCoefficients","points_2","getControlPoints","splice","coefficient1","coefficient2","coefficient3","dy1","dy2","interPoint","slopeLength","ySpline","ySplineDuplicate","dx","dy","slope","cardinalSplineTension","splineType","ySpline1","ySpline2","ySplineDuplicate1","ySplineDuplicate2","deltaX2","indicator_base_1","SmaIndicator","smaPoints","validData","field","signalSeries","period","average","getDataPoint","setSeriesRange","TechnicalAnalysis","signalLine","setSeriesProperties","indicatorElement","sourcePoint","macdPositiveColor","macdNegativeColor","getRangePoint","EmaIndicator","emaPoints","prevAverage","TmaIndicator","tmaPoints","signalSeries_1","validData_1","smaValues","k_1","AccumulationDistributionIndicator","adPoints","sourceSeries","calculateADPoints","AtrIndicator","calculateATRPoints","highLow","highClose","lowClose","trueRange","MomentumIndicator","upperLine","upperCollection","signalCollection","upperSeries","RsiIndicator","showZones","lowerLine","lowerCollection","overBought","overSold","prevClose","gain","loss","close_2","StochasticIndicator","periodLine","lowerSeries","periodCollection","source","calculatePeriod","kPeriod","smaCalculation","dPeriod","pointCollection","lowValues","highValues","closeValues","modifiedSource","mins","maxs","MIN_VALUE","top_1","BollingerBands","rangeArea","bandColor","enableBand","bandCollection","rangeAreaSeries","deviationSum","multiplier","standardDeviation","limit","deviations","bollingerPoints","i_1","sma","i_2","lowerBand","upperBand","j_1","X","mb","lb","ub","MacdIndicator","macdType","macdSeries","macdLine","histogramSeries","macdLineSeries","fastPeriod","slowPeriod","macdCollection","histogramCollection","shortEMA","calculateEMAValues","longEMA","macdValues","getMACDVales","getMACDPoints","signalEMA","getSignalPoints","getHistogramPoints","initialEMA","emaValues","emaPercent","emaAvg","macdPoints","dataMACDIndex","macdIndex","signalEma","dataSignalIndex","signalIndex","shortEma","longEma","diff","dataHistogramIndex","histogramIndex","Trendlines","trendLineSeries","legendShape","createTrendLineElements","trendLineElement","trendPoint","findSlopeIntercept","xAvg","yAvg","xyAvg","xxAvg","yyAvg","intercept","trendlineSeries","setLinearRange","setExponentialRange","setMovingAverageRange","setPolynomialRange","setPowerRange","setLogarithmicRange","slopeIntercept","getExponentialPoints","xLogValue","yLogValue","xPointsLgr","getLogarithmicPoints","xPolyValues","yPolyValues","getPolynomialPoints","powerPoints","getPowerPoints","getLinearPoints","xAvgValues","getMovingAveragePoints","slopeInterceptLog","midPoint","pts","x1Log","backwardForecast","y1Log","x2Log","y2Log","x3Log","forwardForecast","y3Log","slopeInterceptPower","x3","y3","polynomialOrder","polynomialSlopes","subIndex","numArray","matrix","newIndex","nIndex","num1","num2","nIndex2","nnIndex","nnIndex2","gaussJordanElimination","getPoints","nullCount","slopeInterceptLinear","x1Linear","y1Linear","x2Linear","y2Linear","slopeInterceptExp","ptsExp","getPolynomialYValue","slopes","numArray1","numArray2","numArray3","index1","index2","index3","index4","index5","index4_1","num3","num4","iindex4","iandex4","iindex1","iindex2","num","Crosshair","elementID","mouseLeaveHandler","removeCrosshair","isIos","isIos7","disableTrackTooltip","horizontalCross","verticalCross","crossGroup","stopAnimation","valueX","valueY","lineType","axisTooltipGroup","line","renderCrosshairLine","renderAxisTooltip","lastChild","axisGroup","textElem","getAxisText","tooltipLocation","isTop","isBottom","isLeft","isRight","labelValue","tooltipRect","boundsX","boundsY","crosshairInterval","Tooltip","markerPoint","removeTooltip","isTooltip","inverted","updateTemplateFn","formattedText","header","renderGroupedTooltip","renderSeriesTooltip","textElements","className","groupElement","renderPoint","isFirst","firstText","textCollections","getTooltipText","removeText","removeHighlight","parseTemplate","highlightPoints","renderTooltip","findMouseValue","firstElement","formatPointValue","elem","seriesTooltipLocation","enableAnimation","isComplete","updateDiv","animateTooltipDiv","extraPoints","tipLocation","getBoxLocation","sharedTooltipLocation","headerSize","pathElement_1","pointRect","isIE","shadowElement","defElement","createDefs","changeText","clipX","clipY","removeRect","highlightPoint","shift","highlight","isRender","lines","tspanOption","subWidth","tspanStyle","headerSpace","isColumn","width_1","drawMarker","markerGroup","val","textValue","dataValue","RegExp","getPrototypeOf","isXPoint","isYPoint","getIndicatorTooltipFormat","toolTipInterval","tooltipElement","rectOpacity","tooltipGroup","data_2","currenDiff","zooming_toolkit_1","browserName","info","wheelEvent","toolkit","Toolkit","zoomingRect","zoomAxes","zoomkitOpacity","isIOS","renderZooming","calculateZoomAxesRange","touchStartList","isPanning","doPan","drawZoomingRectangle","currentScale","translateX","translateY","enableDeferredZooming","setTransform","performZoomRedraw","doZoom","layout","previousZF","previousZP","currentZF","currentZP","zoomRect","previousZoomFactor","previousZoomPosition","currentZoomFactor","currentZoomPosition","performMouseWheelZooming","cumulative","wheelDelta","performPinchZooming","scaleX","scaleY","translateXValue","translateYValue","pinchRect","elementOffset","touchDown","touchMove","touchMoveList","touch0StartX","touch0StartY","touch0EndX","touch0EndY","touch1StartX","touch1StartY","touch1EndX","touch1EndY","calculatePinchZoomFactor","selectionMin","selectionMax","rangeMin","rangeMax","axisTrans","actualMin","actualDelta","transX","transY","isPinch","xAxisLoc","yAxisLoc","axisRange","showZoomingToolkit","outerElement","toolboxItems","toolbarItems","xPosition","toolkitElements","currentItem","createPanButton","createZoomButton","createZoomInButton","createZoomOutButton","createResetButton","zoomToolkitMove","zoomToolkitLeave","pan","showToolkit","chartMouseWheel","mouseDownHandler","mouseCancelHandler","off","touches","addTouchPointer","reset","touchList","pointerId","length_2","selectionColor","fillColor","panElements","zoomElements","zoom","drawPolygon","polygonDirection","zoomInElements","elementOpacity","zoomIn","zoomOutElements","zoomOut","process","currentTarget","zoomInOutCalculation","applySelection","scale","zoomFactor_1","zoomPosition_1","cumulative_1","Selection","completeSelection","calculateSelectedElements","mousedown","rectPoints","dragStart","initPrivateVariables","styleId","unselected","closeIconId","draggedRectGroup","draggedRect","isSeriesMode","seriesStyles","selectDataIndex","concatIndexes","generateStyle","selectionStyle","indexes","indexes_1","getElementByIndex","suffix","getClusterElements","clusters","findElements","getSeriesElements","indexFinder","selection","blurEffect","clusterSelection","selectedElements","removeMultiSelectEelments","getSelectionClass","removeStyles","addOrRemoveIndex","applyStyles","currentIndex","toEquals","chartId","checkVisibility","visibleSeries_1","checkSelectionElements","elementClassName","parentClassName","addSvgClass","removeSvgClass","elements_1","elements_2","checkSeriesOnly","oldMode","removeSelectedElements","legendSelection","seriesStyle","isBlurEffectNeeded","NaN","elements_3","seriesElements_1","ids","calculateDragSelectedElements","dragRect","axisOffset","removeOffset","selectedPointValues","selectedSeriesValues","xAxisOffset_1","yAxisOffset_1","isCurrentPoint","createCloseButton","selectedDataValues","clip","drawDraggingRect","cartesianLayout","closeIcon","setAttributes","dragGroup","removeDraggedElements","changeCursorStyle","resizingSelectionRect","tapped","resize","findResizeMode","resizing","chartSvgObject","cursorStyle","resizeMode","resizeEdges","isResize","rectelement","seriesElements_2","getChildren","ele","object","keys_1","draggedRectMoved","grabbedPoint","doDrawing","dragging","rectGrabbing","getDragRect","BaseSelection","seriesclass","userIndexes","localIndexes","selectedIndexes","uniqueSeries","selectedIndexes_1","uniqueSeries_1","tagName","DataLabel","errorHeight","commonId","calculateErrorHeight","positiveHeight","negativeHeight","rgbValue","contrast","yAxisInversed","labelLength","fontBackground","isDataLabelShape","createDataLabelTemplate","calculateTextPosition","isShape","labelIndex","elementRect","labelRegion","getLabelLocation","locationY","alignmentValue","calculateAlignment","calculateRectPosition","locationX","calculatePathPosition","calculatePolarRectPosition","columnRadius","labelLocation","extraSpace","calculateRectActualPosition","calculateTopAndOuterPosition","calculatePathActualPosition","labelRect","isOverLap","collection","finalPosition","updateLabelLocation","markerSize","positionIndex","intersectY","shapeElements","textNode","ErrorBar","renderErrorBar","capId","errorbar","errorBarCap","errorDirection","point_1","errorX","errorY","verticalError","horizontalError","capOption","capPath","findLocation","horizontalPositiveError","verticalPositiveError","horizontalNegativeError","verticalNegativeError","error","getErrorDirection","calculateFixedValue","calculatePercentageValue","calculateStandardDeviationValue","getMean","meanCalculation","calculateStandardErrorValue","calculateCustomValue","getHorizontalDirection","mid","errorMode","capLength","capDirection","getVerticalDirection","getBothDirection","pathH","pathV","paths","verStandardMean","horStandardMean","verSquareRoot","horSquareRoot","sumOfX","sumOfY","errorBarClipRect","errorBarElements","Legend","click","visibleSeriesCollection","visibleSeriesCollection_1","extraHeight","extraWidth","legendEventArgs","maximumWidth","rowWidth","columnHeight","prevLegend","previousBound","availwidth","LegendClick","refreshSeries","legendItemsId","legendItemsId_1","ChartAnnotation","annotationElement","annotation","coordinateUnits","setElementStyle","AnnotationBase","isChart","setAnnotationPixelValue","accumulationBound","setAnnotationPointValue","isLog","setAccumulationPointValue","accumulation","accPoint","setAlignmentValue","BoxAndWhiskerSeries","centerRegion_1","findBoxPlotValues","boxPlotMode","updateTipRegion","renderBoxAndWhisker","tipRegion","updateTipSize","midWidth","midHeight","topWidth","topHeight","showMean","yCount","quartile","getExclusiveQuartileValue","getInclusiveQuartileValue","getQuartileValues","getMinMaxOutlier","percentile","rank","integerRank","fractionRank","isEvenList","halfLength","lowerQuartileArray","slice","upperQuartileArray","interquartile","rangeIQR","accumulation_1","acc_base_1","pie_series_1","funnel_series_1","pyramid_series_1","dataLabel_1","triangular_base_1","PyramidSeries","getSegmentData","area","triangleSize","seriesTop","emptySpaceAtLeft","yRatio","heightRatio","topRadius","bottomRadius","line1","line2","line3","line4","polygon","setLabelLocation","findPath","initializeSizeRatio","pyramidMode","calculateSurfaceSegments","sumOfValues","sumOfPoints","gapRatio","gapHeight","preSum","getSurfaceHeight","currY","coef","surface","solveQuadraticEquation","root1","root2","sd","midAngle","TriangularBase","accumulation_base_1","initProperties","actualChartArea","neckSize","neckWidth","neckHeight","defaultLabelBound","explodeOffset","explodeDistance","reverse","coEff","spacing","labelOffset","locations","labelBound","AccumulationBase","pieCenter","pieSeriesModule","set","pieRadius","pieLabelRadius","labelRadius","isCircular","getTooltipPoint","elementFromPoint","getSeriesFromIndex","accumulationTooltipModule","isDataLabel","processExplode","labelPosition","explodePoints","deExplodeAll","invokeExplode","explodeAll","explodeIndex","accumulationSelectionModule","pointId","deExplodeSlice","explode","pointByIndex","isExplode","explodeSlice","sliceId","setTranslate","setElementTransform","AccumulationAnnotationSettings","AccumulationDataLabelSettings","AccumulationTooltipSettings","AccPoints","labelVisible","AccumulationSeries","resultData","seriesCounts","findSumOfPoints","sumOfClub","clubValue","groupTo","setPoints","isClub","pushPoints","lastGroupTo","clubPoint","setAccEmptyPoint","seriesGroup","renderPoints","datalabelGroup","accumulationDataLabelModule","renderDataLabel","findMaxBounds","accumulationLegendModule","getSeriesElement","findAreaRect","totalbound","bound","next","constants_2","acc_base_2","AccumulationChart","accBaseModule","PieSeries","isIE11Pointer","stop","accumulationMouseMove","accumulationMouseEnd","accumulationMouseStart","accumulationOnMouseClick","accumulationRightClick","accumulationMouseLeave","accumulationResize","fadeOutTooltip","previousSize","currentSize","createPieSvg","createSecondaryElement","doGrouppingProcess","processSelection","tooltipParent","targetElement","getSmartLegendLocation","getElementsByTagName","refreshPoints","findDatalabelVisibility","update","refreshElements","pie_base_1","getPathOption","getPathArc","groupId","clipslice","PieBase","initAngles","connectorStyle","findCenter","totalAngle","accumulationRect","getSeriesBound","accumulationRectCenter","total","getRectFromAngle","nextQuandrant","lastQuadrant","flag","getDoughnutPath","getPiePath","clockWise","innerStart","innerEnd","FunnelSeries","lineWidth","endTop","endBottom","endMin","bottomY","line5","line6","AccumulationLegend","titleRect","totalRowCount","getMaxColumn","maxPageColumn","maxColumnWidth","columns_1","getAvailWidth","legendX","availablewidth","legendBound","getTitleRect","legendByIndex","legendCollections_1","currentSeries","helper_5","AccumulationDataLabel","getDataLabelPosition","getLabelDistance","getLabelRegion","marginValue","labelAngle","enableSmartLabels","getSmartLabel","circular","connectorLength","findPreviousPoint","isOverlapping","isConnectorLineOverlapping","setOuterSmartLabel","setPointVisibileFalse","textTrimming","areaRect","textsize","getOverlappedAngle","setSmartLabelForSegments","distance","textRegion","overlapHeight","getEdgeOfLabel","previousstart","previousend","isLineRectangleIntersect","isLinesIntersect","point11","point12","a1","b1","c1","a2","b2","c2","lies","getConnectorPath","getConnectorStartPoint","middle","getPolyLinePath","controlPoints","t","getBezierPoint","p0","p1","labelshape","edge","isTemplate","getTemplateSize","correctLabelRegion","setTemplateStyle","getSaturatedColor","clientRect","labelColor","doTemplateAnimation","saturatedColor","getLabelBackground","backgroundColor","ej2_popups_1","AccumulationTooltip","tooltipOption","opensOn","beforeOpen","tooltipCustomization","openDelay","closeDelay","appendTo","setTemplateFunction","tooltipIndex","updatePosition","getTooltipContent","templates","innerWidth","pointerSize","setStyleAttribute","borderRadius","pointer-events","offsetHeight","borderRightColor","borderLeftColor","borderBottomColor","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopColor","transitionProperty","transitionDuration","dataBind","pointElement","AccumulationSelection","indexes_2","checkEquals","pieId","checkPointVisibility","elementClass","parentClass","selectedDataIndexes_1","AccumulationAnnotation","pie"],"mappings":"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","file":"ej2-charts.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-popups\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@syncfusion/ej2-base\", \"@syncfusion/ej2-data\", \"@syncfusion/ej2-popups\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"@syncfusion/ej2-base\"), require(\"@syncfusion/ej2-data\"), require(\"@syncfusion/ej2-popups\")) : factory(root[\"@syncfusion/ej2-base\"], root[\"@syncfusion/ej2-data\"], root[\"@syncfusion/ej2-popups\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_85__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1), __webpack_require__(73), __webpack_require__(88)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, index_1, index_2, index_3) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(index_1);\n\t    __export(index_2);\n\t    __export(index_3);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(7), __webpack_require__(23), __webpack_require__(24), __webpack_require__(25), __webpack_require__(26), __webpack_require__(9), __webpack_require__(27), __webpack_require__(29), __webpack_require__(31), __webpack_require__(32), __webpack_require__(33), __webpack_require__(35), __webpack_require__(36), __webpack_require__(37), __webpack_require__(38), __webpack_require__(39), __webpack_require__(40), __webpack_require__(41), __webpack_require__(42), __webpack_require__(43), __webpack_require__(44), __webpack_require__(45), __webpack_require__(46), __webpack_require__(47), __webpack_require__(2), __webpack_require__(48), __webpack_require__(21), __webpack_require__(49), __webpack_require__(51), __webpack_require__(52), __webpack_require__(53), __webpack_require__(54), __webpack_require__(55), __webpack_require__(56), __webpack_require__(57), __webpack_require__(58), __webpack_require__(59), __webpack_require__(60), __webpack_require__(3), __webpack_require__(61), __webpack_require__(62), __webpack_require__(63), __webpack_require__(65), __webpack_require__(67), __webpack_require__(68), __webpack_require__(14), __webpack_require__(69), __webpack_require__(70), __webpack_require__(12), __webpack_require__(72)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_1, axis_1, date_time_axis_1, category_axis_1, logarithmic_axis_1, strip_line_1, base_1, line_series_1, column_series_1, area_series_1, bar_series_1, polar_series_1, radar_series_1, stacking_bar_series_1, candle_series_1, stacking_column_series_1, step_line_series_1, step_area_series_1, stacking_area_series_1, scatter_series_1, range_column_series_1, waterfall_series_1, hilo_series_1, hilo_open_close_series_1, range_area_series_1, bubble_series_1, spline_series_1, technical_indicator_1, sma_indicator_1, ema_indicator_1, tma_indicator_1, ad_indicator_1, atr_indicator_1, momentum_indicator_1, rsi_indicator_1, stochastic_indicator_1, bollinger_bands_1, macd_indicator_1, trend_line_1, helper_1, crosshair_1, tooltip_1, zooming_1, selection_1, data_label_1, error_bar_1, chart_series_1, legend_1, annotation_1, chart_base_1, box_and_whisker_series_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(chart_1);\n\t    __export(axis_1);\n\t    __export(date_time_axis_1);\n\t    __export(category_axis_1);\n\t    __export(logarithmic_axis_1);\n\t    __export(strip_line_1);\n\t    __export(base_1);\n\t    __export(line_series_1);\n\t    __export(column_series_1);\n\t    __export(area_series_1);\n\t    __export(bar_series_1);\n\t    __export(polar_series_1);\n\t    __export(radar_series_1);\n\t    __export(stacking_bar_series_1);\n\t    __export(candle_series_1);\n\t    __export(stacking_column_series_1);\n\t    __export(step_line_series_1);\n\t    __export(step_area_series_1);\n\t    __export(stacking_area_series_1);\n\t    __export(scatter_series_1);\n\t    __export(range_column_series_1);\n\t    __export(waterfall_series_1);\n\t    __export(hilo_series_1);\n\t    __export(hilo_open_close_series_1);\n\t    __export(range_area_series_1);\n\t    __export(bubble_series_1);\n\t    __export(spline_series_1);\n\t    __export(technical_indicator_1);\n\t    __export(sma_indicator_1);\n\t    __export(ema_indicator_1);\n\t    __export(tma_indicator_1);\n\t    __export(ad_indicator_1);\n\t    __export(atr_indicator_1);\n\t    __export(momentum_indicator_1);\n\t    __export(rsi_indicator_1);\n\t    __export(stochastic_indicator_1);\n\t    __export(bollinger_bands_1);\n\t    __export(macd_indicator_1);\n\t    __export(trend_line_1);\n\t    __export(helper_1);\n\t    __export(crosshair_1);\n\t    __export(tooltip_1);\n\t    __export(zooming_1);\n\t    __export(selection_1);\n\t    __export(data_label_1);\n\t    __export(error_bar_1);\n\t    __export(chart_series_1);\n\t    __export(legend_1);\n\t    __export(annotation_1);\n\t    __export(chart_base_1);\n\t    __export(box_and_whisker_series_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BubbleSeries = (function () {\n\t        function BubbleSeries() {\n\t        }\n\t        BubbleSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var marker = series.marker;\n\t            var visiblePoints = series.points;\n\t            var shapeOption;\n\t            var argsData;\n\t            var segmentRadius;\n\t            var radius;\n\t            var value = Math.max(series.chart.initialClipRect.height, series.chart.initialClipRect.width);\n\t            var percentChange = value / 100;\n\t            var maxRadius = series.maxRadius * percentChange;\n\t            var minRadius = series.minRadius * percentChange;\n\t            var maximumSize = null;\n\t            var maxValue = null;\n\t            if ((series.maxRadius === null || series.minRadius === null)) {\n\t                for (var _i = 0, _a = series.chart.visibleSeries; _i < _a.length; _i++) {\n\t                    var value_1 = _a[_i];\n\t                    if (value_1.type === 'Bubble' && value_1.visible === true && (value_1.maxRadius === null || value_1.minRadius === null)) {\n\t                        maximumSize = value_1.sizeMax > maximumSize ? value_1.sizeMax : maximumSize;\n\t                    }\n\t                }\n\t                maxValue = (value / 5) / 2;\n\t                minRadius = maxRadius = 1;\n\t                radius = maxValue * maxRadius;\n\t            }\n\t            else {\n\t                maximumSize = series.sizeMax;\n\t                radius = maxRadius - minRadius;\n\t            }\n\t            for (var _b = 0, visiblePoints_1 = visiblePoints; _b < visiblePoints_1.length; _b++) {\n\t                var bubblePoint = visiblePoints_1[_b];\n\t                bubblePoint.symbolLocations = [];\n\t                bubblePoint.regions = [];\n\t                if (bubblePoint.visible &&\n\t                    helper_1.withInRange(visiblePoints[bubblePoint.index - 1], bubblePoint, visiblePoints[bubblePoint.index + 1], series)) {\n\t                    bubblePoint.symbolLocations.push(helper_1.getPoint(bubblePoint.xValue, bubblePoint.yValue, xAxis, yAxis, isInverted));\n\t                    if ((series.maxRadius === null || series.minRadius === null)) {\n\t                        segmentRadius = radius * Math.abs(+bubblePoint.size / maximumSize);\n\t                    }\n\t                    else {\n\t                        segmentRadius = minRadius + radius * Math.abs(+bubblePoint.size / maximumSize);\n\t                    }\n\t                    segmentRadius = segmentRadius || minRadius;\n\t                    argsData = {\n\t                        cancel: false, name: constants_1.pointRender, series: series, point: bubblePoint,\n\t                        fill: series.setPointColor(bubblePoint, series.interior),\n\t                        border: series.setBorderColor(bubblePoint, { width: series.border.width, color: series.border.color }),\n\t                        height: 2 * segmentRadius, width: 2 * segmentRadius\n\t                    };\n\t                    series.chart.trigger(constants_1.pointRender, argsData);\n\t                    if (!argsData.cancel) {\n\t                        bubblePoint.color = argsData.fill;\n\t                        shapeOption = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index + '_Point_' + bubblePoint.index, argsData.fill, argsData.border.width, argsData.border.color, series.opacity, null);\n\t                        series.seriesElement.appendChild(helper_1.drawSymbol(bubblePoint.symbolLocations[0], 'Circle', new helper_1.Size(argsData.width, argsData.height), marker.imageUrl, shapeOption, bubblePoint.x.toString() + ':' + bubblePoint.yValue.toString()));\n\t                        bubblePoint.regions.push(new helper_1.Rect(bubblePoint.symbolLocations[0].x - segmentRadius, bubblePoint.symbolLocations[0].y - segmentRadius, 2 * segmentRadius, 2 * segmentRadius));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        BubbleSeries.prototype.destroy = function (chart) {\n\t        };\n\t        BubbleSeries.prototype.getModuleName = function () {\n\t            return 'BubbleSeries';\n\t        };\n\t        BubbleSeries.prototype.doAnimation = function (series) {\n\t            var duration = series.animation.duration;\n\t            var delay = series.animation.delay;\n\t            var rectElements = series.seriesElement.childNodes;\n\t            var count = 1;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var bubblePoint = _a[_i];\n\t                if (!bubblePoint.symbolLocations.length) {\n\t                    continue;\n\t                }\n\t                helper_1.markerAnimate(rectElements[count], delay, duration, series, bubblePoint.index, bubblePoint.symbolLocations[0], false);\n\t                count++;\n\t            }\n\t        };\n\t        return BubbleSeries;\n\t    }());\n\t    exports.BubbleSeries = BubbleSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    function measureText(text, font) {\n\t        var htmlObject = document.getElementById('chartmeasuretext');\n\t        if (htmlObject === null) {\n\t            htmlObject = ej2_base_3.createElement('text', { id: 'chartmeasuretext' });\n\t            document.body.appendChild(htmlObject);\n\t        }\n\t        htmlObject.innerHTML = text;\n\t        htmlObject.style.position = 'absolute';\n\t        htmlObject.style.fontSize = font.size;\n\t        htmlObject.style.fontWeight = font.fontWeight;\n\t        htmlObject.style.fontStyle = font.fontStyle;\n\t        htmlObject.style.fontFamily = font.fontFamily;\n\t        htmlObject.style.visibility = 'hidden';\n\t        htmlObject.style.top = '-100';\n\t        htmlObject.style.left = '0';\n\t        htmlObject.style.whiteSpace = 'nowrap';\n\t        htmlObject.style.lineHeight = 'normal';\n\t        return new Size(htmlObject.clientWidth, htmlObject.clientHeight);\n\t    }\n\t    exports.measureText = measureText;\n\t    function rotateTextSize(font, text, angle, chart) {\n\t        var renderer = new ej2_base_1.SvgRenderer(chart.element.id);\n\t        var box;\n\t        var options;\n\t        var htmlObject;\n\t        options = {\n\t            'font-size': font.size,\n\t            'font-style': font.fontStyle,\n\t            'font-family': font.fontFamily,\n\t            'font-weight': font.fontWeight,\n\t            'transform': 'rotate(' + angle + ', 0, 0)',\n\t            'text-anchor': 'middle'\n\t        };\n\t        htmlObject = renderer.createText(options, text);\n\t        if (!chart.delayRedraw) {\n\t            chart.element.appendChild(chart.svgObject);\n\t        }\n\t        chart.svgObject.appendChild(htmlObject);\n\t        box = htmlObject.getBoundingClientRect();\n\t        ej2_base_3.remove(htmlObject);\n\t        if (!chart.delayRedraw) {\n\t            ej2_base_3.remove(chart.svgObject);\n\t        }\n\t        return new Size((box.right - box.left), (box.bottom - box.top));\n\t    }\n\t    exports.rotateTextSize = rotateTextSize;\n\t    function removeElement(id) {\n\t        var element = getElement(id);\n\t        if (element) {\n\t            ej2_base_3.remove(element);\n\t        }\n\t    }\n\t    exports.removeElement = removeElement;\n\t    function logBase(value, base) {\n\t        return Math.log(value) / Math.log(base);\n\t    }\n\t    exports.logBase = logBase;\n\t    function showTooltip(text, x, y, areaWidth, id, element, isTouch) {\n\t        var tooltip = document.getElementById(id);\n\t        var width = measureText(text, {\n\t            fontFamily: 'Segoe UI', size: '12px',\n\t            fontStyle: 'Normal', fontWeight: 'Regular'\n\t        }).width + 5;\n\t        x = (x + width > areaWidth) ? x - width : x;\n\t        if (!tooltip) {\n\t            tooltip = ej2_base_3.createElement('div', {\n\t                innerHTML: text,\n\t                id: id,\n\t                styles: 'top:' + (y + 15).toString() + 'px;left:' + (x + 15).toString() + 'px;background-color: rgb(255, 255, 255);' +\n\t                    'position:absolute;border:1px solid rgb(112, 112, 112); padding-left : 3px; padding-right : 2px;' +\n\t                    'padding-bottom : 2px; padding-top : 2px; font-size:12px; font-family: \"Segoe UI\"'\n\t            });\n\t            element.appendChild(tooltip);\n\t        }\n\t        else {\n\t            tooltip.innerHTML = text;\n\t            tooltip.style.top = (y + 15).toString() + 'px';\n\t            tooltip.style.left = (x + 15).toString() + 'px';\n\t        }\n\t        if (isTouch) {\n\t            setTimeout(function () { removeElement(id); }, 1500);\n\t        }\n\t    }\n\t    exports.showTooltip = showTooltip;\n\t    function inside(value, range) {\n\t        return (value < range.max) && (value > range.min);\n\t    }\n\t    exports.inside = inside;\n\t    function withIn(value, range) {\n\t        return (value <= range.max) && (value >= range.min);\n\t    }\n\t    exports.withIn = withIn;\n\t    function withInRange(previousPoint, currentPoint, nextPoint, series) {\n\t        var mX2 = series.logWithIn(currentPoint.xValue, series.xAxis);\n\t        var mX1 = previousPoint ? series.logWithIn(previousPoint.xValue, series.xAxis) : mX2;\n\t        var mX3 = nextPoint ? series.logWithIn(nextPoint.xValue, series.xAxis) : mX2;\n\t        var xStart = Math.floor(series.xAxis.visibleRange.min);\n\t        var xEnd = Math.ceil(series.xAxis.visibleRange.max);\n\t        return ((mX1 >= xStart && mX1 <= xEnd) || (mX2 >= xStart && mX2 <= xEnd) ||\n\t            (mX3 >= xStart && mX3 <= xEnd) || (xStart >= mX1 && xStart <= mX3));\n\t    }\n\t    exports.withInRange = withInRange;\n\t    function sum(values) {\n\t        var sum = 0;\n\t        for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n\t            var value = values_1[_i];\n\t            sum += value;\n\t        }\n\t        return sum;\n\t    }\n\t    exports.sum = sum;\n\t    function subArraySum(values, first, last, index, series) {\n\t        var sum = 0;\n\t        if (index !== null) {\n\t            for (var i = (first + 1); i < last; i++) {\n\t                if (index.indexOf(i) === -1) {\n\t                    sum += values[i][series.yName];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            for (var i = (first + 1); i < last; i++) {\n\t                sum += values[i][series.yName];\n\t            }\n\t        }\n\t        return sum;\n\t    }\n\t    exports.subArraySum = subArraySum;\n\t    function subtractThickness(rect, thickness) {\n\t        rect.x += thickness.left;\n\t        rect.y += thickness.top;\n\t        rect.width -= thickness.left + thickness.right;\n\t        rect.height -= thickness.top + thickness.bottom;\n\t        return rect;\n\t    }\n\t    exports.subtractThickness = subtractThickness;\n\t    function subtractRect(rect, thickness) {\n\t        rect.x += thickness.x;\n\t        rect.y += thickness.y;\n\t        rect.width -= thickness.x + thickness.width;\n\t        rect.height -= thickness.y + thickness.height;\n\t        return rect;\n\t    }\n\t    exports.subtractRect = subtractRect;\n\t    function degreeToLocation(degree, radius, center) {\n\t        var radian = (degree * Math.PI) / 180;\n\t        return new ChartLocation(Math.cos(radian) * radius + center.x, Math.sin(radian) * radius + center.y);\n\t    }\n\t    exports.degreeToLocation = degreeToLocation;\n\t    function getAccumulationLegend(locX, locY, r, height, width, mode) {\n\t        var cartesianlarge = degreeToLocation(270, r, new ChartLocation(locX, locY));\n\t        var cartesiansmall = degreeToLocation(270, r, new ChartLocation(locX + (width / 10), locY));\n\t        return 'M' + ' ' + locX + ' ' + locY + ' ' + 'L' + ' ' + (locX + r) + ' ' + (locY) + ' ' + 'A' + ' ' + (r) + ' ' + (r) +\n\t            ' ' + 0 + ' ' + 1 + ' ' + 1 + ' ' + cartesianlarge.x + ' ' + cartesianlarge.y + ' ' + 'Z' + ' ' + 'M' + ' ' + (locX +\n\t            (width / 10)) + ' ' + (locY - (height / 10)) + ' ' + 'L' + (locX + (r)) + ' ' + (locY - height / 10) + ' ' + 'A' + ' '\n\t            + (r) + ' ' + (r) + ' ' + 0 + ' ' + 0 + ' ' + 0 + ' ' + cartesiansmall.x + ' ' + cartesiansmall.y + ' ' + 'Z';\n\t    }\n\t    function getAngle(center, point) {\n\t        var angle = Math.atan2((point.y - center.y), (point.x - center.x));\n\t        angle = angle < 0 ? (6.283 + angle) : angle;\n\t        return angle * (180 / Math.PI);\n\t    }\n\t    exports.getAngle = getAngle;\n\t    function subArray(values, index) {\n\t        var subArray = [];\n\t        for (var i = 0; i <= index - 1; i++) {\n\t            subArray.push(values[i]);\n\t        }\n\t        return subArray;\n\t    }\n\t    exports.subArray = subArray;\n\t    function valueToCoefficient(value, axis) {\n\t        var range = axis.visibleRange;\n\t        var result = (value - range.min) / (range.delta);\n\t        return axis.isInversed ? (1 - result) : result;\n\t    }\n\t    exports.valueToCoefficient = valueToCoefficient;\n\t    function TransformToVisible(x, y, xAxis, yAxis, isInverted, series) {\n\t        x = (xAxis.valueType === 'Logarithmic' ? logBase(x, xAxis.logBase) : x);\n\t        y = (yAxis.valueType === 'Logarithmic' ?\n\t            logBase(y === 0 ? 1 : y, yAxis.logBase) : y);\n\t        x += xAxis.valueType === 'Category' && xAxis.labelPlacement === 'BetweenTicks' && series.type !== 'Radar' ? 0.5 : 0;\n\t        var radius = series.chart.radius * valueToCoefficient(y, yAxis);\n\t        var point = CoefficientToVector(valueToPolarCoefficient(x, xAxis), series.chart.primaryXAxis.startAngle);\n\t        return {\n\t            x: (series.clipRect.width / 2 + series.clipRect.x) + radius * point.x,\n\t            y: (series.clipRect.height / 2 + series.clipRect.y) + radius * point.y\n\t        };\n\t    }\n\t    exports.TransformToVisible = TransformToVisible;\n\t    function CoefficientToVector(coefficient, startAngle) {\n\t        startAngle = startAngle < 0 ? startAngle + 360 : startAngle;\n\t        var angle = Math.PI * (1.5 - 2 * coefficient);\n\t        angle = angle + (startAngle * Math.PI) / 180;\n\t        return { x: Math.cos(angle), y: Math.sin(angle) };\n\t    }\n\t    exports.CoefficientToVector = CoefficientToVector;\n\t    function valueToPolarCoefficient(value, axis) {\n\t        var range = axis.visibleRange;\n\t        var delta;\n\t        var length;\n\t        if (axis.valueType !== 'Category') {\n\t            delta = (range.max - (axis.valueType === 'DateTime' ? axis.dateTimeInterval : range.interval)) - range.min;\n\t            length = axis.visibleLabels.length - 1;\n\t            delta = delta === 0 ? 1 : delta;\n\t        }\n\t        else {\n\t            delta = range.delta;\n\t            length = axis.visibleLabels.length;\n\t        }\n\t        return axis.isInversed ? ((value - range.min) / delta) * (1 - 1 / (length)) :\n\t            1 - ((value - range.min) / delta) * (1 - 1 / (length));\n\t    }\n\t    exports.valueToPolarCoefficient = valueToPolarCoefficient;\n\t    var Mean = (function () {\n\t        function Mean(verticalStandardMean, verticalSquareRoot, horizontalStandardMean, horizontalSquareRoot, verticalMean, horizontalMean) {\n\t            this.verticalStandardMean = verticalStandardMean;\n\t            this.horizontalStandardMean = horizontalStandardMean;\n\t            this.verticalSquareRoot = verticalSquareRoot;\n\t            this.horizontalSquareRoot = horizontalSquareRoot;\n\t            this.verticalMean = verticalMean;\n\t            this.horizontalMean = horizontalMean;\n\t        }\n\t        return Mean;\n\t    }());\n\t    exports.Mean = Mean;\n\t    var PolarArc = (function () {\n\t        function PolarArc(startAngle, endAngle, innerRadius, radius, currentXPosition) {\n\t            this.startAngle = startAngle;\n\t            this.endAngle = endAngle;\n\t            this.innerRadius = innerRadius;\n\t            this.radius = radius;\n\t            this.currentXPosition = currentXPosition;\n\t        }\n\t        return PolarArc;\n\t    }());\n\t    exports.PolarArc = PolarArc;\n\t    function createTooltip(id, text, top, left, fontSize) {\n\t        var tooltip = getElement(id);\n\t        var style = 'top:' + top.toString() + 'px;' +\n\t            'left:' + left.toString() + 'px;' +\n\t            'background:' + '#FFFFFF' + ';' +\n\t            'position:absolute;border:1px solid #707070;font-size:' + fontSize + ';border-radius:2px;';\n\t        if (!tooltip) {\n\t            tooltip = ej2_base_3.createElement('div', {\n\t                id: id, innerHTML: '&nbsp;' + text + '&nbsp;', styles: style\n\t            });\n\t            document.body.appendChild(tooltip);\n\t        }\n\t        else {\n\t            tooltip.setAttribute('innerHTML', '&nbsp;' + text + '&nbsp;');\n\t            tooltip.setAttribute('styles', style);\n\t        }\n\t    }\n\t    exports.createTooltip = createTooltip;\n\t    function createZoomingLabels(chart, axis, parent, index, isVertical) {\n\t        var margin = 5;\n\t        var opposedPosition = axis.opposedPosition;\n\t        var anchor = isVertical ? 'start' : 'auto';\n\t        var size;\n\t        var chartRect = chart.availableSize.width;\n\t        var x;\n\t        var y;\n\t        var rx = 3;\n\t        var arrowLocation;\n\t        var rect = axis.rect;\n\t        var direction;\n\t        for (var i = 0; i < 2; i++) {\n\t            size = measureText(i ? axis.endLabel : axis.startLabel, axis.labelStyle);\n\t            if (isVertical) {\n\t                arrowLocation = i ? new ChartLocation(rect.x, rect.y + rx) :\n\t                    new ChartLocation(axis.rect.x, (rect.y + rect.height - rx));\n\t                x = (rect.x + (opposedPosition ? (rect.width + margin) : -(size.width + margin + margin)));\n\t                y = (rect.y + (i ? 0 : rect.height - size.height - margin));\n\t                x += (x < 0 || ((chartRect) < (x + size.width + margin))) ? (opposedPosition ? -(size.width / 2) : size.width / 2) : 0;\n\t                direction = findDirection(rx, rx, new Rect(x, y, size.width + margin, size.height + margin), arrowLocation, margin, false, false, !opposedPosition, arrowLocation.x, arrowLocation.y + (i ? -rx : rx));\n\t            }\n\t            else {\n\t                arrowLocation = i ? new ChartLocation((rect.x + rect.width - rx), (rect.y + rect.height)) :\n\t                    new ChartLocation(rect.x + rx, (rect.y + rect.height));\n\t                x = (rect.x + (i ? (rect.width - size.width - margin) : 0));\n\t                y = (opposedPosition ? (rect.y - size.height - 10) : (rect.y + rect.height + margin));\n\t                direction = findDirection(rx, rx, new Rect(x, y, size.width + margin, size.height + margin), arrowLocation, margin, opposedPosition, !opposedPosition, false, arrowLocation.x + (i ? rx : -rx), arrowLocation.y);\n\t            }\n\t            x = x + (margin / 2);\n\t            y = y + (3 * (size.height / 4)) + (margin / 2);\n\t            parent.appendChild(chart.renderer.drawPath(new PathOption(chart.element.id + '_Zoom_' + index + '_AxisLabel_Shape_' + i, '#414141', 2, '#414141', 1, null, direction)));\n\t            textElement(new TextOption(chart.element.id + '_Zoom_' + index + '_AxisLabel_' + i, x, y, anchor, i ? axis.endLabel : axis.startLabel), { color: 'white', fontFamily: 'Segoe UI', fontWeight: 'Regular', size: '11px' }, 'white', parent);\n\t        }\n\t        return parent;\n\t    }\n\t    exports.createZoomingLabels = createZoomingLabels;\n\t    function withInBounds(x, y, bounds, width, height) {\n\t        if (width === void 0) { width = 0; }\n\t        if (height === void 0) { height = 0; }\n\t        return (x >= bounds.x - width && x <= bounds.x + bounds.width + width && y >= bounds.y - height\n\t            && y <= bounds.y + bounds.height + height);\n\t    }\n\t    exports.withInBounds = withInBounds;\n\t    function getValueXByPoint(value, size, axis) {\n\t        var actualValue = !axis.isInversed ? value / size : (1 - (value / size));\n\t        return actualValue * (axis.visibleRange.delta) + axis.visibleRange.min;\n\t    }\n\t    exports.getValueXByPoint = getValueXByPoint;\n\t    function getValueYByPoint(value, size, axis) {\n\t        var actualValue = axis.isInversed ? value / size : (1 - (value / size));\n\t        return actualValue * (axis.visibleRange.delta) + axis.visibleRange.min;\n\t    }\n\t    exports.getValueYByPoint = getValueYByPoint;\n\t    function findClipRect(series) {\n\t        var rect = series.clipRect;\n\t        if (series.chart.requireInvertedAxis) {\n\t            rect.x = series.yAxis.rect.x;\n\t            rect.y = series.xAxis.rect.y;\n\t            rect.width = series.yAxis.rect.width;\n\t            rect.height = series.xAxis.rect.height;\n\t        }\n\t        else {\n\t            rect.x = series.xAxis.rect.x;\n\t            rect.y = series.yAxis.rect.y;\n\t            rect.width = series.xAxis.rect.width;\n\t            rect.height = series.yAxis.rect.height;\n\t        }\n\t    }\n\t    exports.findClipRect = findClipRect;\n\t    function firstToLowerCase(str) {\n\t        return str.substr(0, 1).toLowerCase() + str.substr(1);\n\t    }\n\t    exports.firstToLowerCase = firstToLowerCase;\n\t    function getMinPointsDelta(axis, seriesCollection) {\n\t        var minDelta = Number.MAX_VALUE;\n\t        var xValues;\n\t        var minVal;\n\t        seriesCollection.forEach(function (series, index) {\n\t            xValues = [];\n\t            if (series.visible &&\n\t                (axis.name === series.xAxisName || (axis.name === 'primaryXAxis' && series.xAxisName === null)\n\t                    || (axis.name === series.chart.primaryXAxis.name && !series.xAxisName))) {\n\t                xValues = series.points.map(function (point, index) {\n\t                    return point.xValue;\n\t                });\n\t                xValues.sort(function (first, second) { return first - second; });\n\t                if (xValues.length === 1) {\n\t                    minVal = xValues[0] - ((series.xMin && series.xAxis.valueType !== 'DateTime') ?\n\t                        series.xMin : axis.visibleRange.min);\n\t                    if (minVal !== 0) {\n\t                        minDelta = Math.min(minDelta, minVal);\n\t                    }\n\t                }\n\t                else {\n\t                    xValues.forEach(function (value, index, xValues) {\n\t                        if (index > 0 && value) {\n\t                            minVal = value - xValues[index - 1];\n\t                            if (minVal !== 0) {\n\t                                minDelta = Math.min(minDelta, minVal);\n\t                            }\n\t                        }\n\t                    });\n\t                }\n\t            }\n\t        });\n\t        if (minDelta === Number.MAX_VALUE) {\n\t            minDelta = 1;\n\t        }\n\t        return minDelta;\n\t    }\n\t    exports.getMinPointsDelta = getMinPointsDelta;\n\t    function getAnimationFunction(effect) {\n\t        var functionName;\n\t        switch (effect) {\n\t            case 'Linear':\n\t                functionName = linear;\n\t                break;\n\t        }\n\t        return functionName;\n\t    }\n\t    exports.getAnimationFunction = getAnimationFunction;\n\t    function linear(currentTime, startValue, endValue, duration) {\n\t        return -endValue * Math.cos(currentTime / duration * (Math.PI / 2)) + endValue + startValue;\n\t    }\n\t    exports.linear = linear;\n\t    function markerAnimate(element, delay, duration, series, pointIndex, point, isLabel) {\n\t        var centerX = point.x;\n\t        var centerY = point.y;\n\t        var height = 0;\n\t        element.style.visibility = 'hidden';\n\t        new ej2_base_1.Animation({}).animate(element, {\n\t            duration: duration,\n\t            delay: delay,\n\t            progress: function (args) {\n\t                if (args.timeStamp > args.delay) {\n\t                    args.element.style.visibility = 'visible';\n\t                    height = ((args.timeStamp - args.delay) / args.duration);\n\t                    element.setAttribute('transform', 'translate(' + centerX\n\t                        + ' ' + centerY + ') scale(' + height + ') translate(' + (-centerX) + ' ' + (-centerY) + ')');\n\t                }\n\t            },\n\t            end: function (model) {\n\t                element.style.visibility = '';\n\t                element.removeAttribute('transform');\n\t                if ((series.type === 'Scatter' || series.type === 'Bubble') && !isLabel && (pointIndex === series.points.length - 1)) {\n\t                    series.chart.trigger('animationComplete', { series: series });\n\t                }\n\t            }\n\t        });\n\t    }\n\t    exports.markerAnimate = markerAnimate;\n\t    function templateAnimate(element, delay, duration, name, isRemove) {\n\t        new ej2_base_1.Animation({}).animate(element, {\n\t            duration: duration,\n\t            delay: delay,\n\t            name: name,\n\t            progress: function (args) {\n\t                args.element.style.visibility = 'visible';\n\t            },\n\t            end: function (args) {\n\t                if (isRemove) {\n\t                    ej2_base_3.remove(args.element);\n\t                }\n\t                else {\n\t                    args.element.style.visibility = 'visible';\n\t                }\n\t            },\n\t        });\n\t    }\n\t    exports.templateAnimate = templateAnimate;\n\t    function drawSymbol(location, shape, size, url, options, label) {\n\t        var functionName = 'Path';\n\t        var renderer = new ej2_base_1.SvgRenderer('');\n\t        var temp = calculateShapes(location, size, shape, options, url);\n\t        var htmlObject = renderer['draw' + temp.functionName](temp.renderOption);\n\t        htmlObject.setAttribute('aria-label', label);\n\t        return htmlObject;\n\t    }\n\t    exports.drawSymbol = drawSymbol;\n\t    function calculateShapes(location, size, shape, options, url) {\n\t        var path;\n\t        var functionName = 'Path';\n\t        var width = size.width;\n\t        var height = size.height;\n\t        var locX = location.x;\n\t        var locY = location.y;\n\t        var x = location.x + (-width / 2);\n\t        var y = location.y + (-height / 2);\n\t        switch (shape) {\n\t            case 'Circle':\n\t            case 'Bubble':\n\t                functionName = 'Ellipse';\n\t                ej2_base_2.merge(options, { 'rx': width / 2, 'ry': height / 2, 'cx': locX, 'cy': locY });\n\t                break;\n\t            case 'Cross':\n\t                path = 'M' + ' ' + x + ' ' + locY + ' ' + 'L' + ' ' + (locX + (width / 2)) + ' ' + locY + ' ' +\n\t                    'M' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + locX + ' ' +\n\t                    (locY + (-height / 2));\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'HorizontalLine':\n\t                path = 'M' + ' ' + x + ' ' + locY + ' ' + 'L' + ' ' + (locX + (width / 2)) + ' ' + locY;\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'VerticalLine':\n\t                path = 'M' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + locX + ' ' + (locY + (-height / 2));\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Diamond':\n\t                path = 'M' + ' ' + x + ' ' + locY + ' ' +\n\t                    'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + locY + ' ' +\n\t                    'L' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + x + ' ' + locY + ' z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Rectangle':\n\t            case 'Hilo':\n\t            case 'HiloOpenClose':\n\t            case 'Candle':\n\t            case 'Waterfall':\n\t            case 'BoxAndWhisker':\n\t            case 'StepArea':\n\t                path = 'M' + ' ' + x + ' ' + (locY + (-height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (-height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + x + ' ' + (locY + (-height / 2)) + ' z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Pyramid':\n\t            case 'Triangle':\n\t                path = 'M' + ' ' + x + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + locX + ' ' + (locY + (-height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + x + ' ' + (locY + (height / 2)) + ' z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Funnel':\n\t            case 'InvertedTriangle':\n\t                path = 'M' + ' ' + (locX + (width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n\t                    'L' + ' ' + locX + ' ' + (locY + (height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX - (width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY - (height / 2)) + ' z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Pentagon':\n\t                var eq = 72;\n\t                var xValue = void 0;\n\t                var yValue = void 0;\n\t                for (var i = 0; i <= 5; i++) {\n\t                    xValue = (width / 2) * Math.cos((Math.PI / 180) * (i * eq));\n\t                    yValue = (height / 2) * Math.sin((Math.PI / 180) * (i * eq));\n\t                    if (i === 0) {\n\t                        path = 'M' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ';\n\t                    }\n\t                    else {\n\t                        path = path.concat('L' + ' ' + (locX + xValue) + ' ' + (locY + yValue) + ' ');\n\t                    }\n\t                }\n\t                path = path.concat('Z');\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Image':\n\t                functionName = 'Image';\n\t                ej2_base_2.merge(options, { 'href': url, 'height': height, 'width': width, x: x, y: y });\n\t                break;\n\t        }\n\t        options = calculateLegendShapes(location, new Size(width, height), shape, options).renderOption;\n\t        return { renderOption: options, functionName: functionName };\n\t    }\n\t    exports.calculateShapes = calculateShapes;\n\t    function getRectLocation(startLocation, endLocation, outerRect) {\n\t        var x;\n\t        var y;\n\t        x = (endLocation.x < outerRect.x) ? outerRect.x :\n\t            (endLocation.x > (outerRect.x + outerRect.width)) ? outerRect.x + outerRect.width : endLocation.x;\n\t        y = (endLocation.y < outerRect.y) ? outerRect.y :\n\t            (endLocation.y > (outerRect.y + outerRect.height)) ? outerRect.y + outerRect.height : endLocation.y;\n\t        return new Rect((x > startLocation.x ? startLocation.x : x), (y > startLocation.y ? startLocation.y : y), Math.abs(x - startLocation.x), Math.abs(y - startLocation.y));\n\t    }\n\t    exports.getRectLocation = getRectLocation;\n\t    function minMax(value, min, max) {\n\t        return value > max ? max : (value < min ? min : value);\n\t    }\n\t    exports.minMax = minMax;\n\t    function getElement(id) {\n\t        return document.getElementById(id);\n\t    }\n\t    exports.getElement = getElement;\n\t    function getTemplateFunction(template) {\n\t        var templateFn = null;\n\t        var e;\n\t        try {\n\t            if (document.querySelectorAll(template).length) {\n\t                templateFn = ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t            }\n\t        }\n\t        catch (e) {\n\t            templateFn = ej2_base_1.compile(template);\n\t        }\n\t        return templateFn;\n\t    }\n\t    exports.getTemplateFunction = getTemplateFunction;\n\t    function createTemplate(childElement, pointIndex, content, chart, point, series) {\n\t        var templateFn;\n\t        var templateElement;\n\t        templateFn = getTemplateFunction(content);\n\t        try {\n\t            if (templateFn && templateFn({ chart: chart, series: series, point: point }).length) {\n\t                templateElement = templateFn({ chart: chart, series: series, point: point });\n\t                while (templateElement.length > 0) {\n\t                    childElement.appendChild(templateElement[0]);\n\t                }\n\t            }\n\t        }\n\t        catch (e) {\n\t            return childElement;\n\t        }\n\t        return childElement;\n\t    }\n\t    exports.createTemplate = createTemplate;\n\t    function getFontStyle(font) {\n\t        var style = '';\n\t        style = 'font-size:' + font.size +\n\t            '; font-style:' + font.fontStyle + '; font-weight:' + font.fontWeight +\n\t            '; font-family:' + font.fontFamily + ';opacity:' + font.opacity +\n\t            '; color:' + font.color + ';';\n\t        return style;\n\t    }\n\t    exports.getFontStyle = getFontStyle;\n\t    function measureElementRect(element) {\n\t        var bounds;\n\t        document.body.appendChild(element);\n\t        bounds = element.getBoundingClientRect();\n\t        removeElement(element.id);\n\t        return bounds;\n\t    }\n\t    exports.measureElementRect = measureElementRect;\n\t    function findlElement(elements, id) {\n\t        var element;\n\t        for (var i = 0, length_1 = elements.length; i < length_1; i++) {\n\t            if (elements[i].id.indexOf(id) > -1) {\n\t                element = elements[i];\n\t                continue;\n\t            }\n\t        }\n\t        return element;\n\t    }\n\t    exports.findlElement = findlElement;\n\t    function getPoint(x, y, xAxis, yAxis, isInverted, series) {\n\t        var xLength = isInverted ? xAxis.rect.height : xAxis.rect.width;\n\t        var yLength = isInverted ? yAxis.rect.width : yAxis.rect.height;\n\t        var xvalue = (xAxis.valueType === 'Logarithmic') ? logBase(((x === 0 || x < 0) ? 1 : x), xAxis.logBase) : x;\n\t        var yvalue = (yAxis.valueType === 'Logarithmic') ? logBase(((y === 0 || y < 0) ? 1 : y), yAxis.logBase) : y;\n\t        xvalue = valueToCoefficient(xvalue, xAxis);\n\t        yvalue = valueToCoefficient(yvalue, yAxis);\n\t        var locationX = isInverted ? yvalue * (yLength) : xvalue * (xLength);\n\t        var locationY = isInverted ? (1 - xvalue) * (xLength) : (1 - yvalue) * (yLength);\n\t        return new ChartLocation(locationX, locationY);\n\t    }\n\t    exports.getPoint = getPoint;\n\t    function appendElement(child, parent) {\n\t        if (child && child.hasChildNodes() && parent) {\n\t            parent.appendChild(child);\n\t        }\n\t        else {\n\t            return null;\n\t        }\n\t    }\n\t    exports.appendElement = appendElement;\n\t    function getDraggedRectLocation(x1, y1, x2, y2, outerRect) {\n\t        var width = Math.abs(x1 - x2);\n\t        var height = Math.abs(y1 - y2);\n\t        var x = Math.max(checkBounds(Math.min(x1, x2), width, outerRect.x, outerRect.width), outerRect.x);\n\t        var y = Math.max(checkBounds(Math.min(y1, y2), height, outerRect.y, outerRect.height), outerRect.y);\n\t        return new Rect(x, y, Math.min(width, outerRect.width), Math.min(height, outerRect.height));\n\t    }\n\t    exports.getDraggedRectLocation = getDraggedRectLocation;\n\t    function checkBounds(start, size, min, max) {\n\t        if (start < min) {\n\t            start = min;\n\t        }\n\t        else if ((start + size) > (max + min)) {\n\t            start = (max + min) - size;\n\t        }\n\t        return start;\n\t    }\n\t    exports.checkBounds = checkBounds;\n\t    function getLabelText(currentPoint, series, chart) {\n\t        var labelFormat = series.yAxis.labelFormat;\n\t        var text = [];\n\t        var customLabelFormat = labelFormat.match('{value}') !== null;\n\t        switch (series.seriesType) {\n\t            case 'XY':\n\t                text.push(currentPoint.text || currentPoint.yValue.toString());\n\t                break;\n\t            case 'HighLow':\n\t                text.push(currentPoint.text || Math.max(currentPoint.high, currentPoint.low).toString());\n\t                text.push(currentPoint.text || Math.min(currentPoint.high, currentPoint.low).toString());\n\t                break;\n\t            case 'HighLowOpenClose':\n\t                text.push(currentPoint.text || Math.max(currentPoint.high, currentPoint.low).toString());\n\t                text.push(currentPoint.text || Math.min(currentPoint.high, currentPoint.low).toString());\n\t                text.push(currentPoint.text || Math.max(currentPoint.open, currentPoint.close).toString());\n\t                text.push(currentPoint.text || Math.min(currentPoint.open, currentPoint.close).toString());\n\t                break;\n\t            case 'BoxPlot':\n\t                text.push(currentPoint.text || currentPoint.median.toString());\n\t                text.push(currentPoint.text || currentPoint.maximum.toString());\n\t                text.push(currentPoint.text || currentPoint.minimum.toString());\n\t                text.push(currentPoint.text || currentPoint.upperQuartile.toString());\n\t                text.push(currentPoint.text || currentPoint.lowerQuartile.toString());\n\t                for (var _i = 0, _a = currentPoint.outliers; _i < _a.length; _i++) {\n\t                    var liers = _a[_i];\n\t                    text.push(currentPoint.text || liers.toString());\n\t                }\n\t                break;\n\t        }\n\t        if (labelFormat && !currentPoint.text) {\n\t            for (var i = 0; i < text.length; i++) {\n\t                text[i] = customLabelFormat ? labelFormat.replace('{value}', series.yAxis.format(parseFloat(text[i]))) :\n\t                    series.yAxis.format(parseFloat(text[i]));\n\t            }\n\t        }\n\t        return text;\n\t    }\n\t    exports.getLabelText = getLabelText;\n\t    function stopTimer(timer) {\n\t        window.clearInterval(timer);\n\t    }\n\t    exports.stopTimer = stopTimer;\n\t    function isCollide(rect, collections, clipRect) {\n\t        var isCollide;\n\t        var currentRect = new Rect(rect.x + clipRect.x, rect.y + clipRect.y, rect.width, rect.height);\n\t        isCollide = collections.some(function (rect) {\n\t            return (currentRect.x < rect.x + rect.width && currentRect.x + currentRect.width > rect.x &&\n\t                currentRect.y < rect.y + rect.height && currentRect.height + currentRect.y > rect.y);\n\t        });\n\t        return isCollide;\n\t    }\n\t    exports.isCollide = isCollide;\n\t    function isOverlap(currentRect, rect) {\n\t        return (currentRect.x < rect.x + rect.width && currentRect.x + currentRect.width > rect.x &&\n\t            currentRect.y < rect.y + rect.height && currentRect.height + currentRect.y > rect.y);\n\t    }\n\t    exports.isOverlap = isOverlap;\n\t    function containsRect(currentRect, rect) {\n\t        return (currentRect.x <= rect.x && currentRect.x + currentRect.width >= rect.x + rect.width &&\n\t            currentRect.y <= rect.y && currentRect.height + currentRect.y >= rect.y + rect.height);\n\t    }\n\t    exports.containsRect = containsRect;\n\t    function calculateRect(location, textSize, margin) {\n\t        return new Rect((location.x - (textSize.width / 2) - margin.left), (location.y - (textSize.height / 2) - margin.top), textSize.width + margin.left + margin.right, textSize.height + margin.top + margin.bottom);\n\t    }\n\t    exports.calculateRect = calculateRect;\n\t    function convertToHexCode(value) {\n\t        return '#' + componentToHex(value.r) + componentToHex(value.g) + componentToHex(value.b);\n\t    }\n\t    exports.convertToHexCode = convertToHexCode;\n\t    function componentToHex(value) {\n\t        var hex = value.toString(16);\n\t        return hex.length === 1 ? '0' + hex : hex;\n\t    }\n\t    exports.componentToHex = componentToHex;\n\t    function convertHexToColor(hex) {\n\t        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t        return result ? new ColorValue(parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)) :\n\t            new ColorValue(255, 255, 255);\n\t    }\n\t    exports.convertHexToColor = convertHexToColor;\n\t    function colorNameToHex(color) {\n\t        var element;\n\t        color = color === 'transparent' ? 'white' : color;\n\t        element = document.getElementById('chartmeasuretext');\n\t        element.style.color = color;\n\t        color = window.getComputedStyle(element).color;\n\t        var exp = /^(rgb|hsl)(a?)[(]\\s*([\\d.]+\\s*%?)\\s*,\\s*([\\d.]+\\s*%?)\\s*,\\s*([\\d.]+\\s*%?)\\s*(?:,\\s*([\\d.]+)\\s*)?[)]$/;\n\t        var isRGBValue = exp.exec(color);\n\t        return convertToHexCode(new ColorValue(parseInt(isRGBValue[3], 10), parseInt(isRGBValue[4], 10), parseInt(isRGBValue[5], 10)));\n\t    }\n\t    exports.colorNameToHex = colorNameToHex;\n\t    function getSaturationColor(color, factor) {\n\t        color = colorNameToHex(color);\n\t        color = color.replace(/[^0-9a-f]/gi, '');\n\t        if (color.length < 6) {\n\t            color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n\t        }\n\t        factor = factor || 0;\n\t        var rgb = '#';\n\t        var colorCode;\n\t        for (var i = 0; i < 3; i++) {\n\t            colorCode = parseInt(color.substr(i * 2, 2), 16);\n\t            colorCode = Math.round(Math.min(Math.max(0, colorCode + (colorCode * factor)), 255));\n\t            rgb += ('00' + colorCode.toString(16)).substr(colorCode.toString(16).length);\n\t        }\n\t        return rgb;\n\t    }\n\t    exports.getSaturationColor = getSaturationColor;\n\t    function getMedian(values) {\n\t        var half = Math.floor(values.length / 2);\n\t        return values.length % 2 ? values[half] : ((values[half - 1] + values[half]) / 2.0);\n\t    }\n\t    exports.getMedian = getMedian;\n\t    function calculateLegendShapes(location, size, shape, options) {\n\t        var padding = 10;\n\t        var path = '';\n\t        var height = size.height;\n\t        var width = size.width;\n\t        var locX = location.x;\n\t        var locY = location.y;\n\t        switch (shape) {\n\t            case 'Line':\n\t                path = 'M' + ' ' + (locX + (-width / 2)) + ' ' + (locY) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY);\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'StepLine':\n\t                options.fill = 'transparent';\n\t                path = 'M' + ' ' + (locX + (-width / 2) - (padding / 4)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + (locX +\n\t                    (-width / 2) + (width / 10)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + (locX + (-width / 2) + (width / 10))\n\t                    + ' ' + (locY) + ' ' + 'L' + ' ' + (locX + (-width / 10)) + ' ' + (locY) + ' ' + 'L' + ' ' + (locX + (-width / 10))\n\t                    + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + (locX + (width / 5)) + ' ' + (locY + (height / 2)) + ' ' + 'L' +\n\t                    ' ' + (locX + (width / 5)) + ' ' + (locY + (-height / 2)) + ' ' + 'L' + ' ' + (locX + (width / 2)) + ' ' + (locY +\n\t                    (-height / 2)) + 'L' + ' ' + (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + '' + (locX + (width / 2)\n\t                    + (padding / 4)) + ' ' + (locY + (height / 2));\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'RightArrow':\n\t                var space = 2;\n\t                path = 'M' + ' ' + (locX + (-width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (width / 2)) + ' ' + (locY) + ' ' + 'L' + ' ' +\n\t                    (locX + (-width / 2)) + ' ' + (locY + (height / 2)) + ' L' + ' ' + (locX + (-width / 2)) + ' ' +\n\t                    (locY + (height / 2) - space) + ' ' + 'L' + ' ' + (locX + (width / 2) - (2 * space)) + ' ' + (locY) +\n\t                    ' L' + (locX + (-width / 2)) + ' ' + (locY - (height / 2) + space) + ' Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'LeftArrow':\n\t                options.fill = options.stroke;\n\t                options.stroke = 'transparent';\n\t                space = 2;\n\t                path = 'M' + ' ' + (locX + (width / 2)) + ' ' + (locY - (height / 2)) + ' ' +\n\t                    'L' + ' ' + (locX + (-width / 2)) + ' ' + (locY) + ' ' + 'L' + ' ' +\n\t                    (locX + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' +\n\t                    (locX + (width / 2)) + ' ' + (locY + (height / 2) - space) + ' L' + ' ' + (locX + (-width / 2) + (2 * space))\n\t                    + ' ' + (locY) + ' L' + (locX + (width / 2)) + ' ' + (locY - (height / 2) + space) + ' Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Column':\n\t            case 'StackingColumn':\n\t            case 'StackingColumn100':\n\t            case 'RangeColumn':\n\t                path = 'M' + ' ' + (locX - 3 * (width / 5)) + ' ' + (locY - (height / 5)) + ' ' + 'L' + ' ' +\n\t                    (locX + 3 * (-width / 10)) + ' ' + (locY - (height / 5)) + ' ' + 'L' + ' ' +\n\t                    (locX + 3 * (-width / 10)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' ' + (locX - 3 *\n\t                    (width / 5)) + ' ' + (locY + (height / 2)) + ' ' + 'Z' + ' ' + 'M' + ' ' +\n\t                    (locX + (-width / 10) - (width / 20)) + ' ' + (locY - (height / 4) - (padding / 2))\n\t                    + ' ' + 'L' + ' ' + (locX + (width / 10) + (width / 20)) + ' ' + (locY - (height / 4) -\n\t                    (padding / 2)) + ' ' + 'L' + ' ' + (locX + (width / 10) + (width / 20)) + ' ' + (locY\n\t                    + (height / 2)) + ' ' + 'L' + ' ' + (locX + (-width / 10) - (width / 20)) + ' ' + (locY +\n\t                    (height / 2)) + ' ' + 'Z' + ' ' + 'M' + ' ' + (locX + 3 * (width / 10)) + ' ' + (locY) + ' ' +\n\t                    'L' + ' ' + (locX + 3 * (width / 5)) + ' ' + (locY) + ' ' + 'L' + ' '\n\t                    + (locX + 3 * (width / 5)) + ' ' + (locY + (height / 2)) + ' ' + 'L' + ' '\n\t                    + (locX + 3 * (width / 10)) + ' ' + (locY + (height / 2)) + ' ' + 'Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Bar':\n\t            case 'StackingBar':\n\t            case 'StackingBar100':\n\t                path = 'M' + ' ' + (locX + (-width / 2) + (-padding / 4)) + ' ' + (locY - 3 * (height / 5)) + ' '\n\t                    + 'L' + ' ' + (locX + 3 * (width / 10)) + ' ' + (locY - 3 * (height / 5)) + ' ' + 'L' + ' ' +\n\t                    (locX + 3 * (width / 10)) + ' ' + (locY - 3 * (height / 10)) + ' ' + 'L' + ' ' +\n\t                    (locX - (width / 2) + (-padding / 4)) + ' ' + (locY - 3 * (height / 10)) + ' ' + 'Z' + ' '\n\t                    + 'M' + ' ' + (locX + (-width / 2) + (-padding / 4)) + ' ' + (locY - (height / 5)\n\t                    + (padding / 20)) + ' ' + 'L' + ' ' + (locX + (width / 2) + (padding / 4)) + ' ' + (locY\n\t                    - (height / 5) + (padding / 20)) + ' ' + 'L' + ' ' + (locX + (width / 2) + (padding / 4))\n\t                    + ' ' + (locY + (height / 10) + (padding / 20)) + ' ' + 'L' + ' ' + (locX - (width / 2)\n\t                    + (-padding / 4)) + ' ' + (locY + (height / 10) + (padding / 20)) + ' ' + 'Z' + ' ' + 'M'\n\t                    + ' ' + (locX - (width / 2) + (-padding / 4)) + ' ' + (locY + (height / 5)\n\t                    + (padding / 10)) + ' ' + 'L' + ' ' + (locX + (-width / 4)) + ' ' + (locY + (height / 5)\n\t                    + (padding / 10)) + ' ' + 'L' + ' ' + (locX + (-width / 4)) + ' ' + (locY + (height / 2)\n\t                    + (padding / 10)) + ' ' + 'L' + ' ' + (locX - (width / 2) + (-padding / 4))\n\t                    + ' ' + (locY + (height / 2) + (padding / 10)) + ' ' + 'Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Spline':\n\t                options.fill = 'transparent';\n\t                path = 'M' + ' ' + (locX - (width / 2)) + ' ' + (locY + (height / 5)) + ' ' + 'Q' + ' '\n\t                    + locX + ' ' + (locY - height) + ' ' + locX + ' ' + (locY + (height / 5))\n\t                    + ' ' + 'M' + ' ' + locX + ' ' + (locY + (height / 5)) + ' ' + 'Q' + ' ' + (locX\n\t                    + (width / 2)) + ' ' + (locY + (height / 2)) + ' ' + (locX + (width / 2)) + ' '\n\t                    + (locY - (height / 2));\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Area':\n\t            case 'RangeArea':\n\t            case 'StackingArea':\n\t            case 'StackingArea100':\n\t                path = 'M' + ' ' + (locX - (width / 2) - (padding / 4)) + ' ' + (locY + (height / 2))\n\t                    + ' ' + 'L' + ' ' + (locX + (-width / 4) + (-padding / 8)) + ' ' + (locY - (height / 2))\n\t                    + ' ' + 'L' + ' ' + (locX) + ' ' + (locY + (height / 4)) + ' ' + 'L' + ' ' + (locX\n\t                    + (width / 4) + (padding / 8)) + ' ' + (locY + (-height / 2) + (height / 4)) + ' '\n\t                    + 'L' + ' ' + (locX + (height / 2) + (padding / 4)) + ' ' + (locY + (height / 2)) + ' ' + 'Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'SplineArea':\n\t                path = 'M' + ' ' + (locX - (width / 2)) + ' ' + (locY + (height / 5)) + ' ' + 'Q' + ' ' + locX\n\t                    + ' ' + (locY - height) + ' ' + locX + ' ' + (locY + (height / 5)) + ' ' + 'Z' + ' ' + 'M'\n\t                    + ' ' + locX + ' ' + (locY + (height / 5)) + ' ' + 'Q' + ' ' + (locX + (width / 2)) + ' '\n\t                    + (locY + (height / 2)) + ' ' + (locX + (width / 2)) + ' '\n\t                    + (locY - (height / 2)) + ' ' + ' Z';\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t            case 'Pie':\n\t            case 'Doughnut':\n\t                options.stroke = 'transparent';\n\t                var r = Math.min(height, width) / 2;\n\t                path = getAccumulationLegend(locX, locY, r, height, width, shape);\n\t                ej2_base_2.merge(options, { 'd': path });\n\t                break;\n\t        }\n\t        return { renderOption: options };\n\t    }\n\t    exports.calculateLegendShapes = calculateLegendShapes;\n\t    function textTrim(maxWidth, text, font) {\n\t        var label = text;\n\t        var size = measureText(text, font).width;\n\t        if (size > maxWidth) {\n\t            var textLength = text.length;\n\t            for (var i = textLength - 1; i >= 0; --i) {\n\t                label = text.substring(0, i) + '...';\n\t                size = measureText(label, font).width;\n\t                if (size <= maxWidth) {\n\t                    return label;\n\t                }\n\t            }\n\t        }\n\t        return label;\n\t    }\n\t    exports.textTrim = textTrim;\n\t    function stringToNumber(value, containerSize) {\n\t        if (value !== null && value !== undefined) {\n\t            return value.indexOf('%') !== -1 ? (containerSize / 100) * parseInt(value, 10) : parseInt(value, 10);\n\t        }\n\t        return null;\n\t    }\n\t    exports.stringToNumber = stringToNumber;\n\t    function findDirection(rX, rY, rect, arrowLocation, arrowPadding, top, bottom, left, tipX, tipY, tipRadius) {\n\t        var direction = '';\n\t        var startX = rect.x;\n\t        var startY = rect.y;\n\t        var width = rect.x + rect.width;\n\t        var height = rect.y + rect.height;\n\t        tipRadius = tipRadius ? tipRadius : 0;\n\t        if (top) {\n\t            direction = direction.concat('M' + ' ' + (startX) + ' ' + (startY + rY) + ' Q ' + startX + ' '\n\t                + startY + ' ' + (startX + rX) + ' ' + startY + ' ' +\n\t                ' L' + ' ' + (width - rX) + ' ' + (startY) + ' Q ' + width + ' '\n\t                + startY + ' ' + (width) + ' ' + (startY + rY));\n\t            direction = direction.concat(' L' + ' ' + (width) + ' ' + (height - rY) + ' Q ' + width + ' '\n\t                + (height) + ' ' + (width - rX) + ' ' + (height));\n\t            if (arrowPadding !== 0) {\n\t                direction = direction.concat(' L' + ' ' + (arrowLocation.x + arrowPadding / 2) + ' ' + (height));\n\t                direction = direction.concat(' L' + ' ' + (tipX + tipRadius) + ' ' + (height + arrowPadding - tipRadius));\n\t                direction += ' Q' + ' ' + (tipX) + ' ' + (height + arrowPadding) + ' ' + (tipX - tipRadius) +\n\t                    ' ' + (height + arrowPadding - tipRadius);\n\t            }\n\t            if ((arrowLocation.x - arrowPadding / 2) > startX) {\n\t                direction = direction.concat(' L' + ' ' + (arrowLocation.x - arrowPadding / 2) + ' ' + height +\n\t                    ' L' + ' ' + (startX + rX) + ' ' + height + ' Q ' + startX + ' '\n\t                    + height + ' ' + (startX) + ' ' + (height - rY) + ' z');\n\t            }\n\t            else {\n\t                if (arrowPadding === 0) {\n\t                    direction = direction.concat(' L' + ' ' + (startX + rX) + ' ' + height + ' Q ' + startX + ' '\n\t                        + height + ' ' + (startX) + ' ' + (height - rY) + ' z');\n\t                }\n\t                else {\n\t                    direction = direction.concat(' L' + ' ' + (startX) + ' ' + (height + rY) + ' z');\n\t                }\n\t            }\n\t        }\n\t        else if (bottom) {\n\t            direction = direction.concat('M' + ' ' + (startX) + ' ' + (startY + rY) + ' Q ' + startX + ' '\n\t                + (startY) + ' ' + (startX + rX) + ' ' + (startY) + ' L' + ' ' + (arrowLocation.x - arrowPadding / 2) + ' ' + (startY));\n\t            direction = direction.concat(' L' + ' ' + (tipX - tipRadius) + ' ' + (arrowLocation.y + tipRadius));\n\t            direction += ' Q' + ' ' + (tipX) + ' ' + (arrowLocation.y) + ' ' + (tipX + tipRadius) + ' ' + (arrowLocation.y + tipRadius);\n\t            direction = direction.concat(' L' + ' ' + (arrowLocation.x + arrowPadding / 2) + ' ' + (startY) + ' L' + ' '\n\t                + (width - rX) + ' ' + (startY) + ' Q ' + (width) + ' ' + (startY) + ' ' + (width) + ' ' + (startY + rY));\n\t            direction = direction.concat(' L' + ' ' + (width) + ' ' + (height - rY) + ' Q ' + (width) + ' '\n\t                + (height) + ' ' + (width - rX) + ' ' + (height) +\n\t                ' L' + ' ' + (startX + rX) + ' ' + (height) + ' Q ' + (startX) + ' '\n\t                + (height) + ' ' + (startX) + ' ' + (height - rY) + ' z');\n\t        }\n\t        else if (left) {\n\t            direction = direction.concat('M' + ' ' + (startX) + ' ' + (startY + rY) + ' Q ' + startX + ' '\n\t                + (startY) + ' ' + (startX + rX) + ' ' + (startY));\n\t            direction = direction.concat(' L' + ' ' + (width - rX) + ' ' + (startY) + ' Q ' + (width) + ' '\n\t                + (startY) + ' ' + (width) + ' ' + (startY + rY) + ' L' + ' ' + (width) + ' ' + (arrowLocation.y - arrowPadding / 2));\n\t            direction = direction.concat(' L' + ' ' + (width + arrowPadding - tipRadius) + ' ' + (tipY - tipRadius));\n\t            direction += ' Q ' + (width + arrowPadding) + ' ' + (tipY) + ' ' + (width + arrowPadding - tipRadius) + ' ' + (tipY + tipRadius);\n\t            direction = direction.concat(' L' + ' ' + (width) + ' ' + (arrowLocation.y + arrowPadding / 2) +\n\t                ' L' + ' ' + (width) + ' ' + (height - rY) + ' Q ' + width + ' ' + (height) + ' ' + (width - rX) + ' ' + (height));\n\t            direction = direction.concat(' L' + ' ' + (startX + rX) + ' ' + (height) + ' Q ' + startX + ' '\n\t                + (height) + ' ' + (startX) + ' ' + (height - rY) + ' z');\n\t        }\n\t        else {\n\t            direction = direction.concat('M' + ' ' + (startX + rX) + ' ' + (startY) + ' Q ' + (startX) + ' '\n\t                + (startY) + ' ' + (startX) + ' ' + (startY + rY) + ' L' + ' ' + (startX) + ' ' + (arrowLocation.y - arrowPadding / 2));\n\t            direction = direction.concat(' L' + ' ' + (startX - arrowPadding + tipRadius) + ' ' + (tipY - tipRadius));\n\t            direction += ' Q ' + (startX - arrowPadding) + ' ' + (tipY) + ' ' + (startX - arrowPadding + tipRadius) + ' ' + (tipY + tipRadius);\n\t            direction = direction.concat(' L' + ' ' + (startX) + ' ' + (arrowLocation.y + arrowPadding / 2) +\n\t                ' L' + ' ' + (startX) + ' ' + (height - rY) + ' Q ' + startX + ' '\n\t                + (height) + ' ' + (startX + rX) + ' ' + (height));\n\t            direction = direction.concat(' L' + ' ' + (width - rX) + ' ' + (height) + ' Q ' + width + ' '\n\t                + (height) + ' ' + (width) + ' ' + (height - rY) +\n\t                ' L' + ' ' + (width) + ' ' + (startY + rY) + ' Q ' + width + ' '\n\t                + (startY) + ' ' + (width - rX) + ' ' + (startY) + ' z');\n\t        }\n\t        return direction;\n\t    }\n\t    exports.findDirection = findDirection;\n\t    function textElement(options, font, color, parent, isMinus) {\n\t        if (isMinus === void 0) { isMinus = false; }\n\t        var renderOptions = {};\n\t        var htmlObject;\n\t        var tspanElement;\n\t        var renderer = new ej2_base_1.SvgRenderer('');\n\t        var text;\n\t        var height;\n\t        renderOptions = {\n\t            'id': options.id,\n\t            'x': options.x,\n\t            'y': options.y,\n\t            'fill': color,\n\t            'font-size': font.size,\n\t            'font-style': font.fontStyle,\n\t            'font-family': font.fontFamily,\n\t            'font-weight': font.fontWeight,\n\t            'text-anchor': options.anchor,\n\t            'transform': options.transform,\n\t            'opacity': font.opacity,\n\t            'dominant-baseline': options.baseLine\n\t        };\n\t        text = typeof options.text === 'string' ? options.text : isMinus ? options.text[options.text.length - 1] : options.text[0];\n\t        htmlObject = renderer.createText(renderOptions, text);\n\t        if (typeof options.text !== 'string' && options.text.length > 1) {\n\t            for (var i = 1, len = options.text.length; i < len; i++) {\n\t                height = (measureText(options.text[i], font).height);\n\t                tspanElement = renderer.createTSpan({\n\t                    'x': options.x, 'id': options.id,\n\t                    'y': (options.y) + ((isMinus) ? -(i * height) : (i * height))\n\t                }, isMinus ? options.text[options.text.length - (i + 1)] : options.text[i]);\n\t                htmlObject.appendChild(tspanElement);\n\t            }\n\t        }\n\t        parent.appendChild(htmlObject);\n\t        return htmlObject;\n\t    }\n\t    exports.textElement = textElement;\n\t    function calculateSize(chart) {\n\t        var containerWidth = chart.element.clientWidth;\n\t        var containerHeight = chart.element.clientHeight;\n\t        chart.availableSize = new Size(stringToNumber(chart.width, containerWidth) || containerWidth || 600, stringToNumber(chart.height, containerHeight) || containerHeight || 450);\n\t    }\n\t    exports.calculateSize = calculateSize;\n\t    function createSvg(chart) {\n\t        chart.renderer = new ej2_base_1.SvgRenderer(chart.element.id);\n\t        calculateSize(chart);\n\t        chart.svgObject = chart.renderer.createSvg({\n\t            id: chart.element.id + '_svg',\n\t            width: chart.availableSize.width,\n\t            height: chart.availableSize.height\n\t        });\n\t    }\n\t    exports.createSvg = createSvg;\n\t    function titlePositionX(chartSize, leftPadding, rightPadding, titleStyle, textSize) {\n\t        var positionX;\n\t        if (titleStyle.textAlignment === 'Near') {\n\t            positionX = leftPadding;\n\t        }\n\t        else if (titleStyle.textAlignment === 'Center') {\n\t            positionX = chartSize.width / 2 - textSize.width / 2;\n\t        }\n\t        else {\n\t            positionX = chartSize.width - rightPadding - textSize.width;\n\t        }\n\t        return positionX;\n\t    }\n\t    exports.titlePositionX = titlePositionX;\n\t    var CustomizeOption = (function () {\n\t        function CustomizeOption(id) {\n\t            this.id = id;\n\t        }\n\t        return CustomizeOption;\n\t    }());\n\t    exports.CustomizeOption = CustomizeOption;\n\t    var StackValues = (function () {\n\t        function StackValues(startValue, endValue) {\n\t            this.startValues = startValue;\n\t            this.endValues = endValue;\n\t        }\n\t        return StackValues;\n\t    }());\n\t    exports.StackValues = StackValues;\n\t    var TextOption = (function (_super) {\n\t        __extends(TextOption, _super);\n\t        function TextOption(id, x, y, anchor, text, transform, baseLine) {\n\t            if (transform === void 0) { transform = ''; }\n\t            var _this = _super.call(this, id) || this;\n\t            _this.transform = '';\n\t            _this.baseLine = 'auto';\n\t            _this.x = x;\n\t            _this.y = y;\n\t            _this.anchor = anchor;\n\t            _this.text = text;\n\t            _this.transform = transform;\n\t            _this.baseLine = baseLine;\n\t            return _this;\n\t        }\n\t        return TextOption;\n\t    }(CustomizeOption));\n\t    exports.TextOption = TextOption;\n\t    var PathOption = (function (_super) {\n\t        __extends(PathOption, _super);\n\t        function PathOption(id, fill, width, color, opacity, dashArray, d) {\n\t            var _this = _super.call(this, id) || this;\n\t            _this.opacity = opacity;\n\t            _this.fill = fill;\n\t            _this.stroke = color;\n\t            _this['stroke-width'] = width;\n\t            _this['stroke-dasharray'] = dashArray;\n\t            _this.d = d;\n\t            return _this;\n\t        }\n\t        return PathOption;\n\t    }(CustomizeOption));\n\t    exports.PathOption = PathOption;\n\t    var RectOption = (function (_super) {\n\t        __extends(RectOption, _super);\n\t        function RectOption(id, fill, border, opacity, rect, rx, ry, transform, dashArray) {\n\t            var _this = _super.call(this, id, fill, border.width, border.color, opacity, dashArray) || this;\n\t            _this.y = rect.y;\n\t            _this.x = rect.x;\n\t            _this.height = rect.height;\n\t            _this.width = rect.width;\n\t            _this.rx = rx ? rx : 0;\n\t            _this.ry = ry ? ry : 0;\n\t            _this.transform = transform ? transform : '';\n\t            return _this;\n\t        }\n\t        return RectOption;\n\t    }(PathOption));\n\t    exports.RectOption = RectOption;\n\t    var CircleOption = (function (_super) {\n\t        __extends(CircleOption, _super);\n\t        function CircleOption(id, fill, border, opacity, cx, cy, r) {\n\t            var _this = _super.call(this, id, fill, border.width, border.color, opacity) || this;\n\t            _this.cy = cy;\n\t            _this.cx = cx;\n\t            _this.r = r;\n\t            return _this;\n\t        }\n\t        return CircleOption;\n\t    }(PathOption));\n\t    exports.CircleOption = CircleOption;\n\t    var PolygonOption = (function () {\n\t        function PolygonOption(id, points, fill) {\n\t            this.id = id;\n\t            this.points = points;\n\t            this.fill = fill;\n\t        }\n\t        return PolygonOption;\n\t    }());\n\t    exports.PolygonOption = PolygonOption;\n\t    var Size = (function () {\n\t        function Size(width, height) {\n\t            this.width = width;\n\t            this.height = height;\n\t        }\n\t        return Size;\n\t    }());\n\t    exports.Size = Size;\n\t    var Rect = (function () {\n\t        function Rect(x, y, width, height) {\n\t            this.x = x;\n\t            this.y = y;\n\t            this.width = width;\n\t            this.height = height;\n\t        }\n\t        return Rect;\n\t    }());\n\t    exports.Rect = Rect;\n\t    var ChartLocation = (function () {\n\t        function ChartLocation(x, y) {\n\t            this.x = x;\n\t            this.y = y;\n\t        }\n\t        return ChartLocation;\n\t    }());\n\t    exports.ChartLocation = ChartLocation;\n\t    var Thickness = (function () {\n\t        function Thickness(left, right, top, bottom) {\n\t            this.left = left;\n\t            this.right = right;\n\t            this.top = top;\n\t            this.bottom = bottom;\n\t        }\n\t        return Thickness;\n\t    }());\n\t    exports.Thickness = Thickness;\n\t    var ColorValue = (function () {\n\t        function ColorValue(r, g, b) {\n\t            this.r = r;\n\t            this.g = g;\n\t            this.b = b;\n\t        }\n\t        return ColorValue;\n\t    }());\n\t    exports.ColorValue = ColorValue;\n\t    var PointData = (function () {\n\t        function PointData(point, series, index) {\n\t            if (index === void 0) { index = 0; }\n\t            this.point = point;\n\t            this.series = series;\n\t            this.lierIndex = index;\n\t        }\n\t        return PointData;\n\t    }());\n\t    exports.PointData = PointData;\n\t    var ControlPoints = (function () {\n\t        function ControlPoints(controlPoint1, controlPoint2) {\n\t            this.controlPoint1 = controlPoint1;\n\t            this.controlPoint2 = controlPoint2;\n\t        }\n\t        return ControlPoints;\n\t    }());\n\t    exports.ControlPoints = ControlPoints;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    exports.loaded = 'loaded';\n\t    exports.load = 'load';\n\t    exports.animationComplete = 'animationComplete';\n\t    exports.legendRender = 'legendRender';\n\t    exports.textRender = 'textRender';\n\t    exports.pointRender = 'pointRender';\n\t    exports.seriesRender = 'seriesRender';\n\t    exports.axisLabelRender = 'axisLabelRender';\n\t    exports.tooltipRender = 'tooltipRender';\n\t    exports.chartMouseMove = 'chartMouseMove';\n\t    exports.chartMouseClick = 'chartMouseClick';\n\t    exports.chartMouseLeave = 'chartMouseLeave';\n\t    exports.chartMouseDown = 'chartMouseDown';\n\t    exports.chartMouseUp = 'chartMouseUp';\n\t    exports.zoomComplete = 'zoomComplete';\n\t    exports.dragComplete = 'dragComplete';\n\t    exports.resized = 'resized';\n\t    exports.beforePrint = 'beforePrint';\n\t    exports.annotationRender = 'annotationRender';\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(3), __webpack_require__(11), __webpack_require__(9), __webpack_require__(7), __webpack_require__(13), __webpack_require__(3), __webpack_require__(14), __webpack_require__(15), __webpack_require__(17), __webpack_require__(20), __webpack_require__(21), __webpack_require__(5), __webpack_require__(22), __webpack_require__(12), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_base_4, ej2_base_5, ej2_base_6, helper_1, helper_2, theme_1, base_1, axis_1, cartesian_panel_1, helper_3, chart_series_1, data_1, marker_1, legend_1, technical_indicator_1, constants_1, export_1, chart_base_1, helper_4) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TooltipSettings = (function (_super) {\n\t        __extends(TooltipSettings, _super);\n\t        function TooltipSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return TooltipSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], TooltipSettings.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], TooltipSettings.prototype, \"shared\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#000816')\n\t    ], TooltipSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], TooltipSettings.prototype, \"header\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0.75)\n\t    ], TooltipSettings.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex(theme_1.Theme.tooltipLabelFont, base_1.Font)\n\t    ], TooltipSettings.prototype, \"textStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], TooltipSettings.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], TooltipSettings.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], TooltipSettings.prototype, \"enableAnimation\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ color: '#cccccc', width: 0.5 }, base_1.Border)\n\t    ], TooltipSettings.prototype, \"border\", void 0);\n\t    exports.TooltipSettings = TooltipSettings;\n\t    var CrosshairSettings = (function (_super) {\n\t        __extends(CrosshairSettings, _super);\n\t        function CrosshairSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return CrosshairSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], CrosshairSettings.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ color: '#4f4f4f', width: 1 }, base_1.Border)\n\t    ], CrosshairSettings.prototype, \"line\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], CrosshairSettings.prototype, \"lineType\", void 0);\n\t    exports.CrosshairSettings = CrosshairSettings;\n\t    var ZoomSettings = (function (_super) {\n\t        __extends(ZoomSettings, _super);\n\t        function ZoomSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ZoomSettings;\n\t    }(ej2_base_2.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ZoomSettings.prototype, \"enableSelectionZooming\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ZoomSettings.prototype, \"enablePinchZooming\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ZoomSettings.prototype, \"enableMouseWheelZooming\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], ZoomSettings.prototype, \"enableDeferredZooming\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('XY')\n\t    ], ZoomSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(['Zoom', 'ZoomIn', 'ZoomOut', 'Pan', 'Reset'])\n\t    ], ZoomSettings.prototype, \"toolbarItems\", void 0);\n\t    exports.ZoomSettings = ZoomSettings;\n\t    var Chart = (function (_super) {\n\t        __extends(Chart, _super);\n\t        function Chart(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.chartAreaType = 'Cartesian';\n\t            return _this;\n\t        }\n\t        Chart.prototype.preRender = function () {\n\t            this.unWireEvents();\n\t            this.initPrivateVariable();\n\t            this.setCulture();\n\t            this.setTheme();\n\t            this.createChartSvg();\n\t            this.wireEvents();\n\t        };\n\t        Chart.prototype.initPrivateVariable = function () {\n\t            this.animateSeries = true;\n\t            this.horizontalAxes = [];\n\t            this.verticalAxes = [];\n\t            this.refreshAxis();\n\t            this.refreshDefinition(this.rows);\n\t            this.refreshDefinition(this.columns);\n\t            if (this.tooltipModule) {\n\t                this.tooltipModule.previousPoints = [];\n\t            }\n\t        };\n\t        Chart.prototype.render = function () {\n\t            this.trigger(constants_1.load, { chart: this });\n\t            this.markerRender = new marker_1.Marker(this);\n\t            this.calculateAreaType();\n\t            this.calculateVisibleSeries();\n\t            this.initTechnicalIndicators();\n\t            this.initTrendLines();\n\t            this.calculateVisibleAxis();\n\t            this.processData();\n\t        };\n\t        Chart.prototype.getLocalizedLabel = function (key) {\n\t            return this.localeObject.getConstant(key);\n\t        };\n\t        Chart.prototype.refreshBound = function () {\n\t            if (this.legendModule && this.legendSettings.visible) {\n\t                this.legendModule.getLegendOptions(this.visibleSeries);\n\t            }\n\t            var isCalculateStacking = false;\n\t            var series;\n\t            for (var i = 0, len = this.visibleSeries.length; i < len; i++) {\n\t                series = this.visibleSeries[i];\n\t                series.position = series.rectCount = undefined;\n\t                if (((series.type.indexOf('Stacking') !== -1) || (series.drawType.indexOf('Stacking') !== -1\n\t                    && this.chartAreaType === 'PolarRadar')) && !isCalculateStacking) {\n\t                    series.calculateStackedValue(series.type.indexOf('100') > -1);\n\t                    isCalculateStacking = true;\n\t                }\n\t            }\n\t            this.calculateBounds();\n\t            this.renderElements();\n\t        };\n\t        Chart.prototype.renderElements = function () {\n\t            this.renderBorder();\n\t            this.renderTitle();\n\t            this.renderAreaBorder();\n\t            this.renderSeriesElements();\n\t            this.applyZoomkit();\n\t            this.performSelection();\n\t            this.setSecondaryElementPosition();\n\t            this.renderAnnotation();\n\t        };\n\t        Chart.prototype.setSecondaryElementPosition = function () {\n\t            var element = helper_4.getElement(this.element.id + '_Secondary_Element');\n\t            if (!element) {\n\t                return;\n\t            }\n\t            var rect = this.element.getBoundingClientRect();\n\t            var svgRect = helper_4.getElement(this.element.id + '_svg').getBoundingClientRect();\n\t            element.style.left = Math.max(svgRect.left - rect.left, 0) + 'px';\n\t            element.style.top = Math.max(svgRect.top - rect.top, 0) + 'px';\n\t        };\n\t        Chart.prototype.initializeModuleElements = function () {\n\t            this.dataLabelCollections = [];\n\t            this.seriesElements = this.renderer.createGroup({ id: this.element.id + 'SeriesCollection' });\n\t            this.yAxisElements = this.renderer.createGroup({ id: this.element.id + 'yAxisCollection' });\n\t            if (this.indicators.length) {\n\t                this.indicatorElements = this.renderer.createGroup({ id: this.element.id + 'IndicatorCollection' });\n\t            }\n\t            if (this.hasTrendlines()) {\n\t                this.trendLineElements = this.renderer.createGroup({ id: this.element.id + 'TrendLineCollection' });\n\t            }\n\t            this.dataLabelElements = this.renderer.createGroup({ id: this.element.id + 'DataLabelCollection' });\n\t        };\n\t        Chart.prototype.hasTrendlines = function () {\n\t            var isTrendline;\n\t            for (var _i = 0, _a = this.series; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                isTrendline = series.trendlines.length ? true : false;\n\t                if (isTrendline) {\n\t                    break;\n\t                }\n\t            }\n\t            return isTrendline;\n\t        };\n\t        Chart.prototype.renderSeriesElements = function () {\n\t            this.initializeModuleElements();\n\t            if (this.rows.length > 0 && this.columns.length > 0) {\n\t                this.chartAxisLayoutPanel.renderAxes();\n\t                var tooltipDiv = document.createElement('div');\n\t                tooltipDiv.id = this.element.id + '_Secondary_Element';\n\t                tooltipDiv.setAttribute('style', 'position: relative');\n\t                this.element.appendChild(tooltipDiv);\n\t                if (this.tooltip.enable) {\n\t                    this.svgObject.appendChild(this.renderer.createGroup({ id: this.element.id + '_UserInteraction', style: 'pointer-events:none;' }));\n\t                }\n\t                for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\n\t                    var indicator = _a[_i];\n\t                    if (this[helper_2.firstToLowerCase(indicator.type) + 'IndicatorModule']) {\n\t                        this[helper_2.firstToLowerCase(indicator.type) + 'IndicatorModule'].createIndicatorElements(this, indicator, indicator.index);\n\t                    }\n\t                }\n\t                for (var _b = 0, _c = this.visibleSeries; _b < _c.length; _b++) {\n\t                    var series = _c[_b];\n\t                    if (series.trendlines.length) {\n\t                        this.trendLineModule.getTrendLineElements(series, this);\n\t                    }\n\t                }\n\t                for (var _d = 0, _e = this.visibleSeries; _d < _e.length; _d++) {\n\t                    var item = _e[_d];\n\t                    if (item.visible) {\n\t                        helper_1.findClipRect(item);\n\t                        item.renderSeries(this, item.index);\n\t                    }\n\t                }\n\t            }\n\t            this.appendSeriesElements();\n\t        };\n\t        Chart.prototype.appendSeriesElements = function () {\n\t            var clipRect = this.renderer.drawClipPath({\n\t                'id': this.element.id + '_ChartAreaClipRect_',\n\t                'x': this.chartAxisLayoutPanel.seriesClipRect.x,\n\t                'y': this.chartAxisLayoutPanel.seriesClipRect.y,\n\t                'width': this.chartAxisLayoutPanel.seriesClipRect.width,\n\t                'height': this.chartAxisLayoutPanel.seriesClipRect.height,\n\t                'fill': 'transparent',\n\t                'stroke-width': 1,\n\t                'stroke': 'Gray'\n\t            });\n\t            this.seriesElements.appendChild(clipRect);\n\t            if (this.dataLabelElements.hasChildNodes()) {\n\t                this.seriesElements.appendChild(this.dataLabelElements);\n\t            }\n\t            if (this.stripLineModule) {\n\t                this.stripLineModule.renderStripLine(this, 'Behind', this.axisCollections);\n\t            }\n\t            this.svgObject.appendChild(this.seriesElements);\n\t            if (this.chartAreaType === 'PolarRadar') {\n\t                this.svgObject.appendChild(this.yAxisElements);\n\t            }\n\t            if (this.indicatorElements) {\n\t                this.svgObject.appendChild(this.indicatorElements);\n\t            }\n\t            if (this.trendLineElements) {\n\t                this.svgObject.appendChild(this.trendLineElements);\n\t            }\n\t            if (this.stripLineModule) {\n\t                this.stripLineModule.renderStripLine(this, 'Over', this.axisCollections);\n\t            }\n\t            if (this.legendModule) {\n\t                this.legendModule.renderLegend(this, this.legendSettings, this.legendModule.legendBounds);\n\t            }\n\t            if (!this.tooltip.enable) {\n\t                this.svgObject.appendChild(this.renderer.createGroup({ id: this.element.id + '_UserInteraction', style: 'pointer-events:none;' }));\n\t            }\n\t            this.element.appendChild(this.svgObject);\n\t        };\n\t        Chart.prototype.applyZoomkit = function () {\n\t            if (this.zoomModule && this.zoomModule.isZoomed) {\n\t                this.zoomModule.applyZoomToolkit(this, this.axisCollections);\n\t            }\n\t        };\n\t        Chart.prototype.renderAnnotation = function () {\n\t            if (this.annotationModule) {\n\t                this.annotationModule.renderAnnotations(helper_4.getElement(this.element.id + '_Secondary_Element'));\n\t            }\n\t        };\n\t        Chart.prototype.performSelection = function () {\n\t            var selectedDataIndexes = [];\n\t            if (this.selectionModule) {\n\t                selectedDataIndexes = ej2_base_4.extend([], this.selectionModule.selectedDataIndexes, null, true);\n\t                this.selectionModule.invokeSelection(this);\n\t            }\n\t            if (selectedDataIndexes.length > 0) {\n\t                this.selectionModule.selectedDataIndexes = selectedDataIndexes;\n\t                this.selectionModule.redrawSelection(this, this.selectionMode);\n\t            }\n\t        };\n\t        Chart.prototype.processData = function () {\n\t            var series;\n\t            this.visibleSeriesCount = 0;\n\t            var check = true;\n\t            for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                var series_1 = _a[_i];\n\t                if (!series_1.visible) {\n\t                    this.visibleSeriesCount++;\n\t                    continue;\n\t                }\n\t                if (series_1.category !== 'Indicator' && series_1.category !== 'TrendLine') {\n\t                    this.initializeDataModule(series_1);\n\t                }\n\t            }\n\t            for (var _b = 0, _c = this.indicators; _b < _c.length; _b++) {\n\t                var indicator = _c[_b];\n\t                if (!indicator.seriesName && indicator.dataSource) {\n\t                    var techIndicator = indicator;\n\t                    this.initializeDataModule(techIndicator);\n\t                    check = false;\n\t                }\n\t            }\n\t            if (!this.visibleSeries.length || this.visibleSeriesCount === this.visibleSeries.length && check) {\n\t                this.refreshBound();\n\t                this.trigger('loaded', { chart: this });\n\t            }\n\t        };\n\t        Chart.prototype.initializeDataModule = function (series) {\n\t            series.xData = [];\n\t            series.yData = [];\n\t            series.dataModule = new data_1.Data(series.dataSource, series.query);\n\t            series.points = [];\n\t            series.refreshDataManager(this);\n\t        };\n\t        Chart.prototype.calculateBounds = function () {\n\t            var padding = 15;\n\t            var margin = this.margin;\n\t            var titleHeight = 0;\n\t            if (this.title) {\n\t                titleHeight = helper_1.measureText(this.title, this.titleStyle).height + padding;\n\t            }\n\t            var top = margin.top + titleHeight + this.chartArea.border.width / 2;\n\t            var left = margin.left;\n\t            var width = this.availableSize.width - left - margin.right - this.border.width;\n\t            var height = this.availableSize.height - top - this.border.width - margin.bottom;\n\t            this.initialClipRect = new helper_3.Rect(left, top, width, height);\n\t            if (this.legendModule) {\n\t                this.legendModule.calculateLegendBounds(this.initialClipRect, this.availableSize);\n\t            }\n\t            this.chartAxisLayoutPanel.measureAxis(this.initialClipRect);\n\t        };\n\t        Chart.prototype.print = function (id) {\n\t            var exportChart = new export_1.ExportUtils(this);\n\t            exportChart.print(id);\n\t        };\n\t        Chart.prototype.export = function (type, fileName) {\n\t            var exportChart = new export_1.ExportUtils(this);\n\t            exportChart.export(type, fileName);\n\t        };\n\t        Chart.prototype.initTrendLines = function () {\n\t            for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                var trendIndex = 0;\n\t                for (var _b = 0, _c = series.trendlines; _b < _c.length; _b++) {\n\t                    var trendline = _c[_b];\n\t                    var trendLine = trendline;\n\t                    var type = helper_2.firstToLowerCase(trendLine.type);\n\t                    if (this.trendLineModule) {\n\t                        trendLine.index = trendIndex;\n\t                        trendLine.sourceIndex = series.index;\n\t                        this.trendLineModule.initSeriesCollection(trendLine, this);\n\t                        if (trendLine.targetSeries) {\n\t                            this.visibleSeries.push(trendLine.targetSeries);\n\t                        }\n\t                    }\n\t                    trendIndex++;\n\t                }\n\t            }\n\t        };\n\t        Chart.prototype.calculateAreaType = function () {\n\t            var series = this.series[0];\n\t            if (series) {\n\t                this.requireInvertedAxis = ((series.type.indexOf('Bar') !== -1) && !this.isTransposed) ||\n\t                    ((series.type.indexOf('Bar') === -1) && this.isTransposed && this.chartAreaType !== 'PolarRadar');\n\t            }\n\t            this.chartAxisLayoutPanel = this.chartAreaType === 'PolarRadar' ? (this.polarSeriesModule || this.radarSeriesModule)\n\t                : new cartesian_panel_1.CartesianAxisLayoutPanel(this);\n\t        };\n\t        Chart.prototype.calculateVisibleAxis = function () {\n\t            var axis;\n\t            var series;\n\t            var axes = [this.primaryXAxis, this.primaryYAxis];\n\t            axes = this.chartAreaType === 'Cartesian' ? axes.concat(this.axes) : axes;\n\t            this.axisCollections = [];\n\t            for (var i = 0, len = axes.length; i < len; i++) {\n\t                axis = axes[i];\n\t                axis.series = [];\n\t                axis.labels = [];\n\t                for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                    var series_2 = _a[_i];\n\t                    this.initAxis(series_2, axis);\n\t                }\n\t                for (var _b = 0, _c = this.indicators; _b < _c.length; _b++) {\n\t                    var indicator = _c[_b];\n\t                    this.initAxis(indicator, axis);\n\t                }\n\t                if (axis.orientation != null) {\n\t                    this.axisCollections.push(axis);\n\t                }\n\t            }\n\t            if (this.rows.length > 0 && this.columns.length > 0) {\n\t                this.chartAxisLayoutPanel.measure();\n\t            }\n\t        };\n\t        Chart.prototype.initAxis = function (series, axis) {\n\t            if (series.xAxisName === axis.name || (series.xAxisName == null && axis.name === 'primaryXAxis')) {\n\t                axis.orientation = this.requireInvertedAxis ? 'Vertical' : 'Horizontal';\n\t                series.xAxis = axis;\n\t                if (series instanceof chart_series_1.Series) {\n\t                    axis.series.push(series);\n\t                }\n\t            }\n\t            else if (series.yAxisName === axis.name || (series.yAxisName == null && axis.name === 'primaryYAxis')) {\n\t                axis.orientation = this.requireInvertedAxis ? 'Horizontal' : 'Vertical';\n\t                series.yAxis = axis;\n\t                if (series instanceof chart_series_1.Series) {\n\t                    axis.series.push(series);\n\t                }\n\t            }\n\t        };\n\t        Chart.prototype.initTechnicalIndicators = function () {\n\t            var i = 0;\n\t            for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\n\t                var indicator = _a[_i];\n\t                var techIndicator = indicator;\n\t                var type = helper_2.firstToLowerCase(techIndicator.type);\n\t                if (this[type + 'IndicatorModule']) {\n\t                    techIndicator.index = i;\n\t                    this[type + 'IndicatorModule'].initSeriesCollection(techIndicator, this);\n\t                    for (var _b = 0, _c = techIndicator.targetSeries; _b < _c.length; _b++) {\n\t                        var targetSeries = _c[_b];\n\t                        if (indicator.seriesName || indicator.dataSource) {\n\t                            this.visibleSeries.push(targetSeries);\n\t                        }\n\t                    }\n\t                }\n\t                i++;\n\t            }\n\t        };\n\t        Chart.prototype.refreshTechnicalIndicator = function (series) {\n\t            if (this.indicators.length) {\n\t                var targetIndicator = null;\n\t                if (series instanceof chart_series_1.Series && series.category !== 'Indicator') {\n\t                    for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\n\t                        var indicator = _a[_i];\n\t                        if (indicator.seriesName === series.name && !indicator.dataSource) {\n\t                            targetIndicator = indicator;\n\t                            targetIndicator.setDataSource(series, this);\n\t                        }\n\t                    }\n\t                }\n\t                else if (series instanceof technical_indicator_1.TechnicalIndicator) {\n\t                    targetIndicator = series;\n\t                    targetIndicator.setDataSource(series instanceof chart_series_1.Series ? series : null, this);\n\t                }\n\t            }\n\t        };\n\t        Chart.prototype.calculateVisibleSeries = function () {\n\t            var series;\n\t            this.visibleSeries = [];\n\t            var colors = this.palettes.length ? this.palettes : theme_1.getSeriesColor(this.theme);\n\t            var count = colors.length;\n\t            for (var i = 0, len = this.series.length; i < len; i++) {\n\t                series = this.series[i];\n\t                series.index = i;\n\t                series.interior = series.fill || colors[i % count];\n\t                switch (series.type) {\n\t                    case 'Bar':\n\t                    case 'StackingBar':\n\t                    case 'StackingBar100':\n\t                        if (this.series[0].type.indexOf('Bar') === -1) {\n\t                            continue;\n\t                        }\n\t                        break;\n\t                    case 'Polar':\n\t                    case 'Radar':\n\t                        if (this.chartAreaType !== 'PolarRadar') {\n\t                            continue;\n\t                        }\n\t                        if (this.chartAreaType === 'PolarRadar' && ((series.xAxisName === null && series.yAxisName !== null) ||\n\t                            (series.xAxisName !== null && series.yAxisName === null) ||\n\t                            (series.xAxisName !== null && series.yAxisName !== null))) {\n\t                            continue;\n\t                        }\n\t                        break;\n\t                    default:\n\t                        if (this.chartAreaType === 'PolarRadar' || this.series[0].type.indexOf('Bar') > -1) {\n\t                            continue;\n\t                        }\n\t                        break;\n\t                }\n\t                this.visibleSeries.push(series);\n\t                this.series[i] = series;\n\t            }\n\t        };\n\t        Chart.prototype.renderTitle = function () {\n\t            if (this.title) {\n\t                var maxTitleSize = this.availableSize.width - this.margin.left - this.margin.right;\n\t                var trimmedTitle = helper_1.textTrim(maxTitleSize, this.title, this.titleStyle);\n\t                this.elementSize = helper_1.measureText(trimmedTitle, this.titleStyle);\n\t                var options = new helper_1.TextOption(this.element.id + '_ChartTitle', helper_2.titlePositionX(this.availableSize, this.margin.left, this.margin.right, this.titleStyle, this.elementSize), this.margin.top + 3 * (this.elementSize.height / 4), 'start', trimmedTitle);\n\t                var element = helper_2.textElement(options, this.titleStyle, this.titleStyle.color, this.svgObject);\n\t                element.setAttribute('aria-label', this.description || this.title);\n\t                element.setAttribute('tabindex', this.tabIndex.toString());\n\t            }\n\t        };\n\t        Chart.prototype.renderBorder = function () {\n\t            var width = this.border.width;\n\t            var rect = new helper_2.RectOption(this.element.id + '_ChartBorder', this.background, this.border, 1, new helper_3.Rect(width / 2, width / 2, this.availableSize.width - width, this.availableSize.height - width));\n\t            this.htmlObject = this.renderer.drawRectangle(rect);\n\t            this.svgObject.appendChild(this.htmlObject);\n\t        };\n\t        Chart.prototype.renderAreaBorder = function () {\n\t            if (this.chartAreaType === 'PolarRadar') {\n\t                return null;\n\t            }\n\t            else {\n\t                var rect = new helper_2.RectOption(this.element.id + '_ChartAreaBorder', this.chartArea.background, this.chartArea.border, this.chartArea.opacity, this.chartAxisLayoutPanel.seriesClipRect);\n\t                this.htmlObject = this.renderer.drawRectangle(rect);\n\t                this.svgObject.appendChild(this.htmlObject);\n\t            }\n\t        };\n\t        Chart.prototype.addSeries = function (seriesCollection) {\n\t            for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n\t                var series = seriesCollection_1[_i];\n\t                series = new chart_series_1.Series(this, 'series', series);\n\t                this.series.push(series);\n\t            }\n\t            this.refresh();\n\t        };\n\t        Chart.prototype.destroy = function () {\n\t            this.unWireEvents();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.classList.remove('e-chart');\n\t        };\n\t        Chart.prototype.getModuleName = function () {\n\t            return 'chart';\n\t        };\n\t        Chart.prototype.getPersistData = function () {\n\t            var keyEntity = ['loaded', 'animationComplete'];\n\t            return this.addOnPersist(keyEntity);\n\t        };\n\t        Chart.prototype.createChartSvg = function () {\n\t            this.removeSvg();\n\t            helper_2.createSvg(this);\n\t        };\n\t        Chart.prototype.unWireEvents = function () {\n\t            var startEvent = ej2_base_5.Browser.touchStartEvent;\n\t            var moveEvent = ej2_base_5.Browser.touchMoveEvent;\n\t            var stopEvent = ej2_base_5.Browser.touchEndEvent;\n\t            var cancelEvent = ej2_base_5.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            ej2_base_6.EventHandler.remove(this.element, startEvent, this.chartOnMouseDown);\n\t            ej2_base_6.EventHandler.remove(this.element, moveEvent, this.mouseMove);\n\t            ej2_base_6.EventHandler.remove(this.element, stopEvent, this.mouseEnd);\n\t            ej2_base_6.EventHandler.remove(this.element, 'click', this.chartOnMouseClick);\n\t            ej2_base_6.EventHandler.remove(this.element, 'contextmenu', this.chartRightClick);\n\t            ej2_base_6.EventHandler.remove(this.element, cancelEvent, this.mouseLeave);\n\t            window.removeEventListener((ej2_base_5.Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.chartResize);\n\t        };\n\t        Chart.prototype.wireEvents = function () {\n\t            var cancelEvent = ej2_base_5.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            ej2_base_6.EventHandler.add(this.element, ej2_base_5.Browser.touchStartEvent, this.chartOnMouseDown, this);\n\t            ej2_base_6.EventHandler.add(this.element, ej2_base_5.Browser.touchMoveEvent, this.mouseMove, this);\n\t            ej2_base_6.EventHandler.add(this.element, ej2_base_5.Browser.touchEndEvent, this.mouseEnd, this);\n\t            ej2_base_6.EventHandler.add(this.element, 'click', this.chartOnMouseClick, this);\n\t            ej2_base_6.EventHandler.add(this.element, 'contextmenu', this.chartRightClick, this);\n\t            ej2_base_6.EventHandler.add(this.element, cancelEvent, this.mouseLeave, this);\n\t            window.addEventListener((ej2_base_5.Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.chartResize.bind(this));\n\t            this.longPress = this.longPress.bind(this);\n\t            new ej2_base_5.Touch(this.element, { tapHold: this.longPress, tapHoldThreshold: 500 });\n\t            this.setStyle(this.element);\n\t        };\n\t        Chart.prototype.chartRightClick = function (event) {\n\t            if (this.crosshair.enable && this.crosshairModule &&\n\t                (event.buttons === 2 || event.which === 0 || event.pointerType === 'touch')) {\n\t                event.preventDefault();\n\t                event.stopPropagation();\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        Chart.prototype.setStyle = function (element) {\n\t            var zooming = this.zoomSettings;\n\t            var disableScroll = zooming.enableSelectionZooming || zooming.enableMouseWheelZooming || zooming.enablePinchZooming ||\n\t                this.selectionMode !== 'None' || this.crosshair.enable;\n\t            element.style.touchAction = disableScroll ? 'none' : 'element';\n\t            element.style.msTouchAction = disableScroll ? 'none' : 'element';\n\t            element.style.msContentZooming = 'none';\n\t            element.style.msUserSelect = 'none';\n\t            element.style.webkitUserSelect = 'none';\n\t            element.style.position = 'relative';\n\t            element.style.display = 'block';\n\t        };\n\t        Chart.prototype.isOrientation = function () {\n\t            return ('orientation' in window && 'onorientationchange' in window);\n\t        };\n\t        Chart.prototype.longPress = function (e) {\n\t            this.mouseX = (e && e.originalEvent.changedTouches) ? (e.originalEvent.changedTouches[0].clientX) : 0;\n\t            this.mouseY = (e && e.originalEvent.changedTouches) ? (e.originalEvent.changedTouches[0].clientY) : 0;\n\t            this.startMove = true;\n\t            this.setMouseXY(this.mouseX, this.mouseY);\n\t            this.notify('tapHold', e);\n\t            return false;\n\t        };\n\t        Chart.prototype.setMouseXY = function (pageX, pageY) {\n\t            var rect = this.element.getBoundingClientRect();\n\t            var svgRect = helper_4.getElement(this.element.id + '_svg').getBoundingClientRect();\n\t            this.mouseX = (pageX - rect.left) - Math.max(svgRect.left - rect.left, 0);\n\t            this.mouseY = (pageY - rect.top) - Math.max(svgRect.top - rect.top, 0);\n\t        };\n\t        Chart.prototype.chartResize = function (e) {\n\t            var _this = this;\n\t            this.animateSeries = false;\n\t            if (this.resizeTo) {\n\t                clearTimeout(this.resizeTo);\n\t            }\n\t            this.resizeTo = setTimeout(function () {\n\t                if (_this.isDestroyed) {\n\t                    clearTimeout(_this.resizeTo);\n\t                    return;\n\t                }\n\t                _this.createChartSvg();\n\t                _this.refreshAxis();\n\t                _this.refreshBound();\n\t                _this.trigger('loaded', { chart: _this });\n\t            }, 500);\n\t            return false;\n\t        };\n\t        Chart.prototype.mouseMove = function (e) {\n\t            var pageX;\n\t            var pageY;\n\t            var touchArg;\n\t            if (e.type === 'touchmove') {\n\t                this.isTouch = true;\n\t                touchArg = e;\n\t                pageX = touchArg.changedTouches[0].clientX;\n\t                pageY = touchArg.changedTouches[0].clientY;\n\t            }\n\t            else {\n\t                this.isTouch = e.pointerType === 'touch' || e.pointerType === '2' || this.isTouch;\n\t                pageX = e.clientX;\n\t                pageY = e.clientY;\n\t            }\n\t            this.setMouseXY(pageX, pageY);\n\t            this.chartOnMouseMove(e);\n\t            return false;\n\t        };\n\t        Chart.prototype.mouseLeave = function (e) {\n\t            var pageX;\n\t            var pageY;\n\t            var touchArg;\n\t            if (e.type === 'touchleave') {\n\t                this.isTouch = true;\n\t                touchArg = e;\n\t                pageX = touchArg.changedTouches[0].clientX;\n\t                pageY = touchArg.changedTouches[0].clientY;\n\t            }\n\t            else {\n\t                this.isTouch = e.pointerType === 'touch' || e.pointerType === '2';\n\t                pageX = e.clientX;\n\t                pageY = e.clientY;\n\t            }\n\t            this.setMouseXY(pageX, pageY);\n\t            this.chartOnMouseLeave(e);\n\t            return false;\n\t        };\n\t        Chart.prototype.chartOnMouseLeave = function (e) {\n\t            var element = e.target;\n\t            var cancelEvent = ej2_base_5.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            this.trigger(constants_1.chartMouseLeave, { target: element.id, x: this.mouseX, y: this.mouseY });\n\t            this.isChartDrag = false;\n\t            this.notify(cancelEvent, e);\n\t            return false;\n\t        };\n\t        Chart.prototype.chartOnMouseClick = function (e) {\n\t            var element = e.target;\n\t            this.trigger(constants_1.chartMouseClick, { target: element.id, x: this.mouseX, y: this.mouseY });\n\t            this.notify('click', e);\n\t            return false;\n\t        };\n\t        Chart.prototype.chartOnMouseMove = function (e) {\n\t            var element = e.target;\n\t            this.trigger(constants_1.chartMouseMove, { target: element.id, x: this.mouseX, y: this.mouseY });\n\t            if (!this.isTouch) {\n\t                this.titleTooltip(e, this.mouseX, this.mouseY);\n\t                this.axisTooltip(e, this.mouseX, this.mouseY);\n\t            }\n\t            this.notify(ej2_base_5.Browser.touchMoveEvent, e);\n\t            this.isTouch = false;\n\t            return false;\n\t        };\n\t        Chart.prototype.titleTooltip = function (event, x, y, isTouch) {\n\t            var targetId = event.target.id;\n\t            if ((targetId === (this.element.id + '_ChartTitle')) && (event.target.textContent.indexOf('...') > -1)) {\n\t                helper_1.showTooltip(this.title, x, y, this.element.offsetWidth, this.element.id + '_EJ2_Title_Tooltip', helper_4.getElement(this.element.id + '_Secondary_Element'), isTouch);\n\t            }\n\t            else {\n\t                helper_1.removeElement(this.element.id + '_EJ2_Title_Tooltip');\n\t            }\n\t        };\n\t        Chart.prototype.axisTooltip = function (event, x, y, isTouch) {\n\t            var targetId = event.target.id;\n\t            if ((targetId.indexOf('AxisLabel') > -1) && (event.target.textContent.indexOf('...') > -1)) {\n\t                helper_1.showTooltip(this.findAxisLabel(targetId), x, y, this.element.offsetWidth, this.element.id + '_EJ2_AxisLabel_Tooltip', helper_4.getElement(this.element.id + '_Secondary_Element'), isTouch);\n\t            }\n\t            else {\n\t                helper_1.removeElement(this.element.id + '_EJ2_AxisLabel_Tooltip');\n\t            }\n\t        };\n\t        Chart.prototype.findAxisLabel = function (text) {\n\t            var texts = ((text.replace(this.element.id, '')).replace('AxisLabel_', '')).split('_');\n\t            return this.axisCollections[parseInt(texts[0], 10)].visibleLabels[parseInt(texts[1], 10)].originalText;\n\t        };\n\t        Chart.prototype.chartOnMouseDown = function (e) {\n\t            var pageX;\n\t            var pageY;\n\t            var target;\n\t            var touchArg;\n\t            var offset = ej2_base_5.Browser.isDevice ? 20 : 30;\n\t            var rect = this.element.getBoundingClientRect();\n\t            var element = e.target;\n\t            this.trigger(constants_1.chartMouseDown, { target: element.id, x: this.mouseX, y: this.mouseY });\n\t            if (e.type === 'touchstart') {\n\t                this.isTouch = true;\n\t                touchArg = e;\n\t                pageX = touchArg.changedTouches[0].clientX;\n\t                pageY = touchArg.changedTouches[0].clientY;\n\t                target = touchArg.target;\n\t            }\n\t            else {\n\t                this.isTouch = e.pointerType === 'touch';\n\t                pageX = e.clientX;\n\t                pageY = e.clientY;\n\t                target = e.target;\n\t            }\n\t            var svgRect = helper_4.getElement(this.element.id + '_svg').getBoundingClientRect();\n\t            this.mouseDownX = this.previousMouseMoveX = (pageX - rect.left) - Math.max(svgRect.left - rect.left, 0);\n\t            this.mouseDownY = this.previousMouseMoveY = (pageY - rect.top) - Math.max(svgRect.top - rect.top, 0);\n\t            if (this.isTouch) {\n\t                this.isDoubleTap = (new Date().getTime() < this.threshold && target.id.indexOf(this.element.id + '_Zooming_') === -1 &&\n\t                    (this.mouseDownX - offset >= this.mouseX || this.mouseDownX + offset >= this.mouseX) &&\n\t                    (this.mouseDownY - offset >= this.mouseY || this.mouseDownY + offset >= this.mouseY) &&\n\t                    (this.mouseX - offset >= this.mouseDownX || this.mouseX + offset >= this.mouseDownX) &&\n\t                    (this.mouseY - offset >= this.mouseDownY || this.mouseY + offset >= this.mouseDownY));\n\t            }\n\t            this.notify(ej2_base_5.Browser.touchStartEvent, e);\n\t            return false;\n\t        };\n\t        Chart.prototype.mouseEnd = function (e) {\n\t            var pageY;\n\t            var pageX;\n\t            var touchArg;\n\t            if (e.type === 'touchend') {\n\t                touchArg = e;\n\t                pageX = touchArg.changedTouches[0].clientX;\n\t                this.isTouch = true;\n\t                pageY = touchArg.changedTouches[0].clientY;\n\t            }\n\t            else {\n\t                pageY = e.clientY;\n\t                pageX = e.clientX;\n\t                this.isTouch = e.pointerType === 'touch' || e.pointerType === '2';\n\t            }\n\t            this.setMouseXY(pageX, pageY);\n\t            this.chartOnMouseUp(e);\n\t            return false;\n\t        };\n\t        Chart.prototype.chartOnMouseUp = function (e) {\n\t            var element = e.target;\n\t            this.trigger(constants_1.chartMouseUp, { target: element.id, x: this.mouseX, y: this.mouseY });\n\t            this.isChartDrag = false;\n\t            if (this.isTouch) {\n\t                this.titleTooltip(e, this.mouseX, this.mouseY, this.isTouch);\n\t                this.axisTooltip(e, this.mouseX, this.mouseY, this.isTouch);\n\t                this.threshold = new Date().getTime() + 300;\n\t            }\n\t            this.seriesElements.removeAttribute('clip-path');\n\t            this.notify(ej2_base_5.Browser.touchEndEvent, e);\n\t            return false;\n\t        };\n\t        Chart.prototype.setCulture = function () {\n\t            this.intl = new ej2_base_1.Internationalization();\n\t            this.setLocaleConstants();\n\t            this.localeObject = new ej2_base_1.L10n(this.getModuleName(), this.defaultLocalConstants, this.locale);\n\t        };\n\t        Chart.prototype.setLocaleConstants = function () {\n\t            this.defaultLocalConstants = {\n\t                ZoomIn: 'ZoomIn',\n\t                Zoom: 'Zoom',\n\t                ZoomOut: 'ZoomOut',\n\t                Pan: 'Pan',\n\t                Reset: 'Reset',\n\t                ResetZoom: 'Reset Zoom'\n\t            };\n\t        };\n\t        Chart.prototype.setTheme = function () {\n\t        };\n\t        Chart.prototype.requiredModules = function () {\n\t            var _this = this;\n\t            var modules = [];\n\t            var series = this.series;\n\t            var enableAnnotation = false;\n\t            var moduleName;\n\t            var errorBarVisible = false;\n\t            var dataLabelEnable = false;\n\t            var zooming = this.zoomSettings;\n\t            this.chartAreaType = (series.length > 0 && (series[0].type === 'Polar' || series[0].type === 'Radar')) ? 'PolarRadar' : 'Cartesian';\n\t            if (this.tooltip.enable) {\n\t                modules.push({\n\t                    member: 'Tooltip',\n\t                    args: [this]\n\t                });\n\t            }\n\t            series.map(function (value) {\n\t                _this.isLegend = (_this.legendSettings.visible && ((value.name !== '') || !!_this.isLegend));\n\t                moduleName = value.type.indexOf('100') !== -1 ? value.type.replace('100', '') + 'Series' : value.type + 'Series';\n\t                errorBarVisible = value.errorBar.visible || errorBarVisible;\n\t                dataLabelEnable = value.marker.dataLabel.visible || dataLabelEnable;\n\t                modules.push({\n\t                    member: moduleName,\n\t                    args: [_this, series]\n\t                });\n\t                if (_this.chartAreaType === 'PolarRadar') {\n\t                    modules.push({\n\t                        member: value.drawType + 'Series',\n\t                        args: [_this, series]\n\t                    });\n\t                }\n\t            });\n\t            this.findIndicatorModules(modules);\n\t            this.findTrendLineModules(modules);\n\t            modules = this.findAxisModule(modules);\n\t            enableAnnotation = this.annotations.some(function (value) {\n\t                return (value.content !== null);\n\t            });\n\t            if (errorBarVisible) {\n\t                modules.push({\n\t                    member: 'ErrorBar',\n\t                    args: [this, series]\n\t                });\n\t            }\n\t            if (this.isLegend) {\n\t                modules.push({\n\t                    member: 'Legend',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.chartAreaType !== 'PolarRadar' && (zooming.enableSelectionZooming\n\t                || zooming.enableMouseWheelZooming || zooming.enablePinchZooming)) {\n\t                modules.push({\n\t                    member: 'Zoom',\n\t                    args: [this, this.zoomSettings]\n\t                });\n\t            }\n\t            if (this.chartAreaType !== 'PolarRadar' || (this.chartAreaType === 'PolarRadar' &&\n\t                (!(this.selectionMode.indexOf('DragX') > -1 || this.selectionMode.indexOf('DragXY') > -1 ||\n\t                    this.selectionMode.indexOf('DragY') > -1)))) {\n\t                modules.push({\n\t                    member: 'Selection',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (dataLabelEnable) {\n\t                modules.push({\n\t                    member: 'DataLabel',\n\t                    args: [this, series]\n\t                });\n\t            }\n\t            if (enableAnnotation) {\n\t                modules.push({\n\t                    member: 'Annotation',\n\t                    args: [this, this.annotations]\n\t                });\n\t            }\n\t            if (this.chartAreaType !== 'PolarRadar' && this.crosshair.enable) {\n\t                modules.push({\n\t                    member: 'Crosshair',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Chart.prototype.findAxisModule = function (modules) {\n\t            var axisCollections = [];\n\t            axisCollections.push(this.primaryXAxis);\n\t            axisCollections.push(this.primaryYAxis);\n\t            axisCollections = axisCollections.concat(this.axes);\n\t            var datetimeEnabled = false;\n\t            var categoryEnabled = false;\n\t            var logarithmicEnabled = false;\n\t            var striplineEnabled = false;\n\t            for (var _i = 0, axisCollections_1 = axisCollections; _i < axisCollections_1.length; _i++) {\n\t                var axis = axisCollections_1[_i];\n\t                datetimeEnabled = axis.valueType === 'DateTime' || datetimeEnabled;\n\t                categoryEnabled = axis.valueType === 'Category' || categoryEnabled;\n\t                logarithmicEnabled = axis.valueType === 'Logarithmic' || logarithmicEnabled;\n\t                striplineEnabled = this.findStriplineVisibility(axis.stripLines) || striplineEnabled;\n\t            }\n\t            if (datetimeEnabled) {\n\t                modules.push({\n\t                    member: 'DateTime',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (categoryEnabled) {\n\t                modules.push({\n\t                    member: 'Category',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (logarithmicEnabled) {\n\t                modules.push({\n\t                    member: 'Logarithmic',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (striplineEnabled) {\n\t                modules.push({\n\t                    member: 'StripLine',\n\t                    args: [this]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        Chart.prototype.findIndicatorModules = function (modules) {\n\t            var macdEnable;\n\t            var bandEnable;\n\t            var indicators = this.indicators;\n\t            if (this.indicators.length) {\n\t                modules.push({\n\t                    member: 'LineSeries',\n\t                    args: [this]\n\t                });\n\t                indicators.map(function (indicator) {\n\t                    macdEnable = macdEnable || indicator.type === 'Macd';\n\t                    bandEnable = bandEnable || indicator.type === 'BollingerBands';\n\t                });\n\t                if (macdEnable) {\n\t                    modules.push({\n\t                        member: 'ColumnSeries',\n\t                        args: [this]\n\t                    });\n\t                }\n\t                if (bandEnable) {\n\t                    modules.push({\n\t                        member: 'RangeAreaSeries',\n\t                        args: [this]\n\t                    });\n\t                }\n\t                for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\n\t                    var indicator = _a[_i];\n\t                    modules.push({\n\t                        member: indicator.type + 'Indicator',\n\t                        args: [this]\n\t                    });\n\t                }\n\t            }\n\t        };\n\t        Chart.prototype.findTrendLineModules = function (modules) {\n\t            var isLine;\n\t            var isSpline;\n\t            var _loop_1 = function (series) {\n\t                var markerEnable;\n\t                series.trendlines.map(function (trendline) {\n\t                    markerEnable = markerEnable || trendline.marker.visible;\n\t                    isLine = isLine || (trendline.type === 'Linear' || trendline.type === 'MovingAverage') ? true : false;\n\t                    isSpline = isSpline || !isLine ? true : false;\n\t                });\n\t                if (markerEnable) {\n\t                    modules.push({\n\t                        member: 'Marker',\n\t                        args: [this_1, series]\n\t                    });\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = this.series; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                _loop_1(series);\n\t            }\n\t            if (isLine || isSpline) {\n\t                modules.push({\n\t                    member: 'TrendLine',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (isLine) {\n\t                modules.push({\n\t                    member: 'LineSeries',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (isSpline) {\n\t                modules.push({\n\t                    member: 'SplineSeries',\n\t                    args: [this]\n\t                });\n\t            }\n\t        };\n\t        Chart.prototype.findStriplineVisibility = function (striplines) {\n\t            var visible = false;\n\t            for (var _i = 0, striplines_1 = striplines; _i < striplines_1.length; _i++) {\n\t                var stripline = striplines_1[_i];\n\t                if (stripline.visible) {\n\t                    visible = true;\n\t                    break;\n\t                }\n\t            }\n\t            return visible;\n\t        };\n\t        Chart.prototype.removeSvg = function () {\n\t            if (document.getElementById(this.element.id + '_Secondary_Element')) {\n\t                ej2_base_3.remove(document.getElementById(this.element.id + '_Secondary_Element'));\n\t            }\n\t            var removeLength = 0;\n\t            if (this.zoomModule && this.zoomModule.pinchTarget) {\n\t                this.zoomModule.pinchTarget.id = '';\n\t                this.zoomModule.pinchTarget.setAttribute('opacity', '0');\n\t                this.svgObject.appendChild(this.zoomModule.pinchTarget);\n\t                removeLength = 1;\n\t            }\n\t            if (this.svgObject) {\n\t                while (this.svgObject.childNodes.length > removeLength) {\n\t                    this.svgObject.removeChild(this.svgObject.firstChild);\n\t                }\n\t                if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n\t                    ej2_base_3.remove(this.svgObject);\n\t                }\n\t            }\n\t        };\n\t        Chart.prototype.refreshDefinition = function (definitions) {\n\t            for (var _i = 0, definitions_1 = definitions; _i < definitions_1.length; _i++) {\n\t                var item = definitions_1[_i];\n\t                item.axes = [];\n\t            }\n\t        };\n\t        Chart.prototype.refreshAxis = function () {\n\t            var axis = this.primaryXAxis;\n\t            axis.rect = new helper_3.Rect(undefined, undefined, 0, 0);\n\t            axis = this.primaryYAxis;\n\t            axis.isStack100 = false;\n\t            axis.rect = new helper_3.Rect(undefined, undefined, 0, 0);\n\t            for (var _i = 0, _a = this.axes; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                axis = item;\n\t                axis.rect = new helper_3.Rect(undefined, undefined, 0, 0);\n\t                axis.isStack100 = false;\n\t            }\n\t        };\n\t        Chart.prototype.axisChange = function (axis) {\n\t            if (!axis.name && !axis.valueType) {\n\t                return false;\n\t            }\n\t            this.refreshDefinition(this.columns);\n\t            this.refreshDefinition(this.rows);\n\t            this.calculateVisibleAxis();\n\t            this.processData();\n\t            return true;\n\t        };\n\t        Chart.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var renderer = false;\n\t            var refreshBounds = false;\n\t            if (Object.keys(newProp).length === 1 && Object.keys(newProp)[0] === 'indicators') {\n\t                return;\n\t            }\n\t            this.animateSeries = false;\n\t            if (!this.delayRedraw) {\n\t                for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                    var prop = _a[_i];\n\t                    switch (prop) {\n\t                        case 'primaryXAxis':\n\t                            refreshBounds = this.axisChange(newProp.primaryXAxis);\n\t                            if (newProp.primaryXAxis.edgeLabelPlacement) {\n\t                                renderer = true;\n\t                            }\n\t                            if (!newProp.primaryXAxis.crosshairTooltip) {\n\t                                refreshBounds = true;\n\t                            }\n\t                            break;\n\t                        case 'primaryYAxis':\n\t                            refreshBounds = this.axisChange(newProp.primaryYAxis);\n\t                            if (newProp.primaryYAxis.edgeLabelPlacement) {\n\t                                renderer = true;\n\t                            }\n\t                            if (!newProp.primaryYAxis.crosshairTooltip) {\n\t                                refreshBounds = true;\n\t                            }\n\t                            break;\n\t                        case 'height':\n\t                        case 'width':\n\t                            this.createChartSvg();\n\t                            refreshBounds = true;\n\t                            break;\n\t                        case 'title':\n\t                            if (newProp.title === '' || oldProp.title === '') {\n\t                                refreshBounds = true;\n\t                            }\n\t                            else {\n\t                                renderer = true;\n\t                            }\n\t                            break;\n\t                        case 'titleStyle':\n\t                            if (newProp.titleStyle && newProp.titleStyle.size) {\n\t                                refreshBounds = true;\n\t                            }\n\t                            else {\n\t                                renderer = true;\n\t                            }\n\t                            break;\n\t                        case 'border':\n\t                            renderer = true;\n\t                            break;\n\t                        case 'zoomSettings':\n\t                        case 'background':\n\t                            renderer = true;\n\t                            break;\n\t                        case 'chartArea':\n\t                            if (newProp.chartArea.border && newProp.chartArea.border.width) {\n\t                                refreshBounds = true;\n\t                            }\n\t                            renderer = true;\n\t                            break;\n\t                        case 'legendSettings':\n\t                            if (!newProp.legendSettings.background || !newProp.legendSettings.opacity) {\n\t                                refreshBounds = true;\n\t                            }\n\t                            renderer = true;\n\t                            break;\n\t                        case 'palettes':\n\t                            this.calculateVisibleSeries();\n\t                            renderer = true;\n\t                            break;\n\t                        case 'selectedDataIndexes':\n\t                        case 'selectionMode':\n\t                            if (this.selectionModule && newProp.selectionMode && newProp.selectionMode.indexOf('Drag') === -1) {\n\t                                this.selectionModule.redrawSelection(this, oldProp.selectionMode);\n\t                            }\n\t                            break;\n\t                        case 'isMultiSelect':\n\t                            if (this.selectionModule && !newProp.isMultiSelect && this.selectionModule.selectedDataIndexes.length > 1) {\n\t                                this.selectionModule.redrawSelection(this, oldProp.selectionMode);\n\t                            }\n\t                            break;\n\t                        case 'theme':\n\t                            this.animateSeries = true;\n\t                            break;\n\t                        case 'locale':\n\t                            this.setCulture();\n\t                            renderer = true;\n\t                            break;\n\t                        case 'tooltip':\n\t                            this.tooltipModule.previousPoints = [];\n\t                            break;\n\t                    }\n\t                }\n\t                if (!refreshBounds && renderer) {\n\t                    this.removeSvg();\n\t                    this.renderElements();\n\t                    this.trigger('loaded', { chart: this });\n\t                }\n\t                if (refreshBounds) {\n\t                    this.removeSvg();\n\t                    this.refreshAxis();\n\t                    this.refreshBound();\n\t                    this.trigger('loaded', { chart: this });\n\t                }\n\t            }\n\t        };\n\t        return Chart;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Chart.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Chart.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Chart.prototype, \"title\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex(theme_1.Theme.chartTitleFont, base_1.Font)\n\t    ], Chart.prototype, \"titleStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({}, base_1.Margin)\n\t    ], Chart.prototype, \"margin\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ color: '#DDDDDD', width: 0 }, base_1.Border)\n\t    ], Chart.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.chartBackgroundColor)\n\t    ], Chart.prototype, \"background\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ border: { color: 'Gray', width: 0.5 }, background: 'transparent' }, base_1.ChartArea)\n\t    ], Chart.prototype, \"chartArea\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ name: 'primaryXAxis' }, axis_1.Axis)\n\t    ], Chart.prototype, \"primaryXAxis\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({ name: 'primaryYAxis' }, axis_1.Axis)\n\t    ], Chart.prototype, \"primaryYAxis\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([{}], axis_1.Row)\n\t    ], Chart.prototype, \"rows\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([{}], axis_1.Column)\n\t    ], Chart.prototype, \"columns\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([{}], axis_1.Axis)\n\t    ], Chart.prototype, \"axes\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([{}], chart_series_1.Series)\n\t    ], Chart.prototype, \"series\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([{}], chart_base_1.ChartAnnotationSettings)\n\t    ], Chart.prototype, \"annotations\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property([])\n\t    ], Chart.prototype, \"palettes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Material')\n\t    ], Chart.prototype, \"theme\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({}, TooltipSettings)\n\t    ], Chart.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({}, CrosshairSettings)\n\t    ], Chart.prototype, \"crosshair\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({}, legend_1.LegendSettings)\n\t    ], Chart.prototype, \"legendSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Complex({}, ZoomSettings)\n\t    ], Chart.prototype, \"zoomSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Chart.prototype, \"selectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Chart.prototype, \"isMultiSelect\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([], base_1.Indexes)\n\t    ], Chart.prototype, \"selectedDataIndexes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Chart.prototype, \"useGroupingSeparator\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Chart.prototype, \"isTransposed\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Collection([], technical_indicator_1.TechnicalIndicator)\n\t    ], Chart.prototype, \"indicators\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Chart.prototype, \"description\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Chart.prototype, \"tabIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Chart.prototype, \"enableSideBySidePlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"annotationRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"loaded\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"animationComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"legendRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"textRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"pointRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"seriesRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"axisLabelRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"tooltipRender\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"chartMouseMove\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"chartMouseClick\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"chartMouseLeave\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"chartMouseDown\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"chartMouseUp\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"dragComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_6.Event()\n\t    ], Chart.prototype, \"zoomComplete\", void 0);\n\t    Chart = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], Chart);\n\t    exports.Chart = Chart;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(9), __webpack_require__(3), __webpack_require__(8), __webpack_require__(10), __webpack_require__(11), __webpack_require__(5), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, base_1, helper_1, double_range_1, double_axis_1, theme_1, constants_1, chart_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var axisPadding = 10;\n\t    var Row = (function (_super) {\n\t        __extends(Row, _super);\n\t        function Row() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.axes = [];\n\t            _this.nearSizes = [];\n\t            _this.farSizes = [];\n\t            return _this;\n\t        }\n\t        Row.prototype.computeSize = function (axis, clipRect) {\n\t            var titleSize = 0;\n\t            var width = 0;\n\t            var innerPadding = 5;\n\t            if (axis.visible) {\n\t                if (axis.title) {\n\t                    titleSize = helper_1.measureText(axis.title, axis.titleStyle).height + innerPadding;\n\t                }\n\t                width += (titleSize + axis.majorTickLines.height + axis.maxLabelSize.width + innerPadding + axisPadding +\n\t                    axis.lineStyle.width / 2);\n\t            }\n\t            if (axis.opposedPosition) {\n\t                this.farSizes.push(width);\n\t            }\n\t            else {\n\t                this.nearSizes.push(width);\n\t            }\n\t        };\n\t        return Row;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Row.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Border)\n\t    ], Row.prototype, \"border\", void 0);\n\t    exports.Row = Row;\n\t    var Column = (function (_super) {\n\t        __extends(Column, _super);\n\t        function Column() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.axes = [];\n\t            _this.nearSizes = [];\n\t            _this.farSizes = [];\n\t            _this.padding = 0;\n\t            return _this;\n\t        }\n\t        Column.prototype.computeSize = function (axis, clipRect) {\n\t            var titleSize = 0;\n\t            var height = 0;\n\t            var innerPadding = 5;\n\t            if (axis.visible) {\n\t                if (axis.title) {\n\t                    titleSize = helper_1.measureText(axis.title, axis.titleStyle).height + innerPadding;\n\t                }\n\t                height += (titleSize + axis.majorTickLines.height + axis.maxLabelSize.height + innerPadding + axisPadding\n\t                    + axis.lineStyle.width / 2);\n\t            }\n\t            if (axis.opposedPosition) {\n\t                this.farSizes.push(height);\n\t            }\n\t            else {\n\t                this.nearSizes.push(height);\n\t            }\n\t        };\n\t        return Column;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('100%')\n\t    ], Column.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Border)\n\t    ], Column.prototype, \"border\", void 0);\n\t    exports.Column = Column;\n\t    var MajorGridLines = (function (_super) {\n\t        __extends(MajorGridLines, _super);\n\t        function MajorGridLines() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MajorGridLines;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], MajorGridLines.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MajorGridLines.prototype, \"dashArray\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.axisMajorGridLineColor)\n\t    ], MajorGridLines.prototype, \"color\", void 0);\n\t    exports.MajorGridLines = MajorGridLines;\n\t    var MinorGridLines = (function (_super) {\n\t        __extends(MinorGridLines, _super);\n\t        function MinorGridLines() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MinorGridLines;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(0.7)\n\t    ], MinorGridLines.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MinorGridLines.prototype, \"dashArray\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.axisMinorGridLineColor)\n\t    ], MinorGridLines.prototype, \"color\", void 0);\n\t    exports.MinorGridLines = MinorGridLines;\n\t    var AxisLine = (function (_super) {\n\t        __extends(AxisLine, _super);\n\t        function AxisLine() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AxisLine;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], AxisLine.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], AxisLine.prototype, \"dashArray\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.axisLineColor)\n\t    ], AxisLine.prototype, \"color\", void 0);\n\t    exports.AxisLine = AxisLine;\n\t    var MajorTickLines = (function (_super) {\n\t        __extends(MajorTickLines, _super);\n\t        function MajorTickLines() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MajorTickLines;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], MajorTickLines.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], MajorTickLines.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.axisMajorTickLineColor)\n\t    ], MajorTickLines.prototype, \"color\", void 0);\n\t    exports.MajorTickLines = MajorTickLines;\n\t    var MinorTickLines = (function (_super) {\n\t        __extends(MinorTickLines, _super);\n\t        function MinorTickLines() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MinorTickLines;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(0.7)\n\t    ], MinorTickLines.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], MinorTickLines.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.axisMinorTickLineColor)\n\t    ], MinorTickLines.prototype, \"color\", void 0);\n\t    exports.MinorTickLines = MinorTickLines;\n\t    var CrosshairTooltip = (function (_super) {\n\t        __extends(CrosshairTooltip, _super);\n\t        function CrosshairTooltip() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return CrosshairTooltip;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], CrosshairTooltip.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.crossHairLabelColor)\n\t    ], CrosshairTooltip.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.crosshairLabelFont, base_1.Font)\n\t    ], CrosshairTooltip.prototype, \"textStyle\", void 0);\n\t    exports.CrosshairTooltip = CrosshairTooltip;\n\t    var Axis = (function (_super) {\n\t        __extends(Axis, _super);\n\t        function Axis() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.visibleLabels = [];\n\t            _this.series = [];\n\t            _this.rect = new helper_1.Rect(undefined, undefined, 0, 0);\n\t            _this.axisBottomLine = null;\n\t            _this.intervalDivs = [10, 5, 2, 1];\n\t            _this.angle = _this.labelRotation;\n\t            _this.isStack100 = false;\n\t            return _this;\n\t        }\n\t        Axis.prototype.setRange = function () {\n\t            if (this.minimum != null && this.maximum != null) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        Axis.prototype.calculateVisibleRange = function (size) {\n\t            if (this.zoomFactor < 1 || this.zoomPosition > 0) {\n\t                var baseRange = this.actualRange;\n\t                var start = void 0;\n\t                var end = void 0;\n\t                if (!this.isInversed) {\n\t                    start = this.actualRange.min + this.zoomPosition * this.actualRange.delta;\n\t                    end = start + this.zoomFactor * this.actualRange.delta;\n\t                }\n\t                else {\n\t                    start = this.actualRange.max - (this.zoomPosition * this.actualRange.delta);\n\t                    end = start - (this.zoomFactor * this.actualRange.delta);\n\t                }\n\t                if (start < baseRange.min) {\n\t                    end = end + (baseRange.min - start);\n\t                    start = baseRange.min;\n\t                }\n\t                if (end > baseRange.max) {\n\t                    start = start - (end - baseRange.max);\n\t                    end = baseRange.max;\n\t                }\n\t                this.doubleRange = new double_range_1.DoubleRange(start, end);\n\t                this.visibleRange.min = this.doubleRange.start;\n\t                this.visibleRange.max = this.doubleRange.end;\n\t                this.visibleRange.delta = this.doubleRange.delta;\n\t            }\n\t        };\n\t        Axis.prototype.getActualDesiredIntervalsCount = function (availableSize) {\n\t            var size = this.orientation === 'Horizontal' ? availableSize.width : availableSize.height;\n\t            if (this.desiredIntervals === null) {\n\t                var desiredIntervalsCount = (this.orientation === 'Horizontal' ? 0.533 : 1) * this.maximumLabels;\n\t                desiredIntervalsCount = Math.max((size * (desiredIntervalsCount / 100)), 1);\n\t                return desiredIntervalsCount;\n\t            }\n\t            else {\n\t                return this.desiredIntervals;\n\t            }\n\t        };\n\t        Axis.prototype.triggerLabelRender = function (chart, tempInterval, text) {\n\t            var argsData;\n\t            argsData = {\n\t                cancel: false, name: constants_1.axisLabelRender, axis: this,\n\t                text: text, value: tempInterval\n\t            };\n\t            chart.trigger(constants_1.axisLabelRender, argsData);\n\t            if (!argsData.cancel) {\n\t                this.visibleLabels.push(new VisibleLabels(argsData.text, argsData.value));\n\t            }\n\t        };\n\t        Axis.prototype.getRangePadding = function (chart) {\n\t            var padding = this.rangePadding;\n\t            if (padding !== 'Auto') {\n\t                return padding;\n\t            }\n\t            switch (this.orientation) {\n\t                case 'Horizontal':\n\t                    if (chart.requireInvertedAxis) {\n\t                        padding = (this.isStack100 ? 'Round' : 'Normal');\n\t                    }\n\t                    else {\n\t                        padding = 'None';\n\t                    }\n\t                    break;\n\t                case 'Vertical':\n\t                    if (!chart.requireInvertedAxis) {\n\t                        padding = (this.isStack100 ? 'Round' : 'Normal');\n\t                    }\n\t                    else {\n\t                        padding = 'None';\n\t                    }\n\t                    break;\n\t            }\n\t            return padding;\n\t        };\n\t        Axis.prototype.getMaxLabelWidth = function (chart) {\n\t            var prevSize = new helper_1.Size(0, 0);\n\t            var rotatedLabel;\n\t            var pointX;\n\t            var previousEnd = 0;\n\t            var isIntersect = false;\n\t            this.angle = this.labelRotation;\n\t            this.maxLabelSize = new helper_1.Size(0, 0);\n\t            var action = this.labelIntersectAction;\n\t            var label;\n\t            for (var i = 0; i < this.visibleLabels.length; i++) {\n\t                label = this.visibleLabels[i];\n\t                label.size = helper_1.measureText(label.text, this.labelStyle);\n\t                if (label.size.width > this.maxLabelSize.width) {\n\t                    this.maxLabelSize.width = label.size.width;\n\t                    this.rotatedLabel = label.text;\n\t                }\n\t                if (label.size.height > this.maxLabelSize.height) {\n\t                    this.maxLabelSize.height = label.size.height;\n\t                }\n\t                if (action === 'None' || action === 'Hide' || action === 'Trim') {\n\t                    continue;\n\t                }\n\t                if (this.angle % 360 === 0 && this.orientation === 'Horizontal' && this.rect.width > 0 && !isIntersect) {\n\t                    pointX = (helper_1.valueToCoefficient(label.value, this) * this.rect.width) + this.rect.x;\n\t                    pointX -= label.size.width / 2;\n\t                    if (this.edgeLabelPlacement === 'Shift') {\n\t                        if (i === 0 && pointX < this.rect.x) {\n\t                            pointX = this.rect.x;\n\t                        }\n\t                        if (i === this.visibleLabels.length - 1 && ((pointX + label.size.width) > (this.rect.x + this.rect.width))) {\n\t                            pointX = this.rect.x + this.rect.width - label.size.width;\n\t                        }\n\t                    }\n\t                    switch (action) {\n\t                        case 'MultipleRows':\n\t                            if (i > 0) {\n\t                                this.findMultiRows(i, pointX, label);\n\t                            }\n\t                            break;\n\t                        case 'Rotate45':\n\t                        case 'Rotate90':\n\t                            if (i > 0 && (!this.isInversed ? pointX <= previousEnd : pointX + label.size.width >= previousEnd)) {\n\t                                this.angle = (action === 'Rotate45') ? 45 : 90;\n\t                                isIntersect = true;\n\t                            }\n\t                            break;\n\t                        default:\n\t                            this.findWrap(i, pointX, label);\n\t                            break;\n\t                    }\n\t                    previousEnd = this.isInversed ? pointX : pointX + label.size.width;\n\t                }\n\t            }\n\t            if (this.angle !== 0) {\n\t                this.maxLabelSize = helper_1.rotateTextSize(this.labelStyle, this.rotatedLabel, this.angle, chart);\n\t            }\n\t        };\n\t        Axis.prototype.findWrap = function (width, currentX, currentLabel) {\n\t            var intervalLength = this.rect.width / this.visibleLabels.length;\n\t            var textCollection = currentLabel.text.split(' ');\n\t            var label = '';\n\t            var labelCollection = [];\n\t            var text;\n\t            for (var i = 0, len = textCollection.length; i < len; i++) {\n\t                text = textCollection[i];\n\t                if (helper_1.measureText(label.concat(text), this.labelStyle).width < intervalLength) {\n\t                    label = label.concat((label === '' ? '' : ' ') + text);\n\t                }\n\t                else {\n\t                    if (label !== '') {\n\t                        labelCollection.push(helper_1.textTrim(intervalLength, label, this.labelStyle));\n\t                        label = text;\n\t                    }\n\t                    else {\n\t                        labelCollection.push(helper_1.textTrim(intervalLength, text, this.labelStyle));\n\t                        text = '';\n\t                    }\n\t                }\n\t                if (label && i === len - 1) {\n\t                    labelCollection.push(helper_1.textTrim(intervalLength, label, this.labelStyle));\n\t                }\n\t            }\n\t            currentLabel.text = labelCollection;\n\t            var height = (currentLabel.size.height * labelCollection.length);\n\t            if (height > this.maxLabelSize.height) {\n\t                this.maxLabelSize.height = height;\n\t            }\n\t        };\n\t        Axis.prototype.findMultiRows = function (length, currentX, currentLabel) {\n\t            var label;\n\t            var pointX;\n\t            var store = [];\n\t            var isMultiRows;\n\t            for (var i = length - 1; i >= 0; i--) {\n\t                label = this.visibleLabels[i];\n\t                pointX = (helper_1.valueToCoefficient(label.value, this) * this.rect.width) + this.rect.x;\n\t                isMultiRows = !this.isInversed ? currentX < (pointX + label.size.width / 2) :\n\t                    currentX + currentLabel.size.width > (pointX - label.size.width / 2);\n\t                if (isMultiRows) {\n\t                    store.push(label.index);\n\t                    currentLabel.index = (currentLabel.index > label.index) ? currentLabel.index : label.index + 1;\n\t                }\n\t                else {\n\t                    currentLabel.index = store.indexOf(label.index) > -1 ? currentLabel.index : label.index;\n\t                }\n\t            }\n\t            var height = (currentLabel.size.height * currentLabel.index) + (5 * (currentLabel.index - 1));\n\t            if (height > this.maxLabelSize.height) {\n\t                this.maxLabelSize.height = height;\n\t            }\n\t        };\n\t        Axis.prototype.getModule = function (chart) {\n\t            if (this.valueType === 'Double') {\n\t                this.baseModule = new double_axis_1.Double(chart);\n\t            }\n\t            else {\n\t                this.baseModule = chart[helper_1.firstToLowerCase(this.valueType) + 'Module'];\n\t            }\n\t        };\n\t        return Axis;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.axisLabelFont, base_1.Font)\n\t    ], Axis.prototype, \"labelStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, CrosshairTooltip)\n\t    ], Axis.prototype, \"crosshairTooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Axis.prototype, \"title\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.axisTitleFont, base_1.Font)\n\t    ], Axis.prototype, \"titleStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Axis.prototype, \"labelFormat\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Axis.prototype, \"skeleton\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('DateTime')\n\t    ], Axis.prototype, \"skeletonType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"plotOffset\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Axis.prototype, \"isIndexed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], Axis.prototype, \"logBase\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"columnIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"rowIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Axis.prototype, \"span\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Axis.prototype, \"desiredIntervals\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], Axis.prototype, \"maximumLabels\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Axis.prototype, \"zoomFactor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"zoomPosition\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Axis.prototype, \"opposedPosition\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Axis.prototype, \"enableAutoIntervalOnZooming\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Auto')\n\t    ], Axis.prototype, \"rangePadding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Double')\n\t    ], Axis.prototype, \"valueType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], Axis.prototype, \"edgeLabelPlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Auto')\n\t    ], Axis.prototype, \"intervalType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('BetweenTicks')\n\t    ], Axis.prototype, \"labelPlacement\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Axis.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Axis.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"minorTicksPerInterval\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"labelRotation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Axis.prototype, \"minimum\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Axis.prototype, \"maximum\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Axis.prototype, \"interval\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, MajorTickLines)\n\t    ], Axis.prototype, \"majorTickLines\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, MinorTickLines)\n\t    ], Axis.prototype, \"minorTickLines\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, MajorGridLines)\n\t    ], Axis.prototype, \"majorGridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, MinorGridLines)\n\t    ], Axis.prototype, \"minorGridLines\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, AxisLine)\n\t    ], Axis.prototype, \"lineStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Hide')\n\t    ], Axis.prototype, \"labelIntersectAction\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Axis.prototype, \"isInversed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(100)\n\t    ], Axis.prototype, \"coefficient\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Axis.prototype, \"startAngle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Axis.prototype, \"description\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(2)\n\t    ], Axis.prototype, \"tabIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([], chart_base_1.StripLineSettings)\n\t    ], Axis.prototype, \"stripLines\", void 0);\n\t    exports.Axis = Axis;\n\t    var VisibleLabels = (function () {\n\t        function VisibleLabels(text, value, size, index) {\n\t            if (size === void 0) { size = new helper_1.Size(0, 0); }\n\t            if (index === void 0) { index = 1; }\n\t            this.text = text;\n\t            this.originalText = text;\n\t            this.value = value;\n\t            this.size = size;\n\t            this.index = 1;\n\t        }\n\t        return VisibleLabels;\n\t    }());\n\t    exports.VisibleLabels = VisibleLabels;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DoubleRange = (function () {\n\t        function DoubleRange(start, end) {\n\t            if (start < end) {\n\t                this.mStart = start;\n\t                this.mEnd = end;\n\t            }\n\t            else {\n\t                this.mStart = end;\n\t                this.mEnd = start;\n\t            }\n\t        }\n\t        Object.defineProperty(DoubleRange.prototype, \"start\", {\n\t            get: function () {\n\t                return this.mStart;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(DoubleRange.prototype, \"end\", {\n\t            get: function () {\n\t                return this.mEnd;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(DoubleRange.prototype, \"delta\", {\n\t            get: function () {\n\t                return (this.mEnd - this.mStart);\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(DoubleRange.prototype, \"median\", {\n\t            get: function () {\n\t                return this.mStart + (this.mEnd - this.mStart) / 2;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        return DoubleRange;\n\t    }());\n\t    exports.DoubleRange = DoubleRange;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Connector = (function (_super) {\n\t        __extends(Connector, _super);\n\t        function Connector() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Connector;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('Line')\n\t    ], Connector.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Connector.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Connector.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Connector.prototype, \"length\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Connector.prototype, \"dashArray\", void 0);\n\t    exports.Connector = Connector;\n\t    var Font = (function (_super) {\n\t        __extends(Font, _super);\n\t        function Font() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Font;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('16px')\n\t    ], Font.prototype, \"size\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Font.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Segoe UI')\n\t    ], Font.prototype, \"fontFamily\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Normal')\n\t    ], Font.prototype, \"fontWeight\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Normal')\n\t    ], Font.prototype, \"fontStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Font.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Center')\n\t    ], Font.prototype, \"textAlignment\", void 0);\n\t    exports.Font = Font;\n\t    var Border = (function (_super) {\n\t        __extends(Border, _super);\n\t        function Border() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Border;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Border.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Border.prototype, \"width\", void 0);\n\t    exports.Border = Border;\n\t    var ChartArea = (function (_super) {\n\t        __extends(ChartArea, _super);\n\t        function ChartArea() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ChartArea;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Complex({}, Border)\n\t    ], ChartArea.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('transparent')\n\t    ], ChartArea.prototype, \"background\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ChartArea.prototype, \"opacity\", void 0);\n\t    exports.ChartArea = ChartArea;\n\t    var Margin = (function (_super) {\n\t        __extends(Margin, _super);\n\t        function Margin() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Margin;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], Margin.prototype, \"left\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], Margin.prototype, \"right\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], Margin.prototype, \"top\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], Margin.prototype, \"bottom\", void 0);\n\t    exports.Margin = Margin;\n\t    var Animation = (function (_super) {\n\t        __extends(Animation, _super);\n\t        function Animation() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Animation;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Animation.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1000)\n\t    ], Animation.prototype, \"duration\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Animation.prototype, \"delay\", void 0);\n\t    exports.Animation = Animation;\n\t    var Indexes = (function (_super) {\n\t        __extends(Indexes, _super);\n\t        function Indexes() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Indexes;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Indexes.prototype, \"series\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Indexes.prototype, \"point\", void 0);\n\t    exports.Indexes = Indexes;\n\t    var CornerRadius = (function (_super) {\n\t        __extends(CornerRadius, _super);\n\t        function CornerRadius() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return CornerRadius;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], CornerRadius.prototype, \"topLeft\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], CornerRadius.prototype, \"topRight\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], CornerRadius.prototype, \"bottomLeft\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], CornerRadius.prototype, \"bottomRight\", void 0);\n\t    exports.CornerRadius = CornerRadius;\n\t    var Index = (function () {\n\t        function Index(seriesIndex, pointIndex) {\n\t            this.series = seriesIndex;\n\t            this.point = pointIndex;\n\t        }\n\t        return Index;\n\t    }());\n\t    exports.Index = Index;\n\t    var EmptyPointSettings = (function (_super) {\n\t        __extends(EmptyPointSettings, _super);\n\t        function EmptyPointSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return EmptyPointSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], EmptyPointSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: 'transparent', width: 0 }, Border)\n\t    ], EmptyPointSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Gap')\n\t    ], EmptyPointSettings.prototype, \"mode\", void 0);\n\t    exports.EmptyPointSettings = EmptyPointSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(8), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, double_range_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Double = (function () {\n\t        function Double(chart) {\n\t            this.chart = chart;\n\t        }\n\t        Double.prototype.calculateNumericNiceInterval = function (axis, delta, size) {\n\t            var actualDesiredIntervalsCount = axis.getActualDesiredIntervalsCount(size);\n\t            var niceInterval = delta / actualDesiredIntervalsCount;\n\t            if (axis.desiredIntervals != null) {\n\t                return niceInterval;\n\t            }\n\t            var minInterval = Math.pow(10, Math.floor(helper_2.logBase(niceInterval, 10)));\n\t            for (var _i = 0, _a = axis.intervalDivs; _i < _a.length; _i++) {\n\t                var interval = _a[_i];\n\t                var currentInterval = minInterval * interval;\n\t                if (actualDesiredIntervalsCount < (delta / currentInterval)) {\n\t                    break;\n\t                }\n\t                niceInterval = currentInterval;\n\t            }\n\t            return niceInterval;\n\t        };\n\t        Double.prototype.getActualRange = function (axis, size) {\n\t            this.initializeDoubleRange(axis);\n\t            axis.actualRange.interval = axis.interval || this.calculateNumericNiceInterval(axis, axis.doubleRange.delta, size);\n\t            axis.actualRange.min = axis.doubleRange.start;\n\t            axis.actualRange.max = axis.doubleRange.end;\n\t        };\n\t        Double.prototype.initializeDoubleRange = function (axis) {\n\t            if (axis.minimum !== null) {\n\t                this.min = axis.minimum;\n\t            }\n\t            else if (this.min === null || this.min === Number.POSITIVE_INFINITY) {\n\t                this.min = 0;\n\t            }\n\t            if (axis.maximum !== null) {\n\t                this.max = axis.maximum;\n\t            }\n\t            else if (this.max === null || this.max === Number.NEGATIVE_INFINITY) {\n\t                this.max = 5;\n\t            }\n\t            if (this.min === this.max) {\n\t                this.max = this.min + 1;\n\t            }\n\t            axis.doubleRange = new double_range_1.DoubleRange(this.min, this.max);\n\t            axis.actualRange = {};\n\t        };\n\t        Double.prototype.calculateRangeAndInterval = function (size, axis) {\n\t            this.calculateRange(axis, size);\n\t            this.getActualRange(axis, size);\n\t            this.applyRangePadding(axis, size);\n\t            this.calculateVisibleLabels(axis, this.chart);\n\t        };\n\t        Double.prototype.calculateRange = function (axis, size) {\n\t            var series;\n\t            this.min = null;\n\t            this.max = null;\n\t            if (!axis.setRange()) {\n\t                for (var _i = 0, _a = axis.series; _i < _a.length; _i++) {\n\t                    var series_1 = _a[_i];\n\t                    if (!series_1.visible) {\n\t                        continue;\n\t                    }\n\t                    this.paddingInterval = 0;\n\t                    if ((series_1.type.indexOf('Column') > -1 && axis.orientation === 'Horizontal')\n\t                        || (series_1.type.indexOf('Bar') > -1 && axis.orientation === 'Vertical')) {\n\t                        if ((series_1.xAxis.valueType === 'Double' || series_1.xAxis.valueType === 'DateTime')\n\t                            && series_1.xAxis.rangePadding === 'Auto') {\n\t                            this.paddingInterval = helper_1.getMinPointsDelta(series_1.xAxis, axis.series) / 2;\n\t                        }\n\t                    }\n\t                    if (axis.orientation === 'Horizontal') {\n\t                        if (this.chart.requireInvertedAxis) {\n\t                            this.findMinMax(series_1.yMin, series_1.yMax);\n\t                        }\n\t                        else {\n\t                            this.findMinMax(series_1.xMin - this.paddingInterval, series_1.xMax + this.paddingInterval);\n\t                        }\n\t                    }\n\t                    if (axis.orientation === 'Vertical') {\n\t                        if (this.chart.requireInvertedAxis) {\n\t                            this.findMinMax(series_1.xMin - this.paddingInterval, series_1.xMax + this.paddingInterval);\n\t                        }\n\t                        else {\n\t                            this.findMinMax(series_1.yMin, series_1.yMax);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Double.prototype.findMinMax = function (min, max) {\n\t            if (this.min === null || this.min > min) {\n\t                this.min = min;\n\t            }\n\t            if (this.max === null || this.max < max) {\n\t                this.max = max;\n\t            }\n\t        };\n\t        Double.prototype.applyRangePadding = function (axis, size) {\n\t            var range;\n\t            var start = axis.actualRange.min;\n\t            var end = axis.actualRange.max;\n\t            if (!axis.setRange()) {\n\t                var interval = axis.actualRange.interval;\n\t                var padding = axis.getRangePadding(this.chart);\n\t                if (padding === 'Additional' || padding === 'Round') {\n\t                    this.findAdditional(axis, start, end, interval);\n\t                }\n\t                else if (padding === 'Normal') {\n\t                    this.findNormal(axis, start, end, interval, size);\n\t                }\n\t                else {\n\t                    this.updateActualRange(axis, start, end, interval);\n\t                }\n\t            }\n\t            axis.actualRange.delta = axis.actualRange.max - axis.actualRange.min;\n\t            this.calculateVisibleRange(size, axis);\n\t        };\n\t        Double.prototype.updateActualRange = function (axis, minimum, maximum, interval) {\n\t            axis.actualRange.min = axis.minimum != null ? axis.minimum : minimum;\n\t            axis.actualRange.max = axis.maximum != null ? axis.maximum : maximum;\n\t            axis.actualRange.interval = axis.interval != null ? axis.interval : interval;\n\t        };\n\t        Double.prototype.findAdditional = function (axis, start, end, interval) {\n\t            var minimum;\n\t            var maximum;\n\t            minimum = Math.floor(start / interval) * interval;\n\t            maximum = Math.ceil(end / interval) * interval;\n\t            if (axis.rangePadding === 'Additional') {\n\t                minimum -= interval;\n\t                maximum += interval;\n\t            }\n\t            this.updateActualRange(axis, minimum, maximum, interval);\n\t        };\n\t        Double.prototype.findNormal = function (axis, start, end, interval, size) {\n\t            var remaining;\n\t            var minimum;\n\t            var maximum;\n\t            var startValue = start;\n\t            if (start < 0) {\n\t                startValue = 0;\n\t                minimum = start + (start / 20);\n\t                remaining = interval + (minimum % interval);\n\t                if ((0.365 * interval) >= remaining) {\n\t                    minimum -= interval;\n\t                }\n\t                if (minimum % interval < 0) {\n\t                    minimum = (minimum - interval) - (minimum % interval);\n\t                }\n\t            }\n\t            else {\n\t                minimum = start < ((5.0 / 6.0) * end) ? 0 : (start - (end - start) / 2);\n\t                if (minimum % interval > 0) {\n\t                    minimum -= (minimum % interval);\n\t                }\n\t            }\n\t            maximum = (end > 0) ? (end + (end - startValue) / 20) : (end - (end - startValue) / 20);\n\t            remaining = interval - (maximum % interval);\n\t            if ((0.365 * interval) >= remaining) {\n\t                maximum += interval;\n\t            }\n\t            if (maximum % interval > 0) {\n\t                maximum = (maximum + interval) - (maximum % interval);\n\t            }\n\t            axis.doubleRange = new double_range_1.DoubleRange(minimum, maximum);\n\t            if (minimum === 0) {\n\t                interval = this.calculateNumericNiceInterval(axis, axis.doubleRange.delta, size);\n\t                maximum = Math.ceil(maximum / interval) * interval;\n\t            }\n\t            this.updateActualRange(axis, minimum, maximum, interval);\n\t        };\n\t        Double.prototype.calculateVisibleRange = function (size, axis) {\n\t            axis.visibleRange = axis.actualRange;\n\t            if (axis.zoomFactor < 1 || axis.zoomPosition > 0) {\n\t                axis.calculateVisibleRange(size);\n\t                axis.visibleRange.interval = (axis.enableAutoIntervalOnZooming && axis.valueType !== 'Category') ?\n\t                    this.calculateNumericNiceInterval(axis, axis.doubleRange.delta, size)\n\t                    : axis.visibleRange.interval;\n\t            }\n\t        };\n\t        Double.prototype.calculateVisibleLabels = function (axis, chart) {\n\t            axis.visibleLabels = [];\n\t            var tempInterval = axis.visibleRange.min;\n\t            if (axis.zoomFactor < 1 || axis.zoomPosition > 0 || this.paddingInterval) {\n\t                tempInterval = axis.visibleRange.min - (axis.visibleRange.min % axis.visibleRange.interval);\n\t            }\n\t            var format = this.getFormat(axis);\n\t            var isCustom = format.match('{value}') !== null;\n\t            axis.format = chart.intl.getNumberFormat({ format: isCustom ? '' : format,\n\t                useGrouping: chart.useGroupingSeparator });\n\t            axis.startLabel = axis.format(axis.visibleRange.min);\n\t            axis.endLabel = axis.format(axis.visibleRange.max);\n\t            for (; tempInterval <= axis.visibleRange.max; tempInterval += axis.visibleRange.interval) {\n\t                if (helper_2.withIn(tempInterval, axis.visibleRange)) {\n\t                    axis.triggerLabelRender(chart, tempInterval, this.formatValue(axis, isCustom, format, tempInterval));\n\t                }\n\t            }\n\t            axis.getMaxLabelWidth(chart);\n\t        };\n\t        Double.prototype.getFormat = function (axis) {\n\t            if (axis.labelFormat) {\n\t                return axis.labelFormat;\n\t            }\n\t            return axis.isStack100 ? '{value}%' : '';\n\t        };\n\t        Double.prototype.formatValue = function (axis, isCustom, format, tempInterval) {\n\t            return isCustom ? format.replace('{value}', axis.format(tempInterval))\n\t                : axis.format(tempInterval);\n\t        };\n\t        return Double;\n\t    }());\n\t    exports.Double = Double;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Theme;\n\t    (function (Theme) {\n\t        Theme.axisLabelFont = {\n\t            size: '12px',\n\t            fontWeight: 'Normal',\n\t            color: '#686868',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.axisTitleFont = {\n\t            size: '14px',\n\t            fontWeight: 'Normal',\n\t            color: '#424242',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.chartTitleFont = {\n\t            size: '15px',\n\t            fontWeight: '500',\n\t            color: '#424242',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.crosshairLabelFont = {\n\t            size: '13px',\n\t            fontWeight: 'Normal',\n\t            color: '#e5e5e5',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.tooltipLabelFont = {\n\t            size: '13px',\n\t            fontWeight: 'Normal',\n\t            color: null,\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.legendLabelFont = {\n\t            size: '13px',\n\t            fontWeight: 'Normal',\n\t            color: '#353535',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.stripLineLabelFont = {\n\t            size: '12px',\n\t            fontWeight: 'Regular',\n\t            color: '#353535',\n\t            fontStyle: 'Normal',\n\t            fontFamily: 'Segoe UI'\n\t        };\n\t        Theme.axisLineColor = '#b5b5b5';\n\t        Theme.axisMajorGridLineColor = '#dbdbdb';\n\t        Theme.axisMinorGridLineColor = '#eaeaea';\n\t        Theme.axisMajorTickLineColor = '#b5b5b5';\n\t        Theme.axisMinorTickLineColor = '#d6d6d6';\n\t        Theme.crossHairLabelColor = '#4f4f4f';\n\t        Theme.chartBackgroundColor = '#FFFFFF';\n\t        Theme.selectionRectFill = 'rgba(41, 171, 226, 0.1)';\n\t        Theme.selectionRectStroke = '#29abe2';\n\t    })(Theme = exports.Theme || (exports.Theme = {}));\n\t    function getSeriesColor(theme) {\n\t        var palette;\n\t        switch (theme) {\n\t            case 'Material':\n\t                palette = ['#00bdae', '#404041', '#357cd2', '#e56590', '#f8b883',\n\t                    '#70ad47', '#dd8abd', '#7f84e8', '#7bb4eb', '#ea7a57'];\n\t                break;\n\t            case 'Fabric':\n\t                palette = ['#4472c4', '#ed7d31', '#ffc000', '#70ad47', '#5b9bd5',\n\t                    '#c1c1c1', '#6f6fe2', '#e269ae', '#9e480e', '#997300'];\n\t                break;\n\t            case 'Bootstrap':\n\t                palette = ['#a16ee5', '#f7ce69', '#55a5c2', '#7ddf1e', '#ff6ea6',\n\t                    '#7953ac', '#b99b4f', '#407c92', '#5ea716', '#b91c52'];\n\t                break;\n\t        }\n\t        return palette;\n\t    }\n\t    exports.getSeriesColor = getSeriesColor;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(11), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, theme_1, base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ChartAnnotationSettings = (function (_super) {\n\t        __extends(ChartAnnotationSettings, _super);\n\t        function ChartAnnotationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ChartAnnotationSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], ChartAnnotationSettings.prototype, \"x\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], ChartAnnotationSettings.prototype, \"y\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], ChartAnnotationSettings.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Center')\n\t    ], ChartAnnotationSettings.prototype, \"horizontalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Pixel')\n\t    ], ChartAnnotationSettings.prototype, \"coordinateUnits\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Chart')\n\t    ], ChartAnnotationSettings.prototype, \"region\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Middle')\n\t    ], ChartAnnotationSettings.prototype, \"verticalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], ChartAnnotationSettings.prototype, \"xAxisName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], ChartAnnotationSettings.prototype, \"yAxisName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], ChartAnnotationSettings.prototype, \"description\", void 0);\n\t    exports.ChartAnnotationSettings = ChartAnnotationSettings;\n\t    var StripLineSettings = (function (_super) {\n\t        __extends(StripLineSettings, _super);\n\t        function StripLineSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return StripLineSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], StripLineSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], StripLineSettings.prototype, \"startFromAxis\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], StripLineSettings.prototype, \"start\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], StripLineSettings.prototype, \"end\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], StripLineSettings.prototype, \"size\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#808080')\n\t    ], StripLineSettings.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: 'transparent', width: 1 }, base_1.Border)\n\t    ], StripLineSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], StripLineSettings.prototype, \"text\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], StripLineSettings.prototype, \"rotation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Middle')\n\t    ], StripLineSettings.prototype, \"horizontalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Middle')\n\t    ], StripLineSettings.prototype, \"verticalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.stripLineLabelFont, base_1.Font)\n\t    ], StripLineSettings.prototype, \"textStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Behind')\n\t    ], StripLineSettings.prototype, \"zIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], StripLineSettings.prototype, \"opacity\", void 0);\n\t    exports.StripLineSettings = StripLineSettings;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, helper_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var axisPadding = 10;\n\t    var CartesianAxisLayoutPanel = (function () {\n\t        function CartesianAxisLayoutPanel(chartModule) {\n\t            this.chart = chartModule;\n\t            this.padding = 5;\n\t        }\n\t        CartesianAxisLayoutPanel.prototype.measureAxis = function (rect) {\n\t            var chart = this.chart;\n\t            this.seriesClipRect = new helper_2.Rect(rect.x, rect.y, rect.width, rect.height);\n\t            this.initialClipRect = rect;\n\t            this.leftSize = 0;\n\t            this.rightSize = 0;\n\t            this.topSize = 0;\n\t            this.bottomSize = 0;\n\t            this.measureRowAxis(chart, this.initialClipRect);\n\t            this.initialClipRect = helper_1.subtractThickness(this.initialClipRect, new helper_2.Thickness(this.leftSize, this.rightSize, 0, 0));\n\t            this.measureColumnAxis(chart, this.initialClipRect);\n\t            this.initialClipRect = helper_1.subtractThickness(this.initialClipRect, new helper_2.Thickness(0, 0, this.topSize, this.bottomSize));\n\t            if (!this.chart.delayRedraw) {\n\t                this.calculateAxisSize(this.initialClipRect);\n\t            }\n\t            this.leftSize = 0;\n\t            this.rightSize = 0;\n\t            this.topSize = 0;\n\t            this.bottomSize = 0;\n\t            this.measureRowAxis(chart, this.initialClipRect);\n\t            this.seriesClipRect = helper_1.subtractThickness(this.seriesClipRect, new helper_2.Thickness(this.leftSize, this.rightSize, 0, 0));\n\t            this.measureColumnAxis(chart, this.initialClipRect);\n\t            this.seriesClipRect = helper_1.subtractThickness(this.seriesClipRect, new helper_2.Thickness(0, 0, this.topSize, this.bottomSize));\n\t            if (!this.chart.delayRedraw) {\n\t                chart.refreshAxis();\n\t                this.calculateAxisSize(this.seriesClipRect);\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.measureRowAxis = function (chart, rect) {\n\t            var row;\n\t            this.calculateRowSize(rect);\n\t            for (var _i = 0, _a = chart.rows; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                row = item;\n\t                row.nearSizes = [];\n\t                row.farSizes = [];\n\t                this.arrangeAxis(row);\n\t                this.measureDefinition(row, chart, new helper_2.Size(chart.availableSize.width, row.computedHeight), rect);\n\t                if (this.leftSize < helper_1.sum(row.nearSizes)) {\n\t                    this.leftSize = helper_1.sum(row.nearSizes);\n\t                }\n\t                if (this.rightSize < helper_1.sum(row.farSizes)) {\n\t                    this.rightSize = helper_1.sum(row.farSizes);\n\t                }\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.measureColumnAxis = function (chart, rect) {\n\t            var column;\n\t            this.calculateColumnSize(rect);\n\t            for (var _i = 0, _a = chart.columns; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                column = item;\n\t                column.farSizes = [];\n\t                column.nearSizes = [];\n\t                this.arrangeAxis(column);\n\t                this.measureDefinition(column, chart, new helper_2.Size(column.computedWidth, chart.availableSize.height), rect);\n\t                if (this.bottomSize < helper_1.sum(column.nearSizes)) {\n\t                    this.bottomSize = helper_1.sum(column.nearSizes);\n\t                }\n\t                if (this.topSize < helper_1.sum(column.farSizes)) {\n\t                    this.topSize = helper_1.sum(column.farSizes);\n\t                }\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.measureDefinition = function (definition, chart, size, clipRect) {\n\t            var axis;\n\t            var axisType;\n\t            for (var _i = 0, _a = definition.axes; _i < _a.length; _i++) {\n\t                var axis_1 = _a[_i];\n\t                axis_1.getModule(chart);\n\t                axis_1.baseModule.calculateRangeAndInterval(size, axis_1);\n\t                definition.computeSize(axis_1, clipRect);\n\t            }\n\t            if (definition.farSizes.length > 0) {\n\t                definition.farSizes[definition.farSizes.length - 1] -= axisPadding;\n\t            }\n\t            if (definition.nearSizes.length > 0) {\n\t                definition.nearSizes[definition.nearSizes.length - 1] -= axisPadding;\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.calculateAxisSize = function (rect) {\n\t            var chart = this.chart;\n\t            var row;\n\t            var column;\n\t            var definition;\n\t            var axis;\n\t            var nearCount = 0;\n\t            var farCount = 0;\n\t            var size = 0;\n\t            var x;\n\t            var y;\n\t            this.calculateRowSize(rect);\n\t            for (var i = 0, len = chart.rows.length; i < len; i++) {\n\t                row = chart.rows[i];\n\t                nearCount = 0;\n\t                farCount = 0;\n\t                for (var j = 0, len_1 = row.axes.length; j < len_1; j++) {\n\t                    axis = row.axes[j];\n\t                    if (axis.rect.height === 0) {\n\t                        axis.rect.height = row.computedHeight;\n\t                        size = 0;\n\t                        for (var k = i + 1, len_2 = i + axis.span; k < len_2; k++) {\n\t                            definition = chart.rows[k];\n\t                            size += definition.computedHeight;\n\t                        }\n\t                        axis.rect.y = (row.computedTop - size) + axis.plotOffset;\n\t                        axis.rect.height = (axis.rect.height + size) - (2 * axis.plotOffset);\n\t                        axis.rect.width = 0;\n\t                    }\n\t                    if (axis.opposedPosition) {\n\t                        x = rect.x + rect.width + helper_1.sum(helper_1.subArray(row.farSizes, farCount));\n\t                        axis.rect.x = axis.rect.x >= x ? axis.rect.x : x;\n\t                        farCount++;\n\t                    }\n\t                    else {\n\t                        x = rect.x - helper_1.sum(helper_1.subArray(row.nearSizes, nearCount));\n\t                        axis.rect.x = axis.rect.x <= x ? axis.rect.x : x;\n\t                        nearCount++;\n\t                    }\n\t                }\n\t            }\n\t            this.calculateColumnSize(rect);\n\t            for (var i = 0, len = chart.columns.length; i < len; i++) {\n\t                column = chart.columns[i];\n\t                nearCount = 0;\n\t                farCount = 0;\n\t                for (var j = 0, len_3 = column.axes.length; j < len_3; j++) {\n\t                    axis = column.axes[j];\n\t                    if (axis.rect.width === 0) {\n\t                        for (var k = i, len_4 = (i + axis.span); k < len_4; k++) {\n\t                            definition = chart.columns[k];\n\t                            axis.rect.width += definition.computedWidth;\n\t                        }\n\t                        axis.rect.x = column.computedLeft + axis.plotOffset;\n\t                        axis.rect.width -= (2 * axis.plotOffset);\n\t                        axis.rect.height = 0;\n\t                    }\n\t                    if (axis.opposedPosition) {\n\t                        y = rect.y - helper_1.sum(helper_1.subArray(column.farSizes, farCount));\n\t                        axis.rect.y = axis.rect.y <= y ? axis.rect.y : y;\n\t                        farCount++;\n\t                    }\n\t                    else {\n\t                        y = rect.y + rect.height + helper_1.sum(helper_1.subArray(column.nearSizes, nearCount));\n\t                        axis.rect.y = axis.rect.y >= y ? axis.rect.y : y;\n\t                        nearCount++;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.measure = function () {\n\t            var chart = this.chart;\n\t            var row;\n\t            var column;\n\t            var definition;\n\t            var axis;\n\t            var actualIndex;\n\t            var span;\n\t            var axisLength;\n\t            for (var _i = 0, _a = chart.axisCollections; _i < _a.length; _i++) {\n\t                var axis_2 = _a[_i];\n\t                if (axis_2.orientation === 'Vertical') {\n\t                    chart.verticalAxes.push(axis_2);\n\t                    actualIndex = this.getActualRow(axis_2);\n\t                    row = chart.rows[actualIndex];\n\t                    this.pushAxis(row, axis_2);\n\t                    span = ((actualIndex + axis_2.span) > chart.rows.length ? chart.rows.length : (actualIndex + axis_2.span));\n\t                    for (var j = actualIndex + 1; j < span; j++) {\n\t                        definition = chart.rows[j];\n\t                        definition.axes[row.axes.length - 1] = axis_2;\n\t                        chart.rows[j] = definition;\n\t                    }\n\t                    chart.rows[actualIndex] = row;\n\t                }\n\t                else {\n\t                    chart.horizontalAxes.push(axis_2);\n\t                    actualIndex = this.getActualColumn(axis_2);\n\t                    column = chart.columns[actualIndex];\n\t                    this.pushAxis(column, axis_2);\n\t                    span = ((actualIndex + axis_2.span) > chart.columns.length ? chart.columns.length : (actualIndex + axis_2.span));\n\t                    for (var j = actualIndex + 1; j < span; j++) {\n\t                        definition = chart.columns[j];\n\t                        definition.axes[column.axes.length - 1] = axis_2;\n\t                        chart.columns[j] = definition;\n\t                    }\n\t                    chart.columns[actualIndex] = column;\n\t                }\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.pushAxis = function (definition, axis) {\n\t            for (var i = 0, len = definition.axes.length; i <= len; i++) {\n\t                if (!definition.axes[i]) {\n\t                    definition.axes[i] = axis;\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.arrangeAxis = function (definition) {\n\t            var axisCollection = [];\n\t            for (var i = 0, len = definition.axes.length; i <= len; i++) {\n\t                if (definition.axes[i]) {\n\t                    axisCollection.push(definition.axes[i]);\n\t                }\n\t            }\n\t            definition.axes = axisCollection;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.getActualColumn = function (axis) {\n\t            var actualLength = this.chart.columns.length;\n\t            var pos = axis.columnIndex;\n\t            var result = pos >= actualLength ? actualLength - 1 : (pos < 0 ? 0 : pos);\n\t            return result;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.getActualRow = function (axis) {\n\t            var actualLength = this.chart.rows.length;\n\t            var pos = axis.rowIndex;\n\t            var result = pos >= actualLength ? actualLength - 1 : (pos < 0 ? 0 : pos);\n\t            return result;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.calculateRowSize = function (rect) {\n\t            var chart = this.chart;\n\t            var row;\n\t            var rowTop = rect.y + rect.height;\n\t            var height = 0;\n\t            var remainingHeight = Math.max(0, rect.height);\n\t            for (var i = 0, len = chart.rows.length; i < len; i++) {\n\t                row = chart.rows[i];\n\t                if (row.height.indexOf('%') !== -1) {\n\t                    height = Math.min(remainingHeight, (rect.height * parseInt(row.height, 10) / 100));\n\t                }\n\t                else {\n\t                    height = Math.min(remainingHeight, parseInt(row.height, 10));\n\t                }\n\t                height = (i !== (len - 1)) ? height : remainingHeight;\n\t                row.computedHeight = height;\n\t                rowTop -= height;\n\t                row.computedTop = rowTop;\n\t                remainingHeight -= height;\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.calculateColumnSize = function (rect) {\n\t            var chart = this.chart;\n\t            var column;\n\t            var columnLeft = rect.x;\n\t            var width = 0;\n\t            var remainingWidth = Math.max(0, rect.width);\n\t            for (var i = 0, len = chart.columns.length; i < len; i++) {\n\t                column = chart.columns[i];\n\t                if (column.width.indexOf('%') !== -1) {\n\t                    width = Math.min(remainingWidth, (rect.width * parseInt(column.width, 10) / 100));\n\t                }\n\t                else {\n\t                    width = Math.min(remainingWidth, parseInt(column.width, 10));\n\t                }\n\t                width = (i !== (len - 1)) ? width : remainingWidth;\n\t                column.computedWidth = width;\n\t                column.computedLeft = columnLeft;\n\t                columnLeft += width;\n\t                remainingWidth -= width;\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.renderAxes = function () {\n\t            var chart = this.chart;\n\t            var axis;\n\t            var axisElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisCollection' });\n\t            var definitionElement = chart.renderer.createGroup({ id: chart.element.id + 'DefintionLine' });\n\t            for (var i = 0, len = chart.axisCollections.length; i < len; i++) {\n\t                axis = chart.axisCollections[i];\n\t                this.element = chart.renderer.createGroup({ id: chart.element.id + 'AxisGroup' + i });\n\t                if (axis.orientation === 'Horizontal') {\n\t                    if (axis.visible && axis.lineStyle.width > 0) {\n\t                        this.drawAxisLine(axis, i, axis.plotOffset, 0);\n\t                    }\n\t                    if (axis.majorGridLines.width > 0 || axis.majorTickLines.width > 0) {\n\t                        this.drawXAxisGridLine(axis, i);\n\t                    }\n\t                    if (axis.visible) {\n\t                        this.drawXAxisLabels(axis, i);\n\t                        this.drawXAxisTitle(axis, i);\n\t                    }\n\t                }\n\t                else {\n\t                    if (axis.visible && axis.lineStyle.width > 0) {\n\t                        this.drawAxisLine(axis, i, 0, axis.plotOffset);\n\t                    }\n\t                    if (axis.majorGridLines.width > 0 || axis.majorTickLines.width > 0) {\n\t                        this.drawYAxisGridLine(axis, i);\n\t                    }\n\t                    if (axis.visible) {\n\t                        this.drawYAxisLabels(axis, i);\n\t                        this.drawYAxisTitle(axis, i);\n\t                    }\n\t                }\n\t                axisElement.appendChild(this.element);\n\t            }\n\t            this.element = chart.renderer.createGroup({ id: chart.element.id + 'DefintionLine' });\n\t            for (var j = 0, len = chart.rows.length; j < len; j++) {\n\t                var row = chart.rows[j];\n\t                if (row.border.color) {\n\t                    this.drawBottomLine(row, j, true);\n\t                }\n\t            }\n\t            for (var j = 0, len = chart.columns.length; j < len; j++) {\n\t                var column = chart.columns[j];\n\t                if (column.border.color) {\n\t                    this.drawBottomLine(column, j, false);\n\t                }\n\t            }\n\t            axisElement.appendChild(this.element);\n\t            chart.svgObject.appendChild(axisElement);\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawBottomLine = function (definition, index, isRow) {\n\t            var chart = this.chart;\n\t            var optionsLine = {};\n\t            var x1;\n\t            var x2;\n\t            var y1;\n\t            var y2;\n\t            var definitionName;\n\t            if (isRow) {\n\t                definition = definition;\n\t                y1 = y2 = definition.computedTop + definition.computedHeight;\n\t                x1 = this.seriesClipRect.x;\n\t                x2 = x1 + this.seriesClipRect.width;\n\t                definitionName = 'Row';\n\t            }\n\t            else {\n\t                definition = definition;\n\t                x1 = x2 = definition.computedLeft;\n\t                y1 = this.seriesClipRect.y;\n\t                y2 = y1 + this.seriesClipRect.height;\n\t                definitionName = 'Column';\n\t            }\n\t            optionsLine = {\n\t                'id': chart.element.id + '_AxisBottom_' + definitionName + index,\n\t                x1: x1,\n\t                y1: y1,\n\t                x2: x2,\n\t                y2: y2,\n\t                'stroke-width': definition.border.width,\n\t                'stroke': definition.border.color,\n\t            };\n\t            this.htmlObject = chart.renderer.drawLine(optionsLine);\n\t            this.element.appendChild(this.htmlObject);\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawAxisLine = function (axis, index, plotX, plotY) {\n\t            var chart = this.chart;\n\t            var optionsLine = {};\n\t            var rect = axis.rect;\n\t            optionsLine = {\n\t                'id': chart.element.id + 'AxisLine_' + index,\n\t                x1: rect.x - plotX,\n\t                y1: rect.y - plotY,\n\t                x2: rect.x + rect.width + plotX,\n\t                y2: rect.y + rect.height + plotY,\n\t                'stroke-dasharray': axis.lineStyle.dashArray,\n\t                'stroke-width': axis.lineStyle.width,\n\t                'stroke': axis.lineStyle.color\n\t            };\n\t            this.htmlObject = chart.renderer.drawLine(optionsLine);\n\t            this.element.appendChild(this.htmlObject);\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawYAxisGridLine = function (axis, index) {\n\t            var chart = this.chart;\n\t            var tempInterval;\n\t            var pointY = 0;\n\t            var majorGrid = '';\n\t            var majorTick = '';\n\t            var minorGird = '';\n\t            var minorTick = '';\n\t            var minorDirection;\n\t            var tickSize = (axis.opposedPosition) ? axis.majorTickLines.height : -axis.majorTickLines.height;\n\t            var axisLineSize = (axis.opposedPosition) ? axis.lineStyle.width / 2 : -axis.lineStyle.width / 2;\n\t            var rect = axis.rect;\n\t            var ticksbwtLabel = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks') ?\n\t                0.5 : 0;\n\t            var length = axis.visibleLabels.length;\n\t            if (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks' && length > 0) {\n\t                length += 1;\n\t            }\n\t            for (var i = 0; i < length; i++) {\n\t                tempInterval = !axis.visibleLabels[i] ? (axis.visibleLabels[i - 1].value + axis.visibleRange.interval) - ticksbwtLabel\n\t                    : axis.visibleLabels[i].value - ticksbwtLabel;\n\t                pointY = helper_1.valueToCoefficient(tempInterval, axis) * rect.height;\n\t                pointY = (pointY * -1) + (rect.y + rect.height);\n\t                if (pointY >= rect.y && (rect.y + rect.height) >= pointY) {\n\t                    if ((helper_1.inside(tempInterval, axis.visibleRange)) || this.isBorder(axis, i, pointY)) {\n\t                        majorGrid = majorGrid.concat('M ' + this.seriesClipRect.x + ' ' + (pointY) +\n\t                            ' L ' + (this.seriesClipRect.x + this.seriesClipRect.width) + ' ' + pointY + ' ');\n\t                    }\n\t                    majorTick = majorTick.concat('M ' + (rect.x + axisLineSize) + ' ' + pointY +\n\t                        ' L ' + (rect.x + tickSize + axisLineSize) + ' ' + pointY + ' ');\n\t                }\n\t                if ((axis.minorGridLines.width > 0 || axis.minorTickLines.width > 0) && axis.minorTicksPerInterval > 0) {\n\t                    minorDirection = this.drawAxisMinorLine(axis, tempInterval, minorGird, minorTick);\n\t                    minorGird = minorDirection[0];\n\t                    minorTick = minorDirection[1];\n\t                }\n\t            }\n\t            this.renderGridLine(axis, index, majorGrid, minorGird);\n\t            this.renderTickLine(axis, index, majorTick, minorTick);\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.isBorder = function (axis, index, value) {\n\t            var chart = this.chart;\n\t            var border = chart.chartArea.border;\n\t            var rect = this.seriesClipRect;\n\t            var orientation = axis.orientation;\n\t            var start = (orientation === 'Horizontal') ? rect.x : rect.y;\n\t            var size = (orientation === 'Horizontal') ? rect.width : rect.height;\n\t            var startIndex = (orientation === 'Horizontal') ? 0 : axis.visibleLabels.length - 1;\n\t            var endIndex = (orientation === 'Horizontal') ? axis.visibleLabels.length - 1 : 0;\n\t            if (axis.plotOffset > 0) {\n\t                return true;\n\t            }\n\t            else if ((value === start || value === (start + size)) && (border.width <= 0 || border.color === 'transparent')) {\n\t                return true;\n\t            }\n\t            else if ((value !== start && index === startIndex) || (value !== (start + size) && index === endIndex)) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawYAxisLabels = function (axis, index) {\n\t            var chart = this.chart;\n\t            var pointX = 0;\n\t            var pointY = 0;\n\t            var elementSize;\n\t            var options;\n\t            var padding = axis.majorTickLines.height + this.padding + axis.lineStyle.width / 2;\n\t            padding = (axis.opposedPosition) ? padding : -padding;\n\t            var anchor = (axis.opposedPosition) ? 'start' : 'end';\n\t            var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n\t            var rect = axis.rect;\n\t            for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n\t                pointX = (rect.x + padding);\n\t                elementSize = axis.visibleLabels[i].size;\n\t                pointY = helper_1.valueToCoefficient(axis.visibleLabels[i].value, axis) * rect.height;\n\t                pointY = Math.floor((pointY * -1) + (rect.y + rect.height));\n\t                options = new helper_1.TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY + (elementSize.height / 4), anchor, axis.visibleLabels[i].text);\n\t                if (axis.edgeLabelPlacement) {\n\t                    switch (axis.edgeLabelPlacement) {\n\t                        case 'None':\n\t                            break;\n\t                        case 'Hide':\n\t                            if (((i === 0 || (axis.isInversed && i === len - 1)) && options.y > rect.y + rect.height) ||\n\t                                (((i === len - 1) || (axis.isInversed && i === 0)) && options.y - elementSize.height / 2 < rect.y)) {\n\t                                options.text = '';\n\t                            }\n\t                            break;\n\t                        case 'Shift':\n\t                            if ((i === 0 || (axis.isInversed && i === len - 1)) && options.y > rect.y + rect.height) {\n\t                                options.y = pointY = rect.y + rect.height;\n\t                            }\n\t                            else if (((i === len - 1) || (axis.isInversed && i === 0)) && (options.y - elementSize.height / 2 < rect.y)) {\n\t                                options.y = pointY = rect.y + elementSize.height / 2;\n\t                            }\n\t                            break;\n\t                    }\n\t                }\n\t                helper_3.textElement(options, axis.labelStyle, axis.labelStyle.color, labelElement);\n\t            }\n\t            if (!chart.delayRedraw) {\n\t                this.element.appendChild(labelElement);\n\t            }\n\t            else if (axis.visible) {\n\t                this.createZoomingLabel(this.chart, labelElement, axis, index);\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawYAxisTitle = function (axis, index) {\n\t            var chart = this.chart;\n\t            var labelRotation = (axis.opposedPosition) ? 90 : -90;\n\t            var elementSize = helper_1.measureText(axis.title, axis.titleStyle);\n\t            var padding = axis.majorTickLines.height + axis.maxLabelSize.width + this.padding * 2;\n\t            var rect = axis.rect;\n\t            padding = axis.opposedPosition ? padding : -padding;\n\t            var x = rect.x + padding;\n\t            var y = rect.y + rect.height / 2;\n\t            var options = new helper_1.TextOption(chart.element.id + '_AxisTitle_' + index, x, y - this.padding, 'middle', axis.title, 'rotate(' + labelRotation + ',' + (x) + ',' + (y) + ')');\n\t            var element = helper_3.textElement(options, axis.titleStyle, axis.titleStyle.color, this.element);\n\t            element.setAttribute('aria-label', axis.description || axis.title);\n\t            element.setAttribute('tabindex', axis.tabIndex.toString());\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawXAxisGridLine = function (axis, index) {\n\t            var chart = this.chart;\n\t            var tempInterval;\n\t            var pointX = 0;\n\t            var majorGrid = '';\n\t            var majorTick = '';\n\t            var minorGird = '';\n\t            var minorTick = '';\n\t            var minorDirection;\n\t            var tickSize = (axis.opposedPosition) ? -axis.majorTickLines.height : axis.majorTickLines.height;\n\t            var axisLineSize = (axis.opposedPosition) ? -axis.lineStyle.width / 2 : axis.lineStyle.width / 2;\n\t            var ticksbwtLabel = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks') ?\n\t                0.5 : 0;\n\t            var rect = axis.rect;\n\t            var length = axis.visibleLabels.length;\n\t            if (axis.valueType === 'Category' && length > 0 && axis.labelPlacement === 'BetweenTicks') {\n\t                length += 1;\n\t            }\n\t            for (var i = 0; i < length; i++) {\n\t                tempInterval = axis.visibleLabels[i] ? axis.visibleLabels[i].value - ticksbwtLabel\n\t                    : (axis.visibleLabels[i - 1].value + axis.visibleRange.interval) - ticksbwtLabel;\n\t                pointX = (helper_1.valueToCoefficient(tempInterval, axis) * rect.width) + rect.x;\n\t                if (pointX >= rect.x && (rect.x + rect.width) >= pointX) {\n\t                    if (helper_1.inside(tempInterval, axis.visibleRange) || this.isBorder(axis, i, pointX)) {\n\t                        majorGrid = majorGrid.concat('M ' + pointX + ' ' + (this.seriesClipRect.y + this.seriesClipRect.height) +\n\t                            ' L ' + pointX + ' ' + this.seriesClipRect.y + ' ');\n\t                    }\n\t                    majorTick = majorTick.concat('M ' + (pointX) + ' ' + (rect.y + axisLineSize) +\n\t                        ' L ' + (pointX) + ' ' + (rect.y + tickSize + axisLineSize) + ' ');\n\t                }\n\t                if (axis.minorTicksPerInterval > 0 && (axis.minorGridLines.width > 0 || axis.minorTickLines.width > 0)) {\n\t                    minorDirection = this.drawAxisMinorLine(axis, tempInterval, minorGird, minorTick);\n\t                    minorGird = minorDirection[0];\n\t                    minorTick = minorDirection[1];\n\t                }\n\t            }\n\t            this.renderGridLine(axis, index, majorGrid, minorGird);\n\t            this.renderTickLine(axis, index, majorTick, minorTick);\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawAxisMinorLine = function (axis, tempInterval, minorGird, minorTick) {\n\t            var value = tempInterval;\n\t            var coor = 0;\n\t            var position = 0;\n\t            var range = axis.visibleRange;\n\t            var direction = [];\n\t            var tickSize = axis.opposedPosition ? -axis.minorTickLines.height : axis.minorTickLines.height;\n\t            var rect = axis.rect;\n\t            var logStart;\n\t            var logEnd;\n\t            var logInterval = 1;\n\t            var logPosition = 1;\n\t            if (axis.valueType === 'Logarithmic') {\n\t                logStart = Math.pow(axis.logBase, value - range.interval);\n\t                logEnd = Math.pow(axis.logBase, value);\n\t                logInterval = (logEnd - logStart) / (axis.minorTicksPerInterval + 1);\n\t                logPosition = logStart + logInterval;\n\t            }\n\t            if (axis.orientation === 'Horizontal') {\n\t                for (var j = 0; j < axis.minorTicksPerInterval; j++) {\n\t                    value = this.findLogNumeric(axis, logPosition, logInterval, value);\n\t                    logPosition += logInterval;\n\t                    if (helper_1.inside(value, range)) {\n\t                        position = Math.ceil(((value - range.min) / (range.max - range.min)) * rect.width);\n\t                        coor = (Math.floor(position + rect.x));\n\t                        minorGird = minorGird.concat('M' + ' ' + coor + ' ' + (this.seriesClipRect.y)\n\t                            + 'L ' + coor + ' ' + (this.seriesClipRect.y + this.seriesClipRect.height));\n\t                        coor = (Math.floor(position + rect.x));\n\t                        minorTick = minorTick.concat('M' + ' ' + coor + ' ' + (rect.y)\n\t                            + 'L ' + coor + ' ' + (rect.y + tickSize));\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                tickSize = axis.opposedPosition ? axis.minorTickLines.height : -axis.minorTickLines.height;\n\t                for (var j = 0; j < axis.minorTicksPerInterval; j++) {\n\t                    value = this.findLogNumeric(axis, logPosition, logInterval, value);\n\t                    if (helper_1.inside(value, range)) {\n\t                        position = Math.ceil(((value - range.min) / (range.max - range.min)) * rect.height) * -1;\n\t                        coor = (Math.floor(position + rect.y + rect.height));\n\t                        minorGird = minorGird.concat('M' + ' ' + (this.seriesClipRect.x) + ' ' + coor\n\t                            + 'L ' + (this.seriesClipRect.x + this.seriesClipRect.width) + ' ' + coor);\n\t                        coor = (Math.floor(position + rect.y + rect.height));\n\t                        minorTick = minorTick.concat('M' + ' ' + rect.x + ' ' + coor + 'L ' + (rect.x + tickSize) + ' ' + coor);\n\t                    }\n\t                    logPosition += logInterval;\n\t                }\n\t            }\n\t            direction.push(minorGird);\n\t            direction.push(minorTick);\n\t            return direction;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.findLogNumeric = function (axis, logPosition, logInterval, value) {\n\t            var range = axis.visibleRange;\n\t            if (axis.valueType === 'Logarithmic') {\n\t                value = helper_2.logBase(logPosition, axis.logBase);\n\t            }\n\t            else if (axis.valueType === 'DateTime') {\n\t                value += axis.dateTimeInterval / (axis.minorTicksPerInterval + 1);\n\t            }\n\t            else {\n\t                value += range.interval / (axis.minorTicksPerInterval + 1);\n\t            }\n\t            return value;\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawXAxisLabels = function (axis, index) {\n\t            var chart = this.chart;\n\t            var pointX = 0;\n\t            var pointY = 0;\n\t            var elementSize;\n\t            var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n\t            var padding = axis.majorTickLines.height + this.padding + axis.lineStyle.width / 2;\n\t            var labelPadding;\n\t            var rotateSize;\n\t            var diffHeight;\n\t            var yLocation;\n\t            var angle;\n\t            var anglePadding = ((axis.angle === 90 || axis.angle === -90)) ? -2 : 0;\n\t            var rect = axis.rect;\n\t            var options;\n\t            var previousEnd = 0;\n\t            var width = 0;\n\t            var intervalLength = axis.rect.width / axis.visibleLabels.length;\n\t            var label;\n\t            for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n\t                label = axis.visibleLabels[i];\n\t                pointX = (helper_1.valueToCoefficient(label.value, axis) * rect.width) + rect.x;\n\t                elementSize = label.size;\n\t                width = ((axis.labelIntersectAction === 'Trim' || axis.labelIntersectAction === 'Wrap')\n\t                    && elementSize.width > intervalLength) ? intervalLength : elementSize.width;\n\t                pointX -= width / 2;\n\t                labelPadding = (axis.opposedPosition) ?\n\t                    -(padding + ((axis.angle !== 0) ? (3 * (elementSize.height / 4) + (2 * axis.maxLabelSize.height / 5)) :\n\t                        (label.index > 1 ? (2 * (elementSize.height / 4)) : 0)))\n\t                    : padding + ((axis.angle !== 0) ? (3 * (elementSize.height / 4)) + (2 * axis.maxLabelSize.height / 5)\n\t                        : (3 * (elementSize.height / 4)));\n\t                pointY = (rect.y + (labelPadding * label.index));\n\t                options = new helper_1.TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, '', this.findAxisLabel(axis, label.text, intervalLength));\n\t                if (axis.edgeLabelPlacement) {\n\t                    switch (axis.edgeLabelPlacement) {\n\t                        case 'None':\n\t                            break;\n\t                        case 'Hide':\n\t                            if (((i === 0 || (axis.isInversed && i === len - 1)) && options.x < rect.x) ||\n\t                                ((i === len - 1 || (axis.isInversed && i === 0)) && (options.x + width > rect.x + rect.width))) {\n\t                                continue;\n\t                            }\n\t                            break;\n\t                        case 'Shift':\n\t                            if ((i === 0 || (axis.isInversed && i === len - 1)) && options.x < rect.x) {\n\t                                options.x = pointX = rect.x;\n\t                            }\n\t                            else if ((i === len - 1 || (axis.isInversed && i === 0)) && ((options.x + width) > rect.x + rect.width)) {\n\t                                options.x = pointX = rect.x + rect.width - width;\n\t                            }\n\t                            break;\n\t                    }\n\t                }\n\t                if (axis.angle % 360 === 0 && axis.labelIntersectAction === 'Hide' && i !== 0 &&\n\t                    (!axis.isInversed ? options.x <= previousEnd : options.x + width >= previousEnd)) {\n\t                    continue;\n\t                }\n\t                previousEnd = axis.isInversed ? options.x : options.x + width;\n\t                if (axis.angle !== 0) {\n\t                    angle = (axis.angle > 360) ? axis.angle % 360 : axis.angle;\n\t                    rotateSize = helper_2.rotateTextSize(axis.labelStyle, label.text, angle, chart);\n\t                    diffHeight = axis.maxLabelSize.height - Math.ceil(rotateSize.height - elementSize.height);\n\t                    yLocation = axis.opposedPosition ? diffHeight / 2 : -diffHeight / 2;\n\t                    options.transform = 'rotate(' + angle + ',' + (pointX + width / 2 + anglePadding) + ','\n\t                        + (pointY + yLocation) + ')';\n\t                    options.y += yLocation;\n\t                }\n\t                helper_3.textElement(options, axis.labelStyle, axis.labelStyle.color, labelElement, axis.opposedPosition).setAttribute('style', 'cursor: default');\n\t            }\n\t            if (!chart.delayRedraw) {\n\t                this.element.appendChild(labelElement);\n\t            }\n\t            else if (axis.visible) {\n\t                this.createZoomingLabel(this.chart, labelElement, axis, index);\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.findAxisLabel = function (axis, label, width) {\n\t            switch (axis.labelIntersectAction) {\n\t                case 'Trim':\n\t                    return helper_3.textTrim(width, label, axis.labelStyle);\n\t                default:\n\t                    return label;\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.drawXAxisTitle = function (axis, index) {\n\t            var chart = this.chart;\n\t            var elementSize = helper_1.measureText(axis.title, axis.titleStyle);\n\t            var padding = axis.majorTickLines.height + axis.maxLabelSize.height + this.padding * 2;\n\t            var rect = axis.rect;\n\t            padding = axis.opposedPosition ? -(padding + elementSize.height / 4) : (padding + (3 * elementSize.height / 4));\n\t            var options = new helper_1.TextOption(chart.element.id + '_AxisTitle_' + index, rect.x + rect.width / 2, rect.y + padding, 'middle', axis.title);\n\t            var element = helper_3.textElement(options, axis.titleStyle, axis.titleStyle.color, this.element);\n\t            element.setAttribute('aria-label', axis.description || axis.title);\n\t            element.setAttribute('tabindex', axis.tabIndex.toString());\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.renderTickLine = function (axis, index, majorTick, minorTick) {\n\t            var options;\n\t            var chart = this.chart;\n\t            if (axis.majorTickLines.width > 0 && axis.visible) {\n\t                options = new helper_2.PathOption(chart.element.id + '_MajorTickLine_' + index, 'transparent', axis.majorTickLines.width, axis.majorTickLines.color, null, null, majorTick);\n\t                this.htmlObject = chart.renderer.drawPath(options);\n\t                this.element.appendChild(this.htmlObject);\n\t            }\n\t            if (axis.minorTickLines.width > 0 && axis.visible) {\n\t                options = new helper_2.PathOption(chart.element.id + '_MinorTickLine_' + index, 'transparent', axis.minorTickLines.width, axis.minorTickLines.color, null, null, minorTick);\n\t                this.htmlObject = chart.renderer.drawPath(options);\n\t                this.element.appendChild(this.htmlObject);\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.renderGridLine = function (axis, index, majorGrid, minorGird) {\n\t            var chart = this.chart;\n\t            var options;\n\t            if (axis.majorGridLines.width > 0) {\n\t                options = new helper_2.PathOption(chart.element.id + '_MajorGridLine_' + index, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color, null, axis.majorGridLines.dashArray, majorGrid);\n\t                this.htmlObject = chart.renderer.drawPath(options);\n\t                this.element.appendChild(this.htmlObject);\n\t            }\n\t            if (axis.minorGridLines.width > 0) {\n\t                options = new helper_2.PathOption(chart.element.id + '_MinorGridLine_' + index, 'transparent', axis.minorGridLines.width, axis.minorGridLines.color, null, axis.minorGridLines.dashArray, minorGird);\n\t                this.htmlObject = chart.renderer.drawPath(options);\n\t                this.element.appendChild(this.htmlObject);\n\t            }\n\t        };\n\t        CartesianAxisLayoutPanel.prototype.createZoomingLabel = function (chart, labelElement, axis, index) {\n\t            var parentNode = document.getElementById(chart.element.id + 'AxisGroup' + index);\n\t            labelElement.setAttribute('opacity', '0.3');\n\t            var zoomElement = chart.renderer.createGroup({\n\t                id: chart.element.id + 'AxisLabels_Zoom' + index\n\t            });\n\t            zoomElement = helper_2.createZoomingLabels(chart, axis, zoomElement, index, axis.orientation === 'Vertical');\n\t            parentNode.replaceChild(labelElement, document.getElementById(labelElement.id));\n\t            if (helper_2.getElement(chart.element.id + 'AxisLabels_Zoom' + index)) {\n\t                parentNode.replaceChild(zoomElement, document.getElementById(zoomElement.id));\n\t            }\n\t            else {\n\t                parentNode.appendChild(zoomElement);\n\t            }\n\t        };\n\t        return CartesianAxisLayoutPanel;\n\t    }());\n\t    exports.CartesianAxisLayoutPanel = CartesianAxisLayoutPanel;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(3), __webpack_require__(9), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, helper_1, helper_2, base_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Points = (function () {\n\t        function Points() {\n\t            this.symbolLocations = null;\n\t            this.regions = null;\n\t            this.regionData = null;\n\t        }\n\t        return Points;\n\t    }());\n\t    exports.Points = Points;\n\t    var DataLabelSettings = (function (_super) {\n\t        __extends(DataLabelSettings, _super);\n\t        function DataLabelSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return DataLabelSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], DataLabelSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], DataLabelSettings.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('transparent')\n\t    ], DataLabelSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], DataLabelSettings.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Auto')\n\t    ], DataLabelSettings.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], DataLabelSettings.prototype, \"rx\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], DataLabelSettings.prototype, \"ry\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Center')\n\t    ], DataLabelSettings.prototype, \"alignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ width: null, color: null }, base_1.Border)\n\t    ], DataLabelSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ left: 5, right: 5, top: 5, bottom: 5 }, base_1.Margin)\n\t    ], DataLabelSettings.prototype, \"margin\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ size: '11px', color: null }, base_1.Font)\n\t    ], DataLabelSettings.prototype, \"font\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], DataLabelSettings.prototype, \"template\", void 0);\n\t    exports.DataLabelSettings = DataLabelSettings;\n\t    var MarkerSettings = (function (_super) {\n\t        __extends(MarkerSettings, _super);\n\t        function MarkerSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return MarkerSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], MarkerSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Circle')\n\t    ], MarkerSettings.prototype, \"shape\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], MarkerSettings.prototype, \"imageUrl\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], MarkerSettings.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], MarkerSettings.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ width: 2, color: null }, base_1.Border)\n\t    ], MarkerSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], MarkerSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], MarkerSettings.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, DataLabelSettings)\n\t    ], MarkerSettings.prototype, \"dataLabel\", void 0);\n\t    exports.MarkerSettings = MarkerSettings;\n\t    var Trendline = (function (_super) {\n\t        __extends(Trendline, _super);\n\t        function Trendline() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.clipRect = new helper_2.Rect(0, 0, 0, 0);\n\t            return _this;\n\t        }\n\t        Trendline.prototype.setDataSource = function (series, chart) {\n\t            if (series) {\n\t                this.points = series.points;\n\t            }\n\t            var type = helper_2.firstToLowerCase(this.type);\n\t            chart.trendLineModule.initDataSource(this, chart);\n\t            chart.visibleSeriesCount++;\n\t        };\n\t        return Trendline;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Trendline.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Linear')\n\t    ], Trendline.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(2)\n\t    ], Trendline.prototype, \"period\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(2)\n\t    ], Trendline.prototype, \"polynomialOrder\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Trendline.prototype, \"backwardForecast\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Trendline.prototype, \"forwardForecast\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Animation)\n\t    ], Trendline.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, MarkerSettings)\n\t    ], Trendline.prototype, \"marker\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Trendline.prototype, \"enableTooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Trendline.prototype, \"intercept\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Trendline.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Trendline.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('SeriesType')\n\t    ], Trendline.prototype, \"legendShape\", void 0);\n\t    exports.Trendline = Trendline;\n\t    var ErrorBarCapSettings = (function (_super) {\n\t        __extends(ErrorBarCapSettings, _super);\n\t        function ErrorBarCapSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ErrorBarCapSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarCapSettings.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], ErrorBarCapSettings.prototype, \"length\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('black')\n\t    ], ErrorBarCapSettings.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarCapSettings.prototype, \"opacity\", void 0);\n\t    exports.ErrorBarCapSettings = ErrorBarCapSettings;\n\t    var ErrorBarSettings = (function (_super) {\n\t        __extends(ErrorBarSettings, _super);\n\t        function ErrorBarSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return ErrorBarSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], ErrorBarSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Fixed')\n\t    ], ErrorBarSettings.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], ErrorBarSettings.prototype, \"direction\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Vertical')\n\t    ], ErrorBarSettings.prototype, \"mode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('black')\n\t    ], ErrorBarSettings.prototype, \"color\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarSettings.prototype, \"verticalError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarSettings.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarSettings.prototype, \"horizontalError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], ErrorBarSettings.prototype, \"verticalPositiveError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], ErrorBarSettings.prototype, \"verticalNegativeError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarSettings.prototype, \"horizontalPositiveError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], ErrorBarSettings.prototype, \"horizontalNegativeError\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, ErrorBarCapSettings)\n\t    ], ErrorBarSettings.prototype, \"errorBarCap\", void 0);\n\t    exports.ErrorBarSettings = ErrorBarSettings;\n\t    var SeriesBase = (function (_super) {\n\t        __extends(SeriesBase, _super);\n\t        function SeriesBase() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.currentViewData = [];\n\t            _this.clipRect = new helper_2.Rect(0, 0, 0, 0);\n\t            _this.seriesType = 'XY';\n\t            return _this;\n\t        }\n\t        SeriesBase.prototype.processJsonData = function () {\n\t            var i = 0;\n\t            var len = Object.keys(this.currentViewData).length;\n\t            var point = new Points();\n\t            var textMappingName = this instanceof Series ? this.marker.dataLabel.name : '';\n\t            if (this instanceof Series && this.type === 'Waterfall') {\n\t                this.chart[helper_2.firstToLowerCase(this.type) + 'SeriesModule'].\n\t                    processWaterfallData(this.currentViewData, this);\n\t            }\n\t            this.points = [];\n\t            this.xMin = Infinity;\n\t            this.xMax = -Infinity;\n\t            this.yMin = Infinity;\n\t            this.yMax = -Infinity;\n\t            this.sizeMax = -Infinity;\n\t            this.getSeriesType();\n\t            if (this.xAxis.valueType === 'Category') {\n\t                while (i < len) {\n\t                    point = this.dataPoint(i, textMappingName);\n\t                    this.pushCategoryData(point, i);\n\t                    this.pushData(point, i);\n\t                    this.setEmptyPoint(point, i);\n\t                    i++;\n\t                }\n\t            }\n\t            else if (this.xAxis.valueType === 'DateTime') {\n\t                var option = {\n\t                    skeleton: 'full',\n\t                    type: 'dateTime'\n\t                };\n\t                var dateParser = this.chart.intl.getDateParser(option);\n\t                var dateFormatter = this.chart.intl.getDateFormat(option);\n\t                while (i < len) {\n\t                    point = this.dataPoint(i, textMappingName);\n\t                    point.xValue = Date.parse(dateParser(dateFormatter(point.x)));\n\t                    this.pushData(point, i);\n\t                    this.setEmptyPoint(point, i);\n\t                    i++;\n\t                }\n\t            }\n\t            else {\n\t                while (i < len) {\n\t                    point = this.dataPoint(i, textMappingName);\n\t                    point.xValue = point.x;\n\t                    this.pushData(point, i);\n\t                    this.setEmptyPoint(point, i);\n\t                    i++;\n\t                }\n\t            }\n\t            if (this instanceof Series) {\n\t                if (this.type === 'Spline' || this.drawType === 'Spline') {\n\t                    this.chart.splineSeriesModule.findSplinePoint(this);\n\t                }\n\t            }\n\t        };\n\t        SeriesBase.prototype.pushData = function (point, i) {\n\t            point.index = i;\n\t            point.yValue = point.y;\n\t            this.xMin = Math.min(this.xMin, point.xValue);\n\t            this.xMax = Math.max(this.xMax, point.xValue);\n\t            this.xData.push(point.xValue);\n\t        };\n\t        SeriesBase.prototype.dataPoint = function (i, textMappingName) {\n\t            var point;\n\t            this.points[i] = new Points();\n\t            point = this.points[i];\n\t            var currentViewData = this.currentViewData;\n\t            point.x = currentViewData[i][this.xName];\n\t            point.high = currentViewData[i][this.high];\n\t            point.low = currentViewData[i][this.low];\n\t            point.open = currentViewData[i][this.open];\n\t            point.close = currentViewData[i][this.close];\n\t            point.volume = currentViewData[i][this.volume];\n\t            if (this instanceof Series) {\n\t                point.y = currentViewData[i][this.yName];\n\t                point.size = currentViewData[i][this.size];\n\t                point.text = currentViewData[i][textMappingName];\n\t            }\n\t            return point;\n\t        };\n\t        SeriesBase.prototype.setEmptyPoint = function (point, i) {\n\t            if (!this.findVisibility(point)) {\n\t                point.visible = true;\n\t                return null;\n\t            }\n\t            point.isEmpty = true;\n\t            var mode = this instanceof Series ? this.emptyPointSettings.mode : 'Drop';\n\t            switch (mode) {\n\t                case 'Zero':\n\t                    point.visible = true;\n\t                    if (this instanceof Series && this.seriesType.indexOf('HighLow') > -1) {\n\t                        point.high = point.low = 0;\n\t                        if (this.seriesType.indexOf('HighLowOpenClose') > -1) {\n\t                            point.open = point.close = 0;\n\t                        }\n\t                    }\n\t                    else {\n\t                        point.y = point.yValue = this.yData[i] = 0;\n\t                    }\n\t                    break;\n\t                case 'Average':\n\t                    if (this instanceof Series) {\n\t                        if (this.seriesType.indexOf('HighLow') > -1) {\n\t                            point.high = ej2_base_2.isNullOrUndefined(point.high) ? this.getAverage(this.high, i) : point.high;\n\t                            point.low = ej2_base_2.isNullOrUndefined(point.low) ? this.getAverage(this.low, i) : point.low;\n\t                            if (this.seriesType.indexOf('HighLowOpenClose') > -1) {\n\t                                point.open = ej2_base_2.isNullOrUndefined(point.open) ? this.getAverage(this.open, i) : point.open;\n\t                                point.close = ej2_base_2.isNullOrUndefined(point.close) ? this.getAverage(this.close, i) : point.close;\n\t                            }\n\t                        }\n\t                        else {\n\t                            point.y = point.yValue = this.yData[i] = this.getAverage(this.yName, i);\n\t                        }\n\t                    }\n\t                    point.visible = true;\n\t                    break;\n\t                case 'Drop':\n\t                case 'Gap':\n\t                    this.yData[i] = null;\n\t                    point.visible = false;\n\t                    break;\n\t            }\n\t        };\n\t        SeriesBase.prototype.findVisibility = function (point) {\n\t            var type = this instanceof Series ? this.seriesType : 'HighLowOpenClose';\n\t            var yValues;\n\t            switch (type) {\n\t                case 'XY':\n\t                    this.setXYMinMax(point.yValue);\n\t                    this.yData.push(point.yValue);\n\t                    if (this instanceof Series && this.type === 'Bubble') {\n\t                        this.sizeMax = Math.max(this.sizeMax, point.size);\n\t                    }\n\t                    return ej2_base_2.isNullOrUndefined(point.x) || ej2_base_2.isNullOrUndefined(point.y);\n\t                case 'HighLow':\n\t                    this.setHiloMinMax(point.high, point.low);\n\t                    return ej2_base_2.isNullOrUndefined(point.x) || ej2_base_2.isNullOrUndefined(point.low) || ej2_base_2.isNullOrUndefined(point.high);\n\t                case 'HighLowOpenClose':\n\t                    this.setHiloMinMax(point.high, point.low);\n\t                    return ej2_base_2.isNullOrUndefined(point.x) || ej2_base_2.isNullOrUndefined(point.low) ||\n\t                        ej2_base_2.isNullOrUndefined(point.open) || ej2_base_2.isNullOrUndefined(point.close)\n\t                        || ej2_base_2.isNullOrUndefined(point.high);\n\t                case 'BoxPlot':\n\t                    yValues = (point.y || [null]).filter(function (value) {\n\t                        return !ej2_base_2.isNullOrUndefined(value);\n\t                    }).sort(function (a, b) {\n\t                        return a - b;\n\t                    });\n\t                    point.y = yValues;\n\t                    this.yMin = Math.min(this.yMin, Math.min.apply(Math, yValues));\n\t                    this.yMax = Math.max(this.yMax, Math.max.apply(Math, yValues));\n\t                    return !yValues.length;\n\t            }\n\t        };\n\t        SeriesBase.prototype.setXYMinMax = function (yValue) {\n\t            this.yMin = Math.min(this.yMin, ej2_base_2.isNullOrUndefined(yValue) ? this.yMin : yValue);\n\t            this.yMax = Math.max(this.yMax, ej2_base_2.isNullOrUndefined(yValue) ? this.yMax : yValue);\n\t        };\n\t        SeriesBase.prototype.setHiloMinMax = function (high, low) {\n\t            this.yMin = Math.min(this.yMin, Math.min(ej2_base_2.isNullOrUndefined(low) ? this.yMin : low, ej2_base_2.isNullOrUndefined(high) ? this.yMin : high));\n\t            this.yMax = Math.max(this.yMax, Math.max(ej2_base_2.isNullOrUndefined(low) ? this.yMax : low, ej2_base_2.isNullOrUndefined(high) ? this.yMax : high));\n\t        };\n\t        SeriesBase.prototype.getSeriesType = function () {\n\t            var type;\n\t            if (this instanceof Series) {\n\t                var seriesType = this.chart.chartAreaType === 'PolarRadar' ? this.drawType : this.type;\n\t                if (seriesType) {\n\t                    switch (seriesType) {\n\t                        case 'RangeColumn':\n\t                        case 'RangeArea':\n\t                        case 'Hilo':\n\t                            type = 'HighLow';\n\t                            break;\n\t                        case 'HiloOpenClose':\n\t                        case 'Candle':\n\t                            type = 'HighLowOpenClose';\n\t                            break;\n\t                        case 'BoxAndWhisker':\n\t                            type = 'BoxPlot';\n\t                            break;\n\t                        default:\n\t                            type = 'XY';\n\t                    }\n\t                }\n\t            }\n\t            this.seriesType = type;\n\t        };\n\t        SeriesBase.prototype.pushCategoryData = function (point, index) {\n\t            if (!this.xAxis.isIndexed) {\n\t                if (this.xAxis.labels.indexOf(point.x) < 0) {\n\t                    this.xAxis.labels.push(point.x);\n\t                }\n\t                point.xValue = this.xAxis.labels.indexOf(point.x);\n\t            }\n\t            else {\n\t                this.xAxis.labels[index] ? this.xAxis.labels[index] += ', ' + point.x :\n\t                    this.xAxis.labels.push(point.x);\n\t                point.xValue = index;\n\t            }\n\t        };\n\t        SeriesBase.prototype.getAverage = function (member, i, data) {\n\t            if (data === void 0) { data = this.currentViewData; }\n\t            var previous = data[i - 1] ? (data[i - 1][member] || 0) : 0;\n\t            var next = data[i + 1] ? (data[i + 1][member] || 0) : 0;\n\t            return (previous + next) / 2;\n\t        };\n\t        SeriesBase.prototype.refreshDataManager = function (chart) {\n\t            var _this = this;\n\t            this.chart = chart;\n\t            if (ej2_base_2.isNullOrUndefined(this.query) && !ej2_base_2.isNullOrUndefined(this.dataSource)) {\n\t                this.dataManagerSuccess({ result: this.dataSource, count: this.dataSource.length }, chart, false);\n\t                return;\n\t            }\n\t            var dataManager = this.dataModule.getData(this.dataModule.generateQuery().requiresCount());\n\t            dataManager.then(function (e) { return _this.dataManagerSuccess(e, chart); });\n\t        };\n\t        SeriesBase.prototype.dataManagerSuccess = function (e, chart, isRemoteData) {\n\t            if (isRemoteData === void 0) { isRemoteData = true; }\n\t            this.currentViewData = e.result !== '' ? e.result : [];\n\t            if (this instanceof Series) {\n\t                var argsData = {\n\t                    name: constants_1.seriesRender, series: this, data: this.currentViewData, fill: this.interior\n\t                };\n\t                this.chart.trigger(constants_1.seriesRender, argsData);\n\t                this.interior = argsData.fill;\n\t                this.currentViewData = argsData.data;\n\t            }\n\t            this.processJsonData();\n\t            this.recordsCount = e.count;\n\t            this.refreshChart(isRemoteData);\n\t        };\n\t        SeriesBase.prototype.refreshChart = function (isRemoteData) {\n\t            var chart = this.chart;\n\t            if (this instanceof Series) {\n\t                chart.visibleSeriesCount += isRemoteData ? 1 : 0;\n\t            }\n\t            chart.refreshTechnicalIndicator(this);\n\t            if (this instanceof Series && this.category !== 'TrendLine') {\n\t                for (var _i = 0, _a = this.trendlines; _i < _a.length; _i++) {\n\t                    var trendline = _a[_i];\n\t                    trendline.setDataSource(this, chart);\n\t                }\n\t            }\n\t            if (chart.visibleSeries.length === (chart.visibleSeriesCount)) {\n\t                chart.refreshBound();\n\t                chart.trigger('loaded', { chart: chart });\n\t            }\n\t            if (this instanceof Series) {\n\t                chart.visibleSeriesCount += isRemoteData ? 0 : 1;\n\t            }\n\t        };\n\t        return SeriesBase;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"xName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"high\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"low\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"open\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"close\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"volume\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], SeriesBase.prototype, \"xAxisName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], SeriesBase.prototype, \"yAxisName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, base_1.Animation)\n\t    ], SeriesBase.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], SeriesBase.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], SeriesBase.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], SeriesBase.prototype, \"dashArray\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], SeriesBase.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], SeriesBase.prototype, \"query\", void 0);\n\t    exports.SeriesBase = SeriesBase;\n\t    var Series = (function (_super) {\n\t        __extends(Series, _super);\n\t        function Series(parent, propName, defaultValue, isArray) {\n\t            var _this = _super.call(this, parent, propName, defaultValue, isArray) || this;\n\t            _this.visibleSeriesCount = 0;\n\t            _this.category = 'Series';\n\t            _this.isRectSeries = false;\n\t            _this.drawPoints = [];\n\t            _this.delayedAnimation = false;\n\t            return _this;\n\t        }\n\t        Series.prototype.refreshAxisLabel = function () {\n\t            if (this.xAxis.valueType !== 'Category') {\n\t                return null;\n\t            }\n\t            this.xAxis.labels = [];\n\t            for (var _i = 0, _a = this.xAxis.series; _i < _a.length; _i++) {\n\t                var item = _a[_i];\n\t                if (item.visible) {\n\t                    item.xMin = Infinity;\n\t                    item.xMax = -Infinity;\n\t                    for (var _b = 0, _c = item.points; _b < _c.length; _b++) {\n\t                        var point = _c[_b];\n\t                        item.pushCategoryData(point, point.index);\n\t                        item.xMin = Math.min(item.xMin, point.xValue);\n\t                        item.xMax = Math.max(item.xMax, point.xValue);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Series.prototype.findSeriesCollection = function (column, row, isStack) {\n\t            var seriesCollection = [];\n\t            for (var _i = 0, _a = row.axes; _i < _a.length; _i++) {\n\t                var rowAxis = _a[_i];\n\t                for (var _b = 0, _c = rowAxis.series; _b < _c.length; _b++) {\n\t                    var rowSeries = _c[_b];\n\t                    for (var _d = 0, _e = column.axes; _d < _e.length; _d++) {\n\t                        var axis = _e[_d];\n\t                        for (var _f = 0, _g = axis.series; _f < _g.length; _f++) {\n\t                            var series = _g[_f];\n\t                            if (series === rowSeries && series.visible && this.rectSeriesInChart(series, isStack)) {\n\t                                seriesCollection.push(series);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return seriesCollection;\n\t        };\n\t        Series.prototype.rectSeriesInChart = function (series, isStack) {\n\t            var type = (series.type).toLowerCase();\n\t            return (type.indexOf('column') !== -1 || type.indexOf('bar') !== -1 ||\n\t                type.indexOf('hiloopenclose') !== -1 || type.indexOf('candle') !== -1 ||\n\t                type.indexOf('hilo') !== -1 || series.drawType.indexOf('Column') !== -1 ||\n\t                type.indexOf('waterfall') !== -1 || type.indexOf('boxandwhisker') !== -1 || isStack);\n\t        };\n\t        Series.prototype.calculateStackedValue = function (isStacking100) {\n\t            var axisSeries;\n\t            for (var _i = 0, _a = this.chart.columns; _i < _a.length; _i++) {\n\t                var columnItem = _a[_i];\n\t                for (var _b = 0, _c = this.chart.rows; _b < _c.length; _b++) {\n\t                    var item = _c[_b];\n\t                    this.calculateStackingValues(this.findSeriesCollection(columnItem, item, true), isStacking100);\n\t                }\n\t            }\n\t        };\n\t        Series.prototype.calculateStackingValues = function (seriesCollection, isStacking100) {\n\t            var startValues;\n\t            var endValues;\n\t            var yValues = [];\n\t            var lastPositive = [];\n\t            var lastNegative = [];\n\t            var stackingGroup;\n\t            var lastValue;\n\t            var value;\n\t            var frequencies = [];\n\t            if (isStacking100) {\n\t                frequencies = this.findFrequencies(seriesCollection);\n\t            }\n\t            for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n\t                var series = seriesCollection_1[_i];\n\t                if (series.type.indexOf('Stacking') !== -1 || (series.drawType.indexOf('Stacking') !== -1 &&\n\t                    (series.chart.chartAreaType === 'PolarRadar'))) {\n\t                    stackingGroup = (series.type.indexOf('StackingArea') !== -1) ? 'StackingArea100' : series.stackingGroup;\n\t                    if (!lastPositive[stackingGroup]) {\n\t                        lastPositive[stackingGroup] = [];\n\t                        lastNegative[stackingGroup] = [];\n\t                    }\n\t                    yValues = series.yData;\n\t                    startValues = [];\n\t                    endValues = [];\n\t                    for (var j = 0, pointsLength = series.points.length; j < pointsLength; j++) {\n\t                        lastValue = 0;\n\t                        value = yValues[j];\n\t                        if (lastPositive[stackingGroup][series.points[j].xValue] === undefined) {\n\t                            lastPositive[stackingGroup][series.points[j].xValue] = 0;\n\t                        }\n\t                        if (lastNegative[stackingGroup][series.points[j].xValue] === undefined) {\n\t                            lastNegative[stackingGroup][series.points[j].xValue] = 0;\n\t                        }\n\t                        if (isStacking100) {\n\t                            value = value / frequencies[stackingGroup][series.points[j].xValue] * 100;\n\t                            value = !isNaN(value) ? value : 0;\n\t                            series.points[j].percent = value.toFixed(2);\n\t                        }\n\t                        if (value >= 0) {\n\t                            lastValue = lastPositive[stackingGroup][series.points[j].xValue];\n\t                            lastPositive[stackingGroup][series.points[j].xValue] += value;\n\t                        }\n\t                        else {\n\t                            lastValue = lastNegative[stackingGroup][series.points[j].xValue];\n\t                            lastNegative[stackingGroup][series.points[j].xValue] += value;\n\t                        }\n\t                        startValues.push(lastValue);\n\t                        endValues.push(value + lastValue);\n\t                        if (isStacking100 && (endValues[j] > 100)) {\n\t                            endValues[j] = 100;\n\t                        }\n\t                    }\n\t                    series.stackedValues = new helper_1.StackValues(startValues, endValues);\n\t                    series.yMin = Math.min.apply(0, startValues);\n\t                    series.yMax = Math.max.apply(0, endValues);\n\t                    if (series.yMin > Math.min.apply(0, endValues)) {\n\t                        series.yMin = (isStacking100) ? -100 : Math.min.apply(0, endValues);\n\t                    }\n\t                    if (series.yMax < Math.max.apply(0, startValues)) {\n\t                        series.yMax = 0;\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Series.prototype.findFrequencies = function (seriesCollection) {\n\t            var frequencies = [];\n\t            var stackingGroup;\n\t            for (var _i = 0, seriesCollection_2 = seriesCollection; _i < seriesCollection_2.length; _i++) {\n\t                var series = seriesCollection_2[_i];\n\t                series.yAxis.isStack100 = series.type.indexOf('100') !== -1 ? true : false;\n\t                if (series.type.indexOf('Stacking') !== -1) {\n\t                    stackingGroup = (series.type.indexOf('StackingArea') !== -1) ? 'StackingArea100' : series.stackingGroup;\n\t                    if (!frequencies[stackingGroup]) {\n\t                        frequencies[stackingGroup] = [];\n\t                    }\n\t                    for (var j = 0, pointsLength = series.points.length; j < pointsLength; j++) {\n\t                        if (frequencies[stackingGroup][series.points[j].xValue] === undefined) {\n\t                            frequencies[stackingGroup][series.points[j].xValue] = 0;\n\t                        }\n\t                        if (series.yData[j] > 0) {\n\t                            frequencies[stackingGroup][series.points[j].xValue] += series.yData[j];\n\t                        }\n\t                        else {\n\t                            frequencies[stackingGroup][series.points[j].xValue] -= series.yData[j];\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return frequencies;\n\t        };\n\t        Series.prototype.logWithIn = function (value, axis) {\n\t            if (axis.valueType === 'Logarithmic') {\n\t                value = helper_2.logBase(value, axis.logBase);\n\t            }\n\t            else {\n\t                value = value;\n\t            }\n\t            return value;\n\t        };\n\t        Series.prototype.renderSeries = function (chart, index) {\n\t            var seriesType = helper_2.firstToLowerCase(this.type);\n\t            if (seriesType.indexOf('100') !== -1) {\n\t                seriesType = seriesType.replace('100', '');\n\t            }\n\t            if (chart[seriesType + 'SeriesModule']) {\n\t                if (this.category !== 'Indicator' && this.category !== 'TrendLine') {\n\t                    this.createSeriesElements(chart);\n\t                }\n\t                chart[seriesType + 'SeriesModule'].render(this, this.xAxis, this.yAxis, chart.requireInvertedAxis);\n\t                if (this.category !== 'Indicator') {\n\t                    if (this.errorBar.visible) {\n\t                        this.chart.errorBarModule.render(this);\n\t                    }\n\t                    if (this.marker.dataLabel.visible) {\n\t                        chart.dataLabelModule.render(this, this.chart, this.marker.dataLabel);\n\t                    }\n\t                    this.appendSeriesElement(chart.seriesElements, chart);\n\t                }\n\t                this.performAnimation(chart, seriesType, this.errorBar, this.marker, this.marker.dataLabel);\n\t            }\n\t        };\n\t        Series.prototype.createSeriesElements = function (chart) {\n\t            if (this.category !== 'Indicator') {\n\t                var elementId = chart.element.id;\n\t                var xAxisRect = this.xAxis.rect;\n\t                var explodeValue = this.marker.border.width + 8 + 5;\n\t                var yAxisRect = this.yAxis.rect;\n\t                var marker = this.marker;\n\t                var render = chart.renderer;\n\t                var index = this.index;\n\t                var markerHeight = (this.type === 'Scatter') ? (this.marker.height + explodeValue) / 2 : 0;\n\t                var markerWidth = (this.type === 'Scatter') ? (this.marker.width + explodeValue) / 2 : 0;\n\t                if (chart.chartAreaType === 'PolarRadar') {\n\t                    this.clipRectElement = render.drawCircularClipPath(new helper_2.CircleOption(elementId + '_ChartSeriesClipRect_' + index, 'transparent', { width: 1, color: 'Gray' }, 1, this.clipRect.width / 2 + this.clipRect.x, this.clipRect.height / 2 + this.clipRect.y, chart.radius));\n\t                }\n\t                else {\n\t                    this.clipRectElement = render.drawClipPath(new helper_1.RectOption(elementId + '_ChartSeriesClipRect_' + index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n\t                        x: -markerWidth, y: -markerHeight,\n\t                        width: this.clipRect.width + markerWidth * 2,\n\t                        height: this.clipRect.height + markerHeight * 2\n\t                    }));\n\t                }\n\t                var transform = void 0;\n\t                transform = chart.chartAreaType === 'Cartesian' ? 'translate(' + this.clipRect.x + ',' + (this.clipRect.y) + ')' : '';\n\t                this.symbolElement = null;\n\t                this.seriesElement = render.createGroup({\n\t                    'id': elementId + 'SeriesGroup' + index,\n\t                    'transform': transform,\n\t                    'clip-path': 'url(#' + elementId + '_ChartSeriesClipRect_' + index + ')'\n\t                });\n\t                this.seriesElement.appendChild(this.clipRectElement);\n\t            }\n\t        };\n\t        Series.prototype.appendSeriesElement = function (element, chart) {\n\t            var marker = this.marker;\n\t            var dataLabel = marker.dataLabel;\n\t            if (this.category !== 'TrendLine') {\n\t                chart.seriesElements.appendChild(this.seriesElement);\n\t                var errorBar = this.errorBar;\n\t                if (errorBar.visible) {\n\t                    if (chart.chartAreaType === 'PolarRadar') {\n\t                        chart.seriesElements.appendChild(this.seriesElement);\n\t                    }\n\t                    else {\n\t                        chart.seriesElements.appendChild(this.errorBarElement);\n\t                    }\n\t                }\n\t                if (this.type === 'Scatter' || this.type === 'Bubble') {\n\t                    chart.seriesElements.appendChild(this.seriesElement);\n\t                }\n\t            }\n\t            if (marker.visible && ((chart.chartAreaType === 'Cartesian' && (!this.isRectSeries || this.type === 'BoxAndWhisker'))\n\t                || ((this.drawType !== 'Scatter' && !this.isRectSeries) && chart.chartAreaType === 'PolarRadar')) &&\n\t                this.type !== 'Scatter' && this.type !== 'Bubble') {\n\t                chart.seriesElements.appendChild(this.symbolElement);\n\t            }\n\t            if (dataLabel.visible) {\n\t                chart.dataLabelElements.appendChild(this.shapeElement);\n\t                chart.dataLabelElements.appendChild(this.textElement);\n\t            }\n\t        };\n\t        Series.prototype.performAnimation = function (chart, type, errorBar, marker, dataLabel) {\n\t            if (this.animation.enable && chart.animateSeries) {\n\t                chart[type + 'SeriesModule'].doAnimation(this);\n\t                if (errorBar.visible) {\n\t                    chart.errorBarModule.doErrorBarAnimation(this);\n\t                }\n\t                if (marker.visible) {\n\t                    chart.markerRender.doMarkerAnimation(this);\n\t                }\n\t                if (dataLabel.visible) {\n\t                    chart.dataLabelModule.doDataLabelAnimation(this);\n\t                }\n\t            }\n\t        };\n\t        Series.prototype.setPointColor = function (point, color) {\n\t            return point.isEmpty ? (this.emptyPointSettings.fill || color) : color;\n\t        };\n\t        Series.prototype.setBorderColor = function (point, border) {\n\t            border.width = point.isEmpty ? (this.emptyPointSettings.border.width || border.width) : border.width;\n\t            border.color = point.isEmpty ? (this.emptyPointSettings.border.color || border.color) : border.color;\n\t            return border;\n\t        };\n\t        return Series;\n\t    }(SeriesBase));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Series.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Series.prototype, \"yName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Line')\n\t    ], Series.prototype, \"drawType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Series.prototype, \"isClosed\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#2ecd71')\n\t    ], Series.prototype, \"bearFillColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#e74c3d')\n\t    ], Series.prototype, \"bullFillColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], Series.prototype, \"enableSolidCandles\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Series.prototype, \"size\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], Series.prototype, \"stackingGroup\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Series.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: 'transparent', width: 0 }, base_1.Border)\n\t    ], Series.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Series.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Line')\n\t    ], Series.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, ErrorBarSettings)\n\t    ], Series.prototype, \"errorBar\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, MarkerSettings)\n\t    ], Series.prototype, \"marker\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([], Trendline)\n\t    ], Series.prototype, \"trendlines\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Series.prototype, \"enableTooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('SeriesType')\n\t    ], Series.prototype, \"legendShape\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], Series.prototype, \"selectionStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], Series.prototype, \"minRadius\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], Series.prototype, \"maxRadius\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Natural')\n\t    ], Series.prototype, \"splineType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0.5)\n\t    ], Series.prototype, \"cardinalSplineTension\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, base_1.EmptyPointSettings)\n\t    ], Series.prototype, \"emptyPointSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], Series.prototype, \"showMean\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Normal')\n\t    ], Series.prototype, \"boxPlotMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0.7)\n\t    ], Series.prototype, \"columnWidth\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Series.prototype, \"columnSpacing\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#C64E4A')\n\t    ], Series.prototype, \"negativeFillColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#4E81BC')\n\t    ], Series.prototype, \"summaryFillColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Series.prototype, \"intermediateSumIndexes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], Series.prototype, \"sumIndexes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: 'black', width: 2 }, base_1.Connector)\n\t    ], Series.prototype, \"connector\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, base_1.CornerRadius)\n\t    ], Series.prototype, \"cornerRadius\", void 0);\n\t    exports.Series = Series;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_data_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(dataSource, query) {\n\t            this.initDataManager(dataSource, query);\n\t        }\n\t        Data.prototype.initDataManager = function (dataSource, query) {\n\t            this.dataManager = dataSource instanceof ej2_data_1.DataManager ? dataSource : new ej2_data_1.DataManager(dataSource);\n\t            this.query = query instanceof ej2_data_1.Query ? query : new ej2_data_1.Query();\n\t        };\n\t        Data.prototype.generateQuery = function () {\n\t            var query = this.query.clone();\n\t            return query;\n\t        };\n\t        Data.prototype.getData = function (query) {\n\t            return this.dataManager.executeQuery(query);\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5), __webpack_require__(18), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, ej2_base_1, constants_1, marker_explode_1, helper_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Marker = (function (_super) {\n\t        __extends(Marker, _super);\n\t        function Marker(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        Marker.prototype.render = function (series) {\n\t            var _this = this;\n\t            this.createElement(series);\n\t            var _loop_1 = function (point) {\n\t                if (point.visible && point.symbolLocations.length) {\n\t                    point.symbolLocations.map(function (location, index) {\n\t                        _this.renderMarker(series, point, location, index);\n\t                    });\n\t                }\n\t            };\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                _loop_1(point);\n\t            }\n\t        };\n\t        Marker.prototype.renderMarker = function (series, point, location, index) {\n\t            var seriesIndex = series.index;\n\t            var marker = series.marker;\n\t            var border = {\n\t                color: marker.border.color,\n\t                width: marker.border.width\n\t            };\n\t            var shape = marker.shape;\n\t            var borderColor = marker.border.color;\n\t            var symbolId;\n\t            var shapeOption;\n\t            var isBoxPlot = series.type === 'BoxAndWhisker';\n\t            var fill = marker.fill || (isBoxPlot ? series.interior : '#ffffff');\n\t            var argsData;\n\t            var parentElement = isBoxPlot ?\n\t                helper_2.findlElement(series.seriesElement.childNodes, 'Series_' + series.index + '_Point_' + point.index)\n\t                : series.symbolElement;\n\t            border.color = borderColor || series.interior;\n\t            symbolId = this.elementId + '_Series_' + seriesIndex + '_Point_' + point.index + '_Symbol' +\n\t                (index ? index : '');\n\t            argsData = {\n\t                cancel: false, name: constants_1.pointRender, series: series, point: point, fill: series.setPointColor(point, fill),\n\t                border: {\n\t                    color: series.type === 'BoxAndWhisker' ?\n\t                        (!ej2_base_1.isNullOrUndefined(borderColor) && borderColor !== 'transparent') ? borderColor :\n\t                            helper_3.getSaturationColor(fill, -0.6)\n\t                        : border.color,\n\t                    width: border.width\n\t                },\n\t                height: marker.height,\n\t                width: marker.width\n\t            };\n\t            argsData.border = series.setBorderColor(point, { width: argsData.border.width, color: argsData.border.color });\n\t            this.chart.trigger(constants_1.pointRender, argsData);\n\t            point.color = argsData.fill;\n\t            if (!argsData.cancel) {\n\t                var y = void 0;\n\t                if (series.type === 'RangeArea') {\n\t                    y = index ? point.low : point.high;\n\t                }\n\t                else if (isBoxPlot) {\n\t                    y = point.outliers[index];\n\t                }\n\t                else {\n\t                    y = point.y;\n\t                }\n\t                shapeOption = new helper_1.PathOption(symbolId, argsData.fill, argsData.border.width, argsData.border.color, marker.opacity, null);\n\t                if (parentElement !== undefined && parentElement !== null) {\n\t                    parentElement.appendChild(helper_1.drawSymbol(location, shape, new helper_1.Size(argsData.width, argsData.height), marker.imageUrl, shapeOption, point.x.toString() + ':' + y.toString()));\n\t                }\n\t            }\n\t            else {\n\t                location = null;\n\t            }\n\t        };\n\t        Marker.prototype.createElement = function (series) {\n\t            var markerClipRect;\n\t            var marker = series.marker;\n\t            var explodeValue = marker.border.width + 8 + 5;\n\t            var render = series.chart.renderer;\n\t            var transform;\n\t            transform = series.chart.chartAreaType === 'Cartesian' ? 'translate(' + series.clipRect.x + ',' + (series.clipRect.y) + ')' : '';\n\t            if (marker.visible) {\n\t                var markerHeight = (marker.height + explodeValue) / 2;\n\t                var markerWidth = (marker.width + explodeValue) / 2;\n\t                if (series.chart.chartAreaType === 'Cartesian') {\n\t                    markerClipRect = render.drawClipPath(new helper_1.RectOption(this.elementId + '_ChartMarkerClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n\t                        x: -markerWidth, y: -markerHeight,\n\t                        width: series.clipRect.width + markerWidth * 2,\n\t                        height: series.clipRect.height + markerHeight * 2\n\t                    }));\n\t                }\n\t                else {\n\t                    markerClipRect = render.drawCircularClipPath(new helper_1.CircleOption(this.elementId + '_ChartMarkerClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, series.clipRect.width / 2 + series.clipRect.x, series.clipRect.height / 2 + series.clipRect.y, series.chart.radius + Math.max(markerHeight, markerWidth)));\n\t                }\n\t                series.symbolElement = render.createGroup({\n\t                    'id': this.elementId + 'SymbolGroup' + series.index,\n\t                    'transform': transform,\n\t                    'clip-path': 'url(#' + this.elementId + '_ChartMarkerClipRect_' + series.index + ')'\n\t                });\n\t                series.symbolElement.appendChild(markerClipRect);\n\t            }\n\t        };\n\t        Marker.prototype.getRangeLowPoint = function (region, series) {\n\t            var x = region.x;\n\t            var y = region.y;\n\t            if (series.chart.requireInvertedAxis) {\n\t                y += region.height / 2;\n\t                x += series.yAxis.isInversed ? region.width : 0;\n\t            }\n\t            else {\n\t                y += series.yAxis.isInversed ? 0 : region.height;\n\t                x += region.width / 2;\n\t            }\n\t            return { x: x, y: y };\n\t        };\n\t        Marker.prototype.doMarkerAnimation = function (series) {\n\t            if (!(series.isRectSeries || series.type === 'Scatter' || series.type === 'Bubble' ||\n\t                (series.chart.chartAreaType === 'PolarRadar' && (series.drawType === 'Scatter' || series.drawType.indexOf('Column') > -1)))) {\n\t                var markerElements = series.symbolElement.childNodes;\n\t                var delay = series.animation.delay + series.animation.duration;\n\t                var j = 1;\n\t                var incFactor = series.type === 'RangeArea' ? 2 : 1;\n\t                for (var i = 0; i < series.points.length; i++) {\n\t                    if (!series.points[i].symbolLocations.length) {\n\t                        continue;\n\t                    }\n\t                    helper_1.markerAnimate(markerElements[j], delay, 200, series, i, series.points[i].symbolLocations[0], false);\n\t                    if (incFactor === 2) {\n\t                        var lowPoint = this.getRangeLowPoint(series.points[i].regions[0], series);\n\t                        helper_1.markerAnimate(markerElements[j + 1], delay, 200, series, i, lowPoint, false);\n\t                    }\n\t                    j += incFactor;\n\t                }\n\t            }\n\t        };\n\t        return Marker;\n\t    }(marker_explode_1.MarkerExplode));\n\t    exports.Marker = Marker;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(4), __webpack_require__(19), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, ej2_base_1, get_data_1, helper_2, helper_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var MarkerExplode = (function (_super) {\n\t        __extends(MarkerExplode, _super);\n\t        function MarkerExplode(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.addEventListener();\n\t            _this.elementId = chart.element.id;\n\t            return _this;\n\t        }\n\t        MarkerExplode.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMoveHandler, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.mouseUpHandler, this);\n\t        };\n\t        MarkerExplode.prototype.mouseUpHandler = function () {\n\t            var chart = this.chart;\n\t            if (chart.isTouch && !chart.crosshair.enable) {\n\t                this.markerMove(true);\n\t            }\n\t        };\n\t        MarkerExplode.prototype.mouseMoveHandler = function () {\n\t            var chart = this.chart;\n\t            if ((!chart.crosshair.enable || (chart.tooltip.enable)) && (!chart.isTouch || chart.startMove)) {\n\t                this.markerMove(false);\n\t            }\n\t        };\n\t        MarkerExplode.prototype.markerMove = function (remove) {\n\t            var _this = this;\n\t            var chart = this.chart;\n\t            this.currentPoints = [];\n\t            var data;\n\t            var explodeSeries;\n\t            if (!chart.tooltip.shared || !chart.tooltip.enable) {\n\t                data = this.getData();\n\t                explodeSeries = (data.series.type === 'BoxAndWhisker' || data.series.type === 'Bubble' || data.series.drawType === 'Scatter'\n\t                    || data.series.type === 'Scatter' || (!data.series.isRectSeries && data.series.marker.visible));\n\t                data.lierIndex = this.lierIndex;\n\t                if (data.point && explodeSeries && ((!this.previousPoints[0] || (this.previousPoints[0].point !== data.point)) ||\n\t                    (this.previousPoints[0] && this.previousPoints[0].lierIndex > 3 && this.previousPoints[0].lierIndex !== this.lierIndex))) {\n\t                    this.currentPoints.push(data);\n\t                }\n\t            }\n\t            else {\n\t                if (!helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                    return null;\n\t                }\n\t                if (chart.tooltip.enable) {\n\t                    var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n\t                    for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                        var chartSeries = _a[_i];\n\t                        if (!chartSeries.enableTooltip || chartSeries.category === 'Indicator') {\n\t                            continue;\n\t                        }\n\t                        if (chart.chartAreaType === 'Cartesian' && chartSeries.visible) {\n\t                            data = this.getClosestX(chart, chartSeries);\n\t                        }\n\t                        else if (chart.chartAreaType === 'PolarRadar' && chartSeries.visible && pointData.point !== null) {\n\t                            data = new helper_2.PointData(chartSeries.points[pointData.point.index], chartSeries);\n\t                        }\n\t                        if (data) {\n\t                            this.currentPoints.push(data);\n\t                            data = null;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            var length = this.previousPoints.length;\n\t            if (this.currentPoints.length > 0) {\n\t                if (length === 0 || (length > 0 && this.previousPoints[0].point !== this.currentPoints[0].point)) {\n\t                    if (this.previousPoints.length > 0) {\n\t                        this.removeHighlightedMarker();\n\t                    }\n\t                    var _loop_1 = function (data_1) {\n\t                        if (data_1 && data_1.point &&\n\t                            (!data_1.series.isRectSeries || data_1.series.type === 'BoxAndWhisker')) {\n\t                            helper_2.stopTimer(this_1.markerExplode);\n\t                            this_1.isRemove = true;\n\t                            data_1.point.symbolLocations.map(function (location, index) {\n\t                                _this.drawTrackBall(data_1.series, data_1.point, location, index);\n\t                            });\n\t                        }\n\t                    };\n\t                    var this_1 = this;\n\t                    for (var _b = 0, _c = this.currentPoints; _b < _c.length; _b++) {\n\t                        var data_1 = _c[_b];\n\t                        _loop_1(data_1);\n\t                    }\n\t                    this.previousPoints = ej2_base_1.extend([], this.currentPoints, null, true);\n\t                }\n\t            }\n\t            if (!chart.tooltip.enable && ((this.currentPoints.length === 0 && this.isRemove) || (remove && this.isRemove) ||\n\t                !helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect))) {\n\t                this.isRemove = false;\n\t                this.markerExplode = setTimeout(function () {\n\t                    _this.removeHighlightedMarker();\n\t                }, 2000);\n\t            }\n\t            this.currentPoints = [];\n\t        };\n\t        MarkerExplode.prototype.drawTrackBall = function (series, point, location, index) {\n\t            var marker = series.marker;\n\t            var element = series.symbolElement || series.seriesElement;\n\t            var shape = series.type === 'Bubble' ? 'Circle' : marker.shape;\n\t            var symbolId = this.elementId + '_Series_' + series.index + '_Point_' + point.index + '_Trackball' +\n\t                (index ? index : '');\n\t            var width = (series.type !== 'Bubble') ? marker.width : (point.regions[0].width);\n\t            var height = (series.type !== 'Bubble') ? marker.height : (point.regions[0].height);\n\t            var size = new helper_1.Size(width + 5, height + 5);\n\t            var border = (series.type === 'Bubble' || series.type === 'Scatter' ? series.border : marker.border);\n\t            var explodeSeries = (series.type === 'BoxAndWhisker' || series.type === 'Bubble' || series.type === 'Scatter');\n\t            var borderColor = (border.color && border.color !== 'transparent') ? border.color :\n\t                explodeSeries ? point.color : series.interior;\n\t            var colorValue = helper_3.convertHexToColor(helper_3.colorNameToHex(borderColor));\n\t            for (var i = 0; i < 2; i++) {\n\t                var options = new helper_1.PathOption(symbolId + '_' + i, i ? (marker.fill || point.color || (explodeSeries ? series.interior : '#ffffff')) : 'transparent', marker.border.width + (i ? 0 : 8), i ? borderColor : 'rgba(' + colorValue.r + ',' + colorValue.g + ',' + colorValue.b + ',0.2)', marker.opacity, null, null);\n\t                var symbol = helper_1.drawSymbol(location, shape, size, null, options, '');\n\t                symbol.setAttribute('style', 'pointer-events:none');\n\t                symbol.setAttribute('class', 'EJ2-Trackball');\n\t                element.appendChild(symbol);\n\t            }\n\t        };\n\t        MarkerExplode.prototype.removeHighlightedMarker = function () {\n\t            var elements = document.getElementsByClassName('EJ2-Trackball');\n\t            for (var i = 0, len = elements.length; i < len; i++) {\n\t                ej2_base_1.remove(elements[0]);\n\t            }\n\t            this.previousPoints = [];\n\t        };\n\t        return MarkerExplode;\n\t    }(get_data_1.Data));\n\t    exports.MarkerExplode = MarkerExplode;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Data = (function () {\n\t        function Data(chart) {\n\t            this.currentPoints = [];\n\t            this.previousPoints = [];\n\t            this.chart = chart;\n\t            this.lierIndex = 0;\n\t        }\n\t        Data.prototype.getData = function () {\n\t            var chart = this.chart;\n\t            var point = null;\n\t            var series = null;\n\t            var width;\n\t            var height;\n\t            for (var len = chart.visibleSeries.length, i = len - 1; i >= 0; i--) {\n\t                series = chart.visibleSeries[i];\n\t                width = (series.type === 'Scatter' || series.drawType === 'Scatter' || (!series.isRectSeries && series.marker.visible))\n\t                    ? (series.marker.height + 5) / 2 : 0;\n\t                height = (series.type === 'Scatter' || series.drawType === 'Scatter' || (!series.isRectSeries && series.marker.visible))\n\t                    ? (series.marker.width + 5) / 2 : 0;\n\t                if (series.visible && helper_1.withInBounds(chart.mouseX, chart.mouseY, series.clipRect, width, height)) {\n\t                    point = this.getRectPoint(series, series.clipRect, chart.mouseX, chart.mouseY);\n\t                }\n\t                if (point) {\n\t                    return new helper_1.PointData(point, series);\n\t                }\n\t            }\n\t            return new helper_1.PointData(point, series);\n\t        };\n\t        Data.prototype.getRectPoint = function (series, rect, x, y) {\n\t            var currentRect;\n\t            var fromCenterX;\n\t            var fromCenterY;\n\t            var clickAngle;\n\t            var arcAngle = 0;\n\t            var startAngle;\n\t            var endAngle;\n\t            var distanceFromCenter;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (!point.regionData) {\n\t                    if (!point.regions || !point.regions.length) {\n\t                        continue;\n\t                    }\n\t                }\n\t                if (point.regionData && this.chart.chartAreaType === 'PolarRadar' && series.drawType.indexOf('Column') > -1) {\n\t                    fromCenterX = x - (series.clipRect.width / 2 + series.clipRect.x);\n\t                    fromCenterY = y - (series.clipRect.height / 2 + series.clipRect.y);\n\t                    arcAngle = 2 * Math.PI * (point.regionData.currentXPosition < 0 ? 1 + point.regionData.currentXPosition\n\t                        : point.regionData.currentXPosition);\n\t                    clickAngle = (Math.atan2(fromCenterY, fromCenterX) + 0.5 * Math.PI - arcAngle) % (2 * Math.PI);\n\t                    clickAngle = clickAngle < 0 ? 2 * Math.PI + clickAngle : clickAngle;\n\t                    clickAngle = clickAngle + 2 * Math.PI * series.chart.primaryXAxis.startAngle;\n\t                    startAngle = point.regionData.startAngle;\n\t                    startAngle -= arcAngle;\n\t                    startAngle = startAngle < 0 ? 2 * Math.PI + startAngle : startAngle;\n\t                    endAngle = point.regionData.endAngle;\n\t                    endAngle -= arcAngle;\n\t                    endAngle = endAngle < 0 ? 2 * Math.PI + endAngle : endAngle;\n\t                    distanceFromCenter = Math.sqrt(Math.pow(Math.abs(fromCenterX), 2) + Math.pow(Math.abs(fromCenterY), 2));\n\t                    if (clickAngle >= startAngle && clickAngle <= endAngle &&\n\t                        (((distanceFromCenter >= point.regionData.innerRadius && distanceFromCenter <= point.regionData.radius) ||\n\t                            (distanceFromCenter <= point.regionData.innerRadius && distanceFromCenter >= point.regionData.radius))\n\t                            && distanceFromCenter <= series.chart.radius)) {\n\t                        return point;\n\t                    }\n\t                }\n\t                else if (this.checkRegionContainsPoint(point.regions, rect, x, y)) {\n\t                    return point;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        Data.prototype.checkRegionContainsPoint = function (regionRect, rect, x, y) {\n\t            var _this = this;\n\t            return regionRect.some(function (region, index) {\n\t                _this.lierIndex = index;\n\t                return helper_1.withInBounds(x, y, new helper_1.Rect((_this.chart.chartAreaType === 'Cartesian' ? rect.x : 0) + region.x, (_this.chart.chartAreaType === 'Cartesian' ? rect.y : 0) + region.y, region.width, region.height));\n\t            });\n\t        };\n\t        Data.prototype.getClosest = function (series, value) {\n\t            var xData = series.xData;\n\t            var closest;\n\t            if (value >= series.xMin - 0.5 && value <= series.xMax + 0.5) {\n\t                for (var _i = 0, xData_1 = xData; _i < xData_1.length; _i++) {\n\t                    var data = xData_1[_i];\n\t                    if (closest == null || Math.abs(data - value) < Math.abs(closest - value)) {\n\t                        closest = data;\n\t                    }\n\t                }\n\t            }\n\t            return closest;\n\t        };\n\t        Data.prototype.getClosestX = function (chart, series) {\n\t            var value;\n\t            var rect = series.clipRect;\n\t            if (!chart.requireInvertedAxis) {\n\t                value = helper_1.getValueXByPoint(chart.mouseX - rect.x, rect.width, series.xAxis);\n\t            }\n\t            else {\n\t                value = helper_1.getValueYByPoint(chart.mouseY - rect.y, rect.height, series.xAxis);\n\t            }\n\t            var closest = this.getClosest(series, value);\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (closest === point.xValue && point.visible) {\n\t                    return new helper_1.PointData(point, series);\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        return Data;\n\t    }());\n\t    exports.Data = Data;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(9), __webpack_require__(11), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, base_1, theme_1, helper_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Location = (function (_super) {\n\t        __extends(Location, _super);\n\t        function Location() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return Location;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Location.prototype, \"x\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], Location.prototype, \"y\", void 0);\n\t    exports.Location = Location;\n\t    var LegendSettings = (function (_super) {\n\t        __extends(LegendSettings, _super);\n\t        function LegendSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return LegendSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], LegendSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], LegendSettings.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], LegendSettings.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ x: 0, y: 0 }, Location)\n\t    ], LegendSettings.prototype, \"location\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Auto')\n\t    ], LegendSettings.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(8)\n\t    ], LegendSettings.prototype, \"padding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Center')\n\t    ], LegendSettings.prototype, \"alignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.legendLabelFont, base_1.Font)\n\t    ], LegendSettings.prototype, \"textStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], LegendSettings.prototype, \"shapeHeight\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(10)\n\t    ], LegendSettings.prototype, \"shapeWidth\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Border)\n\t    ], LegendSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], LegendSettings.prototype, \"shapePadding\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('transparent')\n\t    ], LegendSettings.prototype, \"background\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(1)\n\t    ], LegendSettings.prototype, \"opacity\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], LegendSettings.prototype, \"toggleVisibility\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], LegendSettings.prototype, \"description\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], LegendSettings.prototype, \"tabIndex\", void 0);\n\t    exports.LegendSettings = LegendSettings;\n\t    var BaseLegend = (function () {\n\t        function BaseLegend(chart) {\n\t            this.rowCount = 0;\n\t            this.columnCount = 0;\n\t            this.pageButtonSize = 8;\n\t            this.pageXCollections = [];\n\t            this.maxColumns = 0;\n\t            this.isTrimmed = false;\n\t            this.maxWidth = 0;\n\t            this.currentPage = 1;\n\t            this.chart = chart;\n\t            this.legend = chart.legendSettings;\n\t            this.legendID = chart.element.id + '_chart_legend';\n\t            this.isChartControl = (chart.getModuleName() === 'chart');\n\t        }\n\t        BaseLegend.prototype.calculateLegendBounds = function (rect, availableSize) {\n\t            var legend = this.legend;\n\t            this.getPosition(legend.position, availableSize);\n\t            this.legendBounds = new helper_1.Rect(rect.x, rect.y, 0, 0);\n\t            this.isVertical = (this.position === 'Left' || this.position === 'Right');\n\t            if (this.isVertical) {\n\t                this.legendBounds.height = helper_2.stringToNumber(legend.height, availableSize.height - (rect.y - this.chart.margin.top)) || rect.height;\n\t                this.legendBounds.width = helper_2.stringToNumber(legend.width || '20%', availableSize.width);\n\t            }\n\t            else {\n\t                this.legendBounds.width = helper_2.stringToNumber(legend.width, availableSize.width) || rect.width;\n\t                this.legendBounds.height = helper_2.stringToNumber(legend.height || '20%', availableSize.height);\n\t            }\n\t            this.library.getLegendBounds(availableSize, this.legendBounds, legend);\n\t            this.getLocation(this.position, legend.alignment, this.legendBounds, rect, availableSize);\n\t        };\n\t        BaseLegend.prototype.getPosition = function (position, availableSize) {\n\t            if (this.isChartControl) {\n\t                this.position = (position !== 'Auto') ? position : 'Bottom';\n\t            }\n\t            else {\n\t                if (position === 'Auto' && this.chart.visibleSeries &&\n\t                    (this.chart.visibleSeries[0].type === 'Funnel' || this.chart.visibleSeries[0].type === 'Pyramid')) {\n\t                    position = 'Top';\n\t                }\n\t                this.position = (position !== 'Auto') ? position :\n\t                    (availableSize.width > availableSize.height ? 'Right' : 'Bottom');\n\t            }\n\t        };\n\t        BaseLegend.prototype.setBounds = function (computedWidth, computedHeight, legend, legendBounds) {\n\t            computedWidth = computedWidth < legendBounds.width ? computedWidth : legendBounds.width;\n\t            computedHeight = computedHeight < legendBounds.height ? computedHeight : legendBounds.height;\n\t            legendBounds.width = !legend.width ? computedWidth : legendBounds.width;\n\t            legendBounds.height = !legend.height ? computedHeight : legendBounds.height;\n\t            this.rowCount = Math.max(1, Math.ceil((legendBounds.height - legend.padding) / (this.maxItemHeight + legend.padding)));\n\t        };\n\t        BaseLegend.prototype.getLocation = function (position, alignment, legendBounds, rect, availableSize) {\n\t            var padding = this.legend.border.width;\n\t            var legendHeight = legendBounds.height + padding;\n\t            var legendWidth = legendBounds.width + padding;\n\t            var marginBottom = this.chart.margin.bottom;\n\t            if (position === 'Bottom') {\n\t                legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n\t                legendBounds.y = rect.y + (rect.height - legendHeight) + padding;\n\t                helper_1.subtractThickness(rect, new helper_1.Thickness(0, 0, 0, legendHeight));\n\t            }\n\t            else if (position === 'Top') {\n\t                legendBounds.x = this.alignLegend(legendBounds.x, availableSize.width, legendBounds.width, alignment);\n\t                legendBounds.y = rect.y + padding;\n\t                helper_1.subtractThickness(rect, new helper_1.Thickness(0, 0, legendHeight, 0));\n\t            }\n\t            else if (position === 'Right') {\n\t                legendBounds.x = rect.x + (rect.width - legendBounds.width);\n\t                legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n\t                helper_1.subtractThickness(rect, new helper_1.Thickness(0, legendWidth, 0, 0));\n\t            }\n\t            else if (position === 'Left') {\n\t                legendBounds.y = rect.y + this.alignLegend(0, availableSize.height - (rect.y + marginBottom), legendBounds.height, alignment);\n\t                helper_1.subtractThickness(rect, new helper_1.Thickness(legendWidth, 0, 0, 0));\n\t            }\n\t            else {\n\t                legendBounds.x = this.legend.location.x;\n\t                legendBounds.y = this.legend.location.y;\n\t                helper_1.subtractThickness(rect, new helper_1.Thickness(0, 0, 0, 0));\n\t            }\n\t        };\n\t        BaseLegend.prototype.alignLegend = function (start, size, legendSize, alignment) {\n\t            switch (alignment) {\n\t                case 'Far':\n\t                    start = (size - legendSize) - start;\n\t                    break;\n\t                case 'Center':\n\t                    start = ((size - legendSize) / 2);\n\t                    break;\n\t            }\n\t            return start;\n\t        };\n\t        BaseLegend.prototype.renderLegend = function (chart, legend, legendBounds) {\n\t            var firstLegend = this.findFirstLegendPosition(this.legendCollections);\n\t            var padding = legend.padding;\n\t            this.maxItemHeight = Math.max(this.legendCollections[0].textSize.height, legend.shapeHeight);\n\t            var legendGroup = chart.renderer.createGroup({ id: this.legendID + '_g' });\n\t            var legendTranslateGroup = this.createLegendElements(chart, legendBounds, legendGroup, legend, this.legendID);\n\t            if (firstLegend !== this.legendCollections.length) {\n\t                var legendSeriesGroup = void 0;\n\t                var start = void 0;\n\t                start = new helper_1.ChartLocation(legendBounds.x + padding + (legend.shapeWidth / 2), legendBounds.y + padding + this.maxItemHeight / 2);\n\t                var textOptions = new helper_2.TextOption('', start.x, start.y, 'start');\n\t                this.totalPages = this.isChartControl ? this.totalPages : 0;\n\t                var textPadding = legend.shapePadding + padding + legend.shapeWidth;\n\t                var count = 0;\n\t                this.pageXCollections = [];\n\t                this.legendCollections[firstLegend].location = start;\n\t                var previousLegend = this.legendCollections[firstLegend];\n\t                for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n\t                    var legendOption = _a[_i];\n\t                    if (legendOption.render && legendOption.text !== '') {\n\t                        legendSeriesGroup = chart.renderer.createGroup({\n\t                            id: this.legendID + this.generateId(legendOption, '_g_', count)\n\t                        });\n\t                        legendSeriesGroup.setAttribute('tabindex', legend.tabIndex.toString());\n\t                        legendSeriesGroup.setAttribute('aria-label', legend.description || 'Click to show or hide the ' + legendOption.text + ' series');\n\t                        this.library.getRenderPoint(legendOption, start, textPadding, previousLegend, legendBounds, count, firstLegend);\n\t                        this.renderSymbol(legendOption, legendSeriesGroup, count);\n\t                        this.renderText(chart, legendOption, legendSeriesGroup, textOptions, count);\n\t                        legendSeriesGroup.setAttribute('style', 'cursor: ' + ((!legend.toggleVisibility && chart.selectionMode === 'None') ? 'auto' : 'pointer'));\n\t                        legendTranslateGroup.appendChild(legendSeriesGroup);\n\t                        previousLegend = legendOption;\n\t                    }\n\t                    count++;\n\t                }\n\t                if (this.isPaging) {\n\t                    this.renderPagingElements(chart, legendBounds, textOptions, legendGroup);\n\t                }\n\t            }\n\t            chart.svgObject.appendChild(legendGroup);\n\t        };\n\t        BaseLegend.prototype.findFirstLegendPosition = function (legendCollection) {\n\t            var count = 0;\n\t            for (var _i = 0, legendCollection_1 = legendCollection; _i < legendCollection_1.length; _i++) {\n\t                var legend = legendCollection_1[_i];\n\t                if (legend.render && legend.text !== '') {\n\t                    break;\n\t                }\n\t                count++;\n\t            }\n\t            return count;\n\t        };\n\t        BaseLegend.prototype.createLegendElements = function (chart, legendBounds, legendGroup, legend, id) {\n\t            var padding = legend.padding;\n\t            var options = new helper_2.RectOption(id + '_element', legend.background, legend.border, legend.opacity, legendBounds);\n\t            legendGroup.appendChild(chart.renderer.drawRectangle(options));\n\t            var legendItemsGroup = chart.renderer.createGroup({ id: id + '_collections' });\n\t            legendGroup.appendChild(legendItemsGroup);\n\t            this.legendTranslateGroup = chart.renderer.createGroup({ id: id + '_translate_g' });\n\t            legendItemsGroup.appendChild(this.legendTranslateGroup);\n\t            var clippath = chart.renderer.createClipPath({ id: id + '_clipPath' });\n\t            options.y += padding;\n\t            options.id += '_clipPath_rect';\n\t            options.width = (!this.isChartControl && this.isVertical) ? this.maxWidth - padding : legendBounds.width;\n\t            this.clipRect = chart.renderer.drawRectangle(options);\n\t            clippath.appendChild(this.clipRect);\n\t            chart.svgObject.appendChild(clippath);\n\t            legendItemsGroup.setAttribute('style', 'clip-path:url(#' + clippath.id + ')');\n\t            return this.legendTranslateGroup;\n\t        };\n\t        BaseLegend.prototype.renderSymbol = function (legendOption, group, i) {\n\t            var symbolColor = legendOption.visible ? legendOption.fill : '#D3D3D3';\n\t            var shape = (legendOption.shape === 'SeriesType') ? legendOption.type : legendOption.shape;\n\t            shape = shape === 'Scatter' ? legendOption.markerShape : shape;\n\t            var symbolOption = new helper_1.PathOption(this.legendID + this.generateId(legendOption, '_shape_', i), symbolColor, 1, symbolColor, 1, '', '');\n\t            group.appendChild(helper_1.drawSymbol(legendOption.location, shape, new helper_1.Size(this.legend.shapeWidth, this.legend.shapeHeight), '', symbolOption, 'Click to show or hide the ' + legendOption.text + ' series'));\n\t            if (shape === 'Line' && legendOption.markerVisibility && legendOption.markerShape !== 'Image' ||\n\t                legendOption.type === 'Doughnut') {\n\t                symbolOption.id = this.legendID + this.generateId(legendOption, '_shape_marker_', i);\n\t                shape = legendOption.type === 'Doughnut' ? 'Circle' : legendOption.markerShape;\n\t                symbolOption.fill = legendOption.type === 'Doughnut' ? '#FFFFFF' : symbolOption.fill;\n\t                group.appendChild(helper_1.drawSymbol(legendOption.location, shape, new helper_1.Size(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), '', symbolOption, 'Click to show or hide the ' + legendOption.text + ' series'));\n\t            }\n\t        };\n\t        BaseLegend.prototype.renderText = function (chart, legendOption, group, textOptions, i) {\n\t            var legend = chart.legendSettings;\n\t            var hiddenColor = '#D3D3D3';\n\t            textOptions.id = this.legendID + this.generateId(legendOption, '_text_', i);\n\t            var fontcolor = legendOption.visible ? legend.textStyle.color : hiddenColor;\n\t            textOptions.text = legendOption.text;\n\t            textOptions.x = legendOption.location.x + (legend.shapeWidth / 2) + legend.shapePadding;\n\t            textOptions.y = legendOption.location.y + this.maxItemHeight / 4;\n\t            var element = helper_2.textElement(textOptions, legend.textStyle, fontcolor, group);\n\t            element.setAttribute('aria-label', legend.description || 'Click to show or hide the ' + legendOption.text + ' series');\n\t        };\n\t        BaseLegend.prototype.renderPagingElements = function (chart, bounds, textOption, legendGroup) {\n\t            var paginggroup = chart.renderer.createGroup({ id: this.legendID + '_navigation' });\n\t            legendGroup.appendChild(paginggroup);\n\t            var grayColor = '#545454';\n\t            var legend = chart.legendSettings;\n\t            var padding = 8;\n\t            if (this.isChartControl || !this.isVertical) {\n\t                this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1));\n\t            }\n\t            else {\n\t                this.totalPages = Math.ceil(this.totalPages / this.maxColumns);\n\t            }\n\t            var symbolOption = new helper_1.PathOption(this.legendID + '_pageup', 'transparent', 5, grayColor, 1, '', '');\n\t            var iconSize = this.pageButtonSize;\n\t            paginggroup.setAttribute('style', 'cursor: pointer');\n\t            this.clipPathHeight = (this.rowCount - 1) * (this.maxItemHeight + legend.padding);\n\t            this.clipRect.setAttribute('height', this.clipPathHeight.toString());\n\t            var x = bounds.x + iconSize / 2;\n\t            var y = bounds.y + this.clipPathHeight + ((bounds.height - this.clipPathHeight) / 2);\n\t            paginggroup.appendChild(helper_1.drawSymbol({ x: x, y: y }, 'LeftArrow', new helper_1.Size(iconSize, iconSize), '', symbolOption, 'LeftArrow'));\n\t            textOption.x = x + (iconSize / 2) + padding;\n\t            var size = helper_1.measureText(this.totalPages + '/' + this.totalPages, legend.textStyle);\n\t            textOption.y = y + (size.height / 4);\n\t            textOption.id = this.legendID + '_pagenumber';\n\t            textOption.text = '1/' + this.totalPages;\n\t            var pageTextElement = helper_2.textElement(textOption, legend.textStyle, legend.textStyle.color, paginggroup);\n\t            x = (textOption.x + padding + (iconSize / 2) + size.width);\n\t            symbolOption.id = this.legendID + '_pagedown';\n\t            paginggroup.appendChild(helper_1.drawSymbol({ x: x, y: y }, 'RightArrow', new helper_1.Size(iconSize, iconSize), '', symbolOption, 'RightArrow'));\n\t            paginggroup.setAttribute('transform', 'translate(' + (bounds.width - (2 * (iconSize + padding) +\n\t                padding + size.width)) + ', ' + 0 + ')');\n\t            this.translatePage(pageTextElement, this.currentPage - 1, this.currentPage);\n\t        };\n\t        BaseLegend.prototype.translatePage = function (pagingText, page, pageNumber) {\n\t            var size = (this.clipPathHeight) * page;\n\t            var translate = 'translate(0,-' + size + ')';\n\t            if (!this.isChartControl && this.isVertical) {\n\t                var pageLength = page * this.maxColumns;\n\t                size = this.pageXCollections[page * this.maxColumns] - this.legendBounds.x;\n\t                size = size < 0 ? 0 : size;\n\t                translate = 'translate(-' + size + ',0)';\n\t            }\n\t            this.legendTranslateGroup.setAttribute('transform', translate);\n\t            pagingText.textContent = (pageNumber) + '/' + this.totalPages;\n\t            this.currentPage = pageNumber;\n\t        };\n\t        BaseLegend.prototype.changePage = function (event, pageUp) {\n\t            var pageText = document.getElementById(this.legendID + '_pagenumber');\n\t            var page = parseInt(pageText.textContent.split('/')[0], 10);\n\t            if (pageUp && page > 1) {\n\t                this.translatePage(pageText, (page - 2), (page - 1));\n\t            }\n\t            else if (!pageUp && page < this.totalPages) {\n\t                this.translatePage(pageText, page, (page + 1));\n\t            }\n\t        };\n\t        BaseLegend.prototype.generateId = function (option, prefix, count) {\n\t            if (this.isChartControl) {\n\t                return prefix + count;\n\t            }\n\t            else {\n\t                return prefix + option.pointIndex;\n\t            }\n\t        };\n\t        BaseLegend.prototype.move = function (event) {\n\t            var _this = this;\n\t            var x = this.chart.mouseX;\n\t            var y = this.chart.mouseY;\n\t            if (event.target.textContent.indexOf('...') > -1) {\n\t                var targetId = event.target.id.split(this.legendID + '_text_');\n\t                if (targetId.length === 2) {\n\t                    var index = parseInt(targetId[1], 10);\n\t                    var element = this.chart.element;\n\t                    if (!isNaN(index)) {\n\t                        if (this.chart.isTouch) {\n\t                            helper_2.removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n\t                        }\n\t                        if (this.isChartControl) {\n\t                            helper_2.showTooltip(this.chart.series[index].name, x, y, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', helper_2.getElement(this.chart.element.id + '_Secondary_Element'));\n\t                        }\n\t                        else {\n\t                            var location_1 = this.chart.removeSvgOffset(x, y);\n\t                            helper_2.showTooltip(this.chart.visibleSeries[0].points[index].x.toString(), location_1.x + 10, location_1.y + 10, element.offsetWidth, element.id + '_EJ2_Legend_Tooltip', helper_2.getElement(this.chart.element.id + '_Secondary_Element'));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                helper_2.removeElement(this.chart.element.id + '_EJ2_Legend_Tooltip');\n\t            }\n\t            if (this.chart.isTouch) {\n\t                clearTimeout(this.clearTooltip);\n\t                this.clearTooltip = setTimeout(function () { helper_2.removeElement(_this.chart.element.id + '_EJ2_Legend_Tooltip'); }, 1000);\n\t            }\n\t        };\n\t        return BaseLegend;\n\t    }());\n\t    exports.BaseLegend = BaseLegend;\n\t    var LegendOptions = (function () {\n\t        function LegendOptions(text, fill, shape, visible, type, markerShape, markerVisibility, pointIndex, seriesIndex) {\n\t            this.location = { x: 0, y: 0 };\n\t            this.text = text;\n\t            this.fill = fill;\n\t            this.shape = shape;\n\t            this.visible = visible;\n\t            this.type = type;\n\t            this.markerVisibility = markerVisibility;\n\t            this.markerShape = markerShape;\n\t            this.pointIndex = pointIndex;\n\t            this.seriesIndex = seriesIndex;\n\t        }\n\t        return LegendOptions;\n\t    }());\n\t    exports.LegendOptions = LegendOptions;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(9), __webpack_require__(14), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, base_1, chart_series_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TechnicalIndicator = (function (_super) {\n\t        __extends(TechnicalIndicator, _super);\n\t        function TechnicalIndicator() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.clipRect = new helper_1.Rect(0, 0, 0, 0);\n\t            return _this;\n\t        }\n\t        TechnicalIndicator.prototype.setDataSource = function (series, chart) {\n\t            if (series) {\n\t                this.xData = series.xData;\n\t                this.yData = series.yData;\n\t                this.points = series.points;\n\t            }\n\t            var type = helper_1.firstToLowerCase(this.type);\n\t            chart[type + 'IndicatorModule'].initDataSource(this, chart);\n\t            chart.visibleSeriesCount += this.targetSeries.length;\n\t        };\n\t        return TechnicalIndicator;\n\t    }(chart_series_1.SeriesBase));\n\t    __decorate([\n\t        ej2_base_1.Property('Sma')\n\t    ], TechnicalIndicator.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(14)\n\t    ], TechnicalIndicator.prototype, \"period\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(14)\n\t    ], TechnicalIndicator.prototype, \"kPeriod\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(3)\n\t    ], TechnicalIndicator.prototype, \"dPeriod\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(80)\n\t    ], TechnicalIndicator.prototype, \"overBought\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(20)\n\t    ], TechnicalIndicator.prototype, \"overSold\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(2)\n\t    ], TechnicalIndicator.prototype, \"standardDeviation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Close')\n\t    ], TechnicalIndicator.prototype, \"field\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(12)\n\t    ], TechnicalIndicator.prototype, \"slowPeriod\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(26)\n\t    ], TechnicalIndicator.prototype, \"fastPeriod\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], TechnicalIndicator.prototype, \"showZones\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: '#ff9933', width: 2 }, base_1.Connector)\n\t    ], TechnicalIndicator.prototype, \"macdLine\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Both')\n\t    ], TechnicalIndicator.prototype, \"macdType\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#2ecd71')\n\t    ], TechnicalIndicator.prototype, \"macdPositiveColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#e74c3d')\n\t    ], TechnicalIndicator.prototype, \"macdNegativeColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('rgba(211,211,211,0.25)')\n\t    ], TechnicalIndicator.prototype, \"bandColor\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: '#ffb735', width: 1 }, base_1.Connector)\n\t    ], TechnicalIndicator.prototype, \"upperLine\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: '#f2ec2f', width: 1 }, base_1.Connector)\n\t    ], TechnicalIndicator.prototype, \"lowerLine\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: '#f2ec2f', width: 1 }, base_1.Connector)\n\t    ], TechnicalIndicator.prototype, \"periodLine\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], TechnicalIndicator.prototype, \"seriesName\", void 0);\n\t    exports.TechnicalIndicator = TechnicalIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ExportUtils = (function () {\n\t        function ExportUtils(control) {\n\t            this.control = control;\n\t        }\n\t        ExportUtils.prototype.print = function (elements) {\n\t            this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n\t            this.printWindow.moveTo(0, 0);\n\t            this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n\t            var argsData = {\n\t                cancel: false, htmlContent: this.getHTMLContent(elements), name: constants_1.beforePrint\n\t            };\n\t            this.control.trigger(constants_1.beforePrint, argsData);\n\t            if (!argsData.cancel) {\n\t                ej2_base_1.print(argsData.htmlContent, this.printWindow);\n\t            }\n\t        };\n\t        ExportUtils.prototype.getHTMLContent = function (elements) {\n\t            var div = ej2_base_1.createElement('div');\n\t            if (elements) {\n\t                if (elements instanceof Array) {\n\t                    elements.forEach(function (value) {\n\t                        div.appendChild(helper_1.getElement(value).cloneNode(true));\n\t                    });\n\t                }\n\t                else if (elements instanceof Element) {\n\t                    div.appendChild(elements.cloneNode(true));\n\t                }\n\t                else {\n\t                    div.appendChild(helper_1.getElement(elements).cloneNode(true));\n\t                }\n\t            }\n\t            else {\n\t                div.appendChild(this.control.element.cloneNode(true));\n\t            }\n\t            return div;\n\t        };\n\t        ExportUtils.prototype.export = function (type, fileName) {\n\t            var element = ej2_base_1.createElement('canvas', {\n\t                id: 'ej2-canvas',\n\t                attrs: {\n\t                    'width': this.control.availableSize.width.toString(),\n\t                    'height': this.control.availableSize.height.toString()\n\t                }\n\t            });\n\t            var url = window.URL.createObjectURL(new Blob([(new XMLSerializer()).serializeToString(this.control.svgObject)], { type: 'image/svg+xml' }));\n\t            var image = new Image();\n\t            var ctx = element.getContext('2d');\n\t            image.onload = (function () {\n\t                ctx.drawImage(image, 0, 0);\n\t                window.URL.revokeObjectURL(url);\n\t                if (window.navigator.msSaveOrOpenBlob) {\n\t                    window.navigator.msSaveOrOpenBlob(element.msToBlob(), fileName + '.' + type.toLocaleLowerCase());\n\t                }\n\t                else {\n\t                    var imgURI = element.toDataURL('image/png').replace('image/png', 'image/octet-stream');\n\t                    ej2_base_1.createElement('a', {\n\t                        attrs: {\n\t                            'download': fileName + '.' + type.toLocaleLowerCase(),\n\t                            'href': imgURI\n\t                        }\n\t                    }).dispatchEvent(new MouseEvent('click', {\n\t                        view: window,\n\t                        bubbles: false,\n\t                        cancelable: true\n\t                    }));\n\t                }\n\t            });\n\t            image.src = url;\n\t        };\n\t        return ExportUtils;\n\t    }());\n\t    exports.ExportUtils = ExportUtils;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(8), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, double_axis_1, double_range_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DateTime = (function (_super) {\n\t        __extends(DateTime, _super);\n\t        function DateTime(chart) {\n\t            return _super.call(this, chart) || this;\n\t        }\n\t        DateTime.prototype.calculateRangeAndInterval = function (size, axis) {\n\t            this.calculateRange(axis, size);\n\t            this.getActualRange(axis, size);\n\t            this.applyRangePadding(axis, size);\n\t            this.calculateVisibleLabels(axis);\n\t        };\n\t        DateTime.prototype.getActualRange = function (axis, size) {\n\t            var option = {\n\t                skeleton: 'full',\n\t                type: 'dateTime'\n\t            };\n\t            var dateParser = this.chart.intl.getDateParser(option);\n\t            var dateFormatter = this.chart.intl.getDateFormat(option);\n\t            if ((axis.minimum) !== null) {\n\t                this.min = Date.parse(dateParser(dateFormatter(axis.minimum)));\n\t            }\n\t            else if (this.min === null || this.min === Number.POSITIVE_INFINITY) {\n\t                this.min = Date.parse(dateParser(dateFormatter(new Date(1970, 1, 1))));\n\t            }\n\t            if ((axis.maximum) !== null) {\n\t                this.max = Date.parse(dateParser(dateFormatter(axis.maximum)));\n\t            }\n\t            else if (this.max === null || this.max === Number.NEGATIVE_INFINITY) {\n\t                this.max = Date.parse(dateParser(dateFormatter(new Date(1970, 5, 1))));\n\t            }\n\t            if (this.min === this.max) {\n\t                this.max = this.max + 2592000000;\n\t                this.min = this.min - 2592000000;\n\t            }\n\t            axis.actualRange = {};\n\t            axis.doubleRange = new double_range_1.DoubleRange(this.min, this.max);\n\t            var datetimeInterval = this.calculateDateTimeNiceInterval(axis, size, axis.doubleRange.start, axis.doubleRange.end);\n\t            if (!axis.interval) {\n\t                axis.actualRange.interval = datetimeInterval;\n\t            }\n\t            else {\n\t                axis.actualRange.interval = axis.interval;\n\t            }\n\t            axis.actualRange.min = axis.doubleRange.start;\n\t            axis.actualRange.max = axis.doubleRange.end;\n\t        };\n\t        DateTime.prototype.applyRangePadding = function (axis, size) {\n\t            this.start = (axis.actualRange.min);\n\t            this.end = (axis.actualRange.max);\n\t            var minimum;\n\t            var maximum;\n\t            var interval = axis.actualRange.interval;\n\t            if (!axis.setRange()) {\n\t                var rangePadding = axis.getRangePadding(this.chart);\n\t                minimum = new Date(this.start);\n\t                maximum = new Date(this.end);\n\t                var intervalType = axis.actualIntervalType;\n\t                if (rangePadding === 'None') {\n\t                    this.start = minimum.getTime();\n\t                    this.end = maximum.getTime();\n\t                }\n\t                else if (rangePadding === 'Additional' || rangePadding === 'Round') {\n\t                    switch (intervalType) {\n\t                        case 'Years':\n\t                            this.getYear(minimum, maximum, rangePadding, interval);\n\t                            break;\n\t                        case 'Months':\n\t                            this.getMonth(minimum, maximum, rangePadding, interval);\n\t                            break;\n\t                        case 'Days':\n\t                            this.getDay(minimum, maximum, rangePadding, interval);\n\t                            break;\n\t                        case 'Hours':\n\t                            this.getHour(minimum, maximum, rangePadding, interval);\n\t                            break;\n\t                        case 'Minutes':\n\t                            var minute = (minimum.getMinutes() / interval) * interval;\n\t                            var endMinute = maximum.getMinutes() + (minimum.getMinutes() - minute);\n\t                            if (rangePadding === 'Round') {\n\t                                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), minimum.getDate(), minimum.getHours(), minute, 0)).getTime();\n\t                                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), maximum.getHours(), endMinute, 59)).getTime();\n\t                            }\n\t                            else {\n\t                                this.start = (new Date(minimum.getFullYear(), maximum.getMonth(), minimum.getDate(), minimum.getHours(), minute + (-interval), 0)).getTime();\n\t                                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), maximum.getHours(), endMinute + (interval), 0)).getTime();\n\t                            }\n\t                            break;\n\t                        case 'Seconds':\n\t                            var second = (minimum.getSeconds() / interval) * interval;\n\t                            var endSecond = maximum.getSeconds() + (minimum.getSeconds() - second);\n\t                            if (rangePadding === 'Round') {\n\t                                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), minimum.getDate(), minimum.getHours(), minimum.getMinutes(), second, 0)).getTime();\n\t                                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), maximum.getHours(), maximum.getMinutes(), endSecond, 0)).getTime();\n\t                            }\n\t                            else {\n\t                                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), minimum.getDate(), minimum.getHours(), minimum.getMinutes(), second + (-interval), 0)).getTime();\n\t                                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), maximum.getHours(), maximum.getMinutes(), endSecond + (interval), 0)).getTime();\n\t                            }\n\t                            break;\n\t                    }\n\t                }\n\t            }\n\t            axis.actualRange.min = (axis.minimum != null) ? this.min : this.start;\n\t            axis.actualRange.max = (axis.maximum != null) ? this.max : this.end;\n\t            axis.actualRange.delta = (axis.actualRange.max - axis.actualRange.min);\n\t            axis.doubleRange = new double_range_1.DoubleRange(axis.actualRange.min, axis.actualRange.max);\n\t            this.calculateVisibleRange(size, axis);\n\t        };\n\t        DateTime.prototype.getYear = function (minimum, maximum, rangePadding, interval) {\n\t            var startYear = minimum.getFullYear();\n\t            var endYear = maximum.getFullYear();\n\t            if (rangePadding === 'Additional') {\n\t                this.start = (new Date(startYear - interval, 1, 1, 0, 0, 0)).getTime();\n\t                this.end = (new Date(endYear + interval, 1, 1, 0, 0, 0)).getTime();\n\t            }\n\t            else {\n\t                this.start = new Date(startYear, 0, 0, 0, 0, 0).getTime();\n\t                this.end = new Date(endYear, 11, 30, 23, 59, 59).getTime();\n\t            }\n\t        };\n\t        DateTime.prototype.getMonth = function (minimum, maximum, rangePadding, interval) {\n\t            var month = minimum.getMonth();\n\t            var endMonth = maximum.getMonth();\n\t            if (rangePadding === 'Round') {\n\t                this.start = (new Date(minimum.getFullYear(), month, 0, 0, 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), endMonth, new Date(maximum.getFullYear(), maximum.getMonth(), 0).getDate(), 23, 59, 59)).getTime();\n\t            }\n\t            else {\n\t                this.start = (new Date(minimum.getFullYear(), month + (-interval), 1, 0, 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), endMonth + (interval), endMonth === 2 ? 28 : 30, 0, 0, 0)).getTime();\n\t            }\n\t        };\n\t        DateTime.prototype.getDay = function (minimum, maximum, rangePadding, interval) {\n\t            var day = minimum.getDate();\n\t            var endDay = maximum.getDate();\n\t            if (rangePadding === 'Round') {\n\t                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), day, 0, 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), endDay, 23, 59, 59)).getTime();\n\t            }\n\t            else {\n\t                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), day + (-interval), 0, 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), endDay + (interval), 0, 0, 0)).getTime();\n\t            }\n\t        };\n\t        DateTime.prototype.getHour = function (minimum, maximum, rangePadding, interval) {\n\t            var hour = (minimum.getHours() / interval) * interval;\n\t            var endHour = maximum.getHours() + (minimum.getHours() - hour);\n\t            if (rangePadding === 'Round') {\n\t                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), minimum.getDate(), hour, 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), endHour, 59, 59)).getTime();\n\t            }\n\t            else {\n\t                this.start = (new Date(minimum.getFullYear(), minimum.getMonth(), minimum.getDate(), hour + (-interval), 0, 0)).getTime();\n\t                this.end = (new Date(maximum.getFullYear(), maximum.getMonth(), maximum.getDate(), endHour + (interval), 0, 0)).getTime();\n\t            }\n\t        };\n\t        DateTime.prototype.calculateVisibleRange = function (size, axis) {\n\t            axis.visibleRange = axis.actualRange;\n\t            if (axis.zoomFactor < 1 || axis.zoomPosition > 0) {\n\t                axis.calculateVisibleRange(size);\n\t                axis.visibleRange.interval = (axis.enableAutoIntervalOnZooming) ?\n\t                    this.calculateDateTimeNiceInterval(axis, size, axis.visibleRange.min, axis.visibleRange.max)\n\t                    : axis.visibleRange.interval;\n\t            }\n\t            axis.dateTimeInterval = this.increaseDateTimeInterval(axis, axis.visibleRange.min, axis.visibleRange.interval).getTime()\n\t                - axis.visibleRange.min;\n\t        };\n\t        DateTime.prototype.calculateVisibleLabels = function (axis) {\n\t            axis.visibleLabels = [];\n\t            var tempInterval = axis.visibleRange.min;\n\t            if (!axis.setRange()) {\n\t                tempInterval = this.alignRangeStart(axis, tempInterval, axis.visibleRange.interval, axis.actualIntervalType).getTime();\n\t            }\n\t            axis.format = this.chart.intl.getDateFormat({\n\t                format: axis.labelFormat, type: helper_1.firstToLowerCase(axis.skeletonType), skeleton: this.getSkeleton(axis)\n\t            });\n\t            axis.startLabel = axis.format(new Date(axis.visibleRange.min));\n\t            axis.endLabel = axis.format(new Date(axis.visibleRange.max));\n\t            while (tempInterval <= axis.visibleRange.max) {\n\t                if (helper_1.withIn(tempInterval, axis.visibleRange)) {\n\t                    axis.triggerLabelRender(this.chart, tempInterval, axis.format(new Date(tempInterval)));\n\t                }\n\t                tempInterval = this.increaseDateTimeInterval(axis, tempInterval, axis.visibleRange.interval).getTime();\n\t            }\n\t            axis.getMaxLabelWidth(this.chart);\n\t        };\n\t        DateTime.prototype.increaseDateTimeInterval = function (axis, value, interval) {\n\t            var result = new Date(value);\n\t            interval = Math.ceil(interval);\n\t            switch (axis.actualIntervalType) {\n\t                case 'Years':\n\t                    result.setFullYear(result.getFullYear() + interval);\n\t                    return result;\n\t                case 'Months':\n\t                    result.setMonth(result.getMonth() + interval);\n\t                    return result;\n\t                case 'Days':\n\t                    result.setDate(result.getDate() + interval);\n\t                    return result;\n\t                case 'Hours':\n\t                    result.setHours(result.getHours() + interval);\n\t                    return result;\n\t                case 'Minutes':\n\t                    result.setMinutes(result.getMinutes() + interval);\n\t                    return result;\n\t                case 'Seconds':\n\t                    result.setSeconds(result.getSeconds() + interval);\n\t                    return result;\n\t            }\n\t            return result;\n\t        };\n\t        DateTime.prototype.alignRangeStart = function (axis, sDate, intervalSize, intervalType) {\n\t            var sResult = new Date(sDate);\n\t            switch (axis.actualIntervalType) {\n\t                case 'Years':\n\t                    var year = Math.floor(Math.floor(sResult.getFullYear() / intervalSize) * intervalSize);\n\t                    sResult = new Date(year, sResult.getMonth(), sResult.getDate(), 0, 0, 0);\n\t                    return sResult;\n\t                case 'Months':\n\t                    var month = Math.floor(Math.floor((sResult.getMonth()) / intervalSize) * intervalSize);\n\t                    sResult = new Date(sResult.getFullYear(), month, sResult.getDate(), 0, 0, 0);\n\t                    return sResult;\n\t                case 'Days':\n\t                    var day = Math.floor(Math.floor((sResult.getDate()) / intervalSize) * intervalSize);\n\t                    sResult = new Date(sResult.getFullYear(), sResult.getMonth(), day, 0, 0, 0);\n\t                    return sResult;\n\t                case 'Hours':\n\t                    var hour = Math.floor(Math.floor((sResult.getHours()) / intervalSize) * intervalSize);\n\t                    sResult = new Date(sResult.getFullYear(), sResult.getMonth(), sResult.getDate(), hour, 0, 0);\n\t                    return sResult;\n\t                case 'Minutes':\n\t                    var minutes = Math.floor(Math.floor((sResult.getMinutes()) / intervalSize) * intervalSize);\n\t                    sResult = new Date(sResult.getFullYear(), sResult.getMonth(), sResult.getDate(), sResult.getHours(), minutes, 0, 0);\n\t                    return sResult;\n\t                case 'Seconds':\n\t                    var seconds = Math.floor(Math.floor((sResult.getSeconds()) / intervalSize) * intervalSize);\n\t                    sResult = new Date(sResult.getFullYear(), sResult.getMonth(), sResult.getDate(), sResult.getHours(), sResult.getMinutes(), seconds, 0);\n\t                    return sResult;\n\t            }\n\t            return sResult;\n\t        };\n\t        DateTime.prototype.getSkeleton = function (axis) {\n\t            var skeleton;\n\t            if (axis.skeleton) {\n\t                return axis.skeleton;\n\t            }\n\t            if (axis.actualIntervalType === 'Years') {\n\t                skeleton = 'yMMM';\n\t            }\n\t            else if (axis.actualIntervalType === 'Months') {\n\t                skeleton = 'MMMd';\n\t            }\n\t            else if (axis.actualIntervalType === 'Days') {\n\t                skeleton = 'yMd';\n\t            }\n\t            else if (axis.actualIntervalType === 'Hours') {\n\t                skeleton = 'EHm';\n\t            }\n\t            else if (axis.actualIntervalType === 'Minutes' || axis.actualIntervalType === 'Seconds') {\n\t                skeleton = 'Hms';\n\t            }\n\t            else {\n\t                skeleton = 'Hms';\n\t            }\n\t            return skeleton;\n\t        };\n\t        DateTime.prototype.calculateDateTimeNiceInterval = function (axis, size, start, end) {\n\t            var oneDay = 24 * 60 * 60 * 1000;\n\t            var startDate = new Date(start);\n\t            var endDate = new Date(end);\n\t            var totalDays = (Math.abs((startDate.getTime() - endDate.getTime()) / (oneDay)));\n\t            var interval;\n\t            axis.actualIntervalType = axis.intervalType;\n\t            switch (axis.intervalType) {\n\t                case 'Years':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays / 365, size);\n\t                    break;\n\t                case 'Months':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays / 30, size);\n\t                    break;\n\t                case 'Days':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays, size);\n\t                    break;\n\t                case 'Hours':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24, size);\n\t                    break;\n\t                case 'Minutes':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24 * 60, size);\n\t                    break;\n\t                case 'Seconds':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24 * 60 * 60, size);\n\t                    break;\n\t                case 'Auto':\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays / 365, size);\n\t                    if (interval >= 1) {\n\t                        axis.actualIntervalType = 'Years';\n\t                        return interval;\n\t                    }\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays / 30, size);\n\t                    if (interval >= 1) {\n\t                        axis.actualIntervalType = 'Months';\n\t                        return interval;\n\t                    }\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays, size);\n\t                    if (interval >= 1) {\n\t                        axis.actualIntervalType = 'Days';\n\t                        return interval;\n\t                    }\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24, size);\n\t                    if (interval >= 1) {\n\t                        axis.actualIntervalType = 'Hours';\n\t                        return interval;\n\t                    }\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24 * 60, size);\n\t                    if (interval >= 1) {\n\t                        axis.actualIntervalType = 'Minutes';\n\t                        return interval;\n\t                    }\n\t                    interval = this.calculateNumericNiceInterval(axis, totalDays * 24 * 60 * 60, size);\n\t                    axis.actualIntervalType = 'Seconds';\n\t                    return interval;\n\t            }\n\t            return interval;\n\t        };\n\t        DateTime.prototype.getModuleName = function () {\n\t            return 'DateTime';\n\t        };\n\t        DateTime.prototype.destroy = function (chart) {\n\t        };\n\t        return DateTime;\n\t    }(double_axis_1.Double));\n\t    exports.DateTime = DateTime;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(8), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, double_axis_1, double_range_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Category = (function (_super) {\n\t        __extends(Category, _super);\n\t        function Category(chart) {\n\t            return _super.call(this, chart) || this;\n\t        }\n\t        Category.prototype.calculateRangeAndInterval = function (size, axis) {\n\t            this.calculateRange(axis, size);\n\t            this.getActualRange(axis, size);\n\t            this.applyRangePadding(axis, size);\n\t            this.calculateVisibleLabels(axis);\n\t        };\n\t        Category.prototype.getActualRange = function (axis, size) {\n\t            axis.doubleRange = new double_range_1.DoubleRange(this.min, this.max);\n\t            axis.actualRange = {};\n\t            if (!axis.interval) {\n\t                axis.actualRange.interval = Math.max(1, Math.floor(axis.doubleRange.delta / axis.getActualDesiredIntervalsCount(size)));\n\t            }\n\t            else {\n\t                axis.actualRange.interval = Math.ceil(axis.interval);\n\t            }\n\t            axis.actualRange.min = axis.doubleRange.start;\n\t            axis.actualRange.max = axis.doubleRange.end;\n\t            axis.actualRange.delta = axis.doubleRange.delta;\n\t        };\n\t        Category.prototype.applyRangePadding = function (axis, size) {\n\t            var ticks = (axis.labelPlacement === 'BetweenTicks' && this.chart.chartAreaType !== 'PolarRadar') ? 0.5 : 0;\n\t            if (ticks > 0) {\n\t                axis.actualRange.min -= ticks;\n\t                axis.actualRange.max += ticks;\n\t            }\n\t            else {\n\t                axis.actualRange.max += axis.actualRange.max ? 0 : 0.5;\n\t            }\n\t            axis.doubleRange = new double_range_1.DoubleRange(axis.actualRange.min, axis.actualRange.max);\n\t            axis.actualRange.delta = axis.doubleRange.delta;\n\t            this.calculateVisibleRange(size, axis);\n\t        };\n\t        Category.prototype.calculateVisibleLabels = function (axis) {\n\t            axis.visibleLabels = [];\n\t            var tempInterval = axis.visibleRange.min - (axis.visibleRange.min % axis.visibleRange.interval);\n\t            var position;\n\t            axis.startLabel = axis.labels[Math.round(axis.visibleRange.min)];\n\t            axis.endLabel = axis.labels[Math.floor(axis.visibleRange.max)];\n\t            for (; tempInterval <= axis.visibleRange.max; tempInterval += axis.visibleRange.interval) {\n\t                if (helper_1.withIn(tempInterval, axis.visibleRange) && axis.labels.length > 0) {\n\t                    position = Math.round(tempInterval);\n\t                    axis.triggerLabelRender(this.chart, position, axis.labels[position] ? axis.labels[position] : position.toString());\n\t                }\n\t            }\n\t            axis.getMaxLabelWidth(this.chart);\n\t        };\n\t        Category.prototype.getModuleName = function () {\n\t            return 'Category';\n\t        };\n\t        Category.prototype.destroy = function (chart) {\n\t        };\n\t        return Category;\n\t    }(double_axis_1.Double));\n\t    exports.Category = Category;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(10), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, double_axis_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Logarithmic = (function (_super) {\n\t        __extends(Logarithmic, _super);\n\t        function Logarithmic(chart) {\n\t            return _super.call(this, chart) || this;\n\t        }\n\t        Logarithmic.prototype.calculateRangeAndInterval = function (size, axis) {\n\t            this.calculateRange(axis, size);\n\t            this.getActualRange(axis, size);\n\t            this.calculateVisibleRange(size, axis);\n\t            this.calculateVisibleLabels(axis, this.chart);\n\t        };\n\t        Logarithmic.prototype.getActualRange = function (axis, size) {\n\t            this.initializeDoubleRange(axis);\n\t            this.min = this.min < 0 ? 0 : this.min;\n\t            var logStart = helper_1.logBase(this.min, axis.logBase);\n\t            logStart = isFinite(logStart) ? logStart : this.min;\n\t            var logEnd = helper_1.logBase(this.max, axis.logBase);\n\t            logEnd = isFinite(logStart) ? logEnd : this.max;\n\t            this.min = Math.floor(logStart / 1);\n\t            this.max = Math.ceil(logEnd / 1);\n\t            axis.actualRange.interval = axis.interval || this.calculateLogNiceInterval(this.max - this.min, size, axis);\n\t            axis.actualRange.min = this.min;\n\t            axis.actualRange.max = this.max;\n\t            axis.actualRange.delta = this.max - this.min;\n\t        };\n\t        Logarithmic.prototype.calculateVisibleRange = function (size, axis) {\n\t            axis.visibleRange = axis.actualRange;\n\t            if (axis.zoomFactor < 1 || axis.zoomPosition > 0) {\n\t                axis.calculateVisibleRange(size);\n\t                axis.visibleRange.interval = (axis.enableAutoIntervalOnZooming) ?\n\t                    this.calculateLogNiceInterval(axis.doubleRange.delta, size, axis)\n\t                    : axis.visibleRange.interval;\n\t                axis.visibleRange.interval = Math.floor(axis.visibleRange.interval) === 0 ? 1 : Math.floor(axis.visibleRange.interval);\n\t            }\n\t        };\n\t        Logarithmic.prototype.calculateLogNiceInterval = function (delta, size, axis) {\n\t            var actualDesiredIntervalsCount = axis.getActualDesiredIntervalsCount(size);\n\t            var niceInterval = delta;\n\t            var minInterval = Math.pow(10, Math.floor(helper_1.logBase(niceInterval, 10)));\n\t            for (var j = 0, len = axis.intervalDivs.length; j < len; j++) {\n\t                var currentInterval = minInterval * axis.intervalDivs[j];\n\t                if (actualDesiredIntervalsCount < (delta / currentInterval)) {\n\t                    break;\n\t                }\n\t                niceInterval = currentInterval;\n\t            }\n\t            return niceInterval;\n\t        };\n\t        Logarithmic.prototype.calculateVisibleLabels = function (axis, chart) {\n\t            var tempInterval = axis.visibleRange.min;\n\t            axis.visibleLabels = [];\n\t            if (axis.zoomFactor < 1 || axis.zoomPosition > 0) {\n\t                tempInterval = axis.visibleRange.min - (axis.visibleRange.min % axis.visibleRange.interval);\n\t            }\n\t            var axisFormat = this.getFormat(axis);\n\t            var isCustomFormat = axisFormat.match('{value}') !== null;\n\t            axis.format = chart.intl.getNumberFormat({ format: isCustomFormat ? '' : axisFormat,\n\t                useGrouping: chart.useGroupingSeparator });\n\t            axis.startLabel = axis.format(Math.pow(axis.logBase, axis.visibleRange.min));\n\t            axis.endLabel = axis.format(Math.pow(axis.logBase, axis.visibleRange.max));\n\t            for (; tempInterval <= axis.visibleRange.max; tempInterval += axis.visibleRange.interval) {\n\t                if (helper_1.withIn(tempInterval, axis.actualRange)) {\n\t                    axis.triggerLabelRender(this.chart, tempInterval, this.formatValue(axis, isCustomFormat, axisFormat, Math.pow(axis.logBase, tempInterval)));\n\t                }\n\t            }\n\t            axis.getMaxLabelWidth(this.chart);\n\t        };\n\t        Logarithmic.prototype.getModuleName = function () {\n\t            return 'Logarithmic';\n\t        };\n\t        Logarithmic.prototype.destroy = function (chart) {\n\t        };\n\t        return Logarithmic;\n\t    }(double_axis_1.Double));\n\t    exports.Logarithmic = Logarithmic;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StripLine = (function () {\n\t        function StripLine() {\n\t        }\n\t        StripLine.prototype.measureStripLine = function (axis, stripline, seriesClipRect) {\n\t            var rect = this.getFromTovalue(stripline.start, stripline.end, stripline.size, stripline.startFromAxis, axis);\n\t            var height = (axis.orientation === 'Vertical') ? (rect.to - rect.from) * axis.rect.height : seriesClipRect.height;\n\t            var width = (axis.orientation === 'Horizontal') ? (rect.to - rect.from) * axis.rect.width : seriesClipRect.width;\n\t            var x = (axis.orientation === 'Vertical') ? seriesClipRect.x : ((rect.from * axis.rect.width) + axis.rect.x);\n\t            var y = (axis.orientation === 'Horizontal') ? seriesClipRect.y : (axis.rect.y + axis.rect.height -\n\t                (rect.to * axis.rect.height));\n\t            if (height !== 0 && width !== 0) {\n\t                return new helper_1.Rect(x, y, width, height);\n\t            }\n\t            return new helper_1.Rect(0, 0, 0, 0);\n\t        };\n\t        StripLine.prototype.getFromTovalue = function (start, end, size, startFromAxis, axis) {\n\t            var from = startFromAxis ? axis.visibleRange.min : this.findValue(Math.min(start, ej2_base_1.isNullOrUndefined(end) ? start : end), axis);\n\t            var to = this.findValue(this.getToValue(Math.max(start, ej2_base_1.isNullOrUndefined(end) ? start : end), from, size, axis, end), axis);\n\t            return { from: helper_1.valueToCoefficient(axis.isInversed ? to : from, axis), to: helper_1.valueToCoefficient(axis.isInversed ? from : to, axis) };\n\t        };\n\t        StripLine.prototype.getToValue = function (to, from, size, axis, end) {\n\t            if (axis.valueType === 'DateTime') {\n\t                return (ej2_base_1.isNullOrUndefined(end) ? new Date(new Date(from).getTime() + size) : to);\n\t            }\n\t            else {\n\t                return ej2_base_1.isNullOrUndefined(end) ? (axis.valueType === 'Logarithmic' ? Math.pow(axis.logBase, from) : from) + size : to;\n\t            }\n\t        };\n\t        StripLine.prototype.findValue = function (value, axis) {\n\t            if (axis.valueType === 'Logarithmic') {\n\t                value = helper_1.logBase(value, axis.logBase);\n\t            }\n\t            if (value < axis.visibleRange.min) {\n\t                value = axis.visibleRange.min;\n\t            }\n\t            else if (value > axis.visibleRange.max) {\n\t                value = axis.visibleRange.max;\n\t            }\n\t            return value;\n\t        };\n\t        StripLine.prototype.renderStripLine = function (chart, position, axes) {\n\t            var id = chart.element.id + '_stripline_' + position + '_';\n\t            var striplineGroup = chart.renderer.createGroup({ id: id + 'collections' });\n\t            var seriesClipRect = chart.chartAxisLayoutPanel.seriesClipRect;\n\t            var rect;\n\t            var count = 0;\n\t            for (var _i = 0, axes_1 = axes; _i < axes_1.length; _i++) {\n\t                var axis = axes_1[_i];\n\t                for (var _a = 0, _b = axis.stripLines; _a < _b.length; _a++) {\n\t                    var stripline = _b[_a];\n\t                    if (stripline.visible && stripline.zIndex === position) {\n\t                        rect = this.measureStripLine(axis, stripline, seriesClipRect);\n\t                        this.renderRectangle(stripline, rect, id + 'rect_' + count, striplineGroup, chart);\n\t                        this.renderText(stripline, rect, id + 'text_' + count, striplineGroup, chart, axis);\n\t                        count++;\n\t                    }\n\t                }\n\t            }\n\t            chart.svgObject.appendChild(striplineGroup);\n\t        };\n\t        StripLine.prototype.renderRectangle = function (stripline, rect, id, parent, chart) {\n\t            parent.appendChild(chart.renderer.drawRectangle(new helper_1.RectOption(id, stripline.color, stripline.border, stripline.opacity, rect, 0, 0, '', '')));\n\t        };\n\t        StripLine.prototype.renderText = function (stripline, rect, id, parent, chart, axis) {\n\t            var textSize = helper_1.measureText(stripline.text, stripline.textStyle);\n\t            var textMid = 3 * (textSize.height / 8);\n\t            var ty = rect.y + (rect.height / 2) + textMid;\n\t            var rotation = (stripline.rotation === null) ? ((axis.orientation === 'Vertical') ? 0 : -90) : stripline.rotation;\n\t            var tx = rect.x + (rect.width / 2);\n\t            var alignment;\n\t            var anchor;\n\t            var padding = 5;\n\t            if (axis.orientation === 'Horizontal') {\n\t                tx = this.getTextStart(tx + (textMid * this.factor(stripline.horizontalAlignment)), rect.width, stripline.horizontalAlignment);\n\t                ty = this.getTextStart(ty - textMid, rect.height, stripline.verticalAlignment);\n\t                alignment = this.invertAlignment(stripline.verticalAlignment);\n\t            }\n\t            else {\n\t                tx = this.getTextStart(tx, rect.width, stripline.horizontalAlignment);\n\t                ty = this.getTextStart(ty + (textMid * this.factor(stripline.verticalAlignment)) - padding, rect.height, stripline.verticalAlignment);\n\t                alignment = stripline.horizontalAlignment;\n\t            }\n\t            anchor = alignment;\n\t            helper_1.textElement(new helper_1.TextOption(id, tx, ty, anchor, stripline.text, 'rotate(' + rotation + ' ' + tx + ',' + ty + ')', 'middle'), stripline.textStyle, stripline.textStyle.color, parent);\n\t        };\n\t        StripLine.prototype.invertAlignment = function (anchor) {\n\t            switch (anchor) {\n\t                case 'Start':\n\t                    anchor = 'End';\n\t                    break;\n\t                case 'End':\n\t                    anchor = 'Start';\n\t                    break;\n\t            }\n\t            return anchor;\n\t        };\n\t        StripLine.prototype.factor = function (anchor) {\n\t            var factor = 0;\n\t            switch (anchor) {\n\t                case 'Start':\n\t                    factor = 1;\n\t                    break;\n\t                case 'End':\n\t                    factor = -1;\n\t                    break;\n\t            }\n\t            return factor;\n\t        };\n\t        StripLine.prototype.getTextStart = function (xy, size, textAlignment) {\n\t            var padding = 5;\n\t            switch (textAlignment) {\n\t                case 'Start':\n\t                    xy = xy - (size / 2) + padding;\n\t                    break;\n\t                case 'End':\n\t                    xy = xy + (size / 2) - padding;\n\t                    break;\n\t            }\n\t            return xy;\n\t        };\n\t        StripLine.prototype.getModuleName = function () {\n\t            return 'StripLine';\n\t        };\n\t        StripLine.prototype.destroy = function () {\n\t        };\n\t        return StripLine;\n\t    }());\n\t    exports.StripLine = StripLine;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var LineSeries = (function (_super) {\n\t        __extends(LineSeries, _super);\n\t        function LineSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        LineSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var point1;\n\t            var point2;\n\t            var direction = '';\n\t            var prevPoint = null;\n\t            var startPoint = 'M';\n\t            var options;\n\t            var getCoordinate = series.chart.chartAreaType === 'PolarRadar' ? helper_1.TransformToVisible : helper_1.getPoint;\n\t            var visiblePoints = this.improveChartPerformance(series);\n\t            for (var _i = 0, visiblePoints_1 = visiblePoints; _i < visiblePoints_1.length; _i++) {\n\t                var point = visiblePoints_1[_i];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(visiblePoints[point.index - 1], point, visiblePoints[point.index + 1], series)) {\n\t                    if (prevPoint != null) {\n\t                        point1 = getCoordinate(prevPoint.xValue, prevPoint.yValue, xAxis, yAxis, isInverted, series);\n\t                        point2 = getCoordinate(point.xValue, point.yValue, xAxis, yAxis, isInverted, series);\n\t                        direction = direction.concat(startPoint + ' ' + (point1.x) + ' ' + (point1.y) + ' ' +\n\t                            'L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t                        startPoint = 'L';\n\t                    }\n\t                    prevPoint = point;\n\t                    point.symbolLocations.push(getCoordinate(point.xValue, point.yValue, xAxis, yAxis, isInverted, series));\n\t                    point.regions.push(new helper_1.Rect(point.symbolLocations[0].x - series.marker.width, point.symbolLocations[0].y - series.marker.height, 2 * series.marker.width, 2 * series.marker.height));\n\t                }\n\t                else {\n\t                    prevPoint = (series.emptyPointSettings.mode === 'Drop') ? prevPoint : null;\n\t                    startPoint = (series.emptyPointSettings.mode === 'Drop') ? startPoint : 'M';\n\t                    point.symbolLocations = [];\n\t                }\n\t            }\n\t            if (series.chart.chartAreaType === 'PolarRadar') {\n\t                if (series.isClosed) {\n\t                    point2 = getCoordinate(visiblePoints[visiblePoints.length - 1].xValue, visiblePoints[visiblePoints.length - 1].yValue, xAxis, yAxis, isInverted, series);\n\t                    point1 = getCoordinate(visiblePoints[0].xValue, visiblePoints[0].yValue, xAxis, yAxis, isInverted, series);\n\t                    direction = direction.concat(startPoint + ' ' + point2.x + ' ' + point2.y + ' ' + 'L' + ' ' + point1.x + ' ' + point1.y);\n\t                }\n\t            }\n\t            var name = series.category === 'Indicator' ? series.chart.element.id + '_Indicator_' + series.index + '_' + series.name :\n\t                series.category === 'TrendLine' ? series.chart.element.id + '_Series_' + series.sourceIndex + '_TrendLine_' + series.index :\n\t                    series.chart.element.id + '_Series_' + series.index;\n\t            options = new helper_1.PathOption(name, 'none', series.width, series.interior, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        LineSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doProgressiveAnimation(series, option);\n\t        };\n\t        LineSeries.prototype.getModuleName = function () {\n\t            return 'LineSeries';\n\t        };\n\t        LineSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return LineSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.LineSeries = LineSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var LineBase = (function () {\n\t        function LineBase(chartModule) {\n\t            this.chart = chartModule;\n\t            this.padding = 5;\n\t        }\n\t        LineBase.prototype.improveChartPerformance = function (series) {\n\t            var tempPoints = [];\n\t            var xVisibleRange = series.xAxis.visibleRange;\n\t            var yVisibleRange = series.yAxis.visibleRange;\n\t            var seriesPoints = series.points;\n\t            var areaBounds = series.clipRect;\n\t            var xTolerance = Math.abs(xVisibleRange.delta / areaBounds.width);\n\t            var yTolerance = Math.abs(yVisibleRange.delta / areaBounds.height);\n\t            var prevXValue = (seriesPoints[0] && seriesPoints[0].x > xTolerance) ? 0 : xTolerance;\n\t            var prevYValue = (seriesPoints[0] && seriesPoints[0].y > yTolerance) ? 0 : yTolerance;\n\t            var xVal = 0;\n\t            var yVal = 0;\n\t            var currentPoint;\n\t            for (var _i = 0, seriesPoints_1 = seriesPoints; _i < seriesPoints_1.length; _i++) {\n\t                var currentPoint_1 = seriesPoints_1[_i];\n\t                currentPoint_1.symbolLocations = [];\n\t                xVal = currentPoint_1.xValue ? currentPoint_1.xValue : xVisibleRange.min;\n\t                yVal = currentPoint_1.yValue ? currentPoint_1.yValue : yVisibleRange.min;\n\t                if (Math.abs(prevXValue - xVal) >= xTolerance || Math.abs(prevYValue - yVal) >= yTolerance) {\n\t                    tempPoints.push(currentPoint_1);\n\t                    prevXValue = xVal;\n\t                    prevYValue = yVal;\n\t                }\n\t            }\n\t            return tempPoints;\n\t        };\n\t        LineBase.prototype.appendLinePath = function (options, series) {\n\t            var htmlObject = series.chart.renderer.drawPath(options);\n\t            series.pathElement = htmlObject;\n\t            series.seriesElement.appendChild(htmlObject);\n\t            series.isRectSeries = false;\n\t        };\n\t        LineBase.prototype.renderMarker = function (series) {\n\t            if (series.marker.visible) {\n\t                series.chart.markerRender.render(series);\n\t            }\n\t        };\n\t        LineBase.prototype.doProgressiveAnimation = function (series, option) {\n\t            var animation = new ej2_base_1.Animation({});\n\t            var path = series.pathElement;\n\t            var strokeDashArray = path.getAttribute('stroke-dasharray');\n\t            var pathLength = series.pathElement.getTotalLength();\n\t            var currentTime;\n\t            path.style.visibility = 'hidden';\n\t            animation.animate(path, {\n\t                duration: option.duration,\n\t                delay: option.delay,\n\t                progress: function (args) {\n\t                    if (args.timeStamp >= args.delay) {\n\t                        path.style.visibility = 'visible';\n\t                        currentTime = Math.abs(Math.round(((args.timeStamp - args.delay) * pathLength) / args.duration));\n\t                        path.setAttribute('stroke-dasharray', currentTime + ',' + pathLength);\n\t                    }\n\t                },\n\t                end: function (model) {\n\t                    path.setAttribute('stroke-dasharray', strokeDashArray);\n\t                    series.chart.trigger('animationComplete', { series: series });\n\t                }\n\t            });\n\t        };\n\t        LineBase.prototype.doLinearAnimation = function (series, animation) {\n\t            var clipRect = series.clipRectElement.childNodes[0].childNodes[0];\n\t            var effect = helper_1.getAnimationFunction('Linear');\n\t            var elementHeight = +clipRect.getAttribute('height');\n\t            var elementWidth = +clipRect.getAttribute('width');\n\t            var xCenter = +clipRect.getAttribute('x');\n\t            var yCenter = series.chart.requireInvertedAxis ? +clipRect.getAttribute('height') + +clipRect.getAttribute('y') :\n\t                +clipRect.getAttribute('y');\n\t            var value;\n\t            clipRect.style.visibility = 'hidden';\n\t            new ej2_base_1.Animation({}).animate(clipRect, {\n\t                duration: animation.duration,\n\t                delay: animation.delay,\n\t                progress: function (args) {\n\t                    if (args.timeStamp >= args.delay) {\n\t                        clipRect.style.visibility = 'visible';\n\t                        if (series.chart.requireInvertedAxis) {\n\t                            value = effect(args.timeStamp - args.delay, 0, elementHeight, args.duration);\n\t                            clipRect.setAttribute('transform', 'translate(' + xCenter + ' ' + yCenter +\n\t                                ') scale(1,' + (value / elementHeight) + ') translate(' + (-xCenter) + ' ' + (-yCenter) + ')');\n\t                        }\n\t                        else {\n\t                            value = effect(args.timeStamp - args.delay, 0, elementWidth, args.duration);\n\t                            clipRect.setAttribute('transform', 'translate(' + xCenter + ' ' + yCenter +\n\t                                ') scale(' + (value / elementWidth) + ', 1) translate(' + (-xCenter) + ' ' + (-yCenter) + ')');\n\t                        }\n\t                    }\n\t                },\n\t                end: function (model) {\n\t                    clipRect.setAttribute('transform', 'translate(0,0)');\n\t                    series.chart.trigger('animationComplete', { series: series });\n\t                }\n\t            });\n\t        };\n\t        return LineBase;\n\t    }());\n\t    exports.LineBase = LineBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnSeries = (function (_super) {\n\t        __extends(ColumnSeries, _super);\n\t        function ColumnSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        ColumnSeries.prototype.render = function (series) {\n\t            var rect;\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var argsData;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var pointColumn = _a[_i];\n\t                pointColumn.symbolLocations = [];\n\t                pointColumn.regions = [];\n\t                if (pointColumn.visible && helper_1.withInRange(series.points[pointColumn.index - 1], pointColumn, series.points[pointColumn.index + 1], series)) {\n\t                    rect = this.getRectangle(pointColumn.xValue + sideBySideInfo.start, pointColumn.yValue, pointColumn.xValue + sideBySideInfo.end, origin, series);\n\t                    var color = series.category === 'Indicator' ? pointColumn.color : series.interior;\n\t                    argsData = this.triggerEvent(series, pointColumn, color, { width: series.border.width, color: series.border.color });\n\t                    if (!argsData.cancel) {\n\t                        this.updateSymbolLocation(pointColumn, rect, series);\n\t                        this.drawRectangle(series, pointColumn, rect, argsData);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ColumnSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        ColumnSeries.prototype.getModuleName = function () {\n\t            return 'ColumnSeries';\n\t        };\n\t        ColumnSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return ColumnSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.ColumnSeries = ColumnSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(8), __webpack_require__(3), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, double_range_1, helper_1, helper_2, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ColumnBase = (function () {\n\t        function ColumnBase() {\n\t        }\n\t        ColumnBase.prototype.getSideBySideInfo = function (series) {\n\t            if (series.chart.enableSideBySidePlacement && !series.position) {\n\t                this.getSideBySidePositions(series);\n\t            }\n\t            var position = !series.chart.enableSideBySidePlacement ? 0 : series.position;\n\t            var rectCount = !series.chart.enableSideBySidePlacement ? 1 : series.rectCount;\n\t            series.isRectSeries = true;\n\t            var visibleSeries = series.chart.visibleSeries;\n\t            var seriesSpacing = series.chart.enableSideBySidePlacement ? series.columnSpacing : 0;\n\t            var pointSpacing = series.columnWidth;\n\t            var minimumPointDelta = helper_1.getMinPointsDelta(series.xAxis, visibleSeries);\n\t            var width = minimumPointDelta * pointSpacing;\n\t            var radius;\n\t            var location = (position) / rectCount - 0.5;\n\t            var doubleRange = new double_range_1.DoubleRange(location, location + (1 / rectCount));\n\t            if (!(isNaN(doubleRange.start) || isNaN(doubleRange.end))) {\n\t                doubleRange = new double_range_1.DoubleRange(doubleRange.start * width, doubleRange.end * width);\n\t                radius = seriesSpacing * doubleRange.delta;\n\t                doubleRange = new double_range_1.DoubleRange(doubleRange.start + radius / 2, doubleRange.end - radius / 2);\n\t            }\n\t            return doubleRange;\n\t        };\n\t        ColumnBase.prototype.getRectangle = function (x1, y1, x2, y2, series) {\n\t            var point1 = helper_2.getPoint(x1, y1, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t            var point2 = helper_2.getPoint(x2, y2, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t            return new helper_1.Rect(Math.min(point1.x, point2.x), Math.min(point1.y, point2.y), Math.abs(point2.x - point1.x), Math.abs(point2.y - point1.y));\n\t        };\n\t        ColumnBase.prototype.getSideBySidePositions = function (series) {\n\t            var chart = series.chart;\n\t            var seriesCollection = [];\n\t            for (var _i = 0, _a = chart.columns; _i < _a.length; _i++) {\n\t                var columnItem = _a[_i];\n\t                for (var _b = 0, _c = chart.rows; _b < _c.length; _b++) {\n\t                    var item = _c[_b];\n\t                    this.findRectPosition(series.findSeriesCollection(columnItem, item, false));\n\t                }\n\t            }\n\t        };\n\t        ColumnBase.prototype.findRectPosition = function (seriesCollection) {\n\t            var stackingGroup = [];\n\t            var vSeries = { rectCount: 0, position: null };\n\t            seriesCollection.forEach(function (value) {\n\t                if (value.type.indexOf('Stacking') !== -1) {\n\t                    if (value.stackingGroup) {\n\t                        if (stackingGroup[value.stackingGroup] === undefined) {\n\t                            value.position = vSeries.rectCount;\n\t                            stackingGroup[value.stackingGroup] = vSeries.rectCount++;\n\t                        }\n\t                        else {\n\t                            value.position = stackingGroup[value.stackingGroup];\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (vSeries.position === null) {\n\t                            value.position = vSeries.rectCount;\n\t                            vSeries.position = vSeries.rectCount++;\n\t                        }\n\t                        else {\n\t                            value.position = vSeries.position;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    value.position = vSeries.rectCount++;\n\t                }\n\t            });\n\t            seriesCollection.forEach(function (value) {\n\t                value.rectCount = vSeries.rectCount;\n\t            });\n\t        };\n\t        ColumnBase.prototype.updateSymbolLocation = function (point, rect, series) {\n\t            if (!series.chart.requireInvertedAxis) {\n\t                this.updateXRegion(point, rect, series);\n\t            }\n\t            else {\n\t                this.updateYRegion(point, rect, series);\n\t            }\n\t        };\n\t        ColumnBase.prototype.updateXRegion = function (point, rect, series) {\n\t            point.regions.push(rect);\n\t            point.symbolLocations.push({\n\t                x: rect.x + (rect.width) / 2,\n\t                y: (series.seriesType === 'BoxPlot' || series.seriesType.indexOf('HighLow') !== -1 ||\n\t                    (point.yValue >= 0 === !series.yAxis.isInversed)) ? rect.y : (rect.y + rect.height)\n\t            });\n\t        };\n\t        ColumnBase.prototype.updateYRegion = function (point, rect, series) {\n\t            point.regions.push(rect);\n\t            point.symbolLocations.push({\n\t                x: (series.seriesType === 'BoxPlot' || series.seriesType.indexOf('HighLow') !== -1 ||\n\t                    (point.yValue >= 0 === !series.yAxis.isInversed)) ? rect.x + rect.width : rect.x,\n\t                y: rect.y + rect.height / 2\n\t            });\n\t        };\n\t        ColumnBase.prototype.triggerEvent = function (series, point, fill, border) {\n\t            var argsData = {\n\t                cancel: false, name: constants_1.pointRender, series: series, point: point,\n\t                fill: series.setPointColor(point, fill),\n\t                border: series.setBorderColor(point, border)\n\t            };\n\t            series.chart.trigger(constants_1.pointRender, argsData);\n\t            point.color = argsData.fill;\n\t            return argsData;\n\t        };\n\t        ColumnBase.prototype.drawRectangle = function (series, point, rect, argsData) {\n\t            var check = series.chart.requireInvertedAxis ? rect.height : rect.width;\n\t            if (check <= 0) {\n\t                return null;\n\t            }\n\t            var direction = this.calculateRoundedRectPath(rect, series.cornerRadius.topLeft, series.cornerRadius.topRight, series.cornerRadius.bottomLeft, series.cornerRadius.bottomRight);\n\t            var name = series.category === 'Indicator' ? series.chart.element.id + '_Indicator_' + series.index + '_' + series.name +\n\t                '_Point_' + point.index : series.chart.element.id + '_Series_' + series.index + '_Point_' + point.index;\n\t            var options = new helper_1.PathOption(name, argsData.fill, argsData.border.width, argsData.border.color, series.opacity, series.dashArray, direction);\n\t            var element = series.chart.renderer.drawPath(options);\n\t            switch (series.seriesType) {\n\t                case 'XY':\n\t                    element.setAttribute('aria-label', point.x.toString() + ':' + point.yValue.toString());\n\t                    break;\n\t                case 'HighLow':\n\t                    element.setAttribute('aria-label', point.x.toString() + ':' + point.high.toString() + ':' + point.low.toString());\n\t                    break;\n\t            }\n\t            series.seriesElement.appendChild(element);\n\t        };\n\t        ColumnBase.prototype.animate = function (series) {\n\t            var rectElements = series.seriesElement.childNodes;\n\t            var count = series.category === 'Indicator' ? 0 : 1;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (!point.symbolLocations.length && !(series.type === 'BoxAndWhisker' && point.regions.length)) {\n\t                    continue;\n\t                }\n\t                this.animateRect(rectElements[count], series, point);\n\t                count++;\n\t            }\n\t        };\n\t        ColumnBase.prototype.animateRect = function (element, series, point) {\n\t            var option = series.animation;\n\t            var effect = helper_2.getAnimationFunction('Linear');\n\t            var isPlot = point.yValue < 0;\n\t            var x;\n\t            var y;\n\t            var elementHeight = +point.regions[0].height;\n\t            var elementWidth = +point.regions[0].width;\n\t            var centerX;\n\t            var centerY;\n\t            if (!series.chart.requireInvertedAxis) {\n\t                x = +point.regions[0].x;\n\t                if (series.type.indexOf('Stacking') > -1) {\n\t                    y = (1 - helper_1.valueToCoefficient(0, series.yAxis)) * (series.yAxis.rect.height);\n\t                    centerX = x;\n\t                    centerY = y;\n\t                }\n\t                else {\n\t                    y = +point.regions[0].y;\n\t                    centerY = (series.seriesType.indexOf('HighLow') !== -1 || series.type.indexOf('Waterfall') !== -1) ? y + elementHeight / 2 :\n\t                        (isPlot !== series.yAxis.isInversed) ? y : y + elementHeight;\n\t                    centerX = isPlot ? x : x + elementWidth;\n\t                }\n\t            }\n\t            else {\n\t                y = +point.regions[0].y;\n\t                if (series.type.indexOf('Stacking') > -1) {\n\t                    x = (helper_1.valueToCoefficient(0, series.yAxis)) * series.yAxis.rect.width;\n\t                    centerX = x;\n\t                    centerY = y;\n\t                }\n\t                else {\n\t                    x = +point.regions[0].x;\n\t                    centerY = isPlot ? y : y + elementHeight;\n\t                    centerX = (series.seriesType.indexOf('HighLow') !== -1 || series.type.indexOf('Waterfall') !== -1) ? x + elementWidth / 2 :\n\t                        (isPlot !== series.yAxis.isInversed) ? x + elementWidth : x;\n\t                }\n\t            }\n\t            var value;\n\t            element.style.visibility = 'hidden';\n\t            new ej2_base_1.Animation({}).animate(element, {\n\t                duration: option.duration,\n\t                delay: option.delay,\n\t                progress: function (args) {\n\t                    if (args.timeStamp >= args.delay) {\n\t                        element.style.visibility = 'visible';\n\t                        if (!series.chart.requireInvertedAxis) {\n\t                            elementHeight = elementHeight ? elementHeight : 1;\n\t                            value = effect(args.timeStamp - args.delay, 0, elementHeight, args.duration);\n\t                            element.setAttribute('transform', 'translate(' + centerX + ' ' + centerY +\n\t                                ') scale(1,' + (value / elementHeight) + ') translate(' + (-centerX) + ' ' + (-centerY) + ')');\n\t                        }\n\t                        else {\n\t                            elementWidth = elementWidth ? elementWidth : 1;\n\t                            value = effect(args.timeStamp - args.delay, 0, elementWidth, args.duration);\n\t                            element.setAttribute('transform', 'translate(' + centerX + ' ' + centerY +\n\t                                ') scale(' + (value / elementWidth) + ', 1) translate(' + (-centerX) + ' ' + (-centerY) + ')');\n\t                        }\n\t                    }\n\t                },\n\t                end: function (model) {\n\t                    element.setAttribute('transform', 'translate(0,0)');\n\t                    var seriesElement = series.seriesElement;\n\t                    if (element === seriesElement.lastElementChild || point.index === series.points.length - 1 ||\n\t                        (series.type === 'Waterfall' && element === seriesElement.children[seriesElement.childElementCount - 2])) {\n\t                        series.chart.trigger('animationComplete', { series: series });\n\t                        if (series.type === 'Waterfall') {\n\t                            var rectElements = seriesElement.childNodes;\n\t                            for (var i = 0; i < rectElements.length; i++) {\n\t                                if (rectElements[i].id.indexOf('Connector') !== -1) {\n\t                                    rectElements[i].style.visibility = 'visible';\n\t                                    rectElements[i].setAttribute('transform', 'translate(0,0)');\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t        };\n\t        ColumnBase.prototype.calculateRoundedRectPath = function (rect, topLeft, topRight, bottomLeft, bottomRight) {\n\t            return 'M' + ' ' + rect.x + ' ' + (topLeft + rect.y) +\n\t                ' Q ' + rect.x + ' ' + rect.y + ' ' + (rect.x + topLeft) + ' ' +\n\t                rect.y + ' ' + 'L' + ' ' + (rect.x + rect.width - topRight) + ' ' + rect.y +\n\t                ' Q ' + (rect.x + rect.width) + ' ' + rect.y + ' ' +\n\t                (rect.x + rect.width) + ' ' + (rect.y + topRight) + ' ' + 'L ' +\n\t                (rect.x + rect.width) + ' ' + (rect.y + rect.height - bottomRight)\n\t                + ' Q ' + (rect.x + rect.width) + ' ' + (rect.y + rect.height) + ' ' + (rect.x + rect.width - bottomRight) + ' ' +\n\t                (rect.y + rect.height) + ' ' + 'L ' + (rect.x + bottomLeft) + ' ' + (rect.y + rect.height) + ' Q ' + rect.x + ' ' +\n\t                (rect.y + rect.height) + ' ' + rect.x + ' ' + (rect.y + rect.height - bottomLeft) + ' ' + 'L' + ' ' + rect.x + ' ' +\n\t                (topLeft + rect.y) + ' ' + 'Z';\n\t        };\n\t        return ColumnBase;\n\t    }());\n\t    exports.ColumnBase = ColumnBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AreaSeries = (function (_super) {\n\t        __extends(AreaSeries, _super);\n\t        function AreaSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        AreaSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var firstPoint;\n\t            var endPoint;\n\t            var startPoint = null;\n\t            var direction = '';\n\t            var pointsLength = series.points.length;\n\t            var origin = series.chart.chartAreaType === 'PolarRadar' ? series.points[0].yValue :\n\t                Math.max(series.yAxis.visibleRange.min, 0);\n\t            var options;\n\t            var point;\n\t            var currentXValue;\n\t            var symbolLocation;\n\t            var getCoordinate = series.chart.chartAreaType === 'PolarRadar' ? helper_1.TransformToVisible : helper_1.getPoint;\n\t            for (var i = 0; i < pointsLength; i++) {\n\t                point = series.points[i];\n\t                currentXValue = point.xValue;\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(series.points[i - 1], point, series.points[i + 1], series)) {\n\t                    if (startPoint === null) {\n\t                        startPoint = new helper_1.ChartLocation(currentXValue, origin);\n\t                        firstPoint = getCoordinate(currentXValue, origin, xAxis, yAxis, isInverted, series);\n\t                        direction += ('M' + ' ' + (firstPoint.x) + ' ' + (firstPoint.y) + ' ');\n\t                    }\n\t                    firstPoint = getCoordinate(currentXValue, point.yValue, xAxis, yAxis, isInverted, series);\n\t                    direction += ('L' + ' ' + (firstPoint.x) + ' ' + (firstPoint.y) + ' ');\n\t                    if (series.points[i + 1] && !series.points[i + 1].visible && series.emptyPointSettings.mode !== 'Drop') {\n\t                        firstPoint = getCoordinate(currentXValue, origin, xAxis, yAxis, isInverted, series);\n\t                        endPoint = getCoordinate(startPoint.x, startPoint.y, xAxis, yAxis, isInverted, series);\n\t                        direction += ('L' + ' ' + (firstPoint.x) + ' ' + (firstPoint.y) + ' ' + 'L' +\n\t                            ' ' + (endPoint.x) + ' ' + (endPoint.y) + ' ');\n\t                        startPoint = null;\n\t                    }\n\t                    symbolLocation = getCoordinate(currentXValue, point.yValue, xAxis, yAxis, isInverted, series);\n\t                    point.symbolLocations.push(symbolLocation);\n\t                    point.regions.push(new helper_1.Rect(symbolLocation.x - series.marker.width, symbolLocation.y - series.marker.height, 2 * series.marker.width, 2 * series.marker.height));\n\t                }\n\t            }\n\t            if (pointsLength > 1) {\n\t                startPoint = {\n\t                    'x': series.points[pointsLength - 1].xValue,\n\t                    'y': series.chart.chartAreaType === 'PolarRadar' ? series.points[pointsLength - 1].yValue : origin\n\t                };\n\t                endPoint = getCoordinate(startPoint.x, startPoint.y, xAxis, yAxis, isInverted, series);\n\t                direction += ('L' + ' ' + (endPoint.x) + ' ' + (endPoint.y) + ' ');\n\t            }\n\t            else {\n\t                direction = '';\n\t            }\n\t            options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index, series.interior, series.border.width, series.border.color, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        AreaSeries.prototype.destroy = function (chart) {\n\t        };\n\t        AreaSeries.prototype.getModuleName = function () {\n\t            return 'AreaSeries';\n\t        };\n\t        AreaSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        return AreaSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.AreaSeries = AreaSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BarSeries = (function (_super) {\n\t        __extends(BarSeries, _super);\n\t        function BarSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        BarSeries.prototype.render = function (series) {\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var rect;\n\t            var argsData;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var pointBar = _a[_i];\n\t                pointBar.symbolLocations = [];\n\t                pointBar.regions = [];\n\t                if (pointBar.visible && helper_1.withInRange(series.points[pointBar.index - 1], pointBar, series.points[pointBar.index + 1], series)) {\n\t                    rect = this.getRectangle(pointBar.xValue + sideBySideInfo.start, pointBar.yValue, pointBar.xValue + sideBySideInfo.end, origin, series);\n\t                    argsData = this.triggerEvent(series, pointBar, series.interior, { width: series.border.width, color: series.border.color });\n\t                    if (!argsData.cancel) {\n\t                        this.updateSymbolLocation(pointBar, rect, series);\n\t                        this.drawRectangle(series, pointBar, rect, argsData);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        BarSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        BarSeries.prototype.destroy = function (chart) {\n\t        };\n\t        BarSeries.prototype.getModuleName = function () {\n\t            return 'BarSeries';\n\t        };\n\t        return BarSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.BarSeries = BarSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(34), __webpack_require__(5), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, polar_radar_panel_1, constants_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PolarSeries = (function (_super) {\n\t        __extends(PolarSeries, _super);\n\t        function PolarSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        PolarSeries.prototype.render = function (series) {\n\t            var seriesType = helper_1.firstToLowerCase(series.drawType);\n\t            if (series.drawType.indexOf('Column') > -1) {\n\t                this.columnDrawTypeRender(series);\n\t            }\n\t            else {\n\t                series.chart[seriesType + 'SeriesModule'].render(series, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t            }\n\t        };\n\t        PolarSeries.prototype.columnDrawTypeRender = function (series) {\n\t            var visiblePoints = series.points;\n\t            var rect;\n\t            var options;\n\t            var argsData;\n\t            var startAngle;\n\t            var endAngle;\n\t            var itemCurrentXPos;\n\t            var radius;\n\t            var pointStartAngle;\n\t            var pointEndAngle;\n\t            var x1;\n\t            var x2;\n\t            var y1;\n\t            var y2;\n\t            var startValue;\n\t            var endValue;\n\t            var innerRadius;\n\t            var centerX = (series.clipRect.width / 2) + series.clipRect.x;\n\t            var dStartX;\n\t            var dStartY;\n\t            var centerY = (series.clipRect.height / 2) + series.clipRect.y;\n\t            var dEndX;\n\t            var dEndY;\n\t            var axisInversed = series.xAxis.isInversed ? 1 : 0;\n\t            var direction = '';\n\t            var sumofYValues = 0;\n\t            var interval = (series.points[1] ? series.points[1].xValue : 2 * series.points[0].xValue) - series.points[0].xValue;\n\t            var ticks = series.xAxis.valueType === 'Category' && series.xAxis.labelPlacement === 'BetweenTicks' ? 0 : interval / 2;\n\t            var rangeInterval = series.xAxis.valueType === 'DateTime' ? series.xAxis.dateTimeInterval : 1;\n\t            var min = series.xAxis.actualRange.min;\n\t            var inversedValue;\n\t            var vector;\n\t            this.getSeriesPosition(series);\n\t            var position = series.xAxis.isInversed ? (series.rectCount - 1 - series.position) : series.position;\n\t            var ticksbwtLabel = series.xAxis.valueType === 'Category' && series.xAxis.labelPlacement === 'BetweenTicks' ? 0.5\n\t                : 0.5 - (series.rectCount / 2);\n\t            do {\n\t                sumofYValues += rangeInterval;\n\t                min += rangeInterval;\n\t            } while (min <= series.xAxis.actualRange.max - (series.xAxis.valueType === 'Category' ? 0 : 1));\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    inversedValue = series.xAxis.isInversed ? (series.xAxis.visibleRange.max - point.xValue) :\n\t                        point.xValue - series.xAxis.visibleRange.min;\n\t                    itemCurrentXPos = (inversedValue) +\n\t                        ((interval / series.rectCount) * position - ticks) + (sumofYValues / 360 * series.xAxis.startAngle);\n\t                    itemCurrentXPos = (((itemCurrentXPos) / (sumofYValues)));\n\t                    startAngle = 2 * Math.PI * (itemCurrentXPos + series.xAxis.startAngle);\n\t                    endAngle = 2 * Math.PI * ((itemCurrentXPos + series.xAxis.startAngle) + (interval / series.rectCount) / (sumofYValues));\n\t                    pointStartAngle = startAngle;\n\t                    pointEndAngle = endAngle;\n\t                    startAngle = (startAngle - 0.5 * Math.PI);\n\t                    endAngle = (endAngle - 0.5 * Math.PI) - 0.000001;\n\t                    if (series.drawType === 'StackingColumn' || series.drawType === 'RangeColumn') {\n\t                        startValue = series.drawType === 'RangeColumn' ? point.low : series.stackedValues.startValues[point.index];\n\t                        endValue = series.drawType === 'RangeColumn' ? point.high : series.stackedValues.endValues[point.index];\n\t                        endValue = (series.yAxis.valueType === 'Logarithmic' ?\n\t                            helper_1.logBase(endValue === 0 ? 1 : endValue, series.yAxis.logBase) : endValue);\n\t                        endValue = endValue > series.yAxis.actualRange.max ? series.yAxis.actualRange.max : endValue;\n\t                        radius = startValue === endValue ? 0 : series.chart.radius * helper_1.valueToCoefficient(endValue, series.yAxis);\n\t                        x1 = centerX + radius * Math.cos(startAngle);\n\t                        x2 = centerX + radius * Math.cos(endAngle);\n\t                        y1 = centerY + radius * Math.sin(startAngle);\n\t                        y2 = centerY + radius * Math.sin(endAngle);\n\t                        innerRadius = series.chart.radius * helper_1.valueToCoefficient((startValue === 0 && series.yAxis.visibleRange.min !== 0) ? series.yAxis.visibleRange.min : startValue, series.yAxis);\n\t                        dStartX = centerX + innerRadius * Math.cos(startAngle);\n\t                        dStartY = centerY + innerRadius * Math.sin(startAngle);\n\t                        dEndX = centerX + innerRadius * Math.cos(endAngle);\n\t                        dEndY = centerY + innerRadius * Math.sin(endAngle);\n\t                        if (series.type === 'Polar') {\n\t                            direction = ('M' + ' ' + x1 + ' ' + y1 + ' ' + 'A' + ' ' + radius + ' ' + radius + ' ' + '0' + ' '\n\t                                + '0' + ' ' + 1 + ' ' + x2 + ' ' + y2 + ' ' + 'L' + ' ' + dEndX + ' ' + dEndY + ' ' +\n\t                                'A' + ' ' + innerRadius + ' ' + innerRadius + ' ' + '1' + ' ' + '0' + ' ' + '0' + ' '\n\t                                + dStartX + ' ' + dStartY + ' ' + 'z');\n\t                        }\n\t                        else {\n\t                            direction = ('M' + ' ' + x1 + ' ' + y1 + ' ' + 'L' + ' ' + x2 + ' ' + y2 + ' ' + 'L'\n\t                                + dEndX + ' ' + dEndY + ' ' + 'L' + ' ' + dStartX + ' ' + dStartY + ' ' + 'z');\n\t                        }\n\t                        point.regionData = new helper_1.PolarArc(pointStartAngle, pointEndAngle, innerRadius, radius, itemCurrentXPos);\n\t                    }\n\t                    else {\n\t                        endValue = point.yValue > series.yAxis.actualRange.max ? series.yAxis.actualRange.max : point.yValue;\n\t                        radius = series.chart.radius * helper_1.valueToCoefficient((series.yAxis.valueType === 'Logarithmic' ? helper_1.logBase(endValue, series.yAxis.logBase) : endValue), series.yAxis);\n\t                        x1 = centerX + radius * Math.cos(startAngle);\n\t                        x2 = centerX + radius * Math.cos(endAngle);\n\t                        y1 = centerY + radius * Math.sin(startAngle);\n\t                        y2 = centerY + radius * Math.sin(endAngle);\n\t                        if (series.type === 'Polar') {\n\t                            direction = ('M' + ' ' + x1 + ' ' + y1 + ' ' + 'A' + ' ' + radius + ' ' + radius + ' ' + '0' + ' ' +\n\t                                '0' + ' ' + 1 + ' ' + x2 + ' ' + y2 + ' ' + 'L' + ' ' + centerX + ' ' +\n\t                                centerY + ' ' + 'z');\n\t                        }\n\t                        else {\n\t                            direction = ('M' + ' ' + x1 + ' ' + y1 + ' ' + 'L' + ' ' + x2 + ' ' + y2 + ' ' + 'L' + ' '\n\t                                + centerX + ' ' + centerY + ' ' + 'z');\n\t                        }\n\t                        point.regionData = new helper_1.PolarArc(pointStartAngle, pointEndAngle, 0, radius, itemCurrentXPos);\n\t                    }\n\t                    argsData = this.triggerEvent(series.chart, series, point);\n\t                    options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index + '_Point_' + point.index, argsData.fill, argsData.border.width, argsData.border.color, series.opacity, series.dashArray, direction);\n\t                    if (!argsData.cancel) {\n\t                        this.appendLinePath(options, series);\n\t                        if (series.type === 'Polar') {\n\t                            vector = helper_1.CoefficientToVector(helper_1.valueToPolarCoefficient((point.xValue + ticksbwtLabel / series.rectCount + series.position / series.rectCount), series.xAxis), series.chart.primaryXAxis.startAngle);\n\t                            point.symbolLocations.push({\n\t                                x: series.clipRect.width / 2 + series.clipRect.x + radius * vector.x,\n\t                                y: series.clipRect.height / 2 + series.clipRect.y + radius * vector.y\n\t                            });\n\t                        }\n\t                        else {\n\t                            point.symbolLocations.push({ x: (x1 + x2) / 2, y: (y1 + y2) / 2 });\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            series.isRectSeries = true;\n\t        };\n\t        PolarSeries.prototype.triggerEvent = function (chart, series, point) {\n\t            var argsData = {\n\t                cancel: false, name: constants_1.pointRender, series: series, point: point,\n\t                fill: series.setPointColor(point, series.interior),\n\t                border: series.setBorderColor(point, { width: series.border.width, color: series.border.color })\n\t            };\n\t            chart.trigger(constants_1.pointRender, argsData);\n\t            point.color = argsData.fill;\n\t            return argsData;\n\t        };\n\t        PolarSeries.prototype.getSeriesPosition = function (series) {\n\t            var chart = series.chart;\n\t            var seriesCollection = [];\n\t            var stackingGroup = [];\n\t            var vSeries = { rectCount: 0, position: null };\n\t            for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                var series_1 = _a[_i];\n\t                if (series_1.visible && (series_1.type === 'Polar' || series_1.type === 'Radar') && series_1.drawType.indexOf('Column') !== -1) {\n\t                    seriesCollection.push(series_1);\n\t                }\n\t            }\n\t            seriesCollection.forEach(function (series) {\n\t                if (series.drawType.indexOf('Stacking') !== -1) {\n\t                    if (series.stackingGroup) {\n\t                        if (stackingGroup[series.stackingGroup] === undefined) {\n\t                            series.position = vSeries.rectCount;\n\t                            stackingGroup[series.stackingGroup] = vSeries.rectCount++;\n\t                        }\n\t                        else {\n\t                            series.position = stackingGroup[series.stackingGroup];\n\t                        }\n\t                    }\n\t                    else {\n\t                        if (vSeries.position === null) {\n\t                            series.position = vSeries.rectCount;\n\t                            vSeries.position = vSeries.rectCount++;\n\t                        }\n\t                        else {\n\t                            series.position = vSeries.position;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    series.position = vSeries.rectCount++;\n\t                }\n\t            });\n\t            seriesCollection.forEach(function (value) {\n\t                value.rectCount = vSeries.rectCount;\n\t            });\n\t        };\n\t        PolarSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            var duration = series.animation.duration;\n\t            var delay = series.animation.delay;\n\t            var rectElements = series.seriesElement.childNodes;\n\t            var count = 1;\n\t            if (series.drawType === 'Scatter') {\n\t                for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                    var point = _a[_i];\n\t                    if (!point.symbolLocations.length || !rectElements[count]) {\n\t                        continue;\n\t                    }\n\t                    helper_1.markerAnimate(rectElements[count], delay, duration, series, point.index, point.symbolLocations[0], false);\n\t                    count++;\n\t                }\n\t            }\n\t            else {\n\t                for (count = 1; count < rectElements.length; count++) {\n\t                    this.doPolarRadarAnimation(rectElements[count], delay, duration, series);\n\t                }\n\t            }\n\t        };\n\t        PolarSeries.prototype.doPolarRadarAnimation = function (animateElement, delay, duration, series) {\n\t            var chartcenterX = series.clipRect.width / 2 + series.clipRect.x;\n\t            var chartcenterY = series.clipRect.height / 2 + series.clipRect.y;\n\t            var elementHeight = 0;\n\t            animateElement.style.visibility = 'hidden';\n\t            new ej2_base_1.Animation({}).animate(animateElement, {\n\t                duration: duration,\n\t                delay: delay,\n\t                progress: function (args) {\n\t                    if (args.timeStamp > args.delay) {\n\t                        args.element.style.visibility = 'visible';\n\t                        elementHeight = ((args.timeStamp - args.delay) / args.duration);\n\t                        animateElement.setAttribute('transform', 'translate(' + chartcenterX\n\t                            + ' ' + chartcenterY + ') scale(' + elementHeight + ') translate(' + (-chartcenterX) + ' ' + (-chartcenterY) + ')');\n\t                    }\n\t                },\n\t                end: function (model) {\n\t                    animateElement.style.visibility = 'visible';\n\t                    animateElement.removeAttribute('transform');\n\t                    series.chart.trigger('animationComplete', { series: series });\n\t                }\n\t            });\n\t        };\n\t        PolarSeries.prototype.getModuleName = function () {\n\t            return 'PolarSeries';\n\t        };\n\t        PolarSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return PolarSeries;\n\t    }(polar_radar_panel_1.PolarRadarPanel));\n\t    exports.PolarSeries = PolarSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(28), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, line_base_1, helper_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var axisPadding = 10;\n\t    var PolarRadarPanel = (function (_super) {\n\t        __extends(PolarRadarPanel, _super);\n\t        function PolarRadarPanel() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        PolarRadarPanel.prototype.measureAxis = function (rect) {\n\t            var chart = this.chart;\n\t            this.initialClipRect = rect;\n\t            this.seriesClipRect = new helper_2.Rect(rect.x, rect.y, rect.width, rect.height);\n\t            this.measureRowAxis(chart, this.initialClipRect);\n\t            this.measureColumnAxis(chart, this.initialClipRect);\n\t            this.calculateAxisSize();\n\t        };\n\t        PolarRadarPanel.prototype.measureRowAxis = function (chart, rect) {\n\t            this.calculateRowSize(rect);\n\t            var row = chart.rows[0];\n\t            this.measureDefinition(row, chart, new helper_2.Size(chart.availableSize.width, row.computedHeight), rect);\n\t        };\n\t        PolarRadarPanel.prototype.measureColumnAxis = function (chart, rect) {\n\t            this.calculateColumnSize(rect);\n\t            var column = chart.columns[0];\n\t            this.measureDefinition(column, chart, new helper_2.Size(column.computedWidth, chart.availableSize.height), rect);\n\t        };\n\t        PolarRadarPanel.prototype.measureDefinition = function (definition, chart, size, clipRect) {\n\t            for (var _i = 0, _a = definition.axes; _i < _a.length; _i++) {\n\t                var axis = _a[_i];\n\t                axis.getModule(chart);\n\t                axis.baseModule.calculateRangeAndInterval(size, axis);\n\t            }\n\t        };\n\t        PolarRadarPanel.prototype.calculateAxisSize = function () {\n\t            var chart = this.chart;\n\t            var axis;\n\t            var padding = 5;\n\t            this.centerX = this.initialClipRect.width * 0.5 + this.initialClipRect.x;\n\t            this.centerY = this.initialClipRect.height * 0.5 + this.initialClipRect.y;\n\t            chart.radius = Math.min(this.initialClipRect.width, this.initialClipRect.height) / 2 - padding -\n\t                chart.primaryXAxis.majorTickLines.height - chart.primaryXAxis.maxLabelSize.height;\n\t            chart.radius = (chart.primaryXAxis.coefficient * chart.radius) / 100;\n\t            this.seriesClipRect.y = this.centerY - chart.radius;\n\t            this.seriesClipRect.x = this.centerX - chart.radius;\n\t            this.seriesClipRect.height = 2 * chart.radius;\n\t            this.seriesClipRect.width = 2 * chart.radius;\n\t            this.calculateRowSize(this.seriesClipRect);\n\t            axis = chart.primaryYAxis;\n\t            axis.rect = this.seriesClipRect;\n\t            this.calculateColumnSize(this.seriesClipRect);\n\t            axis = chart.primaryXAxis;\n\t            axis.rect = this.seriesClipRect;\n\t        };\n\t        PolarRadarPanel.prototype.measure = function () {\n\t            var chart = this.chart;\n\t            chart.verticalAxes.push(chart.primaryYAxis);\n\t            var row = chart.rows[0];\n\t            row.axes[0] = chart.primaryYAxis;\n\t            chart.rows[0] = row;\n\t            chart.horizontalAxes.push(chart.primaryXAxis);\n\t            var column = chart.columns[0];\n\t            column.axes[0] = chart.primaryXAxis;\n\t            chart.columns[0] = column;\n\t        };\n\t        PolarRadarPanel.prototype.calculateRowSize = function (rect) {\n\t            var chart = this.chart;\n\t            var row = chart.rows[0];\n\t            row.computedHeight = rect.height / 2;\n\t            row.computedTop = rect.y;\n\t            chart.rows[0] = row;\n\t        };\n\t        PolarRadarPanel.prototype.calculateColumnSize = function (rect) {\n\t            var chart = this.chart;\n\t            var column = chart.columns[0];\n\t            column.computedLeft = rect.x;\n\t            column.computedWidth = rect.width;\n\t            chart.columns[0] = column;\n\t        };\n\t        PolarRadarPanel.prototype.renderAxes = function () {\n\t            var axis;\n\t            var chart = this.chart;\n\t            this.startAngle = chart.primaryXAxis.startAngle;\n\t            var axisElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisCollection' });\n\t            for (var i = 0, len = chart.axisCollections.length; i < len; i++) {\n\t                this.element = chart.renderer.createGroup({ id: chart.element.id + 'AxisGroup' + i });\n\t                axis = chart.axisCollections[i];\n\t                if (axis.orientation === 'Horizontal') {\n\t                    if (axis.majorGridLines.width > 0 || axis.majorTickLines.width > 0) {\n\t                        this.drawXAxisGridLine(axis, i);\n\t                    }\n\t                    if (axis.visible) {\n\t                        this.drawXAxisLabels(axis, i);\n\t                    }\n\t                }\n\t                else {\n\t                    this.drawYAxisGridLine(axis, i);\n\t                    if (axis.lineStyle.width > 0) {\n\t                        this.drawYAxisLine(axis, i, axis.plotOffset, 0);\n\t                    }\n\t                    if (axis.visible) {\n\t                        this.drawYAxisLabels(axis, i);\n\t                    }\n\t                }\n\t                axisElement.appendChild(this.element);\n\t            }\n\t            axisElement.appendChild(this.element);\n\t            chart.svgObject.appendChild(axisElement);\n\t        };\n\t        PolarRadarPanel.prototype.drawYAxisLine = function (axis, index, plotX, plotY) {\n\t            var chart = this.chart;\n\t            var optionsLine = {};\n\t            var vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n\t            var axisLine = 'M ' + this.centerX + ' ' + this.centerY + 'L ' +\n\t                (this.centerX + chart.radius * vector.x) + ' ' + (this.centerY + chart.radius * vector.y);\n\t            optionsLine = {\n\t                'id': chart.element.id + 'AxisLine_' + index,\n\t                'd': axisLine,\n\t                'stroke-dasharray': axis.lineStyle.dashArray,\n\t                'stroke-width': axis.lineStyle.width,\n\t                'stroke': axis.lineStyle.color\n\t            };\n\t            chart.yAxisElements.appendChild(chart.renderer.drawPath(optionsLine));\n\t        };\n\t        PolarRadarPanel.prototype.drawYAxisLabels = function (axis, index) {\n\t            var chart = this.chart;\n\t            var elementSize;\n\t            var options;\n\t            var pointX = 0;\n\t            var pointY = 0;\n\t            var vector;\n\t            var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n\t            var anchor = 'middle';\n\t            var radius;\n\t            var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n\t            vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n\t            for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n\t                radius = chart.radius * helper_1.valueToCoefficient(axis.visibleLabels[i].value, axis);\n\t                elementSize = axis.visibleLabels[i].size;\n\t                radius = chart.radius * helper_1.valueToCoefficient(axis.visibleLabels[i].value, axis);\n\t                pointX = (this.centerX + radius * vector.x) -\n\t                    (axis.majorTickLines.height + elementSize.width / 2) * (Math.cos(angle * Math.PI / 180));\n\t                pointY = (this.centerY + radius * vector.y) -\n\t                    (axis.majorTickLines.height + elementSize.height / 2) * (Math.sin(angle * Math.PI / 180));\n\t                options = new helper_1.TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY + (elementSize.height / 4), anchor, axis.visibleLabels[i].text);\n\t                helper_3.textElement(options, axis.labelStyle, axis.labelStyle.color, labelElement);\n\t            }\n\t            chart.yAxisElements.appendChild(labelElement);\n\t        };\n\t        PolarRadarPanel.prototype.drawYAxisGridLine = function (axis, index) {\n\t            var chart = this.chart;\n\t            var options;\n\t            var radius;\n\t            var majorTick = '';\n\t            var majorGrid = '';\n\t            var vector;\n\t            var vector2;\n\t            var angle = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle;\n\t            var rect = axis.rect;\n\t            var x1;\n\t            var y1;\n\t            var x2;\n\t            var y2;\n\t            if (axis.majorGridLines.width > 0) {\n\t                if (chart.visibleSeries[0].type === 'Polar') {\n\t                    for (var j = 0; j < axis.visibleLabels.length; j++) {\n\t                        radius = chart.radius * helper_1.valueToCoefficient(axis.visibleLabels[j].value, axis);\n\t                        options = new helper_2.CircleOption(chart.element.id + '_MajorGridLine_' + index, 'transparent', axis.majorGridLines, axis.majorGridLines.width, this.centerX, this.centerY, radius);\n\t                        this.element.appendChild(chart.renderer.drawCircle(options));\n\t                    }\n\t                }\n\t                else {\n\t                    for (var j = 0; j < axis.visibleLabels.length; j++) {\n\t                        radius = chart.radius * helper_1.valueToCoefficient(axis.visibleLabels[j].value, axis);\n\t                        for (var i = 0, len = chart.primaryXAxis.visibleLabels.length; i < len; i++) {\n\t                            vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i].value, chart.primaryXAxis), this.startAngle);\n\t                            if (i + 1 < len) {\n\t                                vector2 = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[i + 1].value, chart.primaryXAxis), this.startAngle);\n\t                            }\n\t                            else {\n\t                                vector2 = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(chart.primaryXAxis.visibleLabels[0].value, chart.primaryXAxis), this.startAngle);\n\t                            }\n\t                            x1 = this.centerX + radius * vector.x;\n\t                            y1 = this.centerY + radius * vector.y;\n\t                            x2 = this.centerX + radius * vector2.x;\n\t                            y2 = this.centerY + radius * vector2.y;\n\t                            majorGrid = majorGrid.concat('M' + ' ' + x1 + ' ' + y1 + ' ' + 'L' + ' ' + x2 + ' ' + y2 + ' ');\n\t                        }\n\t                    }\n\t                    options = new helper_2.PathOption(chart.element.id + '_MajorGridLine_' + index, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color, null, null, majorGrid);\n\t                    this.element.appendChild(chart.renderer.drawPath(options));\n\t                }\n\t            }\n\t            if (axis.majorTickLines.width > 0) {\n\t                vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(axis.visibleLabels[0].value, axis), this.startAngle);\n\t                for (var i = 0; i < axis.visibleLabels.length; i++) {\n\t                    radius = chart.radius * helper_1.valueToCoefficient(axis.visibleLabels[i].value, axis);\n\t                    x1 = this.centerX + radius * vector.x;\n\t                    y1 = this.centerY + radius * vector.y;\n\t                    x2 = x1 - axis.majorTickLines.height * (Math.cos(angle * Math.PI / 180));\n\t                    y2 = y1 - axis.majorTickLines.height * (Math.sin(angle * Math.PI / 180));\n\t                    majorTick = majorTick.concat('M ' + x1 + ' ' + y1 +\n\t                        ' L ' + x2 + ' ' + y2 + ' ');\n\t                }\n\t            }\n\t            this.renderTickLine(axis, index, majorTick, '');\n\t        };\n\t        PolarRadarPanel.prototype.drawXAxisGridLine = function (axis, index) {\n\t            var chart = this.chart;\n\t            var tempInterval;\n\t            var vector;\n\t            var majorGrid = '';\n\t            var majorTick = '';\n\t            var minorGirdLine = '';\n\t            var minorTickLine = '';\n\t            var x1 = this.centerX;\n\t            var x2;\n\t            var y1 = this.centerY;\n\t            var y2;\n\t            var minorDirection;\n\t            var tickSize = axis.majorTickLines.height;\n\t            var rect = axis.rect;\n\t            var length = axis.visibleLabels.length;\n\t            for (var i = 0; i < length; i++) {\n\t                tempInterval = axis.visibleLabels[i].value;\n\t                vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(axis.visibleLabels[i].value, axis), this.startAngle);\n\t                x2 = this.centerX + chart.radius * vector.x;\n\t                y2 = this.centerY + chart.radius * vector.y;\n\t                majorGrid = majorGrid.concat('M ' + x1 + ' ' + y1 + ' ' + 'L' + x2 + ' ' + y2);\n\t                majorTick = majorTick.concat('M ' + x2 + ' ' + y2 +\n\t                    ' L ' + (x2 + axis.majorTickLines.height * vector.x) + ' ' + (y2 + axis.majorTickLines.height * vector.y) + ' ');\n\t                if (axis.minorTicksPerInterval > 0 && (axis.minorGridLines.width > 0 || axis.minorTickLines.width > 0)\n\t                    && axis.valueType !== 'Category' && chart.visibleSeries[0].type !== 'Radar') {\n\t                    minorDirection = this.drawAxisMinorLine(axis, tempInterval, minorGirdLine, minorTickLine);\n\t                    minorGirdLine = minorDirection[0];\n\t                    minorTickLine = minorDirection[1];\n\t                }\n\t            }\n\t            this.renderTickLine(axis, index, majorTick, minorTickLine);\n\t            this.renderGridLine(axis, index, majorGrid, minorGirdLine);\n\t        };\n\t        PolarRadarPanel.prototype.drawAxisMinorLine = function (axis, tempInterval, minorGird, minorTick) {\n\t            var value = tempInterval;\n\t            var x;\n\t            var y;\n\t            var vector;\n\t            var range = axis.visibleRange;\n\t            var direction = [];\n\t            var tickSize = axis.minorTickLines.height;\n\t            var rect = axis.rect;\n\t            for (var j = 0; j < axis.minorTicksPerInterval; j++) {\n\t                value += (axis.valueType === 'DateTime' ? axis.dateTimeInterval : axis.visibleRange.interval) /\n\t                    (axis.minorTicksPerInterval + 1);\n\t                if (helper_1.inside(value, range)) {\n\t                    vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(value, axis), this.startAngle);\n\t                    x = this.centerX + this.chart.radius * vector.x;\n\t                    y = this.centerY + this.chart.radius * vector.y;\n\t                    minorGird = minorGird.concat('M' + ' ' + this.centerX + ' ' + this.centerY\n\t                        + 'L ' + x + ' ' + y);\n\t                    minorTick = minorTick.concat('M' + ' ' + x + ' ' + y + 'L' + ' ' + (x + axis.minorTickLines.height * vector.x) + ' ' +\n\t                        (y + (axis.minorTickLines.height * vector.y)));\n\t                }\n\t            }\n\t            direction.push(minorGird);\n\t            direction.push(minorTick);\n\t            return direction;\n\t        };\n\t        PolarRadarPanel.prototype.drawXAxisLabels = function (axis, index) {\n\t            var chart = this.chart;\n\t            var pointX = 0;\n\t            var elementSize;\n\t            var pointY = 0;\n\t            var labelElement = chart.renderer.createGroup({ id: chart.element.id + 'AxisLabels' + index });\n\t            var options;\n\t            var vector;\n\t            var labelText;\n\t            var firstLabelX;\n\t            var padding = 5;\n\t            var lastLabelX;\n\t            var textAnchor = '';\n\t            var ticksbwtLabel = axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks'\n\t                && chart.visibleSeries[0].type !== 'Radar' ? 0.5 : 0;\n\t            var radius = chart.radius + axis.majorTickLines.height;\n\t            for (var i = 0, len = axis.visibleLabels.length; i < len; i++) {\n\t                vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient(axis.visibleLabels[i].value + ticksbwtLabel, axis), this.startAngle);\n\t                if (!isNaN(vector.x) && !isNaN(vector.y)) {\n\t                    pointX = this.centerX + (radius + axis.majorTickLines.height + padding) * vector.x;\n\t                    pointY = this.centerY + (radius + axis.majorTickLines.height + padding) * vector.y;\n\t                    textAnchor = parseFloat(pointX.toFixed(1)) === parseFloat(this.centerX.toFixed(1)) ? 'middle' :\n\t                        (pointX < this.centerX) ? 'end' : 'start';\n\t                }\n\t                labelText = axis.visibleLabels[i].text;\n\t                if (i === 0) {\n\t                    firstLabelX = pointX;\n\t                }\n\t                else if (i === axis.visibleLabels.length - 1 && axis.valueType !== 'Category') {\n\t                    lastLabelX = helper_1.measureText(labelText, axis.labelStyle).height;\n\t                    lastLabelX += pointX;\n\t                    labelText = (lastLabelX > firstLabelX) ? '' : labelText;\n\t                }\n\t                options = new helper_1.TextOption(chart.element.id + index + '_AxisLabel_' + i, pointX, pointY, textAnchor, labelText, '', 'central');\n\t                helper_3.textElement(options, axis.labelStyle, axis.labelStyle.color, labelElement);\n\t            }\n\t            this.element.appendChild(labelElement);\n\t        };\n\t        PolarRadarPanel.prototype.renderTickLine = function (axis, index, majorTickLine, minorTickLine) {\n\t            var tickOptions;\n\t            var chart = this.chart;\n\t            if (axis.majorTickLines.width > 0) {\n\t                tickOptions = new helper_2.PathOption(chart.element.id + '_MajorTickLine_' + index, 'transparent', axis.majorTickLines.width, axis.majorTickLines.color, null, null, majorTickLine);\n\t                chart.yAxisElements.appendChild(chart.renderer.drawPath(tickOptions));\n\t            }\n\t            if (axis.minorTickLines.width > 0) {\n\t                tickOptions = new helper_2.PathOption(chart.element.id + '_MinorTickLine_' + index, 'transparent', axis.minorTickLines.width, axis.minorTickLines.color, null, null, minorTickLine);\n\t                chart.yAxisElements.appendChild(chart.renderer.drawPath(tickOptions));\n\t            }\n\t        };\n\t        PolarRadarPanel.prototype.renderGridLine = function (axis, index, majorGrid, minorGird) {\n\t            var chart = this.chart;\n\t            var gridOptions;\n\t            if (axis.majorGridLines.width > 0) {\n\t                gridOptions = new helper_2.PathOption(chart.element.id + '_MajorGridLine_' + index, 'transparent', axis.majorGridLines.width, axis.majorGridLines.color, null, axis.majorGridLines.dashArray, majorGrid);\n\t                this.element.appendChild(chart.renderer.drawPath(gridOptions));\n\t            }\n\t            if (axis.minorGridLines.width > 0) {\n\t                gridOptions = new helper_2.PathOption(chart.element.id + '_MinorGridLine_' + index, 'transparent', axis.minorGridLines.width, axis.minorGridLines.color, null, axis.minorGridLines.dashArray, minorGird);\n\t                this.element.appendChild(chart.renderer.drawPath(gridOptions));\n\t            }\n\t        };\n\t        return PolarRadarPanel;\n\t    }(line_base_1.LineBase));\n\t    exports.PolarRadarPanel = PolarRadarPanel;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(33)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, polar_series_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RadarSeries = (function (_super) {\n\t        __extends(RadarSeries, _super);\n\t        function RadarSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        RadarSeries.prototype.render = function (series) {\n\t            var seriesType = helper_1.firstToLowerCase(series.drawType);\n\t            if (series.drawType.indexOf('Column') === -1) {\n\t                series.chart[seriesType + 'SeriesModule'].render(series, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t            }\n\t            else {\n\t                this.columnDrawTypeRender(series);\n\t            }\n\t        };\n\t        RadarSeries.prototype.getModuleName = function () {\n\t            return 'RadarSeries';\n\t        };\n\t        RadarSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return RadarSeries;\n\t    }(polar_series_1.PolarSeries));\n\t    exports.RadarSeries = RadarSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackingBarSeries = (function (_super) {\n\t        __extends(StackingBarSeries, _super);\n\t        function StackingBarSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StackingBarSeries.prototype.render = function (series) {\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var stackedValue = series.stackedValues;\n\t            var rect;\n\t            var argsData;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var pointStack = _a[_i];\n\t                pointStack.symbolLocations = [];\n\t                pointStack.regions = [];\n\t                if (pointStack.visible && helper_1.withInRange(series.points[pointStack.index - 1], pointStack, series.points[pointStack.index + 1], series)) {\n\t                    rect = this.getRectangle(pointStack.xValue + sideBySideInfo.start, stackedValue.endValues[pointStack.index], pointStack.xValue + sideBySideInfo.end, stackedValue.startValues[pointStack.index], series);\n\t                    argsData = this.triggerEvent(series, pointStack, series.interior, { width: series.border.width, color: series.border.color });\n\t                    if (!argsData.cancel) {\n\t                        this.drawRectangle(series, pointStack, rect, argsData);\n\t                        this.updateSymbolLocation(pointStack, rect, series);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        StackingBarSeries.prototype.destroy = function (chart) {\n\t        };\n\t        StackingBarSeries.prototype.getModuleName = function () {\n\t            return 'StackingBarSeries';\n\t        };\n\t        StackingBarSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        return StackingBarSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.StackingBarSeries = StackingBarSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var CandleSeries = (function (_super) {\n\t        __extends(CandleSeries, _super);\n\t        function CandleSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        CandleSeries.prototype.render = function (series) {\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var argsData;\n\t            var borderWidth = Math.max(series.border.width, 1);\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                var direction = '';\n\t                var centerRegion = void 0;\n\t                var tickRegion = void 0;\n\t                var midPoint = void 0;\n\t                midPoint = (sideBySideInfo.start + sideBySideInfo.end) / 2;\n\t                point.regions = [];\n\t                point.symbolLocations = [];\n\t                if (point.visible && helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    tickRegion = this.getRectangle((point.xValue + sideBySideInfo.median), Math.max(point.high, point.low), (point.xValue + sideBySideInfo.median), Math.min(point.high, point.low), series);\n\t                    if (!series.chart.requireInvertedAxis) {\n\t                        tickRegion.x -= borderWidth / 2;\n\t                        tickRegion.width = borderWidth;\n\t                    }\n\t                    else {\n\t                        tickRegion.y -= borderWidth / 2;\n\t                        tickRegion.height = borderWidth;\n\t                    }\n\t                    centerRegion = this.getRectangle((point.xValue + sideBySideInfo.start), Math.max(point.open, point.close), (point.xValue + sideBySideInfo.end), Math.min(point.open, point.close), series);\n\t                    direction = this.getPathString(tickRegion, centerRegion, series);\n\t                    argsData = this.triggerPointRenderEvent(series, point);\n\t                    if (!argsData.cancel) {\n\t                        this.drawCandle(series, point, centerRegion, argsData, direction);\n\t                        this.updateSymbolLocation(point, tickRegion, series);\n\t                        this.updateSymbolLocation(point, centerRegion, series);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        CandleSeries.prototype.triggerPointRenderEvent = function (series, point) {\n\t            var fill;\n\t            fill = this.getCandleColor(point, series);\n\t            var border = { color: series.border.color, width: Math.max(series.border.width, 1) };\n\t            return this.triggerEvent(series, point, fill, border);\n\t        };\n\t        CandleSeries.prototype.getCandleColor = function (point, series) {\n\t            var currentPoint = point;\n\t            var previousPoint = series.points[point.index - 1];\n\t            if (series.enableSolidCandles === false) {\n\t                if (!previousPoint) {\n\t                    return series.bearFillColor;\n\t                }\n\t                else {\n\t                    return previousPoint.close > point.close ? series.bullFillColor :\n\t                        series.bearFillColor;\n\t                }\n\t            }\n\t            else {\n\t                return point.open > point.close ? series.bullFillColor :\n\t                    series.bearFillColor;\n\t            }\n\t        };\n\t        CandleSeries.prototype.getPathString = function (topRect, midRect, series) {\n\t            var direction = '';\n\t            var width = series.chart.requireInvertedAxis ? topRect.height : topRect.width;\n\t            var center = series.chart.requireInvertedAxis ? topRect.y + topRect.height / 2 :\n\t                topRect.x + topRect.width / 2;\n\t            direction += !series.chart.requireInvertedAxis ?\n\t                'M' + ' ' + (center) + ' ' + (topRect.y) + ' ' + 'L' + ' ' + (center) + ' ' + midRect.y :\n\t                'M' + ' ' + (topRect.x) + ' ' + (center) + ' ' + 'L' + ' ' + (midRect.x) + ' ' + center;\n\t            direction = direction.concat(' M' + ' ' + (midRect.x) + ' ' + (midRect.y) + ' ' +\n\t                'L' + ' ' + (midRect.x + midRect.width) + ' ' + (midRect.y) + ' ' +\n\t                'L' + ' ' + (midRect.x + midRect.width) + ' ' +\n\t                (midRect.y + midRect.height) + ' ' +\n\t                'L' + ' ' + (midRect.x) + ' ' + (midRect.y + midRect.height) +\n\t                ' ' + 'Z');\n\t            direction += !series.chart.requireInvertedAxis ?\n\t                ' M' + ' ' + (center) + ' ' + (midRect.y + midRect.height) + ' ' + 'L' + ' ' + (center) + ' ' + (topRect.y +\n\t                    topRect.height) :\n\t                ' M' + ' ' + (midRect.x + midRect.width) + ' ' + (center) + ' ' + 'L' + ' ' +\n\t                    (topRect.x + topRect.width) + ' ' + center;\n\t            return direction;\n\t        };\n\t        CandleSeries.prototype.drawCandle = function (series, point, rect, argsData, direction) {\n\t            var check = series.chart.requireInvertedAxis ? rect.height : rect.width;\n\t            if (check <= 0) {\n\t                return null;\n\t            }\n\t            var fill = !series.enableSolidCandles ?\n\t                (point.open > point.close ? argsData.fill : 'transparent') : argsData.fill;\n\t            argsData.border.color = argsData.fill;\n\t            var options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index + '_Point_' + point.index, fill, argsData.border.width, argsData.border.color, series.opacity, series.dashArray, direction);\n\t            var candleElement = series.chart.renderer.drawPath(options);\n\t            candleElement.setAttribute('aria-label', point.x.toString() + ':' + point.high.toString()\n\t                + ':' + point.low.toString() + ':' + point.close.toString() + ':' + point.open.toString());\n\t            series.seriesElement.appendChild(candleElement);\n\t        };\n\t        CandleSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        CandleSeries.prototype.getModuleName = function () {\n\t            return 'CandleSeries';\n\t        };\n\t        CandleSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return CandleSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.CandleSeries = CandleSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackingColumnSeries = (function (_super) {\n\t        __extends(StackingColumnSeries, _super);\n\t        function StackingColumnSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StackingColumnSeries.prototype.render = function (series) {\n\t            series.isRectSeries = true;\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var rect;\n\t            var argsData;\n\t            var stackedValue = series.stackedValues;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    rect = this.getRectangle(point.xValue + sideBySideInfo.start, stackedValue.endValues[point.index], point.xValue + sideBySideInfo.end, stackedValue.startValues[point.index], series);\n\t                    argsData = this.triggerEvent(series, point, series.interior, { width: series.border.width, color: series.border.color });\n\t                    if (!argsData.cancel) {\n\t                        this.drawRectangle(series, point, rect, argsData);\n\t                        this.updateSymbolLocation(point, rect, series);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        StackingColumnSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        StackingColumnSeries.prototype.destroy = function (chart) {\n\t        };\n\t        StackingColumnSeries.prototype.getModuleName = function () {\n\t            return 'StackingColumnSeries';\n\t        };\n\t        return StackingColumnSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.StackingColumnSeries = StackingColumnSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StepLineSeries = (function (_super) {\n\t        __extends(StepLineSeries, _super);\n\t        function StepLineSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StepLineSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var direction = '';\n\t            var startPoint = 'M';\n\t            var prevPoint = null;\n\t            var pathOptions;\n\t            var lineLength;\n\t            var point1;\n\t            var point2;\n\t            var visiblePoints = this.improveChartPerformance(series);\n\t            if (xAxis.valueType === 'Category' && xAxis.labelPlacement === 'BetweenTicks') {\n\t                lineLength = 0.5;\n\t            }\n\t            else {\n\t                lineLength = 0;\n\t            }\n\t            for (var _i = 0, visiblePoints_1 = visiblePoints; _i < visiblePoints_1.length; _i++) {\n\t                var point = visiblePoints_1[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(visiblePoints[point.index - 1], point, visiblePoints[point.index + 1], series)) {\n\t                    if (prevPoint != null) {\n\t                        point2 = helper_1.getPoint(point.xValue, point.yValue, xAxis, yAxis, isInverted);\n\t                        point1 = helper_1.getPoint(prevPoint.xValue, prevPoint.yValue, xAxis, yAxis, isInverted);\n\t                        direction = direction.concat(startPoint + ' ' + (point1.x) + ' ' + (point1.y) + ' ' + 'L' + ' ' +\n\t                            (point2.x) + ' ' + (point1.y) + 'L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t                        startPoint = 'L';\n\t                    }\n\t                    else {\n\t                        point1 = helper_1.getPoint(point.xValue - lineLength, point.yValue, xAxis, yAxis, isInverted);\n\t                        direction = direction.concat(startPoint + ' ' + (point1.x) + ' ' + (point1.y) + ' ');\n\t                        startPoint = 'L';\n\t                    }\n\t                    point.symbolLocations.push(helper_1.getPoint(point.xValue, point.yValue, xAxis, yAxis, isInverted));\n\t                    prevPoint = point;\n\t                    point.regions.push(new helper_1.Rect(point.symbolLocations[0].x - series.marker.width, point.symbolLocations[0].y - series.marker.height, 2 * series.marker.width, 2 * series.marker.height));\n\t                }\n\t                else {\n\t                    prevPoint = series.emptyPointSettings.mode === 'Drop' ? prevPoint : null;\n\t                    startPoint = series.emptyPointSettings.mode === 'Drop' ? startPoint : 'M';\n\t                }\n\t            }\n\t            point1 = helper_1.getPoint(visiblePoints[visiblePoints.length - 1].xValue + lineLength, visiblePoints[visiblePoints.length - 1].yValue, xAxis, yAxis, isInverted);\n\t            direction = direction.concat(startPoint + ' ' + (point1.x) + ' ' + (point1.y) + ' ');\n\t            pathOptions = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index, 'transparent', series.width, series.interior, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(pathOptions, series);\n\t            this.renderMarker(series);\n\t        };\n\t        StepLineSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        StepLineSeries.prototype.destroy = function (chart) {\n\t        };\n\t        StepLineSeries.prototype.getModuleName = function () {\n\t            return 'StepLineSeries';\n\t        };\n\t        return StepLineSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.StepLineSeries = StepLineSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StepAreaSeries = (function (_super) {\n\t        __extends(StepAreaSeries, _super);\n\t        function StepAreaSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StepAreaSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var currentPoint;\n\t            var secondPoint;\n\t            var start = null;\n\t            var direction = '';\n\t            var pointsLength = series.points.length;\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var options;\n\t            var point;\n\t            var xValue;\n\t            var lineLength;\n\t            var prevPoint = null;\n\t            if (xAxis.valueType === 'Category' && xAxis.labelPlacement === 'BetweenTicks') {\n\t                lineLength = 0.5;\n\t            }\n\t            else {\n\t                lineLength = 0;\n\t            }\n\t            for (var i = 0; i < pointsLength; i++) {\n\t                point = series.points[i];\n\t                xValue = point.xValue;\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(series.points[i - 1], point, series.points[i + 1], series)) {\n\t                    if (start === null) {\n\t                        start = new helper_1.ChartLocation(xValue, 0);\n\t                        currentPoint = helper_1.getPoint(xValue - lineLength, origin, xAxis, yAxis, isInverted);\n\t                        direction += ('M' + ' ' + (currentPoint.x) + ' ' + (currentPoint.y) + ' ');\n\t                        currentPoint = helper_1.getPoint(xValue - lineLength, point.yValue - lineLength, xAxis, yAxis, isInverted);\n\t                        direction += ('L' + ' ' + (currentPoint.x) + ' ' + (currentPoint.y) + ' ');\n\t                    }\n\t                    if (prevPoint != null) {\n\t                        currentPoint = helper_1.getPoint(point.xValue, point.yValue, xAxis, yAxis, isInverted);\n\t                        secondPoint = helper_1.getPoint(prevPoint.xValue, prevPoint.yValue, xAxis, yAxis, isInverted);\n\t                        direction += ('L' + ' ' +\n\t                            (currentPoint.x) + ' ' + (secondPoint.y) + 'L' + ' ' + (currentPoint.x) + ' ' + (currentPoint.y) + ' ');\n\t                    }\n\t                    else if (series.emptyPointSettings.mode === 'Gap') {\n\t                        currentPoint = helper_1.getPoint(point.xValue + lineLength, point.yValue, xAxis, yAxis, isInverted);\n\t                        direction += 'L' + ' ' + (currentPoint.x) + ' ' + (currentPoint.y) + ' ';\n\t                    }\n\t                    point.symbolLocations.push(helper_1.getPoint(xValue, point.yValue, xAxis, yAxis, isInverted));\n\t                    point.regions.push(new helper_1.Rect(point.symbolLocations[0].x - series.marker.width, point.symbolLocations[0].y - series.marker.height, 2 * series.marker.width, 2 * series.marker.height));\n\t                    prevPoint = point;\n\t                }\n\t                if (series.points[i + 1] && !series.points[i + 1].visible && series.emptyPointSettings.mode !== 'Drop') {\n\t                    currentPoint = helper_1.getPoint(xValue + lineLength, origin, xAxis, yAxis, isInverted);\n\t                    direction += ('L' + ' ' + (currentPoint.x) + ' ' + (currentPoint.y));\n\t                    start = null;\n\t                    prevPoint = null;\n\t                }\n\t            }\n\t            if (pointsLength > 1) {\n\t                start = { 'x': series.points[pointsLength - 1].xValue + lineLength, 'y': series.points[pointsLength - 1].yValue };\n\t                secondPoint = helper_1.getPoint(start.x, start.y, xAxis, yAxis, isInverted);\n\t                direction += ('L' + ' ' + (secondPoint.x) + ' ' + (secondPoint.y) + ' ');\n\t                start = { 'x': series.points[pointsLength - 1].xValue + lineLength, 'y': origin };\n\t                secondPoint = helper_1.getPoint(start.x, start.y, xAxis, yAxis, isInverted);\n\t                direction += ('L' + ' ' + (secondPoint.x) + ' ' + (secondPoint.y) + ' ');\n\t            }\n\t            options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index, series.interior, series.border.width, series.border.color, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        StepAreaSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        StepAreaSeries.prototype.destroy = function (chart) {\n\t        };\n\t        StepAreaSeries.prototype.getModuleName = function () {\n\t            return 'StepAreaSeries';\n\t        };\n\t        return StepAreaSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.StepAreaSeries = StepAreaSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StackingAreaSeries = (function (_super) {\n\t        __extends(StackingAreaSeries, _super);\n\t        function StackingAreaSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StackingAreaSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var getCoordinate = series.chart.chartAreaType === 'PolarRadar' ? helper_1.TransformToVisible : helper_1.getPoint;\n\t            var lineDirection = '';\n\t            var visiblePoints = series.points;\n\t            var pointsLength = visiblePoints.length;\n\t            var stackedvalue = series.stackedValues;\n\t            var origin = series.chart.chartAreaType === 'PolarRadar' ?\n\t                Math.max(series.yAxis.visibleRange.min, stackedvalue.endValues[0]) :\n\t                Math.max(series.yAxis.visibleRange.min, stackedvalue.startValues[0]);\n\t            var border = series.border;\n\t            var options;\n\t            var startPoint = 0;\n\t            var point1 = getCoordinate(visiblePoints[0].xValue, origin, xAxis, yAxis, isInverted, series);\n\t            var point2;\n\t            lineDirection = lineDirection.concat('M' + ' ' + (point1.x) + ' ' + (point1.y) + ' ');\n\t            for (var i = 0; i < pointsLength; i++) {\n\t                visiblePoints[i].symbolLocations = [];\n\t                visiblePoints[i].regions = [];\n\t                if (visiblePoints[i].visible && helper_1.withInRange(visiblePoints[i - 1], visiblePoints[i], visiblePoints[i + 1], series)) {\n\t                    point1 = getCoordinate(visiblePoints[i].xValue, stackedvalue.endValues[i], xAxis, yAxis, isInverted, series);\n\t                    lineDirection = lineDirection.concat('L' + ' ' + (point1.x) + ' ' + (point1.y) + ' ');\n\t                    visiblePoints[i].symbolLocations.push(getCoordinate(visiblePoints[i].xValue, stackedvalue.endValues[i], xAxis, yAxis, isInverted, series));\n\t                    visiblePoints[i].regions.push(new helper_1.Rect(visiblePoints[i].symbolLocations[0].x - series.marker.width, visiblePoints[i].symbolLocations[0].y - series.marker.height, 2 * series.marker.width, 2 * series.marker.height));\n\t                }\n\t                else {\n\t                    if (series.emptyPointSettings.mode !== 'Drop') {\n\t                        for (var j = i - 1; j >= startPoint; j--) {\n\t                            point2 = getCoordinate(visiblePoints[j].xValue, stackedvalue.startValues[j], xAxis, yAxis, isInverted, series);\n\t                            lineDirection = lineDirection.concat('L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t                        }\n\t                        if (visiblePoints[i + 1] && visiblePoints[i + 1].visible) {\n\t                            point1 = getCoordinate(visiblePoints[i + 1].xValue, stackedvalue.startValues[i + 1], xAxis, yAxis, isInverted, series);\n\t                            lineDirection = lineDirection.concat('M' + ' ' + (point1.x) + ' ' + (point1.y) + ' ');\n\t                        }\n\t                        startPoint = i + 1;\n\t                    }\n\t                }\n\t            }\n\t            if (series.chart.chartAreaType === 'PolarRadar' && visiblePoints.length > 1) {\n\t                point1 = { 'x': series.points[0].xValue, 'y': stackedvalue.endValues[0] };\n\t                point2 = getCoordinate(point1.x, point1.y, xAxis, yAxis, isInverted, series);\n\t                lineDirection += ('L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t                point1 = { 'x': series.points[0].xValue, 'y': stackedvalue.startValues[0] };\n\t                point2 = getCoordinate(point1.x, point1.y, xAxis, yAxis, isInverted, series);\n\t                lineDirection += ('L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t            }\n\t            for (var j = pointsLength - 1; j >= startPoint; j--) {\n\t                var previousSeries = this.getPreviousSeries(series);\n\t                if (previousSeries.emptyPointSettings.mode !== 'Drop' || !previousSeries.points[j].isEmpty) {\n\t                    point2 = getCoordinate(visiblePoints[j].xValue, stackedvalue.startValues[j], xAxis, yAxis, isInverted, series);\n\t                    lineDirection = lineDirection.concat('L' + ' ' + (point2.x) + ' ' + (point2.y) + ' ');\n\t                }\n\t            }\n\t            options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index, series.interior, series.border.width, series.border.color, series.opacity, series.dashArray, lineDirection);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        StackingAreaSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        StackingAreaSeries.prototype.destroy = function (chart) {\n\t        };\n\t        StackingAreaSeries.prototype.getModuleName = function () {\n\t            return 'StackingAreaSeries';\n\t        };\n\t        StackingAreaSeries.prototype.getPreviousSeries = function (series) {\n\t            var seriesCollection = series.chart.visibleSeries;\n\t            for (var i = 0, length_1 = seriesCollection.length; i < length_1; i++) {\n\t                if (series.index === seriesCollection[i].index && i !== 0) {\n\t                    return seriesCollection[i - 1];\n\t                }\n\t            }\n\t            return seriesCollection[0];\n\t        };\n\t        return StackingAreaSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.StackingAreaSeries = StackingAreaSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ScatterSeries = (function () {\n\t        function ScatterSeries() {\n\t        }\n\t        ScatterSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var seriesIndex = series.index;\n\t            var marker = series.marker;\n\t            var border = series.border;\n\t            var shape = marker.shape;\n\t            var visiblePoints = series.points;\n\t            var pointIndex;\n\t            var symbolId;\n\t            var shapeOption;\n\t            var argsData;\n\t            var getCoordinate = series.chart.chartAreaType === 'PolarRadar' ? helper_1.TransformToVisible : helper_1.getPoint;\n\t            for (var _i = 0, visiblePoints_1 = visiblePoints; _i < visiblePoints_1.length; _i++) {\n\t                var point = visiblePoints_1[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(visiblePoints[point.index - 1], point, visiblePoints[point.index + 1], series)) {\n\t                    point.symbolLocations.push(getCoordinate(point.xValue, point.yValue, xAxis, yAxis, isInverted, series));\n\t                    symbolId = series.chart.element.id + '_Series_' + seriesIndex + '_Point_' + point.index;\n\t                    argsData = {\n\t                        cancel: false, name: constants_1.pointRender, series: series, point: point,\n\t                        fill: series.setPointColor(point, series.interior),\n\t                        border: series.setBorderColor(point, { width: series.border.width, color: series.border.color }),\n\t                        height: marker.height, width: marker.width\n\t                    };\n\t                    series.chart.trigger(constants_1.pointRender, argsData);\n\t                    if (!argsData.cancel) {\n\t                        point.color = argsData.fill;\n\t                        shapeOption = new helper_1.PathOption(symbolId, argsData.fill, argsData.border.width, argsData.border.color, series.opacity, null);\n\t                        series.seriesElement.appendChild(helper_1.drawSymbol(point.symbolLocations[0], shape, new helper_1.Size(argsData.width, argsData.height), marker.imageUrl, shapeOption, point.x.toString() + ':' + point.yValue.toString()));\n\t                        point.regions.push(new helper_1.Rect(point.symbolLocations[0].x - marker.width, point.symbolLocations[0].y - marker.height, 2 * marker.width, 2 * marker.height));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        ScatterSeries.prototype.doAnimation = function (series) {\n\t            var duration = series.animation.duration;\n\t            var delay = series.animation.delay;\n\t            var rectElements = series.seriesElement.childNodes;\n\t            var count = 1;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (!point.symbolLocations.length || !rectElements[count]) {\n\t                    continue;\n\t                }\n\t                helper_1.markerAnimate(rectElements[count], delay, duration, series, point.index, point.symbolLocations[0], false);\n\t                count++;\n\t            }\n\t        };\n\t        ScatterSeries.prototype.getModuleName = function () {\n\t            return 'ScatterSeries';\n\t        };\n\t        ScatterSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return ScatterSeries;\n\t    }());\n\t    exports.ScatterSeries = ScatterSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RangeColumnSeries = (function (_super) {\n\t        __extends(RangeColumnSeries, _super);\n\t        function RangeColumnSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        RangeColumnSeries.prototype.render = function (series) {\n\t            var rect;\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var argsData;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var rangePoint = _a[_i];\n\t                rangePoint.symbolLocations = [];\n\t                rangePoint.regions = [];\n\t                if (rangePoint.visible && helper_1.withInRange(series.points[rangePoint.index - 1], rangePoint, series.points[rangePoint.index + 1], series)) {\n\t                    rect = this.getRectangle(rangePoint.xValue + sideBySideInfo.start, rangePoint.high, rangePoint.xValue + sideBySideInfo.end, rangePoint.low, series);\n\t                    argsData = this.triggerEvent(series, rangePoint, series.interior, { width: series.border.width, color: series.border.color });\n\t                    if (!argsData.cancel) {\n\t                        this.updateSymbolLocation(rangePoint, rect, series);\n\t                        this.drawRectangle(series, rangePoint, rect, argsData);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        RangeColumnSeries.prototype.getModuleName = function () {\n\t            return 'RangeColumnSeries';\n\t        };\n\t        RangeColumnSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        RangeColumnSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return RangeColumnSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.RangeColumnSeries = RangeColumnSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var WaterfallSeries = (function (_super) {\n\t        __extends(WaterfallSeries, _super);\n\t        function WaterfallSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        WaterfallSeries.prototype.render = function (series) {\n\t            var rect;\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var origin = Math.max(series.yAxis.visibleRange.min, 0);\n\t            var argsData;\n\t            var prevEndValue = 0;\n\t            var direction = '';\n\t            var currentEndValue = 0;\n\t            var originValue;\n\t            var prevRegion = null;\n\t            var y;\n\t            var isInversed = series.chart.requireInvertedAxis;\n\t            var intermediateOrigin = 0;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    var isSum = this.isIntermediateSum(series, point.index);\n\t                    var totalSum = this.isSumIndex(series, point.index);\n\t                    currentEndValue += isSum || totalSum === true ? 0 : point.yValue;\n\t                    originValue = (isSum === true ? intermediateOrigin : ((prevEndValue !== null && !totalSum) ? prevEndValue : origin));\n\t                    rect = this.getRectangle(point.xValue + sideBySideInfo.start, currentEndValue, point.xValue + sideBySideInfo.end, originValue, series);\n\t                    argsData = this.triggerPointRenderEvent(series, point);\n\t                    if (isSum) {\n\t                        intermediateOrigin = currentEndValue;\n\t                    }\n\t                    prevEndValue = currentEndValue;\n\t                    if (!argsData.cancel) {\n\t                        this.updateSymbolLocation(point, rect, series);\n\t                        this.drawRectangle(series, point, rect, argsData);\n\t                    }\n\t                    var currentRegion = point.regions[0];\n\t                    if (prevRegion !== null) {\n\t                        var prevLeft = isInversed ? prevRegion.x : prevRegion.y;\n\t                        var currentLeft = isInversed ? currentRegion.x : currentRegion.y;\n\t                        var prevBottom = isInversed ? prevRegion.x + prevRegion.width : prevRegion.y + prevRegion.height;\n\t                        var currentBottom = isInversed ?\n\t                            currentRegion.x + currentRegion.width : currentRegion.y + currentRegion.height;\n\t                        if (Math.round(prevLeft) === Math.round(currentLeft) ||\n\t                            Math.round(prevBottom) === Math.round(currentLeft)) {\n\t                            y = isInversed ? currentRegion.x : currentRegion.y;\n\t                        }\n\t                        else {\n\t                            y = currentBottom;\n\t                        }\n\t                        if (isInversed) {\n\t                            direction = direction.concat('M' + ' ' + y + ' ' + (prevRegion.y + prevRegion.height) + ' ' +\n\t                                'L' + ' ' + y + ' ' + currentRegion.y + ' ');\n\t                        }\n\t                        else {\n\t                            direction = direction.concat('M' + ' ' + prevRegion.x + ' ' + y + ' ' +\n\t                                'L' + ' ' + (currentRegion.x + currentRegion.width) + ' ' + y + ' ');\n\t                        }\n\t                    }\n\t                    prevRegion = point.regions[0];\n\t                }\n\t            }\n\t            var options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index + '_Connector_', 'none', series.connector.width, series.connector.color, series.opacity, series.connector.dashArray, direction);\n\t            var element = series.chart.renderer.drawPath(options);\n\t            if (series.chart.animateSeries) {\n\t                element.style.visibility = 'hidden';\n\t            }\n\t            series.seriesElement.appendChild(element);\n\t        };\n\t        WaterfallSeries.prototype.isIntermediateSum = function (series, index) {\n\t            if (series.intermediateSumIndexes !== undefined && series.intermediateSumIndexes.indexOf(index) !== -1) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        WaterfallSeries.prototype.isSumIndex = function (series, index) {\n\t            if (series.sumIndexes !== undefined && series.sumIndexes.indexOf(index) !== -1) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        WaterfallSeries.prototype.triggerPointRenderEvent = function (series, point) {\n\t            var color;\n\t            var isSum = this.isIntermediateSum(series, point.index);\n\t            var totalSum = this.isSumIndex(series, point.index);\n\t            if (isSum || totalSum) {\n\t                color = series.summaryFillColor;\n\t            }\n\t            else if (point.y < 0) {\n\t                color = series.negativeFillColor;\n\t            }\n\t            else {\n\t                color = series.interior;\n\t            }\n\t            return this.triggerEvent(series, point, color, { color: series.border.color, width: series.border.width });\n\t        };\n\t        WaterfallSeries.prototype.processWaterfallData = function (json, series) {\n\t            var data = json;\n\t            var length = json.length;\n\t            var index;\n\t            var intermediateSum = series.intermediateSumIndexes;\n\t            var sumIndex = series.sumIndexes;\n\t            if (intermediateSum !== undefined && intermediateSum.length > 0) {\n\t                for (var i = 0; i < intermediateSum.length; i++) {\n\t                    for (var j = 0; j < data.length; j++) {\n\t                        if (j === intermediateSum[i]) {\n\t                            if (i === 0) {\n\t                                index = helper_1.subArraySum(data, -1, intermediateSum[i], null, series);\n\t                            }\n\t                            else {\n\t                                index = helper_1.subArraySum(data, intermediateSum[i - 1], intermediateSum[i], null, series);\n\t                            }\n\t                            data[j][series.yName] = index;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (sumIndex !== undefined && sumIndex.length > 0) {\n\t                for (var k = 0; k < sumIndex.length; k++) {\n\t                    for (var j = 0; j < data.length; j++) {\n\t                        if (j === sumIndex[k]) {\n\t                            if (intermediateSum !== undefined) {\n\t                                index = helper_1.subArraySum(data, -1, sumIndex[k], sumIndex, series);\n\t                            }\n\t                            else {\n\t                                index = helper_1.subArraySum(data, -1, sumIndex[k], null, series);\n\t                            }\n\t                            data[j][series.yName] = index;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return data;\n\t        };\n\t        WaterfallSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        WaterfallSeries.prototype.getModuleName = function () {\n\t            return 'WaterfallSeries';\n\t        };\n\t        WaterfallSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return WaterfallSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.WaterfallSeries = WaterfallSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HiloSeries = (function (_super) {\n\t        __extends(HiloSeries, _super);\n\t        function HiloSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        HiloSeries.prototype.render = function (series) {\n\t            var region;\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var argsData;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible &&\n\t                    helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    region = this.getRectangle(point.xValue + sideBySideInfo.median, point.high, point.xValue + sideBySideInfo.median, point.low, series);\n\t                    argsData = this.triggerPointRenderEvent(series, point);\n\t                    if (!argsData.cancel) {\n\t                        if (!series.chart.requireInvertedAxis) {\n\t                            region.width = argsData.border.width;\n\t                            region.x = region.x - (region.width / 2);\n\t                        }\n\t                        else {\n\t                            region.height = argsData.border.width;\n\t                            region.y = region.y - (region.height / 2);\n\t                        }\n\t                        argsData.border.width = 0;\n\t                        this.updateSymbolLocation(point, region, series);\n\t                        this.drawRectangle(series, point, region, argsData);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        HiloSeries.prototype.triggerPointRenderEvent = function (series, point) {\n\t            var border = { color: series.fill, width: Math.max(series.border.width, 2) };\n\t            return _super.prototype.triggerEvent.call(this, series, point, series.interior, border);\n\t        };\n\t        HiloSeries.prototype.getModuleName = function () {\n\t            return 'HiloSeries';\n\t        };\n\t        HiloSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        HiloSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return HiloSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.HiloSeries = HiloSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(30)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, column_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var HiloOpenCloseSeries = (function (_super) {\n\t        __extends(HiloOpenCloseSeries, _super);\n\t        function HiloOpenCloseSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        HiloOpenCloseSeries.prototype.render = function (series) {\n\t            var highLowRect;\n\t            var open;\n\t            var close;\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var argsData;\n\t            var borderWidth = Math.max(series.border.width, 2);\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible &&\n\t                    helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    highLowRect = this.getRectangle(point.xValue + sideBySideInfo.start, Math.max(point.high, point.low), point.xValue + sideBySideInfo.end, Math.min(point.high, point.low), series);\n\t                    point.regions.push(this.getRectangle(point.xValue + sideBySideInfo.median, Math.max(point.high, point.low), point.xValue + sideBySideInfo.median, Math.min(point.high, point.low), series));\n\t                    this.updateTickRegion(!series.chart.requireInvertedAxis, point.regions[0], borderWidth);\n\t                    point.regions.push(this.getRectangle(point.xValue + sideBySideInfo.start, Math.max(point.open, point.close), point.xValue + sideBySideInfo.median, Math.max(point.open, point.close), series));\n\t                    point.regions.push(this.getRectangle(point.xValue + sideBySideInfo.median, Math.min(point.open, point.close), point.xValue + sideBySideInfo.end, Math.min(point.open, point.close), series));\n\t                    argsData = this.triggerPointRenderEvent(series, point);\n\t                    if (!argsData.cancel) {\n\t                        this.updateSymbolLocation(point, point.regions[0], series);\n\t                        var open_1 = { x: point.regions[1].x, y: point.regions[1].y };\n\t                        var close_1 = { x: point.regions[2].x, y: point.regions[2].y };\n\t                        this.drawHiloOpenClosePath(series, point, open_1, close_1, highLowRect, argsData);\n\t                    }\n\t                    this.updateTickRegion(series.chart.requireInvertedAxis, point.regions[1], borderWidth);\n\t                    this.updateTickRegion(series.chart.requireInvertedAxis, point.regions[2], borderWidth);\n\t                }\n\t            }\n\t        };\n\t        HiloOpenCloseSeries.prototype.updateTickRegion = function (horizontal, region, borderWidth) {\n\t            if (horizontal) {\n\t                region.x -= borderWidth / 2;\n\t                region.width = borderWidth;\n\t            }\n\t            else {\n\t                region.y -= borderWidth / 2;\n\t                region.height = borderWidth;\n\t            }\n\t        };\n\t        HiloOpenCloseSeries.prototype.triggerPointRenderEvent = function (series, point) {\n\t            var fill = (point.open <= point.close) ? series.bearFillColor : series.bullFillColor;\n\t            var border = { color: series.border.color, width: Math.max(series.border.width, 1) };\n\t            return this.triggerEvent(series, point, fill, border);\n\t        };\n\t        HiloOpenCloseSeries.prototype.drawHiloOpenClosePath = function (series, point, open, close, rect, argsData) {\n\t            var direction;\n\t            var options;\n\t            if (series.chart.requireInvertedAxis) {\n\t                direction = ('M' + ' ' + (rect.x) + ' ' + (rect.y + rect.height / 2) + ' ' +\n\t                    'L' + ' ' + (rect.x + rect.width) + ' ' + (rect.y + rect.height / 2) + ' ');\n\t                direction += ('M' + ' ' + (open.x) + ' ' + (rect.y + rect.height / 2) + ' ' +\n\t                    'L' + ' ' + (open.x) + ' ' + (rect.y + rect.height) + ' ');\n\t                direction += ('M' + ' ' + (close.x) + ' ' + (rect.y + rect.height / 2) + ' ' +\n\t                    'L' + ' ' + (close.x) + ' ' + (rect.y) + ' ');\n\t            }\n\t            else {\n\t                direction = ('M' + ' ' + (rect.x + rect.width / 2) + ' ' + (rect.y + rect.height) + ' ' +\n\t                    'L' + ' ' + (rect.x + rect.width / 2) + ' ' + (rect.y) + ' ');\n\t                direction += ('M' + ' ' + (rect.x) + ' ' + (open.y) + ' ' +\n\t                    'L' + ' ' + (rect.x + rect.width / 2) + ' ' + (open.y) + ' ');\n\t                direction += ('M' + ' ' + (rect.x + rect.width / 2) + ' ' + (close.y) + ' ' +\n\t                    'L' + ' ' + (rect.x + rect.width) + ' ' + (close.y) + ' ');\n\t            }\n\t            options = new helper_1.PathOption(series.chart.element.id + '_Series_' + series.index + '_Point_' + point.index, argsData.fill, argsData.border.width, argsData.fill, series.opacity, series.dashArray, direction);\n\t            var element = series.chart.renderer.drawPath(options);\n\t            element.setAttribute('aria-label', point.x.toString() + ':' + point.high.toString()\n\t                + ':' + point.low.toString() + ':' + point.close.toString() + ':' + point.open.toString());\n\t            series.seriesElement.appendChild(element);\n\t        };\n\t        HiloOpenCloseSeries.prototype.getModuleName = function () {\n\t            return 'HiloOpenCloseSeries';\n\t        };\n\t        HiloOpenCloseSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        HiloOpenCloseSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return HiloOpenCloseSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.HiloOpenCloseSeries = HiloOpenCloseSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RangeAreaSeries = (function (_super) {\n\t        __extends(RangeAreaSeries, _super);\n\t        function RangeAreaSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        RangeAreaSeries.prototype.render = function (series) {\n\t            var point;\n\t            var direction = '';\n\t            var command = 'M';\n\t            var closed = undefined;\n\t            var visiblePoints = this.improveChartPerformance(series);\n\t            for (var i = 0, length_1 = visiblePoints.length; i < length_1; i++) {\n\t                point = visiblePoints[i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                var low = Math.min(point.low, point.high);\n\t                var high = Math.max(point.low, point.high);\n\t                if (series.yAxis.isInversed) {\n\t                    var temp = low;\n\t                    low = high;\n\t                    high = temp;\n\t                }\n\t                var lowPoint = helper_1.getPoint(point.xValue, low, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t                var highPoint = helper_1.getPoint(point.xValue, high, series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t                point.symbolLocations.push(highPoint);\n\t                point.symbolLocations.push(lowPoint);\n\t                var rect = new helper_1.Rect(Math.min(lowPoint.x, highPoint.x), Math.min(lowPoint.y, highPoint.y), Math.max(Math.abs(highPoint.x - lowPoint.x), series.marker.width), Math.max(Math.abs(highPoint.y - lowPoint.y), series.marker.width));\n\t                if (!series.chart.requireInvertedAxis) {\n\t                    rect.x -= series.marker.width / 2;\n\t                }\n\t                else {\n\t                    rect.y -= series.marker.width / 2;\n\t                }\n\t                point.regions.push(rect);\n\t                if (point.visible && helper_1.withInRange(visiblePoints[point.index - 1], point, visiblePoints[point.index + 1], series)) {\n\t                    direction = direction.concat(command + ' ' + (lowPoint.x) + ' ' + (lowPoint.y) + ' ');\n\t                    closed = false;\n\t                    if ((i + 1 < visiblePoints.length && !visiblePoints[i + 1].visible)\n\t                        || i === visiblePoints.length - 1) {\n\t                        direction = this.closeRangeAreaPath(visiblePoints, point, series, direction, i);\n\t                        command = 'M';\n\t                        direction = direction.concat(' ' + 'Z');\n\t                        closed = true;\n\t                    }\n\t                    command = 'L';\n\t                }\n\t                else {\n\t                    if (closed === false && i !== 0) {\n\t                        direction = this.closeRangeAreaPath(visiblePoints, point, series, direction, i);\n\t                        closed = true;\n\t                    }\n\t                    command = 'M';\n\t                    point.symbolLocations = [];\n\t                }\n\t            }\n\t            var name = series.category === 'Indicator' ? series.chart.element.id + '_Indicator_' + series.index + '_' + series.name :\n\t                series.chart.element.id + '_Series_' + series.index;\n\t            var options = new helper_1.PathOption(name, series.interior, series.border.width, series.border.color, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        RangeAreaSeries.prototype.closeRangeAreaPath = function (visiblePoints, point, series, direction, i) {\n\t            for (var j = i; j >= 0; j--) {\n\t                if (visiblePoints[j].visible && visiblePoints[j].symbolLocations[0]) {\n\t                    point = visiblePoints[j];\n\t                    direction += 'L' + ' ' + (point.symbolLocations[0].x) + ' ' + ((point.symbolLocations[0].y)) + ' ';\n\t                }\n\t                else {\n\t                    break;\n\t                }\n\t            }\n\t            return direction;\n\t        };\n\t        RangeAreaSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        RangeAreaSeries.prototype.getModuleName = function () {\n\t            return 'RangeAreaSeries';\n\t        };\n\t        RangeAreaSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return RangeAreaSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.RangeAreaSeries = RangeAreaSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(28)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, line_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SplineSeries = (function (_super) {\n\t        __extends(SplineSeries, _super);\n\t        function SplineSeries() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.splinePoints = [];\n\t            return _this;\n\t        }\n\t        SplineSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var chart = series.chart;\n\t            var marker = series.marker;\n\t            var ySpline;\n\t            var options;\n\t            var firstPoint = null;\n\t            var secondPoint = null;\n\t            var direction = '';\n\t            var pt1;\n\t            var pt2;\n\t            var bpt1;\n\t            var bpt2;\n\t            var data;\n\t            var controlPointCount = 0;\n\t            var controlPoint1;\n\t            var controlPoint2;\n\t            var startPoint = 'M';\n\t            var points = this.filterEmptyPoints(series);\n\t            var previous;\n\t            var getCoordinate = series.chart.chartAreaType === 'PolarRadar' ? helper_1.TransformToVisible : helper_1.getPoint;\n\t            for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n\t                var point = points_1[_i];\n\t                previous = this.getPreviousIndex(points, point.index - 1, series);\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                if (point.visible && helper_1.withInRange(points[previous], point, points[this.getNextIndex(points, point.index - 1, series)], series)) {\n\t                    if (firstPoint !== null) {\n\t                        data = series.drawPoints[previous];\n\t                        controlPoint1 = data.controlPoint1;\n\t                        controlPoint2 = data.controlPoint2;\n\t                        pt1 = getCoordinate(firstPoint.xValue, firstPoint.yValue, xAxis, yAxis, isInverted, series);\n\t                        pt2 = getCoordinate(point.xValue, point.yValue, xAxis, yAxis, isInverted, series);\n\t                        bpt1 = getCoordinate(controlPoint1.x, controlPoint1.y, xAxis, yAxis, isInverted, series);\n\t                        bpt2 = getCoordinate(controlPoint2.x, controlPoint2.y, xAxis, yAxis, isInverted, series);\n\t                        direction = direction.concat((startPoint + ' ' + (pt1.x) + ' ' + (pt1.y) + ' ' + 'C' + ' ' + (bpt1.x) + ' '\n\t                            + (bpt1.y) + ' ' + (bpt2.x) + ' ' + (bpt2.y) + ' ' + (pt2.x) + ' ' + (pt2.y) + ' '));\n\t                        startPoint = 'L';\n\t                    }\n\t                    firstPoint = point;\n\t                    point.symbolLocations.push(getCoordinate(point.xValue, point.yValue, xAxis, yAxis, isInverted, series));\n\t                    point.regions.push(new helper_1.Rect(point.symbolLocations[0].x - marker.width, point.symbolLocations[0].y - marker.height, 2 * marker.width, 2 * marker.height));\n\t                }\n\t                else {\n\t                    startPoint = 'M';\n\t                    firstPoint = null;\n\t                    point.symbolLocations = [];\n\t                }\n\t            }\n\t            var name = series.category === 'TrendLine' ? series.chart.element.id + '_Series_' + series.sourceIndex + '_TrendLine_' + series.index :\n\t                series.chart.element.id + '_Series_' + series.index;\n\t            options = new helper_1.PathOption(name, 'transparent', series.width, series.interior, series.opacity, series.dashArray, direction);\n\t            this.appendLinePath(options, series);\n\t            this.renderMarker(series);\n\t        };\n\t        SplineSeries.prototype.findSplinePoint = function (series) {\n\t            var spline = series.chart.splineSeriesModule;\n\t            var value;\n\t            var points = this.filterEmptyPoints(series);\n\t            this.splinePoints = this.findSplineCoefficients(points, series);\n\t            if (points.length > 1) {\n\t                series.drawPoints = [];\n\t                for (var _i = 0, points_2 = points; _i < points_2.length; _i++) {\n\t                    var point = points_2[_i];\n\t                    if (point.index !== 0) {\n\t                        var previous = this.getPreviousIndex(points, point.index - 1, series);\n\t                        value = this.getControlPoints(points[previous], point, this.splinePoints[previous], this.splinePoints[point.index], series);\n\t                        series.drawPoints.push(value);\n\t                        if (point.yValue && value.controlPoint1.y && value.controlPoint2.y) {\n\t                            series.yMin = Math.floor(Math.min(series.yMin, point.yValue, value.controlPoint1.y, value.controlPoint2.y));\n\t                            series.yMax = Math.ceil(Math.max(series.yMax, point.yValue, value.controlPoint1.y, value.controlPoint2.y));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        SplineSeries.prototype.getPreviousIndex = function (points, i, series) {\n\t            if (series.emptyPointSettings.mode !== 'Drop') {\n\t                return i;\n\t            }\n\t            while (ej2_base_1.isNullOrUndefined(points[i]) && i > -1) {\n\t                i = i - 1;\n\t            }\n\t            return i;\n\t        };\n\t        SplineSeries.prototype.getNextIndex = function (points, i, series) {\n\t            if (series.emptyPointSettings.mode !== 'Drop') {\n\t                return i;\n\t            }\n\t            while (ej2_base_1.isNullOrUndefined(points[i]) && i < points.length) {\n\t                i = i + 1;\n\t            }\n\t            return i;\n\t        };\n\t        SplineSeries.prototype.filterEmptyPoints = function (series) {\n\t            if (series.emptyPointSettings.mode !== 'Drop') {\n\t                return series.points;\n\t            }\n\t            var points = ej2_base_1.extend([], series.points, null, true);\n\t            for (var i = 0; i < points.length; i++) {\n\t                points[i].index = i;\n\t                if (points[i].isEmpty) {\n\t                    points[i].symbolLocations = [];\n\t                    points[i].regions = [];\n\t                    points.splice(i, 1);\n\t                    i--;\n\t                }\n\t            }\n\t            return points;\n\t        };\n\t        SplineSeries.prototype.findSplineCoefficients = function (points, series) {\n\t            var count = points.length;\n\t            var ySpline = [];\n\t            var ySplineDuplicate = [];\n\t            var coefficient1;\n\t            var coefficient2;\n\t            var coefficient3;\n\t            var dy1;\n\t            var dy2;\n\t            var dx = [];\n\t            var dy = [];\n\t            var slope = [];\n\t            var interPoint;\n\t            var slopeLength;\n\t            var cardinalSplineTension = series.cardinalSplineTension ? series.cardinalSplineTension : 0.5;\n\t            cardinalSplineTension = cardinalSplineTension < 0 ? 0 : cardinalSplineTension > 1 ? 1 : cardinalSplineTension;\n\t            switch (series.splineType) {\n\t                case 'Monotonic':\n\t                    for (var i = 0; i < count - 1; i++) {\n\t                        dx[i] = points[i + 1].xValue - points[i].xValue;\n\t                        dy[i] = points[i + 1].yValue - points[i].yValue;\n\t                        slope[i] = dy[i] / dx[i];\n\t                    }\n\t                    slopeLength = slope.length;\n\t                    ySpline[0] = slope[0];\n\t                    ySpline[count - 1] = slope[slopeLength - 1];\n\t                    for (var j = 0; j < dx.length; j++) {\n\t                        if (slopeLength > j + 1) {\n\t                            if (slope[j] * slope[j + 1] <= 0) {\n\t                                ySpline[j + 1] = 0;\n\t                            }\n\t                            else {\n\t                                interPoint = dx[j] + dx[j + 1];\n\t                                ySpline[j + 1] = 3 * interPoint / ((interPoint + dx[j + 1]) / slope[j] + (interPoint + dx[j]) / slope[j + 1]);\n\t                            }\n\t                        }\n\t                    }\n\t                    break;\n\t                case 'Cardinal':\n\t                    for (var i = 0; i < count; i++) {\n\t                        if (i === 0) {\n\t                            ySpline[i] = (count > 2) ? (cardinalSplineTension * (points[i + 2].xValue - points[i].xValue)) : 0;\n\t                        }\n\t                        else if (i === (count - 1)) {\n\t                            ySpline[i] = (count > 2) ? (cardinalSplineTension * (points[count - 1].xValue - points[count - 3].xValue)) : 0;\n\t                        }\n\t                        else {\n\t                            ySpline[i] = (cardinalSplineTension * (points[i + 1].xValue - points[i - 1].xValue));\n\t                        }\n\t                    }\n\t                    break;\n\t                default:\n\t                    if (series.splineType === 'Clamped') {\n\t                        var firstIndex = (points[1].yValue - points[0].yValue) / (points[1].xValue - points[0].xValue);\n\t                        var lastIndex = (points[count - 1].xValue - points[count - 2].xValue) /\n\t                            (points[count - 1].yValue - points[count - 2].yValue);\n\t                        ySpline[0] = (3 * (points[1].yValue - points[0].yValue)) / (points[1].xValue - points[0].xValue) - 3;\n\t                        ySplineDuplicate[0] = 0.5;\n\t                        ySpline[points.length - 1] = (3 * (points[points.length - 1].yValue - points[points.length - 2].yValue)) /\n\t                            (points[points.length - 1].xValue - points[points.length - 2].xValue);\n\t                        ySpline[0] = ySplineDuplicate[0] = Math.abs(ySpline[0]) === Infinity ? 0 : ySpline[0];\n\t                        ySpline[points.length - 1] = ySplineDuplicate[points.length - 1] = Math.abs(ySpline[points.length - 1]) === Infinity ?\n\t                            0 : ySpline[points.length - 1];\n\t                    }\n\t                    else {\n\t                        ySpline[0] = ySplineDuplicate[0] = 0;\n\t                        ySpline[points.length - 1] = 0;\n\t                    }\n\t                    for (var i = 1; i < count - 1; i++) {\n\t                        coefficient1 = points[i].xValue - points[i - 1].xValue;\n\t                        coefficient2 = points[i + 1].xValue - points[i - 1].xValue;\n\t                        coefficient3 = points[i + 1].xValue - points[i].xValue;\n\t                        dy1 = points[i + 1].yValue - points[i].yValue || null;\n\t                        dy2 = points[i].yValue - points[i - 1].yValue || null;\n\t                        if (coefficient1 === 0 || coefficient2 === 0 || coefficient3 === 0) {\n\t                            ySpline[i] = 0;\n\t                            ySplineDuplicate[i] = 0;\n\t                        }\n\t                        else {\n\t                            var p = 1 / (coefficient1 * ySpline[i - 1] + 2 * coefficient2);\n\t                            ySpline[i] = -p * coefficient3;\n\t                            ySplineDuplicate[i] = p * (6 * (dy1 / coefficient3 - dy2 / coefficient1) - coefficient1 * ySplineDuplicate[i - 1]);\n\t                        }\n\t                    }\n\t                    for (var k = count - 2; k >= 0; k--) {\n\t                        ySpline[k] = ySpline[k] * ySpline[k + 1] + ySplineDuplicate[k];\n\t                    }\n\t                    break;\n\t            }\n\t            return ySpline;\n\t        };\n\t        SplineSeries.prototype.getControlPoints = function (point1, point2, ySpline1, ySpline2, series) {\n\t            var controlPoint1;\n\t            var controlPoint2;\n\t            var point;\n\t            var ySplineDuplicate1 = ySpline1;\n\t            var ySplineDuplicate2 = ySpline2;\n\t            switch (series.splineType) {\n\t                case 'Cardinal':\n\t                    if (series.xAxis.valueType === 'DateTime') {\n\t                        ySplineDuplicate1 = ySpline1 / this.dateTimeInterval(series);\n\t                        ySplineDuplicate2 = ySpline2 / this.dateTimeInterval(series);\n\t                    }\n\t                    controlPoint1 = new helper_1.ChartLocation(point1.xValue + ySpline1 / 3, point1.yValue + ySplineDuplicate1 / 3);\n\t                    controlPoint2 = new helper_1.ChartLocation(point2.xValue - ySpline2 / 3, point2.yValue - ySplineDuplicate2 / 3);\n\t                    point = new helper_1.ControlPoints(controlPoint1, controlPoint2);\n\t                    break;\n\t                case 'Monotonic':\n\t                    var value = (point2.xValue - point1.xValue) / 3;\n\t                    controlPoint1 = new helper_1.ChartLocation(point1.xValue + value, point1.yValue + ySpline1 * value);\n\t                    controlPoint2 = new helper_1.ChartLocation(point2.xValue - value, point2.yValue - ySpline2 * value);\n\t                    point = new helper_1.ControlPoints(controlPoint1, controlPoint2);\n\t                    break;\n\t                default:\n\t                    var one3 = 1 / 3.0;\n\t                    var deltaX2 = (point2.xValue - point1.xValue);\n\t                    deltaX2 = deltaX2 * deltaX2;\n\t                    var y1 = one3 * (((2 * point1.yValue) + point2.yValue) - one3 * deltaX2 * (ySpline1 + 0.5 * ySpline2));\n\t                    var y2 = one3 * ((point1.yValue + (2 * point2.yValue)) - one3 * deltaX2 * (0.5 * ySpline1 + ySpline2));\n\t                    controlPoint1 = new helper_1.ChartLocation((2 * (point1.xValue) + (point2.xValue)) * one3, y1);\n\t                    controlPoint2 = new helper_1.ChartLocation(((point1.xValue) + 2 * (point2.xValue)) * one3, y2);\n\t                    point = new helper_1.ControlPoints(controlPoint1, controlPoint2);\n\t                    break;\n\t            }\n\t            return point;\n\t        };\n\t        SplineSeries.prototype.dateTimeInterval = function (series) {\n\t            var interval = series.xAxis.actualIntervalType;\n\t            var intervalInMilliseconds;\n\t            if (interval === 'Years') {\n\t                intervalInMilliseconds = 365 * 24 * 60 * 60 * 1000;\n\t            }\n\t            else if (interval === 'Months') {\n\t                intervalInMilliseconds = 30 * 24 * 60 * 60 * 1000;\n\t            }\n\t            else if (interval === 'Days') {\n\t                intervalInMilliseconds = 24 * 60 * 60 * 1000;\n\t            }\n\t            else if (interval === 'Hours') {\n\t                intervalInMilliseconds = 60 * 60 * 1000;\n\t            }\n\t            else if (interval === 'Minutes') {\n\t                intervalInMilliseconds = 60 * 1000;\n\t            }\n\t            else if (interval === 'Seconds') {\n\t                intervalInMilliseconds = 1000;\n\t            }\n\t            else {\n\t                intervalInMilliseconds = 30 * 24 * 60 * 60 * 1000;\n\t            }\n\t            return intervalInMilliseconds;\n\t        };\n\t        SplineSeries.prototype.getModuleName = function () {\n\t            return 'SplineSeries';\n\t        };\n\t        SplineSeries.prototype.destroy = function (chart) {\n\t        };\n\t        SplineSeries.prototype.doAnimation = function (series) {\n\t            var option = series.animation;\n\t            this.doLinearAnimation(series, option);\n\t        };\n\t        return SplineSeries;\n\t    }(line_base_1.LineBase));\n\t    exports.SplineSeries = SplineSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var SmaIndicator = (function (_super) {\n\t        __extends(SmaIndicator, _super);\n\t        function SmaIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        SmaIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var smaPoints = [];\n\t            var points = indicator.points;\n\t            if (points && points.length) {\n\t                var validData = points;\n\t                var field = helper_1.firstToLowerCase(indicator.field);\n\t                var xField = 'x';\n\t                var signalSeries = indicator.targetSeries[0];\n\t                if (validData && validData.length && validData.length >= indicator.period) {\n\t                    var average = 0;\n\t                    var sum = 0;\n\t                    for (var i = 0; i < indicator.period; i++) {\n\t                        sum += validData[i][field];\n\t                    }\n\t                    average = sum / indicator.period;\n\t                    smaPoints.push(this.getDataPoint(validData[indicator.period - 1][xField], average, validData[indicator.period - 1], signalSeries, smaPoints.length));\n\t                    var index = indicator.period;\n\t                    while (index < validData.length) {\n\t                        sum -= validData[index - indicator.period][field];\n\t                        sum += validData[index][field];\n\t                        average = sum / indicator.period;\n\t                        smaPoints.push(this.getDataPoint(validData[index][xField], average, validData[index], signalSeries, smaPoints.length));\n\t                        index++;\n\t                    }\n\t                }\n\t                this.setSeriesRange(smaPoints, indicator);\n\t            }\n\t        };\n\t        SmaIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        SmaIndicator.prototype.getModuleName = function () {\n\t            return 'SmaIndicator';\n\t        };\n\t        return SmaIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.SmaIndicator = SmaIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(28), __webpack_require__(14), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, line_base_1, chart_series_1, helper_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TechnicalAnalysis = (function (_super) {\n\t        __extends(TechnicalAnalysis, _super);\n\t        function TechnicalAnalysis() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        TechnicalAnalysis.prototype.initSeriesCollection = function (indicator, chart) {\n\t            indicator.targetSeries = [];\n\t            var signalLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            this.setSeriesProperties(signalLine, indicator, 'SignalLine', indicator.fill, indicator.width, chart);\n\t        };\n\t        TechnicalAnalysis.prototype.setSeriesProperties = function (series, indicator, name, fill, width, chart) {\n\t            series.name = name;\n\t            series.xName = 'x';\n\t            series.yName = 'y';\n\t            series.fill = fill || '#606eff';\n\t            series.dashArray = indicator.dashArray;\n\t            series.width = width;\n\t            series.xAxisName = indicator.xAxisName;\n\t            series.animation = indicator.animation;\n\t            series.yAxisName = indicator.yAxisName;\n\t            series.clipRectElement = indicator.clipRectElement;\n\t            series.points = [];\n\t            series.enableTooltip = true;\n\t            series.interior = series.fill;\n\t            series.category = 'Indicator';\n\t            series.index = indicator.index;\n\t            series.chart = chart;\n\t            series.xMin = Infinity;\n\t            series.xMax = -Infinity;\n\t            series.yMin = Infinity;\n\t            series.yMax = -Infinity;\n\t            series.xData = [];\n\t            series.yData = [];\n\t            series.marker.visible = false;\n\t            indicator.targetSeries.push(series);\n\t        };\n\t        TechnicalAnalysis.prototype.createIndicatorElements = function (chart, indicator, index) {\n\t            if (indicator.seriesName || indicator.dataSource) {\n\t                helper_2.findClipRect(indicator.targetSeries[0]);\n\t            }\n\t            var clipRect = new helper_1.Rect(0, 0, 0, 0);\n\t            if (indicator.seriesName || indicator.dataSource) {\n\t                clipRect = indicator.targetSeries[0].clipRect;\n\t            }\n\t            var clipRectElement = chart.renderer.drawClipPath(new helper_1.RectOption(chart.element.id + '_ChartIndicatorClipRect_' + index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n\t                x: 0, y: 0, width: clipRect.width,\n\t                height: clipRect.height,\n\t            }));\n\t            indicator.indicatorElement = chart.renderer.createGroup({\n\t                'id': chart.element.id + 'IndicatorGroup' + index,\n\t                'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n\t                'clip-path': 'url(#' + chart.element.id + '_ChartIndicatorClipRect_' + index + ')'\n\t            });\n\t            indicator.indicatorElement.appendChild(clipRectElement);\n\t            for (var _i = 0, _a = indicator.targetSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                series.clipRectElement = clipRectElement;\n\t                var element = series.chart.renderer.createGroup({\n\t                    'id': series.chart.element.id + '_Indicator_' +\n\t                        indicator.index + '_' + series.name + '_Group'\n\t                });\n\t                indicator.indicatorElement.appendChild(element);\n\t                series.seriesElement = element;\n\t            }\n\t            chart.indicatorElements.appendChild(indicator.indicatorElement);\n\t        };\n\t        TechnicalAnalysis.prototype.getDataPoint = function (x, y, sourcePoint, series, index, indicator) {\n\t            if (indicator === void 0) { indicator = null; }\n\t            var point = new chart_series_1.Points();\n\t            point.x = x;\n\t            point.y = y;\n\t            point.xValue = sourcePoint.xValue;\n\t            point.color = series.fill;\n\t            point.index = index;\n\t            point.yValue = y;\n\t            point.visible = true;\n\t            series.xMin = Math.min(series.xMin, point.xValue);\n\t            series.yMin = Math.min(series.yMin, point.yValue);\n\t            series.xMax = Math.max(series.xMax, point.xValue);\n\t            series.yMax = Math.max(series.yMax, point.yValue);\n\t            series.xData.push(point.xValue);\n\t            if (indicator && indicator.type === 'Macd' && series.type === 'Column') {\n\t                if (point.y >= 0) {\n\t                    point.color = indicator.macdPositiveColor;\n\t                }\n\t                else {\n\t                    point.color = indicator.macdNegativeColor;\n\t                }\n\t            }\n\t            return point;\n\t        };\n\t        TechnicalAnalysis.prototype.getRangePoint = function (x, high, low, sourcePoint, series, index, indicator) {\n\t            if (indicator === void 0) { indicator = null; }\n\t            var point = new chart_series_1.Points();\n\t            point.x = x;\n\t            point.high = high;\n\t            point.low = low;\n\t            point.xValue = sourcePoint.xValue;\n\t            point.color = series.fill;\n\t            point.index = index;\n\t            point.visible = true;\n\t            series.xData.push(point.xValue);\n\t            return point;\n\t        };\n\t        TechnicalAnalysis.prototype.setSeriesRange = function (points, indicator, series) {\n\t            if (series === void 0) { series = null; }\n\t            if (!series) {\n\t                indicator.targetSeries[0].points = points;\n\t            }\n\t            else {\n\t                series.points = points;\n\t            }\n\t        };\n\t        return TechnicalAnalysis;\n\t    }(line_base_1.LineBase));\n\t    exports.TechnicalAnalysis = TechnicalAnalysis;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var EmaIndicator = (function (_super) {\n\t        __extends(EmaIndicator, _super);\n\t        function EmaIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        EmaIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var field = helper_1.firstToLowerCase(indicator.field);\n\t            var xField = 'x';\n\t            var emaPoints = [];\n\t            var signalSeries = indicator.targetSeries[0];\n\t            var validData = indicator.points;\n\t            if (validData && validData.length && validData.length >= indicator.period) {\n\t                var sum = 0;\n\t                var average = 0;\n\t                var k = (2 / (indicator.period + 1));\n\t                for (var i = 0; i < indicator.period; i++) {\n\t                    sum += validData[i][field];\n\t                }\n\t                average = sum / indicator.period;\n\t                emaPoints.push(this.getDataPoint(validData[indicator.period - 1][xField], average, validData[indicator.period - 1], signalSeries, emaPoints.length));\n\t                var index = indicator.period;\n\t                while (index < validData.length) {\n\t                    var prevAverage = emaPoints[index - indicator.period][signalSeries.yName];\n\t                    var yValue = (validData[index][field] - prevAverage) * k + prevAverage;\n\t                    emaPoints.push(this.getDataPoint(validData[index][xField], yValue, validData[index], signalSeries, emaPoints.length));\n\t                    index++;\n\t                }\n\t            }\n\t            this.setSeriesRange(emaPoints, indicator);\n\t        };\n\t        EmaIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        EmaIndicator.prototype.getModuleName = function () {\n\t            return 'EmaIndicator';\n\t        };\n\t        return EmaIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.EmaIndicator = EmaIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TmaIndicator = (function (_super) {\n\t        __extends(TmaIndicator, _super);\n\t        function TmaIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        TmaIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var tmaPoints = [];\n\t            var field = helper_1.firstToLowerCase(indicator.field);\n\t            var xField = 'x';\n\t            var signalSeries = indicator.targetSeries[0];\n\t            var validData = indicator.points;\n\t            if (validData && validData.length && validData.length >= indicator.period) {\n\t                var signalSeries_1 = indicator.targetSeries[0];\n\t                var validData_1 = indicator.points;\n\t                if (validData_1.length && validData_1.length >= indicator.period) {\n\t                    var k = (2 / (indicator.period + 1));\n\t                    var average = 0;\n\t                    var sum = 0;\n\t                    var sumOfSMA = 0;\n\t                    var averageSMA = 0;\n\t                    var smaValues = [];\n\t                    var index = 0;\n\t                    var length_1 = validData_1.length;\n\t                    var period = indicator.period;\n\t                    while (length_1 >= period) {\n\t                        sum = 0;\n\t                        index = validData_1.length - length_1;\n\t                        for (var j = index; j < index + period; j++) {\n\t                            sum = sum + validData_1[j][field];\n\t                        }\n\t                        sum = sum / period;\n\t                        smaValues.push(sum);\n\t                        length_1--;\n\t                    }\n\t                    for (var k_1 = 0; k_1 < period - 1; k_1++) {\n\t                        sum = 0;\n\t                        for (var j = 0; j < k_1 + 1; j++) {\n\t                            sum = sum + validData_1[j][field];\n\t                        }\n\t                        sum = sum / (k_1 + 1);\n\t                        smaValues.splice(k_1, 0, sum);\n\t                    }\n\t                    index = indicator.period;\n\t                    while (index <= smaValues.length) {\n\t                        sum = 0;\n\t                        for (var j = index - indicator.period; j < index; j++) {\n\t                            sum = sum + smaValues[j];\n\t                        }\n\t                        sum = sum / indicator.period;\n\t                        tmaPoints.push(this.getDataPoint(validData_1[index - 1][xField], sum, validData_1[index - 1], signalSeries_1, tmaPoints.length));\n\t                        index++;\n\t                    }\n\t                }\n\t            }\n\t            this.setSeriesRange(tmaPoints, indicator);\n\t        };\n\t        TmaIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        TmaIndicator.prototype.getModuleName = function () {\n\t            return 'TmaIndicator';\n\t        };\n\t        return TmaIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.TmaIndicator = TmaIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationDistributionIndicator = (function (_super) {\n\t        __extends(AccumulationDistributionIndicator, _super);\n\t        function AccumulationDistributionIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        AccumulationDistributionIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var sourceSeries = indicator.sourceSeries;\n\t            var adPoints = [];\n\t            var validData = indicator.points;\n\t            if (validData.length > 0 && validData.length > indicator.period) {\n\t                adPoints = this.calculateADPoints(indicator, validData);\n\t            }\n\t            this.setSeriesRange(adPoints, indicator);\n\t        };\n\t        AccumulationDistributionIndicator.prototype.calculateADPoints = function (indicator, validData) {\n\t            var temp = [];\n\t            var sum = 0;\n\t            var i = 0;\n\t            var value = 0;\n\t            var high = 0;\n\t            var low = 0;\n\t            var close = 0;\n\t            var signalSeries = indicator.targetSeries[0];\n\t            for (i = 0; i < validData.length; i++) {\n\t                high = Number(validData[i].high);\n\t                low = Number(validData[i].low);\n\t                close = Number(validData[i].close);\n\t                value = ((close - low) - (high - close)) / (high - low);\n\t                sum = sum + value * Number(validData[i].volume);\n\t                temp[i] = this.getDataPoint(validData[i].x, sum, validData[i], signalSeries, temp.length);\n\t            }\n\t            return temp;\n\t        };\n\t        AccumulationDistributionIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        AccumulationDistributionIndicator.prototype.getModuleName = function () {\n\t            return 'AccumulationDistributionIndicator';\n\t        };\n\t        return AccumulationDistributionIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.AccumulationDistributionIndicator = AccumulationDistributionIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AtrIndicator = (function (_super) {\n\t        __extends(AtrIndicator, _super);\n\t        function AtrIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        AtrIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var sourceSeries = indicator.sourceSeries;\n\t            var atrPoints = [];\n\t            var validData = indicator.points;\n\t            if (validData.length > 0 && validData.length > indicator.period) {\n\t                this.calculateATRPoints(indicator, validData);\n\t            }\n\t        };\n\t        AtrIndicator.prototype.calculateATRPoints = function (indicator, validData) {\n\t            var average = 0;\n\t            var highLow = 0;\n\t            var highClose = 0;\n\t            var lowClose = 0;\n\t            var trueRange = 0;\n\t            var points = [];\n\t            var temp = [];\n\t            var period = indicator.period;\n\t            var sum = 0;\n\t            var y = 'y';\n\t            var signalSeries = indicator.targetSeries[0];\n\t            for (var i = 0; i < validData.length; i++) {\n\t                highLow = Number(validData[i].high) - Number(validData[i].low);\n\t                if (i > 0) {\n\t                    highClose = Math.abs(Number(validData[i].high) - Number(validData[i - 1].close));\n\t                    lowClose = Math.abs(Number(validData[i].low) - Number(validData[i - 1].close));\n\t                }\n\t                trueRange = Math.max(highLow, highClose, lowClose);\n\t                sum = sum + trueRange;\n\t                if (i >= period) {\n\t                    average = (Number(temp[i - 1][y]) * (period - 1) + trueRange) / period;\n\t                    points.push(this.getDataPoint(validData[i].x, average, validData[i], signalSeries, points.length));\n\t                }\n\t                else {\n\t                    average = sum / period;\n\t                    if (i === period - 1) {\n\t                        points.push(this.getDataPoint(validData[i].x, average, validData[i], signalSeries, points.length));\n\t                    }\n\t                }\n\t                temp[i] = { x: validData[i].x, y: average };\n\t            }\n\t            this.setSeriesRange(points, indicator);\n\t        };\n\t        AtrIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        AtrIndicator.prototype.getModuleName = function () {\n\t            return 'AtrIndicator';\n\t        };\n\t        return AtrIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.AtrIndicator = AtrIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var MomentumIndicator = (function (_super) {\n\t        __extends(MomentumIndicator, _super);\n\t        function MomentumIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        MomentumIndicator.prototype.initSeriesCollection = function (indicator, chart) {\n\t            _super.prototype.initSeriesCollection.call(this, indicator, chart);\n\t            var upperLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            _super.prototype.setSeriesProperties.call(this, upperLine, indicator, 'UpperLine', indicator.upperLine.color, indicator.upperLine.width, chart);\n\t        };\n\t        MomentumIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var upperCollection = [];\n\t            var signalCollection = [];\n\t            var validData = indicator.points;\n\t            if (validData && validData.length) {\n\t                var upperSeries = indicator.targetSeries[1];\n\t                var signalSeries = indicator.targetSeries[0];\n\t                var length_1 = indicator.period;\n\t                if (validData.length >= indicator.period) {\n\t                    for (var i = 0; i < validData.length; i++) {\n\t                        upperCollection.push(this.getDataPoint(validData[i].x, 100, validData[i], upperSeries, upperCollection.length));\n\t                        if (!(i < length_1)) {\n\t                            signalCollection.push(this.getDataPoint(validData[i].x, (Number(validData[i].close) / Number(validData[i - length_1].close) * 100), validData[i], signalSeries, signalCollection.length));\n\t                        }\n\t                    }\n\t                }\n\t                this.setSeriesRange(signalCollection, indicator, indicator.targetSeries[0]);\n\t                this.setSeriesRange(upperCollection, indicator, indicator.targetSeries[1]);\n\t            }\n\t        };\n\t        MomentumIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        MomentumIndicator.prototype.getModuleName = function () {\n\t            return 'MomentumIndicator';\n\t        };\n\t        return MomentumIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.MomentumIndicator = MomentumIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var RsiIndicator = (function (_super) {\n\t        __extends(RsiIndicator, _super);\n\t        function RsiIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        RsiIndicator.prototype.initSeriesCollection = function (indicator, chart) {\n\t            _super.prototype.initSeriesCollection.call(this, indicator, chart);\n\t            if (indicator.showZones) {\n\t                var lowerLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                _super.prototype.setSeriesProperties.call(this, lowerLine, indicator, 'LowerLine', indicator.lowerLine.color, indicator.lowerLine.width, chart);\n\t                var upperLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                _super.prototype.setSeriesProperties.call(this, upperLine, indicator, 'UpperLine', indicator.upperLine.color, indicator.upperLine.width, chart);\n\t            }\n\t        };\n\t        RsiIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var signalCollection = [];\n\t            var lowerCollection = [];\n\t            var upperCollection = [];\n\t            var signalSeries = indicator.targetSeries[0];\n\t            var validData = indicator.points;\n\t            if (validData.length && validData.length >= indicator.period) {\n\t                if (indicator.showZones) {\n\t                    for (var i = 0; i < validData.length; i++) {\n\t                        upperCollection.push(this.getDataPoint(validData[i].x, indicator.overBought, validData[i], indicator.targetSeries[1], upperCollection.length));\n\t                        lowerCollection.push(this.getDataPoint(validData[i].x, indicator.overSold, validData[i], indicator.targetSeries[2], lowerCollection.length));\n\t                    }\n\t                }\n\t                var prevClose = Number(validData[0].close);\n\t                var gain = 0;\n\t                var loss = 0;\n\t                for (var i = 1; i <= indicator.period; i++) {\n\t                    var close_1 = Number(validData[i].close);\n\t                    if (close_1 > prevClose) {\n\t                        gain += close_1 - prevClose;\n\t                    }\n\t                    else {\n\t                        loss += prevClose - close_1;\n\t                    }\n\t                    prevClose = close_1;\n\t                }\n\t                gain = gain / indicator.period;\n\t                loss = loss / indicator.period;\n\t                signalCollection.push(this.getDataPoint(validData[indicator.period].x, 100 - (100 / (1 + gain / loss)), validData[indicator.period], signalSeries, signalCollection.length));\n\t                for (var j = indicator.period + 1; j < validData.length; j++) {\n\t                    var close_2 = Number(validData[j].close);\n\t                    if (close_2 > prevClose) {\n\t                        gain = (gain * (indicator.period - 1) + (close_2 - prevClose)) / indicator.period;\n\t                        loss = (loss * (indicator.period - 1)) / indicator.period;\n\t                    }\n\t                    else if (close_2 < prevClose) {\n\t                        loss = (loss * (indicator.period - 1) + (prevClose - close_2)) / indicator.period;\n\t                        gain = (gain * (indicator.period - 1)) / indicator.period;\n\t                    }\n\t                    prevClose = close_2;\n\t                    signalCollection.push(this.getDataPoint(validData[j].x, 100 - (100 / (1 + gain / loss)), validData[j], signalSeries, signalCollection.length));\n\t                }\n\t            }\n\t            this.setSeriesRange(signalCollection, indicator, indicator.targetSeries[0]);\n\t            if (indicator.showZones) {\n\t                this.setSeriesRange(upperCollection, indicator, indicator.targetSeries[1]);\n\t                this.setSeriesRange(lowerCollection, indicator, indicator.targetSeries[2]);\n\t            }\n\t        };\n\t        RsiIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        RsiIndicator.prototype.getModuleName = function () {\n\t            return 'RsiIndicator';\n\t        };\n\t        return RsiIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.RsiIndicator = RsiIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var StochasticIndicator = (function (_super) {\n\t        __extends(StochasticIndicator, _super);\n\t        function StochasticIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        StochasticIndicator.prototype.initSeriesCollection = function (indicator, chart) {\n\t            _super.prototype.initSeriesCollection.call(this, indicator, chart);\n\t            var periodLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            this.setSeriesProperties(periodLine, indicator, 'PeriodLine', indicator.periodLine.color, indicator.periodLine.width, chart);\n\t            if (indicator.showZones) {\n\t                var upperSeries = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                this.setSeriesProperties(upperSeries, indicator, 'UpperLine', indicator.upperLine.color, indicator.upperLine.width, chart);\n\t                var lowerSeries = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                this.setSeriesProperties(lowerSeries, indicator, 'LowerLine', indicator.lowerLine.color, indicator.lowerLine.width, chart);\n\t            }\n\t        };\n\t        StochasticIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var signalCollection = [];\n\t            var upperCollection = [];\n\t            var lowerCollection = [];\n\t            var periodCollection = [];\n\t            var source = [];\n\t            var sourceSeries = indicator.sourceSeries;\n\t            var point = {};\n\t            var validData = indicator.points;\n\t            if (validData.length && validData.length >= indicator.period) {\n\t                if (indicator.showZones) {\n\t                    for (var i = 0; i < validData.length; i++) {\n\t                        upperCollection.push(this.getDataPoint(validData[i].x, indicator.overBought, validData[i], indicator.targetSeries[2], upperCollection.length));\n\t                        lowerCollection.push(this.getDataPoint(validData[i].x, indicator.overSold, validData[i], indicator.targetSeries[3], lowerCollection.length));\n\t                    }\n\t                }\n\t                source = this.calculatePeriod(indicator.period, indicator.kPeriod, validData, indicator.targetSeries[1]);\n\t                periodCollection = this.smaCalculation(indicator.period, indicator.kPeriod, source, indicator.targetSeries[1]);\n\t                signalCollection = this.smaCalculation(indicator.period + indicator.kPeriod - 1, indicator.dPeriod, source, indicator.targetSeries[0]);\n\t            }\n\t            this.setSeriesRange(signalCollection, indicator, indicator.targetSeries[0]);\n\t            this.setSeriesRange(periodCollection, indicator, indicator.targetSeries[1]);\n\t            if (indicator.showZones) {\n\t                this.setSeriesRange(upperCollection, indicator, indicator.targetSeries[2]);\n\t                this.setSeriesRange(lowerCollection, indicator, indicator.targetSeries[3]);\n\t            }\n\t        };\n\t        StochasticIndicator.prototype.smaCalculation = function (period, kPeriod, data, sourceSeries) {\n\t            var pointCollection = [];\n\t            if (data.length >= period + kPeriod) {\n\t                var count = period + (kPeriod - 1);\n\t                var temp = [];\n\t                var values = [];\n\t                for (var i = 0; i < data.length; i++) {\n\t                    var value = Number(data[i].y);\n\t                    temp.push(value);\n\t                }\n\t                var length_1 = temp.length;\n\t                while (length_1 >= count) {\n\t                    var sum = 0;\n\t                    for (var i = period - 1; i < (period + kPeriod - 1); i++) {\n\t                        sum = sum + temp[i];\n\t                    }\n\t                    sum = sum / kPeriod;\n\t                    values.push(sum.toFixed(2));\n\t                    temp.splice(0, 1);\n\t                    length_1 = temp.length;\n\t                }\n\t                var len = count - 1;\n\t                for (var i = 0; i < data.length; i++) {\n\t                    if (!(i < len)) {\n\t                        pointCollection.push(this.getDataPoint(data[i].x, Number(values[i - len]), data[i], sourceSeries, pointCollection.length));\n\t                        data[i].y = Number((values[i - len]));\n\t                    }\n\t                }\n\t            }\n\t            return pointCollection;\n\t        };\n\t        StochasticIndicator.prototype.calculatePeriod = function (period, kPeriod, data, series) {\n\t            var lowValues = [];\n\t            var highValues = [];\n\t            var closeValues = [];\n\t            var modifiedSource = [];\n\t            for (var j = 0; j < data.length; j++) {\n\t                lowValues[j] = data[j].low;\n\t                highValues[j] = data[j].high;\n\t                closeValues[j] = data[j].close;\n\t            }\n\t            if (data.length > period) {\n\t                var totalPeriod = period + kPeriod;\n\t                var mins = [];\n\t                var maxs = [];\n\t                for (var i = 0; i < period - 1; ++i) {\n\t                    maxs.push(0);\n\t                    mins.push(0);\n\t                    modifiedSource.push(this.getDataPoint(data[i].x, data[i].close, data[i], series, modifiedSource.length));\n\t                }\n\t                for (var i = period - 1; i < data.length; ++i) {\n\t                    var min = Number.MAX_VALUE;\n\t                    var max = Number.MIN_VALUE;\n\t                    for (var j = 0; j < period; ++j) {\n\t                        min = Math.min(min, lowValues[i - j]);\n\t                        max = Math.max(max, highValues[i - j]);\n\t                    }\n\t                    maxs.push(max);\n\t                    mins.push(min);\n\t                }\n\t                for (var i = period - 1; i < data.length; ++i) {\n\t                    var top_1 = 0;\n\t                    var bottom = 0;\n\t                    top_1 += closeValues[i] - mins[i];\n\t                    bottom += maxs[i] - mins[i];\n\t                    modifiedSource.push(this.getDataPoint(data[i].x, (top_1 / bottom) * 100, data[i], series, modifiedSource.length));\n\t                }\n\t            }\n\t            return modifiedSource;\n\t        };\n\t        StochasticIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        StochasticIndicator.prototype.getModuleName = function () {\n\t            return 'StochasticIndicator';\n\t        };\n\t        return StochasticIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.StochasticIndicator = StochasticIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BollingerBands = (function (_super) {\n\t        __extends(BollingerBands, _super);\n\t        function BollingerBands() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        BollingerBands.prototype.initSeriesCollection = function (indicator, chart) {\n\t            indicator.targetSeries = [];\n\t            var rangeArea = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            rangeArea.type = 'RangeArea';\n\t            if (indicator.bandColor !== 'transparent' && indicator.bandColor !== 'none') {\n\t                this.setSeriesProperties(rangeArea, indicator, 'BollingerBand', indicator.bandColor, 0, chart);\n\t            }\n\t            var signalLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            this.setSeriesProperties(signalLine, indicator, 'SignalLine', indicator.fill, indicator.width, chart);\n\t            var upperLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            this.setSeriesProperties(upperLine, indicator, 'UpperLine', indicator.upperLine.color, indicator.upperLine.width, chart);\n\t            var lowerLine = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t            this.setSeriesProperties(lowerLine, indicator, 'LowerLine', indicator.lowerLine.color, indicator.lowerLine.width, chart);\n\t        };\n\t        BollingerBands.prototype.initDataSource = function (indicator, chart) {\n\t            var enableBand = indicator.bandColor !== 'transparent' && indicator.bandColor !== 'none';\n\t            var start = enableBand ? 1 : 0;\n\t            var signalCollection = [];\n\t            var upperCollection = [];\n\t            var lowerCollection = [];\n\t            var bandCollection = [];\n\t            var upperSeries = indicator.targetSeries[start + 1];\n\t            var lowerSeries = indicator.targetSeries[start + 2];\n\t            var signalSeries = indicator.targetSeries[start];\n\t            var rangeAreaSeries = enableBand ? indicator.targetSeries[0] : null;\n\t            var validData = indicator.points;\n\t            if (validData.length && validData.length >= indicator.period) {\n\t                var sum = 0;\n\t                var deviationSum = 0;\n\t                var multiplier = indicator.standardDeviation;\n\t                var limit = validData.length;\n\t                var length_1 = Math.round(indicator.period);\n\t                var smaPoints = [];\n\t                var deviations = [];\n\t                var bollingerPoints = [];\n\t                for (var i_1 = 0; i_1 < length_1; i_1++) {\n\t                    sum += Number(validData[i_1].close);\n\t                }\n\t                var sma = sum / indicator.period;\n\t                for (var i_2 = 0; i_2 < limit; i_2++) {\n\t                    var y = Number(validData[i_2].close);\n\t                    if (i_2 >= length_1 - 1 && i_2 < limit) {\n\t                        if (i_2 - indicator.period >= 0) {\n\t                            var diff = y - Number(validData[i_2 - length_1].close);\n\t                            sum = sum + diff;\n\t                            sma = sum / (indicator.period);\n\t                            smaPoints[i_2] = sma;\n\t                            deviations[i_2] = Math.pow(y - sma, 2);\n\t                            deviationSum += deviations[i_2] - deviations[i_2 - length_1];\n\t                        }\n\t                        else {\n\t                            smaPoints[i_2] = sma;\n\t                            deviations[i_2] = Math.pow(y - sma, 2);\n\t                            deviationSum += deviations[i_2];\n\t                        }\n\t                        var range = Math.sqrt(deviationSum / (indicator.period));\n\t                        var lowerBand = smaPoints[i_2] - (multiplier * range);\n\t                        var upperBand = smaPoints[i_2] + (multiplier * range);\n\t                        if (i_2 + 1 === length_1) {\n\t                            for (var j_1 = 0; j_1 < length_1 - 1; j_1++) {\n\t                                bollingerPoints[j_1] = {\n\t                                    'X': validData[j_1].x, 'mb': smaPoints[i_2],\n\t                                    'lb': lowerBand, 'ub': upperBand, visible: true\n\t                                };\n\t                            }\n\t                        }\n\t                        bollingerPoints[i_2] = {\n\t                            'X': validData[i_2].x, 'mb': smaPoints[i_2],\n\t                            'lb': lowerBand, 'ub': upperBand, visible: true\n\t                        };\n\t                    }\n\t                    else {\n\t                        if (i_2 < indicator.period - 1) {\n\t                            smaPoints[i_2] = sma;\n\t                            deviations[i_2] = Math.pow(y - sma, 2);\n\t                            deviationSum += deviations[i_2];\n\t                        }\n\t                    }\n\t                }\n\t                var i = -1;\n\t                var j = -1;\n\t                for (var k = 0; k < limit; k++) {\n\t                    if (k >= (length_1 - 1)) {\n\t                        var ub = 'ub';\n\t                        var lb = 'lb';\n\t                        var mb = 'mb';\n\t                        upperCollection.push(this.getDataPoint(validData[k].x, bollingerPoints[k][ub], validData[k], upperSeries, upperCollection.length));\n\t                        lowerCollection.push(this.getDataPoint(validData[k].x, bollingerPoints[k][lb], validData[k], lowerSeries, lowerCollection.length));\n\t                        signalCollection.push(this.getDataPoint(validData[k].x, bollingerPoints[k][mb], validData[k], signalSeries, signalCollection.length));\n\t                        if (enableBand) {\n\t                            bandCollection.push(this.getRangePoint(validData[k].x, upperCollection[++i].y, lowerCollection[++j].y, validData[k], rangeAreaSeries, bandCollection.length));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (enableBand) {\n\t                this.setSeriesRange(bandCollection, indicator, indicator.targetSeries[0]);\n\t            }\n\t            this.setSeriesRange(signalCollection, indicator, indicator.targetSeries[start]);\n\t            this.setSeriesRange(upperCollection, indicator, indicator.targetSeries[start + 1]);\n\t            this.setSeriesRange(lowerCollection, indicator, indicator.targetSeries[start + 2]);\n\t        };\n\t        BollingerBands.prototype.destroy = function (chart) {\n\t        };\n\t        BollingerBands.prototype.getModuleName = function () {\n\t            return 'BollingerBandsIndicator';\n\t        };\n\t        return BollingerBands;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.BollingerBands = BollingerBands;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(50)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, indicator_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var MacdIndicator = (function (_super) {\n\t        __extends(MacdIndicator, _super);\n\t        function MacdIndicator() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        MacdIndicator.prototype.initSeriesCollection = function (indicator, chart) {\n\t            _super.prototype.initSeriesCollection.call(this, indicator, chart);\n\t            if (indicator.macdType === 'Line' || indicator.macdType === 'Both') {\n\t                var macdSeries = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                this.setSeriesProperties(macdSeries, indicator, 'MacdLine', indicator.macdLine.color, indicator.macdLine.width, chart);\n\t            }\n\t            if (indicator.macdType === 'Histogram' || indicator.macdType === 'Both') {\n\t                var histogramSeries = new chart_series_1.Series(indicator, 'targetSeries', {}, true);\n\t                histogramSeries.type = 'Column';\n\t                this.setSeriesProperties(histogramSeries, indicator, 'Histogram', indicator.macdPositiveColor, indicator.width, chart);\n\t            }\n\t        };\n\t        MacdIndicator.prototype.initDataSource = function (indicator, chart) {\n\t            var signalCollection = [];\n\t            var fastPeriod = indicator.fastPeriod;\n\t            var slowPeriod = indicator.slowPeriod;\n\t            var trigger = indicator.period;\n\t            var length = fastPeriod + trigger;\n\t            var macdCollection = [];\n\t            var histogramCollection = [];\n\t            var validData = indicator.points;\n\t            var signalSeries = indicator.targetSeries[0];\n\t            var histogramSeries;\n\t            var macdLineSeries;\n\t            if (indicator.macdType === 'Histogram') {\n\t                histogramSeries = indicator.targetSeries[1];\n\t            }\n\t            else {\n\t                macdLineSeries = indicator.targetSeries[1];\n\t                if (indicator.macdType === 'Both') {\n\t                    histogramSeries = indicator.targetSeries[2];\n\t                }\n\t            }\n\t            if (validData && length < validData.length && slowPeriod <= fastPeriod &&\n\t                slowPeriod > 0 && (length - 2) >= 0) {\n\t                var shortEMA = this.calculateEMAValues(slowPeriod, validData, 'close');\n\t                var longEMA = this.calculateEMAValues(fastPeriod, validData, 'close');\n\t                var macdValues = this.getMACDVales(indicator, shortEMA, longEMA);\n\t                macdCollection = this.getMACDPoints(indicator, macdValues, validData, macdLineSeries || signalSeries);\n\t                var signalEMA = this.calculateEMAValues(trigger, macdCollection, 'y');\n\t                signalCollection = this.getSignalPoints(indicator, signalEMA, validData, signalSeries);\n\t                if (histogramSeries) {\n\t                    histogramCollection = this.getHistogramPoints(indicator, macdValues, signalEMA, validData, histogramSeries);\n\t                }\n\t            }\n\t            this.setSeriesRange(signalCollection, indicator, indicator.targetSeries[0]);\n\t            if (histogramSeries) {\n\t                this.setSeriesRange(histogramCollection, indicator, histogramSeries);\n\t            }\n\t            if (macdLineSeries) {\n\t                this.setSeriesRange(macdCollection, indicator, macdLineSeries);\n\t            }\n\t        };\n\t        MacdIndicator.prototype.calculateEMAValues = function (period, validData, field) {\n\t            var sum = 0;\n\t            var initialEMA = 0;\n\t            var emaValues = [];\n\t            var emaPercent = (2 / (period + 1));\n\t            for (var i = 0; i < period; i++) {\n\t                sum += Number(validData[i][field]);\n\t            }\n\t            initialEMA = (sum / period);\n\t            emaValues.push(initialEMA);\n\t            var emaAvg = initialEMA;\n\t            for (var j = period; j < validData.length; j++) {\n\t                emaAvg = (Number(validData[j][field]) - emaAvg) * emaPercent + emaAvg;\n\t                emaValues.push(emaAvg);\n\t            }\n\t            return emaValues;\n\t        };\n\t        MacdIndicator.prototype.getMACDPoints = function (indicator, macdPoints, validData, series) {\n\t            var macdCollection = [];\n\t            var dataMACDIndex = indicator.fastPeriod - 1;\n\t            var macdIndex = 0;\n\t            while (dataMACDIndex < validData.length) {\n\t                macdCollection.push(this.getDataPoint(validData[dataMACDIndex].x, macdPoints[macdIndex], validData[dataMACDIndex], series, macdCollection.length));\n\t                dataMACDIndex++;\n\t                macdIndex++;\n\t            }\n\t            return macdCollection;\n\t        };\n\t        MacdIndicator.prototype.getSignalPoints = function (indicator, signalEma, validData, series) {\n\t            var dataSignalIndex = indicator.fastPeriod + indicator.period - 2;\n\t            var signalIndex = 0;\n\t            var signalCollection = [];\n\t            while (dataSignalIndex < validData.length) {\n\t                signalCollection.push(this.getDataPoint(validData[dataSignalIndex].x, signalEma[signalIndex], validData[dataSignalIndex], series, signalCollection.length));\n\t                dataSignalIndex++;\n\t                signalIndex++;\n\t            }\n\t            return signalCollection;\n\t        };\n\t        MacdIndicator.prototype.getMACDVales = function (indicator, shortEma, longEma) {\n\t            var macdPoints = [];\n\t            var diff = indicator.fastPeriod - indicator.slowPeriod;\n\t            for (var i = 0; i < longEma.length; i++) {\n\t                macdPoints.push((shortEma[i + diff] - longEma[i]));\n\t            }\n\t            return macdPoints;\n\t        };\n\t        MacdIndicator.prototype.getHistogramPoints = function (indicator, macdPoints, signalEma, validData, series) {\n\t            var dataHistogramIndex = indicator.fastPeriod + indicator.period - 2;\n\t            var histogramIndex = 0;\n\t            var histogramCollection = [];\n\t            while (dataHistogramIndex < validData.length) {\n\t                histogramCollection.push(this.getDataPoint(validData[dataHistogramIndex].x, macdPoints[histogramIndex + (indicator.period - 1)] - signalEma[histogramIndex], validData[dataHistogramIndex], series, histogramCollection.length, indicator));\n\t                dataHistogramIndex++;\n\t                histogramIndex++;\n\t            }\n\t            return histogramCollection;\n\t        };\n\t        MacdIndicator.prototype.destroy = function (chart) {\n\t        };\n\t        MacdIndicator.prototype.getModuleName = function () {\n\t            return 'MacdIndicator';\n\t        };\n\t        return MacdIndicator;\n\t    }(indicator_base_1.TechnicalAnalysis));\n\t    exports.MacdIndicator = MacdIndicator;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(14), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, chart_series_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Trendlines = (function () {\n\t        function Trendlines() {\n\t        }\n\t        Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n\t            var trendLineSeries = new chart_series_1.Series(trendline, 'targetSeries', {}, true);\n\t            if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n\t                trendLineSeries.type = 'Line';\n\t            }\n\t            else {\n\t                trendLineSeries.type = 'Spline';\n\t            }\n\t            this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n\t        };\n\t        Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n\t            series.name = trendline.name;\n\t            series.xName = 'x';\n\t            series.yName = 'y';\n\t            series.fill = fill || 'blue';\n\t            series.width = width;\n\t            series.clipRectElement = trendline.clipRectElement;\n\t            series.points = [];\n\t            series.enableTooltip = trendline.enableTooltip;\n\t            series.index = trendline.index;\n\t            series.sourceIndex = trendline.sourceIndex;\n\t            series.interior = series.fill;\n\t            series.animation = trendline.animation;\n\t            series.legendShape = 'HorizontalLine';\n\t            series.marker = trendline.marker;\n\t            series.category = 'TrendLine';\n\t            series.chart = chart;\n\t            series.xMin = Infinity;\n\t            series.xMax = -Infinity;\n\t            series.yMin = Infinity;\n\t            series.yMax = -Infinity;\n\t            series.xData = [];\n\t            series.yData = [];\n\t            trendline.targetSeries = series;\n\t        };\n\t        Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n\t            trendline.trendLineElement = element;\n\t            trendline.targetSeries.clipRectElement = clipRectElement;\n\t            trendline.targetSeries.seriesElement = element;\n\t            chart.trendLineElements.appendChild(trendline.trendLineElement);\n\t        };\n\t        Trendlines.prototype.getDataPoint = function (x, y, sourcePoint, series, index) {\n\t            var trendPoint = new chart_series_1.Points();\n\t            trendPoint.x = x;\n\t            trendPoint.y = y;\n\t            trendPoint.xValue = Number(x);\n\t            trendPoint.color = series.fill;\n\t            trendPoint.index = index;\n\t            trendPoint.yValue = Number(y);\n\t            trendPoint.visible = true;\n\t            series.xMin = Math.min(series.xMin, trendPoint.xValue);\n\t            series.yMin = Math.min(series.yMin, trendPoint.yValue);\n\t            series.xMax = Math.max(series.xMax, trendPoint.xValue);\n\t            series.yMax = Math.max(series.yMax, trendPoint.yValue);\n\t            series.xData.push(trendPoint.xValue);\n\t            return trendPoint;\n\t        };\n\t        Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n\t            var xAvg = 0;\n\t            var yAvg = 0;\n\t            var xyAvg = 0;\n\t            var xxAvg = 0;\n\t            var yyAvg = 0;\n\t            var index = 0;\n\t            var slope = 0;\n\t            var intercept = 0;\n\t            while (index < points.length) {\n\t                xAvg += xValues[index];\n\t                yAvg += yValues[index];\n\t                xyAvg += xValues[index] * yValues[index];\n\t                xxAvg += xValues[index] * xValues[index];\n\t                yyAvg += yValues[index] * yValues[index];\n\t                index++;\n\t            }\n\t            var type = trendline.type;\n\t            if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n\t                intercept = trendline.intercept;\n\t                switch (type) {\n\t                    case 'Linear':\n\t                        slope = ((xyAvg) - (trendline.intercept * xAvg)) / xxAvg;\n\t                        break;\n\t                    case 'Exponential':\n\t                        slope = ((xyAvg) - (Math.log(Math.abs(trendline.intercept)) * xAvg)) / xxAvg;\n\t                        break;\n\t                }\n\t            }\n\t            else {\n\t                slope = ((points.length * xyAvg) - (xAvg * yAvg)) / ((points.length * xxAvg) - (xAvg * xAvg));\n\t                if (type === 'Exponential' || type === 'Power') {\n\t                    intercept = Math.exp((yAvg - (slope * xAvg)) / points.length);\n\t                }\n\t                else {\n\t                    intercept = (yAvg - (slope * xAvg)) / points.length;\n\t                }\n\t            }\n\t            return { slope: slope, intercept: intercept };\n\t        };\n\t        Trendlines.prototype.initDataSource = function (trendline, chart) {\n\t            var points = trendline.points;\n\t            if (points && points.length) {\n\t                var trendlineSeries = trendline.targetSeries;\n\t                switch (trendline.type) {\n\t                    case 'Linear':\n\t                        this.setLinearRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                    case 'Exponential':\n\t                        this.setExponentialRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                    case 'MovingAverage':\n\t                        this.setMovingAverageRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                    case 'Polynomial':\n\t                        this.setPolynomialRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                    case 'Power':\n\t                        this.setPowerRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                    case 'Logarithmic':\n\t                        this.setLogarithmicRange(points, trendline, trendlineSeries);\n\t                        break;\n\t                }\n\t                if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n\t                    trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n\t                }\n\t            }\n\t        };\n\t        Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n\t            var xValue = [];\n\t            var yValue = [];\n\t            var index = 0;\n\t            var slopeIntercept;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                xValue.push(point.xValue);\n\t                yValue.push(Math.log(point.yValue));\n\t                index++;\n\t            }\n\t            slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n\t            series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n\t        };\n\t        Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n\t            var xLogValue = [];\n\t            var yLogValue = [];\n\t            var xPointsLgr = [];\n\t            var slopeIntercept;\n\t            var index = 0;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                xPointsLgr.push(point.xValue);\n\t                xLogValue.push(Math.log(point.xValue));\n\t                yLogValue.push(point.yValue);\n\t                index++;\n\t            }\n\t            slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n\t            series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n\t        };\n\t        Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n\t            var xPolyValues = [];\n\t            var yPolyValues = [];\n\t            var index = 0;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                xPolyValues.push(point.xValue);\n\t                yPolyValues.push(point.yValue);\n\t                index++;\n\t            }\n\t            series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n\t        };\n\t        Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n\t            var xValues = [];\n\t            var yValues = [];\n\t            var powerPoints = [];\n\t            var slopeIntercept;\n\t            var index = 0;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                powerPoints.push(point.xValue);\n\t                xValues.push(Math.log(point.xValue));\n\t                yValues.push(Math.log(point.yValue));\n\t                index++;\n\t            }\n\t            slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n\t            series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n\t        };\n\t        Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n\t            var xValues = [];\n\t            var yValues = [];\n\t            var slopeIntercept;\n\t            var index = 0;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                xValues.push(point.xValue);\n\t                yValues.push(point.yValue);\n\t                index++;\n\t            }\n\t            slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n\t            series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n\t        };\n\t        Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n\t            var xValues = [];\n\t            var yValues = [];\n\t            var xAvgValues = [];\n\t            var index = 0;\n\t            while (index < points.length) {\n\t                var point = points[index];\n\t                xAvgValues.push(point.xValue);\n\t                xValues.push(index + 1);\n\t                yValues.push(point.yValue);\n\t                index++;\n\t            }\n\t            series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n\t        };\n\t        Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n\t            var midPoint = Math.round((points.length / 2));\n\t            var pts = [];\n\t            var x1Log = xValues[0] - trendline.backwardForecast;\n\t            var y1Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * Math.log(x1Log));\n\t            var x2Log = xValues[midPoint - 1];\n\t            var y2Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * Math.log(x2Log));\n\t            var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n\t            var y3Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * Math.log(x3Log));\n\t            pts.push(this.getDataPoint(x1Log, y1Log, points[0], series, pts.length));\n\t            pts.push(this.getDataPoint(x2Log, y2Log, points[midPoint - 1], series, pts.length));\n\t            pts.push(this.getDataPoint(x3Log, y3Log, points[points.length - 1], series, pts.length));\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n\t            var midPoint = Math.round((points.length / 2));\n\t            var pts = [];\n\t            var x1 = xValues[0] - trendline.backwardForecast;\n\t            x1 = x1 > -1 ? x1 : 0;\n\t            var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n\t            var x2 = xValues[midPoint - 1];\n\t            var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n\t            var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n\t            var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n\t            pts.push(this.getDataPoint(x1, y1, points[0], series, pts.length));\n\t            pts.push(this.getDataPoint(x2, y2, points[midPoint - 1], series, pts.length));\n\t            pts.push(this.getDataPoint(x3, y3, points[points.length - 1], series, pts.length));\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n\t            var midPoint = Math.round((points.length / 2));\n\t            var pts = [];\n\t            var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n\t            polynomialOrder = Math.max(2, polynomialOrder);\n\t            polynomialOrder = Math.min(6, polynomialOrder);\n\t            trendline.polynomialOrder = polynomialOrder;\n\t            trendline.polynomialSlopes = [];\n\t            trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n\t            var index = 0;\n\t            while (index < xValues.length) {\n\t                var xVal = xValues[index];\n\t                var yVal = yValues[index];\n\t                var subIndex = 0;\n\t                while (subIndex <= trendline.polynomialOrder) {\n\t                    if (!trendline.polynomialSlopes[subIndex]) {\n\t                        trendline.polynomialSlopes[subIndex] = 0;\n\t                    }\n\t                    trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n\t                    ++subIndex;\n\t                }\n\t                index++;\n\t            }\n\t            var numArray = [];\n\t            numArray.length = 1 + 2 * trendline.polynomialOrder;\n\t            var matrix = [];\n\t            matrix.length = trendline.polynomialOrder + 1;\n\t            var newIndex = 0;\n\t            while (newIndex < (trendline.polynomialOrder + 1)) {\n\t                matrix[newIndex] = [];\n\t                matrix[newIndex].length = 3;\n\t                newIndex++;\n\t            }\n\t            var nIndex = 0;\n\t            var num1 = 0;\n\t            while (nIndex < xValues.length) {\n\t                var d = xValues[nIndex];\n\t                var num2 = 1.0;\n\t                var nIndex2 = 0;\n\t                while (nIndex2 < numArray.length) {\n\t                    if (!numArray[nIndex2]) {\n\t                        numArray[nIndex2] = 0;\n\t                    }\n\t                    numArray[nIndex2] += num2;\n\t                    num2 *= d;\n\t                    ++num1;\n\t                    ++nIndex2;\n\t                }\n\t                ++nIndex;\n\t            }\n\t            var nnIndex = 0;\n\t            while (nnIndex <= trendline.polynomialOrder) {\n\t                var nnIndex2 = 0;\n\t                while (nnIndex2 <= trendline.polynomialOrder) {\n\t                    matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n\t                    ++nnIndex2;\n\t                }\n\t                ++nnIndex;\n\t            }\n\t            if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n\t                trendline.polynomialSlopes = null;\n\t            }\n\t            pts = this.getPoints(trendline, points, xValues, yValues, series);\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n\t            var pts = [];\n\t            var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n\t            period = Math.max(2, period);\n\t            var index = 0;\n\t            var y;\n\t            var x;\n\t            var count;\n\t            var nullCount;\n\t            while (index < points.length - 1) {\n\t                y = count = nullCount = 0;\n\t                for (var j = index; count < period; j++) {\n\t                    count++;\n\t                    if (!yValues[j]) {\n\t                        nullCount++;\n\t                    }\n\t                    y += yValues[j];\n\t                }\n\t                y = period - nullCount <= 0 ? null : y / (period - nullCount);\n\t                if (y && !isNaN(y)) {\n\t                    x = xValues[period - 1 + index];\n\t                    pts.push(this.getDataPoint(x, y, points[period - 1 + index], series, pts.length));\n\t                }\n\t                index++;\n\t            }\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n\t            var pts = [];\n\t            var x1Linear = xValues[0] - trendline.backwardForecast;\n\t            var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n\t            var x2Linear = xValues[xValues.length - 1] + trendline.forwardForecast;\n\t            var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n\t            pts.push(this.getDataPoint(x1Linear, y1Linear, points[0], series, pts.length));\n\t            pts.push(this.getDataPoint(x2Linear, y2Linear, points[points.length - 1], series, pts.length));\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n\t            var midPoint = Math.round((points.length / 2));\n\t            var ptsExp = [];\n\t            var x1 = xValues[0] - trendline.backwardForecast;\n\t            var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n\t            var x2 = xValues[midPoint - 1];\n\t            var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n\t            var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n\t            var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n\t            ptsExp.push(this.getDataPoint(x1, y1, points[0], series, ptsExp.length));\n\t            ptsExp.push(this.getDataPoint(x2, y2, points[midPoint - 1], series, ptsExp.length));\n\t            ptsExp.push(this.getDataPoint(x3, y3, points[points.length - 1], series, ptsExp.length));\n\t            return ptsExp;\n\t        };\n\t        Trendlines.prototype.getPoints = function (trendline, points, xValues, yValues, series) {\n\t            var midPoint = Math.round((points.length / 2));\n\t            var polynomialSlopes = trendline.polynomialSlopes;\n\t            var pts = [];\n\t            var x1 = 1;\n\t            var index = 1;\n\t            var xValue;\n\t            var yValue;\n\t            while (index <= polynomialSlopes.length) {\n\t                if (index === 1) {\n\t                    xValue = xValues[0] - trendline.backwardForecast;\n\t                    yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n\t                    pts.push(this.getDataPoint(xValue, yValue, points[0], series, pts.length));\n\t                }\n\t                else if (index === polynomialSlopes.length) {\n\t                    xValue = xValues[points.length - 1] + trendline.forwardForecast;\n\t                    yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n\t                    pts.push(this.getDataPoint(xValue, yValue, points[points.length - 1], series, pts.length));\n\t                }\n\t                else {\n\t                    x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n\t                    xValue = xValues[parseInt(x1.toString(), 10) - 1];\n\t                    yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n\t                    pts.push(this.getDataPoint(xValue, yValue, points[parseInt(x1.toString(), 10) - 1], series, pts.length));\n\t                }\n\t                index++;\n\t            }\n\t            return pts;\n\t        };\n\t        Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n\t            var sum = 0;\n\t            var index = 0;\n\t            while (index < slopes.length) {\n\t                sum += slopes[index] * Math.pow(x, index);\n\t                index++;\n\t            }\n\t            return sum;\n\t        };\n\t        Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n\t            var length = matrix.length;\n\t            var numArray1 = [];\n\t            var numArray2 = [];\n\t            var numArray3 = [];\n\t            numArray1.length = length;\n\t            numArray2.length = length;\n\t            numArray3.length = length;\n\t            var index = 0;\n\t            while (index < length) {\n\t                numArray3[index] = 0;\n\t                ++index;\n\t            }\n\t            var index1 = 0;\n\t            while (index1 < length) {\n\t                var num1 = 0;\n\t                var index2 = 0;\n\t                var index3 = 0;\n\t                var index4 = 0;\n\t                while (index4 < length) {\n\t                    if (numArray3[index4] !== 1) {\n\t                        var index5 = 0;\n\t                        while (index5 < length) {\n\t                            if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n\t                                num1 = Math.abs(matrix[index4][index5]);\n\t                                index2 = index4;\n\t                                index3 = index5;\n\t                            }\n\t                            ++index5;\n\t                        }\n\t                    }\n\t                    ++index4;\n\t                }\n\t                ++numArray3[index3];\n\t                if (index2 !== index3) {\n\t                    var index4_1 = 0;\n\t                    while (index4_1 < length) {\n\t                        var num2 = matrix[index2][index4_1];\n\t                        matrix[index2][index4_1] = matrix[index3][index4_1];\n\t                        matrix[index3][index4_1] = num2;\n\t                        ++index4_1;\n\t                    }\n\t                    var num3 = polynomialSlopes[index2];\n\t                    polynomialSlopes[index2] = polynomialSlopes[index3];\n\t                    polynomialSlopes[index3] = num3;\n\t                }\n\t                numArray2[index1] = index2;\n\t                numArray1[index1] = index3;\n\t                if (matrix[index3][index3] === 0.0) {\n\t                    return false;\n\t                }\n\t                var num4 = 1.0 / matrix[index3][index3];\n\t                matrix[index3][index3] = 1.0;\n\t                var iindex4 = 0;\n\t                while (iindex4 < length) {\n\t                    matrix[index3][iindex4] *= num4;\n\t                    ++iindex4;\n\t                }\n\t                polynomialSlopes[index3] *= num4;\n\t                var iandex4 = 0;\n\t                while (iandex4 < length) {\n\t                    if (iandex4 !== index3) {\n\t                        var num2 = matrix[iandex4][index3];\n\t                        matrix[iandex4][index3] = 0.0;\n\t                        var index5 = 0;\n\t                        while (index5 < length) {\n\t                            matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n\t                            ++index5;\n\t                        }\n\t                        polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n\t                    }\n\t                    ++iandex4;\n\t                }\n\t                ++index1;\n\t            }\n\t            var iindex1 = length - 1;\n\t            while (iindex1 >= 0) {\n\t                if (numArray2[iindex1] !== numArray1[iindex1]) {\n\t                    var iindex2 = 0;\n\t                    while (iindex2 < length) {\n\t                        var num = matrix[iindex2][numArray2[iindex1]];\n\t                        matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n\t                        matrix[iindex2][numArray1[iindex1]] = num;\n\t                        ++iindex2;\n\t                    }\n\t                }\n\t                --iindex1;\n\t            }\n\t            return true;\n\t        };\n\t        Trendlines.prototype.getTrendLineElements = function (series, chart) {\n\t            helper_1.findClipRect(series);\n\t            var clipRect = series.clipRect;\n\t            var clipRectElement = chart.renderer.drawClipPath(new helper_1.RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n\t                x: 0, y: 0, width: clipRect.width,\n\t                height: clipRect.height,\n\t            }));\n\t            var element;\n\t            element = chart.renderer.createGroup({\n\t                'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n\t                'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n\t                'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n\t            });\n\t            element.appendChild(clipRectElement);\n\t            for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n\t                var trendline = _a[_i];\n\t                this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n\t            }\n\t        };\n\t        Trendlines.prototype.destroy = function (chart) {\n\t        };\n\t        Trendlines.prototype.getModuleName = function () {\n\t            return 'TrendLine';\n\t        };\n\t        return Trendlines;\n\t    }());\n\t    exports.Trendlines = Trendlines;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Crosshair = (function () {\n\t        function Crosshair(chart) {\n\t            this.arrowLocation = new helper_1.ChartLocation(0, 0);\n\t            this.rx = 2;\n\t            this.ry = 2;\n\t            this.chart = chart;\n\t            this.elementID = this.chart.element.id;\n\t            this.addEventListener();\n\t        }\n\t        Crosshair.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            var cancelEvent = ej2_base_1.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMoveHandler, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.mouseUpHandler, this);\n\t            this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n\t            this.chart.on('tapHold', this.longPress, this);\n\t        };\n\t        Crosshair.prototype.mouseUpHandler = function () {\n\t            if (this.chart.startMove) {\n\t                this.removeCrosshair(2000);\n\t            }\n\t        };\n\t        Crosshair.prototype.mouseLeaveHandler = function () {\n\t            this.removeCrosshair(1000);\n\t        };\n\t        Crosshair.prototype.mouseMoveHandler = function (event) {\n\t            var chart = this.chart;\n\t            if (event.type === 'touchmove' && (ej2_base_1.Browser.isIos || ej2_base_1.Browser.isIos7) && chart.startMove && event.preventDefault) {\n\t                event.preventDefault();\n\t            }\n\t            if (!chart.disableTrackTooltip) {\n\t                if (helper_1.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                    if (chart.startMove || !chart.isTouch) {\n\t                        this.crosshair();\n\t                    }\n\t                }\n\t                else {\n\t                    this.removeCrosshair(1000);\n\t                }\n\t            }\n\t        };\n\t        Crosshair.prototype.longPress = function () {\n\t            var chart = this.chart;\n\t            if (helper_1.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                this.crosshair();\n\t            }\n\t            return false;\n\t        };\n\t        Crosshair.prototype.crosshair = function () {\n\t            var chart = this.chart;\n\t            var horizontalCross = '';\n\t            var verticalCross = '';\n\t            var options;\n\t            var crosshair = chart.crosshair;\n\t            var chartRect = chart.chartAxisLayoutPanel.seriesClipRect;\n\t            var crossGroup = document.getElementById(this.elementID + '_UserInteraction');\n\t            this.stopAnimation();\n\t            if (chart.tooltip.enable && !helper_1.withInBounds(chart.tooltipModule.valueX, chart.tooltipModule.valueY, chartRect)) {\n\t                return null;\n\t            }\n\t            this.valueX = chart.tooltip.enable ? chart.tooltipModule.valueX : chart.mouseX;\n\t            this.valueY = chart.tooltip.enable ? chart.tooltipModule.valueY : chart.mouseY;\n\t            crossGroup.setAttribute('opacity', '1');\n\t            if (crosshair.lineType === 'Both' || crosshair.lineType === 'Horizontal') {\n\t                horizontalCross += 'M ' + chartRect.x + ' ' + this.valueY +\n\t                    ' L ' + (chartRect.x + chartRect.width) + ' ' + this.valueY;\n\t            }\n\t            if (crosshair.lineType === 'Both' || crosshair.lineType === 'Vertical') {\n\t                verticalCross += 'M ' + this.valueX + ' ' + chartRect.y +\n\t                    ' L ' + this.valueX + ' ' + (chartRect.y + chartRect.height);\n\t            }\n\t            if (crossGroup.childNodes.length === 0) {\n\t                var axisTooltipGroup = chart.renderer.createGroup({ 'id': this.elementID + '_crosshair_axis' });\n\t                options = new helper_1.PathOption(this.elementID + '_HorizontalLine', 'none', crosshair.line.width, crosshair.line.color, 1, null, horizontalCross);\n\t                this.renderCrosshairLine(options, crossGroup);\n\t                options.d = verticalCross;\n\t                options.id = this.elementID + '_VerticalLine';\n\t                this.renderCrosshairLine(options, crossGroup);\n\t                crossGroup.appendChild(axisTooltipGroup);\n\t                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n\t            }\n\t            else {\n\t                document.getElementById(this.elementID + '_HorizontalLine').setAttribute('d', horizontalCross);\n\t                document.getElementById(this.elementID + '_VerticalLine').setAttribute('d', verticalCross);\n\t                this.renderAxisTooltip(chart, chartRect, crossGroup.lastChild);\n\t            }\n\t        };\n\t        Crosshair.prototype.renderCrosshairLine = function (options, crossGroup) {\n\t            var htmlObject = this.chart.renderer.drawPath(options);\n\t            crossGroup.appendChild(htmlObject);\n\t        };\n\t        Crosshair.prototype.renderAxisTooltip = function (chart, chartRect, axisGroup) {\n\t            var axis;\n\t            var text;\n\t            var rect;\n\t            var pathElement;\n\t            var textElem;\n\t            var options;\n\t            var padding = 5;\n\t            var direction;\n\t            for (var k = 0, length_1 = chart.axisCollections.length; k < length_1; k++) {\n\t                axis = chart.axisCollections[k];\n\t                if (axis.crosshairTooltip.enable) {\n\t                    if ((this.valueX <= (axis.rect.x + axis.rect.width) && axis.rect.x <= this.valueX) ||\n\t                        (this.valueY <= (axis.rect.y + axis.rect.height) && axis.rect.y <= this.valueY)) {\n\t                        pathElement = document.getElementById(this.elementID + '_axis_tooltip_' + k);\n\t                        textElem = document.getElementById(this.elementID + '_axis_tooltip_text_' + k);\n\t                        text = this.getAxisText(axis);\n\t                        if (!text) {\n\t                            continue;\n\t                        }\n\t                        rect = this.tooltipLocation(text, axis, chartRect);\n\t                        if (pathElement === null) {\n\t                            pathElement = chart.renderer.drawPath({\n\t                                'id': this.elementID + '_axis_tooltip_' + k,\n\t                                'fill': axis.crosshairTooltip.fill\n\t                            });\n\t                            axisGroup.appendChild(pathElement);\n\t                            options = new helper_1.TextOption(this.elementID + '_axis_tooltip_text_' + k, 0, 0, 'start', text);\n\t                            textElem = helper_1.textElement(options, axis.crosshairTooltip.textStyle, axis.crosshairTooltip.textStyle.color, axisGroup);\n\t                        }\n\t                        direction = helper_1.findDirection(this.rx, this.ry, rect, this.arrowLocation, 10, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY);\n\t                        pathElement.setAttribute('d', direction);\n\t                        textElem.textContent = text;\n\t                        textElem.setAttribute('x', (rect.x + padding).toString());\n\t                        textElem.setAttribute('y', (rect.y + padding + 3 * this.elementSize.height / 4).toString());\n\t                    }\n\t                    else {\n\t                        helper_1.removeElement(this.elementID + '_axis_tooltip_' + k);\n\t                        helper_1.removeElement(this.elementID + '_axis_tooltip_text_' + k);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Crosshair.prototype.getAxisText = function (axis) {\n\t            var value;\n\t            this.isBottom = false;\n\t            this.isTop = false;\n\t            this.isLeft = false;\n\t            this.isRight = false;\n\t            var labelValue = (axis.valueType === 'Category' && axis.labelPlacement === 'BetweenTicks')\n\t                ? 0.5 : 0;\n\t            if (axis.orientation === 'Horizontal') {\n\t                value = helper_1.getValueXByPoint(Math.abs(this.valueX - axis.rect.x), axis.rect.width, axis) + labelValue;\n\t                this.isBottom = !axis.opposedPosition;\n\t                this.isTop = axis.opposedPosition;\n\t            }\n\t            else {\n\t                value = helper_1.getValueYByPoint(Math.abs(this.valueY - axis.rect.y), axis.rect.height, axis) + labelValue;\n\t                this.isRight = axis.opposedPosition;\n\t                this.isLeft = !axis.opposedPosition;\n\t            }\n\t            if (axis.valueType === 'DateTime') {\n\t                return axis.format(new Date(value));\n\t            }\n\t            else if (axis.valueType === 'Category') {\n\t                return axis.labels[Math.floor(value)];\n\t            }\n\t            else if (axis.valueType === 'Logarithmic') {\n\t                return value = axis.format(Math.pow(axis.logBase, value));\n\t            }\n\t            else {\n\t                var customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n\t                return customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(value)) : axis.format(value);\n\t            }\n\t        };\n\t        Crosshair.prototype.tooltipLocation = function (text, axis, bounds) {\n\t            var isBottom = false;\n\t            var isLeft = false;\n\t            var padding = 5;\n\t            var arrowPadding = 10;\n\t            var tooltipRect;\n\t            var boundsX = bounds.x;\n\t            var boundsY = bounds.y;\n\t            this.elementSize = helper_1.measureText(text, axis.crosshairTooltip.textStyle);\n\t            if (axis.orientation === 'Horizontal') {\n\t                this.arrowLocation = new helper_1.ChartLocation(this.valueX, axis.rect.y);\n\t                tooltipRect = new helper_1.Rect((this.valueX - (this.elementSize.width / 2) - padding), axis.rect.y + arrowPadding, this.elementSize.width + padding * 2, this.elementSize.height + padding * 2);\n\t                if (axis.opposedPosition) {\n\t                    tooltipRect.y = axis.rect.y - (this.elementSize.height + padding * 2 + arrowPadding);\n\t                }\n\t                if (tooltipRect.x < boundsX) {\n\t                    tooltipRect.x = boundsX;\n\t                }\n\t                if (tooltipRect.x + tooltipRect.width > boundsX + bounds.width) {\n\t                    tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - (boundsX + bounds.width));\n\t                }\n\t                if (this.arrowLocation.x + arrowPadding / 2 > tooltipRect.x + tooltipRect.width - this.rx) {\n\t                    this.arrowLocation.x = tooltipRect.x + tooltipRect.width - this.rx - arrowPadding / 2;\n\t                }\n\t                if (this.arrowLocation.x - arrowPadding / 2 < tooltipRect.x + this.rx) {\n\t                    this.arrowLocation.x = tooltipRect.x + this.rx + arrowPadding / 2;\n\t                }\n\t            }\n\t            else {\n\t                this.arrowLocation = new helper_1.ChartLocation(axis.rect.x, this.valueY);\n\t                tooltipRect = new helper_1.Rect(axis.rect.x - (this.elementSize.width) - (padding * 2 + arrowPadding), this.valueY - (this.elementSize.height / 2) - padding, this.elementSize.width + (padding * 2), this.elementSize.height + padding * 2);\n\t                if (axis.opposedPosition) {\n\t                    tooltipRect.x = axis.rect.x + arrowPadding;\n\t                    if ((tooltipRect.x + tooltipRect.width) > this.chart.availableSize.width) {\n\t                        this.arrowLocation.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n\t                        tooltipRect.x -= ((tooltipRect.x + tooltipRect.width) - this.chart.availableSize.width);\n\t                    }\n\t                }\n\t                else {\n\t                    if (tooltipRect.x < 0) {\n\t                        this.arrowLocation.x -= tooltipRect.x;\n\t                        tooltipRect.x = 0;\n\t                    }\n\t                }\n\t                if (tooltipRect.y < boundsY) {\n\t                    tooltipRect.y = boundsY;\n\t                }\n\t                if (tooltipRect.y + tooltipRect.height >= boundsY + bounds.height) {\n\t                    tooltipRect.y -= ((tooltipRect.y + tooltipRect.height) - (boundsY + bounds.height));\n\t                }\n\t                if (this.arrowLocation.y + arrowPadding / 2 > tooltipRect.y + tooltipRect.height - this.ry) {\n\t                    this.arrowLocation.y = tooltipRect.y + tooltipRect.height - this.ry - arrowPadding / 2;\n\t                }\n\t                if (this.arrowLocation.y - arrowPadding / 2 < tooltipRect.y + this.ry) {\n\t                    this.arrowLocation.y = tooltipRect.y + this.ry + arrowPadding / 2;\n\t                }\n\t            }\n\t            return tooltipRect;\n\t        };\n\t        Crosshair.prototype.stopAnimation = function () {\n\t            helper_1.stopTimer(this.crosshairInterval);\n\t        };\n\t        Crosshair.prototype.removeCrosshair = function (duration) {\n\t            var chart = this.chart;\n\t            var crosshair = document.getElementById(this.elementID + '_UserInteraction');\n\t            this.stopAnimation();\n\t            if (crosshair && crosshair.getAttribute('opacity') !== '0') {\n\t                this.crosshairInterval = setTimeout(function () {\n\t                    new ej2_base_1.Animation({}).animate(crosshair, {\n\t                        duration: 200,\n\t                        progress: function (args) {\n\t                            crosshair.style.animation = '';\n\t                            crosshair.setAttribute('opacity', (1 - (args.timeStamp / args.duration)).toString());\n\t                        },\n\t                        end: function (model) {\n\t                            crosshair.setAttribute('opacity', '0');\n\t                            chart.startMove = false;\n\t                            if (chart.tooltipModule) {\n\t                                chart.tooltipModule.valueX = null;\n\t                                chart.tooltipModule.valueY = null;\n\t                            }\n\t                        }\n\t                    });\n\t                }, duration);\n\t            }\n\t        };\n\t        Crosshair.prototype.getModuleName = function () {\n\t            return 'Crosshair';\n\t        };\n\t        Crosshair.prototype.destroy = function (chart) {\n\t        };\n\t        return Crosshair;\n\t    }());\n\t    exports.Crosshair = Crosshair;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(3), __webpack_require__(19), __webpack_require__(5), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, helper_1, helper_2, get_data_1, constants_1, theme_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Tooltip = (function (_super) {\n\t        __extends(Tooltip, _super);\n\t        function Tooltip(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.padding = 5;\n\t            _this.arrowPadding = 12;\n\t            _this.rx = 2;\n\t            _this.ry = 2;\n\t            _this.markerPoint = [];\n\t            _this.element = _this.chart.element;\n\t            _this.addEventListener();\n\t            _this.textStyle = chart.tooltip.textStyle;\n\t            return _this;\n\t        }\n\t        Tooltip.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            var cancelEvent = ej2_base_1.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            this.chart.on(cancelEvent, this.mouseLeaveHandler, this);\n\t            this.chart.on('tapHold', this.longPress, this);\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMoveHandler, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.mouseUpHandler, this);\n\t        };\n\t        Tooltip.prototype.mouseUpHandler = function () {\n\t            var chart = this.chart;\n\t            if (chart.isTouch &&\n\t                ((helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect) && chart.tooltip.shared)\n\t                    || !chart.tooltip.shared)) {\n\t                if (!chart.crosshair.enable) {\n\t                    this.tooltip();\n\t                    this.removeTooltip(2000);\n\t                }\n\t                else if (chart.startMove) {\n\t                    this.removeTooltip(2000);\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.mouseLeaveHandler = function () {\n\t            this.removeTooltip(1000);\n\t        };\n\t        Tooltip.prototype.mouseMoveHandler = function () {\n\t            var chart = this.chart;\n\t            if (!chart.disableTrackTooltip) {\n\t                if (!chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\n\t                    this.tooltip();\n\t                }\n\t                if (helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                    if (chart.tooltip.shared && (!chart.isTouch || (chart.startMove))) {\n\t                        this.tooltip();\n\t                    }\n\t                }\n\t                else {\n\t                    if (chart.tooltip.shared) {\n\t                        this.removeTooltip(1000);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.longPress = function () {\n\t            var chart = this.chart;\n\t            if (chart.crosshair.enable && helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                this.tooltip();\n\t            }\n\t            return false;\n\t        };\n\t        Tooltip.prototype.tooltip = function () {\n\t            var isTooltip = this.getElement(this.element.id + '_tooltip');\n\t            var tooltipDiv;\n\t            var chart = this.chart;\n\t            this.inverted = this.chart.requireInvertedAxis;\n\t            this.updateTemplateFn(chart);\n\t            this.formattedText = [];\n\t            this.header = (chart.tooltip.header === null) ? ((chart.tooltip.shared) ? '<b>${point.x}</b>' : '<b>${series.name}</b>')\n\t                : (chart.tooltip.header);\n\t            if (!isTooltip) {\n\t                tooltipDiv = this.createElement(chart);\n\t            }\n\t            if (!chart.tooltip.shared) {\n\t                this.renderSeriesTooltip(chart, !isTooltip, tooltipDiv);\n\t            }\n\t            else {\n\t                this.renderGroupedTooltip(chart, !isTooltip, tooltipDiv);\n\t            }\n\t        };\n\t        Tooltip.prototype.createElement = function (chart) {\n\t            this.textElements = [];\n\t            var tooltipDiv = document.createElement('div');\n\t            tooltipDiv.id = this.element.id + '_tooltip';\n\t            tooltipDiv.className = 'ejTooltip' + this.element.id;\n\t            tooltipDiv.setAttribute('style', 'pointer-events:none; position:absolute;z-index: 1');\n\t            if (!chart.tooltip.template || chart.tooltip.shared) {\n\t                var svgObject = chart.renderer.createSvg({ id: this.element.id + '_tooltip_svg' });\n\t                tooltipDiv.appendChild(svgObject);\n\t                var groupElement = chart.renderer.createGroup({ id: this.element.id + '_tooltip_group' });\n\t                svgObject.appendChild(groupElement);\n\t                var pathElement = chart.renderer.drawPath({\n\t                    'id': this.element.id + '_tooltip_path', 'stroke-width': chart.tooltip.border.width,\n\t                    'fill': chart.tooltip.fill, 'opacity': chart.tooltip.opacity, 'stroke': chart.tooltip.border.color\n\t                });\n\t                groupElement.appendChild(pathElement);\n\t            }\n\t            return tooltipDiv;\n\t        };\n\t        Tooltip.prototype.getElement = function (id) {\n\t            return document.getElementById(id);\n\t        };\n\t        Tooltip.prototype.renderPoint = function (point, isFirst, fill, firstText) {\n\t            if (firstText === void 0) { firstText = true; }\n\t            var argsData = {\n\t                cancel: false, name: constants_1.tooltipRender, textCollections: this.getTooltipText(point, firstText),\n\t                point: point.point, series: point.series, textStyle: this.textStyle\n\t            };\n\t            this.chart.trigger(constants_1.tooltipRender, argsData);\n\t            if (!argsData.cancel) {\n\t                if (point.series.type === 'BoxAndWhisker') {\n\t                    this.removeText();\n\t                    isFirst = true;\n\t                }\n\t                this.formattedText = this.formattedText.concat(argsData.textCollections);\n\t            }\n\t            return !argsData.cancel;\n\t        };\n\t        Tooltip.prototype.removeText = function () {\n\t            this.textElements = [];\n\t            var element = this.getElement(this.element.id + '_tooltip_group');\n\t            if (element.childNodes.length > 0) {\n\t                while (element.lastChild && element.childNodes.length !== 1) {\n\t                    element.removeChild(element.lastChild);\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.renderSeriesTooltip = function (chart, isFirst, tooltipDiv) {\n\t            var data = this.getData();\n\t            data.lierIndex = this.lierIndex;\n\t            this.currentPoints = [];\n\t            if (data.point && ((!this.previousPoints[0] || (this.previousPoints[0].point !== data.point)) ||\n\t                (this.previousPoints[0] && this.previousPoints[0].lierIndex > 3 && this.previousPoints[0].lierIndex !== this.lierIndex))) {\n\t                this.currentPoints.push(data);\n\t                if (data.series.enableTooltip) {\n\t                    this.stopAnimation();\n\t                    if (isFirst) {\n\t                        document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n\t                    }\n\t                    if (!chart.tooltip.template) {\n\t                        if (this.header !== '') {\n\t                            this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\n\t                            this.formattedText = this.formattedText.concat(this.header);\n\t                        }\n\t                        if (this.renderPoint(data, isFirst, this.textStyle.color || '#212121')) {\n\t                            this.renderText(isFirst, chart);\n\t                            this.removeHighlight(chart);\n\t                            this.highlightPoints(data);\n\t                            this.renderTooltip(chart, data, isFirst);\n\t                        }\n\t                        else {\n\t                            this.removeHighlight(chart);\n\t                            this.getElement(this.element.id + '_tooltip').remove();\n\t                        }\n\t                    }\n\t                    else {\n\t                        this.removeHighlight(chart);\n\t                        this.createTemplate(chart, data, this.getElement(this.element.id + '_tooltip'), isFirst);\n\t                    }\n\t                    this.isRemove = true;\n\t                }\n\t                this.previousPoints = ej2_base_1.extend([], this.currentPoints, null, true);\n\t            }\n\t            else {\n\t                if (!data.point && this.isRemove) {\n\t                    this.removeTooltip(1000);\n\t                    this.isRemove = false;\n\t                }\n\t                else {\n\t                    for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                        var series = _a[_i];\n\t                        if (series.visible) {\n\t                            data = this.getClosestX(chart, series) || data;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (data && data.point) {\n\t                this.findMouseValue(data, chart);\n\t            }\n\t        };\n\t        Tooltip.prototype.updateTemplateFn = function (chart) {\n\t            if (chart.tooltip.template) {\n\t                var e = void 0;\n\t                try {\n\t                    if (document.querySelectorAll(chart.tooltip.template).length) {\n\t                        this.templateFn = ej2_base_2.compile(document.querySelector(chart.tooltip.template).innerHTML.trim());\n\t                    }\n\t                }\n\t                catch (e) {\n\t                    this.templateFn = ej2_base_2.compile(chart.tooltip.template);\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.createTemplate = function (chart, data, parent, isFirst) {\n\t            this.highlightPoints(data);\n\t            var argsData = { cancel: false, name: constants_1.tooltipRender, point: data.point, series: data.series, };\n\t            this.chart.trigger(constants_1.tooltipRender, argsData);\n\t            var firstElement = this.getElement(this.element.id + '_tooltip').firstChild;\n\t            if (firstElement) {\n\t                firstElement.remove();\n\t            }\n\t            var point = ej2_base_1.extend({}, data.point);\n\t            point.x = this.formatPointValue(data.point, data.series.xAxis, 'x', true, false);\n\t            if ((data.series.seriesType === 'XY')) {\n\t                point.y = this.formatPointValue(data.point, data.series.yAxis, 'y', false, true);\n\t            }\n\t            else {\n\t                point.low = this.formatPointValue(data.point, data.series.yAxis, 'low', false, true);\n\t                point.high = this.formatPointValue(data.point, data.series.yAxis, 'high', false, true);\n\t            }\n\t            if (!argsData.cancel) {\n\t                var templateElement = this.templateFn(point);\n\t                var elem = ej2_base_1.createElement('div');\n\t                while (templateElement.length > 0) {\n\t                    elem.appendChild(templateElement[0]);\n\t                }\n\t                parent.appendChild(elem);\n\t                var rect = parent.getBoundingClientRect();\n\t                this.padding = 0;\n\t                this.elementSize = new helper_1.Size(rect.width, rect.height);\n\t                var tooltipRect = this.seriesTooltipLocation(data, new helper_1.ChartLocation(0, 0), new helper_1.ChartLocation(0, 0));\n\t                if (chart.tooltip.enableAnimation && !chart.tooltip.shared && !isFirst && !this.isComplete) {\n\t                    this.animateTooltipDiv(parent, tooltipRect);\n\t                }\n\t                else {\n\t                    this.updateDiv(parent, tooltipRect.x, tooltipRect.y);\n\t                }\n\t                this.isComplete = false;\n\t            }\n\t            else {\n\t                this.removeHighlight(chart);\n\t                this.getElement(this.element.id + '_tooltip').remove();\n\t            }\n\t        };\n\t        Tooltip.prototype.findMouseValue = function (data, chart) {\n\t            if (!chart.requireInvertedAxis) {\n\t                if (chart.chartAreaType === 'PolarRadar') {\n\t                    this.valueX = helper_2.valueToPolarCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\n\t                        + data.series.xAxis.rect.x;\n\t                }\n\t                else {\n\t                    this.valueX = helper_2.valueToCoefficient(data.point.xValue, data.series.xAxis) * data.series.xAxis.rect.width\n\t                        + data.series.xAxis.rect.x;\n\t                }\n\t                this.valueY = chart.mouseY;\n\t            }\n\t            else {\n\t                this.valueY = (1 - helper_2.valueToCoefficient(data.point.xValue, data.series.xAxis)) * data.series.xAxis.rect.height\n\t                    + data.series.xAxis.rect.y;\n\t                this.valueX = chart.mouseX;\n\t            }\n\t        };\n\t        Tooltip.prototype.renderGroupedTooltip = function (chart, isFirst, tooltipDiv) {\n\t            var data;\n\t            var height = 0;\n\t            var width = 0;\n\t            var pointData = chart.chartAreaType === 'PolarRadar' ? this.getData() : null;\n\t            this.stopAnimation();\n\t            this.removeHighlight(chart);\n\t            this.currentPoints = [];\n\t            var extraPoints = [];\n\t            if (isFirst) {\n\t                document.getElementById(this.element.id + '_Secondary_Element').appendChild(tooltipDiv);\n\t            }\n\t            this.removeText();\n\t            for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                if (!series.enableTooltip) {\n\t                    continue;\n\t                }\n\t                if (chart.chartAreaType === 'Cartesian' && series.visible) {\n\t                    data = this.getClosestX(chart, series);\n\t                }\n\t                else if (chart.chartAreaType === 'PolarRadar' && series.visible && pointData.point !== null) {\n\t                    data = new helper_1.PointData(series.points[pointData.point.index], series);\n\t                }\n\t                if (data && this.header !== '' && this.currentPoints.length === 0) {\n\t                    this.header = this.parseTemplate(data.point, data.series, this.header, data.series.xAxis, data.series.yAxis);\n\t                    this.formattedText = this.formattedText.concat(this.header);\n\t                }\n\t                if (data && this.renderPoint(data, true, this.textStyle.color || data.point.color, this.currentPoints.length === 0)) {\n\t                    if (series.category === 'Series') {\n\t                        this.highlightPoints(data);\n\t                    }\n\t                    this.findMouseValue(data, chart);\n\t                    this.currentPoints.push(data);\n\t                    data = null;\n\t                }\n\t                else if (data) {\n\t                    extraPoints.push(data);\n\t                }\n\t            }\n\t            this.renderText(isFirst, chart);\n\t            if (this.currentPoints.length > 0) {\n\t                this.renderTooltip(chart, this.currentPoints[0], isFirst);\n\t            }\n\t            else {\n\t                this.getElement(this.element.id + '_tooltip_path').setAttribute('d', '');\n\t            }\n\t            this.currentPoints = this.currentPoints.concat(extraPoints);\n\t            this.previousPoints = ej2_base_1.extend([], this.currentPoints, null, true);\n\t        };\n\t        Tooltip.prototype.renderTooltip = function (chart, pointData, isFirst) {\n\t            var tooltipDiv = this.getElement(this.element.id + '_tooltip');\n\t            var arrowLocation = new helper_1.ChartLocation(0, 0);\n\t            var tipLocation = new helper_1.ChartLocation(0, 0);\n\t            var textHeights;\n\t            var svgObject = this.getElement(this.element.id + '_tooltip_svg');\n\t            var groupElement = this.getElement(this.element.id + '_tooltip_group');\n\t            var pathElement = this.getElement(this.element.id + '_tooltip_path');\n\t            var rect;\n\t            var isTop = false;\n\t            var isLeft = false;\n\t            var isBottom = false;\n\t            var x = 0;\n\t            var y = 0;\n\t            var location = pointData.series.type === 'BoxAndWhisker' ?\n\t                this.getBoxLocation(pointData) : pointData.point.symbolLocations[0];\n\t            this.tipRadius = 1;\n\t            var series = pointData.series;\n\t            var point = pointData.point;\n\t            if (this.header !== '') {\n\t                this.elementSize.height += 5;\n\t            }\n\t            if (this.currentPoints.length > 1) {\n\t                this.arrowPadding = 0;\n\t                rect = this.sharedTooltipLocation(chart.chartAxisLayoutPanel.seriesClipRect, this.valueX, this.valueY);\n\t                isTop = true;\n\t            }\n\t            else {\n\t                this.arrowPadding = 12;\n\t                rect = this.seriesTooltipLocation(pointData, arrowLocation, tipLocation);\n\t                if (!this.inverted || !series.isRectSeries) {\n\t                    isTop = (rect.y < (location.y + (chart.chartAreaType === 'Cartesian' ? series.clipRect.y : 0)));\n\t                    isBottom = !isTop;\n\t                    y = (isTop ? 0 : this.arrowPadding);\n\t                }\n\t                else {\n\t                    isLeft = (rect.x < (location.x + series.clipRect.x));\n\t                    x = (isLeft ? 0 : this.arrowPadding);\n\t                }\n\t            }\n\t            if (this.header !== '') {\n\t                var headerSize = helper_1.measureText(this.header, chart.tooltip.textStyle).height + (this.padding * 2) +\n\t                    (isBottom ? this.arrowPadding : 0);\n\t                var xLength = (this.padding * 3) + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0);\n\t                var direction = 'M ' + xLength + ' ' + headerSize +\n\t                    'L ' + (rect.width + (!isLeft && !isTop && !isBottom ? this.arrowPadding : 0) - (this.padding * 2)) +\n\t                    ' ' + headerSize;\n\t                var pathElement_1 = this.chart.renderer.drawPath({\n\t                    'id': this.element.id + '_header_path', 'stroke-width': 1,\n\t                    'fill': null, 'opacity': 0.8, 'stroke': '#ffffff', 'd': direction\n\t                });\n\t                groupElement.appendChild(pathElement_1);\n\t            }\n\t            var start = chart.tooltip.border.width / 2;\n\t            var pointRect = new helper_1.Rect(start + x, start + y, rect.width - start, rect.height - start);\n\t            groupElement.setAttribute('opacity', '1');\n\t            if (chart.tooltip.enableAnimation && !chart.tooltip.shared && !isFirst && !this.isComplete) {\n\t                this.animateTooltipDiv(tooltipDiv, rect);\n\t            }\n\t            else {\n\t                this.updateDiv(tooltipDiv, rect.x, rect.y);\n\t            }\n\t            this.isComplete = false;\n\t            svgObject.setAttribute('height', (rect.height + chart.tooltip.border.width + (!((!this.inverted) ||\n\t                (!pointData.series.isRectSeries)) ? 0 : this.arrowPadding)).toString());\n\t            svgObject.setAttribute('width', (rect.width + chart.tooltip.border.width + (((!this.inverted) ||\n\t                (!pointData.series.isRectSeries)) ? 0 : this.arrowPadding)).toString());\n\t            svgObject.setAttribute('opacity', '1');\n\t            pathElement.setAttribute('d', helper_2.findDirection(this.rx, this.ry, pointRect, arrowLocation, this.arrowPadding, isTop, isBottom, isLeft, tipLocation.x, tipLocation.y, this.tipRadius));\n\t            pathElement.setAttribute('filter', ej2_base_1.Browser.isIE ? '' : 'url(#chart_shadow_tooltip)');\n\t            var shadowElement = '<filter id=\"chart_shadow_tooltip\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>';\n\t            shadowElement += '<feOffset dx=\"3\" dy=\"3\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"0.5\"/>';\n\t            shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n\t            var defElement = chart.renderer.createDefs();\n\t            defElement.setAttribute('id', 'chart_tooltip_definition');\n\t            groupElement.appendChild(defElement);\n\t            defElement.innerHTML = shadowElement;\n\t            pathElement.setAttribute('stroke', chart.tooltip.border.color);\n\t            this.changeText(new helper_1.ChartLocation(x, y), isBottom, !isLeft && !isTop && !isBottom, rect);\n\t        };\n\t        Tooltip.prototype.sharedTooltipLocation = function (bounds, x, y) {\n\t            var width = this.elementSize.width + (2 * this.padding);\n\t            var height = this.elementSize.height + (2 * this.padding);\n\t            var tooltipRect = new helper_1.Rect(x + 2 * this.padding, y - height - this.padding, width, height);\n\t            if (tooltipRect.y < bounds.y) {\n\t                tooltipRect.y += (tooltipRect.height + 2 * this.padding);\n\t            }\n\t            if (tooltipRect.x + tooltipRect.width > bounds.x + bounds.width) {\n\t                tooltipRect.x -= (tooltipRect.width + 4 * this.padding);\n\t            }\n\t            return tooltipRect;\n\t        };\n\t        Tooltip.prototype.getBoxLocation = function (data) {\n\t            var location;\n\t            location = this.lierIndex > 3 ? data.point.symbolLocations[this.lierIndex - 4] :\n\t                {\n\t                    x: data.point.regions[0].x + (data.point.regions[0].width / 2),\n\t                    y: data.point.regions[0].y + (data.point.regions[0].height / 2)\n\t                };\n\t            return location;\n\t        };\n\t        Tooltip.prototype.seriesTooltipLocation = function (pointData, arrowLocation, tipLocation) {\n\t            var series = pointData.series;\n\t            var isBoxPlot = series.type === 'BoxAndWhisker';\n\t            var symbolLocation = isBoxPlot ? this.getBoxLocation(pointData) : pointData.point.symbolLocations[0];\n\t            var location = new helper_1.ChartLocation(symbolLocation.x, symbolLocation.y);\n\t            if (series.type === 'RangeArea' && pointData.point.regions[0]) {\n\t                if (!series.chart.requireInvertedAxis) {\n\t                    location.y = pointData.point.regions[0].y + pointData.point.regions[0].height / 2;\n\t                }\n\t                else {\n\t                    location.x = pointData.point.regions[0].x + pointData.point.regions[0].width / 2;\n\t                }\n\t            }\n\t            var width = this.elementSize.width + (2 * this.padding);\n\t            var height = this.elementSize.height + (2 * this.padding);\n\t            var bounds = this.chart.chartAxisLayoutPanel.seriesClipRect;\n\t            var markerHeight = 0;\n\t            if (!series.isRectSeries) {\n\t                markerHeight = (this.chart.tooltip.shared || series.marker.visible || series.type === 'Scatter'\n\t                    || series.drawType === 'Scatter') ? ((series.marker.height + 2) / 2 + (2 * series.marker.border.width)) : 0;\n\t            }\n\t            var clipX = this.chart.chartAreaType === 'PolarRadar' ? 0 : series.clipRect.x;\n\t            var clipY = this.chart.chartAreaType === 'PolarRadar' ? 0 : series.clipRect.y;\n\t            var boundsX = bounds.x;\n\t            var boundsY = bounds.y;\n\t            if (!this.inverted || !series.isRectSeries) {\n\t                location.y = (series.type === 'Waterfall' && pointData.point.y < 0) ?\n\t                    location.y - pointData.point.regions[0].height : location.y;\n\t                location = new helper_1.ChartLocation(location.x + clipX - this.elementSize.width / 2 - this.padding, location.y + clipY - this.elementSize.height - (2 * this.padding) - this.arrowPadding - markerHeight);\n\t                arrowLocation.x = tipLocation.x = width / 2;\n\t                if (location.y < boundsY || (series.isRectSeries && pointData.point.y < 0 && series.type !== 'Waterfall')) {\n\t                    location.y = (symbolLocation.y < 0 ? 0 : symbolLocation.y) + clipY + markerHeight;\n\t                }\n\t                if (location.y + height + this.arrowPadding > boundsY + bounds.height) {\n\t                    location.y = (symbolLocation.y > bounds.height ? bounds.height : symbolLocation.y)\n\t                        + clipY - this.elementSize.height - (2 * this.padding) - this.arrowPadding - markerHeight;\n\t                }\n\t                tipLocation.x = width / 2;\n\t                if (location.x < boundsX) {\n\t                    arrowLocation.x -= (boundsX - location.x);\n\t                    tipLocation.x -= (boundsX - location.x);\n\t                    location.x = boundsX;\n\t                }\n\t                if (location.x + width > boundsX + bounds.width) {\n\t                    arrowLocation.x += ((location.x + width) - (boundsX + bounds.width));\n\t                    tipLocation.x += ((location.x + width) - (boundsX + bounds.width));\n\t                    location.x -= ((location.x + width) - (boundsX + bounds.width));\n\t                }\n\t                if (arrowLocation.x + this.arrowPadding / 2 > width - this.rx) {\n\t                    arrowLocation.x = width - this.rx - this.arrowPadding / 2;\n\t                    tipLocation.x = width;\n\t                    this.tipRadius = 0;\n\t                }\n\t                if (arrowLocation.x - this.arrowPadding / 2 < this.rx) {\n\t                    arrowLocation.x = this.rx + this.arrowPadding / 2;\n\t                    tipLocation.x = 0;\n\t                    this.tipRadius = 0;\n\t                }\n\t            }\n\t            else {\n\t                location.x = (series.type === 'Waterfall' && pointData.point.y < 0) ?\n\t                    location.x + pointData.point.regions[0].width : location.x;\n\t                location = new helper_1.ChartLocation(location.x + clipX + markerHeight, location.y + clipY - this.elementSize.height / 2 - (this.padding));\n\t                arrowLocation.y = tipLocation.y = height / 2;\n\t                if ((location.x + width + this.arrowPadding > boundsX + bounds.width) || (series.isRectSeries &&\n\t                    pointData.point.y < 0 && series.type !== 'Waterfall')) {\n\t                    location.x = (symbolLocation.x > bounds.width ? bounds.width : symbolLocation.x)\n\t                        + clipX - markerHeight - (width + this.arrowPadding);\n\t                }\n\t                if (location.x < boundsX) {\n\t                    location.x = (symbolLocation.x < 0 ? 0 : symbolLocation.x) + clipX + markerHeight;\n\t                }\n\t                if (location.y <= boundsY) {\n\t                    arrowLocation.y -= (boundsY - location.y);\n\t                    tipLocation.y -= (boundsY - location.y);\n\t                    location.y = boundsY;\n\t                }\n\t                if (location.y + height >= boundsY + bounds.height) {\n\t                    arrowLocation.y += ((location.y + height) - (boundsY + bounds.height));\n\t                    tipLocation.y += ((location.y + height) - (boundsY + bounds.height));\n\t                    location.y -= ((location.y + height) - (boundsY + bounds.height));\n\t                }\n\t                if (arrowLocation.y + this.arrowPadding / 2 > height - this.ry) {\n\t                    arrowLocation.y = height - this.ry - this.arrowPadding / 2;\n\t                    tipLocation.y = height;\n\t                    this.tipRadius = 0;\n\t                }\n\t                if (arrowLocation.y - this.arrowPadding / 2 < this.ry) {\n\t                    arrowLocation.y = this.ry + this.arrowPadding / 2;\n\t                    tipLocation.y = 0;\n\t                    this.tipRadius = 0;\n\t                }\n\t            }\n\t            return new helper_1.Rect(location.x, location.y, width, height);\n\t        };\n\t        Tooltip.prototype.removeHighlight = function (chart, removeRect) {\n\t            if (removeRect === void 0) { removeRect = false; }\n\t            var item;\n\t            for (var i = 0, len = this.previousPoints.length; i < len; i++) {\n\t                item = this.previousPoints[i];\n\t                if (item.series.isRectSeries && item.series.visible) {\n\t                    this.highlightPoint(item.series, item.point.index, false);\n\t                    continue;\n\t                }\n\t                if (!item.series.marker.visible && item.series.type !== 'Scatter' && item.series.type !== 'Bubble') {\n\t                    this.previousPoints.shift();\n\t                    len -= 1;\n\t                }\n\t            }\n\t        };\n\t        Tooltip.prototype.highlightPoints = function (item) {\n\t            if (item.series.isRectSeries) {\n\t                this.highlightPoint(item.series, item.point.index, true);\n\t                return null;\n\t            }\n\t        };\n\t        Tooltip.prototype.highlightPoint = function (series, pointIndex, highlight) {\n\t            var element = this.getElement(this.element.id + '_Series_' + series.index + '_Point_' + pointIndex);\n\t            if (element) {\n\t                element.setAttribute('opacity', (highlight ? series.opacity / 2 : series.opacity).toString());\n\t            }\n\t        };\n\t        Tooltip.prototype.getTooltipText = function (pointData, isFirst) {\n\t            if (isFirst === void 0) { isFirst = true; }\n\t            var series = pointData.series;\n\t            var text;\n\t            return this.parseTemplate(pointData.point, series, this.getFormat(this.chart, series), series.xAxis, series.yAxis);\n\t        };\n\t        Tooltip.prototype.renderText = function (isRender, chart) {\n\t            var height = 0;\n\t            var width = 0;\n\t            var subWidth = 0;\n\t            var size;\n\t            var lines;\n\t            var key = 'properties';\n\t            var font = ej2_base_1.extend({}, this.chart.tooltip.textStyle, null, true)[key];\n\t            var groupElement = this.getElement(this.element.id + '_tooltip_group');\n\t            var tspanElement;\n\t            var tspanStyle = '';\n\t            var line;\n\t            var tspanOption;\n\t            this.header = this.header.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim();\n\t            var headerSpace = (this.header !== '' && this.formattedText[0] !== '') ? 5 : 0;\n\t            var isRow = true;\n\t            var isColumn = true;\n\t            this.markerPoint = [];\n\t            var markerSize = 10;\n\t            var spaceWidth = 4;\n\t            var dy = (22 / parseFloat(theme_1.Theme.tooltipLabelFont.size)) * (parseFloat(font.size));\n\t            if (!isRender) {\n\t                helper_2.removeElement(this.element.id + '_tooltip_text');\n\t                helper_2.removeElement(this.element.id + '_header_path');\n\t                helper_2.removeElement(this.element.id + '_tooltip_trackball_group');\n\t                helper_2.removeElement('chart_tooltip_definition');\n\t            }\n\t            var options = new helper_1.TextOption(this.element.id + '_tooltip_text', this.padding * 2, this.padding * 4, 'start', '');\n\t            var parentElement = helper_1.textElement(options, font, null, groupElement, false);\n\t            for (var k = 0, pointsLength = this.formattedText.length; k < pointsLength; k++) {\n\t                var textCollection = this.formattedText[k].replace(/<(b|strong)>/g, '<b>')\n\t                    .replace(/<\\/(b|strong)>/g, '</b>')\n\t                    .split(/<br.*?>/g);\n\t                size = helper_1.measureText(this.formattedText[k], font);\n\t                if ((k !== 0) || (this.header === '')) {\n\t                    this.markerPoint.push((this.header !== '' ? (this.padding) : 0) + options.y + height);\n\t                }\n\t                for (var i = 0, len = textCollection.length; i < len; i++) {\n\t                    lines = textCollection[i].replace(/<b>/g, '<br><b>').replace(/<\\/b>/g, '</b><br>').split('<br>');\n\t                    subWidth = 0;\n\t                    isColumn = true;\n\t                    height += dy;\n\t                    for (var k_1 = 0, len_1 = lines.length; k_1 < len_1; k_1++) {\n\t                        line = lines[k_1];\n\t                        if (line.replace(/<b>/g, '').replace(/<\\/b>/g, '').trim() !== '') {\n\t                            subWidth += spaceWidth;\n\t                            if (isColumn && !isRow) {\n\t                                tspanOption = { x: (this.padding * 2) + (markerSize + 5), dy: dy + ((isColumn) ? headerSpace : 0), fill: '' };\n\t                                headerSpace = null;\n\t                            }\n\t                            else {\n\t                                if (isRow && isColumn) {\n\t                                    tspanOption = { x: (this.header === '') ? ((this.padding * 2) + (markerSize + 5)) : (this.padding * 2) };\n\t                                }\n\t                                else {\n\t                                    tspanOption = {};\n\t                                }\n\t                            }\n\t                            isColumn = false;\n\t                            tspanElement = chart.renderer.createTSpan(tspanOption, '');\n\t                            parentElement.appendChild(tspanElement);\n\t                            if (line.indexOf('<b>') > -1) {\n\t                                tspanStyle = 'font-weight:bold';\n\t                                font.fontWeight = 'bold';\n\t                                (tspanElement).setAttribute('fill', chart.tooltip.textStyle.color || '#ffffff');\n\t                            }\n\t                            else {\n\t                                tspanStyle = '';\n\t                                font.fontWeight = 'Normal';\n\t                                (tspanElement).setAttribute('fill', chart.tooltip.textStyle.color || '#dbdbdb');\n\t                            }\n\t                            (tspanElement).textContent = line = line.replace(/<[a-zA-Z\\/](.|\\n)*?>/g, '');\n\t                            subWidth += helper_1.measureText(line, font).width;\n\t                            if (tspanStyle !== '') {\n\t                                tspanElement.setAttribute('style', tspanStyle);\n\t                            }\n\t                            isRow = false;\n\t                        }\n\t                    }\n\t                    subWidth -= spaceWidth;\n\t                    width = Math.max(width, subWidth);\n\t                }\n\t            }\n\t            height -= (this.header ? this.padding : 0);\n\t            this.elementSize = new helper_1.Size(width + (width > 0 ? (2 * this.padding) : 0), height + (this.header !== '' ? this.padding : 0));\n\t            this.elementSize.width += (markerSize + 5);\n\t            var element = (parentElement.childNodes[0]);\n\t            if (this.header !== '' && element) {\n\t                font.fontWeight = 'bold';\n\t                var width_1 = (this.elementSize.width + (2 * this.padding)) / 2 - helper_1.measureText(this.header, font).width / 2;\n\t                element.setAttribute('x', width_1.toString());\n\t            }\n\t        };\n\t        Tooltip.prototype.changeText = function (point, isBottom, isRight, rect) {\n\t            var element = document.getElementById(this.element.id + '_tooltip_text');\n\t            if (isBottom) {\n\t                element.setAttribute('transform', 'translate(0,' + this.arrowPadding + ')');\n\t            }\n\t            if (isRight) {\n\t                element.setAttribute('transform', 'translate(' + this.arrowPadding + ' 0)');\n\t            }\n\t            this.drawMarker(isBottom, isRight, 10);\n\t        };\n\t        Tooltip.prototype.drawMarker = function (isBottom, isRight, size) {\n\t            var count = 0;\n\t            var shapeOption;\n\t            var groupElement = this.getElement(this.element.id + '_tooltip_group');\n\t            var markerGroup = this.chart.renderer.createGroup({ id: this.element.id + '_tooltip_trackball_group' });\n\t            var x = (this.padding * 2) + (size / 2) + (isRight ? this.arrowPadding : 0);\n\t            var series;\n\t            for (var _i = 0, _a = this.currentPoints; _i < _a.length; _i++) {\n\t                var data = _a[_i];\n\t                series = data.series;\n\t                if (series.visible && series.enableTooltip && data.point.visible) {\n\t                    shapeOption = new helper_2.PathOption(this.element.id + '_Tooltip_Trackball_' + series.index, series.marker.fill ||\n\t                        ((data.point && data.point.color && data.point.color !== '#ffffff') ? data.point.color : series.interior), 1, '#cccccc', series.opacity, null);\n\t                    markerGroup.appendChild(helper_2.drawSymbol(new helper_1.ChartLocation(x, this.markerPoint[count] - this.padding + (isBottom ? this.arrowPadding : 0)), series.marker.shape, new helper_1.Size(size, size), series.marker.imageUrl, shapeOption, null));\n\t                    count++;\n\t                }\n\t            }\n\t            groupElement.appendChild(markerGroup);\n\t        };\n\t        Tooltip.prototype.parseTemplate = function (point, series, format, xAxis, yAxis) {\n\t            var val;\n\t            var textValue;\n\t            var xFormat;\n\t            var customLabelFormat;\n\t            var chart = this.chart;\n\t            for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n\t                var dataValue = _a[_i];\n\t                val = new RegExp('${point' + '.' + dataValue + '}', 'gm');\n\t                format = format.replace(val.source, this.formatPointValue(point, val.source === '${point.x}' ? xAxis : yAxis, dataValue, val.source === '${point.x}', (val.source === '${point.high}' ||\n\t                    val.source === '${point.open}' ||\n\t                    val.source === '${point.close}' ||\n\t                    val.source === '${point.low}' ||\n\t                    val.source === '${point.y}' ||\n\t                    val.source === '${point.minimum}' ||\n\t                    val.source === '${point.maximum}' ||\n\t                    val.source === '${point.outliers}' ||\n\t                    val.source === '${point.upperQuartile}' ||\n\t                    val.source === '${point.lowerQuartile}' ||\n\t                    val.source === '${point.median}')));\n\t            }\n\t            for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n\t                var dataValue = _c[_b];\n\t                val = new RegExp('${series' + '.' + dataValue + '}', 'gm');\n\t                textValue = series[dataValue];\n\t                format = format.replace(val.source, textValue);\n\t            }\n\t            return format;\n\t        };\n\t        Tooltip.prototype.formatPointValue = function (point, axis, dataValue, isXPoint, isYPoint) {\n\t            var textValue;\n\t            var customLabelFormat;\n\t            var value;\n\t            if (axis.valueType !== 'Category' && isXPoint) {\n\t                customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n\t                textValue = customLabelFormat ? axis.labelFormat.replace('{value}', axis.format(point[dataValue])) :\n\t                    axis.format(point[dataValue]);\n\t            }\n\t            else if (isYPoint) {\n\t                customLabelFormat = axis.labelFormat && axis.labelFormat.match('{value}') !== null;\n\t                value = dataValue === 'outliers' ? axis.format(point[dataValue][this.lierIndex - 4]) :\n\t                    axis.format(point[dataValue]);\n\t                textValue = customLabelFormat ? axis.labelFormat.replace('{value}', value) : value;\n\t            }\n\t            else {\n\t                textValue = point[dataValue];\n\t            }\n\t            return textValue;\n\t        };\n\t        Tooltip.prototype.getFormat = function (chart, series) {\n\t            if (chart.tooltip.format) {\n\t                if (series.seriesType === 'XY' && series.category === 'Indicator') {\n\t                    return this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n\t                }\n\t                return chart.tooltip.format;\n\t            }\n\t            var format = !chart.tooltip.shared ? '${point.x}' : '${series.name}';\n\t            switch (series.seriesType) {\n\t                case 'XY':\n\t                    if (series.category === 'Indicator') {\n\t                        this.getIndicatorTooltipFormat(series, chart, chart.tooltip.format);\n\t                    }\n\t                    return format + ' : ' + ((series.type === 'Bubble') ? '<b>${point.y}</b>  Size : <b>${point.size}</b>'\n\t                        : '<b>${point.y}</b>');\n\t                case 'HighLow':\n\t                    return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>');\n\t                case 'HighLowOpenClose':\n\t                    return format + ('<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>' +\n\t                        'Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>');\n\t                case 'BoxPlot': {\n\t                    return format + '<br/>' + (this.lierIndex > 3 ? 'Outliers : <b>${point.outliers}</b>' :\n\t                        'Maximum : <b>${point.maximum}</b><br/>Q1 : <b>${point.upperQuartile}</b><br/>' +\n\t                            'Median : <b>${point.median}</b><br/>Q3 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>');\n\t                }\n\t            }\n\t            return '';\n\t        };\n\t        Tooltip.prototype.getIndicatorTooltipFormat = function (series, chart, format) {\n\t            var toolTip;\n\t            var points = [];\n\t            if (series.seriesType === 'XY') {\n\t                toolTip = series.name + ' : ${point.y}';\n\t            }\n\t            else {\n\t                toolTip = format;\n\t            }\n\t            return toolTip;\n\t        };\n\t        Tooltip.prototype.stopAnimation = function () {\n\t            helper_2.stopTimer(this.toolTipInterval);\n\t        };\n\t        Tooltip.prototype.removeTooltip = function (duration) {\n\t            var _this = this;\n\t            var chart = this.chart;\n\t            var tooltipElement = this.getElement(this.element.id + '_tooltip');\n\t            this.stopAnimation();\n\t            if (tooltipElement && this.previousPoints.length > 0) {\n\t                var data_1 = this.previousPoints;\n\t                this.toolTipInterval = setTimeout(function () {\n\t                    var series = data_1[0].series;\n\t                    var tooltipGroup = tooltipElement.firstChild;\n\t                    var opacity = parseFloat(tooltipGroup.getAttribute('opacity')) || 1;\n\t                    var element = _this.getElement(chart.element.id + '_Series_' + data_1[0].series.index\n\t                        + '_Point_' + data_1[0].point.index);\n\t                    var rectOpacity;\n\t                    if (element && series.isRectSeries && !chart.tooltip.shared) {\n\t                        rectOpacity = parseFloat(element.getAttribute('opacity'));\n\t                    }\n\t                    new ej2_base_2.Animation({}).animate(tooltipGroup, {\n\t                        duration: 200,\n\t                        progress: function (args) {\n\t                            tooltipGroup.style.animation = '';\n\t                            tooltipGroup.setAttribute('opacity', (opacity - (args.timeStamp / args.duration)).toString());\n\t                            if (element && series.isRectSeries && !chart.tooltip.shared) {\n\t                                element.setAttribute('opacity', (rectOpacity + (rectOpacity * (args.timeStamp / args.duration))).toString());\n\t                            }\n\t                        },\n\t                        end: function (model) {\n\t                            _this.valueX = null;\n\t                            _this.valueY = null;\n\t                            _this.currentPoints = [];\n\t                            if (element && series.isRectSeries && !chart.tooltip.shared) {\n\t                                element.setAttribute('opacity', series.opacity.toString());\n\t                            }\n\t                            _this.removeHighlight(chart, chart.tooltip.shared);\n\t                            _this.removeHighlightedMarker(data_1);\n\t                            tooltipGroup.setAttribute('opacity', '0');\n\t                            if (chart.tooltip.template && !chart.tooltip.shared) {\n\t                                tooltipGroup.style.display = 'none';\n\t                            }\n\t                            chart.trigger('animationComplete', {});\n\t                            _this.isComplete = true;\n\t                        }\n\t                    });\n\t                }, duration);\n\t            }\n\t        };\n\t        Tooltip.prototype.removeHighlightedMarker = function (data) {\n\t            for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n\t                var item = data_2[_i];\n\t                helper_2.removeElement(this.element.id + '_Series_' + item.series.index +\n\t                    '_Point_' + item.point.index + '_Trackball');\n\t            }\n\t            if (this.chart.markerRender) {\n\t                this.chart.markerRender.removeHighlightedMarker();\n\t            }\n\t            this.previousPoints = [];\n\t        };\n\t        Tooltip.prototype.animateTooltipDiv = function (tooltipDiv, rect) {\n\t            var _this = this;\n\t            var x = parseFloat(tooltipDiv.style.left);\n\t            var y = parseFloat(tooltipDiv.style.top);\n\t            var currenDiff;\n\t            new ej2_base_2.Animation({}).animate(tooltipDiv, {\n\t                duration: 300,\n\t                progress: function (args) {\n\t                    currenDiff = (args.timeStamp / args.duration);\n\t                    tooltipDiv.style.animation = null;\n\t                    tooltipDiv.style.left = (x + currenDiff * (rect.x - x)) + 'px';\n\t                    tooltipDiv.style.top = (y + currenDiff * (rect.y - y)) + 'px';\n\t                },\n\t                end: function (model) {\n\t                    _this.updateDiv(tooltipDiv, rect.x, rect.y);\n\t                }\n\t            });\n\t        };\n\t        Tooltip.prototype.updateDiv = function (tooltipDiv, x, y) {\n\t            tooltipDiv.style.left = x + 'px';\n\t            tooltipDiv.style.top = y + 'px';\n\t        };\n\t        Tooltip.prototype.getModuleName = function () {\n\t            return 'Tooltip';\n\t        };\n\t        Tooltip.prototype.destroy = function (chart) {\n\t        };\n\t        return Tooltip;\n\t    }(get_data_1.Data));\n\t    exports.Tooltip = Tooltip;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(64), __webpack_require__(11), __webpack_require__(5), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, zooming_toolkit_1, theme_1, constants_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Zoom = (function () {\n\t        function Zoom(chart) {\n\t            this.chart = chart;\n\t            this.isPointer = ej2_base_1.Browser.isPointer;\n\t            this.browserName = ej2_base_1.Browser.info.name;\n\t            this.wheelEvent = this.browserName === 'mozilla' ? (this.isPointer ? 'mousewheel' : 'DOMMouseScroll') : 'mousewheel';\n\t            this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n\t            this.addEventListener();\n\t            this.isDevice = ej2_base_1.Browser.isDevice;\n\t            var zooming = chart.zoomSettings;\n\t            this.toolkit = new zooming_toolkit_1.Toolkit(chart);\n\t            this.zooming = zooming;\n\t            this.elementId = chart.element.id;\n\t            this.zoomingRect = new helper_1.Rect(0, 0, 0, 0);\n\t            this.zoomAxes = [];\n\t            this.zoomkitOpacity = 0.3;\n\t            this.isIOS = ej2_base_1.Browser.isIos || ej2_base_1.Browser.isIos7;\n\t        }\n\t        Zoom.prototype.renderZooming = function (e, chart, isTouch) {\n\t            this.calculateZoomAxesRange(chart, chart.axisCollections);\n\t            if (this.zooming.enableSelectionZooming && (!isTouch\n\t                || (chart.isDoubleTap && this.touchStartList.length === 1)) && (!this.isPanning || chart.isDoubleTap)) {\n\t                this.isPanning = this.isDevice ? true : this.isPanning;\n\t                this.drawZoomingRectangle(chart);\n\t            }\n\t            else if (this.isPanning && chart.isChartDrag) {\n\t                if (!isTouch || (isTouch && this.touchStartList.length === 1)) {\n\t                    this.pinchTarget = isTouch ? e.target : null;\n\t                    this.doPan(chart, chart.axisCollections);\n\t                }\n\t            }\n\t            chart.startMove = (chart.startMove) ? !this.isPanning : chart.startMove;\n\t        };\n\t        Zoom.prototype.drawZoomingRectangle = function (chart) {\n\t            var areaBounds = chart.chartAxisLayoutPanel.seriesClipRect;\n\t            var startLocation = new helper_1.ChartLocation(chart.previousMouseMoveX, chart.previousMouseMoveY);\n\t            var endLocation = new helper_1.ChartLocation(chart.mouseX, chart.mouseY);\n\t            var rect = this.zoomingRect = helper_1.getRectLocation(startLocation, endLocation, areaBounds);\n\t            if (rect.width > 0 && rect.height > 0) {\n\t                this.isZoomed = true;\n\t                chart.disableTrackTooltip = true;\n\t                chart.svgObject.setAttribute('cursor', 'crosshair');\n\t                if (this.zooming.mode === 'X') {\n\t                    rect.height = areaBounds.height;\n\t                    rect.y = areaBounds.y;\n\t                }\n\t                else if (this.zooming.mode === 'Y') {\n\t                    rect.width = areaBounds.width;\n\t                    rect.x = areaBounds.x;\n\t                }\n\t                chart.svgObject.appendChild(chart.renderer.drawRectangle(new helper_1.RectOption(this.elementId + '_ZoomArea', theme_1.Theme.selectionRectFill, { color: theme_1.Theme.selectionRectStroke, width: 1 }, 1, rect, 0, 0, '', '3')));\n\t            }\n\t        };\n\t        Zoom.prototype.doPan = function (chart, axes) {\n\t            var currentScale;\n\t            var offset;\n\t            this.isZoomed = true;\n\t            var translateX;\n\t            var translateY;\n\t            this.offset = !chart.delayRedraw ? chart.chartAxisLayoutPanel.seriesClipRect : this.offset;\n\t            chart.delayRedraw = true;\n\t            chart.disableTrackTooltip = true;\n\t            axes.forEach(function (axis) {\n\t                currentScale = Math.max(1 / helper_1.minMax(axis.zoomFactor, 0, 1), 1);\n\t                if (axis.orientation === 'Horizontal') {\n\t                    offset = (chart.previousMouseMoveX - chart.mouseX) / axis.rect.width / currentScale;\n\t                    axis.zoomPosition = helper_1.minMax(axis.zoomPosition + offset, 0, (1 - axis.zoomFactor));\n\t                }\n\t                else {\n\t                    offset = (chart.previousMouseMoveY - chart.mouseY) / axis.rect.height / currentScale;\n\t                    axis.zoomPosition = helper_1.minMax(axis.zoomPosition - offset, 0, (1 - axis.zoomFactor));\n\t                }\n\t            });\n\t            if (this.zooming.enableDeferredZooming) {\n\t                translateX = chart.mouseX - chart.mouseDownX;\n\t                translateY = chart.mouseY - chart.mouseDownY;\n\t                switch (this.zooming.mode) {\n\t                    case 'X':\n\t                        translateY = 0;\n\t                        break;\n\t                    case 'Y':\n\t                        translateX = 0;\n\t                        break;\n\t                }\n\t                this.setTransform(translateX, translateY, null, null, chart, false);\n\t                this.refreshAxis(chart.chartAxisLayoutPanel, chart, chart.axisCollections);\n\t            }\n\t            else {\n\t                this.performZoomRedraw(chart);\n\t            }\n\t            chart.previousMouseMoveX = chart.mouseX;\n\t            chart.previousMouseMoveY = chart.mouseY;\n\t        };\n\t        Zoom.prototype.performZoomRedraw = function (chart) {\n\t            var rect = this.zoomingRect;\n\t            chart.animateSeries = false;\n\t            if (this.isZoomed) {\n\t                if (rect.width > 0 && rect.height > 0) {\n\t                    chart.svgObject.setAttribute('cursor', 'auto');\n\t                    this.doZoom(chart, chart.axisCollections, chart.chartAxisLayoutPanel.seriesClipRect);\n\t                    chart.isDoubleTap = false;\n\t                }\n\t                else if (chart.disableTrackTooltip) {\n\t                    chart.disableTrackTooltip = false;\n\t                    chart.delayRedraw = false;\n\t                    chart.removeSvg();\n\t                    chart.refreshAxis();\n\t                    chart.refreshBound();\n\t                }\n\t            }\n\t        };\n\t        Zoom.prototype.refreshAxis = function (layout, chart, axes) {\n\t            var mode = chart.zoomSettings.mode;\n\t            layout.measureAxis(new helper_1.Rect(chart.initialClipRect.x, chart.initialClipRect.y, chart.initialClipRect.width, chart.initialClipRect.height));\n\t            axes.map(function (axis, index) {\n\t                if (axis.orientation === 'Horizontal' && mode !== 'Y') {\n\t                    layout.drawXAxisLabels(axis, index);\n\t                }\n\t                if (axis.orientation === 'Vertical' && mode !== 'X') {\n\t                    layout.drawYAxisLabels(axis, index);\n\t                }\n\t            });\n\t        };\n\t        Zoom.prototype.doZoom = function (chart, axes, bounds) {\n\t            var zoomRect = this.zoomingRect;\n\t            var mode = this.zooming.mode;\n\t            var argsData;\n\t            var previousZF;\n\t            var previousZP;\n\t            var currentZF;\n\t            var currentZP;\n\t            axes.forEach(function (axis) {\n\t                previousZF = currentZF = axis.zoomFactor;\n\t                previousZP = currentZP = axis.zoomPosition;\n\t                argsData = {\n\t                    cancel: false, name: constants_1.zoomComplete, axis: axis, previousZoomFactor: previousZF, previousZoomPosition: previousZP,\n\t                    currentZoomFactor: currentZF, currentZoomPosition: currentZP\n\t                };\n\t                if (axis.orientation === 'Horizontal') {\n\t                    if (mode !== 'Y') {\n\t                        currentZP += Math.abs((zoomRect.x - bounds.x) / (bounds.width)) * axis.zoomFactor;\n\t                        currentZF *= (zoomRect.width / bounds.width);\n\t                        argsData.currentZoomPosition = currentZP;\n\t                        argsData.currentZoomFactor = currentZF;\n\t                        chart.trigger(constants_1.zoomComplete, argsData);\n\t                    }\n\t                }\n\t                else {\n\t                    if (mode !== 'X') {\n\t                        currentZP += (1 - Math.abs((zoomRect.height + (zoomRect.y - bounds.y)) / (bounds.height))) * axis.zoomFactor;\n\t                        currentZF *= (zoomRect.height / bounds.height);\n\t                        argsData.currentZoomFactor = currentZF;\n\t                        argsData.currentZoomPosition = currentZP;\n\t                        chart.trigger(constants_1.zoomComplete, argsData);\n\t                    }\n\t                }\n\t                if (!argsData.cancel) {\n\t                    axis.zoomFactor = argsData.currentZoomFactor;\n\t                    axis.zoomPosition = argsData.currentZoomPosition;\n\t                }\n\t            });\n\t            this.zoomingRect = new helper_1.Rect(0, 0, 0, 0);\n\t            this.performZoomRedraw(chart);\n\t        };\n\t        Zoom.prototype.performMouseWheelZooming = function (e, mouseX, mouseY, chart, axes) {\n\t            var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\n\t                -(e.detail) / 3 > 0 ? 1 : -1 : (e.wheelDelta / 120) > 0 ? 1 : -1;\n\t            var mode = this.zooming.mode;\n\t            var origin = 0.5;\n\t            var cumulative;\n\t            var zoomFactor;\n\t            var zoomPosition;\n\t            this.isZoomed = true;\n\t            this.calculateZoomAxesRange(chart, chart.axisCollections);\n\t            chart.disableTrackTooltip = true;\n\t            axes.forEach(function (axis) {\n\t                if ((axis.orientation === 'Vertical' && mode !== 'X') ||\n\t                    (axis.orientation === 'Horizontal' && mode !== 'Y')) {\n\t                    cumulative = Math.max(Math.max(1 / helper_1.minMax(axis.zoomFactor, 0, 1), 1) + (0.25 * direction), 1);\n\t                    if (cumulative >= 1) {\n\t                        origin = axis.orientation === 'Horizontal' ? mouseX / axis.rect.width : 1 - (mouseY / axis.rect.height);\n\t                        origin = origin > 1 ? 1 : origin < 0 ? 0 : origin;\n\t                        zoomFactor = (cumulative === 1) ? 1 : helper_1.minMax(1 / cumulative, 0, 1);\n\t                        zoomPosition = (cumulative === 1) ? 0 : axis.zoomPosition + ((axis.zoomFactor - zoomFactor) * origin);\n\t                        if (axis.zoomPosition !== zoomPosition || axis.zoomFactor !== zoomFactor) {\n\t                            zoomFactor = (zoomPosition + zoomFactor) > 1 ? (1 - zoomPosition) : zoomFactor;\n\t                        }\n\t                    }\n\t                    axis.zoomFactor = zoomFactor;\n\t                    axis.zoomPosition = zoomPosition;\n\t                }\n\t            });\n\t            this.performZoomRedraw(chart);\n\t        };\n\t        Zoom.prototype.performPinchZooming = function (e, chart) {\n\t            if (this.zoomingRect.width > 0 && this.zoomingRect.height > 0) {\n\t                return false;\n\t            }\n\t            this.calculateZoomAxesRange(chart, chart.axisCollections);\n\t            this.isZoomed = true;\n\t            this.isPanning = true;\n\t            this.offset = !chart.delayRedraw ? chart.chartAxisLayoutPanel.seriesClipRect : this.offset;\n\t            chart.delayRedraw = true;\n\t            chart.disableTrackTooltip = true;\n\t            var elementOffset = chart.element.getBoundingClientRect();\n\t            var touchDown = this.touchStartList;\n\t            var touchMove = this.touchMoveList;\n\t            var touch0StartX = touchDown[0].pageX - elementOffset.left;\n\t            var touch0StartY = touchDown[0].pageY - elementOffset.top;\n\t            var touch0EndX = touchMove[0].pageX - elementOffset.left;\n\t            var touch0EndY = touchMove[0].pageY - elementOffset.top;\n\t            var touch1StartX = touchDown[1].pageX - elementOffset.left;\n\t            var touch1StartY = touchDown[1].pageY - elementOffset.top;\n\t            var touch1EndX = touchMove[1].pageX - elementOffset.left;\n\t            var touch1EndY = touchMove[1].pageY - elementOffset.top;\n\t            var scaleX;\n\t            var scaleY;\n\t            var translateXValue;\n\t            var translateYValue;\n\t            var pinchRect;\n\t            var clipX;\n\t            var clipY;\n\t            scaleX = Math.abs(touch0EndX - touch1EndX) / Math.abs(touch0StartX - touch1StartX);\n\t            scaleY = Math.abs(touch0EndY - touch1EndY) / Math.abs(touch0StartY - touch1StartY);\n\t            clipX = ((this.offset.x - touch0EndX) / scaleX) + touch0StartX;\n\t            clipY = ((this.offset.y - touch0EndY) / scaleY) + touch0StartY;\n\t            pinchRect = new helper_1.Rect(clipX, clipY, this.offset.width / scaleX, this.offset.height / scaleY);\n\t            translateXValue = (touch0EndX - (scaleX * touch0StartX));\n\t            translateYValue = (touch0EndY - (scaleY * touch0StartY));\n\t            if (!isNaN(scaleX - scaleX) && !isNaN(scaleY - scaleY)) {\n\t                switch (this.zooming.mode) {\n\t                    case 'XY':\n\t                        this.setTransform(translateXValue, translateYValue, scaleX, scaleY, chart, true);\n\t                        break;\n\t                    case 'X':\n\t                        this.setTransform(translateXValue, 0, scaleX, 1, chart, true);\n\t                        break;\n\t                    case 'Y':\n\t                        this.setTransform(0, translateYValue, 1, scaleY, chart, true);\n\t                        break;\n\t                }\n\t            }\n\t            this.calculatePinchZoomFactor(chart, pinchRect);\n\t            this.refreshAxis(chart.chartAxisLayoutPanel, chart, chart.axisCollections);\n\t            chart.startMove = (chart.startMove) ? !this.isPanning : chart.startMove;\n\t            return true;\n\t        };\n\t        Zoom.prototype.calculatePinchZoomFactor = function (chart, pinchRect) {\n\t            var _this = this;\n\t            var mode = this.zooming.mode;\n\t            var selectionMin;\n\t            var selectionMax;\n\t            var rangeMin;\n\t            var rangeMax;\n\t            var value;\n\t            var axisTrans;\n\t            chart.axisCollections.forEach(function (axis, index) {\n\t                if ((axis.orientation === 'Horizontal' && mode !== 'Y') ||\n\t                    (axis.orientation === 'Vertical' && mode !== 'X')) {\n\t                    if (axis.orientation === 'Horizontal') {\n\t                        value = pinchRect.x - _this.offset.x;\n\t                        axisTrans = axis.rect.width / _this.zoomAxes[index].delta;\n\t                        rangeMin = value / axisTrans + _this.zoomAxes[index].min;\n\t                        value = pinchRect.x + pinchRect.width - _this.offset.x;\n\t                        rangeMax = value / axisTrans + _this.zoomAxes[index].min;\n\t                    }\n\t                    else {\n\t                        value = pinchRect.y - _this.offset.y;\n\t                        axisTrans = axis.rect.height / _this.zoomAxes[index].delta;\n\t                        rangeMin = (value * -1 + axis.rect.height) / axisTrans + _this.zoomAxes[index].min;\n\t                        value = pinchRect.y + pinchRect.height - _this.offset.y;\n\t                        rangeMax = (value * -1 + axis.rect.height) / axisTrans + _this.zoomAxes[index].min;\n\t                    }\n\t                    selectionMin = Math.min(rangeMin, rangeMax);\n\t                    selectionMax = Math.max(rangeMin, rangeMax);\n\t                    axis.zoomPosition = (selectionMin - _this.zoomAxes[index].actualMin) / _this.zoomAxes[index].actualDelta;\n\t                    axis.zoomFactor = (selectionMax - selectionMin) / _this.zoomAxes[index].actualDelta;\n\t                    axis.zoomPosition = axis.zoomPosition < 0 ? 0 : axis.zoomPosition;\n\t                    axis.zoomFactor = axis.zoomFactor > 1 ? 1 : axis.zoomFactor;\n\t                }\n\t            });\n\t        };\n\t        Zoom.prototype.setTransform = function (transX, transY, scaleX, scaleY, chart, isPinch) {\n\t            chart.seriesElements.setAttribute('clip-path', 'url(#' + this.elementId + '_ChartAreaClipRect_)');\n\t            var translate;\n\t            var xAxisLoc;\n\t            var yAxisLoc;\n\t            var element;\n\t            if (transX !== null && transY !== null) {\n\t                chart.visibleSeries.forEach(function (value) {\n\t                    xAxisLoc = chart.requireInvertedAxis ? value.yAxis.rect.x : value.xAxis.rect.x;\n\t                    yAxisLoc = chart.requireInvertedAxis ? value.xAxis.rect.y : value.yAxis.rect.y;\n\t                    translate = 'translate(' + (transX + (isPinch ? (scaleX * xAxisLoc) : xAxisLoc)) +\n\t                        ',' + (transY + (isPinch ? (scaleY * yAxisLoc) : yAxisLoc)) + ')';\n\t                    translate = (scaleX || scaleY) ? translate + ' scale(' + scaleX + ' ' + scaleY + ')' : translate;\n\t                    value.seriesElement.setAttribute('transform', translate);\n\t                    element = helper_1.getElement(chart.element.id + '_Series_' + value.index + '_DataLabelCollections');\n\t                    if (value.errorBarElement) {\n\t                        value.errorBarElement.setAttribute('transform', translate);\n\t                    }\n\t                    if (value.symbolElement) {\n\t                        value.symbolElement.setAttribute('transform', translate);\n\t                    }\n\t                    if (value.textElement) {\n\t                        value.textElement.setAttribute('visibility', 'hidden');\n\t                        value.shapeElement.setAttribute('visibility', 'hidden');\n\t                    }\n\t                    if (element) {\n\t                        element.style.visibility = 'hidden';\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Zoom.prototype.calculateZoomAxesRange = function (chart, axes) {\n\t            var _this = this;\n\t            var range;\n\t            var axisRange;\n\t            chart.axisCollections.forEach(function (axis, index) {\n\t                axisRange = axis.actualRange;\n\t                if (_this.zoomAxes[index]) {\n\t                    if (!chart.delayRedraw) {\n\t                        _this.zoomAxes[index].min = axisRange.min;\n\t                        _this.zoomAxes[index].delta = axisRange.delta;\n\t                    }\n\t                }\n\t                else {\n\t                    range = {\n\t                        actualMin: axisRange.min,\n\t                        actualDelta: axisRange.delta,\n\t                        min: axisRange.min,\n\t                        delta: axisRange.delta\n\t                    };\n\t                    _this.zoomAxes[index] = range;\n\t                }\n\t            });\n\t        };\n\t        Zoom.prototype.showZoomingToolkit = function (chart) {\n\t            var toolboxItems = this.zooming.toolbarItems;\n\t            var areaBounds = chart.chartAxisLayoutPanel.seriesClipRect;\n\t            var spacing = 5;\n\t            var render = chart.renderer;\n\t            var length = this.isDevice ? 1 : toolboxItems.length;\n\t            var iconSize = this.isDevice ? helper_1.measureText('Reset Zoom', { size: '12px' }).width : 16;\n\t            var height = this.isDevice ? helper_1.measureText('Reset Zoom', { size: '12px' }).height : 22;\n\t            var width = (length * iconSize) + ((length + 1) * spacing) + ((length - 1) * spacing);\n\t            var transX = areaBounds.x + areaBounds.width - width - spacing;\n\t            var transY = (areaBounds.y + spacing);\n\t            var xPosition = spacing;\n\t            var outerElement;\n\t            var toolkit = this.toolkit;\n\t            var element;\n\t            var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n\t            shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n\t            shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n\t            if (length === 0 || helper_1.getElement(this.elementId + '_Zooming_KitCollection')) {\n\t                return false;\n\t            }\n\t            var defElement = render.createDefs();\n\t            toolboxItems = this.isDevice ? ['Reset'] : toolboxItems;\n\t            defElement.innerHTML = shadowElement;\n\t            this.toolkitElements = render.createGroup({\n\t                id: this.elementId + '_Zooming_KitCollection',\n\t                transform: 'translate(' + transX + ',' + transY + ')'\n\t            });\n\t            this.toolkitElements.appendChild(defElement);\n\t            this.toolkitElements.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Rect', '#fafafa', { color: 'transparent', width: 1 }, 1, new helper_1.Rect(0, 0, width, (height + (spacing * 2))), 0, 0)));\n\t            outerElement = render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Rect', '#fafafa', { color: 'transparent', width: 1 }, 0.1, new helper_1.Rect(0, 0, width, (height + (spacing * 2))), 0, 0));\n\t            outerElement.setAttribute('filter', 'url(#chart_shadow)');\n\t            this.toolkitElements.appendChild(outerElement);\n\t            var currentItem;\n\t            for (var i = 1; i <= length; i++) {\n\t                currentItem = toolboxItems[i - 1];\n\t                element = render.createGroup({\n\t                    transform: 'translate(' + xPosition + ',' + (this.isDevice ? spacing : (spacing + 3)) + ')'\n\t                });\n\t                switch (currentItem) {\n\t                    case 'Pan':\n\t                        toolkit.createPanButton(element, this.toolkitElements, chart);\n\t                        break;\n\t                    case 'Zoom':\n\t                        toolkit.createZoomButton(element, this.toolkitElements, chart);\n\t                        break;\n\t                    case 'ZoomIn':\n\t                        toolkit.createZoomInButton(element, this.toolkitElements, chart);\n\t                        break;\n\t                    case 'ZoomOut':\n\t                        toolkit.createZoomOutButton(element, this.toolkitElements, chart);\n\t                        break;\n\t                    case 'Reset':\n\t                        toolkit.createResetButton(element, this.toolkitElements, chart, this.isDevice);\n\t                        break;\n\t                }\n\t                xPosition += iconSize + (spacing * 2);\n\t            }\n\t            this.toolkitElements.setAttribute('opacity', this.isDevice ? '1' : '' + this.zoomkitOpacity);\n\t            this.toolkitElements.setAttribute('cursor', 'auto');\n\t            chart.svgObject.appendChild(this.toolkitElements);\n\t            if (!this.isDevice) {\n\t                ej2_base_1.EventHandler.add(this.toolkitElements, 'mousemove touchstart', this.zoomToolkitMove, this);\n\t                ej2_base_1.EventHandler.add(this.toolkitElements, 'mouseleave touchend', this.zoomToolkitLeave, this);\n\t                if (this.isPanning) {\n\t                    toolkit.pan();\n\t                }\n\t            }\n\t            return true;\n\t        };\n\t        Zoom.prototype.applyZoomToolkit = function (chart, axes) {\n\t            var showToolkit = false;\n\t            axes.forEach(function (axis) {\n\t                showToolkit = (showToolkit || (axis.zoomFactor !== 1 || axis.zoomPosition !== 0));\n\t            });\n\t            if (showToolkit) {\n\t                this.showZoomingToolkit(chart);\n\t                this.isZoomed = true;\n\t            }\n\t            else {\n\t                this.toolkit.removeTooltip();\n\t                this.isPanning = false;\n\t                this.isZoomed = false;\n\t            }\n\t        };\n\t        Zoom.prototype.zoomToolkitMove = function (e) {\n\t            var element = this.toolkitElements;\n\t            var opacity = +element.getAttribute('opacity');\n\t            this.zoomkitOpacity = 1;\n\t            element.setAttribute('opacity', '' + this.zoomkitOpacity);\n\t            return false;\n\t        };\n\t        Zoom.prototype.zoomToolkitLeave = function (e) {\n\t            var element = this.toolkitElements;\n\t            this.zoomkitOpacity = 0.3;\n\t            element.setAttribute('opacity', '' + this.zoomkitOpacity);\n\t            return false;\n\t        };\n\t        Zoom.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.add(this.chart.element, this.wheelEvent, this.chartMouseWheel, this);\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMoveHandler, this);\n\t            this.chart.on(ej2_base_1.Browser.touchStartEvent, this.mouseDownHandler, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.mouseUpHandler, this);\n\t            this.chart.on(this.cancelEvent, this.mouseCancelHandler, this);\n\t        };\n\t        Zoom.prototype.removeEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            ej2_base_1.EventHandler.remove(this.chart.element, this.wheelEvent, this.chartMouseWheel);\n\t            this.chart.off(ej2_base_1.Browser.touchMoveEvent, this.mouseMoveHandler);\n\t            this.chart.off(ej2_base_1.Browser.touchStartEvent, this.mouseDownHandler);\n\t            this.chart.off(ej2_base_1.Browser.touchEndEvent, this.mouseUpHandler);\n\t            this.chart.off(this.cancelEvent, this.mouseCancelHandler);\n\t        };\n\t        Zoom.prototype.chartMouseWheel = function (e) {\n\t            var chart = this.chart;\n\t            var offset = chart.element.getBoundingClientRect();\n\t            var svgRect = helper_1.getElement(chart.element.id + '_svg').getBoundingClientRect();\n\t            var mouseX = (e.clientX - offset.left) - Math.max(svgRect.left - offset.left, 0);\n\t            var mouseY = (e.clientY - offset.top) - Math.max(svgRect.top - offset.top, 0);\n\t            if (this.zooming.enableMouseWheelZooming &&\n\t                helper_2.withInBounds(mouseX, mouseY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                e.preventDefault();\n\t                this.performMouseWheelZooming(e, mouseX, mouseY, chart, chart.axisCollections);\n\t            }\n\t            return false;\n\t        };\n\t        Zoom.prototype.mouseMoveHandler = function (e) {\n\t            var chart = this.chart;\n\t            var touches = null;\n\t            if (e.type === 'touchmove') {\n\t                if (e.preventDefault && this.isIOS &&\n\t                    (this.isPanning || (chart.isDoubleTap)\n\t                        || (this.zooming.enablePinchZooming && this.touchStartList.length > 1))) {\n\t                    e.preventDefault();\n\t                }\n\t                touches = e.touches;\n\t            }\n\t            if (chart.isChartDrag) {\n\t                if (chart.isTouch) {\n\t                    this.touchMoveList = this.addTouchPointer(this.touchMoveList, e, touches);\n\t                    if (this.zooming.enablePinchZooming && this.touchMoveList.length > 1\n\t                        && this.touchStartList.length > 1) {\n\t                        this.performPinchZooming(e, chart);\n\t                    }\n\t                }\n\t                this.renderZooming(e, chart, chart.isTouch);\n\t            }\n\t        };\n\t        Zoom.prototype.mouseDownHandler = function (e) {\n\t            var chart = this.chart;\n\t            var touches = null;\n\t            var target;\n\t            if (e.type === 'touchstart') {\n\t                touches = e.touches;\n\t                target = e.target;\n\t            }\n\t            else {\n\t                target = e.target;\n\t            }\n\t            if (target.id.indexOf(chart.element.id + '_Zooming_') === -1 &&\n\t                helper_2.withInBounds(chart.previousMouseMoveX, chart.previousMouseMoveY, chart.chartAxisLayoutPanel.seriesClipRect)) {\n\t                chart.isChartDrag = true;\n\t            }\n\t            if (chart.isTouch) {\n\t                this.touchStartList = this.addTouchPointer(this.touchStartList, e, touches);\n\t            }\n\t        };\n\t        Zoom.prototype.mouseUpHandler = function (e) {\n\t            var chart = this.chart;\n\t            var performZoomRedraw = e.target.id.indexOf(chart.element.id + '_ZoomOut_') === -1 ||\n\t                e.target.id.indexOf(chart.element.id + '_ZoomIn_') === -1;\n\t            if (chart.isChartDrag || performZoomRedraw) {\n\t                this.performZoomRedraw(chart);\n\t            }\n\t            if (chart.isTouch) {\n\t                if (chart.isDoubleTap && helper_2.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect)\n\t                    && this.touchStartList.length === 1 && this.isZoomed) {\n\t                    this.toolkit.reset();\n\t                }\n\t                this.touchStartList = [];\n\t                chart.isDoubleTap = false;\n\t            }\n\t        };\n\t        Zoom.prototype.mouseCancelHandler = function (e) {\n\t            if (this.isZoomed) {\n\t                this.performZoomRedraw(this.chart);\n\t            }\n\t            this.pinchTarget = null;\n\t            this.touchStartList = [];\n\t            this.touchMoveList = [];\n\t        };\n\t        Zoom.prototype.addTouchPointer = function (touchList, e, touches) {\n\t            if (touches) {\n\t                touchList = [];\n\t                for (var i = 0, length_1 = touches.length; i < length_1; i++) {\n\t                    touchList.push({ pageX: touches[i].clientX, pageY: touches[i].clientY, pointerId: null });\n\t                }\n\t            }\n\t            else {\n\t                touchList = touchList ? touchList : [];\n\t                if (touchList.length === 0) {\n\t                    touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n\t                }\n\t                else {\n\t                    for (var i = 0, length_2 = touchList.length; i < length_2; i++) {\n\t                        if (touchList[i].pointerId === e.pointerId) {\n\t                            touchList[i] = { pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId };\n\t                        }\n\t                        else {\n\t                            touchList.push({ pageX: e.clientX, pageY: e.clientY, pointerId: e.pointerId });\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            return touchList;\n\t        };\n\t        Zoom.prototype.getModuleName = function () {\n\t            return 'Zoom';\n\t        };\n\t        Zoom.prototype.destroy = function (chart) {\n\t            this.removeEventListener();\n\t        };\n\t        return Zoom;\n\t    }());\n\t    exports.Zoom = Zoom;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, helper_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Toolkit = (function () {\n\t        function Toolkit(chart) {\n\t            this.chart = chart;\n\t            this.elementId = chart.element.id;\n\t            this.selectionColor = '#ff4081';\n\t            this.fillColor = '#737373';\n\t        }\n\t        Toolkit.prototype.createPanButton = function (childElement, parentElement, chart) {\n\t            var render = this.chart.renderer;\n\t            var fillColor = this.chart.zoomModule.isPanning ? this.selectionColor : this.fillColor;\n\t            var direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n\t            direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n\t            childElement.id = this.elementId + '_Zooming_Pan';\n\t            childElement.setAttribute('aria-label', this.chart.getLocalizedLabel('Pan'));\n\t            this.panElements = childElement;\n\t            childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Pan_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, 16, 16))));\n\t            childElement.appendChild(render.drawPath(new helper_1.PathOption(this.elementId + '_Zooming_Pan_2', fillColor, null, null, 1, null, direction)));\n\t            parentElement.appendChild(childElement);\n\t            this.wireEvents(childElement, this.pan);\n\t        };\n\t        Toolkit.prototype.createZoomButton = function (childElement, parentElement, chart) {\n\t            var render = this.chart.renderer;\n\t            var fillColor = this.chart.zoomModule.isPanning ? this.fillColor : this.selectionColor;\n\t            var direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n\t            direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n\t            direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n\t            childElement.id = this.elementId + '_Zooming_Zoom';\n\t            childElement.setAttribute('aria-label', this.chart.getLocalizedLabel('Zoom'));\n\t            this.zoomElements = childElement;\n\t            childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Zoom_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, 16, 16))));\n\t            childElement.appendChild(render.drawPath(new helper_1.PathOption(this.elementId + '_Zooming_Zoom_3', fillColor, null, null, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n\t            parentElement.appendChild(childElement);\n\t            this.wireEvents(childElement, this.zoom);\n\t        };\n\t        Toolkit.prototype.createZoomInButton = function (childElement, parentElement, chart) {\n\t            var render = this.chart.renderer;\n\t            var fillColor = this.fillColor;\n\t            var direction = 'M10.103,0C6.812,0,4.16,2.651,4.16,5.943c0,1.509,0.503,2.834,1.417,3.885l-0.274,0.229H4.571L0,';\n\t            direction += '14.628l0,0L1.372,16l4.571-4.572v-0.685l0.228-0.275c1.052,0.868,2.423,1.417,3.885,1.417c3.291,0,5.943-2.651,';\n\t            direction += '5.943-5.943C16,2.651,13.395,0,10.103,0z M10.058,10.058c-2.286,0-4.114-1.828-4.114-4.114c0-2.286,1.828-4.114,';\n\t            childElement.id = this.elementId + '_Zooming_ZoomIn';\n\t            childElement.setAttribute('aria-label', this.chart.getLocalizedLabel('ZoomIn'));\n\t            var polygonDirection = '12.749,5.466 10.749,5.466 10.749,3.466 9.749,3.466 9.749,5.466 7.749,5.466 7.749,6.466';\n\t            childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_ZoomIn_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, 16, 16))));\n\t            childElement.appendChild(render.drawPath(new helper_1.PathOption(this.elementId + '_Zooming_ZoomIn_2', fillColor, null, null, 1, null, direction + '4.114-4.114c2.286,0,4.114,1.828,4.114,4.114C14.172,8.229,12.344,10.058,10.058,10.058z')));\n\t            childElement.appendChild(render.drawPolygon(new helper_1.PolygonOption(this.elementId + '_Zooming_ZoomIn_3', polygonDirection + ' 9.749,6.466 9.749,8.466 10.749,8.466 10.749,6.466 12.749,6.466', fillColor)));\n\t            this.zoomInElements = childElement;\n\t            this.elementOpacity = chart.zoomModule.isPanning ? '0.2' : '1';\n\t            childElement.setAttribute('opacity', this.elementOpacity);\n\t            parentElement.appendChild(childElement);\n\t            this.wireEvents(childElement, this.zoomIn);\n\t        };\n\t        Toolkit.prototype.createZoomOutButton = function (childElement, parentElement, chart) {\n\t            var render = this.chart.renderer;\n\t            var fillColor = this.fillColor;\n\t            var direction = 'M0,14.622L1.378,16l4.533-4.533v-0.711l0.266-0.266c1.022,0.889,2.4,1.422,3.866,';\n\t            direction += '1.422c3.289,0,5.955-2.666,5.955-5.955S13.333,0,10.044,0S4.089,2.667,4.134,5.911c0,1.466,0.533,2.844,';\n\t            direction += '1.422,3.866l-0.266,0.266H4.578L0,14.622L0,14.622z M5.911,5.911c0-2.311,1.822-4.133,4.133-4.133s4.133,1.822,4.133,';\n\t            childElement.id = this.elementId + '_Zooming_ZoomOut';\n\t            childElement.setAttribute('aria-label', this.chart.getLocalizedLabel('ZoomOut'));\n\t            childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_ZoomOut_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, 16, 16))));\n\t            childElement.appendChild(render.drawPath(new helper_1.PathOption(this.elementId + '_Zooming_ZoomOut_2', fillColor, null, null, 1, null, direction + '4.133s-1.866,4.133-4.133,4.133S5.911,8.222,5.911,5.911z M12.567,6.466h-5v-1h5V6.466z')));\n\t            this.zoomOutElements = childElement;\n\t            this.elementOpacity = chart.zoomModule.isPanning ? '0.2' : '1';\n\t            childElement.setAttribute('opacity', this.elementOpacity);\n\t            parentElement.appendChild(childElement);\n\t            this.wireEvents(childElement, this.zoomOut);\n\t        };\n\t        Toolkit.prototype.createResetButton = function (childElement, parentElement, chart, isDevice) {\n\t            var render = this.chart.renderer;\n\t            var fillColor = this.fillColor;\n\t            var size;\n\t            var direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n\t            direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n\t            direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n\t            childElement.id = this.elementId + '_Zooming_Reset';\n\t            childElement.setAttribute('aria-label', this.chart.getLocalizedLabel('Reset'));\n\t            if (!isDevice) {\n\t                childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Reset_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, 16, 16))));\n\t                childElement.appendChild(render.drawPath(new helper_1.PathOption(this.elementId + '_Zooming_Reset_2', fillColor, null, null, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n\t            }\n\t            else {\n\t                size = helper_1.measureText(this.chart.getLocalizedLabel('ResetZoom'), { size: '12px' });\n\t                childElement.appendChild(render.drawRectangle(new helper_1.RectOption(this.elementId + '_Zooming_Reset_1', 'transparent', {}, 1, new helper_1.Rect(0, 0, size.width, size.height))));\n\t                helper_2.textElement(new helper_2.TextOption(this.elementId + '_Zooming_Reset_2', 0 + size.width / 2, 0 + size.height * 3 / 4, 'middle', this.chart.getLocalizedLabel('ResetZoom'), 'rotate(0,' + (0) + ',' + (0) + ')', 'auto'), { size: '12px' }, 'black', childElement);\n\t            }\n\t            parentElement.appendChild(childElement);\n\t            this.wireEvents(childElement, this.reset);\n\t        };\n\t        Toolkit.prototype.wireEvents = function (element, process) {\n\t            ej2_base_1.EventHandler.add(element, 'mousedown touchstart', process, this);\n\t            ej2_base_1.EventHandler.add(element, 'mouseover', this.showTooltip, this);\n\t            ej2_base_1.EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n\t        };\n\t        Toolkit.prototype.showTooltip = function (event) {\n\t            var text = event.currentTarget.id.split('_Zooming_')[1];\n\t            var left = (event.pageX - (helper_1.measureText(text, { size: '10px' }).width + 5));\n\t            if (!this.chart.isTouch) {\n\t                helper_1.createTooltip('EJ2_Chart_ZoomTip', this.chart.getLocalizedLabel(text), (event.pageY + 10), left, '10px');\n\t            }\n\t        };\n\t        Toolkit.prototype.removeTooltip = function () {\n\t            helper_1.removeElement('EJ2_Chart_ZoomTip');\n\t        };\n\t        Toolkit.prototype.reset = function () {\n\t            var chart = this.chart;\n\t            if (!chart.zoomModule.isDevice) {\n\t                ej2_base_2.remove(chart.zoomModule.toolkitElements);\n\t            }\n\t            this.removeTooltip();\n\t            chart.svgObject.setAttribute('cursor', 'auto');\n\t            chart.axisCollections.forEach(function (axis) {\n\t                axis.zoomFactor = 1;\n\t                axis.zoomPosition = 0;\n\t            });\n\t            chart.disableTrackTooltip = false;\n\t            chart.zoomModule.isZoomed = chart.zoomModule.isPanning = chart.isChartDrag = chart.delayRedraw = false;\n\t            chart.zoomModule.touchMoveList = chart.zoomModule.touchStartList = [];\n\t            chart.zoomModule.pinchTarget = null;\n\t            chart.removeSvg();\n\t            chart.refreshAxis();\n\t            chart.refreshBound();\n\t            this.elementOpacity = '1';\n\t            return false;\n\t        };\n\t        Toolkit.prototype.zoomIn = function (e) {\n\t            this.zoomInOutCalculation(1, this.chart, this.chart.axisCollections, this.chart.zoomSettings.mode);\n\t            return false;\n\t        };\n\t        Toolkit.prototype.zoomOut = function (e) {\n\t            this.zoomInOutCalculation(-1, this.chart, this.chart.axisCollections, this.chart.zoomSettings.mode);\n\t            return false;\n\t        };\n\t        Toolkit.prototype.zoom = function (e) {\n\t            this.chart.zoomModule.isPanning = false;\n\t            var zoomModule = this.chart.zoomModule;\n\t            this.elementOpacity = '1';\n\t            this.chart.svgObject.setAttribute('cursor', 'auto');\n\t            this.zoomInElements.setAttribute('opacity', this.elementOpacity);\n\t            this.zoomOutElements.setAttribute('opacity', this.elementOpacity);\n\t            this.applySelection(this.zoomElements.childNodes, this.selectionColor);\n\t            this.applySelection(this.panElements.childNodes, '#737373');\n\t            return false;\n\t        };\n\t        Toolkit.prototype.pan = function () {\n\t            var zoomModule = this.chart.zoomModule;\n\t            var element;\n\t            this.chart.zoomModule.isPanning = true;\n\t            this.chart.svgObject.setAttribute('cursor', 'pointer');\n\t            this.elementOpacity = '0.2';\n\t            element = this.zoomInElements ? this.zoomInElements.setAttribute('opacity', this.elementOpacity) : null;\n\t            element = this.zoomOutElements ? this.zoomOutElements.setAttribute('opacity', this.elementOpacity) : null;\n\t            element = this.panElements ? this.applySelection(this.panElements.childNodes, this.selectionColor) : null;\n\t            element = this.zoomElements ? this.applySelection(this.zoomElements.childNodes, '#737373') : null;\n\t            return false;\n\t        };\n\t        Toolkit.prototype.zoomInOutCalculation = function (scale, chart, axes, mode) {\n\t            if (!chart.zoomModule.isPanning && this.elementOpacity !== '0.2') {\n\t                var zoomFactor_1;\n\t                var zoomPosition_1;\n\t                var cumulative_1;\n\t                chart.disableTrackTooltip = true;\n\t                chart.delayRedraw = true;\n\t                axes.forEach(function (axis) {\n\t                    if ((axis.orientation === 'Horizontal' && mode !== 'Y') ||\n\t                        (axis.orientation === 'Vertical' && mode !== 'X')) {\n\t                        cumulative_1 = Math.max(Math.max(1 / helper_1.minMax(axis.zoomFactor, 0, 1), 1) + (0.25 * scale), 1);\n\t                        zoomFactor_1 = (cumulative_1 === 1) ? 1 : helper_1.minMax(1 / cumulative_1, 0, 1);\n\t                        zoomPosition_1 = (cumulative_1 === 1) ? 0 : axis.zoomPosition + ((axis.zoomFactor - zoomFactor_1) * 0.5);\n\t                        if (axis.zoomPosition !== zoomPosition_1 || axis.zoomFactor !== zoomFactor_1) {\n\t                            zoomFactor_1 = (zoomPosition_1 + zoomFactor_1) > 1 ? (1 - zoomPosition_1) : zoomFactor_1;\n\t                        }\n\t                        axis.zoomFactor = zoomFactor_1;\n\t                        axis.zoomPosition = zoomPosition_1;\n\t                    }\n\t                });\n\t            }\n\t        };\n\t        Toolkit.prototype.applySelection = function (elements, color) {\n\t            for (var i = 1, length_1 = elements.length; i < length_1; i++) {\n\t                elements[i].setAttribute('fill', color);\n\t            }\n\t        };\n\t        return Toolkit;\n\t    }());\n\t    exports.Toolkit = Toolkit;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(3), __webpack_require__(9), __webpack_require__(11), __webpack_require__(5), __webpack_require__(66)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, helper_1, base_1, theme_1, constants_1, selection_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Selection = (function (_super) {\n\t        __extends(Selection, _super);\n\t        function Selection(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.chart = chart;\n\t            _this.renderer = chart.renderer;\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        Selection.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            var cancelEvent = ej2_base_1.Browser.isPointer ? 'pointerleave' : 'mouseleave';\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMove, this);\n\t            this.chart.on(cancelEvent, this.completeSelection, this);\n\t            this.chart.on('click', this.calculateSelectedElements, this);\n\t            this.chart.on(ej2_base_1.Browser.touchStartEvent, this.mousedown, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.completeSelection, this);\n\t        };\n\t        Selection.prototype.mousedown = function (e) {\n\t            var chart = this.chart;\n\t            if (chart.selectionMode === 'None' || chart.isChartDrag) {\n\t                return;\n\t            }\n\t            if (chart.isDoubleTap || !chart.isTouch || this.rectPoints) {\n\t                this.dragStart(chart, chart.chartAxisLayoutPanel.seriesClipRect, chart.mouseDownX, chart.mouseDownY, e);\n\t            }\n\t        };\n\t        Selection.prototype.removeEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            this.chart.off(ej2_base_1.Browser.touchMoveEvent, this.mouseMove);\n\t            this.chart.off('pointerleave' || 'mouseleave', this.completeSelection);\n\t            this.chart.off('click', this.calculateSelectedElements);\n\t            this.chart.off(ej2_base_1.Browser.touchStartEvent, this.mousedown);\n\t            this.chart.off(ej2_base_1.Browser.touchEndEvent, this.completeSelection);\n\t        };\n\t        Selection.prototype.initPrivateVariables = function (chart) {\n\t            this.styleId = chart.element.id + '_ej2_chart_selection';\n\t            this.unselected = chart.element.id + '_ej2_deselected';\n\t            this.closeIconId = chart.element.id + '_ej2_drag_close';\n\t            this.draggedRectGroup = chart.element.id + '_ej2_drag_group';\n\t            this.draggedRect = chart.element.id + '_ej2_drag_rect';\n\t            this.selectedDataIndexes = [];\n\t            this.rectPoints = null;\n\t            this.isSeriesMode = chart.selectionMode === 'Series';\n\t        };\n\t        Selection.prototype.invokeSelection = function (chart) {\n\t            this.initPrivateVariables(chart);\n\t            this.series = ej2_base_3.extend({}, chart.visibleSeries, null, true);\n\t            this.seriesStyles();\n\t            if (!(chart.selectionMode.indexOf('Drag') > -1)) {\n\t                this.selectDataIndex(chart, this.concatIndexes(chart.selectedDataIndexes, this.selectedDataIndexes));\n\t            }\n\t        };\n\t        Selection.prototype.generateStyle = function (series) {\n\t            if (series) {\n\t                return (series.selectionStyle || this.styleId + '_series_' + series.index);\n\t            }\n\t            return 'undefined';\n\t        };\n\t        Selection.prototype.selectDataIndex = function (chart, indexes) {\n\t            for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n\t                var index = indexes_1[_i];\n\t                this.performSelection(index, chart, this.getElementByIndex(chart, index)[0]);\n\t            }\n\t        };\n\t        Selection.prototype.getElementByIndex = function (chart, index, suffix) {\n\t            if (suffix === void 0) { suffix = ''; }\n\t            var elementId = chart.element.id + '_Series_' + index.series + '_Point' + '_' + index.point;\n\t            var series = chart.series[index.series];\n\t            elementId = (!series.isRectSeries && series.type !== 'Scatter' && series.type !== 'Bubble' &&\n\t                series.marker.visible) ? (elementId + '_Symbol' + suffix) : elementId;\n\t            return [helper_1.getElement(elementId), (series.type === 'RangeArea' && series.marker.visible) ? helper_1.getElement(elementId + '1') : null];\n\t        };\n\t        Selection.prototype.getClusterElements = function (chart, index) {\n\t            var clusters = [];\n\t            for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                index = new base_1.Index(series.index, index.point);\n\t                clusters.push(this.getElementByIndex(chart, index)[0]);\n\t            }\n\t            return clusters;\n\t        };\n\t        Selection.prototype.findElements = function (chart, series, index, suffix) {\n\t            if (suffix === void 0) { suffix = ''; }\n\t            if (this.isSeriesMode) {\n\t                return this.getSeriesElements(series);\n\t            }\n\t            else if (chart.selectionMode === 'Cluster') {\n\t                return this.getClusterElements(chart, index);\n\t            }\n\t            else {\n\t                return this.getElementByIndex(chart, index, suffix);\n\t            }\n\t        };\n\t        Selection.prototype.calculateSelectedElements = function (event) {\n\t            if (this.chart.selectionMode === 'None' || event.target.id.indexOf(this.chart.element.id + '_') === -1) {\n\t                return;\n\t            }\n\t            if (event.target.id.indexOf('_Series_') > -1) {\n\t                this.performSelection(this.indexFinder(event.target.id), this.chart, event.target);\n\t            }\n\t        };\n\t        Selection.prototype.performSelection = function (index, chart, element) {\n\t            this.isSeriesMode = chart.selectionMode === 'Series';\n\t            if (chart.series[index.series].type === 'BoxAndWhisker' &&\n\t                element.id === chart.element.id + '_Series_' + index.series + '_Point_' + index.point + '_BoxPath') {\n\t                element = element.parentElement;\n\t            }\n\t            switch (chart.selectionMode) {\n\t                case 'Series':\n\t                    this.selection(chart, index, this.getSeriesElements(chart.series[index.series]));\n\t                    this.blurEffect(chart.element.id, chart.visibleSeries);\n\t                    break;\n\t                case 'Point':\n\t                    if (!isNaN(index.point)) {\n\t                        this.selection(chart, index, [element]);\n\t                        this.blurEffect(chart.element.id, chart.visibleSeries);\n\t                    }\n\t                    break;\n\t                case 'Cluster':\n\t                    if (!isNaN(index.point)) {\n\t                        this.clusterSelection(chart, chart.series, index);\n\t                        this.blurEffect(chart.element.id, chart.visibleSeries);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        Selection.prototype.selection = function (chart, index, selectedElements) {\n\t            if (!chart.isMultiSelect && (chart.selectionMode.indexOf('Drag') === -1)) {\n\t                this.removeMultiSelectEelments(chart, this.selectedDataIndexes, index, chart.series);\n\t            }\n\t            var className = selectedElements[0] && (selectedElements[0].getAttribute('class') || '');\n\t            if (selectedElements[0] && className.indexOf(this.getSelectionClass(selectedElements[0].id)) > -1) {\n\t                this.removeStyles(selectedElements);\n\t                this.addOrRemoveIndex(this.selectedDataIndexes, index);\n\t            }\n\t            else {\n\t                this.applyStyles(selectedElements);\n\t                this.addOrRemoveIndex(this.selectedDataIndexes, index, true);\n\t            }\n\t        };\n\t        Selection.prototype.clusterSelection = function (chart, series, index) {\n\t            this.selection(chart, index, this.getClusterElements(chart, new base_1.Index(index.series, index.point)));\n\t        };\n\t        Selection.prototype.removeMultiSelectEelments = function (chart, index, currentIndex, seriesCollection) {\n\t            var series;\n\t            for (var i = 0; i < index.length; i++) {\n\t                series = seriesCollection[index[i].series];\n\t                if ((this.isSeriesMode && !this.toEquals(index[i], currentIndex, this.isSeriesMode)) ||\n\t                    (this.control.selectionMode === 'Cluster' && !this.toEquals(index[i], currentIndex, false)) ||\n\t                    (!this.isSeriesMode && this.toEquals(index[i], currentIndex, true) && !this.toEquals(index[i], currentIndex, false))) {\n\t                    this.removeStyles(this.findElements(chart, series, index[i]));\n\t                    index.splice(i, 1);\n\t                    i--;\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.blurEffect = function (chartId, visibleSeries) {\n\t            var visibility = this.checkVisibility(this.selectedDataIndexes);\n\t            for (var _i = 0, visibleSeries_1 = visibleSeries; _i < visibleSeries_1.length; _i++) {\n\t                var series = visibleSeries_1[_i];\n\t                if (series.visible) {\n\t                    this.checkSelectionElements(helper_1.getElement(chartId + 'SeriesGroup' + series.index), this.generateStyle(series), visibility);\n\t                    if (!ej2_base_3.isNullOrUndefined(helper_1.getElement(chartId + 'SymbolGroup' + series.index))) {\n\t                        this.checkSelectionElements(helper_1.getElement(chartId + 'SymbolGroup' + series.index), this.generateStyle(series), visibility);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.checkSelectionElements = function (element, className, visibility) {\n\t            var children = (this.isSeriesMode ? [element] : element.childNodes);\n\t            var elementClassName;\n\t            var parentClassName;\n\t            for (var i = 0; i < children.length; i++) {\n\t                elementClassName = children[i].getAttribute('class') || '';\n\t                parentClassName = children[i].parentNode.getAttribute('class') || '';\n\t                if (elementClassName.indexOf(className) === -1 &&\n\t                    parentClassName.indexOf(className) === -1 && visibility) {\n\t                    this.addSvgClass(children[i], this.unselected);\n\t                }\n\t                else {\n\t                    this.removeSvgClass(children[i], this.unselected);\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.applyStyles = function (elements) {\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var element = elements_1[_i];\n\t                if (element) {\n\t                    this.removeSvgClass(element.parentNode, this.unselected);\n\t                    this.removeSvgClass(element, this.unselected);\n\t                    this.addSvgClass(element, this.getSelectionClass(element.id));\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.getSelectionClass = function (id) {\n\t            return this.generateStyle(this.control.series[this.indexFinder(id).series]);\n\t        };\n\t        Selection.prototype.removeStyles = function (elements) {\n\t            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n\t                var element = elements_2[_i];\n\t                if (element) {\n\t                    this.removeSvgClass(element, this.getSelectionClass(element.id));\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.addOrRemoveIndex = function (indexes, index, add) {\n\t            for (var i = 0; i < indexes.length; i++) {\n\t                if (this.toEquals(indexes[i], index, this.isSeriesMode)) {\n\t                    indexes.splice(i, 1);\n\t                    i--;\n\t                }\n\t            }\n\t            if (add) {\n\t                indexes.push(index);\n\t            }\n\t        };\n\t        Selection.prototype.toEquals = function (first, second, checkSeriesOnly) {\n\t            return ((first.series === second.series || (this.control.selectionMode === 'Cluster' && !checkSeriesOnly))\n\t                && (checkSeriesOnly || (first.point === second.point)));\n\t        };\n\t        Selection.prototype.redrawSelection = function (chart, oldMode) {\n\t            this.isSeriesMode = oldMode === 'Series';\n\t            var selectedDataIndexes = ej2_base_3.extend([], this.selectedDataIndexes, null, true);\n\t            this.removeSelectedElements(chart, this.selectedDataIndexes, chart.series);\n\t            this.blurEffect(chart.element.id, chart.visibleSeries);\n\t            this.selectDataIndex(chart, selectedDataIndexes);\n\t        };\n\t        Selection.prototype.legendSelection = function (chart, series) {\n\t            var seriesStyle = this.generateStyle(chart.visibleSeries[series]);\n\t            var selectedElements = document.getElementsByClassName(seriesStyle);\n\t            this.isSeriesMode = chart.selectionMode === 'Series';\n\t            var isBlurEffectNeeded = true;\n\t            if (selectedElements.length > 0) {\n\t                var elements = [];\n\t                for (var i = 0; i < selectedElements.length; i++) {\n\t                    elements.push(selectedElements[i]);\n\t                }\n\t                this.removeStyles(elements);\n\t                this.isSeriesMode = true;\n\t                this.addOrRemoveIndex(this.selectedDataIndexes, new base_1.Index(series, NaN));\n\t                for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                    var series_1 = _a[_i];\n\t                    seriesStyle = this.generateStyle(series_1);\n\t                    if (document.getElementsByClassName(seriesStyle).length > 0) {\n\t                        for (var _b = 0, elements_3 = elements; _b < elements_3.length; _b++) {\n\t                            var element = elements_3[_b];\n\t                            this.checkSelectionElements(element, seriesStyle, true);\n\t                        }\n\t                        isBlurEffectNeeded = false;\n\t                        break;\n\t                    }\n\t                }\n\t                if (isBlurEffectNeeded) {\n\t                    this.isSeriesMode = chart.selectionMode === 'Series';\n\t                    this.blurEffect(chart.element.id, chart.visibleSeries);\n\t                }\n\t            }\n\t            else {\n\t                var seriesElements = this.getSeriesElements(chart.visibleSeries[series]);\n\t                for (var _c = 0, seriesElements_1 = seriesElements; _c < seriesElements_1.length; _c++) {\n\t                    var seriesElement = seriesElements_1[_c];\n\t                    this.checkSelectionElements(seriesElement, seriesStyle, false);\n\t                }\n\t                this.isSeriesMode = true;\n\t                this.selection(chart, new base_1.Index(series, NaN), seriesElements);\n\t                this.isSeriesMode = chart.selectionMode === 'Series';\n\t                this.blurEffect(chart.element.id, chart.visibleSeries);\n\t            }\n\t        };\n\t        Selection.prototype.getSeriesElements = function (series) {\n\t            var seriesElements = [series.seriesElement];\n\t            if (series.marker.visible && !series.isRectSeries) {\n\t                seriesElements.push(series.symbolElement);\n\t            }\n\t            return seriesElements;\n\t        };\n\t        Selection.prototype.indexFinder = function (id) {\n\t            var ids = ['NaN', 'NaN'];\n\t            if (id.indexOf('SeriesGroup') > -1) {\n\t                ids = id.split('SeriesGroup');\n\t                ids[0] = ids[1];\n\t            }\n\t            else if (id.indexOf('SymbolGroup') > -1) {\n\t                ids = id.split('SymbolGroup');\n\t                ids[0] = ids[1];\n\t            }\n\t            else if (id.indexOf('_Point_') > -1) {\n\t                ids = id.split('_Series_')[1].split('_Point_');\n\t            }\n\t            else if (id.indexOf('_Series_') > -1) {\n\t                ids[0] = id.split('_Series_')[1];\n\t            }\n\t            return new base_1.Index(parseInt(ids[0], 10), parseInt(ids[1], 10));\n\t        };\n\t        Selection.prototype.calculateDragSelectedElements = function (chart, dragRect) {\n\t            this.removeSelectedElements(chart, this.selectedDataIndexes, chart.series);\n\t            var rect = new helper_1.Rect(dragRect.x, dragRect.y, dragRect.width, dragRect.height);\n\t            var axisOffset = new helper_1.ChartLocation(chart.chartAxisLayoutPanel.seriesClipRect.x, chart.chartAxisLayoutPanel.seriesClipRect.y);\n\t            this.removeOffset(rect, axisOffset);\n\t            var points;\n\t            var index;\n\t            var selectedPointValues = [];\n\t            var selectedSeriesValues = [];\n\t            this.isSeriesMode = false;\n\t            var symbolLocation;\n\t            var _loop_1 = function (series) {\n\t                if (series.visible) {\n\t                    points = series.points;\n\t                    selectedPointValues = [];\n\t                    var xAxisOffset_1;\n\t                    var yAxisOffset_1;\n\t                    if ((chart.isTransposed || series.type.indexOf('Bar') !== -1) &&\n\t                        !(chart.isTransposed && series.type.indexOf('Bar') !== -1)) {\n\t                        xAxisOffset_1 = series.xAxis.rect.y - axisOffset.y;\n\t                        yAxisOffset_1 = series.yAxis.rect.x - axisOffset.x;\n\t                    }\n\t                    else {\n\t                        xAxisOffset_1 = series.xAxis.rect.x - axisOffset.x;\n\t                        yAxisOffset_1 = series.yAxis.rect.y - axisOffset.y;\n\t                    }\n\t                    for (var j = 0; j < points.length; j++) {\n\t                        var yValue = series.type !== 'RangeArea' ? points[j].yValue :\n\t                            points[j].regions[0].y;\n\t                        var isCurrentPoint = void 0;\n\t                        if (series.type === 'BoxAndWhisker') {\n\t                            isCurrentPoint = points[j].regions.some(function (region) {\n\t                                return helper_1.withInBounds(region.x + xAxisOffset_1, region.y + yAxisOffset_1, rect);\n\t                            });\n\t                        }\n\t                        else {\n\t                            isCurrentPoint = points[j].symbolLocations.some(function (location) {\n\t                                return location && helper_1.withInBounds(location.x + xAxisOffset_1, location.y + yAxisOffset_1, rect);\n\t                            });\n\t                        }\n\t                        if (isCurrentPoint && series.category !== 'Indicator') {\n\t                            index = new base_1.Index(series.index, points[j].index);\n\t                            this_1.selection(chart, index, this_1.findElements(chart, series, index));\n\t                            selectedPointValues.push({ x: points[j].xValue.toString(), y: yValue });\n\t                        }\n\t                        if (isCurrentPoint && series.type === 'RangeArea') {\n\t                            selectedPointValues.push({ x: points[j].xValue.toString(), y: points[j].regions[0].y });\n\t                        }\n\t                    }\n\t                    selectedSeriesValues.push(selectedPointValues);\n\t                }\n\t            };\n\t            var this_1 = this;\n\t            for (var _i = 0, _a = chart.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                _loop_1(series);\n\t            }\n\t            this.blurEffect(chart.element.id, chart.visibleSeries);\n\t            this.rectPoints = new helper_1.Rect(dragRect.x, dragRect.y, dragRect.width, dragRect.height);\n\t            this.createCloseButton((dragRect.x + dragRect.width), dragRect.y);\n\t            var args = {\n\t                name: constants_1.dragComplete,\n\t                selectedDataValues: selectedSeriesValues,\n\t                cancel: false\n\t            };\n\t            chart.trigger(constants_1.dragComplete, args);\n\t        };\n\t        Selection.prototype.removeOffset = function (rect, clip) {\n\t            rect.x -= clip.x;\n\t            rect.y -= clip.y;\n\t        };\n\t        Selection.prototype.drawDraggingRect = function (chart, dragRect) {\n\t            var cartesianLayout = chart.chartAxisLayoutPanel.seriesClipRect;\n\t            switch (chart.selectionMode) {\n\t                case 'DragX':\n\t                    dragRect.y = cartesianLayout.y;\n\t                    dragRect.height = cartesianLayout.height;\n\t                    break;\n\t                case 'DragY':\n\t                    dragRect.x = cartesianLayout.x;\n\t                    dragRect.width = cartesianLayout.width;\n\t                    break;\n\t            }\n\t            if (dragRect.width < 5 || dragRect.height < 5) {\n\t                return null;\n\t            }\n\t            var element = helper_1.getElement(this.draggedRect);\n\t            if (this.closeIcon) {\n\t                helper_1.removeElement(this.closeIconId);\n\t            }\n\t            if (element) {\n\t                this.setAttributes(element, dragRect);\n\t            }\n\t            else {\n\t                var dragGroup = this.renderer.createGroup({ id: this.draggedRectGroup });\n\t                chart.svgObject.appendChild(dragGroup);\n\t                element = this.renderer.drawRectangle(new helper_1.RectOption(this.draggedRect, theme_1.Theme.selectionRectFill, { color: theme_1.Theme.selectionRectStroke, width: 1 }, 1, dragRect));\n\t                element.setAttribute('style', 'cursor:move;');\n\t                dragGroup.appendChild(element);\n\t            }\n\t        };\n\t        Selection.prototype.createCloseButton = function (x, y) {\n\t            var closeIcon = this.renderer.createGroup({\n\t                id: this.closeIconId,\n\t                style: 'cursor:pointer; visibility: visible;'\n\t            });\n\t            closeIcon.appendChild(this.renderer.drawCircle(new helper_1.CircleOption(this.closeIconId + '_circle', '#FFFFFF', { color: theme_1.Theme.selectionRectStroke, width: 1 }, 1, x, y, 10)));\n\t            var direction = 'M ' + (x - 4) + ' ' + (y - 4) + ' L ' + (x + 4) + ' ' + (y + 4) + ' M ' + (x - 4) + ' ' + (y + 4) +\n\t                ' L ' + (x + 4) + ' ' + (y - 4);\n\t            closeIcon.appendChild(this.renderer.drawPath({\n\t                id: this.closeIconId + '_cross', d: direction, stroke: theme_1.Theme.selectionRectStroke,\n\t                'stroke-width': 2, fill: theme_1.Theme.selectionRectStroke\n\t            }));\n\t            this.closeIcon = closeIcon;\n\t            helper_1.getElement(this.draggedRectGroup).appendChild(closeIcon);\n\t        };\n\t        Selection.prototype.removeDraggedElements = function (chart, event) {\n\t            if ((event.target.id.indexOf(this.closeIconId) > -1) && (event.type.indexOf('move') === -1)) {\n\t                this.removeSelectedElements(chart, this.selectedDataIndexes, chart.series);\n\t                this.blurEffect(chart.element.id, chart.visibleSeries);\n\t                ej2_base_2.remove(helper_1.getElement(this.draggedRectGroup));\n\t                this.changeCursorStyle(false, chart.svgObject, 'auto');\n\t                this.rectPoints = null;\n\t            }\n\t        };\n\t        Selection.prototype.resizingSelectionRect = function (chart, location, tapped) {\n\t            var rect = new helper_1.Rect(this.rectPoints.x, this.rectPoints.y, this.rectPoints.width, this.rectPoints.height);\n\t            var resize = this.findResizeMode(chart.svgObject, rect, location);\n\t            if (this.resizing) {\n\t                rect = helper_1.getDraggedRectLocation(rect.x, rect.y, (rect.x + rect.width), (rect.y + rect.height), chart.chartAxisLayoutPanel.seriesClipRect);\n\t                this.drawDraggingRect(chart, rect);\n\t                this.dragRect = rect;\n\t            }\n\t            if (tapped) {\n\t                this.resizing = resize;\n\t            }\n\t        };\n\t        Selection.prototype.findResizeMode = function (chartSvgObject, rect, location) {\n\t            var cursorStyle = 'se-resize';\n\t            var resize = false;\n\t            if (!this.resizing) {\n\t                var resizeEdges = [new helper_1.Rect(rect.x, (rect.y - 10), rect.width - 5, 20),\n\t                    new helper_1.Rect((rect.x - 10), rect.y, 20, rect.height),\n\t                    new helper_1.Rect(rect.x, (rect.y + rect.height - 10), rect.width - 10, 20),\n\t                    new helper_1.Rect((rect.x + rect.width - 10), rect.y + 5, 20, rect.height - 15),\n\t                    new helper_1.Rect((rect.x + rect.width - 10), (rect.y + rect.height - 10), 20, 20)];\n\t                for (var i = 0; i < resizeEdges.length; i++) {\n\t                    if (helper_1.withInBounds(location.x, location.y, resizeEdges[i])) {\n\t                        cursorStyle = (i === 4) ? cursorStyle : (i % 2 === 0) ? 'ns-resize' : 'ew-resize';\n\t                        resize = true;\n\t                        this.resizeMode = i;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                var x = rect.x;\n\t                var y = rect.y;\n\t                var width = (location.x - x);\n\t                var height = (location.y - y);\n\t                switch (this.resizeMode) {\n\t                    case 0:\n\t                        height = Math.abs((rect.height + rect.y) - location.y);\n\t                        rect.y = Math.min((rect.height + rect.y), location.y);\n\t                        rect.height = height;\n\t                        break;\n\t                    case 1:\n\t                        width = Math.abs((rect.width + rect.x) - location.x);\n\t                        rect.x = Math.min((rect.width + rect.x), location.x);\n\t                        rect.width = width;\n\t                        break;\n\t                    case 2:\n\t                        rect.height = Math.abs(height);\n\t                        rect.y = Math.min(location.y, y);\n\t                        break;\n\t                    case 3:\n\t                        rect.width = Math.abs(width);\n\t                        rect.x = Math.min(location.x, x);\n\t                        break;\n\t                    case 4:\n\t                        rect.width = Math.abs(width);\n\t                        rect.height = Math.abs(height);\n\t                        rect.x = Math.min(location.x, x);\n\t                        rect.y = Math.min(location.y, y);\n\t                        break;\n\t                }\n\t            }\n\t            this.changeCursorStyle(resize, helper_1.getElement(this.draggedRect), cursorStyle);\n\t            this.changeCursorStyle(resize, chartSvgObject, cursorStyle);\n\t            return resize;\n\t        };\n\t        Selection.prototype.changeCursorStyle = function (isResize, rectelement, cursorStyle) {\n\t            cursorStyle = isResize ? cursorStyle : (this.control.svgObject === rectelement) ? 'auto' : 'move';\n\t            rectelement.setAttribute('style', 'cursor:' + cursorStyle + ';');\n\t        };\n\t        Selection.prototype.removeSelectedElements = function (chart, index, seriesCollection) {\n\t            index.splice(0, index.length);\n\t            var seriesElements;\n\t            for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n\t                var series = seriesCollection_1[_i];\n\t                seriesElements = this.getSeriesElements(series);\n\t                this.removeStyles(seriesElements);\n\t                for (var _a = 0, seriesElements_2 = seriesElements; _a < seriesElements_2.length; _a++) {\n\t                    var seriesElement = seriesElements_2[_a];\n\t                    this.removeStyles(this.getChildren(seriesElement));\n\t                }\n\t            }\n\t        };\n\t        Selection.prototype.setAttributes = function (ele, object) {\n\t            var keys = Object.keys(object);\n\t            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n\t                var key = keys_1[_i];\n\t                ele.setAttribute(key, object[key]);\n\t            }\n\t        };\n\t        Selection.prototype.draggedRectMoved = function (chart, grabbedPoint, doDrawing) {\n\t            var rect = new helper_1.Rect(this.rectPoints.x, this.rectPoints.y, this.rectPoints.width, this.rectPoints.height);\n\t            rect.x -= (grabbedPoint.x - chart.mouseX);\n\t            rect.y -= (grabbedPoint.y - chart.mouseY);\n\t            rect = helper_1.getDraggedRectLocation(rect.x, rect.y, rect.x + rect.width, rect.height + rect.y, chart.chartAxisLayoutPanel.seriesClipRect);\n\t            if (doDrawing) {\n\t                this.drawDraggingRect(chart, rect);\n\t            }\n\t            else {\n\t                this.calculateDragSelectedElements(chart, rect);\n\t            }\n\t        };\n\t        Selection.prototype.completeSelection = function (e) {\n\t            var chart = this.chart;\n\t            if (chart.selectionMode === 'None') {\n\t                return;\n\t            }\n\t            if ((this.dragging || this.resizing) && this.dragRect.width > 5 && this.dragRect.height > 5) {\n\t                this.calculateDragSelectedElements(chart, this.dragRect);\n\t            }\n\t            else if (this.rectGrabbing && this.rectPoints.width && this.rectPoints.height) {\n\t                this.draggedRectMoved(chart, this.dragRect);\n\t            }\n\t            this.dragging = false;\n\t            this.rectGrabbing = false;\n\t            this.resizing = false;\n\t            this.removeDraggedElements(chart, e);\n\t        };\n\t        Selection.prototype.getDragRect = function (chart, seriesClipRect) {\n\t            return helper_1.getDraggedRectLocation(chart.mouseDownX, chart.mouseDownY, chart.mouseX, chart.mouseY, seriesClipRect);\n\t        };\n\t        Selection.prototype.dragStart = function (chart, seriesClipRect, mouseDownX, mouseDownY, event) {\n\t            this.dragging = (chart.selectionMode.indexOf('Drag') > -1) && (chart.isDoubleTap || !chart.isTouch) &&\n\t                chart.chartAreaType !== 'PolarRadar';\n\t            if (this.dragging) {\n\t                this.dragRect = new helper_1.Rect(chart.mouseDownX, chart.mouseDownY, 0, 0);\n\t                if (chart.mouseDownX < seriesClipRect.x || chart.mouseDownX > (seriesClipRect.x + seriesClipRect.width) ||\n\t                    chart.mouseDownY < seriesClipRect.y || chart.mouseDownY > (seriesClipRect.y + seriesClipRect.height)) {\n\t                    this.dragging = false;\n\t                }\n\t            }\n\t            if (this.rectPoints) {\n\t                this.dragRect = new helper_1.Rect(chart.mouseDownX, chart.mouseDownY, 0, 0);\n\t                this.resizingSelectionRect(chart, new helper_1.ChartLocation(mouseDownX, mouseDownY), true);\n\t                this.rectGrabbing = helper_1.withInBounds(mouseDownX, mouseDownY, this.rectPoints);\n\t            }\n\t        };\n\t        Selection.prototype.mouseMove = function (event) {\n\t            var chart = this.chart;\n\t            if (chart.selectionMode === 'None') {\n\t                return;\n\t            }\n\t            if (event.type === 'touchmove' && (ej2_base_1.Browser.isIos || ej2_base_1.Browser.isIos7) && this.dragging && event.preventDefault) {\n\t                event.preventDefault();\n\t            }\n\t            var insideMoving = helper_1.withInBounds(chart.mouseX, chart.mouseY, chart.chartAxisLayoutPanel.seriesClipRect);\n\t            if (insideMoving) {\n\t                if (this.rectGrabbing && !this.resizing) {\n\t                    this.draggedRectMoved(chart, this.dragRect, true);\n\t                }\n\t                else if (this.dragging && !this.resizing) {\n\t                    this.dragRect = this.getDragRect(chart, chart.chartAxisLayoutPanel.seriesClipRect);\n\t                    this.drawDraggingRect(chart, this.dragRect);\n\t                }\n\t                if (this.rectPoints) {\n\t                    this.resizingSelectionRect(chart, new helper_1.ChartLocation(chart.mouseX, chart.mouseY));\n\t                }\n\t            }\n\t            else {\n\t                this.completeSelection(event);\n\t            }\n\t        };\n\t        Selection.prototype.getModuleName = function () {\n\t            return 'Selection';\n\t        };\n\t        Selection.prototype.destroy = function (chart) {\n\t            this.removeEventListener();\n\t        };\n\t        return Selection;\n\t    }(selection_1.BaseSelection));\n\t    exports.Selection = Selection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BaseSelection = (function () {\n\t        function BaseSelection(control) {\n\t            this.control = control;\n\t        }\n\t        BaseSelection.prototype.seriesStyles = function () {\n\t            var seriesclass;\n\t            var style = document.getElementById(this.styleId);\n\t            if (ej2_base_1.isNullOrUndefined(style)) {\n\t                style = document.createElement('style');\n\t                style.setAttribute('id', this.styleId);\n\t                for (var _i = 0, _a = this.control.visibleSeries; _i < _a.length; _i++) {\n\t                    var series = _a[_i];\n\t                    seriesclass = series.selectionStyle || this.styleId + '_series_' + series.index;\n\t                    style.innerHTML += series.selectionStyle ? '' : '.' + seriesclass + ' { } ';\n\t                }\n\t                style.innerHTML += '.' + this.unselected + ' { opacity:' + (0.3) + ';} ';\n\t                document.body.appendChild(style);\n\t            }\n\t        };\n\t        BaseSelection.prototype.concatIndexes = function (userIndexes, localIndexes) {\n\t            return userIndexes.concat(localIndexes);\n\t        };\n\t        BaseSelection.prototype.checkVisibility = function (selectedIndexes) {\n\t            var visible = false;\n\t            var uniqueSeries = [];\n\t            for (var _i = 0, selectedIndexes_1 = selectedIndexes; _i < selectedIndexes_1.length; _i++) {\n\t                var index = selectedIndexes_1[_i];\n\t                if (uniqueSeries.indexOf(index.series) === -1) {\n\t                    uniqueSeries.push(index.series);\n\t                }\n\t            }\n\t            for (var _a = 0, uniqueSeries_1 = uniqueSeries; _a < uniqueSeries_1.length; _a++) {\n\t                var index = uniqueSeries_1[_a];\n\t                if (this.control.series[index].visible) {\n\t                    visible = true;\n\t                    break;\n\t                }\n\t            }\n\t            return visible;\n\t        };\n\t        BaseSelection.prototype.addSvgClass = function (element, className) {\n\t            var elementClassName = element.getAttribute('class') || '';\n\t            elementClassName += ((elementClassName !== '') ? ' ' : '');\n\t            if (elementClassName.indexOf(className) === -1) {\n\t                element.setAttribute('class', elementClassName + className);\n\t            }\n\t        };\n\t        BaseSelection.prototype.removeSvgClass = function (element, className) {\n\t            var elementClassName = element.getAttribute('class') || '';\n\t            if (elementClassName.indexOf(className) > -1) {\n\t                element.setAttribute('class', elementClassName.replace(className, ''));\n\t            }\n\t        };\n\t        BaseSelection.prototype.getChildren = function (parent) {\n\t            var children = [];\n\t            for (var i = 0; i < parent.childNodes.length; i++) {\n\t                if (parent.childNodes[i].tagName !== 'defs') {\n\t                    children.push(parent.childNodes[i]);\n\t                }\n\t            }\n\t            return children;\n\t        };\n\t        return BaseSelection;\n\t    }());\n\t    exports.BaseSelection = BaseSelection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(5), __webpack_require__(3), __webpack_require__(4), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, constants_1, helper_3, ej2_base_1, helper_4) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var DataLabel = (function () {\n\t        function DataLabel(chart) {\n\t            this.errorHeight = 0;\n\t            this.chart = chart;\n\t        }\n\t        DataLabel.prototype.initPrivateVariables = function (series, marker) {\n\t            var transform;\n\t            var render = series.chart.renderer;\n\t            transform = series.chart.chartAreaType === 'Cartesian' ? 'translate(' + series.clipRect.x + ',' + (series.clipRect.y) + ')' : '';\n\t            if (marker.dataLabel.visible) {\n\t                series.shapeElement = render.createGroup({\n\t                    'id': this.chart.element.id + 'ShapeGroup' + series.index,\n\t                    'transform': transform,\n\t                    'clip-path': 'url(#' + this.chart.element.id + '_ChartSeriesClipRect_' + series.index + ')'\n\t                });\n\t                series.textElement = render.createGroup({\n\t                    'id': this.chart.element.id + 'TextGroup' + series.index,\n\t                    'transform': transform,\n\t                    'clip-path': 'url(#' + this.chart.element.id + '_ChartSeriesClipRect_' + series.index + ')'\n\t                });\n\t            }\n\t            this.markerHeight = ((series.type === 'Scatter' || marker.visible) && !this.isRectSeries(series)) ? (marker.height / 2) : 0;\n\t            this.commonId = this.chart.element.id + '_Series_' + series.index + '_Point_';\n\t            this.calculateErrorHeight(series, series.marker.dataLabel.position);\n\t        };\n\t        DataLabel.prototype.calculateErrorHeight = function (series, position) {\n\t            if (!series.errorBar.visible) {\n\t                return null;\n\t            }\n\t            else if (series.errorBar.visible && this.chart.chartAreaType !== 'PolarRadar') {\n\t                var direction = series.errorBar.direction;\n\t                var positiveHeight = this.chart.errorBarModule.positiveHeight;\n\t                var negativeHeight = this.chart.errorBarModule.negativeHeight;\n\t                if (this.isRectSeries(series)) {\n\t                    if (position === 'Top' || position === 'Auto') {\n\t                        if (direction === 'Both' || direction === 'Minus') {\n\t                            this.errorHeight = negativeHeight;\n\t                        }\n\t                        else {\n\t                            this.errorHeight = 0;\n\t                        }\n\t                    }\n\t                    if (position === 'Outer' || position === 'Auto') {\n\t                        if (direction === 'Both' || direction === 'Plus') {\n\t                            this.errorHeight = positiveHeight;\n\t                        }\n\t                        else {\n\t                            this.errorHeight = 0;\n\t                        }\n\t                    }\n\t                }\n\t                else {\n\t                    if (position === 'Top' || position === 'Outer' || position === 'Auto') {\n\t                        if ((direction === 'Both' || direction === 'Plus') && (!series.chart.isTransposed)) {\n\t                            this.errorHeight = positiveHeight;\n\t                        }\n\t                        else {\n\t                            this.errorHeight = 0;\n\t                        }\n\t                    }\n\t                    if (position === 'Bottom' || position === 'Auto') {\n\t                        if (direction === 'Both' || direction === 'Minus') {\n\t                            this.errorHeight = negativeHeight;\n\t                        }\n\t                        else {\n\t                            this.errorHeight = 0;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                this.errorHeight = 0;\n\t            }\n\t        };\n\t        DataLabel.prototype.isRectSeries = function (series) {\n\t            return series.isRectSeries || series.type === 'RangeArea';\n\t        };\n\t        DataLabel.prototype.render = function (series, chart, dataLabel) {\n\t            var _this = this;\n\t            this.initPrivateVariables(series, series.marker);\n\t            var rect;\n\t            var rgbValue;\n\t            var contrast;\n\t            var argsData;\n\t            var border;\n\t            var textSize;\n\t            this.inverted = chart.requireInvertedAxis;\n\t            this.yAxisInversed = series.yAxis.isInversed;\n\t            var element = ej2_base_1.createElement('div', {\n\t                id: chart.element.id + '_Series_' + series.index + '_DataLabelCollections'\n\t            });\n\t            series.points.map(function (point, index) {\n\t                _this.margin = dataLabel.margin;\n\t                var labelText = [];\n\t                var labelLength;\n\t                var clip = series.clipRect;\n\t                border = { width: dataLabel.border.width, color: dataLabel.border.color };\n\t                if ((point.symbolLocations.length && point.symbolLocations[0]) ||\n\t                    (series.type === 'BoxAndWhisker' && point.regions.length)) {\n\t                    labelText = helper_2.getLabelText(point, series, chart);\n\t                    labelLength = labelText.length;\n\t                    for (var i = 0; i < labelLength; i++) {\n\t                        argsData = {\n\t                            cancel: false, name: constants_1.textRender, series: series,\n\t                            point: point, text: labelText[i], border: border,\n\t                            color: dataLabel.fill, template: dataLabel.template\n\t                        };\n\t                        chart.trigger(constants_1.textRender, argsData);\n\t                        if (!argsData.cancel) {\n\t                            _this.fontBackground = argsData.color;\n\t                            _this.isDataLabelShape(argsData);\n\t                            _this.markerHeight = series.type === 'Bubble' ? (point.regions[0].height / 2) : _this.markerHeight;\n\t                            if (argsData.template !== null) {\n\t                                _this.createDataLabelTemplate(element, series, dataLabel, point, argsData, i);\n\t                            }\n\t                            else {\n\t                                textSize = helper_2.measureText(argsData.text, dataLabel.font);\n\t                                rect = _this.calculateTextPosition(point, series, textSize, dataLabel, i);\n\t                                if (!helper_1.isCollide(rect, chart.dataLabelCollections, clip)) {\n\t                                    chart.dataLabelCollections.push(new helper_1.Rect(rect.x + clip.x, rect.y + clip.y, rect.width, rect.height));\n\t                                    if (_this.isShape) {\n\t                                        series.shapeElement.appendChild(chart.renderer.drawRectangle(new helper_1.RectOption(_this.commonId + index + '_TextShape_' + i, argsData.color, argsData.border, dataLabel.opacity, rect, dataLabel.rx, dataLabel.ry)));\n\t                                    }\n\t                                    rgbValue = helper_2.convertHexToColor(helper_2.colorNameToHex(_this.fontBackground));\n\t                                    contrast = Math.round((rgbValue.r * 299 + rgbValue.g * 587 + rgbValue.b * 114) / 1000);\n\t                                    helper_2.textElement(new helper_1.TextOption(_this.commonId + index + '_Text_' + i, rect.x + _this.margin.left + textSize.width / 2, rect.y + _this.margin.top + textSize.height * 3 / 4, 'middle', argsData.text, 'rotate(0,' + (rect.x) + ',' + (rect.y) + ')', 'auto'), dataLabel.font, dataLabel.font.color ||\n\t                                        ((contrast >= 128 || series.type === 'Hilo') ? 'black' : 'white'), series.textElement);\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            });\n\t            if (element.childElementCount) {\n\t                helper_3.getElement(chart.element.id + '_Secondary_Element').appendChild(element);\n\t            }\n\t        };\n\t        DataLabel.prototype.createDataLabelTemplate = function (parentElement, series, dataLabel, point, data, labelIndex) {\n\t            this.margin = { left: 0, right: 0, bottom: 0, top: 0 };\n\t            var clip = series.clipRect;\n\t            var childElement = helper_3.createTemplate(ej2_base_1.createElement('div', {\n\t                id: this.chart.element.id + '_Series_' + series.index + '_DataLabel_'\n\t                    + point.index + (labelIndex ? ('_' + labelIndex) : ''),\n\t                styles: 'position: absolute;background-color:' + data.color + ';' +\n\t                    helper_3.getFontStyle(dataLabel.font) + ';border:' + data.border.width + 'px solid ' + data.border.color + ';'\n\t            }), point.index, data.template, this.chart, point, series);\n\t            var elementRect = helper_3.measureElementRect(childElement);\n\t            var rect = this.calculateTextPosition(point, series, { width: elementRect.width, height: elementRect.height }, dataLabel, labelIndex);\n\t            childElement.style.left = ((this.chart.chartAreaType === 'PolarRadar' ? 0 : series.clipRect.x) + rect.x) + 'px';\n\t            childElement.style.top = ((this.chart.chartAreaType === 'PolarRadar' ? 0 : series.clipRect.y) + rect.y) + 'px';\n\t            var rgbValue = helper_2.convertHexToColor(helper_2.colorNameToHex(this.fontBackground));\n\t            childElement.style.color = dataLabel.font.color ||\n\t                ((Math.round((rgbValue.r * 299 + rgbValue.g * 587 + rgbValue.b * 114) / 1000)) >= 128 ? 'black' : 'white');\n\t            if (childElement.childElementCount && !helper_1.isCollide(rect, this.chart.dataLabelCollections, clip)\n\t                && (series.seriesType !== 'XY' || point.yValue === undefined || helper_3.withIn(point.yValue, series.yAxis.visibleRange))\n\t                && helper_3.withIn(point.xValue, series.xAxis.visibleRange)) {\n\t                this.chart.dataLabelCollections.push(new helper_1.Rect(rect.x + clip.x, rect.y + clip.y, rect.width, rect.height));\n\t                parentElement.appendChild(childElement);\n\t                if (series.animation.enable && this.chart.animateSeries) {\n\t                    this.doDataLabelAnimation(series, childElement);\n\t                }\n\t            }\n\t        };\n\t        DataLabel.prototype.calculateTextPosition = function (point, series, textSize, dataLabel, labelIndex) {\n\t            var labelRegion = labelIndex > 1 ? (series.type === 'Candle') ? point.regions[1] : point.regions[0] : point.regions[0];\n\t            if (labelIndex > 1 && series.type === 'HiloOpenClose') {\n\t                labelRegion = (labelIndex === 2) ? point.regions[1] : point.regions[2];\n\t            }\n\t            var location;\n\t            location = this.getLabelLocation(point, series, textSize, labelIndex);\n\t            var padding = 5;\n\t            var clipRect = series.clipRect;\n\t            var rect;\n\t            if (!this.chart.requireInvertedAxis || !this.isRectSeries(series) || series.type === 'BoxAndWhisker') {\n\t                this.locationX = location.x;\n\t                var alignmentValue = textSize.height + (this.borderWidth * 2) + this.markerHeight +\n\t                    this.margin.bottom + this.margin.top + padding;\n\t                location.y = (dataLabel.position === 'Auto') ? location.y :\n\t                    this.calculateAlignment(alignmentValue, location.y, dataLabel.alignment, this.isRectSeries(series) ? point.yValue < 0 : false);\n\t                location.y = (!this.isRectSeries(series) || series.type === 'BoxAndWhisker') ?\n\t                    this.calculatePathPosition(location.y, dataLabel.position, series, point, textSize, labelIndex) :\n\t                    this.calculateRectPosition(location.y, labelRegion, point.yValue < 0 !== this.yAxisInversed, dataLabel.position, series, textSize, labelIndex, point);\n\t                if (this.isRectSeries(series) && this.chart.chartAreaType === 'PolarRadar') {\n\t                    location = this.calculatePolarRectPosition(location, dataLabel.position, series, point, textSize, labelIndex);\n\t                }\n\t            }\n\t            else {\n\t                this.locationY = location.y;\n\t                var alignmentValue = textSize.width + this.borderWidth + this.margin.left + this.margin.right - padding;\n\t                location.x = dataLabel.position === 'Auto' ? location.x :\n\t                    this.calculateAlignment(alignmentValue, location.x, dataLabel.alignment, point.yValue < 0);\n\t                location.x = this.calculateRectPosition(location.x, labelRegion, point.yValue < 0 !== this.yAxisInversed, dataLabel.position, series, textSize, labelIndex, point);\n\t            }\n\t            rect = helper_2.calculateRect(location, textSize, this.margin);\n\t            if (!((rect.y > clipRect.height) || (rect.x > clipRect.width) ||\n\t                (rect.x + rect.width < 0) || (rect.y + rect.height < 0))) {\n\t                rect.x = rect.x < 0 ? padding : rect.x;\n\t                rect.y = rect.y < 0 ? padding : rect.y;\n\t                rect.x -= (rect.x + rect.width) > clipRect.width ? (rect.x + rect.width) - clipRect.width + padding : 0;\n\t                rect.y -= (rect.y + rect.height) > clipRect.height ? (rect.y + rect.height) - clipRect.height + padding : 0;\n\t                this.fontBackground = this.fontBackground === 'transparent' ? this.chart.chartArea.background : this.fontBackground;\n\t            }\n\t            return rect;\n\t        };\n\t        DataLabel.prototype.calculatePolarRectPosition = function (location, position, series, point, size, labelIndex) {\n\t            var padding = 5;\n\t            var columnRadius;\n\t            if (labelIndex === 0) {\n\t                columnRadius = point.regionData.radius < point.regionData.innerRadius ? point.regionData.innerRadius\n\t                    : point.regionData.radius;\n\t            }\n\t            else {\n\t                columnRadius = point.regionData.radius > point.regionData.innerRadius ? point.regionData.innerRadius\n\t                    : point.regionData.radius;\n\t            }\n\t            var vector;\n\t            var ticksbwtLabel = series.xAxis.valueType === 'Category' && series.xAxis.labelPlacement === 'BetweenTicks' ? 0.5\n\t                : 0.5 - (series.rectCount / 2);\n\t            this.fontBackground = this.fontBackground === 'transparent' ? this.chart.chartArea.background : this.fontBackground;\n\t            if (series.drawType.indexOf('Stacking') > -1) {\n\t                position = position === 'Outer' ? 'Top' : position;\n\t            }\n\t            else if (series.drawType.indexOf('Range') > -1) {\n\t                position = (position === 'Outer' || position === 'Top') ? position : 'Auto';\n\t            }\n\t            if (position === 'Outer') {\n\t                columnRadius = labelIndex === 0 ? columnRadius + 2 * padding : columnRadius - 2 * padding;\n\t            }\n\t            else if (position === 'Middle') {\n\t                columnRadius = columnRadius / 2 + padding;\n\t            }\n\t            else if (position === 'Top') {\n\t                columnRadius = labelIndex === 0 ? columnRadius - 2 * padding : columnRadius + 2 * padding;\n\t            }\n\t            else if (position === 'Bottom') {\n\t                columnRadius = padding;\n\t            }\n\t            else {\n\t                if (labelIndex === 0) {\n\t                    columnRadius = columnRadius >= series.chart.radius ? columnRadius - padding :\n\t                        series.drawType === 'StackingColumn' ? columnRadius - 2 * padding : columnRadius + 2 * padding;\n\t                }\n\t                else {\n\t                    columnRadius = columnRadius >= series.chart.radius ? columnRadius + padding : columnRadius - 2 * padding;\n\t                }\n\t            }\n\t            vector = helper_3.CoefficientToVector(helper_3.valueToPolarCoefficient((point.xValue + ticksbwtLabel / series.rectCount + series.position / series.rectCount), series.xAxis), series.chart.primaryXAxis.startAngle);\n\t            location.x = series.clipRect.width / 2 + series.clipRect.x + columnRadius * vector.x;\n\t            location.y = series.clipRect.height / 2 + series.clipRect.y + columnRadius * vector.y;\n\t            return location;\n\t        };\n\t        DataLabel.prototype.getLabelLocation = function (point, series, textSize, labelIndex) {\n\t            var location = new helper_1.ChartLocation(0, 0);\n\t            var labelRegion = (series.type === 'Candle' && labelIndex > 1) ? point.regions[1] : point.regions[0];\n\t            if (series.type === 'HiloOpenClose') {\n\t                labelRegion = (labelIndex === 2) ? point.regions[1] : point.regions[2];\n\t            }\n\t            var xAxis = series.xAxis;\n\t            var yAxis = series.yAxis;\n\t            var isInverted = series.chart.requireInvertedAxis;\n\t            if (series.type === 'BoxAndWhisker') {\n\t                this.markerHeight = 0;\n\t                switch (labelIndex) {\n\t                    case 0:\n\t                        location = helper_4.getPoint(point.xValue, point.median, xAxis, yAxis, isInverted);\n\t                        break;\n\t                    case 1:\n\t                        location = helper_4.getPoint(point.xValue, point.maximum, xAxis, yAxis, isInverted);\n\t                        break;\n\t                    case 2:\n\t                        location = helper_4.getPoint(point.xValue, point.minimum, xAxis, yAxis, isInverted);\n\t                        break;\n\t                    case 3:\n\t                        location = helper_4.getPoint(point.xValue, point.upperQuartile, xAxis, yAxis, isInverted);\n\t                        break;\n\t                    case 4:\n\t                        location = helper_4.getPoint(point.xValue, point.lowerQuartile, xAxis, yAxis, isInverted);\n\t                        break;\n\t                    default: {\n\t                        location = helper_4.getPoint(point.xValue, point.outliers[labelIndex - 5], xAxis, yAxis, isInverted);\n\t                        this.markerHeight = series.marker.height / 2;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else if (labelIndex === 0 || labelIndex === 1) {\n\t                location = new helper_1.ChartLocation(point.symbolLocations[0].x, point.symbolLocations[0].y);\n\t            }\n\t            else if ((labelIndex === 2 || labelIndex === 3) && series.type === 'Candle') {\n\t                location = new helper_1.ChartLocation(point.symbolLocations[1].x, point.symbolLocations[1].y);\n\t            }\n\t            else if (isInverted) {\n\t                location = { x: labelRegion.x + (labelRegion.width) / 2, y: labelRegion.y };\n\t            }\n\t            else {\n\t                location = { x: labelRegion.x + labelRegion.width, y: labelRegion.y + (labelRegion.height) / 2 };\n\t            }\n\t            if (labelIndex > 1 && series.type === 'HiloOpenClose') {\n\t                if (series.chart.requireInvertedAxis) {\n\t                    var height = labelRegion.height;\n\t                    location.y = labelRegion.y + height / 2 + 2 * (labelIndex === 2 ? 1 : -1);\n\t                }\n\t                else {\n\t                    var width = labelRegion.width;\n\t                    location.x = labelRegion.x + width / 2 + 2 * (labelIndex === 2 ? 1 : -1);\n\t                }\n\t            }\n\t            return location;\n\t        };\n\t        DataLabel.prototype.calculateRectPosition = function (labelLocation, rect, isMinus, position, series, textSize, labelIndex, point) {\n\t            if (series.chart.chartAreaType === 'PolarRadar') {\n\t                return null;\n\t            }\n\t            var padding = 5;\n\t            var margin = this.margin;\n\t            var textLength = !this.inverted ? textSize.height : textSize.width;\n\t            var extraSpace = this.borderWidth + textLength / 2 + padding;\n\t            if (series.type.indexOf('Stacking') > -1) {\n\t                position = position === 'Outer' ? 'Top' : position;\n\t            }\n\t            else if (series.type.indexOf('Range') > -1) {\n\t                position = (position === 'Outer' || position === 'Top') ? position : 'Auto';\n\t            }\n\t            else if (series.type === 'Waterfall') {\n\t                position = position === 'Auto' ? 'Middle' : position;\n\t            }\n\t            switch (position) {\n\t                case 'Bottom':\n\t                    labelLocation = !this.inverted ?\n\t                        isMinus ? (labelLocation - rect.height + extraSpace + margin.top) :\n\t                            (labelLocation + rect.height - extraSpace - margin.bottom) :\n\t                        isMinus ? (labelLocation + rect.width - extraSpace - margin.left) :\n\t                            (labelLocation - rect.width + extraSpace + margin.right);\n\t                    break;\n\t                case 'Middle':\n\t                    labelLocation = labelLocation = !this.inverted ?\n\t                        (isMinus ? labelLocation - (rect.height / 2) : labelLocation + (rect.height / 2)) :\n\t                        (isMinus ? labelLocation + (rect.width / 2) : labelLocation - (rect.width / 2));\n\t                    break;\n\t                case 'Auto':\n\t                    labelLocation = this.calculateRectActualPosition(labelLocation, rect, isMinus, series, textSize, labelIndex, point);\n\t                    break;\n\t                default:\n\t                    extraSpace += this.errorHeight;\n\t                    labelLocation = this.calculateTopAndOuterPosition(labelLocation, rect, position, series, labelIndex, extraSpace, isMinus);\n\t                    break;\n\t            }\n\t            var check = !this.inverted ? (labelLocation < rect.y || labelLocation > rect.y + rect.height) :\n\t                (labelLocation < rect.x || labelLocation > rect.x + rect.width);\n\t            this.fontBackground = check ?\n\t                (this.fontBackground === 'transparent' ? this.chart.chartArea.background : this.fontBackground)\n\t                : this.fontBackground === 'transparent' ? (point.color || series.interior) : this.fontBackground;\n\t            return labelLocation;\n\t        };\n\t        DataLabel.prototype.calculatePathPosition = function (labelLocation, position, series, point, size, labelIndex) {\n\t            var padding = 5;\n\t            if ((series.type.indexOf('Area') > -1 && series.type !== 'RangeArea')\n\t                && this.yAxisInversed && series.marker.dataLabel.position !== 'Auto') {\n\t                position = position === 'Top' ? 'Bottom' : position === 'Bottom' ? 'Top' : position;\n\t            }\n\t            this.fontBackground = this.fontBackground === 'transparent' ? this.chart.chartArea.background : this.fontBackground;\n\t            switch (position) {\n\t                case 'Top':\n\t                case 'Outer':\n\t                    labelLocation = labelLocation - this.markerHeight - this.borderWidth - size.height / 2 - this.margin.bottom - padding -\n\t                        this.errorHeight;\n\t                    break;\n\t                case 'Bottom':\n\t                    labelLocation = labelLocation + this.markerHeight + this.borderWidth + size.height / 2 + this.margin.top + padding +\n\t                        this.errorHeight;\n\t                    break;\n\t                case 'Auto':\n\t                    labelLocation = this.calculatePathActualPosition(labelLocation, this.markerHeight, series, point, size, labelIndex);\n\t                    break;\n\t            }\n\t            return labelLocation;\n\t        };\n\t        DataLabel.prototype.isDataLabelShape = function (style) {\n\t            this.isShape = (style.color !== 'transparent' || style.border.width > 0);\n\t            this.borderWidth = style.border.width;\n\t            if (!this.isShape) {\n\t                this.margin = { left: 0, right: 0, bottom: 0, top: 0 };\n\t            }\n\t        };\n\t        DataLabel.prototype.calculateRectActualPosition = function (labelLocation, rect, isMinus, series, size, labelIndex, point) {\n\t            var location;\n\t            var labelRect;\n\t            var isOverLap = true;\n\t            var position = 0;\n\t            var collection = this.chart.dataLabelCollections;\n\t            var finalPosition = series.type.indexOf('Range') !== -1 || series.type === 'Hilo' ? 2 : 4;\n\t            while (isOverLap && position < finalPosition) {\n\t                location = this.calculateRectPosition(labelLocation, rect, isMinus, this.getPosition(position), series, size, labelIndex, point);\n\t                if (!this.inverted) {\n\t                    labelRect = helper_2.calculateRect(new helper_1.ChartLocation(this.locationX, location), size, this.margin);\n\t                    isOverLap = labelRect.y < 0 || helper_1.isCollide(labelRect, collection, series.clipRect) || labelRect.y > series.clipRect.height;\n\t                }\n\t                else {\n\t                    labelRect = helper_2.calculateRect(new helper_1.ChartLocation(location, this.locationY), size, this.margin);\n\t                    isOverLap = labelRect.x < 0 || helper_1.isCollide(labelRect, collection, series.clipRect) ||\n\t                        labelRect.x + labelRect.width > series.clipRect.width;\n\t                }\n\t                position++;\n\t            }\n\t            return location;\n\t        };\n\t        DataLabel.prototype.calculateAlignment = function (value, labelLocation, alignment, isMinus) {\n\t            switch (alignment) {\n\t                case 'Far':\n\t                    labelLocation = !this.inverted ? (isMinus ? labelLocation + value : labelLocation - value) :\n\t                        (isMinus ? labelLocation - value : labelLocation + value);\n\t                    break;\n\t                case 'Near':\n\t                    labelLocation = !this.inverted ? (isMinus ? labelLocation - value : labelLocation + value) :\n\t                        (isMinus ? labelLocation + value : labelLocation - value);\n\t                    break;\n\t                case 'Center':\n\t                    labelLocation = labelLocation;\n\t                    break;\n\t            }\n\t            return labelLocation;\n\t        };\n\t        DataLabel.prototype.calculateTopAndOuterPosition = function (location, rect, position, series, index, extraSpace, isMinus) {\n\t            var margin = this.margin;\n\t            var top;\n\t            switch (series.type) {\n\t                case 'RangeColumn':\n\t                case 'RangeArea':\n\t                case 'Hilo':\n\t                    top = (index === 0 && !this.yAxisInversed) || (index === 1 && this.yAxisInversed);\n\t                    location = this.updateLabelLocation(position, location, extraSpace, margin, rect, top);\n\t                    break;\n\t                case 'Candle':\n\t                    top = (index === 0 || index === 2) && !this.yAxisInversed\n\t                        || (index === 1 || index === 3) && this.yAxisInversed;\n\t                    location = this.updateLabelLocation(position, location, extraSpace, margin, rect, top, index > 1);\n\t                    break;\n\t                case 'HiloOpenClose':\n\t                    if (index <= 1) {\n\t                        top = (index === 0 && !this.yAxisInversed) || (index === 1 && this.yAxisInversed);\n\t                        location = this.updateLabelLocation(position, location, extraSpace, margin, rect, top);\n\t                    }\n\t                    else {\n\t                        if (this.yAxisInversed) {\n\t                            location = !this.inverted ? location + extraSpace + margin.top : location - extraSpace - margin.right;\n\t                        }\n\t                        else {\n\t                            location = !this.inverted ? location - extraSpace - margin.bottom : location + extraSpace + margin.left;\n\t                        }\n\t                    }\n\t                    break;\n\t                default:\n\t                    if ((isMinus && position === 'Top') || (!isMinus && position === 'Outer')) {\n\t                        location = !this.inverted ? location - extraSpace - margin.bottom : location + extraSpace + margin.left;\n\t                    }\n\t                    else {\n\t                        location = !this.inverted ? location + extraSpace + margin.top : location - extraSpace - margin.right;\n\t                    }\n\t                    break;\n\t            }\n\t            return location;\n\t        };\n\t        DataLabel.prototype.updateLabelLocation = function (position, location, extraSpace, margin, rect, top, inside) {\n\t            if (inside === void 0) { inside = false; }\n\t            if (!this.inverted) {\n\t                if (top) {\n\t                    location = (position === 'Outer' && !inside) ? location - extraSpace - margin.bottom : location + extraSpace + margin.top;\n\t                }\n\t                else {\n\t                    location = (position === 'Outer' && !inside) ? location + rect.height + extraSpace + margin.top :\n\t                        location + rect.height - extraSpace - margin.bottom;\n\t                }\n\t            }\n\t            else {\n\t                if (top) {\n\t                    location = (position === 'Outer' && !inside) ? location + extraSpace + margin.left : location - extraSpace - margin.right;\n\t                }\n\t                else {\n\t                    location = (position === 'Outer' && !inside) ? location - rect.width - extraSpace - margin.right :\n\t                        location - rect.width + extraSpace + margin.left;\n\t                }\n\t            }\n\t            return location;\n\t        };\n\t        DataLabel.prototype.calculatePathActualPosition = function (y, markerSize, series, point, size, labelIndex) {\n\t            var points = series.points;\n\t            var index = point.index;\n\t            var yValue = points[index].yValue;\n\t            var position;\n\t            var nextPoint = points.length - 1 > index ? points[index + 1] : null;\n\t            var previousPoint = index > 0 ? points[index - 1] : null;\n\t            var yLocation;\n\t            var isOverLap = true;\n\t            var labelRect;\n\t            var isBottom;\n\t            var positionIndex;\n\t            var collection = this.chart.dataLabelCollections;\n\t            if (series.type === 'Bubble') {\n\t                position = 'Top';\n\t            }\n\t            else if (series.type.indexOf('Step') > -1) {\n\t                position = 'Top';\n\t                if (index) {\n\t                    position = (!previousPoint || !previousPoint.visible || (yValue > previousPoint.yValue !== this.yAxisInversed)\n\t                        || yValue === previousPoint.yValue) ? 'Top' : 'Bottom';\n\t                }\n\t            }\n\t            else if (series.type === 'BoxAndWhisker') {\n\t                if (labelIndex === 1 || labelIndex === 3 || labelIndex > 4) {\n\t                    position = series.yAxis.isInversed ? 'Bottom' : 'Top';\n\t                }\n\t                else if (labelIndex === 2 || labelIndex === 4) {\n\t                    position = series.yAxis.isInversed ? 'Top' : 'Bottom';\n\t                }\n\t                else {\n\t                    isOverLap = false;\n\t                    position = 'Middle';\n\t                    yLocation = this.calculatePathPosition(y, position, series, point, size, labelIndex);\n\t                }\n\t            }\n\t            else {\n\t                if (index === 0) {\n\t                    position = (!nextPoint || !nextPoint.visible || yValue > nextPoint.yValue ||\n\t                        (yValue < nextPoint.yValue && this.yAxisInversed)) ? 'Top' : 'Bottom';\n\t                }\n\t                else if (index === points.length - 1) {\n\t                    position = (!previousPoint || !previousPoint.visible || yValue > previousPoint.yValue ||\n\t                        (yValue < previousPoint.yValue && this.yAxisInversed)) ? 'Top' : 'Bottom';\n\t                }\n\t                else {\n\t                    if (!nextPoint.visible && !(previousPoint && previousPoint.visible)) {\n\t                        position = 'Top';\n\t                    }\n\t                    else if (!nextPoint.visible || !previousPoint) {\n\t                        position = (nextPoint.yValue > yValue || (previousPoint && previousPoint.yValue > yValue)) ?\n\t                            'Bottom' : 'Top';\n\t                    }\n\t                    else {\n\t                        var slope = (nextPoint.yValue - previousPoint.yValue) / 2;\n\t                        var intersectY = (slope * index) + (nextPoint.yValue - (slope * (index + 1)));\n\t                        position = !this.yAxisInversed ? intersectY < yValue ? 'Top' : 'Bottom' :\n\t                            intersectY < yValue ? 'Bottom' : 'Top';\n\t                    }\n\t                }\n\t            }\n\t            isBottom = position === 'Bottom';\n\t            positionIndex = ['Outer', 'Top', 'Bottom', 'Middle', 'Auto'].indexOf(position);\n\t            while (isOverLap && positionIndex < 4) {\n\t                yLocation = this.calculatePathPosition(y, this.getPosition(positionIndex), series, point, size, labelIndex);\n\t                labelRect = helper_2.calculateRect(new helper_1.ChartLocation(this.locationX, yLocation), size, this.margin);\n\t                isOverLap = labelRect.y < 0 || helper_1.isCollide(labelRect, collection, series.clipRect)\n\t                    || (labelRect.y + labelRect.height) > series.clipRect.height;\n\t                positionIndex = isBottom ? positionIndex - 1 : positionIndex + 1;\n\t                isBottom = false;\n\t            }\n\t            return yLocation;\n\t        };\n\t        DataLabel.prototype.doDataLabelAnimation = function (series, element) {\n\t            var shapeElements = series.shapeElement.childNodes;\n\t            var textNode = series.textElement.childNodes;\n\t            var delay = series.animation.delay + series.animation.duration;\n\t            var location;\n\t            var length = element ? 1 : textNode.length;\n\t            for (var i = 0; i < length; i++) {\n\t                if (element) {\n\t                    element.style.visibility = 'hidden';\n\t                    helper_3.templateAnimate(element, delay, 200, 'ZoomIn');\n\t                }\n\t                else {\n\t                    location = new helper_1.ChartLocation((+textNode[i].getAttribute('x')) + ((+textNode[i].getAttribute('width')) / 2), (+textNode[i].getAttribute('y')) + ((+textNode[i].getAttribute('height')) / 2));\n\t                    helper_1.markerAnimate(textNode[i], delay, 200, series, null, location, true);\n\t                    if (shapeElements[i]) {\n\t                        location = new helper_1.ChartLocation((+shapeElements[i].getAttribute('x')) + ((+shapeElements[i].getAttribute('width')) / 2), (+shapeElements[i].getAttribute('y')) + ((+shapeElements[i].getAttribute('height')) / 2));\n\t                        helper_1.markerAnimate(shapeElements[i], delay, 200, series, null, location, true);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        DataLabel.prototype.getPosition = function (index) {\n\t            return (['Outer', 'Top', 'Bottom', 'Middle', 'Auto'][index]);\n\t        };\n\t        DataLabel.prototype.getModuleName = function () {\n\t            return 'DataLabel';\n\t        };\n\t        DataLabel.prototype.destroy = function (chart) {\n\t        };\n\t        return DataLabel;\n\t    }());\n\t    exports.DataLabel = DataLabel;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ErrorBar = (function () {\n\t        function ErrorBar(chart) {\n\t            this.chart = chart;\n\t        }\n\t        ErrorBar.prototype.render = function (series) {\n\t            if (this.chart.chartAreaType === 'PolarRadar') {\n\t                return null;\n\t            }\n\t            this.createElement(series);\n\t            this.renderErrorBar(series);\n\t        };\n\t        ErrorBar.prototype.renderErrorBar = function (series) {\n\t            var seriesIndex = series.index;\n\t            var point;\n\t            var symbolId;\n\t            var capId;\n\t            var errorbar = series.errorBar;\n\t            var errorBarCap = series.errorBar.errorBarCap;\n\t            var border = series.border;\n\t            var start;\n\t            var mid;\n\t            var end;\n\t            var isInverted;\n\t            var isVert;\n\t            var errorDirection = ['', ''];\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point_1 = _a[_i];\n\t                if (point_1.visible && point_1.symbolLocations[0]) {\n\t                    var errorX = 0;\n\t                    var errorY = 0;\n\t                    switch (errorbar.mode) {\n\t                        case 'Vertical':\n\t                            errorY = errorbar.verticalError;\n\t                            break;\n\t                        case 'Horizontal':\n\t                            errorX = errorbar.horizontalError;\n\t                            break;\n\t                        case 'Both':\n\t                            errorX = errorbar.horizontalError;\n\t                            errorY = errorbar.verticalError;\n\t                            break;\n\t                    }\n\t                    errorDirection = this['calculate' + errorbar.type + 'Value'](point_1, series, this.chart.requireInvertedAxis, errorX, errorY);\n\t                    symbolId = this.chart.element.id + '_Series_' + '_ErrorBarGroup_' + seriesIndex + '_Point_' + point_1.index;\n\t                    capId = this.chart.element.id + '_Series_' + '_ErrorBarCap_' + seriesIndex + '_Point_' + point_1.index;\n\t                    var shapeOption = new helper_2.PathOption(symbolId, '', errorbar.width, errorbar.color, null, '', errorDirection[0]);\n\t                    var path = this.chart.renderer.drawPath(shapeOption);\n\t                    series.errorBarElement.appendChild(path);\n\t                    var capOption = new helper_2.PathOption(capId, '', errorBarCap.width, errorBarCap.color, null, '', errorDirection[1]);\n\t                    var capPath = this.chart.renderer.drawPath(capOption);\n\t                    series.errorBarElement.appendChild(capPath);\n\t                }\n\t            }\n\t        };\n\t        ErrorBar.prototype.findLocation = function (point, series, isInverted, x1, y1) {\n\t            var errorbar = series.errorBar;\n\t            var direction = errorbar.direction;\n\t            var location = [];\n\t            var stackedValue = series.stackedValues;\n\t            var yValue = series.type.indexOf('Stacking') > -1 ? series.stackedValues.endValues[point.index] :\n\t                (series.seriesType === 'HighLow' || series.seriesType === 'HighLowOpenClose') ? (series.points[point.index].high) :\n\t                    point.yValue;\n\t            var startPoint = helper_2.getPoint(point.xValue + ((direction === 'Plus' || direction === 'Both') ? (errorbar.type === 'Custom' &&\n\t                (errorbar.mode === 'Horizontal' || errorbar.mode === 'Both')) ? x1 = errorbar.horizontalPositiveError : x1 : 0), yValue + ((direction === 'Plus' || direction === 'Both') ? (errorbar.type === 'Custom' &&\n\t                (errorbar.mode === 'Vertical' || errorbar.mode === 'Both')) ? y1 = errorbar.verticalPositiveError : y1 : 0), series.xAxis, series.yAxis, isInverted);\n\t            location.push(startPoint);\n\t            if (series.isRectSeries) {\n\t                var midPoint = point.symbolLocations[0];\n\t                location.push(midPoint);\n\t            }\n\t            else {\n\t                var midPoint = helper_2.getPoint(point.xValue, point.yValue, series.xAxis, series.yAxis, isInverted);\n\t                location.push(midPoint);\n\t            }\n\t            var endPoint = helper_2.getPoint(point.xValue - ((direction === 'Minus' || direction === 'Both') ? (errorbar.type === 'Custom' &&\n\t                (errorbar.mode === 'Horizontal' || errorbar.mode === 'Both')) ? x1 = errorbar.horizontalNegativeError : x1 : 0), yValue - ((direction === 'Minus' || direction === 'Both') ? (errorbar.type === 'Custom' &&\n\t                (errorbar.mode === 'Vertical' || errorbar.mode === 'Both')) ? y1 = errorbar.verticalNegativeError : y1 : 0), series.xAxis, series.yAxis, isInverted);\n\t            location.push(endPoint);\n\t            point.error = (errorbar.mode === 'Vertical') ? errorbar.verticalError : errorbar.horizontalError;\n\t            this.negativeHeight = (errorbar.mode === 'Vertical' || errorbar.mode === 'Both') ? (isInverted ? (location[1].x - location[2].x) :\n\t                (location[2].y - location[1].y)) : 0;\n\t            this.positiveHeight = (errorbar.mode === 'Vertical' || errorbar.mode === 'Both') ? (isInverted ? (location[0].x - location[1].x) :\n\t                (location[1].y - location[0].y)) : 0;\n\t            return this.getErrorDirection(location[0], location[1], location[2], series, isInverted);\n\t        };\n\t        ErrorBar.prototype.calculateFixedValue = function (point, series, isInverted, errorX, errorY, xAxis, yAxis) {\n\t            var errorbar = series.errorBar;\n\t            return this.findLocation(point, series, isInverted, errorX, errorY);\n\t        };\n\t        ErrorBar.prototype.calculatePercentageValue = function (point, series, isInverted, errorX, errorY, xAxis, yAxis) {\n\t            errorX = (errorX / 100) * point.xValue;\n\t            errorY = (errorY / 100) * point.yValue;\n\t            return this.findLocation(point, series, isInverted, errorX, errorY);\n\t        };\n\t        ErrorBar.prototype.calculateStandardDeviationValue = function (point, series, isInverted, errorX, errorY, xAxis, yAxis) {\n\t            var getMean = this.meanCalculation(series, series.errorBar.mode);\n\t            errorX = errorX * (getMean.horizontalSquareRoot + getMean.horizontalMean);\n\t            errorY = errorY * (getMean.verticalSquareRoot + getMean.verticalMean);\n\t            return this.findLocation(point, series, isInverted, errorX, errorY);\n\t        };\n\t        ErrorBar.prototype.calculateStandardErrorValue = function (point, series, isInverted, errorX, errorY, xAxis, yAxis) {\n\t            var length = series.points.length;\n\t            var getMean = this.meanCalculation(series, series.errorBar.mode);\n\t            errorX = ((errorX * getMean.horizontalSquareRoot) / Math.sqrt(length));\n\t            errorY = ((errorY * getMean.verticalSquareRoot) / Math.sqrt(length));\n\t            return this.findLocation(point, series, isInverted, errorX, errorY);\n\t        };\n\t        ErrorBar.prototype.calculateCustomValue = function (point, series, isInverted, errorX, errorY, xAxis, yAxis) {\n\t            var errorbar = series.errorBar;\n\t            return this.findLocation(point, series, isInverted, errorX, errorY);\n\t        };\n\t        ErrorBar.prototype.getHorizontalDirection = function (start, mid, end, direction, errorMode, capLength) {\n\t            var path = '';\n\t            var capDirection = '';\n\t            path += ' M ' + start.x + ' ' + mid.y + ' L ' + end.x + ' ' + mid.y;\n\t            capDirection += (direction === 'Plus' || direction === 'Both') ? ' M ' + (start.x) + ' ' + (mid.y - capLength) + ' L '\n\t                + (start.x) + ' ' + (mid.y + capLength) : '';\n\t            capDirection += (direction === 'Minus' || direction === 'Both') ? ' M ' + (end.x) + ' ' + (mid.y - capLength) + ' L '\n\t                + (end.x) + ' ' + (mid.y + capLength) : ' ';\n\t            return [path, capDirection];\n\t        };\n\t        ErrorBar.prototype.getVerticalDirection = function (start, mid, end, direction, errorMode, capLength) {\n\t            var path = '';\n\t            var capDirection = '';\n\t            path += ' M ' + mid.x + ' ' + start.y + ' L ' + mid.x + ' ' + end.y;\n\t            capDirection += (direction === 'Plus' || direction === 'Both') ? ' M ' + (mid.x - capLength) + ' ' + start.y + ' L '\n\t                + (mid.x + capLength) + ' ' + start.y : '';\n\t            capDirection += (direction === 'Minus' || direction === 'Both') ? ' M ' + (mid.x - capLength) + ' ' + end.y + ' L '\n\t                + (mid.x + capLength) + ' ' + end.y : '';\n\t            return [path, capDirection];\n\t        };\n\t        ErrorBar.prototype.getBothDirection = function (start, mid, end, direction, errorMode, capLength) {\n\t            var capDirection = '';\n\t            var path = '';\n\t            var pathH = this.getHorizontalDirection(start, mid, end, direction, errorMode, capLength);\n\t            var pathV = this.getVerticalDirection(start, mid, end, direction, errorMode, capLength);\n\t            path = pathH[0].concat(pathV[0]);\n\t            capDirection = pathH[1].concat(pathV[1]);\n\t            return [path, capDirection];\n\t        };\n\t        ErrorBar.prototype.getErrorDirection = function (start, mid, end, series, isInverted) {\n\t            var direction = series.errorBar.direction;\n\t            var mode = series.errorBar.mode;\n\t            var capLength = series.errorBar.errorBarCap.length;\n\t            var path = '';\n\t            var paths;\n\t            var capDirection = '';\n\t            var errorMode = mode;\n\t            switch (mode) {\n\t                case 'Both':\n\t                    errorMode = mode;\n\t                    break;\n\t                case 'Horizontal':\n\t                    errorMode = (isInverted) ? 'Vertical' : mode;\n\t                    break;\n\t                case 'Vertical':\n\t                    errorMode = (isInverted) ? 'Horizontal' : mode;\n\t                    break;\n\t            }\n\t            switch (errorMode) {\n\t                case 'Horizontal':\n\t                    paths = this.getHorizontalDirection(start, mid, end, direction, errorMode, capLength);\n\t                    break;\n\t                case 'Vertical':\n\t                    paths = this.getVerticalDirection(start, mid, end, direction, errorMode, capLength);\n\t                    break;\n\t                case 'Both':\n\t                    paths = this.getBothDirection(start, mid, end, direction, errorMode, capLength);\n\t                    break;\n\t            }\n\t            return [paths[0], paths[1]];\n\t        };\n\t        ErrorBar.prototype.meanCalculation = function (series, mode) {\n\t            var sumOfX = 0;\n\t            var sumOfY = 0;\n\t            var verticalMean = 0;\n\t            var horizontalMean = 0;\n\t            var horSquareDev;\n\t            var verStandardMean;\n\t            var horStandardMean;\n\t            var verSquareTotal;\n\t            var horSquareTotal;\n\t            var verSquareRoot;\n\t            var horSquareRoot;\n\t            var length = series.points.length;\n\t            switch (mode) {\n\t                case 'Vertical':\n\t                    sumOfY = helper_2.sum(series.yData);\n\t                    verticalMean = sumOfY / length;\n\t                    break;\n\t                case 'Horizontal':\n\t                    sumOfX = helper_2.sum(series.xData);\n\t                    horizontalMean = sumOfX / length;\n\t                    break;\n\t                case 'Both':\n\t                    sumOfY = helper_2.sum(series.yData);\n\t                    verticalMean = sumOfY / length;\n\t                    sumOfX = helper_2.sum(series.xData);\n\t                    horizontalMean = sumOfX / length;\n\t            }\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (mode === 'Vertical') {\n\t                    sumOfY = sumOfY + Math.pow((point.yValue - verticalMean), 2);\n\t                }\n\t                else if (mode === 'Horizontal') {\n\t                    sumOfX = sumOfX + Math.pow((point.xValue - horizontalMean), 2);\n\t                }\n\t                else {\n\t                    sumOfY = sumOfY + Math.pow((point.yValue - verticalMean), 2);\n\t                    sumOfX = sumOfX + Math.pow((point.xValue - horizontalMean), 2);\n\t                }\n\t            }\n\t            verStandardMean = sumOfY / (length - 1);\n\t            verSquareRoot = Math.sqrt(sumOfY / (length - 1));\n\t            horStandardMean = sumOfX / (length - 1);\n\t            horSquareRoot = Math.sqrt(sumOfX / (length - 1));\n\t            return new helper_1.Mean(verStandardMean, verSquareRoot, horStandardMean, horSquareRoot, verticalMean, horizontalMean);\n\t        };\n\t        ErrorBar.prototype.createElement = function (series) {\n\t            var explodeValue = 5;\n\t            var render = series.chart.renderer;\n\t            var transform;\n\t            transform = series.chart.chartAreaType === 'Cartesian' ? 'translate(' + series.clipRect.x + ',' + (series.clipRect.y) + ')' : '';\n\t            var markerHeight = (series.marker.height + explodeValue) / 2;\n\t            var markerWidth = (series.marker.width + explodeValue) / 2;\n\t            if (series.chart.chartAreaType === 'Cartesian') {\n\t                var errorBarClipRect = render.drawClipPath(new helper_1.RectOption(this.chart.element.id + '_ChartErrorBarClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n\t                    x: -markerWidth, y: -markerHeight,\n\t                    width: series.clipRect.width + markerWidth * 2, height: series.clipRect.height + markerHeight * 2\n\t                }));\n\t                series.errorBarElement = render.createGroup({\n\t                    'id': this.chart.element.id + 'ErrorBarGroup' + series.index,\n\t                    'transform': transform,\n\t                    'clip-path': 'url(#' + this.chart.element.id + '_ChartErrorBarClipRect_' + series.index + ')'\n\t                });\n\t                series.errorBarElement.appendChild(errorBarClipRect);\n\t            }\n\t        };\n\t        ErrorBar.prototype.doErrorBarAnimation = function (series) {\n\t            var errorBarElements = series.errorBarElement.childNodes;\n\t            if (!errorBarElements) {\n\t                return null;\n\t            }\n\t            var delay = series.animation.delay + series.animation.duration;\n\t            var j = 1;\n\t            while (j < errorBarElements.length) {\n\t                for (var i = 0; i < series.points.length; i++) {\n\t                    if (!series.points[i].symbolLocations[0]) {\n\t                        continue;\n\t                    }\n\t                    errorBarElements[j].style.visibility = 'hidden';\n\t                    helper_2.templateAnimate(errorBarElements[j], delay, 350, series.chart.requireInvertedAxis ? 'SlideLeftIn' : 'SlideBottomIn', false);\n\t                }\n\t                j++;\n\t            }\n\t        };\n\t        ErrorBar.prototype.getModuleName = function () {\n\t            return 'ErrorBar';\n\t        };\n\t        ErrorBar.prototype.destroy = function (chart) {\n\t        };\n\t        return ErrorBar;\n\t    }());\n\t    exports.ErrorBar = ErrorBar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(20), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, legend_1, helper_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var Legend = (function (_super) {\n\t        __extends(Legend, _super);\n\t        function Legend(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.library = _this;\n\t            _this.addEventListener();\n\t            return _this;\n\t        }\n\t        Legend.prototype.addEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            this.chart.on(ej2_base_1.Browser.touchMoveEvent, this.mouseMove, this);\n\t            this.chart.on('click', this.click, this);\n\t            this.chart.on(ej2_base_1.Browser.touchEndEvent, this.mouseEnd, this);\n\t        };\n\t        Legend.prototype.removeEventListener = function () {\n\t            if (this.chart.isDestroyed) {\n\t                return;\n\t            }\n\t            this.chart.off(ej2_base_1.Browser.touchMoveEvent, this.mouseMove);\n\t            this.chart.off('click', this.click);\n\t            this.chart.off(ej2_base_1.Browser.touchEndEvent, this.mouseEnd);\n\t        };\n\t        Legend.prototype.mouseMove = function (e) {\n\t            if (this.chart.legendSettings.visible && !this.chart.isTouch) {\n\t                this.move(e);\n\t            }\n\t        };\n\t        Legend.prototype.mouseEnd = function (e) {\n\t            if (this.chart.legendSettings.visible && this.chart.isTouch) {\n\t                this.move(e);\n\t            }\n\t        };\n\t        Legend.prototype.getLegendOptions = function (visibleSeriesCollection) {\n\t            this.legendCollections = [];\n\t            var seriesType;\n\t            for (var _i = 0, visibleSeriesCollection_1 = visibleSeriesCollection; _i < visibleSeriesCollection_1.length; _i++) {\n\t                var series = visibleSeriesCollection_1[_i];\n\t                if (series.category !== 'Indicator') {\n\t                    seriesType = (visibleSeriesCollection[0].chart.chartAreaType === 'PolarRadar') ? series.drawType :\n\t                        series.type;\n\t                    this.legendCollections.push(new legend_1.LegendOptions(series.name, series.interior, series.legendShape, series.visible, seriesType, series.marker.shape, series.marker.visible));\n\t                }\n\t            }\n\t        };\n\t        Legend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n\t            var padding = legend.padding;\n\t            var extraHeight = 0;\n\t            var extraWidth = 0;\n\t            if (!this.isVertical) {\n\t                extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\n\t            }\n\t            else {\n\t                extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\n\t            }\n\t            legendBounds.height += extraHeight;\n\t            legendBounds.width += extraWidth;\n\t            var shapeHeight = legend.shapeHeight;\n\t            var shapeWidth = legend.shapeWidth;\n\t            var shapePadding = legend.shapePadding;\n\t            var maximumWidth = 0;\n\t            var rowWidth = 0;\n\t            var legendWidth = 0;\n\t            var columnHeight = 0;\n\t            var rowCount = 0;\n\t            var legendEventArgs;\n\t            this.maxItemHeight = Math.max(helper_1.measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n\t            var render = false;\n\t            for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n\t                var legendOption = _a[_i];\n\t                legendEventArgs = {\n\t                    fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\n\t                    markerShape: legendOption.markerShape, name: constants_1.legendRender, cancel: false\n\t                };\n\t                this.chart.trigger(constants_1.legendRender, legendEventArgs);\n\t                legendOption.render = !legendEventArgs.cancel;\n\t                legendOption.text = legendEventArgs.text;\n\t                legendOption.fill = legendEventArgs.fill;\n\t                legendOption.shape = legendEventArgs.shape;\n\t                legendOption.markerShape = legendEventArgs.markerShape;\n\t                legendOption.textSize = helper_1.measureText(legendOption.text, legend.textStyle);\n\t                if (legendOption.render && legendOption.text !== '') {\n\t                    render = true;\n\t                    legendWidth = shapeWidth + shapePadding + legendOption.textSize.width + padding;\n\t                    rowWidth = rowWidth + legendWidth;\n\t                    if (legendBounds.width < (padding + rowWidth) || this.isVertical) {\n\t                        maximumWidth = Math.max(maximumWidth, (rowWidth + padding - (this.isVertical ? 0 : legendWidth)));\n\t                        if (rowCount === 0 && (legendWidth !== rowWidth)) {\n\t                            rowCount = 1;\n\t                        }\n\t                        rowWidth = this.isVertical ? 0 : legendWidth;\n\t                        rowCount++;\n\t                        columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding;\n\t                    }\n\t                }\n\t            }\n\t            columnHeight = Math.max(columnHeight, (this.maxItemHeight + padding) + padding);\n\t            this.isPaging = legendBounds.height < columnHeight;\n\t            this.totalPages = rowCount;\n\t            if (render) {\n\t                this.setBounds(Math.max((rowWidth + padding), maximumWidth), columnHeight, legend, legendBounds);\n\t            }\n\t            else {\n\t                this.setBounds(0, 0, legend, legendBounds);\n\t            }\n\t        };\n\t        Legend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n\t            var padding = this.legend.padding;\n\t            var previousBound = (prevLegend.location.x + textPadding + prevLegend.textSize.width);\n\t            if ((previousBound + (legendOption.textSize.width + textPadding)) > (rect.x + rect.width + this.legend.shapeWidth / 2) ||\n\t                this.isVertical) {\n\t                legendOption.location.x = start.x;\n\t                legendOption.location.y = (count === firstLegend) ? prevLegend.location.y :\n\t                    prevLegend.location.y + this.maxItemHeight + padding;\n\t            }\n\t            else {\n\t                legendOption.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\n\t                legendOption.location.y = prevLegend.location.y;\n\t            }\n\t            var availwidth = (this.legendBounds.x + this.legendBounds.width) - (legendOption.location.x +\n\t                textPadding - this.legend.shapeWidth / 2);\n\t            legendOption.text = helper_1.textTrim(+availwidth.toFixed(4), legendOption.text, this.legend.textStyle);\n\t        };\n\t        Legend.prototype.LegendClick = function (seriesIndex) {\n\t            var chart = this.chart;\n\t            var series = chart.visibleSeries[seriesIndex];\n\t            var legend = this.legendCollections[seriesIndex];\n\t            var selectedDataIndexes = [];\n\t            if (chart.selectionModule) {\n\t                selectedDataIndexes = ej2_base_2.extend([], chart.selectionModule.selectedDataIndexes, null, true);\n\t            }\n\t            if (chart.legendSettings.toggleVisibility) {\n\t                if (!series.visible) {\n\t                    series.visible = true;\n\t                }\n\t                else {\n\t                    series.visible = false;\n\t                }\n\t                legend.visible = (series.visible);\n\t                if (chart.svgObject.childNodes.length > 0) {\n\t                    while (chart.svgObject.lastChild) {\n\t                        chart.svgObject.removeChild(chart.svgObject.lastChild);\n\t                    }\n\t                    ej2_base_1.remove(chart.svgObject);\n\t                }\n\t                chart.animateSeries = false;\n\t                chart.removeSvg();\n\t                chart.refreshAxis();\n\t                series.refreshAxisLabel();\n\t                this.refreshSeries(chart.visibleSeries);\n\t                chart.refreshBound();\n\t                if (selectedDataIndexes.length > 0) {\n\t                    chart.selectionModule.selectedDataIndexes = selectedDataIndexes;\n\t                    chart.selectionModule.redrawSelection(chart, chart.selectionMode);\n\t                }\n\t            }\n\t            else if (chart.selectionModule) {\n\t                chart.selectionModule.legendSelection(chart, seriesIndex);\n\t            }\n\t        };\n\t        Legend.prototype.refreshSeries = function (seriesCollection) {\n\t            for (var _i = 0, seriesCollection_1 = seriesCollection; _i < seriesCollection_1.length; _i++) {\n\t                var series = seriesCollection_1[_i];\n\t                series.position = undefined;\n\t            }\n\t        };\n\t        Legend.prototype.click = function (event) {\n\t            if (!this.chart.legendSettings.visible) {\n\t                return;\n\t            }\n\t            var targetId = event.target.id;\n\t            var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_marker_',\n\t                this.legendID + '_shape_'];\n\t            var seriesIndex;\n\t            for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n\t                var id = legendItemsId_1[_i];\n\t                if (targetId.indexOf(id) > -1) {\n\t                    seriesIndex = parseInt(targetId.split(id)[1], 10);\n\t                    this.LegendClick(seriesIndex);\n\t                }\n\t            }\n\t            if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n\t                this.changePage(event, true);\n\t            }\n\t            else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n\t                this.changePage(event, false);\n\t            }\n\t        };\n\t        Legend.prototype.getModuleName = function () {\n\t            return 'Legend';\n\t        };\n\t        Legend.prototype.destroy = function (chart) {\n\t            this.removeEventListener();\n\t        };\n\t        return Legend;\n\t    }(legend_1.BaseLegend));\n\t    exports.Legend = Legend;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(71), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, annotation_1, helper_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var ChartAnnotation = (function (_super) {\n\t        __extends(ChartAnnotation, _super);\n\t        function ChartAnnotation(control, annotations) {\n\t            var _this = _super.call(this, control) || this;\n\t            _this.chart = control;\n\t            _this.annotations = annotations;\n\t            return _this;\n\t        }\n\t        ChartAnnotation.prototype.renderAnnotations = function (element) {\n\t            var _this = this;\n\t            var annotationElement;\n\t            var location;\n\t            this.parentElement = ej2_base_1.createElement('div', {\n\t                id: this.chart.element.id + '_Annotation_Collections'\n\t            });\n\t            this.annotations.map(function (annotation, index) {\n\t                annotationElement = _this.render(annotation, index);\n\t                location = new helper_1.ChartLocation(0, 0);\n\t                if (_this['setAnnotation' + annotation.coordinateUnits + 'Value'](location)) {\n\t                    _this.setElementStyle(location, annotationElement, _this.parentElement);\n\t                }\n\t            });\n\t            helper_1.appendElement(this.parentElement, element);\n\t        };\n\t        ChartAnnotation.prototype.destroy = function (control) {\n\t        };\n\t        ChartAnnotation.prototype.getModuleName = function () {\n\t            return 'Annotation';\n\t        };\n\t        return ChartAnnotation;\n\t    }(annotation_1.AnnotationBase));\n\t    exports.ChartAnnotation = ChartAnnotation;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(4), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, helper_3, ej2_base_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AnnotationBase = (function () {\n\t        function AnnotationBase(control) {\n\t            this.control = control;\n\t        }\n\t        AnnotationBase.prototype.render = function (annotation, index) {\n\t            this.isChart = this.control.getModuleName() === 'chart';\n\t            this.annotation = annotation;\n\t            var childElement = helper_1.createTemplate(ej2_base_1.createElement('div', {\n\t                id: this.control.element.id + '_Annotation_' + index,\n\t                styles: 'position: absolute;'\n\t            }), index, annotation.content, this.control);\n\t            return childElement;\n\t        };\n\t        AnnotationBase.prototype.setAnnotationPixelValue = function (location) {\n\t            var rect;\n\t            rect = this.annotation.region === 'Chart' ?\n\t                new helper_2.Rect(0, 0, this.control.availableSize.width, this.control.availableSize.height) :\n\t                this.isChart ?\n\t                    this.control.chartAxisLayoutPanel.seriesClipRect :\n\t                    this.control.series[0].accumulationBound;\n\t            location.x = ((typeof this.annotation.x !== 'string') ?\n\t                ((typeof this.annotation.x === 'number') ? this.annotation.x : 0) :\n\t                helper_2.stringToNumber(this.annotation.x, rect.width)) + rect.x;\n\t            location.y = ((typeof this.annotation.y === 'number') ? this.annotation.y :\n\t                helper_2.stringToNumber(this.annotation.y, rect.height)) + rect.y;\n\t            return true;\n\t        };\n\t        AnnotationBase.prototype.setAnnotationPointValue = function (location) {\n\t            var symbolLocation = new helper_2.ChartLocation(0, 0);\n\t            if (this.isChart) {\n\t                var xAxis = void 0;\n\t                var yAxis = void 0;\n\t                var chart = this.control;\n\t                var annotation = this.annotation;\n\t                var xValue = void 0;\n\t                var isLog = false;\n\t                var xAxisName = annotation.xAxisName;\n\t                var yAxisName = annotation.yAxisName;\n\t                var isInverted = chart.requireInvertedAxis;\n\t                for (var _i = 0, _a = chart.axisCollections; _i < _a.length; _i++) {\n\t                    var axis = _a[_i];\n\t                    if (xAxisName === axis.name || (xAxisName == null && axis.name === 'primaryXAxis')) {\n\t                        xAxis = axis;\n\t                        if (xAxis.valueType === 'Category') {\n\t                            if (xAxis.labels.indexOf(annotation.x) < 0) {\n\t                                return false;\n\t                            }\n\t                            else {\n\t                                xValue = xAxis.labels.indexOf(annotation.x);\n\t                            }\n\t                        }\n\t                        else if (xAxis.valueType === 'DateTime') {\n\t                            var option = { skeleton: 'full', type: 'dateTime' };\n\t                            xValue = (typeof this.annotation.x === 'object') ?\n\t                                Date.parse(chart.intl.getDateParser(option)(chart.intl.getDateFormat(option)(annotation.x))) : 0;\n\t                        }\n\t                        else {\n\t                            xValue = +annotation.x;\n\t                        }\n\t                    }\n\t                    else if (yAxisName === axis.name || (yAxisName == null && axis.name === 'primaryYAxis')) {\n\t                        yAxis = axis;\n\t                        isLog = yAxis.valueType === 'Logarithmic';\n\t                    }\n\t                }\n\t                if (xAxis && yAxis && helper_2.withIn(xAxis.valueType === 'Logarithmic' ? helper_1.logBase(xValue, xAxis.logBase) : xValue, xAxis.visibleRange)) {\n\t                    symbolLocation = helper_3.getPoint(xValue, helper_2.withIn((isLog ? helper_1.logBase(+this.annotation.y, yAxis.logBase) : +this.annotation.y), yAxis.visibleRange) ? +annotation.y :\n\t                        isLog ? Math.pow(yAxis.logBase, yAxis.visibleRange.max) :\n\t                            +annotation.y > yAxis.visibleRange.max ? yAxis.visibleRange.max : yAxis.visibleRange.min, xAxis, yAxis, isInverted);\n\t                    location.x = symbolLocation.x + (isInverted ? yAxis.rect.x : xAxis.rect.x);\n\t                    location.y = symbolLocation.y + (isInverted ? xAxis.rect.y : yAxis.rect.y);\n\t                }\n\t                else {\n\t                    return false;\n\t                }\n\t                return true;\n\t            }\n\t            else {\n\t                return this.setAccumulationPointValue(location);\n\t            }\n\t        };\n\t        AnnotationBase.prototype.setAccumulationPointValue = function (location) {\n\t            var accumulation = this.control;\n\t            var point;\n\t            for (var _i = 0, _a = accumulation.visibleSeries[0].points; _i < _a.length; _i++) {\n\t                var accPoint = _a[_i];\n\t                if (typeof accPoint.x === 'object') {\n\t                    if (Date.parse(accPoint.x) === Date.parse(this.annotation.x) &&\n\t                        accPoint.y === this.annotation.y) {\n\t                        point = accPoint;\n\t                        break;\n\t                    }\n\t                }\n\t                else {\n\t                    if (accPoint.x === this.annotation.x && accPoint.y === this.annotation.y) {\n\t                        point = accPoint;\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            if (point && point.visible) {\n\t                location.x = point.symbolLocation.x;\n\t                location.y = point.symbolLocation.y;\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        AnnotationBase.prototype.setElementStyle = function (location, element, parentElement) {\n\t            var elementRect = helper_1.measureElementRect(element);\n\t            var argsData = {\n\t                cancel: false, name: constants_1.annotationRender, content: element,\n\t                location: location\n\t            };\n\t            this.control.trigger(constants_1.annotationRender, argsData);\n\t            if (!argsData.cancel) {\n\t                argsData.content.style.left = this.setAlignmentValue(this.annotation.horizontalAlignment, elementRect.width, argsData.location.x) + 'px';\n\t                argsData.content.style.top = this.setAlignmentValue(this.annotation.verticalAlignment, elementRect.height, argsData.location.y) + 'px';\n\t                argsData.content.setAttribute('aria-label', this.annotation.description || 'Annotation');\n\t                helper_2.appendElement(argsData.content, parentElement);\n\t            }\n\t        };\n\t        AnnotationBase.prototype.setAlignmentValue = function (alignment, size, value) {\n\t            switch (alignment) {\n\t                case 'Top':\n\t                case 'Near':\n\t                    value -= size;\n\t                    break;\n\t                case 'Bottom':\n\t                case 'Far':\n\t                    value += 0;\n\t                    break;\n\t                case 'Middle':\n\t                case 'Center':\n\t                    value -= (size / 2);\n\t                    break;\n\t            }\n\t            return value;\n\t        };\n\t        return AnnotationBase;\n\t    }());\n\t    exports.AnnotationBase = AnnotationBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(3), __webpack_require__(4), __webpack_require__(30), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, helper_2, ej2_base_1, column_base_1, helper_3) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var BoxAndWhiskerSeries = (function (_super) {\n\t        __extends(BoxAndWhiskerSeries, _super);\n\t        function BoxAndWhiskerSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        BoxAndWhiskerSeries.prototype.render = function (series, xAxis, yAxis, isInverted) {\n\t            var sideBySideInfo = this.getSideBySideInfo(series);\n\t            var argsData;\n\t            var centerRegion;\n\t            var borderWidth = series.border.width || 1;\n\t            for (var _i = 0, _a = series.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                point.symbolLocations = [];\n\t                point.regions = [];\n\t                var centerRegion_1 = void 0;\n\t                if (point.visible && helper_1.withInRange(series.points[point.index - 1], point, series.points[point.index + 1], series)) {\n\t                    this.findBoxPlotValues(point.y, point, series.boxPlotMode);\n\t                    this.updateTipRegion(series, point, sideBySideInfo);\n\t                    centerRegion_1 = this.getRectangle((point.xValue + sideBySideInfo.start), point.upperQuartile, (point.xValue + sideBySideInfo.end), point.lowerQuartile, series);\n\t                    point.regions.push(centerRegion_1);\n\t                    argsData = this.triggerEvent(series, point, series.interior, {\n\t                        color: (!ej2_base_1.isNullOrUndefined(series.border.color) && series.border.color !== 'transparent') ? series.border.color :\n\t                            helper_2.getSaturationColor(series.interior, -0.6),\n\t                        width: series.border.width ? series.border.width : 1\n\t                    });\n\t                    if (!argsData.cancel) {\n\t                        this.renderBoxAndWhisker(series, point, centerRegion_1, argsData, this.getPathString(point, series, helper_2.getPoint(point.xValue, point.median, xAxis, yAxis, isInverted), helper_2.getPoint(point.xValue, point.average, xAxis, yAxis, isInverted)));\n\t                    }\n\t                }\n\t            }\n\t            if (series.marker.visible) {\n\t                series.chart.markerRender.render(series);\n\t            }\n\t        };\n\t        BoxAndWhiskerSeries.prototype.updateTipRegion = function (series, point, sideBySideInfo) {\n\t            var tipRegion = this.getRectangle((point.xValue + sideBySideInfo.median), point.maximum, (point.xValue + sideBySideInfo.median), point.minimum, series);\n\t            this.updateTipSize(series, point, tipRegion, series.chart.requireInvertedAxis);\n\t        };\n\t        BoxAndWhiskerSeries.prototype.updateTipSize = function (series, point, region, isInverted) {\n\t            var borderWidth = series.border.width || 1;\n\t            if (!isInverted) {\n\t                region.x -= borderWidth / 2;\n\t                region.width = region.width || borderWidth;\n\t            }\n\t            else {\n\t                region.y -= borderWidth / 2;\n\t                region.height = region.height || borderWidth;\n\t            }\n\t            point.regions.push(region);\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getPathString = function (point, series, median, average) {\n\t            var topRect = point.regions[0];\n\t            var midRect = point.regions[1];\n\t            var direction = '';\n\t            var width = series.chart.requireInvertedAxis ? topRect.height : topRect.width;\n\t            var center = series.chart.requireInvertedAxis ? topRect.y + topRect.height / 2 :\n\t                topRect.x + topRect.width / 2;\n\t            var midWidth = midRect.x + midRect.width;\n\t            var midHeight = midRect.y + midRect.height;\n\t            var topWidth = topRect.x + topRect.width;\n\t            var topHeight = topRect.y + topRect.height;\n\t            if (!series.chart.requireInvertedAxis) {\n\t                this.updateTipSize(series, point, { x: midRect.x, y: topRect.y, width: midWidth - midRect.x, height: 0 }, true);\n\t                this.updateTipSize(series, point, { x: midRect.x, y: topHeight, width: midWidth - midRect.x, height: 0 }, true);\n\t                direction += 'M ' + midRect.x + ' ' + topRect.y + ' ' + ' L ' + midWidth + ' ' + topRect.y;\n\t                direction += ' M ' + center + ' ' + topRect.y + ' ' + ' L ' + center + ' ' + midRect.y;\n\t                direction += ' M ' + midRect.x + ' ' + midRect.y + ' ' + ' L ' + midWidth + ' ' + midRect.y +\n\t                    ' L ' + midWidth + ' ' + midHeight + ' L ' + midRect.x + ' ' + midHeight + ' Z';\n\t                direction += ' M ' + center + ' ' + midHeight + ' L ' + center + ' ' + topHeight;\n\t                direction += ' M ' + midRect.x + ' ' + topHeight + ' L ' + midWidth + ' ' + topHeight;\n\t                direction += ' M ' + midRect.x + ' ' + median.y + ' L ' + midWidth + ' ' + median.y;\n\t                direction += series.showMean ?\n\t                    ' M ' + (average.x - 5) + ' ' + (average.y - 5) + ' L ' + (average.x + 5) + ' ' + (average.y + 5) +\n\t                        ' M ' + (average.x + 5) + ' ' + (average.y - 5) + ' L ' + (average.x - 5) + ' ' + (average.y + 5) : '';\n\t            }\n\t            else {\n\t                this.updateTipSize(series, point, { x: topRect.x, y: midRect.y, width: 0, height: midHeight - midRect.y }, false);\n\t                this.updateTipSize(series, point, { x: topWidth, y: midRect.y, width: 0, height: midHeight - midRect.y }, true);\n\t                direction += 'M ' + topRect.x + ' ' + midRect.y + ' L ' + topRect.x + ' ' + midHeight;\n\t                direction += 'M ' + topRect.x + ' ' + center + ' ' + ' L ' + midRect.x + ' ' + center;\n\t                direction += ' M ' + midRect.x + ' ' + midRect.y + ' ' + ' L ' + midWidth + ' ' + midRect.y +\n\t                    ' L ' + midWidth + ' ' + midHeight + ' L ' + midRect.x + ' ' + midHeight + ' Z';\n\t                direction += ' M ' + midWidth + ' ' + center + ' L ' + topWidth + ' ' + center;\n\t                direction += ' M ' + topWidth + ' ' + midRect.y + ' L ' + topWidth + ' ' + midHeight;\n\t                direction += ' M ' + median.x + ' ' + midRect.y + ' ' + ' L ' + median.x + ' ' + midHeight;\n\t                direction += series.showMean ?\n\t                    'M ' + (average.x + 5) + ' ' + (average.y - 5) + ' L ' + (average.x - 5) + ' ' + (average.y + 5) +\n\t                        'M ' + (average.x - 5) + ' ' + (average.y - 5) + ' L ' + (average.x + 5) + ' ' + (average.y + 5) : '';\n\t            }\n\t            return direction;\n\t        };\n\t        BoxAndWhiskerSeries.prototype.renderBoxAndWhisker = function (series, point, rect, argsData, direction) {\n\t            var location;\n\t            var size;\n\t            var symbolId = series.chart.element.id + '_Series_' + series.index + '_Point_' + point.index;\n\t            var element = series.chart.renderer.drawPath(new helper_1.PathOption(symbolId + '_BoxPath', argsData.fill, argsData.border.width, argsData.border.color, series.opacity, series.dashArray, direction));\n\t            element.setAttribute('aria-label', point.x.toString() + ':' + point.maximum.toString()\n\t                + ':' + point.minimum.toString() + ':' + point.lowerQuartile.toString() + ':' + point.upperQuartile.toString());\n\t            var parentElement = series.chart.renderer.createGroup({\n\t                'id': symbolId\n\t            });\n\t            parentElement.appendChild(element);\n\t            for (var i = 0; i < point.outliers.length; i++) {\n\t                location = helper_2.getPoint(point.xValue, point.outliers[i], series.xAxis, series.yAxis, series.chart.requireInvertedAxis);\n\t                size = new helper_2.Size(series.marker.width, series.marker.height);\n\t                point.symbolLocations.push(location);\n\t                this.updateTipSize(series, point, {\n\t                    x: location.x - (size.width / 2), y: location.y - (size.height / 2),\n\t                    width: size.width, height: size.height\n\t                }, true);\n\t            }\n\t            series.seriesElement.appendChild(parentElement);\n\t        };\n\t        BoxAndWhiskerSeries.prototype.findBoxPlotValues = function (yValues, point, mode) {\n\t            var yCount = yValues.length;\n\t            var quartile = {\n\t                average: helper_1.sum(yValues) / yCount,\n\t                lowerQuartile: 0, upperQuartile: 0,\n\t                maximum: 0, minimum: 0,\n\t                median: 0, outliers: []\n\t            };\n\t            if (mode === 'Exclusive') {\n\t                quartile.lowerQuartile = this.getExclusiveQuartileValue(yValues, yCount, 0.25);\n\t                quartile.upperQuartile = this.getExclusiveQuartileValue(yValues, yCount, 0.75);\n\t                quartile.median = this.getExclusiveQuartileValue(yValues, yCount, 0.5);\n\t            }\n\t            else if (mode === 'Inclusive') {\n\t                quartile.lowerQuartile = this.getInclusiveQuartileValue(yValues, yCount, 0.25);\n\t                quartile.upperQuartile = this.getInclusiveQuartileValue(yValues, yCount, 0.75);\n\t                quartile.median = this.getInclusiveQuartileValue(yValues, yCount, 0.5);\n\t            }\n\t            else {\n\t                quartile.median = helper_3.getMedian(yValues);\n\t                this.getQuartileValues(yValues, yCount, quartile);\n\t            }\n\t            this.getMinMaxOutlier(yValues, yCount, quartile);\n\t            point.minimum = quartile.minimum;\n\t            point.maximum = quartile.maximum;\n\t            point.lowerQuartile = quartile.lowerQuartile;\n\t            point.upperQuartile = quartile.upperQuartile;\n\t            point.median = quartile.median;\n\t            point.outliers = quartile.outliers;\n\t            point.average = quartile.average;\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getExclusiveQuartileValue = function (yValues, count, percentile) {\n\t            if (count === 0) {\n\t                return 0;\n\t            }\n\t            else if (count === 1) {\n\t                return yValues[0];\n\t            }\n\t            var value = 0;\n\t            var rank = percentile * (count + 1);\n\t            var integerRank = Math.floor(Math.abs(rank));\n\t            var fractionRank = rank - integerRank;\n\t            if (integerRank === 0) {\n\t                value = yValues[0];\n\t            }\n\t            else if (integerRank > count - 1) {\n\t                value = yValues[count - 1];\n\t            }\n\t            else {\n\t                value = fractionRank * (yValues[integerRank] - yValues[integerRank - 1]) + yValues[integerRank - 1];\n\t            }\n\t            return value;\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getInclusiveQuartileValue = function (yValues, count, percentile) {\n\t            if (count === 0) {\n\t                return 0;\n\t            }\n\t            else if (count === 1) {\n\t                return yValues[0];\n\t            }\n\t            var value = 0;\n\t            var rank = percentile * (count - 1);\n\t            var integerRank = Math.floor(Math.abs(rank));\n\t            var fractionRank = rank - integerRank;\n\t            value = fractionRank * (yValues[integerRank + 1] - yValues[integerRank]) + yValues[integerRank];\n\t            return value;\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getQuartileValues = function (yValues, count, quartile) {\n\t            if (count === 1) {\n\t                quartile.lowerQuartile = yValues[0];\n\t                quartile.upperQuartile = yValues[0];\n\t                return null;\n\t            }\n\t            var isEvenList = count % 2 === 0;\n\t            var halfLength = count / 2;\n\t            var lowerQuartileArray = yValues.slice(0, halfLength);\n\t            var upperQuartileArray = yValues.slice(isEvenList ? halfLength : halfLength + 1, count);\n\t            quartile.lowerQuartile = helper_3.getMedian(lowerQuartileArray);\n\t            quartile.upperQuartile = helper_3.getMedian(upperQuartileArray);\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getMinMaxOutlier = function (yValues, count, quartile) {\n\t            var interquartile = quartile.upperQuartile - quartile.lowerQuartile;\n\t            var rangeIQR = 1.5 * interquartile;\n\t            for (var i = 0; i < count; i++) {\n\t                if (yValues[i] < quartile.lowerQuartile - rangeIQR) {\n\t                    quartile.outliers.push(yValues[i]);\n\t                }\n\t                else {\n\t                    quartile.minimum = yValues[i];\n\t                    break;\n\t                }\n\t            }\n\t            for (var i = count - 1; i >= 0; i--) {\n\t                if (yValues[i] > quartile.upperQuartile + rangeIQR) {\n\t                    quartile.outliers.push(yValues[i]);\n\t                }\n\t                else {\n\t                    quartile.maximum = yValues[i];\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        BoxAndWhiskerSeries.prototype.doAnimation = function (series) {\n\t            this.animate(series);\n\t        };\n\t        BoxAndWhiskerSeries.prototype.getModuleName = function () {\n\t            return 'BoxAndWhiskerSeries';\n\t        };\n\t        BoxAndWhiskerSeries.prototype.destroy = function (chart) {\n\t        };\n\t        return BoxAndWhiskerSeries;\n\t    }(column_base_1.ColumnBase));\n\t    exports.BoxAndWhiskerSeries = BoxAndWhiskerSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(78), __webpack_require__(77), __webpack_require__(79), __webpack_require__(81), __webpack_require__(74), __webpack_require__(82), __webpack_require__(83), __webpack_require__(84), __webpack_require__(86), __webpack_require__(87)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, accumulation_1, acc_base_1, pie_series_1, funnel_series_1, pyramid_series_1, legend_1, dataLabel_1, tooltip_1, selection_1, annotation_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(accumulation_1);\n\t    __export(acc_base_1);\n\t    __export(pie_series_1);\n\t    __export(funnel_series_1);\n\t    __export(pyramid_series_1);\n\t    __export(legend_1);\n\t    __export(dataLabel_1);\n\t    __export(tooltip_1);\n\t    __export(selection_1);\n\t    __export(annotation_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(75)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, triangular_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PyramidSeries = (function (_super) {\n\t        __extends(PyramidSeries, _super);\n\t        function PyramidSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        PyramidSeries.prototype.getSegmentData = function (point, series, chart) {\n\t            var area = series.triangleSize;\n\t            var seriesTop = chart.initialClipRect.y + (chart.initialClipRect.height - area.height) / 2;\n\t            var points = [];\n\t            var offset = 0;\n\t            var extraSpace = (chart.initialClipRect.width - series.triangleSize.width) / 2;\n\t            var emptySpaceAtLeft = extraSpace + chart.initialClipRect.x;\n\t            var top = point.yRatio;\n\t            var bottom = point.yRatio + point.heightRatio;\n\t            var topRadius = 0.5 * (1 - point.yRatio);\n\t            var bottomRadius = 0.5 * (1 - bottom);\n\t            top += seriesTop / area.height;\n\t            bottom += seriesTop / area.height;\n\t            var line1 = {\n\t                x: emptySpaceAtLeft + offset + topRadius * area.width,\n\t                y: top * area.height\n\t            };\n\t            var line2 = {\n\t                x: emptySpaceAtLeft + offset + (1 - topRadius) * area.width,\n\t                y: top * area.height\n\t            };\n\t            var line3 = {\n\t                x: emptySpaceAtLeft + offset + (1 - bottomRadius) * area.width,\n\t                y: bottom * area.height\n\t            };\n\t            var line4 = {\n\t                x: emptySpaceAtLeft + offset + bottomRadius * area.width,\n\t                y: bottom * area.height\n\t            };\n\t            var polygon = [line1, line2, line3, line4];\n\t            this.setLabelLocation(series, point, polygon);\n\t            var direction = this.findPath(polygon);\n\t            return direction;\n\t        };\n\t        PyramidSeries.prototype.initializeSizeRatio = function (points, series) {\n\t            if (series.pyramidMode === 'Linear') {\n\t                _super.prototype.initializeSizeRatio.call(this, points, series, true);\n\t            }\n\t            else {\n\t                this.calculateSurfaceSegments(series);\n\t            }\n\t        };\n\t        PyramidSeries.prototype.calculateSurfaceSegments = function (series) {\n\t            var count = series.points.length;\n\t            var sumOfValues = series.sumOfPoints;\n\t            var yRatio = 0;\n\t            var y = [];\n\t            var height = [];\n\t            var gapRatio = Math.min(0, Math.max(series.gapRatio, 1));\n\t            var gapHeight = gapRatio / (count - 1);\n\t            var preSum = this.getSurfaceHeight(0, sumOfValues);\n\t            var currY = 0;\n\t            for (var i = 0; i < count; i++) {\n\t                if (series.points[i].visible) {\n\t                    y[i] = currY;\n\t                    height[i] = this.getSurfaceHeight(currY, Math.abs(series.points[i].y));\n\t                    currY += height[i] + gapHeight * preSum;\n\t                }\n\t            }\n\t            var coef = 1 / (currY - gapHeight * preSum);\n\t            for (var i = 0; i < count; i++) {\n\t                if (series.points[i].visible) {\n\t                    series.points[i].yRatio = coef * y[i];\n\t                    series.points[i].heightRatio = coef * height[i];\n\t                }\n\t            }\n\t        };\n\t        PyramidSeries.prototype.getSurfaceHeight = function (y, surface) {\n\t            var result = this.solveQuadraticEquation(1, 2 * y, -surface);\n\t            return result;\n\t        };\n\t        PyramidSeries.prototype.solveQuadraticEquation = function (a, b, c) {\n\t            var root1;\n\t            var root2;\n\t            var d = b * b - 4 * a * c;\n\t            if (d >= 0) {\n\t                var sd = Math.sqrt(d);\n\t                root1 = (-b - sd) / (2 * a);\n\t                root2 = (-b + sd) / (2 * a);\n\t                return Math.max(root1, root2);\n\t            }\n\t            return 0;\n\t        };\n\t        PyramidSeries.prototype.renderPoint = function (point, series, chart, options) {\n\t            var direction = this.getSegmentData(point, series, chart);\n\t            point.midAngle = 0;\n\t            options.d = direction;\n\t        };\n\t        PyramidSeries.prototype.getModuleName = function () {\n\t            return 'PyramidSeries';\n\t        };\n\t        PyramidSeries.prototype.destroy = function (accumulation) {\n\t        };\n\t        return PyramidSeries;\n\t    }(triangular_base_1.TriangularBase));\n\t    exports.PyramidSeries = PyramidSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(76)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, accumulation_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var TriangularBase = (function (_super) {\n\t        __extends(TriangularBase, _super);\n\t        function TriangularBase() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        TriangularBase.prototype.initProperties = function (chart, series) {\n\t            var actualChartArea = chart.initialClipRect;\n\t            series.triangleSize = new helper_1.Size(helper_1.stringToNumber(series.width, actualChartArea.width), helper_1.stringToNumber(series.height, actualChartArea.height));\n\t            series.neckSize = new helper_1.Size(helper_1.stringToNumber(series.neckWidth, actualChartArea.width), helper_1.stringToNumber(series.neckHeight, actualChartArea.height));\n\t            this.defaultLabelBound(series, series.dataLabel.visible, series.dataLabel.position, chart);\n\t            if (series.explodeOffset === '30%') {\n\t                series.explodeOffset = '25px';\n\t            }\n\t            chart.explodeDistance = helper_1.stringToNumber(series.explodeOffset, actualChartArea.width);\n\t            var points = series.points;\n\t            this.initializeSizeRatio(points, series);\n\t        };\n\t        TriangularBase.prototype.initializeSizeRatio = function (points, series, reverse) {\n\t            if (reverse === void 0) { reverse = false; }\n\t            var sumOfPoints = series.sumOfPoints;\n\t            var gapRatio = Math.min(Math.max(series.gapRatio, 0), 1);\n\t            var coEff = 1 / (sumOfPoints * (1 + gapRatio / (1 - gapRatio)));\n\t            var spacing = gapRatio / (points.length - 1);\n\t            var y = 0;\n\t            for (var i = points.length - 1; i >= 0; i--) {\n\t                var index = reverse ? points.length - 1 - i : i;\n\t                if (points[index].visible) {\n\t                    var height = coEff * points[index].y;\n\t                    points[index].yRatio = y;\n\t                    points[index].heightRatio = height;\n\t                    y += height + spacing;\n\t                }\n\t            }\n\t        };\n\t        TriangularBase.prototype.setLabelLocation = function (series, point, points) {\n\t            var last = points.length - 1;\n\t            var bottom = series.type === 'Funnel' ? points.length - 2 : points.length - 1;\n\t            var x = (points[0].x + points[bottom].x) / 2;\n\t            var right = (points[1].x + points[bottom - 1].x) / 2;\n\t            point.region = new helper_1.Rect(x, points[0].y, right - x, points[bottom].y - points[0].y);\n\t            point.symbolLocation = {\n\t                x: point.region.x + point.region.width / 2,\n\t                y: point.region.y + point.region.height / 2\n\t            };\n\t            point.labelOffset = {\n\t                x: point.symbolLocation.x - (points[0].x + points[last].x) / 2,\n\t                y: point.symbolLocation.y - (points[0].y + points[last].y) / 2\n\t            };\n\t        };\n\t        TriangularBase.prototype.findPath = function (locations) {\n\t            var path = 'M';\n\t            for (var i = 0; i < locations.length; i++) {\n\t                path += locations[i].x + ' ' + locations[i].y;\n\t                if (i !== locations.length - 1) {\n\t                    path += ' L';\n\t                }\n\t            }\n\t            return path;\n\t        };\n\t        TriangularBase.prototype.defaultLabelBound = function (series, visible, position, chart) {\n\t            var x = (chart.initialClipRect.width - series.triangleSize.width) / 2;\n\t            var y = (chart.initialClipRect.height - series.triangleSize.height) / 2;\n\t            var accumulationBound = new helper_1.Rect(x, y, series.triangleSize.width, series.triangleSize.height);\n\t            series.labelBound = new helper_1.Rect(accumulationBound.x, accumulationBound.y, accumulationBound.width + accumulationBound.x, accumulationBound.height + accumulationBound.y);\n\t            series.accumulationBound = accumulationBound;\n\t            if (visible && position === 'Outside') {\n\t                series.labelBound = new helper_1.Rect(Infinity, Infinity, -Infinity, -Infinity);\n\t            }\n\t        };\n\t        return TriangularBase;\n\t    }(accumulation_base_1.AccumulationBase));\n\t    exports.TriangularBase = TriangularBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(77)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, acc_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationBase = (function () {\n\t        function AccumulationBase(accumulation) {\n\t            this.accumulation = accumulation;\n\t        }\n\t        Object.defineProperty(AccumulationBase.prototype, \"center\", {\n\t            get: function () {\n\t                return this.pieCenter || (this.accumulation.visibleSeries[0].type === 'Pie' ?\n\t                    this.accumulation.pieSeriesModule.center : null);\n\t            },\n\t            set: function (value) {\n\t                this.pieCenter = value;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(AccumulationBase.prototype, \"radius\", {\n\t            get: function () {\n\t                return this.pieRadius !== undefined ? this.pieRadius :\n\t                    this.accumulation.pieSeriesModule.radius;\n\t            },\n\t            set: function (value) {\n\t                this.pieRadius = value;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(AccumulationBase.prototype, \"labelRadius\", {\n\t            get: function () {\n\t                return this.pieLabelRadius !== undefined ? this.pieLabelRadius :\n\t                    this.accumulation.pieSeriesModule.labelRadius;\n\t            },\n\t            set: function (value) {\n\t                this.pieLabelRadius = value;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        AccumulationBase.prototype.isCircular = function () {\n\t            return this.accumulation.type === 'Pie';\n\t        };\n\t        AccumulationBase.prototype.getTooltipPoint = function (e, accumulation, x, y) {\n\t            var target = e.target;\n\t            target = accumulation.isTouch ? document.elementFromPoint(x, y) : target;\n\t            var id = target.id.split(accumulation.element.id + '_Series_');\n\t            if (id[1]) {\n\t                var seriesIndex = parseInt(id[1].split('_Point_')[0], 10);\n\t                var pointIndex = parseInt(id[1].split('_Point_')[1], 10);\n\t                if (!ej2_base_1.isNullOrUndefined(seriesIndex) && !isNaN(seriesIndex) && !ej2_base_1.isNullOrUndefined(pointIndex) && !isNaN(pointIndex)) {\n\t                    var series = this.getSeriesFromIndex(seriesIndex, accumulation.visibleSeries);\n\t                    if (series.enableTooltip) {\n\t                        accumulation.accumulationTooltipModule.renderTooltip(series.points[pointIndex], series.index);\n\t                    }\n\t                }\n\t            }\n\t            else if (accumulation.accumulationTooltipModule && accumulation.accumulationTooltipModule.tooltip && !this.isDataLabel(target)) {\n\t                accumulation.accumulationTooltipModule.tooltip.close();\n\t            }\n\t        };\n\t        AccumulationBase.prototype.isDataLabel = function (target) {\n\t            if (target.id.indexOf(this.accumulation.element.id + '_datalabel_Series_') > -1) {\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationBase.prototype.getSeriesFromIndex = function (index, visibleSeries) {\n\t            return visibleSeries[0];\n\t        };\n\t        AccumulationBase.prototype.processExplode = function (event) {\n\t            if (event.target.id.indexOf('_Series_') > -1 || event.target.id.indexOf('_datalabel_') > -1) {\n\t                var pointIndex = acc_base_1.indexFinder(event.target.id).point;\n\t                if (isNaN(pointIndex) || (event.target.id.indexOf('_datalabel_') > -1 &&\n\t                    this.accumulation.visibleSeries[0].points[pointIndex].labelPosition === 'Outside')) {\n\t                    return null;\n\t                }\n\t                this.explodePoints(pointIndex, this.accumulation);\n\t                this.deExplodeAll(pointIndex);\n\t            }\n\t        };\n\t        AccumulationBase.prototype.invokeExplode = function () {\n\t            if (this.accumulation.visibleSeries[0].explodeAll) {\n\t                for (var _i = 0, _a = this.accumulation.visibleSeries[0].points; _i < _a.length; _i++) {\n\t                    var point = _a[_i];\n\t                    this.explodePoints(point.index, this.accumulation);\n\t                }\n\t            }\n\t            else if (!ej2_base_1.isNullOrUndefined(this.accumulation.visibleSeries[0].explodeIndex)) {\n\t                this.explodePoints(this.accumulation.visibleSeries[0].explodeIndex, this.accumulation);\n\t            }\n\t            if (this.accumulation.accumulationSelectionModule && this.accumulation.selectionMode !== 'None' &&\n\t                this.accumulation.accumulationSelectionModule.selectedDataIndexes.length) {\n\t                for (var _b = 0, _c = this.accumulation.accumulationSelectionModule.selectedDataIndexes; _b < _c.length; _b++) {\n\t                    var index = _c[_b];\n\t                    this.explodePoints(index.point, this.accumulation, true);\n\t                    this.deExplodeAll(index.point);\n\t                }\n\t            }\n\t        };\n\t        AccumulationBase.prototype.deExplodeAll = function (index) {\n\t            var pointId = this.accumulation.element.id + '_Series_0_Point_';\n\t            var points = this.accumulation.visibleSeries[0].points;\n\t            for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n\t                var currentPoint = points_1[_i];\n\t                if (index !== currentPoint.index) {\n\t                    this.deExplodeSlice(currentPoint.index, pointId, this.center);\n\t                }\n\t            }\n\t        };\n\t        AccumulationBase.prototype.explodePoints = function (index, chart, explode) {\n\t            if (explode === void 0) { explode = false; }\n\t            var pointId = this.accumulation.element.id + '_Series_0_Point_';\n\t            var translate;\n\t            var points = this.accumulation.visibleSeries[0].points;\n\t            var point = acc_base_1.pointByIndex(index, this.accumulation.visibleSeries[0].points);\n\t            if (ej2_base_1.isNullOrUndefined(point)) {\n\t                return null;\n\t            }\n\t            if (!this.isCircular()) {\n\t                translate = { x: chart.explodeDistance, y: 0 };\n\t            }\n\t            else {\n\t                translate = helper_1.degreeToLocation(point.midAngle, chart.explodeDistance, this.center);\n\t            }\n\t            if (this.isExplode(pointId + index) || explode) {\n\t                this.explodeSlice(index, translate, pointId, this.center || { x: 0, y: 0 });\n\t            }\n\t            else {\n\t                this.deExplodeSlice(index, pointId, this.center);\n\t            }\n\t        };\n\t        AccumulationBase.prototype.isExplode = function (id) {\n\t            var element = helper_1.getElement(id);\n\t            if (element && (element.getAttribute('transform') === 'translate(0, 0)' || element.getAttribute('transform') === null ||\n\t                element.getAttribute('transform') === 'translate(0)')) {\n\t                return true;\n\t            }\n\t            else {\n\t                return false;\n\t            }\n\t        };\n\t        AccumulationBase.prototype.deExplodeSlice = function (index, sliceId, center) {\n\t            var position = 'translate(0, 0)';\n\t            this.setTranslate(index, sliceId, position);\n\t        };\n\t        AccumulationBase.prototype.setTranslate = function (index, sliceId, position) {\n\t            this.setElementTransform(sliceId + index, position);\n\t            if (this.accumulation.visibleSeries[0].dataLabel.visible) {\n\t                sliceId = this.accumulation.element.id + '_datalabel_Series_0_';\n\t                this.setElementTransform(sliceId + 'shape_' + index, position);\n\t                this.setElementTransform(sliceId + 'text_' + index, position);\n\t                this.setElementTransform(sliceId + 'connector_' + index, position);\n\t            }\n\t        };\n\t        AccumulationBase.prototype.setElementTransform = function (id, position) {\n\t            var element = helper_1.getElement(id);\n\t            if (element) {\n\t                element.setAttribute('transform', position);\n\t            }\n\t        };\n\t        AccumulationBase.prototype.explodeSlice = function (index, translate, sliceId, center) {\n\t            var position = 'translate(' + (translate.x - center.x) + ', ' + (translate.y - center.y) + ')';\n\t            this.setTranslate(index, sliceId, position);\n\t        };\n\t        return AccumulationBase;\n\t    }());\n\t    exports.AccumulationBase = AccumulationBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(9), __webpack_require__(3), __webpack_require__(5), __webpack_require__(11), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, base_1, helper_1, constants_1, theme_1, helper_2) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationAnnotationSettings = (function (_super) {\n\t        __extends(AccumulationAnnotationSettings, _super);\n\t        function AccumulationAnnotationSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccumulationAnnotationSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationAnnotationSettings.prototype, \"content\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], AccumulationAnnotationSettings.prototype, \"x\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], AccumulationAnnotationSettings.prototype, \"y\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Pixel')\n\t    ], AccumulationAnnotationSettings.prototype, \"coordinateUnits\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Chart')\n\t    ], AccumulationAnnotationSettings.prototype, \"region\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Middle')\n\t    ], AccumulationAnnotationSettings.prototype, \"verticalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Center')\n\t    ], AccumulationAnnotationSettings.prototype, \"horizontalAlignment\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationAnnotationSettings.prototype, \"description\", void 0);\n\t    exports.AccumulationAnnotationSettings = AccumulationAnnotationSettings;\n\t    var AccumulationDataLabelSettings = (function (_super) {\n\t        __extends(AccumulationDataLabelSettings, _super);\n\t        function AccumulationDataLabelSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccumulationDataLabelSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccumulationDataLabelSettings.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationDataLabelSettings.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('transparent')\n\t    ], AccumulationDataLabelSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Inside')\n\t    ], AccumulationDataLabelSettings.prototype, \"position\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], AccumulationDataLabelSettings.prototype, \"rx\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(5)\n\t    ], AccumulationDataLabelSettings.prototype, \"ry\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ width: null, color: null }, base_1.Border)\n\t    ], AccumulationDataLabelSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ size: '11px', color: null }, base_1.Font)\n\t    ], AccumulationDataLabelSettings.prototype, \"font\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Connector)\n\t    ], AccumulationDataLabelSettings.prototype, \"connectorStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationDataLabelSettings.prototype, \"template\", void 0);\n\t    exports.AccumulationDataLabelSettings = AccumulationDataLabelSettings;\n\t    var AccumulationTooltipSettings = (function (_super) {\n\t        __extends(AccumulationTooltipSettings, _super);\n\t        function AccumulationTooltipSettings() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        return AccumulationTooltipSettings;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccumulationTooltipSettings.prototype, \"enable\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], AccumulationTooltipSettings.prototype, \"enableAnimation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationTooltipSettings.prototype, \"format\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('#FFFFFF')\n\t    ], AccumulationTooltipSettings.prototype, \"fill\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: null }, base_1.Border)\n\t    ], AccumulationTooltipSettings.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationTooltipSettings.prototype, \"template\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.tooltipLabelFont, base_1.Font)\n\t    ], AccumulationTooltipSettings.prototype, \"textStyle\", void 0);\n\t    exports.AccumulationTooltipSettings = AccumulationTooltipSettings;\n\t    var AccPoints = (function () {\n\t        function AccPoints() {\n\t            this.visible = true;\n\t            this.symbolLocation = null;\n\t            this.region = null;\n\t            this.labelRegion = null;\n\t            this.labelVisible = true;\n\t        }\n\t        return AccPoints;\n\t    }());\n\t    exports.AccPoints = AccPoints;\n\t    var AccumulationSeries = (function (_super) {\n\t        __extends(AccumulationSeries, _super);\n\t        function AccumulationSeries() {\n\t            var _this = _super !== null && _super.apply(this, arguments) || this;\n\t            _this.points = [];\n\t            _this.sumOfPoints = 0;\n\t            return _this;\n\t        }\n\t        AccumulationSeries.prototype.refreshDataManager = function (accumulation) {\n\t            var _this = this;\n\t            if (ej2_base_2.isNullOrUndefined(this.query)) {\n\t                this.dataManagerSuccess({ result: this.dataSource, count: this.dataSource.length }, accumulation);\n\t                return;\n\t            }\n\t            var dataManager = this.dataModule.getData(this.dataModule.generateQuery().requiresCount());\n\t            dataManager.then(function (e) { return _this.dataManagerSuccess(e, accumulation); });\n\t        };\n\t        AccumulationSeries.prototype.dataManagerSuccess = function (e, accumulation) {\n\t            var argsData = {\n\t                name: constants_1.seriesRender, series: this, data: e.result,\n\t            };\n\t            accumulation.trigger(constants_1.seriesRender, argsData);\n\t            this.resultData = e.result;\n\t            this.getPoints(e.result, accumulation);\n\t            if (++accumulation.seriesCounts === accumulation.visibleSeries.length) {\n\t                accumulation.refreshChart();\n\t            }\n\t        };\n\t        AccumulationSeries.prototype.getPoints = function (result, accumulation) {\n\t            var length = Object.keys(result).length;\n\t            this.sumOfPoints = 0;\n\t            if (length === 0) {\n\t                return null;\n\t            }\n\t            this.findSumOfPoints(result);\n\t            this.points = [];\n\t            this.sumOfClub = 0;\n\t            var point;\n\t            var colors = this.palettes.length ? this.palettes : theme_1.getSeriesColor(accumulation.theme);\n\t            var clubValue = helper_1.stringToNumber(this.groupTo, this.sumOfPoints);\n\t            for (var i = 0; i < length; i++) {\n\t                point = this.setPoints(result, i, colors);\n\t                var currentY = point.y;\n\t                if (!this.isClub(point, clubValue)) {\n\t                    if (ej2_base_2.isNullOrUndefined(point.y)) {\n\t                        point.visible = false;\n\t                    }\n\t                    this.pushPoints(point, colors);\n\t                }\n\t            }\n\t            this.lastGroupTo = this.groupTo;\n\t            if (this.sumOfClub > 0) {\n\t                var clubPoint = new AccPoints();\n\t                clubPoint.x = 'Others';\n\t                clubPoint.y = this.sumOfClub;\n\t                clubPoint.text = clubPoint.originalText = clubPoint.x + ': ' + this.sumOfClub;\n\t                this.pushPoints(clubPoint, colors);\n\t            }\n\t        };\n\t        AccumulationSeries.prototype.pushPoints = function (point, colors) {\n\t            point.index = this.points.length;\n\t            point.color = point.color || colors[point.index % colors.length];\n\t            this.points.push(point);\n\t        };\n\t        AccumulationSeries.prototype.isClub = function (point, clubValue) {\n\t            if (Math.abs(point.y) <= clubValue && !ej2_base_2.isNullOrUndefined(clubValue)) {\n\t                this.sumOfClub += Math.abs(point.y);\n\t                return true;\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationSeries.prototype.findSumOfPoints = function (result) {\n\t            var length = Object.keys(result).length;\n\t            for (var i = 0; i < length; i++) {\n\t                if (!ej2_base_2.isNullOrUndefined(result[i][this.yName])) {\n\t                    this.sumOfPoints += Math.abs(result[i][this.yName]);\n\t                }\n\t            }\n\t        };\n\t        AccumulationSeries.prototype.setPoints = function (data, i, colors) {\n\t            var point = new AccPoints();\n\t            point.x = data[i][this.xName];\n\t            point.y = data[i][this.yName];\n\t            point.text = point.originalText = data[i][this.dataLabel.name];\n\t            this.setAccEmptyPoint(point, i, data, colors);\n\t            return point;\n\t        };\n\t        AccumulationSeries.prototype.renderSeries = function (accumulation) {\n\t            var seriesGroup = accumulation.renderer.createGroup({ id: accumulation.element.id + '_Series_' + this.index });\n\t            this.renderPoints(accumulation, seriesGroup);\n\t            var datalabelGroup;\n\t            if (accumulation.accumulationDataLabelModule && this.dataLabel.visible) {\n\t                datalabelGroup = accumulation.renderer.createGroup({ id: accumulation.element.id + '_datalabel_Series_' + this.index });\n\t                datalabelGroup.style.visibility =\n\t                    (this.animation.enable && accumulation.animateSeries && this.type === 'Pie') ? 'hidden' : 'visible';\n\t                this.renderDataLabel(accumulation, datalabelGroup);\n\t            }\n\t            if (this.type === 'Pie') {\n\t                this.findMaxBounds(this.labelBound, this.accumulationBound);\n\t                accumulation.pieSeriesModule.animateSeries(accumulation, this.animation, this, seriesGroup);\n\t            }\n\t            if (accumulation.accumulationLegendModule) {\n\t                this.labelBound.x -= accumulation.explodeDistance;\n\t                this.labelBound.y -= accumulation.explodeDistance;\n\t                this.labelBound.height += (accumulation.explodeDistance - this.labelBound.y);\n\t                this.labelBound.width += (accumulation.explodeDistance - this.labelBound.x);\n\t            }\n\t        };\n\t        AccumulationSeries.prototype.renderPoints = function (accumulation, seriesGroup) {\n\t            var pointId = accumulation.element.id + '_Series_' + this.index + '_Point_';\n\t            var option;\n\t            for (var _i = 0, _a = this.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                var argsData = {\n\t                    cancel: false, name: constants_1.pointRender, series: this, point: point, fill: point.color,\n\t                    border: this.isEmpty(point) ? { width: this.emptyPointSettings.border.width, color: this.emptyPointSettings.border.color } :\n\t                        { width: this.border.width, color: this.border.color }\n\t                };\n\t                accumulation.trigger(constants_1.pointRender, argsData);\n\t                point.color = argsData.fill;\n\t                if (point.visible) {\n\t                    option = new helper_1.PathOption(pointId + point.index, point.color, argsData.border.width || 1, argsData.border.color || point.color, 1, '', '');\n\t                    accumulation[(helper_2.firstToLowerCase(this.type) + 'SeriesModule')].\n\t                        renderPoint(point, this, accumulation, option);\n\t                    seriesGroup.appendChild(accumulation.renderer.drawPath(option));\n\t                }\n\t            }\n\t            accumulation.getSeriesElement().appendChild(seriesGroup);\n\t        };\n\t        AccumulationSeries.prototype.renderDataLabel = function (accumulation, datalabelGroup) {\n\t            accumulation.accumulationDataLabelModule.findAreaRect();\n\t            var element = ej2_base_1.createElement('div', {\n\t                id: accumulation.element.id + '_Series_0' + '_DataLabelCollections'\n\t            });\n\t            for (var _i = 0, _a = this.points; _i < _a.length; _i++) {\n\t                var point = _a[_i];\n\t                if (point.visible) {\n\t                    accumulation.accumulationDataLabelModule.renderDataLabel(point, this.dataLabel, datalabelGroup, this.points, this.index, element);\n\t                }\n\t            }\n\t            if (this.dataLabel.template !== null && element.childElementCount) {\n\t                helper_2.getElement(accumulation.element.id + '_Secondary_Element').appendChild(element);\n\t            }\n\t            accumulation.getSeriesElement().appendChild(datalabelGroup);\n\t        };\n\t        AccumulationSeries.prototype.findMaxBounds = function (totalbound, bound) {\n\t            totalbound.x = bound.x < totalbound.x ? bound.x : totalbound.x;\n\t            totalbound.y = bound.y < totalbound.y ? bound.y : totalbound.y;\n\t            totalbound.height = (bound.y + bound.height) > totalbound.height ? (bound.y + bound.height) : totalbound.height;\n\t            totalbound.width = (bound.x + bound.width) > totalbound.width ? (bound.x + bound.width) : totalbound.width;\n\t        };\n\t        AccumulationSeries.prototype.setAccEmptyPoint = function (point, i, data, colors) {\n\t            if (!ej2_base_2.isNullOrUndefined(point.y)) {\n\t                return null;\n\t            }\n\t            point.color = this.emptyPointSettings.fill || point.color;\n\t            switch (this.emptyPointSettings.mode) {\n\t                case 'Zero':\n\t                    point.y = 0;\n\t                    point.visible = true;\n\t                    break;\n\t                case 'Average':\n\t                    var previous = data[i - 1] ? (data[i - 1][this.yName] || 0) : 0;\n\t                    var next = data[i + 1] ? (data[i + 1][this.yName] || 0) : 0;\n\t                    point.y = (Math.abs(previous) + Math.abs(next)) / 2;\n\t                    this.sumOfPoints += point.y;\n\t                    point.visible = true;\n\t                    break;\n\t                case 'Drop':\n\t                    point.visible = false;\n\t                    break;\n\t            }\n\t        };\n\t        AccumulationSeries.prototype.isEmpty = function (point) {\n\t            return point.color === this.emptyPointSettings.fill;\n\t        };\n\t        return AccumulationSeries;\n\t    }(ej2_base_1.ChildProperty));\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], AccumulationSeries.prototype, \"dataSource\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property()\n\t    ], AccumulationSeries.prototype, \"query\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], AccumulationSeries.prototype, \"xName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], AccumulationSeries.prototype, \"name\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('')\n\t    ], AccumulationSeries.prototype, \"yName\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], AccumulationSeries.prototype, \"visible\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: null, width: 0 }, base_1.Border)\n\t    ], AccumulationSeries.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(null, base_1.Animation)\n\t    ], AccumulationSeries.prototype, \"animation\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('SeriesType')\n\t    ], AccumulationSeries.prototype, \"legendShape\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationSeries.prototype, \"selectionStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationSeries.prototype, \"groupTo\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, AccumulationDataLabelSettings)\n\t    ], AccumulationSeries.prototype, \"dataLabel\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property([])\n\t    ], AccumulationSeries.prototype, \"palettes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], AccumulationSeries.prototype, \"startAngle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(360)\n\t    ], AccumulationSeries.prototype, \"endAngle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('80%')\n\t    ], AccumulationSeries.prototype, \"radius\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('0')\n\t    ], AccumulationSeries.prototype, \"innerRadius\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Pie')\n\t    ], AccumulationSeries.prototype, \"type\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], AccumulationSeries.prototype, \"enableTooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccumulationSeries.prototype, \"explode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('30%')\n\t    ], AccumulationSeries.prototype, \"explodeOffset\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccumulationSeries.prototype, \"explodeAll\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationSeries.prototype, \"explodeIndex\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ mode: 'Drop' }, base_1.EmptyPointSettings)\n\t    ], AccumulationSeries.prototype, \"emptyPointSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(0)\n\t    ], AccumulationSeries.prototype, \"gapRatio\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('80%')\n\t    ], AccumulationSeries.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('80%')\n\t    ], AccumulationSeries.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('20%')\n\t    ], AccumulationSeries.prototype, \"neckWidth\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('20%')\n\t    ], AccumulationSeries.prototype, \"neckHeight\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Linear')\n\t    ], AccumulationSeries.prototype, \"pyramidMode\", void 0);\n\t    exports.AccumulationSeries = AccumulationSeries;\n\t    function getSeriesFromIndex(index, visibleSeries) {\n\t        for (var _i = 0, visibleSeries_1 = visibleSeries; _i < visibleSeries_1.length; _i++) {\n\t            var series = visibleSeries_1[_i];\n\t            if (index === series.index) {\n\t                return series;\n\t            }\n\t        }\n\t        return visibleSeries[0];\n\t    }\n\t    exports.getSeriesFromIndex = getSeriesFromIndex;\n\t    function pointByIndex(index, points) {\n\t        for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n\t            var point = points_1[_i];\n\t            if (point.index === index) {\n\t                return point;\n\t            }\n\t        }\n\t        return null;\n\t    }\n\t    exports.pointByIndex = pointByIndex;\n\t    function indexFinder(id) {\n\t        var ids = ['NaN', 'NaN'];\n\t        if (id.indexOf('_Point_') > -1) {\n\t            ids = id.split('_Series_')[1].split('_Point_');\n\t        }\n\t        else if (id.indexOf('_shape_') > -1) {\n\t            ids = id.split('_shape_');\n\t            ids[0] = '0';\n\t        }\n\t        else if (id.indexOf('_text_') > -1) {\n\t            ids = id.split('_text_');\n\t            ids[0] = '0';\n\t        }\n\t        return new base_1.Index(parseInt(ids[0], 10), parseInt(ids[1], 10));\n\t    }\n\t    exports.indexFinder = indexFinder;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n\t    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n\t    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n\t    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n\t    return c > 3 && r && Object.defineProperty(target, key, r), r;\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(9), __webpack_require__(77), __webpack_require__(11), __webpack_require__(5), __webpack_require__(5), __webpack_require__(20), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(15), __webpack_require__(76), __webpack_require__(79), __webpack_require__(77), __webpack_require__(22)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, base_1, acc_base_1, theme_1, constants_1, constants_2, legend_1, helper_1, helper_2, helper_3, data_1, accumulation_base_1, pie_series_1, acc_base_2, export_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationChart = (function (_super) {\n\t        __extends(AccumulationChart, _super);\n\t        function AccumulationChart(options, element) {\n\t            var _this = _super.call(this, options, element) || this;\n\t            _this.explodeDistance = 0;\n\t            return _this;\n\t        }\n\t        Object.defineProperty(AccumulationChart.prototype, \"type\", {\n\t            get: function () {\n\t                if (this.series && this.series.length) {\n\t                    return this.series[0].type;\n\t                }\n\t                return 'Pie';\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        AccumulationChart.prototype.preRender = function () {\n\t            this.unWireEvents();\n\t            this.setCulture();\n\t            this.animateSeries = true;\n\t            helper_2.calculateSize(this);\n\t            this.wireEvents();\n\t        };\n\t        AccumulationChart.prototype.render = function () {\n\t            this.trigger(constants_1.load, { accumulation: this });\n\t            this.accBaseModule = new accumulation_base_1.AccumulationBase(this);\n\t            this.pieSeriesModule = new pie_series_1.PieSeries(this);\n\t            this.calculateVisibleSeries();\n\t            this.processData();\n\t        };\n\t        AccumulationChart.prototype.unWireEvents = function () {\n\t            var isIE11Pointer = ej2_base_2.Browser.isPointer;\n\t            var start = ej2_base_2.Browser.touchStartEvent;\n\t            var move = ej2_base_2.Browser.touchMoveEvent;\n\t            var stop = ej2_base_2.Browser.touchEndEvent;\n\t            var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n\t            ej2_base_2.EventHandler.remove(this.element, move, this.accumulationMouseMove);\n\t            ej2_base_2.EventHandler.remove(this.element, stop, this.accumulationMouseEnd);\n\t            ej2_base_2.EventHandler.remove(this.element, start, this.accumulationMouseStart);\n\t            ej2_base_2.EventHandler.remove(this.element, 'click', this.accumulationOnMouseClick);\n\t            ej2_base_2.EventHandler.remove(this.element, 'contextmenu', this.accumulationRightClick);\n\t            ej2_base_2.EventHandler.remove(this.element, cancel, this.accumulationMouseLeave);\n\t            window.removeEventListener((ej2_base_2.Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.accumulationResize);\n\t        };\n\t        AccumulationChart.prototype.wireEvents = function () {\n\t            var isIE11Pointer = ej2_base_2.Browser.isPointer;\n\t            var start = ej2_base_2.Browser.touchStartEvent;\n\t            var stop = ej2_base_2.Browser.touchEndEvent;\n\t            var move = ej2_base_2.Browser.touchMoveEvent;\n\t            var cancel = isIE11Pointer ? 'pointerleave' : 'mouseleave';\n\t            ej2_base_2.EventHandler.add(this.element, move, this.accumulationMouseMove, this);\n\t            ej2_base_2.EventHandler.add(this.element, stop, this.accumulationMouseEnd, this);\n\t            ej2_base_2.EventHandler.add(this.element, start, this.accumulationMouseStart, this);\n\t            ej2_base_2.EventHandler.add(this.element, 'click', this.accumulationOnMouseClick, this);\n\t            ej2_base_2.EventHandler.add(this.element, 'contextmenu', this.accumulationRightClick, this);\n\t            ej2_base_2.EventHandler.add(this.element, cancel, this.accumulationMouseLeave, this);\n\t            window.addEventListener((ej2_base_2.Browser.isTouch && ('orientation' in window && 'onorientationchange' in window)) ? 'orientationchange' : 'resize', this.accumulationResize.bind(this));\n\t            new ej2_base_2.Touch(this.element);\n\t            this.setStyle(this.element);\n\t        };\n\t        AccumulationChart.prototype.setMouseXY = function (e) {\n\t            var pageX;\n\t            var pageY;\n\t            if (e.type.indexOf('touch') > -1) {\n\t                this.isTouch = true;\n\t                var touchArg = e;\n\t                pageY = touchArg.changedTouches[0].clientY;\n\t                pageX = touchArg.changedTouches[0].clientX;\n\t            }\n\t            else {\n\t                this.isTouch = e.pointerType === 'touch' || e.pointerType === '2';\n\t                pageX = e.clientX;\n\t                pageY = e.clientY;\n\t            }\n\t            this.mouseY = pageY;\n\t            this.mouseX = pageX;\n\t        };\n\t        AccumulationChart.prototype.accumulationMouseEnd = function (e) {\n\t            this.setMouseXY(e);\n\t            this.trigger(constants_2.chartMouseUp, { target: e.target.id, x: this.mouseX, y: this.mouseY });\n\t            if (this.isTouch) {\n\t                this.titleTooltip(e, this.mouseX, this.mouseY, this.isTouch);\n\t                if (this.accumulationTooltipModule && this.accumulationTooltipModule.tooltip) {\n\t                    this.accBaseModule.getTooltipPoint(e, this, this.mouseX, this.mouseY);\n\t                    this.accumulationTooltipModule.fadeOutTooltip();\n\t                }\n\t                if (this.accumulationDataLabelModule && this.visibleSeries[0].dataLabel.visible) {\n\t                    this.accumulationDataLabelModule.move(e, this.mouseX, this.mouseY, this.isTouch);\n\t                }\n\t                if (this.accumulationLegendModule && this.legendSettings.visible) {\n\t                    this.accumulationLegendModule.move(e);\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.removeSvgOffset = function (x, y) {\n\t            var rect = this.element.getBoundingClientRect();\n\t            var svgRect = helper_3.getElement(this.element.id + '_svg').getBoundingClientRect();\n\t            return { x: (x - rect.left) - Math.max(svgRect.left - rect.left, 0), y: (y - rect.top) - Math.max(svgRect.top - rect.top, 0) };\n\t        };\n\t        AccumulationChart.prototype.accumulationMouseStart = function (e) {\n\t            this.setMouseXY(e);\n\t            this.trigger(constants_1.chartMouseDown, { target: e.target.id, x: this.mouseX, y: this.mouseY });\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.accumulationResize = function (e) {\n\t            var _this = this;\n\t            var args = {\n\t                accumulation: this,\n\t                previousSize: new helper_1.Size(this.availableSize.width, this.availableSize.height),\n\t                name: constants_2.resized,\n\t                currentSize: new helper_1.Size(0, 0)\n\t            };\n\t            if (this.resizeTo) {\n\t                clearTimeout(this.resizeTo);\n\t            }\n\t            this.resizeTo = setTimeout(function () {\n\t                if (_this.isDestroyed) {\n\t                    clearTimeout(_this.resizeTo);\n\t                    return;\n\t                }\n\t                helper_2.calculateSize(_this);\n\t                args.currentSize = _this.availableSize;\n\t                _this.trigger(constants_2.resized, args);\n\t                _this.refreshSeries();\n\t                _this.refreshChart();\n\t            }, 500);\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.export = function (type, fileName) {\n\t            var exportChart = new export_1.ExportUtils(this);\n\t            exportChart.export(type, fileName);\n\t        };\n\t        AccumulationChart.prototype.print = function (id) {\n\t            var exportChart = new export_1.ExportUtils(this);\n\t            exportChart.print(id);\n\t        };\n\t        AccumulationChart.prototype.setStyle = function (element) {\n\t            element.style.touchAction = 'element';\n\t            element.style.msTouchAction = 'element';\n\t            element.style.msContentZooming = 'none';\n\t            element.style.msUserSelect = 'none';\n\t            element.style.webkitUserSelect = 'none';\n\t            element.style.position = 'relative';\n\t        };\n\t        AccumulationChart.prototype.accumulationMouseMove = function (e) {\n\t            this.setMouseXY(e);\n\t            this.trigger(constants_2.chartMouseMove, { target: e.target.id, x: this.mouseX, y: this.mouseY });\n\t            if (this.accumulationLegendModule && this.legendSettings.visible) {\n\t                this.accumulationLegendModule.move(e);\n\t            }\n\t            if (this.accumulationDataLabelModule && this.visibleSeries[0] && this.visibleSeries[0].dataLabel.visible) {\n\t                this.accumulationDataLabelModule.move(e, this.mouseX, this.mouseY);\n\t            }\n\t            if (this.accumulationTooltipModule && this.accBaseModule && this.tooltip.enable && !this.isTouch) {\n\t                this.accBaseModule.getTooltipPoint(e, this, this.mouseX, this.mouseY);\n\t            }\n\t            if (!this.isTouch) {\n\t                this.titleTooltip(e, this.mouseX, this.mouseY);\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.titleTooltip = function (event, x, y, isTouch) {\n\t            var targetId = event.target.id;\n\t            if ((event.target.textContent.indexOf('...') > -1) && (targetId === (this.element.id + '_title'))) {\n\t                helper_1.showTooltip(this.title, x, y, this.element.offsetWidth, this.element.id + '_EJ2_Title_Tooltip', helper_3.getElement(this.element.id + '_Secondary_Element'), isTouch);\n\t            }\n\t            else {\n\t                helper_2.removeElement(this.element.id + '_EJ2_Title_Tooltip');\n\t            }\n\t        };\n\t        AccumulationChart.prototype.accumulationOnMouseClick = function (e) {\n\t            this.setMouseXY(e);\n\t            if (this.accumulationLegendModule && this.legendSettings.visible) {\n\t                this.accumulationLegendModule.click(e);\n\t            }\n\t            if (this.selectionMode !== 'None' && this.accumulationSelectionModule) {\n\t                this.accumulationSelectionModule.calculateSelectedElements(this, e);\n\t            }\n\t            if (this.visibleSeries[0].explode) {\n\t                this.accBaseModule.processExplode(e);\n\t            }\n\t            this.trigger(constants_1.chartMouseClick, { target: e.target.id, x: this.mouseX, y: this.mouseY });\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.accumulationRightClick = function (event) {\n\t            if (event.buttons === 2 || event.pointerType === 'touch') {\n\t                event.preventDefault();\n\t                event.stopPropagation();\n\t                return false;\n\t            }\n\t            return true;\n\t        };\n\t        AccumulationChart.prototype.accumulationMouseLeave = function (e) {\n\t            this.setMouseXY(e);\n\t            this.trigger(constants_2.chartMouseLeave, { target: e.target.id, x: this.mouseX, y: this.mouseY });\n\t            if (this.accumulationTooltipModule && this.tooltip.enable) {\n\t                this.accumulationTooltipModule.tooltip.close();\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.setCulture = function () {\n\t            this.intl = new ej2_base_2.Internationalization();\n\t        };\n\t        AccumulationChart.prototype.createPieSvg = function () {\n\t            this.removeSvg();\n\t            helper_2.createSvg(this);\n\t        };\n\t        AccumulationChart.prototype.removeSvg = function () {\n\t            helper_2.removeElement(this.element.id + '_Secondary_Element');\n\t            if (this.svgObject) {\n\t                while (this.svgObject.childNodes.length > 0) {\n\t                    this.svgObject.removeChild(this.svgObject.firstChild);\n\t                }\n\t                if (!this.svgObject.hasChildNodes() && this.svgObject.parentNode) {\n\t                    ej2_base_3.remove(this.svgObject);\n\t                }\n\t            }\n\t            helper_2.removeElement('EJ2_legend_tooltip');\n\t            helper_2.removeElement('EJ2_datalabel_tooltip');\n\t        };\n\t        AccumulationChart.prototype.createSecondaryElement = function () {\n\t            this.element.appendChild(ej2_base_3.createElement('div', {\n\t                id: this.element.id + '_Secondary_Element',\n\t                styles: 'position: relative'\n\t            }));\n\t        };\n\t        AccumulationChart.prototype.calculateVisibleSeries = function () {\n\t            this.visibleSeries = [];\n\t            for (var i = 0, length_1 = this.series.length; i < length_1; i++) {\n\t                this.series[i].index = i;\n\t                if (this.series[i].type === this.type && this.visibleSeries.length === 0) {\n\t                    this.visibleSeries.push(this.series[i]);\n\t                    break;\n\t                }\n\t            }\n\t        };\n\t        AccumulationChart.prototype.processData = function () {\n\t            this.seriesCounts = 0;\n\t            for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                series.dataModule = new data_1.Data(series.dataSource, series.query);\n\t                series.refreshDataManager(this);\n\t            }\n\t        };\n\t        AccumulationChart.prototype.refreshChart = function () {\n\t            this.doGrouppingProcess();\n\t            this.createPieSvg();\n\t            this.calculateBounds();\n\t            this.renderElements();\n\t        };\n\t        AccumulationChart.prototype.doGrouppingProcess = function () {\n\t            var series = this.visibleSeries[0];\n\t            if (!ej2_base_3.isNullOrUndefined(series.resultData) && ((!ej2_base_3.isNullOrUndefined(series.lastGroupTo) &&\n\t                series.lastGroupTo !== series.groupTo))) {\n\t                series.getPoints(series.resultData, this);\n\t            }\n\t        };\n\t        AccumulationChart.prototype.calculateBounds = function () {\n\t            this.initialClipRect = new helper_1.Rect(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height);\n\t            helper_1.subtractRect(this.initialClipRect, new helper_1.Rect(0, helper_1.measureText(this.title, this.titleStyle).height, this.margin.right + this.margin.left, this.margin.bottom + this.margin.top));\n\t            this.calculateLegendBounds();\n\t        };\n\t        AccumulationChart.prototype.calculateLegendBounds = function () {\n\t            if (!this.accumulationLegendModule || !this.legendSettings.visible) {\n\t                return null;\n\t            }\n\t            this.accumulationLegendModule.getLegendOptions(this, this.visibleSeries);\n\t            this.accumulationLegendModule.calculateLegendBounds(this.initialClipRect, this.availableSize);\n\t        };\n\t        AccumulationChart.prototype.renderElements = function () {\n\t            this.renderBorder();\n\t            this.renderTitle();\n\t            this.createSecondaryElement();\n\t            this.renderSeries();\n\t            this.renderLegend();\n\t            this.element.appendChild(this.svgObject);\n\t            this.processSelection();\n\t            this.processExplode();\n\t            this.renderAnnotation();\n\t            this.setSecondaryElementPosition();\n\t            this.trigger('loaded', { accumulation: this });\n\t            this.animateSeries = false;\n\t        };\n\t        AccumulationChart.prototype.setSecondaryElementPosition = function () {\n\t            var tooltipParent = helper_3.getElement(this.element.id + '_Secondary_Element');\n\t            if (!tooltipParent) {\n\t                return;\n\t            }\n\t            var targetElement = ej2_base_3.createElement('div', {\n\t                id: this.element.id + '_pie_tooltip',\n\t                styles: 'position: absolute;background: transparent;height: 2px;width: 2px;'\n\t            });\n\t            tooltipParent.appendChild(targetElement);\n\t            var rect = this.element.getBoundingClientRect();\n\t            var svgRect = helper_3.getElement(this.element.id + '_svg').getBoundingClientRect();\n\t            tooltipParent.style.left = Math.max(svgRect.left - rect.left, 0) + 'px';\n\t            tooltipParent.style.top = Math.max(svgRect.top - rect.top, 0) + 'px';\n\t        };\n\t        AccumulationChart.prototype.renderAnnotation = function () {\n\t            if (this.annotationModule) {\n\t                this.annotationModule.renderAnnotations(helper_3.getElement(this.element.id + '_Secondary_Element'));\n\t            }\n\t        };\n\t        AccumulationChart.prototype.processExplode = function () {\n\t            if (!this.visibleSeries[0].explode) {\n\t                return null;\n\t            }\n\t            this.accBaseModule.invokeExplode();\n\t        };\n\t        AccumulationChart.prototype.renderSeries = function () {\n\t            this.svgObject.appendChild(this.renderer.createGroup({ id: this.element.id + '_SeriesCollection' }));\n\t            for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                if (series.visible && this[(helper_2.firstToLowerCase(series.type) + 'SeriesModule')]) {\n\t                    this[(helper_2.firstToLowerCase(series.type) + 'SeriesModule')].initProperties(this, series);\n\t                    series.renderSeries(this);\n\t                }\n\t            }\n\t        };\n\t        AccumulationChart.prototype.renderBorder = function () {\n\t            var padding = this.border.width;\n\t            this.svgObject.appendChild(this.renderer.drawRectangle(new helper_1.RectOption(this.element.id + '_border', this.background, this.border, 1, new helper_1.Rect(padding / 2, padding / 2, this.availableSize.width - padding, this.availableSize.height - padding))));\n\t        };\n\t        AccumulationChart.prototype.renderLegend = function () {\n\t            if (!this.accumulationLegendModule || !this.legendSettings.visible) {\n\t                return null;\n\t            }\n\t            if (this.accumulationLegendModule.legendCollections.length) {\n\t                if (this.visibleSeries[0].type === 'Pie') {\n\t                    this.accumulationLegendModule.getSmartLegendLocation(this.visibleSeries[0].labelBound, this.accumulationLegendModule.legendBounds, this.margin);\n\t                }\n\t                this.accumulationLegendModule.renderLegend(this, this.legendSettings, this.accumulationLegendModule.legendBounds);\n\t            }\n\t        };\n\t        AccumulationChart.prototype.processSelection = function () {\n\t            if (!this.accumulationSelectionModule || this.selectionMode === 'None') {\n\t                return null;\n\t            }\n\t            var selectedDataIndexes = ej2_base_3.extend([], this.accumulationSelectionModule.selectedDataIndexes, null, true);\n\t            this.accumulationSelectionModule.invokeSelection(this);\n\t            if (selectedDataIndexes.length > 0) {\n\t                this.accumulationSelectionModule.selectedDataIndexes = selectedDataIndexes;\n\t                this.accumulationSelectionModule.redrawSelection(this, this.selectionMode);\n\t            }\n\t        };\n\t        AccumulationChart.prototype.renderTitle = function () {\n\t            if (!this.title) {\n\t                return null;\n\t            }\n\t            var maxTitleSize = this.availableSize.width - this.margin.left - this.margin.right;\n\t            var trimmedTitle = helper_1.textTrim(maxTitleSize, this.title, this.titleStyle);\n\t            var elementSize = helper_1.measureText(trimmedTitle, this.titleStyle);\n\t            helper_2.textElement(new helper_2.TextOption(this.element.id + '_title', helper_3.titlePositionX(this.availableSize, this.margin.left, this.margin.left, this.titleStyle, elementSize), this.margin.top + (elementSize.height * 3 / 4), 'start', trimmedTitle, '', 'auto'), this.titleStyle, this.titleStyle.color, this.svgObject);\n\t        };\n\t        AccumulationChart.prototype.getSeriesElement = function () {\n\t            return this.svgObject.getElementsByTagName('g')[0];\n\t        };\n\t        AccumulationChart.prototype.refreshSeries = function () {\n\t            for (var _i = 0, _a = this.visibleSeries; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                this.refreshPoints(series.points);\n\t            }\n\t        };\n\t        AccumulationChart.prototype.refreshPoints = function (points) {\n\t            for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {\n\t                var point = points_1[_i];\n\t                point.labelPosition = null;\n\t                point.labelRegion = null;\n\t                point.labelVisible = true;\n\t            }\n\t        };\n\t        AccumulationChart.prototype.getModuleName = function () {\n\t            return 'accumulationchart';\n\t        };\n\t        AccumulationChart.prototype.destroy = function () {\n\t            this.unWireEvents();\n\t            _super.prototype.destroy.call(this);\n\t            this.element.classList.remove('e-accumulationchart');\n\t        };\n\t        AccumulationChart.prototype.requiredModules = function () {\n\t            var modules = [];\n\t            var enableAnnotation = false;\n\t            modules.push({\n\t                member: this.type + 'Series',\n\t                args: [this]\n\t            });\n\t            if (this.legendSettings.visible) {\n\t                modules.push({\n\t                    member: 'AccumulationLegend',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.findDatalabelVisibility()) {\n\t                modules.push({\n\t                    member: 'AccumulationDataLabel',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.tooltip.enable) {\n\t                modules.push({\n\t                    member: 'AccumulationTooltip',\n\t                    args: [this]\n\t                });\n\t            }\n\t            if (this.selectionMode !== 'None') {\n\t                modules.push({\n\t                    member: 'AccumulationSelection',\n\t                    args: [this]\n\t                });\n\t            }\n\t            enableAnnotation = this.annotations.some(function (value) {\n\t                return (value.content !== null);\n\t            });\n\t            if (enableAnnotation) {\n\t                modules.push({\n\t                    member: 'Annotation',\n\t                    args: [this, this.annotations]\n\t                });\n\t            }\n\t            return modules;\n\t        };\n\t        AccumulationChart.prototype.findDatalabelVisibility = function () {\n\t            for (var _i = 0, _a = this.series; _i < _a.length; _i++) {\n\t                var series = _a[_i];\n\t                if (series.dataLabel.visible) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationChart.prototype.getPersistData = function () {\n\t            return '';\n\t        };\n\t        AccumulationChart.prototype.onPropertyChanged = function (newProp, oldProp) {\n\t            var update = {\n\t                refreshElements: false, refreshBounds: false\n\t            };\n\t            for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n\t                var prop = _a[_i];\n\t                switch (prop) {\n\t                    case 'theme':\n\t                        this.animateSeries = true;\n\t                        break;\n\t                    case 'title':\n\t                        if (newProp.title === '' || oldProp.title === '') {\n\t                            update.refreshBounds = true;\n\t                        }\n\t                        else {\n\t                            update.refreshElements = true;\n\t                        }\n\t                        break;\n\t                    case 'height':\n\t                    case 'width':\n\t                    case 'margin':\n\t                        update.refreshBounds = true;\n\t                        break;\n\t                    case 'titleStyle':\n\t                        if (newProp.titleStyle && newProp.titleStyle.size) {\n\t                            update.refreshBounds = true;\n\t                        }\n\t                        else {\n\t                            update.refreshElements = true;\n\t                        }\n\t                        break;\n\t                    case 'legendSettings':\n\t                        update.refreshBounds = true;\n\t                        update.refreshElements = true;\n\t                        break;\n\t                    case 'background':\n\t                    case 'border':\n\t                    case 'annotations':\n\t                    case 'enableSmartLabels':\n\t                        update.refreshElements = true;\n\t                        break;\n\t                    case 'isMultiSelect':\n\t                    case 'selectedDataIndexes':\n\t                    case 'selectionMode':\n\t                        if (this.accumulationSelectionModule) {\n\t                            if (ej2_base_3.isNullOrUndefined(this.accumulationSelectionModule.selectedDataIndexes)) {\n\t                                this.accumulationSelectionModule.invokeSelection(this);\n\t                            }\n\t                            else {\n\t                                this.accumulationSelectionModule.redrawSelection(this, oldProp.selectionMode);\n\t                            }\n\t                        }\n\t                        break;\n\t                }\n\t            }\n\t            if (!update.refreshBounds && update.refreshElements) {\n\t                this.createPieSvg();\n\t                this.renderElements();\n\t            }\n\t            else if (update.refreshBounds) {\n\t                this.refreshSeries();\n\t                this.createPieSvg();\n\t                this.calculateBounds();\n\t                this.renderElements();\n\t            }\n\t        };\n\t        return AccumulationChart;\n\t    }(ej2_base_1.Component));\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationChart.prototype, \"width\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationChart.prototype, \"height\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(null)\n\t    ], AccumulationChart.prototype, \"title\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex(theme_1.Theme.chartTitleFont, base_1.Font)\n\t    ], AccumulationChart.prototype, \"titleStyle\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, legend_1.LegendSettings)\n\t    ], AccumulationChart.prototype, \"legendSettings\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, acc_base_1.AccumulationTooltipSettings)\n\t    ], AccumulationChart.prototype, \"tooltip\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('None')\n\t    ], AccumulationChart.prototype, \"selectionMode\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(false)\n\t    ], AccumulationChart.prototype, \"isMultiSelect\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([], base_1.Indexes)\n\t    ], AccumulationChart.prototype, \"selectedDataIndexes\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({}, base_1.Margin)\n\t    ], AccumulationChart.prototype, \"margin\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(true)\n\t    ], AccumulationChart.prototype, \"enableSmartLabels\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Complex({ color: '#DDDDDD', width: 0 }, base_1.Border)\n\t    ], AccumulationChart.prototype, \"border\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property(theme_1.Theme.chartBackgroundColor)\n\t    ], AccumulationChart.prototype, \"background\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([{}], acc_base_1.AccumulationSeries)\n\t    ], AccumulationChart.prototype, \"series\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Collection([{}], acc_base_2.AccumulationAnnotationSettings)\n\t    ], AccumulationChart.prototype, \"annotations\", void 0);\n\t    __decorate([\n\t        ej2_base_1.Property('Material')\n\t    ], AccumulationChart.prototype, \"theme\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"loaded\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"load\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"seriesRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"legendRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"textRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"tooltipRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"pointRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"annotationRender\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"beforePrint\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"chartMouseMove\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"chartMouseClick\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"animationComplete\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"chartMouseDown\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"chartMouseLeave\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"chartMouseUp\", void 0);\n\t    __decorate([\n\t        ej2_base_2.Event()\n\t    ], AccumulationChart.prototype, \"resized\", void 0);\n\t    AccumulationChart = __decorate([\n\t        ej2_base_1.NotifyPropertyChanges\n\t    ], AccumulationChart);\n\t    exports.AccumulationChart = AccumulationChart;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(3), __webpack_require__(80)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, helper_1, pie_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PieSeries = (function (_super) {\n\t        __extends(PieSeries, _super);\n\t        function PieSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        PieSeries.prototype.renderPoint = function (point, series, chart, option) {\n\t            var sum = series.sumOfPoints;\n\t            var degree = ((Math.abs(point.y) / sum) * (this.totalAngle));\n\t            option.d = this.getPathOption(point, degree);\n\t            point.midAngle = (this.startAngle - (degree / 2)) % 360;\n\t            point.endAngle = this.startAngle % 360;\n\t            point.symbolLocation = helper_1.degreeToLocation(point.midAngle, (this.radius + this.innerRadius) / 2, this.center);\n\t            return option;\n\t        };\n\t        PieSeries.prototype.getPathOption = function (point, degree) {\n\t            var path = this.getPathArc(this.center, this.startAngle % 360, (this.startAngle + degree) % 360, this.radius, this.innerRadius);\n\t            this.startAngle += degree;\n\t            return path;\n\t        };\n\t        PieSeries.prototype.animateSeries = function (accumulation, option, series, slice) {\n\t            var groupId = accumulation.element.id + 'SeriesGroup' + series.index;\n\t            if (series.animation.enable && accumulation.animateSeries) {\n\t                var clippath = accumulation.renderer.createClipPath({ id: groupId + '_clipPath' });\n\t                var path = new helper_1.PathOption(groupId + '_slice', 'transparent', 1, 'transparent', 1, '', '');\n\t                var clipslice = accumulation.renderer.drawPath(path);\n\t                clippath.appendChild(clipslice);\n\t                accumulation.svgObject.appendChild(clippath);\n\t                slice.setAttribute('style', 'clip-path:url(#' + clippath.id + ')');\n\t                this.doAnimation(clipslice, series);\n\t            }\n\t        };\n\t        PieSeries.prototype.getModuleName = function () {\n\t            return 'PieSeries';\n\t        };\n\t        PieSeries.prototype.destroy = function (accumulation) {\n\t        };\n\t        return PieSeries;\n\t    }(pie_base_1.PieBase));\n\t    exports.PieSeries = PieSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(5), __webpack_require__(76)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, constants_1, accumulation_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var PieBase = (function (_super) {\n\t        __extends(PieBase, _super);\n\t        function PieBase() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        PieBase.prototype.initProperties = function (chart, series) {\n\t            this.accumulation = chart;\n\t            var size = Math.min(chart.initialClipRect.width, chart.initialClipRect.height);\n\t            this.initAngles(series);\n\t            this.radius = helper_1.stringToNumber(series.radius, size / 2);\n\t            this.innerRadius = helper_1.stringToNumber(series.innerRadius, this.radius);\n\t            this.labelRadius = series.dataLabel.position === 'Inside' ? (((this.radius - this.innerRadius) / 2) + this.innerRadius) :\n\t                (this.radius + helper_1.stringToNumber(series.dataLabel.connectorStyle.length || '4%', size / 2));\n\t            chart.explodeDistance = series.explode ? helper_1.stringToNumber(series.explodeOffset, this.radius) : 0;\n\t            this.findCenter(chart, series);\n\t            this.defaultLabelBound(series, series.dataLabel.visible, series.dataLabel.position);\n\t            this.totalAngle -= 0.001;\n\t        };\n\t        PieBase.prototype.findCenter = function (accumulation, series) {\n\t            this.accumulation = accumulation;\n\t            this.center = {\n\t                x: helper_1.stringToNumber('50%', accumulation.initialClipRect.width) + (accumulation.initialClipRect.x),\n\t                y: helper_1.stringToNumber('50%', accumulation.initialClipRect.height) + (accumulation.initialClipRect.y)\n\t            };\n\t            var accumulationRect = this.getSeriesBound(series);\n\t            var accumulationRectCenter = new helper_1.ChartLocation(accumulationRect.x + accumulationRect.width / 2, accumulationRect.y + accumulationRect.height / 2);\n\t            this.center.x += (this.center.x - accumulationRectCenter.x);\n\t            this.center.y += (this.center.y - accumulationRectCenter.y);\n\t            this.accumulation.center = this.center;\n\t        };\n\t        PieBase.prototype.initAngles = function (series) {\n\t            this.totalAngle = (series.endAngle - series.startAngle) % 360;\n\t            this.startAngle = series.startAngle - 90;\n\t            this.totalAngle = this.totalAngle <= 0 ? (360 + this.totalAngle) : this.totalAngle;\n\t            this.startAngle = (this.startAngle < 0 ? (this.startAngle + 360) : this.startAngle) % 360;\n\t        };\n\t        PieBase.prototype.defaultLabelBound = function (series, visible, position) {\n\t            var accumulationBound = this.getSeriesBound(series);\n\t            series.accumulationBound = accumulationBound;\n\t            series.labelBound = new helper_1.Rect(accumulationBound.x, accumulationBound.y, accumulationBound.width + accumulationBound.x, accumulationBound.height + accumulationBound.y);\n\t            if (visible && position === 'Outside') {\n\t                series.labelBound = new helper_1.Rect(Infinity, Infinity, -Infinity, -Infinity);\n\t            }\n\t        };\n\t        PieBase.prototype.getSeriesBound = function (series) {\n\t            var rect = new helper_1.Rect(Infinity, Infinity, -Infinity, -Infinity);\n\t            this.initAngles(series);\n\t            var start = this.startAngle;\n\t            var total = this.totalAngle;\n\t            var end = (this.startAngle + total) % 360;\n\t            end = (end === 0) ? 360 : end;\n\t            series.findMaxBounds(rect, this.getRectFromAngle(start));\n\t            series.findMaxBounds(rect, this.getRectFromAngle(end));\n\t            series.findMaxBounds(rect, new helper_1.Rect(this.center.x, this.center.y, 0, 0));\n\t            var nextQuandrant = (Math.floor(start / 90) * 90 + 90) % 360;\n\t            var lastQuadrant = (Math.floor(end / 90) * 90) % 360;\n\t            lastQuadrant = (lastQuadrant === 0) ? 360 : lastQuadrant;\n\t            if (total >= 90 || lastQuadrant === nextQuandrant) {\n\t                series.findMaxBounds(rect, this.getRectFromAngle(nextQuandrant));\n\t                series.findMaxBounds(rect, this.getRectFromAngle(lastQuadrant));\n\t            }\n\t            if (start === 0 || (start + total >= 360)) {\n\t                series.findMaxBounds(rect, this.getRectFromAngle(0));\n\t            }\n\t            var length = nextQuandrant === lastQuadrant ? 0 : Math.floor(total / 90);\n\t            for (var i = 1; i < length; i++) {\n\t                nextQuandrant = nextQuandrant + 90;\n\t                if ((nextQuandrant < lastQuadrant || end < start) || total === 360) {\n\t                    series.findMaxBounds(rect, this.getRectFromAngle(nextQuandrant));\n\t                }\n\t            }\n\t            rect.width -= rect.x;\n\t            rect.height -= rect.y;\n\t            return rect;\n\t        };\n\t        PieBase.prototype.getRectFromAngle = function (angle) {\n\t            var location = helper_1.degreeToLocation(angle, this.radius, this.center);\n\t            return new helper_1.Rect(location.x, location.y, 0, 0);\n\t        };\n\t        PieBase.prototype.getPathArc = function (center, start, end, radius, innerRadius) {\n\t            var degree = end - start;\n\t            degree = degree < 0 ? (degree + 360) : degree;\n\t            var flag = (degree < 180) ? 0 : 1;\n\t            if (!innerRadius && innerRadius === 0) {\n\t                return this.getPiePath(center, helper_1.degreeToLocation(start, radius, center), helper_1.degreeToLocation(end, radius, center), radius, flag);\n\t            }\n\t            else {\n\t                return this.getDoughnutPath(center, helper_1.degreeToLocation(start, radius, center), helper_1.degreeToLocation(end, radius, center), radius, helper_1.degreeToLocation(start, innerRadius, center), helper_1.degreeToLocation(end, innerRadius, center), innerRadius, flag);\n\t            }\n\t        };\n\t        PieBase.prototype.getPiePath = function (center, start, end, radius, clockWise) {\n\t            return 'M ' + center.x + ' ' + center.y + ' L ' + start.x + ' ' + start.y + ' A ' + radius + ' ' +\n\t                radius + ' 0 ' + clockWise + ' 1 ' + end.x + ' ' + end.y + ' Z';\n\t        };\n\t        PieBase.prototype.getDoughnutPath = function (center, start, end, radius, innerStart, innerEnd, innerRadius, clockWise) {\n\t            return 'M ' + start.x + ' ' + start.y + ' A ' + radius + ' ' + radius + ' 0 ' + clockWise +\n\t                ' 1 ' + end.x + ' ' + end.y + ' L ' + innerEnd.x + ' ' + innerEnd.y + ' A ' + innerRadius +\n\t                ' ' + innerRadius + ' 0 ' + clockWise + ',0 ' + innerStart.x + ' ' + innerStart.y + ' Z';\n\t        };\n\t        PieBase.prototype.doAnimation = function (slice, series) {\n\t            var _this = this;\n\t            var startAngle = series.startAngle - 85;\n\t            var value;\n\t            var radius = Math.max(this.accumulation.availableSize.height, this.accumulation.availableSize.width) * 0.75;\n\t            radius += radius * (0.414);\n\t            var effect = helper_1.getAnimationFunction('Linear');\n\t            new ej2_base_1.Animation({}).animate(slice, {\n\t                duration: series.animation.duration,\n\t                delay: series.animation.delay,\n\t                progress: function (args) {\n\t                    value = effect(args.timeStamp, startAngle, _this.totalAngle, args.duration);\n\t                    slice.setAttribute('d', _this.getPathArc(_this.center, startAngle, value, radius, 0));\n\t                },\n\t                end: function (args) {\n\t                    slice.setAttribute('d', _this.getPathArc(_this.center, 0, 359.99999, radius, 0));\n\t                    _this.accumulation.trigger(constants_1.animationComplete, { series: series, accumulation: _this.accumulation });\n\t                    var datalabelGroup = helper_1.getElement(_this.accumulation.element.id + '_datalabel_Series_' + series.index);\n\t                    datalabelGroup.style.visibility = _this.accumulation.isDestroyed ? 'hidden' : 'visible';\n\t                }\n\t            });\n\t        };\n\t        return PieBase;\n\t    }(accumulation_base_1.AccumulationBase));\n\t    exports.PieBase = PieBase;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(75)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, triangular_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var FunnelSeries = (function (_super) {\n\t        __extends(FunnelSeries, _super);\n\t        function FunnelSeries() {\n\t            return _super !== null && _super.apply(this, arguments) || this;\n\t        }\n\t        FunnelSeries.prototype.getSegmentData = function (point, series, chart) {\n\t            var lineWidth;\n\t            var topRadius;\n\t            var bottomRadius;\n\t            var endTop;\n\t            var endBottom;\n\t            var minRadius;\n\t            var endMin;\n\t            var bottomY;\n\t            var area = series.triangleSize;\n\t            var offset = 0;\n\t            var extraSpace = (chart.initialClipRect.width - series.triangleSize.width) / 2;\n\t            var emptySpaceAtLeft = extraSpace + chart.initialClipRect.x;\n\t            var seriesTop = chart.initialClipRect.y + (chart.initialClipRect.height - area.height) / 2;\n\t            var top = point.yRatio * area.height;\n\t            var bottom = top + point.heightRatio * area.height;\n\t            var neckSize = series.neckSize;\n\t            lineWidth = neckSize.width + (area.width - neckSize.width) * ((area.height - neckSize.height - top) /\n\t                (area.height - neckSize.height));\n\t            topRadius = (area.width / 2) - lineWidth / 2;\n\t            endTop = topRadius + lineWidth;\n\t            if (bottom > area.height - neckSize.height || area.height === neckSize.height) {\n\t                lineWidth = neckSize.width;\n\t            }\n\t            else {\n\t                lineWidth = neckSize.width + (area.width - neckSize.width) *\n\t                    ((area.height - neckSize.height - bottom) / (area.height - neckSize.height));\n\t            }\n\t            bottomRadius = (area.width / 2) - (lineWidth / 2);\n\t            endBottom = bottomRadius + lineWidth;\n\t            if (top >= area.height - neckSize.height) {\n\t                topRadius = bottomRadius = minRadius = (area.width / 2) - neckSize.width / 2;\n\t                endTop = endBottom = endMin = (area.width / 2) + neckSize.width / 2;\n\t            }\n\t            else if (bottom > (area.height - neckSize.height)) {\n\t                minRadius = bottomRadius = (area.width / 2) - lineWidth / 2;\n\t                endMin = endBottom = minRadius + lineWidth;\n\t                bottomY = area.height - neckSize.height;\n\t            }\n\t            var points = [];\n\t            top += seriesTop;\n\t            bottom += seriesTop;\n\t            bottomY += seriesTop;\n\t            var line1 = { x: emptySpaceAtLeft + offset + topRadius, y: top };\n\t            var line2 = { x: emptySpaceAtLeft + offset + endTop, y: top };\n\t            var line4 = { x: emptySpaceAtLeft + offset + endBottom, y: bottom };\n\t            var line5 = { x: emptySpaceAtLeft + offset + bottomRadius, y: bottom };\n\t            var line3 = { x: emptySpaceAtLeft + offset + endBottom, y: bottom };\n\t            var line6 = { x: emptySpaceAtLeft + offset + bottomRadius, y: bottom };\n\t            if (bottomY) {\n\t                line3 = { x: emptySpaceAtLeft + offset + endMin, y: bottomY };\n\t                line6 = { x: emptySpaceAtLeft + offset + minRadius, y: bottomY };\n\t            }\n\t            var polygon = [line1, line2, line3, line4, line5, line6];\n\t            this.setLabelLocation(series, point, polygon);\n\t            var direction = this.findPath(polygon);\n\t            return direction;\n\t        };\n\t        FunnelSeries.prototype.renderPoint = function (point, series, chart, options) {\n\t            var direction = this.getSegmentData(point, series, chart);\n\t            point.midAngle = 0;\n\t            options.d = direction;\n\t        };\n\t        FunnelSeries.prototype.getModuleName = function () {\n\t            return 'FunnelSeries';\n\t        };\n\t        FunnelSeries.prototype.destroy = function (accumulation) {\n\t        };\n\t        return FunnelSeries;\n\t    }(triangular_base_1.TriangularBase));\n\t    exports.FunnelSeries = FunnelSeries;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(77), __webpack_require__(20), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, acc_base_1, legend_1, helper_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationLegend = (function (_super) {\n\t        __extends(AccumulationLegend, _super);\n\t        function AccumulationLegend(chart) {\n\t            var _this = _super.call(this, chart) || this;\n\t            _this.library = _this;\n\t            _this.titleRect = new helper_1.Rect(0, chart.margin.top, 0, 0);\n\t            return _this;\n\t        }\n\t        AccumulationLegend.prototype.getLegendOptions = function (chart, series) {\n\t            this.legendCollections = [];\n\t            for (var i = 0; i < 1; i++) {\n\t                var seriesType = series[i].type;\n\t                if (seriesType === 'Pie' || seriesType === 'Doughnut') {\n\t                    seriesType = (series[i].innerRadius !== '0' && series[i].innerRadius !== '0%') ?\n\t                        'Doughnut' : 'Pie';\n\t                }\n\t                for (var _i = 0, _a = series[i].points; _i < _a.length; _i++) {\n\t                    var point = _a[_i];\n\t                    if (!ej2_base_1.isNullOrUndefined(point.x) && !ej2_base_1.isNullOrUndefined(point.y)) {\n\t                        this.legendCollections.push(new legend_1.LegendOptions(point.x.toString(), point.color, series[i].legendShape, point.visible, seriesType, null, null, point.index, series[i].index));\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        AccumulationLegend.prototype.getLegendBounds = function (availableSize, legendBounds, legend) {\n\t            var extraWidth = 0;\n\t            var extraHeight = 0;\n\t            var padding = legend.padding;\n\t            if (!this.isVertical) {\n\t                extraHeight = !legend.height ? ((availableSize.height / 100) * 5) : 0;\n\t            }\n\t            else {\n\t                extraWidth = !legend.width ? ((availableSize.width / 100) * 5) : 0;\n\t            }\n\t            legendBounds.width += extraWidth;\n\t            legendBounds.height += extraHeight;\n\t            var shapePadding = legend.shapePadding;\n\t            var maximumWidth = 0;\n\t            var shapeWidth = legend.shapeWidth;\n\t            var rowWidth = 0;\n\t            var rowCount = 0;\n\t            var columnWidth = [];\n\t            var columnHeight = 0;\n\t            var legendWidth = 0;\n\t            this.maxItemHeight = Math.max(helper_1.measureText('MeasureText', legend.textStyle).height, legend.shapeHeight);\n\t            var legendEventArgs;\n\t            var render = false;\n\t            for (var _i = 0, _a = this.legendCollections; _i < _a.length; _i++) {\n\t                var legendOption = _a[_i];\n\t                legendEventArgs = { fill: legendOption.fill, text: legendOption.text, shape: legendOption.shape,\n\t                    name: 'legendRender', cancel: false };\n\t                this.chart.trigger('legendRender', legendEventArgs);\n\t                legendOption.render = !legendEventArgs.cancel;\n\t                legendOption.text = legendEventArgs.text;\n\t                legendOption.fill = legendEventArgs.fill;\n\t                legendOption.shape = legendEventArgs.shape;\n\t                legendOption.textSize = helper_1.measureText(legendOption.text, legend.textStyle);\n\t                if (legendOption.render && legendOption.text !== '') {\n\t                    render = true;\n\t                    legendWidth = shapeWidth + shapePadding + legendOption.textSize.width + padding;\n\t                    if (this.isVertical) {\n\t                        ++rowCount;\n\t                        columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding;\n\t                        if ((rowCount * (this.maxItemHeight + padding)) + padding > legendBounds.height) {\n\t                            columnHeight = Math.max(columnHeight, (rowCount * (this.maxItemHeight + padding)) + padding);\n\t                            rowWidth = rowWidth + maximumWidth;\n\t                            columnWidth.push(maximumWidth);\n\t                            this.totalPages = Math.max(rowCount, this.totalPages || 1);\n\t                            maximumWidth = 0;\n\t                            rowCount = 1;\n\t                        }\n\t                        maximumWidth = Math.max(legendWidth, maximumWidth);\n\t                    }\n\t                    else {\n\t                        rowWidth = rowWidth + legendWidth;\n\t                        if (legendBounds.width < (padding + rowWidth)) {\n\t                            maximumWidth = Math.max(maximumWidth, (rowWidth + padding - legendWidth));\n\t                            if (rowCount === 0 && (legendWidth !== rowWidth)) {\n\t                                rowCount = 1;\n\t                            }\n\t                            rowWidth = legendWidth;\n\t                            rowCount++;\n\t                            columnHeight = (rowCount * (this.maxItemHeight + padding)) + padding;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (this.isVertical) {\n\t                rowWidth = rowWidth + maximumWidth;\n\t                this.isPaging = legendBounds.width < (rowWidth + padding);\n\t                columnHeight = Math.max(columnHeight, ((this.totalPages || 1) * (this.maxItemHeight + padding)) + padding);\n\t                this.isPaging = this.isPaging && (this.totalPages > 1);\n\t                if (columnWidth[columnWidth.length - 1] !== maximumWidth) {\n\t                    columnWidth.push(maximumWidth);\n\t                }\n\t            }\n\t            else {\n\t                this.isPaging = legendBounds.height < columnHeight;\n\t                this.totalPages = this.totalRowCount = rowCount;\n\t                columnHeight = Math.max(columnHeight, (this.maxItemHeight + padding) + padding);\n\t            }\n\t            this.maxColumns = 0;\n\t            var width = this.isVertical ? this.getMaxColumn(columnWidth, legendBounds.width, padding, rowWidth + padding) :\n\t                Math.max(rowWidth + padding, maximumWidth);\n\t            if (render) {\n\t                this.setBounds(width, columnHeight, legend, legendBounds);\n\t            }\n\t            else {\n\t                this.setBounds(0, 0, legend, legendBounds);\n\t            }\n\t        };\n\t        AccumulationLegend.prototype.getMaxColumn = function (columns, width, padding, rowWidth) {\n\t            var maxPageColumn = padding;\n\t            this.maxColumnWidth = Math.max.apply(null, columns);\n\t            for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n\t                var column = columns_1[_i];\n\t                maxPageColumn += this.maxColumnWidth;\n\t                this.maxColumns++;\n\t                if (maxPageColumn + padding > width) {\n\t                    maxPageColumn -= this.maxColumnWidth;\n\t                    this.maxColumns--;\n\t                    break;\n\t                }\n\t            }\n\t            this.isPaging = (maxPageColumn < rowWidth) && (this.totalPages > 1);\n\t            if (maxPageColumn === padding) {\n\t                maxPageColumn = width;\n\t            }\n\t            this.maxColumns = Math.max(1, this.maxColumns);\n\t            this.maxWidth = maxPageColumn;\n\t            return maxPageColumn;\n\t        };\n\t        AccumulationLegend.prototype.getAvailWidth = function (tx, width, legendX) {\n\t            if (this.isVertical) {\n\t                width = this.maxWidth;\n\t            }\n\t            return width - ((this.legend.padding * 2) + this.legend.shapeWidth + this.legend.shapePadding);\n\t        };\n\t        AccumulationLegend.prototype.getRenderPoint = function (legendOption, start, textPadding, prevLegend, rect, count, firstLegend) {\n\t            var padding = this.legend.padding;\n\t            if (this.isVertical) {\n\t                if (count === firstLegend || (prevLegend.location.y + (this.maxItemHeight * 1.5) + (padding * 2) > rect.y + rect.height)) {\n\t                    legendOption.location.x = prevLegend.location.x + ((count === firstLegend) ? 0 : this.maxColumnWidth);\n\t                    legendOption.location.y = start.y;\n\t                    this.pageXCollections.push(legendOption.location.x - (this.legend.shapeWidth / 2) - padding);\n\t                    this.totalPages++;\n\t                }\n\t                else {\n\t                    legendOption.location.x = prevLegend.location.x;\n\t                    legendOption.location.y = prevLegend.location.y + this.maxItemHeight + padding;\n\t                }\n\t            }\n\t            else {\n\t                var previousBound = (prevLegend.location.x + textPadding + prevLegend.textSize.width);\n\t                if ((previousBound + (legendOption.textSize.width + textPadding)) > (rect.x + rect.width + this.legend.shapeWidth / 2)) {\n\t                    legendOption.location.y = (count === firstLegend) ? prevLegend.location.y :\n\t                        prevLegend.location.y + this.maxItemHeight + padding;\n\t                    legendOption.location.x = start.x;\n\t                }\n\t                else {\n\t                    legendOption.location.y = prevLegend.location.y;\n\t                    legendOption.location.x = (count === firstLegend) ? prevLegend.location.x : previousBound;\n\t                }\n\t                this.totalPages = this.totalRowCount;\n\t            }\n\t            var availablewidth = this.getAvailWidth(legendOption.location.x, this.legendBounds.width, this.legendBounds.x);\n\t            legendOption.text = helper_1.textTrim(+availablewidth.toFixed(4), legendOption.text, this.legend.textStyle);\n\t        };\n\t        AccumulationLegend.prototype.getSmartLegendLocation = function (labelBound, legendBound, margin) {\n\t            var space;\n\t            switch (this.position) {\n\t                case 'Left':\n\t                    space = ((labelBound.x - legendBound.width) - margin.left) / 2;\n\t                    legendBound.x = (labelBound.x - legendBound.width) < margin.left ? legendBound.x :\n\t                        (labelBound.x - legendBound.width) - space;\n\t                    break;\n\t                case 'Right':\n\t                    space = ((this.chart.availableSize.width - margin.right) - (labelBound.x + labelBound.width + legendBound.width)) / 2;\n\t                    legendBound.x = (labelBound.x + labelBound.width + legendBound.width) > (this.chart.availableSize.width - margin.right) ?\n\t                        legendBound.x : (labelBound.x + labelBound.width + space);\n\t                    break;\n\t                case 'Top':\n\t                    this.getTitleRect(this.chart);\n\t                    space = ((labelBound.y - legendBound.height) - (this.titleRect.y + this.titleRect.height)) / 2;\n\t                    legendBound.y = (labelBound.y - legendBound.height) < margin.top ? legendBound.y :\n\t                        (labelBound.y - legendBound.height) - space;\n\t                    break;\n\t                case 'Bottom':\n\t                    space = ((this.chart.availableSize.height - margin.bottom) - (labelBound.y + labelBound.height + legendBound.height)) / 2;\n\t                    legendBound.y = labelBound.y + labelBound.height + legendBound.height > (this.chart.availableSize.height - margin.bottom) ?\n\t                        legendBound.y : (labelBound.y + labelBound.height) + space;\n\t                    break;\n\t            }\n\t        };\n\t        AccumulationLegend.prototype.getTitleRect = function (accumulation) {\n\t            if (!accumulation.title) {\n\t                return null;\n\t            }\n\t            var titleSize = helper_1.measureText(accumulation.title, accumulation.titleStyle);\n\t            this.titleRect = new helper_1.Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n\t        };\n\t        AccumulationLegend.prototype.legendByIndex = function (index, legendCollections) {\n\t            for (var _i = 0, legendCollections_1 = legendCollections; _i < legendCollections_1.length; _i++) {\n\t                var legend = legendCollections_1[_i];\n\t                if (legend.pointIndex === index) {\n\t                    return legend;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        AccumulationLegend.prototype.click = function (event) {\n\t            var targetId = event.target.id;\n\t            var legendItemsId = [this.legendID + '_text_', this.legendID + '_shape_',\n\t                this.legendID + '_shape_marker_'];\n\t            var selectedDataIndexes = [];\n\t            if (this.chart.accumulationSelectionModule) {\n\t                selectedDataIndexes = ej2_base_1.extend([], this.chart.accumulationSelectionModule.selectedDataIndexes, null, true);\n\t            }\n\t            for (var _i = 0, legendItemsId_1 = legendItemsId; _i < legendItemsId_1.length; _i++) {\n\t                var id = legendItemsId_1[_i];\n\t                if (targetId.indexOf(id) > -1) {\n\t                    var pointIndex = parseInt(targetId.split(id)[1], 10);\n\t                    var currentSeries = this.chart.visibleSeries[0];\n\t                    var point = acc_base_1.pointByIndex(pointIndex, currentSeries.points);\n\t                    var legendOption = this.legendByIndex(pointIndex, this.legendCollections);\n\t                    if (this.chart.legendSettings.toggleVisibility) {\n\t                        point.visible = !point.visible;\n\t                        legendOption.visible = point.visible;\n\t                        this.chart.removeSvg();\n\t                        if (point.visible) {\n\t                            currentSeries.sumOfPoints += point.y;\n\t                        }\n\t                        else {\n\t                            currentSeries.sumOfPoints -= point.y;\n\t                        }\n\t                        this.chart.refreshPoints(currentSeries.points);\n\t                        this.chart.renderElements();\n\t                    }\n\t                    else if (this.chart.accumulationSelectionModule) {\n\t                        this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, pointIndex);\n\t                    }\n\t                }\n\t            }\n\t            if (targetId.indexOf(this.legendID + '_pageup') > -1) {\n\t                this.changePage(event, true);\n\t            }\n\t            else if (targetId.indexOf(this.legendID + '_pagedown') > -1) {\n\t                this.changePage(event, false);\n\t            }\n\t        };\n\t        AccumulationLegend.prototype.getModuleName = function () {\n\t            return 'AccumulationLegend';\n\t        };\n\t        AccumulationLegend.prototype.destroy = function (chart) {\n\t        };\n\t        return AccumulationLegend;\n\t    }(legend_1.BaseLegend));\n\t    exports.AccumulationLegend = AccumulationLegend;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(3), __webpack_require__(77), __webpack_require__(5), __webpack_require__(3), __webpack_require__(76)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, helper_1, helper_2, helper_3, helper_4, acc_base_1, constants_1, helper_5, accumulation_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationDataLabel = (function (_super) {\n\t        __extends(AccumulationDataLabel, _super);\n\t        function AccumulationDataLabel(accumulation) {\n\t            var _this = _super.call(this, accumulation) || this;\n\t            _this.id = accumulation.element.id + '_datalabel_Series_';\n\t            if (accumulation.title) {\n\t                var titleSize = helper_3.measureText(accumulation.title, accumulation.titleStyle);\n\t                _this.titleRect = new helper_1.Rect(accumulation.availableSize.width / 2 - titleSize.width / 2, accumulation.margin.top, titleSize.width, titleSize.height);\n\t            }\n\t            return _this;\n\t        }\n\t        AccumulationDataLabel.prototype.getDataLabelPosition = function (point, dataLabel, textSize, points, parent, id) {\n\t            var radius = this.isCircular() ? this.labelRadius : this.getLabelDistance(point, dataLabel);\n\t            this.getLabelRegion(point, dataLabel.position, textSize, radius, this.marginValue);\n\t            point.labelAngle = point.midAngle;\n\t            point.labelPosition = dataLabel.position;\n\t            if (this.accumulation.enableSmartLabels) {\n\t                this.getSmartLabel(point, dataLabel, textSize, points, parent, id);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getLabelRegion = function (point, position, textSize, labelRadius, margin, endAngle) {\n\t            if (endAngle === void 0) { endAngle = 0; }\n\t            var labelAngle = endAngle || point.midAngle;\n\t            var space = 10;\n\t            var location = helper_1.degreeToLocation(labelAngle, labelRadius, this.isCircular() ? this.center :\n\t                this.getLabelLocation(point, position));\n\t            location.y = (position === 'Inside') ? (location.y - textSize.height / 2) : location.y;\n\t            location.x = (position === 'Inside') ? (location.x - textSize.width / 2) : location.x;\n\t            point.labelRegion = new helper_1.Rect(location.x, location.y, textSize.width + (margin * 2), textSize.height + (margin * 2));\n\t            if (position === 'Outside') {\n\t                point.labelRegion.y -= point.labelRegion.height / 2;\n\t                if (labelAngle >= 90 && labelAngle <= 270) {\n\t                    point.labelRegion.x -= (point.labelRegion.width + space);\n\t                }\n\t                else {\n\t                    point.labelRegion.x += space;\n\t                }\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getSmartLabel = function (point, dataLabel, textSize, points, parent, id) {\n\t            var circular = this.isCircular();\n\t            var labelRadius = circular ? this.radius : this.getLabelDistance(point, dataLabel);\n\t            var connectorLength = circular ? (dataLabel.connectorStyle.length || '4%') :\n\t                '0px';\n\t            labelRadius += helper_1.stringToNumber(connectorLength, labelRadius);\n\t            var previousPoint = this.findPreviousPoint(points, point.index, point.labelPosition);\n\t            if (dataLabel.position === 'Inside') {\n\t                if (previousPoint && previousPoint.labelRegion && (helper_1.isOverlap(point.labelRegion, previousPoint.labelRegion)\n\t                    || this.isOverlapping(point, points)) || !circular && !helper_4.containsRect(point.region, point.labelRegion)) {\n\t                    point.labelPosition = 'Outside';\n\t                    if (!circular) {\n\t                        labelRadius = this.getLabelDistance(point, dataLabel);\n\t                    }\n\t                    this.getLabelRegion(point, point.labelPosition, textSize, labelRadius, this.marginValue);\n\t                    previousPoint = this.findPreviousPoint(points, point.index, point.labelPosition);\n\t                    if (previousPoint && (helper_1.isOverlap(point.labelRegion, previousPoint.labelRegion) ||\n\t                        this.isConnectorLineOverlapping(point, previousPoint))) {\n\t                        this.setOuterSmartLabel(previousPoint, point, dataLabel.border.width, labelRadius, textSize, this.marginValue);\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (previousPoint && previousPoint.labelRegion && (helper_1.isOverlap(point.labelRegion, previousPoint.labelRegion)\n\t                    || this.isOverlapping(point, points) || this.isConnectorLineOverlapping(point, previousPoint))) {\n\t                    this.setOuterSmartLabel(previousPoint, point, dataLabel.border.width, labelRadius, textSize, this.marginValue);\n\t                }\n\t            }\n\t            if (this.isOverlapping(point, points) || (this.titleRect && point.labelRegion && helper_1.isOverlap(point.labelRegion, this.titleRect))) {\n\t                this.setPointVisibileFalse(point);\n\t            }\n\t            if (this.accumulation.accumulationLegendModule && point.labelVisible && point.labelRegion) {\n\t                var rect = this.accumulation.accumulationLegendModule.legendBounds;\n\t                var padding = this.accumulation.legendSettings.border.width / 2;\n\t                this.textTrimming(point, new helper_1.Rect(rect.x - padding, rect.y - padding, rect.width + (2 * padding), rect.height + (2 * padding)), dataLabel.font, this.accumulation.accumulationLegendModule.position);\n\t            }\n\t            if (point.labelVisible && point.labelRegion) {\n\t                var position = this.isCircular() ? (point.labelRegion.x >= this.center.x) ? 'InsideRight' : 'InsideLeft' :\n\t                    'InsideRight';\n\t                this.textTrimming(point, this.areaRect, dataLabel.font, position);\n\t            }\n\t            if (point.labelVisible && point.labelRegion && ((point.labelRegion.y + point.labelRegion.height >\n\t                this.areaRect.y + this.areaRect.height || point.labelRegion.y < this.areaRect.y) || (point.labelRegion.x < this.areaRect.x ||\n\t                point.labelRegion.x + point.labelRegion.width > this.areaRect.x + this.areaRect.width))) {\n\t                this.setPointVisibileFalse(point);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.move = function (e, x, y, isTouch) {\n\t            var _this = this;\n\t            var location = this.accumulation.removeSvgOffset(x, y);\n\t            if (e.target.textContent.indexOf('...') > -1) {\n\t                var targetId = e.target.id.split(this.id);\n\t                if (targetId.length === 2) {\n\t                    var seriesIndex = parseInt(targetId[1].split('_text_')[0], 10);\n\t                    var pointIndex = parseInt(targetId[1].split('_text_')[1], 10);\n\t                    if (!isNaN(seriesIndex) && !isNaN(pointIndex)) {\n\t                        if (isTouch) {\n\t                            helper_3.removeElement(this.accumulation.element.id + '_EJ2_Datalabel_Tooltip');\n\t                        }\n\t                        var point = acc_base_1.getSeriesFromIndex(seriesIndex, (this.accumulation).visibleSeries).points[pointIndex];\n\t                        helper_3.showTooltip(point.text || point.y.toString(), location.x, location.y, this.areaRect.width, this.accumulation.element.id + '_EJ2_Datalabel_Tooltip', helper_2.getElement(this.accumulation.element.id + '_Secondary_Element'));\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                helper_3.removeElement(this.accumulation.element.id + '_EJ2_Datalabel_Tooltip');\n\t            }\n\t            if (isTouch) {\n\t                clearTimeout(this.clearTooltip);\n\t                this.clearTooltip = setTimeout(function () { helper_3.removeElement(_this.accumulation.element.id + '_EJ2_Datalabel_Tooltip'); }, 1000);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.findPreviousPoint = function (points, index, position) {\n\t            var point = points[0];\n\t            for (var i = index - 1; i >= 0; i--) {\n\t                point = points[i];\n\t                if (point.visible && point.labelVisible && point.labelRegion && point.labelPosition === position) {\n\t                    return point;\n\t                }\n\t            }\n\t            return null;\n\t        };\n\t        AccumulationDataLabel.prototype.isOverlapping = function (currentPoint, points) {\n\t            for (var i = currentPoint.index - 1; i >= 0; i--) {\n\t                if (points[i].visible && points[i].labelVisible && points[i].labelRegion && currentPoint.labelRegion &&\n\t                    currentPoint.labelVisible && helper_1.isOverlap(currentPoint.labelRegion, points[i].labelRegion)) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationDataLabel.prototype.textTrimming = function (point, rect, font, position) {\n\t            if (helper_1.isOverlap(point.labelRegion, rect)) {\n\t                var size = point.labelRegion.width;\n\t                if (position === 'Right') {\n\t                    size = rect.x - point.labelRegion.x;\n\t                }\n\t                else if (position === 'Left') {\n\t                    size = point.labelRegion.x - (rect.x + rect.width);\n\t                    if (size < 0) {\n\t                        size += point.labelRegion.width;\n\t                        point.labelRegion.x = rect.x + rect.width;\n\t                    }\n\t                }\n\t                else if (position === 'InsideRight') {\n\t                    size = (rect.x + rect.width) - point.labelRegion.x;\n\t                }\n\t                else if (position === 'InsideLeft') {\n\t                    size = (point.labelRegion.x + point.labelRegion.width) - rect.x;\n\t                    if (size < point.labelRegion.width) {\n\t                        point.labelRegion.x = rect.x;\n\t                    }\n\t                }\n\t                else {\n\t                    this.setPointVisibileFalse(point);\n\t                }\n\t                if (point.labelVisible && point.labelRegion) {\n\t                    if (size < point.labelRegion.width) {\n\t                        point.label = helper_2.textTrim(size - (this.marginValue * 2), point.label, font);\n\t                        point.labelRegion.width = size;\n\t                    }\n\t                    if (point.label.length === 3 && point.label.indexOf('...') > -1) {\n\t                        this.setPointVisibileFalse(point);\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.setPointVisibileFalse = function (point) {\n\t            point.labelVisible = false;\n\t            point.labelRegion = null;\n\t        };\n\t        AccumulationDataLabel.prototype.setOuterSmartLabel = function (previousPoint, point, border, labelRadius, textsize, margin) {\n\t            if (!this.isCircular()) {\n\t                this.setSmartLabelForSegments(point, previousPoint, labelRadius, textsize, margin);\n\t            }\n\t            else {\n\t                var labelAngle = this.getOverlappedAngle(previousPoint.labelRegion, point.labelRegion, point.midAngle, border * 2);\n\t                this.getLabelRegion(point, 'Outside', textsize, labelRadius, margin, labelAngle);\n\t                if (labelAngle > point.endAngle) {\n\t                    this.setPointVisibileFalse(point);\n\t                }\n\t                point.labelAngle = labelAngle;\n\t                while (point.labelVisible && (helper_1.isOverlap(previousPoint.labelRegion, point.labelRegion) || labelAngle <= previousPoint.labelAngle\n\t                    || this.isConnectorLineOverlapping(point, previousPoint))) {\n\t                    if (labelAngle > point.endAngle) {\n\t                        this.setPointVisibileFalse(point);\n\t                        break;\n\t                    }\n\t                    point.labelAngle = labelAngle;\n\t                    this.getLabelRegion(point, 'Outside', textsize, labelRadius, margin, labelAngle);\n\t                    labelAngle += 0.1;\n\t                }\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.setSmartLabelForSegments = function (point, prevPoint, distance, textSize, margin) {\n\t            var textRegion = point.labelRegion;\n\t            var overlapHeight = this.accumulation.type === 'Funnel' ?\n\t                prevPoint.labelRegion.y - (textRegion.y + textRegion.height) :\n\t                point.labelRegion.y - (prevPoint.labelRegion.y + prevPoint.labelRegion.height);\n\t            if (overlapHeight < 0) {\n\t                point.labelRegion.y += this.accumulation.type === 'Funnel' ? overlapHeight : -overlapHeight;\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.isConnectorLineOverlapping = function (point, previous) {\n\t            var start = this.getLabelLocation(point);\n\t            var end = new helper_1.ChartLocation(0, 0);\n\t            this.getEdgeOfLabel(point.labelRegion, point.labelAngle, end);\n\t            var previousstart = this.getLabelLocation(previous);\n\t            var previousend = new helper_1.ChartLocation(0, 0);\n\t            this.getEdgeOfLabel(previous.labelRegion, previous.labelAngle, previousend);\n\t            return this.isLineRectangleIntersect(start, end, point.labelRegion) ||\n\t                this.isLineRectangleIntersect(start, end, previous.labelRegion) ||\n\t                this.isLineRectangleIntersect(previousstart, previousend, point.labelRegion);\n\t        };\n\t        AccumulationDataLabel.prototype.isLineRectangleIntersect = function (line1, line2, rect) {\n\t            var rectPoints = [\n\t                new helper_1.ChartLocation(Math.round(rect.x), Math.round(rect.y)),\n\t                new helper_1.ChartLocation(Math.round((rect.x + rect.width)), Math.round(rect.y)),\n\t                new helper_1.ChartLocation(Math.round((rect.x + rect.width)), Math.round((rect.y + rect.height))),\n\t                new helper_1.ChartLocation(Math.round(rect.x), Math.round((rect.y + rect.height)))\n\t            ];\n\t            line1.x = Math.round(line1.x);\n\t            line1.y = Math.round(line1.y);\n\t            line2.x = Math.round(line2.x);\n\t            line2.y = Math.round(line2.y);\n\t            for (var i = 0; i < rectPoints.length; i++) {\n\t                if (this.isLinesIntersect(line1, line2, rectPoints[i], rectPoints[(i + 1) % rectPoints.length])) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationDataLabel.prototype.isLinesIntersect = function (point1, point2, point11, point12) {\n\t            var a1 = point2.y - point1.y;\n\t            var b1 = point1.x - point2.x;\n\t            var c1 = a1 * point1.x + b1 * point1.y;\n\t            var a2 = point12.y - point11.y;\n\t            var b2 = point11.x - point12.x;\n\t            var c2 = a2 * point11.x + b2 * point11.y;\n\t            var delta = a1 * b2 - a2 * b1;\n\t            if (delta !== 0) {\n\t                var x = (b2 * c1 - b1 * c2) / delta;\n\t                var y = (a1 * c2 - a2 * c1) / delta;\n\t                var lies = Math.min(point1.x, point2.x) <= x && x <= Math.max(point1.x, point2.x);\n\t                lies = lies && Math.min(point1.y, point2.y) <= y && y <= Math.max(point1.y, point2.y);\n\t                lies = lies && Math.min(point11.x, point12.x) <= x && x <= Math.max(point11.x, point12.x);\n\t                lies = lies && Math.min(point11.y, point12.y) <= y && y <= Math.max(point11.y, point12.y);\n\t                return lies;\n\t            }\n\t            return false;\n\t        };\n\t        AccumulationDataLabel.prototype.getOverlappedAngle = function (first, second, angle, padding) {\n\t            var x = first.x;\n\t            if (angle >= 90 && angle <= 270) {\n\t                second.y = first.y - (padding + second.height / 2);\n\t                x = first.x + first.width;\n\t            }\n\t            else {\n\t                second.y = first.y + first.height + padding;\n\t            }\n\t            return helper_1.getAngle(this.center, new helper_1.ChartLocation(x, second.y));\n\t        };\n\t        AccumulationDataLabel.prototype.getConnectorPath = function (label, point, dataLabel, end) {\n\t            if (end === void 0) { end = 0; }\n\t            var connector = dataLabel.connectorStyle;\n\t            var labelRadius = this.isCircular() ? this.labelRadius : this.getLabelDistance(point, dataLabel);\n\t            var start = this.getConnectorStartPoint(point, connector);\n\t            var labelAngle = end || point.midAngle;\n\t            var middle = new helper_1.ChartLocation(0, 0);\n\t            var endPoint = this.getEdgeOfLabel(label, labelAngle, middle, connector.width);\n\t            if (connector.type === 'Curve') {\n\t                if (this.isCircular()) {\n\t                    var r = labelRadius - this.radius;\n\t                    middle = helper_1.degreeToLocation(labelAngle, labelRadius - (r / 2), this.center);\n\t                    return 'M ' + start.x + ' ' + start.y + ' Q' + middle.x + ',' + middle.y + ' ' + endPoint.x + ',' + endPoint.y;\n\t                }\n\t                else {\n\t                    return this.getPolyLinePath(start, endPoint);\n\t                }\n\t            }\n\t            else {\n\t                return 'M ' + start.x + ' ' + start.y + ' L ' + middle.x + ' ' + middle.y + ' L ' + endPoint.x + ' ' + endPoint.y;\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getPolyLinePath = function (start, end) {\n\t            var controlPoints = [start, end];\n\t            if (start.y === end.y) {\n\t                return 'M ' + start.x + ' ' + start.y + ' L ' + end.x + ' ' + end.y;\n\t            }\n\t            var path = 'M';\n\t            for (var i = 0; i <= 16; i++) {\n\t                var t = i / 16;\n\t                var points = this.getBezierPoint(t, controlPoints, 0, 2);\n\t                path += points.x + ',' + points.y;\n\t                if (i !== 16) {\n\t                    path += ' L';\n\t                }\n\t            }\n\t            return path;\n\t        };\n\t        AccumulationDataLabel.prototype.getBezierPoint = function (t, controlPoints, index, count) {\n\t            if (count === 1) {\n\t                return controlPoints[index];\n\t            }\n\t            var p0 = this.getBezierPoint(t, controlPoints, index, count - 1);\n\t            var p1 = this.getBezierPoint(t, controlPoints, index + 1, count - 1);\n\t            var x = (p0.x) ? p0.x : p0.x;\n\t            var y = (p0.y) ? p0.y : p0.y;\n\t            var x1 = (p1.x) ? p1.x : p1.x;\n\t            var y1 = (p1.y) ? p1.y : p1.y;\n\t            var x2 = (1 - t) * x + t * x1;\n\t            var y2 = (1 - t) * y + t * y1;\n\t            if (p0.x) {\n\t                return { x: x2, y: y2 };\n\t            }\n\t            else {\n\t                return { x: x2, y: y2 };\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getEdgeOfLabel = function (labelshape, angle, middle, border) {\n\t            if (border === void 0) { border = 1; }\n\t            var edge = new helper_1.ChartLocation(labelshape.x, labelshape.y);\n\t            if (angle >= 90 && angle <= 270) {\n\t                edge.x += labelshape.width + border / 2;\n\t                edge.y += labelshape.height / 2;\n\t                middle.x = edge.x + 10;\n\t                middle.y = edge.y;\n\t            }\n\t            else {\n\t                edge.x -= border / 2;\n\t                edge.y += labelshape.height / 2;\n\t                middle.x = edge.x - 10;\n\t                middle.y = edge.y;\n\t            }\n\t            return edge;\n\t        };\n\t        AccumulationDataLabel.prototype.getLabelDistance = function (point, dataLabel) {\n\t            if (point.labelPosition && dataLabel.position !== point.labelPosition || dataLabel.connectorStyle.length) {\n\t                var length_1 = helper_1.stringToNumber(dataLabel.connectorStyle.length || '70px', this.accumulation.initialClipRect.width);\n\t                if (length_1 < this.accumulation.initialClipRect.width) {\n\t                    return length_1;\n\t                }\n\t            }\n\t            var position = point.labelPosition || dataLabel.position;\n\t            var series = this.accumulation.visibleSeries[0];\n\t            var extraSpace = (this.accumulation.initialClipRect.width - series.triangleSize.width) / 2;\n\t            var labelLocation;\n\t            switch (position) {\n\t                case 'Inside':\n\t                    return 0;\n\t                case 'Outside':\n\t                    labelLocation = point.symbolLocation.x + point.labelOffset.x;\n\t                    return this.accumulation.initialClipRect.width - labelLocation - extraSpace;\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getLabelLocation = function (point, position) {\n\t            if (position === void 0) { position = 'Outside'; }\n\t            if (this.accumulation.type !== 'Pie') {\n\t                position = point.labelPosition || position;\n\t                var location_1 = {\n\t                    x: point.symbolLocation.x,\n\t                    y: point.symbolLocation.y - point.labelOffset.y\n\t                };\n\t                switch (position) {\n\t                    case 'Inside':\n\t                        location_1.y = point.region.y + point.region.height / 2;\n\t                        break;\n\t                    case 'Outside':\n\t                        location_1.x += point.labelOffset.x;\n\t                }\n\t                return location_1;\n\t            }\n\t            else {\n\t                return helper_1.degreeToLocation(point.midAngle, this.radius, this.center);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getConnectorStartPoint = function (point, connector) {\n\t            return this.isCircular() ? helper_1.degreeToLocation(point.midAngle, this.radius - connector.width, this.center) :\n\t                this.getLabelLocation(point);\n\t        };\n\t        AccumulationDataLabel.prototype.findAreaRect = function () {\n\t            this.areaRect = new helper_1.Rect(0, 0, this.accumulation.availableSize.width, this.accumulation.availableSize.height);\n\t            var margin = this.accumulation.margin;\n\t            helper_2.subtractThickness(this.areaRect, new helper_2.Thickness(margin.left, margin.right, margin.top, margin.bottom));\n\t        };\n\t        AccumulationDataLabel.prototype.renderDataLabel = function (point, dataLabel, parent, points, series, templateElement) {\n\t            var id = this.accumulation.element.id + '_datalabel_Series_' + series + '_';\n\t            var datalabelGroup = this.accumulation.renderer.createGroup({ id: id + 'g_' + point.index });\n\t            point.label = point.originalText || point.y.toString();\n\t            var argsData = {\n\t                cancel: false, name: constants_1.textRender, series: this.accumulation.visibleSeries[0], point: point,\n\t                text: point.label, border: dataLabel.border, color: dataLabel.fill, template: dataLabel.template\n\t            };\n\t            this.accumulation.trigger(constants_1.textRender, argsData);\n\t            var isTemplate = argsData.template !== null;\n\t            point.labelVisible = !argsData.cancel;\n\t            point.text = point.label = argsData.text;\n\t            this.marginValue = argsData.border.width ? (5 + argsData.border.width) : 1;\n\t            var childElement = ej2_base_1.createElement('div', {\n\t                id: this.accumulation.element.id + '_Series_' + 0 + '_DataLabel_' + point.index,\n\t                styles: 'position: absolute;background-color:' + argsData.color + ';' +\n\t                    helper_5.getFontStyle(dataLabel.font) + ';border:' + argsData.border.width + 'px solid ' + argsData.border.color + ';'\n\t            });\n\t            var textSize = isTemplate ? this.getTemplateSize(childElement, point, argsData) :\n\t                helper_3.measureText(point.label, dataLabel.font);\n\t            textSize.height += 4;\n\t            textSize.width += 4;\n\t            this.getDataLabelPosition(point, dataLabel, textSize, points, datalabelGroup, id);\n\t            if (point.labelVisible) {\n\t                this.correctLabelRegion(point.labelRegion, textSize);\n\t                if (isTemplate) {\n\t                    this.setTemplateStyle(childElement, point, templateElement, dataLabel.font.color, argsData.color);\n\t                }\n\t                else {\n\t                    datalabelGroup.appendChild(this.accumulation.renderer.drawRectangle(new helper_3.RectOption(id + 'shape_' + point.index, argsData.color, argsData.border, 1, point.labelRegion, dataLabel.rx, dataLabel.ry)));\n\t                    helper_3.textElement(new helper_1.TextOption(id + 'text_' + point.index, point.labelRegion.x + this.marginValue, point.labelRegion.y + (textSize.height * 3 / 4) + this.marginValue, 'start', point.label, '', 'auto'), dataLabel.font, dataLabel.font.color || this.getSaturatedColor(point, argsData.color), datalabelGroup);\n\t                }\n\t                if (this.accumulation.accumulationLegendModule && (dataLabel.position === 'Outside' || this.accumulation.enableSmartLabels)) {\n\t                    this.accumulation.visibleSeries[0].findMaxBounds(this.accumulation.visibleSeries[0].labelBound, point.labelRegion);\n\t                }\n\t                if (point.labelPosition === 'Outside') {\n\t                    var path = this.getConnectorPath(ej2_base_1.extend({}, point.labelRegion, null, true), point, dataLabel, point.labelAngle);\n\t                    var pathElement = this.accumulation.renderer.drawPath(new helper_4.PathOption(id + 'connector_' + point.index, 'transparent', dataLabel.connectorStyle.width, dataLabel.connectorStyle.color || point.color, 1, '', path));\n\t                    datalabelGroup.appendChild(pathElement);\n\t                }\n\t                parent.appendChild(datalabelGroup);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getTemplateSize = function (element, point, argsData) {\n\t            var clientRect;\n\t            element = helper_5.createTemplate(element, point.index, argsData.template, this.accumulation, point, this.accumulation.visibleSeries[0]);\n\t            clientRect = helper_5.measureElementRect(element);\n\t            return { width: clientRect.width, height: clientRect.height };\n\t        };\n\t        AccumulationDataLabel.prototype.setTemplateStyle = function (childElement, point, parent, labelColor, fill) {\n\t            childElement.style.left = (point.labelRegion.x) + 'px';\n\t            childElement.style.top = (point.labelRegion.y) + 'px';\n\t            childElement.style.color = labelColor ||\n\t                this.getSaturatedColor(point, fill);\n\t            if (childElement.childElementCount) {\n\t                parent.appendChild(childElement);\n\t                this.doTemplateAnimation(this.accumulation, childElement);\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getSaturatedColor = function (point, color) {\n\t            var saturatedColor;\n\t            if (this.marginValue >= 1) {\n\t                saturatedColor = color === 'transparent' ? this.getLabelBackground(point) : color;\n\t            }\n\t            else {\n\t                saturatedColor = this.getLabelBackground(point);\n\t            }\n\t            saturatedColor = (saturatedColor === 'transparent') ? window.getComputedStyle(document.body, null).backgroundColor : saturatedColor;\n\t            var rgbValue = helper_4.convertHexToColor(helper_4.colorNameToHex(saturatedColor));\n\t            var contrast = Math.round((rgbValue.r * 299 + rgbValue.g * 587 + rgbValue.b * 114) / 1000);\n\t            return contrast >= 128 ? 'black' : 'white';\n\t        };\n\t        AccumulationDataLabel.prototype.doTemplateAnimation = function (accumulation, element) {\n\t            var series = accumulation.visibleSeries[0];\n\t            var delay = series.animation.delay + series.animation.duration;\n\t            if (series.animation.enable && accumulation.animateSeries) {\n\t                element.style.visibility = 'hidden';\n\t                helper_5.templateAnimate(element, delay, 200, 'ZoomIn');\n\t            }\n\t        };\n\t        AccumulationDataLabel.prototype.getLabelBackground = function (point) {\n\t            return point.labelPosition === 'Outside' ? this.accumulation.background : point.color;\n\t        };\n\t        AccumulationDataLabel.prototype.correctLabelRegion = function (labelRegion, textSize, padding) {\n\t            if (padding === void 0) { padding = 4; }\n\t            labelRegion.height -= padding;\n\t            labelRegion.width -= padding;\n\t            labelRegion.x += padding / 2;\n\t            labelRegion.y += padding / 2;\n\t            textSize.height -= padding;\n\t            textSize.width -= padding;\n\t        };\n\t        AccumulationDataLabel.prototype.getModuleName = function () {\n\t            return 'AccumulationDataLabel';\n\t        };\n\t        AccumulationDataLabel.prototype.destroy = function (accumulation) {\n\t        };\n\t        return AccumulationDataLabel;\n\t    }(accumulation_base_1.AccumulationBase));\n\t    exports.AccumulationDataLabel = AccumulationDataLabel;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(4), __webpack_require__(4), __webpack_require__(85), __webpack_require__(77), __webpack_require__(3), __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, ej2_base_2, ej2_base_3, ej2_popups_1, acc_base_1, helper_1, constants_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationTooltip = (function () {\n\t        function AccumulationTooltip(accumulation) {\n\t            this.accumulation = accumulation;\n\t            this.tooltipOption = accumulation.tooltip;\n\t            this.targetId = accumulation.element.id + '_pie_tooltip';\n\t            this.tooltip = new ej2_popups_1.Tooltip({\n\t                opensOn: 'custom',\n\t                beforeOpen: this.tooltipCustomization.bind(this),\n\t                openDelay: 0,\n\t                closeDelay: 1000\n\t            });\n\t            this.tooltip.appendTo(accumulation.element);\n\t        }\n\t        AccumulationTooltip.prototype.setTemplateFunction = function (template) {\n\t            var e;\n\t            try {\n\t                if (document.querySelectorAll(template).length) {\n\t                    this.templateFn = ej2_base_1.compile(document.querySelector(template).innerHTML.trim());\n\t                }\n\t            }\n\t            catch (e) {\n\t                this.templateFn = ej2_base_1.compile(template);\n\t            }\n\t        };\n\t        AccumulationTooltip.prototype.renderTooltip = function (point, seriesIndex) {\n\t            var element = helper_1.getElement(this.targetId);\n\t            if (element && (element.getAttribute('data-tooltip-id') === null) ||\n\t                this.tooltipIndex !== 'series_' + seriesIndex + '_point_' + point.index) {\n\t                this.updatePosition(this.targetId, point.symbolLocation.x, point.symbolLocation.y, this.accumulation.element.id + '_Series_0_Point_' + point.index);\n\t                this.setTemplateFunction(this.tooltipOption.template);\n\t                this.currentPoint = point;\n\t                this.tooltip.content = this.getTooltipContent(point, seriesIndex);\n\t                this.tooltip.open(helper_1.getElement(this.targetId));\n\t                this.tooltipIndex = 'series_' + seriesIndex + '_point_' + point.index;\n\t            }\n\t        };\n\t        AccumulationTooltip.prototype.fadeOutTooltip = function () {\n\t            clearTimeout(this.clearTooltip);\n\t            this.removeTooltip = this.removeTooltip.bind(this);\n\t            this.clearTooltip = setTimeout(this.removeTooltip, 500);\n\t        };\n\t        AccumulationTooltip.prototype.removeTooltip = function () {\n\t            if (this.tooltip) {\n\t                this.tooltip.close();\n\t            }\n\t        };\n\t        AccumulationTooltip.prototype.getTooltipContent = function (point, seriesIndex) {\n\t            if (this.tooltipOption.template && this.templateFn) {\n\t                var templates = this.templateFn(point);\n\t                var element = ej2_base_2.createElement('div');\n\t                while (templates.length > 0) {\n\t                    element.appendChild(templates[0]);\n\t                }\n\t                return element;\n\t            }\n\t            else {\n\t                return this.getTooltipText(point, this.tooltipOption, seriesIndex);\n\t            }\n\t        };\n\t        AccumulationTooltip.prototype.tooltipCustomization = function (args) {\n\t            var argsData = {\n\t                cancel: false, name: constants_1.tooltipRender,\n\t                content: this.tooltip.content,\n\t                textStyle: this.tooltipOption.textStyle,\n\t                series: this.accumulation.visibleSeries[0],\n\t                point: this.currentPoint\n\t            };\n\t            this.accumulation.trigger(constants_1.tooltipRender, argsData);\n\t            args.cancel = argsData.cancel;\n\t            this.tooltip.content = argsData.content;\n\t            this.tooltipOption.textStyle = argsData.textStyle;\n\t            var content = document.getElementsByClassName('e-tooltip-wrap')[0];\n\t            var font = this.tooltipOption.textStyle;\n\t            var position = this.tooltip.position.split(' ');\n\t            var borderColor = this.tooltipOption.border.color || this.currentPoint.color;\n\t            var pointerSize = 8;\n\t            var outerWidth;\n\t            var innerWidth;\n\t            args.element.classList.remove('e-popup-close');\n\t            args.element.classList.add('e-popup-open');\n\t            var arrowEle = args.element.querySelector('.e-arrow-tip');\n\t            var borderWidth = this.tooltipOption.border.width;\n\t            ej2_base_2.setStyleAttribute(args.element, {\n\t                'backgroundColor': this.tooltipOption.fill, 'borderColor': borderColor,\n\t                'borderWidth': borderWidth, 'borderRadius': '5px', 'pointer-events': 'none'\n\t            });\n\t            ej2_base_2.setStyleAttribute(args.element.querySelector('.e-tip-content'), {\n\t                'color': font.color || '#000000', 'fontFamily': font.fontFamily, 'fontSize': font.size,\n\t                'fontWeight': font.fontWeight, 'opacity': font.opacity.toString(), 'fontStyle': font.fontStyle\n\t            });\n\t            pointerSize = args.element.querySelector('.e-arrow-tip').offsetHeight;\n\t            outerWidth = pointerSize + 'px';\n\t            ej2_base_2.setStyleAttribute(args.element.querySelector('.e-arrow-tip-outer'), {\n\t                'borderRightColor': 'transparent', 'borderLeftColor': 'transparent', 'borderBottomColor': borderColor,\n\t                'borderLeftWidth': outerWidth, 'borderRightWidth': outerWidth, 'borderBottomWidth': outerWidth,\n\t                'borderTopColor': borderColor,\n\t            });\n\t            innerWidth = (pointerSize - borderWidth) + 'px';\n\t            ej2_base_2.setStyleAttribute(args.element.querySelector('.e-arrow-tip-inner'), {\n\t                'borderRightColor': 'transparent', 'borderLeftColor': 'transparent', 'borderBottomColor': borderColor,\n\t                'borderLeftWidth': innerWidth, 'borderRightWidth': innerWidth, 'borderBottomWidth': innerWidth,\n\t                'left': borderWidth, 'top': 0, 'borderTopColor': this.tooltipOption.fill\n\t            });\n\t            ej2_base_2.setStyleAttribute(args.element, {\n\t                'display': 'block', 'transitionProperty': 'left,top',\n\t                'transitionDuration': this.tooltipOption.enableAnimation ? '500ms' : '0ms'\n\t            });\n\t            this.tooltip.dataBind();\n\t        };\n\t        AccumulationTooltip.prototype.updatePosition = function (id, x, y, pointId) {\n\t            var pointElement = helper_1.getElement(pointId);\n\t            var translate = pointElement.getAttribute('transform');\n\t            if (!ej2_base_3.isNullOrUndefined(translate) && translate !== '') {\n\t                translate = translate.replace('translate(', '');\n\t                translate = translate.replace(')', '');\n\t                var tx = parseInt(translate.split(',')[0], 10);\n\t                var ty = parseInt(translate.split(',')[1], 10);\n\t                x = !isNaN(tx) ? tx + x : x;\n\t                y = !isNaN(ty) ? ty + y : y;\n\t            }\n\t            var tooltip = helper_1.getElement(id);\n\t            if (tooltip) {\n\t                tooltip.style.top = y + 'px';\n\t                tooltip.style.left = x + 'px';\n\t            }\n\t            else {\n\t                tooltip = ej2_base_2.createElement('div', {\n\t                    id: id,\n\t                    styles: 'position:absolute;left:' + x + 'px;top:' + y +\n\t                        'px;width:2px;height:2px;background:transparent'\n\t                });\n\t                helper_1.getElement(this.accumulation.element.id + '_Secondary_Element').appendChild(tooltip);\n\t            }\n\t        };\n\t        AccumulationTooltip.prototype.getTooltipText = function (point, tooltip, seriesIndex) {\n\t            var format = tooltip.format ? tooltip.format : '${point.x} : ${point.y}';\n\t            var series = acc_base_1.getSeriesFromIndex(seriesIndex, this.accumulation.visibleSeries);\n\t            return this.parseTemplate(point, format, series);\n\t        };\n\t        AccumulationTooltip.prototype.parseTemplate = function (point, format, series) {\n\t            var value;\n\t            var textValue;\n\t            for (var _i = 0, _a = Object.keys(point); _i < _a.length; _i++) {\n\t                var dataValue = _a[_i];\n\t                value = new RegExp('${point' + '.' + dataValue + '}', 'gm');\n\t                format = format.replace(value.source, point[dataValue]);\n\t            }\n\t            for (var _b = 0, _c = Object.keys(Object.getPrototypeOf(series)); _b < _c.length; _b++) {\n\t                var dataValue = _c[_b];\n\t                value = new RegExp('${series' + '.' + dataValue + '}', 'gm');\n\t                textValue = series[dataValue];\n\t                format = format.replace(value.source, textValue);\n\t            }\n\t            return format;\n\t        };\n\t        AccumulationTooltip.prototype.getModuleName = function () {\n\t            return 'AccumulationTooltip';\n\t        };\n\t        AccumulationTooltip.prototype.destroy = function (chart) {\n\t        };\n\t        return AccumulationTooltip;\n\t    }());\n\t    exports.AccumulationTooltip = AccumulationTooltip;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_85__;\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4), __webpack_require__(77), __webpack_require__(9), __webpack_require__(66)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, ej2_base_1, acc_base_1, base_1, selection_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationSelection = (function (_super) {\n\t        __extends(AccumulationSelection, _super);\n\t        function AccumulationSelection(accumulation) {\n\t            var _this = _super.call(this, accumulation) || this;\n\t            _this.renderer = accumulation.renderer;\n\t            return _this;\n\t        }\n\t        AccumulationSelection.prototype.initPrivateVariables = function (accumulation) {\n\t            this.styleId = accumulation.element.id + '_ej2_chart_selection';\n\t            this.unselected = accumulation.element.id + '_ej2_deselected';\n\t            this.selectedDataIndexes = [];\n\t            this.rectPoints = null;\n\t        };\n\t        AccumulationSelection.prototype.invokeSelection = function (accumulation) {\n\t            this.initPrivateVariables(accumulation);\n\t            this.series = ej2_base_1.extend({}, accumulation.visibleSeries, null, true);\n\t            this.seriesStyles();\n\t            this.selectDataIndex(this.concatIndexes(accumulation.selectedDataIndexes, this.selectedDataIndexes), accumulation);\n\t        };\n\t        AccumulationSelection.prototype.generateStyle = function (series) {\n\t            return (series.selectionStyle || this.styleId + '_series_' + series.index);\n\t        };\n\t        AccumulationSelection.prototype.findElements = function (accumulation, series, index) {\n\t            return [this.getElementByIndex(index)];\n\t        };\n\t        AccumulationSelection.prototype.getElementByIndex = function (index) {\n\t            var elementId = this.control.element.id + '_Series_' + index.series + '_Point_' + index.point;\n\t            return document.getElementById(elementId);\n\t        };\n\t        AccumulationSelection.prototype.calculateSelectedElements = function (accumulation, event) {\n\t            if (event.target.id.indexOf(accumulation.element.id + '_') === -1) {\n\t                return;\n\t            }\n\t            if (event.target.id.indexOf('_Series_') > -1 || event.target.id.indexOf('_datalabel_') > -1) {\n\t                this.performSelection(acc_base_1.indexFinder(event.target.id), accumulation, event.target);\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.performSelection = function (index, accumulation, element) {\n\t            element = element.id.indexOf('datalabel') > -1 ?\n\t                accumulation.getSeriesElement().childNodes[index.series].childNodes[index.point]\n\t                : element;\n\t            switch (accumulation.selectionMode) {\n\t                case 'Point':\n\t                    if (!isNaN(index.point)) {\n\t                        this.selection(accumulation, index, [element]);\n\t                        this.blurEffect(accumulation.element.id, accumulation.visibleSeries);\n\t                    }\n\t                    break;\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.selection = function (accumulation, index, selectedElements) {\n\t            if (!accumulation.isMultiSelect) {\n\t                this.removeMultiSelectEelments(accumulation, this.selectedDataIndexes, index, accumulation.series);\n\t            }\n\t            var className = selectedElements[0] && (selectedElements[0].getAttribute('class') || '');\n\t            if (selectedElements[0] && className.indexOf(this.getSelectionClass(selectedElements[0].id)) > -1) {\n\t                this.removeStyles(selectedElements, index);\n\t                this.addOrRemoveIndex(this.selectedDataIndexes, index);\n\t            }\n\t            else {\n\t                this.applyStyles(selectedElements, index);\n\t                this.addOrRemoveIndex(this.selectedDataIndexes, index, true);\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.redrawSelection = function (accumulation, oldMode) {\n\t            var selectedDataIndexes = ej2_base_1.extend([], this.selectedDataIndexes, null, true);\n\t            this.removeSelectedElements(accumulation, this.selectedDataIndexes);\n\t            this.blurEffect(accumulation.element.id, accumulation.visibleSeries);\n\t            this.selectDataIndex(selectedDataIndexes, accumulation);\n\t        };\n\t        AccumulationSelection.prototype.removeSelectedElements = function (accumulation, indexes) {\n\t            var seriesgroup = accumulation.getSeriesElement();\n\t            for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n\t                var index = indexes_1[_i];\n\t                this.removeStyles([this.getElementByIndex(index)], index);\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.legendSelection = function (accumulation, series, pointIndex) {\n\t            var element = accumulation.getSeriesElement().childNodes[series].childNodes[pointIndex];\n\t            var seriesStyle = this.generateStyle(accumulation.visibleSeries[series]);\n\t            var seriesElements = accumulation.getSeriesElement().childNodes[series].childNodes[pointIndex];\n\t            this.selection(accumulation, new base_1.Index(series, pointIndex), [seriesElements]);\n\t            this.blurEffect(accumulation.element.id, accumulation.visibleSeries);\n\t        };\n\t        AccumulationSelection.prototype.selectDataIndex = function (indexes, accumulation) {\n\t            var element;\n\t            for (var _i = 0, indexes_2 = indexes; _i < indexes_2.length; _i++) {\n\t                var index = indexes_2[_i];\n\t                element = this.getElementByIndex(index);\n\t                if (element) {\n\t                    this.performSelection(index, accumulation, element);\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.removeMultiSelectEelments = function (accumulation, index, currentIndex, seriesCollection) {\n\t            var series;\n\t            for (var i = 0; i < index.length; i++) {\n\t                series = seriesCollection[index[i].series];\n\t                if (!this.checkEquals(index[i], currentIndex)) {\n\t                    this.removeStyles(this.findElements(accumulation, series, index[i]), index[i]);\n\t                    index.splice(i, 1);\n\t                    i--;\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.blurEffect = function (pieId, visibleSeries) {\n\t            var visibility = this.checkPointVisibility(this.selectedDataIndexes);\n\t            for (var _i = 0, visibleSeries_1 = visibleSeries; _i < visibleSeries_1.length; _i++) {\n\t                var series = visibleSeries_1[_i];\n\t                if (series.visible) {\n\t                    this.checkSelectionElements(document.getElementById(pieId + '_SeriesCollection'), this.generateStyle(series), visibility);\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.checkSelectionElements = function (element, className, visibility) {\n\t            var children = (element.childNodes[0].childNodes);\n\t            var legendShape;\n\t            var elementClass;\n\t            var parentClass;\n\t            for (var i = 0; i < children.length; i++) {\n\t                elementClass = children[i].getAttribute('class') || '';\n\t                parentClass = children[i].parentNode.getAttribute('class') || '';\n\t                if (elementClass.indexOf(className) === -1 && parentClass.indexOf(className) === -1 && visibility) {\n\t                    this.addSvgClass(children[i], this.unselected);\n\t                }\n\t                else {\n\t                    this.removeSvgClass(children[i], this.unselected);\n\t                }\n\t                if (this.control.accumulationLegendModule && this.control.legendSettings.visible) {\n\t                    legendShape = document.getElementById(this.control.element.id + '_chart_legend_shape_' + i);\n\t                    if (legendShape) {\n\t                        if (elementClass.indexOf(className) === -1 && parentClass.indexOf(className) === -1 && visibility) {\n\t                            this.addSvgClass(legendShape, this.unselected);\n\t                        }\n\t                        else {\n\t                            this.removeSvgClass(legendShape, this.unselected);\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.applyStyles = function (elements, index) {\n\t            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n\t                var element = elements_1[_i];\n\t                var legendShape = void 0;\n\t                if (element) {\n\t                    if (this.control.accumulationLegendModule && this.control.legendSettings.visible) {\n\t                        legendShape = document.getElementById(this.control.element.id + '_chart_legend_shape_' + index.point);\n\t                        this.removeSvgClass(legendShape, this.unselected);\n\t                        this.addSvgClass(legendShape, this.getSelectionClass(legendShape.id));\n\t                    }\n\t                    this.removeSvgClass(element.parentNode, this.unselected);\n\t                    this.removeSvgClass(element, this.unselected);\n\t                    this.addSvgClass(element, this.getSelectionClass(element.id));\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.getSelectionClass = function (id) {\n\t            return this.generateStyle(this.control.series[acc_base_1.indexFinder(id).series]);\n\t        };\n\t        AccumulationSelection.prototype.removeStyles = function (elements, index) {\n\t            var legendShape;\n\t            for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n\t                var element = elements_2[_i];\n\t                if (element) {\n\t                    if (this.control.accumulationLegendModule && this.control.legendSettings.visible) {\n\t                        legendShape = document.getElementById(this.control.element.id + '_chart_legend_shape_' + index.point);\n\t                        this.removeSvgClass(legendShape, this.getSelectionClass(legendShape.id));\n\t                    }\n\t                    this.removeSvgClass(element, this.getSelectionClass(element.id));\n\t                }\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.addOrRemoveIndex = function (indexes, index, add) {\n\t            for (var i = 0; i < indexes.length; i++) {\n\t                if (this.checkEquals(indexes[i], index)) {\n\t                    indexes.splice(i, 1);\n\t                    i--;\n\t                }\n\t            }\n\t            if (add) {\n\t                indexes.push(index);\n\t            }\n\t        };\n\t        AccumulationSelection.prototype.checkEquals = function (first, second) {\n\t            return ((first.point === second.point) && (first.series === second.series));\n\t        };\n\t        AccumulationSelection.prototype.checkPointVisibility = function (selectedDataIndexes) {\n\t            var visible = false;\n\t            for (var _i = 0, selectedDataIndexes_1 = selectedDataIndexes; _i < selectedDataIndexes_1.length; _i++) {\n\t                var data = selectedDataIndexes_1[_i];\n\t                if (acc_base_1.pointByIndex(data.point, this.control.visibleSeries[0].points).visible) {\n\t                    visible = true;\n\t                    break;\n\t                }\n\t            }\n\t            return visible;\n\t        };\n\t        AccumulationSelection.prototype.getModuleName = function () {\n\t            return 'AccumulationSelection';\n\t        };\n\t        AccumulationSelection.prototype.destroy = function (accumulation) {\n\t        };\n\t        return AccumulationSelection;\n\t    }(selection_1.BaseSelection));\n\t    exports.AccumulationSelection = AccumulationSelection;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(71), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, annotation_1, helper_1, ej2_base_1) {\n\t    \"use strict\";\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    var AccumulationAnnotation = (function (_super) {\n\t        __extends(AccumulationAnnotation, _super);\n\t        function AccumulationAnnotation(control, annotations) {\n\t            var _this = _super.call(this, control) || this;\n\t            _this.pie = control;\n\t            _this.annotations = annotations;\n\t            return _this;\n\t        }\n\t        AccumulationAnnotation.prototype.renderAnnotations = function (element) {\n\t            var _this = this;\n\t            var annotationElement;\n\t            var location;\n\t            this.parentElement = ej2_base_1.createElement('div', {\n\t                id: this.pie.element.id + '_Annotation_Collections'\n\t            });\n\t            this.annotations.map(function (annotation, index) {\n\t                location = new helper_1.ChartLocation(0, 0);\n\t                annotationElement = _this.render(annotation, index);\n\t                if (_this['setAnnotation' + annotation.coordinateUnits + 'Value'](location)) {\n\t                    _this.setElementStyle(location, annotationElement, _this.parentElement);\n\t                }\n\t            });\n\t            helper_1.appendElement(this.parentElement, element);\n\t        };\n\t        AccumulationAnnotation.prototype.getModuleName = function () {\n\t            return 'Annotation';\n\t        };\n\t        AccumulationAnnotation.prototype.destroy = function (control) {\n\t        };\n\t        return AccumulationAnnotation;\n\t    }(annotation_1.AnnotationBase));\n\t    exports.AccumulationAnnotation = AccumulationAnnotation;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9), __webpack_require__(5), __webpack_require__(11)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, base_1, constants_1, theme_1) {\n\t    \"use strict\";\n\t    function __export(m) {\n\t        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n\t    }\n\t    Object.defineProperty(exports, \"__esModule\", { value: true });\n\t    __export(base_1);\n\t    __export(constants_1);\n\t    __export(theme_1);\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ })\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA4OTk3MjViMzBjODI0YWVkMzAwZCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvYnViYmxlLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWxzL2hlbHBlci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vbW9kZWwvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9jaGFydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvYXhpcy9heGlzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC91dGlscy9kb3VibGUtcmFuZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9tb2RlbC9iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9heGlzL2RvdWJsZS1heGlzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vbW9kZWwvdGhlbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L21vZGVsL2NoYXJ0LWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L2F4aXMvY2FydGVzaWFuLXBhbmVsLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvY2hhcnQtc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vbW9kZWwvZGF0YS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvbWFya2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvbWFya2VyLWV4cGxvZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3V0aWxzL2dldC1kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vbGVnZW5kL2xlZ2VuZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvdGVjaG5pY2FsLWluZGljYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWxzL2V4cG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvYXhpcy9kYXRlLXRpbWUtYXhpcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvYXhpcy9jYXRlZ29yeS1heGlzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9heGlzL2xvZ2FyaXRobWljLWF4aXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L2F4aXMvc3RyaXAtbGluZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2xpbmUtc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvbGluZS1iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvY29sdW1uLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2NvbHVtbi1iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvYXJlYS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9iYXItc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvcG9sYXItc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9heGlzL3BvbGFyLXJhZGFyLXBhbmVsLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvcmFkYXItc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvc3RhY2tpbmctYmFyLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2NhbmRsZS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9zdGFja2luZy1jb2x1bW4tc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvc3RlcC1saW5lLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL3N0ZXAtYXJlYS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9zdGFja2luZy1hcmVhLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL3NjYXR0ZXItc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC9zZXJpZXMvcmFuZ2UtY29sdW1uLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL3dhdGVyZmFsbC1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9oaWxvLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2hpbG8tb3Blbi1jbG9zZS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9yYW5nZS1hcmVhLXNlcmllcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL3NwbGluZS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL3NtYS1pbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL2luZGljYXRvci1iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC90ZWNobmljYWwtaW5kaWNhdG9ycy9lbWEtaW5kaWNhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC90ZWNobmljYWwtaW5kaWNhdG9ycy90bWEtaW5kaWNhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC90ZWNobmljYWwtaW5kaWNhdG9ycy9hZC1pbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL2F0ci1pbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL21vbWVudHVtLWluZGljYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvcnNpLWluZGljYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvc3RvY2hhc3RpYy1pbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL2JvbGxpbmdlci1iYW5kcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvbWFjZC1pbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3RyZW5kLWxpbmVzL3RyZW5kLWxpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3VzZXItaW50ZXJhY3Rpb24vY3Jvc3NoYWlyLmpzIiwid2VicGFjazovLy8uL3NyYy9jaGFydC91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3VzZXItaW50ZXJhY3Rpb24vem9vbWluZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvdXNlci1pbnRlcmFjdGlvbi96b29taW5nLXRvb2xraXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3VzZXItaW50ZXJhY3Rpb24vc2VsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VsZWN0aW9uL3NlbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2RhdGEtbGFiZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L3Nlcmllcy9lcnJvci1iYXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L2xlZ2VuZC9sZWdlbmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NoYXJ0L2Fubm90YXRpb24vYW5ub3RhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2Fubm90YXRpb24vYW5ub3RhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhcnQvc2VyaWVzL2JveC1hbmQtd2hpc2tlci1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L3JlbmRlcmVyL3B5cmFtaWQtc2VyaWVzLmpzIiwid2VicGFjazovLy8uL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvdHJpYW5ndWxhci1iYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvYWNjdW11bGF0aW9uLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9tb2RlbC9hY2MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L2FjY3VtdWxhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L3JlbmRlcmVyL3BpZS1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9waWUtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L3JlbmRlcmVyL2Z1bm5lbC1zZXJpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9sZWdlbmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9kYXRhTGFiZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXAuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiIiwid2VicGFjazovLy8uL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvdXNlci1pbnRlcmFjdGlvbi9zZWxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9hbm5vdGF0aW9uL2Fubm90YXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7aUVDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ1REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDOzs7Ozs7O2lFQ3pERDtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsWUFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLFlBQVk7QUFDdkQ7QUFDQTtBQUNBLGlCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QyxRQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsZ0JBQWdCO0FBQ3JFO0FBQ0E7QUFDQSx5REFBd0QsZ0JBQWdCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUE4QyxTQUFTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLDBEQUF5RCxnQkFBZ0I7QUFDekU7QUFDQTtBQUNBO0FBQ0EsdURBQXNELGdCQUFnQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBcUUsZ0JBQWdCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELGdCQUFnQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBcUQsU0FBUztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBbUUsZ0NBQWdDO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxpREFBaUQ7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQXlDLGVBQWU7QUFDeEQsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBdUQscURBQXFEO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QscURBQXFEO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QscURBQXFEO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBb0QscURBQXFEO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF3RCxTQUFTO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE0QixpQ0FBaUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7Ozs7Ozs7aUVDdE1EO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQW9ELGdCQUFnQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsZ0JBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMEMsTUFBTTtBQUNoRCx1REFBc0Q7QUFDdEQsMERBQXlEO0FBQ3pEO0FBQ0E7QUFDQSxtQkFBa0IsdUNBQXVDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDLE1BQU07QUFDN0M7QUFDQTtBQUNBLGdEQUErQyxNQUFNO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDdE5EO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUErQixnQ0FBZ0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLGdDQUFnQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCw4Q0FBOEM7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNEQsU0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDL3RCRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0EsNkJBQTRCLHVDQUF1QztBQUNuRTtBQUNBO0FBQ0EsNkJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCLHdCQUF3QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsOEJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBLHNCQUFxQjtBQUNy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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtKQUE4SiwwQkFBMEI7QUFDeEw7QUFDQTtBQUNBLHFKQUFvSiwwQkFBMEI7QUFDOUs7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCLGlDQUFpQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUN6VkQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQWtCLHVDQUF1QztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUN4RUQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUEyRCxTQUFTO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxNQUFNO0FBQzFELHVEQUFzRDtBQUN0RCwwREFBeUQ7QUFDekQ7QUFDQTtBQUNBLG1CQUFrQix1Q0FBdUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN4RkQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZELHlCQUF5QjtBQUN0RjtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0EsdURBQXNELGdCQUFnQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQ25JRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE2RCw2QkFBNkI7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7aUVDMUVEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQsNEJBQTRCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RDtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnRUFBK0QsaUJBQWlCO0FBQ2hGO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdFQUErRCxpQkFBaUI7QUFDaEY7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUN6R0Q7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWdELGdCQUFnQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBOEUseURBQXlEO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNqREQ7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQSxrREFBaUQsZ0JBQWdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXVDO0FBQ3ZDO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW1DLGdCQUFnQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUtBQW9LLDBCQUEwQjtBQUM5TDtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQSxxREFBb0QsZ0JBQWdCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUN0Z0JEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW1FLDJDQUEyQztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBb0UsY0FBYztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXFGLE1BQU07QUFDM0YsdUVBQXNFLE1BQU07QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQixrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBLEVBQUM7Ozs7Ozs7QUN6UUQ7QUFDQTtBQUNBLFdBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRiwwQkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx3QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkZBQTRGLFFBQVEsY0FBYyxZQUFZO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLG1CQUFtQjtBQUNyRjtBQUNBLDJEQUEwRCx1Q0FBdUM7QUFDakc7QUFDQSxnRUFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBdUMsa0JBQWtCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBOEQsZ0JBQWdCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBc0QsZ0JBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QyxvQkFBb0I7QUFDNUQ7QUFDQSw4REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUErRSxlQUFlO0FBQzlGLDhFQUE2RSxlQUFlO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0EseUlBQXdJLGlDQUFpQztBQUN6Syx1SEFBc0gsaUNBQWlDO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBLDRCQUEyQixhQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTBELGNBQWM7QUFDeEUscUNBQW9DLHdFQUF3RTtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLDZEQUE2RDtBQUNqRztBQUNBO0FBQ0EsaUVBQWdFLGNBQWM7QUFDOUU7QUFDQSw2Q0FBNEM7QUFDNUM7QUFDQTtBQUNBLDZDQUE0Qyw2REFBNkQ7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTRCO0FBQzVCO0FBQ0E7QUFDQSw2QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQW9DLGdCQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsWUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUNobEJEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFnRCxnQkFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFvRCxzREFBc0Q7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLHVEQUFzRCxzREFBc0Q7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXNELHNEQUFzRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF1RCxzREFBc0Q7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQXlELGdCQUFnQjtBQUN6RTtBQUNBLG9DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFpRCx1QkFBdUI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXFFLGlDQUFpQztBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBNkQsNkJBQTZCO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQy9RRDtBQUNBO0FBQ0EsV0FBVSxnQkFBZ0Isc0NBQXNDLGlCQUFpQixFQUFFO0FBQ25GLDBCQUF5Qix1REFBdUQ7QUFDaEY7QUFDQTtBQUNBLHdCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXNDLGNBQWM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE0RCxrRkFBa0YsRUFBRTtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFtQyxRQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBZ0QsUUFBUTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTJCLHVCQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBMkIsU0FBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF3QjtBQUN4QjtBQUNBO0FBQ0EseUJBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLHFDQUFvQyxZQUFZO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBc0Msc0JBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLHdDQUF3QztBQUNwRiwrREFBOEQsMkVBQTJFO0FBQ3pJLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDLGFBQWE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O2lFQ2pmRDtBQUNBO0FBQ0EsbURBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNB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QW1DO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSxFQUFDOzs7Ozs7O0FDM05EO0FBQ0E7QUFDQSxXQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYsMEJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0Esd0JBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSxtREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztpRUM3Q0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFrRCxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLEVBQUMiLCJmaWxlIjoiZWoyLWNoYXJ0cy51bWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIpLCByZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZmFjdG9yeShyZXF1aXJlKFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiksIHJlcXVpcmUoXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiKSwgcmVxdWlyZShcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIikpIDogZmFjdG9yeShyb290W1wiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIHJvb3RbXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgcm9vdFtcIkBzeW5jZnVzaW9uL2VqMi1wb3B1cHNcIl0pO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTZfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84NV9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDg5OTcyNWIzMGM4MjRhZWQzMDBkIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jaGFydC9pbmRleFwiLCBcIi4vYWNjdW11bGF0aW9uLWNoYXJ0L2luZGV4XCIsIFwiLi9jb21tb24vaW5kZXhcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRleF8xLCBpbmRleF8yLCBpbmRleF8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChpbmRleF8xKTtcbiAgICBfX2V4cG9ydChpbmRleF8yKTtcbiAgICBfX2V4cG9ydChpbmRleF8zKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi9jaGFydFwiLCBcIi4vYXhpcy9heGlzXCIsIFwiLi9heGlzL2RhdGUtdGltZS1heGlzXCIsIFwiLi9heGlzL2NhdGVnb3J5LWF4aXNcIiwgXCIuL2F4aXMvbG9nYXJpdGhtaWMtYXhpc1wiLCBcIi4vYXhpcy9zdHJpcC1saW5lXCIsIFwiLi4vY29tbW9uL21vZGVsL2Jhc2VcIiwgXCIuL3Nlcmllcy9saW5lLXNlcmllc1wiLCBcIi4vc2VyaWVzL2NvbHVtbi1zZXJpZXNcIiwgXCIuL3Nlcmllcy9hcmVhLXNlcmllc1wiLCBcIi4vc2VyaWVzL2Jhci1zZXJpZXNcIiwgXCIuL3Nlcmllcy9wb2xhci1zZXJpZXNcIiwgXCIuL3Nlcmllcy9yYWRhci1zZXJpZXNcIiwgXCIuL3Nlcmllcy9zdGFja2luZy1iYXItc2VyaWVzXCIsIFwiLi9zZXJpZXMvY2FuZGxlLXNlcmllc1wiLCBcIi4vc2VyaWVzL3N0YWNraW5nLWNvbHVtbi1zZXJpZXNcIiwgXCIuL3Nlcmllcy9zdGVwLWxpbmUtc2VyaWVzXCIsIFwiLi9zZXJpZXMvc3RlcC1hcmVhLXNlcmllc1wiLCBcIi4vc2VyaWVzL3N0YWNraW5nLWFyZWEtc2VyaWVzXCIsIFwiLi9zZXJpZXMvc2NhdHRlci1zZXJpZXNcIiwgXCIuL3Nlcmllcy9yYW5nZS1jb2x1bW4tc2VyaWVzXCIsIFwiLi9zZXJpZXMvd2F0ZXJmYWxsLXNlcmllc1wiLCBcIi4vc2VyaWVzL2hpbG8tc2VyaWVzXCIsIFwiLi9zZXJpZXMvaGlsby1vcGVuLWNsb3NlLXNlcmllc1wiLCBcIi4vc2VyaWVzL3JhbmdlLWFyZWEtc2VyaWVzXCIsIFwiLi9zZXJpZXMvYnViYmxlLXNlcmllc1wiLCBcIi4vc2VyaWVzL3NwbGluZS1zZXJpZXNcIiwgXCIuL3RlY2huaWNhbC1pbmRpY2F0b3JzL3RlY2huaWNhbC1pbmRpY2F0b3JcIiwgXCIuL3RlY2huaWNhbC1pbmRpY2F0b3JzL3NtYS1pbmRpY2F0b3JcIiwgXCIuL3RlY2huaWNhbC1pbmRpY2F0b3JzL2VtYS1pbmRpY2F0b3JcIiwgXCIuL3RlY2huaWNhbC1pbmRpY2F0b3JzL3RtYS1pbmRpY2F0b3JcIiwgXCIuL3RlY2huaWNhbC1pbmRpY2F0b3JzL2FkLWluZGljYXRvclwiLCBcIi4vdGVjaG5pY2FsLWluZGljYXRvcnMvYXRyLWluZGljYXRvclwiLCBcIi4vdGVjaG5pY2FsLWluZGljYXRvcnMvbW9tZW50dW0taW5kaWNhdG9yXCIsIFwiLi90ZWNobmljYWwtaW5kaWNhdG9ycy9yc2ktaW5kaWNhdG9yXCIsIFwiLi90ZWNobmljYWwtaW5kaWNhdG9ycy9zdG9jaGFzdGljLWluZGljYXRvclwiLCBcIi4vdGVjaG5pY2FsLWluZGljYXRvcnMvYm9sbGluZ2VyLWJhbmRzXCIsIFwiLi90ZWNobmljYWwtaW5kaWNhdG9ycy9tYWNkLWluZGljYXRvclwiLCBcIi4vdHJlbmQtbGluZXMvdHJlbmQtbGluZVwiLCBcIi4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL3VzZXItaW50ZXJhY3Rpb24vY3Jvc3NoYWlyXCIsIFwiLi91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXBcIiwgXCIuL3VzZXItaW50ZXJhY3Rpb24vem9vbWluZ1wiLCBcIi4vdXNlci1pbnRlcmFjdGlvbi9zZWxlY3Rpb25cIiwgXCIuL3Nlcmllcy9kYXRhLWxhYmVsXCIsIFwiLi9zZXJpZXMvZXJyb3ItYmFyXCIsIFwiLi9zZXJpZXMvY2hhcnQtc2VyaWVzXCIsIFwiLi9sZWdlbmQvbGVnZW5kXCIsIFwiLi9hbm5vdGF0aW9uL2Fubm90YXRpb25cIiwgXCIuL21vZGVsL2NoYXJ0LWJhc2VcIiwgXCIuL3Nlcmllcy9ib3gtYW5kLXdoaXNrZXItc2VyaWVzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2hhcnRfMSwgYXhpc18xLCBkYXRlX3RpbWVfYXhpc18xLCBjYXRlZ29yeV9heGlzXzEsIGxvZ2FyaXRobWljX2F4aXNfMSwgc3RyaXBfbGluZV8xLCBiYXNlXzEsIGxpbmVfc2VyaWVzXzEsIGNvbHVtbl9zZXJpZXNfMSwgYXJlYV9zZXJpZXNfMSwgYmFyX3Nlcmllc18xLCBwb2xhcl9zZXJpZXNfMSwgcmFkYXJfc2VyaWVzXzEsIHN0YWNraW5nX2Jhcl9zZXJpZXNfMSwgY2FuZGxlX3Nlcmllc18xLCBzdGFja2luZ19jb2x1bW5fc2VyaWVzXzEsIHN0ZXBfbGluZV9zZXJpZXNfMSwgc3RlcF9hcmVhX3Nlcmllc18xLCBzdGFja2luZ19hcmVhX3Nlcmllc18xLCBzY2F0dGVyX3Nlcmllc18xLCByYW5nZV9jb2x1bW5fc2VyaWVzXzEsIHdhdGVyZmFsbF9zZXJpZXNfMSwgaGlsb19zZXJpZXNfMSwgaGlsb19vcGVuX2Nsb3NlX3Nlcmllc18xLCByYW5nZV9hcmVhX3Nlcmllc18xLCBidWJibGVfc2VyaWVzXzEsIHNwbGluZV9zZXJpZXNfMSwgdGVjaG5pY2FsX2luZGljYXRvcl8xLCBzbWFfaW5kaWNhdG9yXzEsIGVtYV9pbmRpY2F0b3JfMSwgdG1hX2luZGljYXRvcl8xLCBhZF9pbmRpY2F0b3JfMSwgYXRyX2luZGljYXRvcl8xLCBtb21lbnR1bV9pbmRpY2F0b3JfMSwgcnNpX2luZGljYXRvcl8xLCBzdG9jaGFzdGljX2luZGljYXRvcl8xLCBib2xsaW5nZXJfYmFuZHNfMSwgbWFjZF9pbmRpY2F0b3JfMSwgdHJlbmRfbGluZV8xLCBoZWxwZXJfMSwgY3Jvc3NoYWlyXzEsIHRvb2x0aXBfMSwgem9vbWluZ18xLCBzZWxlY3Rpb25fMSwgZGF0YV9sYWJlbF8xLCBlcnJvcl9iYXJfMSwgY2hhcnRfc2VyaWVzXzEsIGxlZ2VuZF8xLCBhbm5vdGF0aW9uXzEsIGNoYXJ0X2Jhc2VfMSwgYm94X2FuZF93aGlza2VyX3Nlcmllc18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChjaGFydF8xKTtcbiAgICBfX2V4cG9ydChheGlzXzEpO1xuICAgIF9fZXhwb3J0KGRhdGVfdGltZV9heGlzXzEpO1xuICAgIF9fZXhwb3J0KGNhdGVnb3J5X2F4aXNfMSk7XG4gICAgX19leHBvcnQobG9nYXJpdGhtaWNfYXhpc18xKTtcbiAgICBfX2V4cG9ydChzdHJpcF9saW5lXzEpO1xuICAgIF9fZXhwb3J0KGJhc2VfMSk7XG4gICAgX19leHBvcnQobGluZV9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQoY29sdW1uX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChhcmVhX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChiYXJfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHBvbGFyX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChyYWRhcl9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQoc3RhY2tpbmdfYmFyX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChjYW5kbGVfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHN0YWNraW5nX2NvbHVtbl9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQoc3RlcF9saW5lX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChzdGVwX2FyZWFfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHN0YWNraW5nX2FyZWFfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHNjYXR0ZXJfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHJhbmdlX2NvbHVtbl9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQod2F0ZXJmYWxsX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChoaWxvX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChoaWxvX29wZW5fY2xvc2Vfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHJhbmdlX2FyZWFfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KGJ1YmJsZV9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQoc3BsaW5lX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydCh0ZWNobmljYWxfaW5kaWNhdG9yXzEpO1xuICAgIF9fZXhwb3J0KHNtYV9pbmRpY2F0b3JfMSk7XG4gICAgX19leHBvcnQoZW1hX2luZGljYXRvcl8xKTtcbiAgICBfX2V4cG9ydCh0bWFfaW5kaWNhdG9yXzEpO1xuICAgIF9fZXhwb3J0KGFkX2luZGljYXRvcl8xKTtcbiAgICBfX2V4cG9ydChhdHJfaW5kaWNhdG9yXzEpO1xuICAgIF9fZXhwb3J0KG1vbWVudHVtX2luZGljYXRvcl8xKTtcbiAgICBfX2V4cG9ydChyc2lfaW5kaWNhdG9yXzEpO1xuICAgIF9fZXhwb3J0KHN0b2NoYXN0aWNfaW5kaWNhdG9yXzEpO1xuICAgIF9fZXhwb3J0KGJvbGxpbmdlcl9iYW5kc18xKTtcbiAgICBfX2V4cG9ydChtYWNkX2luZGljYXRvcl8xKTtcbiAgICBfX2V4cG9ydCh0cmVuZF9saW5lXzEpO1xuICAgIF9fZXhwb3J0KGhlbHBlcl8xKTtcbiAgICBfX2V4cG9ydChjcm9zc2hhaXJfMSk7XG4gICAgX19leHBvcnQodG9vbHRpcF8xKTtcbiAgICBfX2V4cG9ydCh6b29taW5nXzEpO1xuICAgIF9fZXhwb3J0KHNlbGVjdGlvbl8xKTtcbiAgICBfX2V4cG9ydChkYXRhX2xhYmVsXzEpO1xuICAgIF9fZXhwb3J0KGVycm9yX2Jhcl8xKTtcbiAgICBfX2V4cG9ydChjaGFydF9zZXJpZXNfMSk7XG4gICAgX19leHBvcnQobGVnZW5kXzEpO1xuICAgIF9fZXhwb3J0KGFubm90YXRpb25fMSk7XG4gICAgX19leHBvcnQoY2hhcnRfYmFzZV8xKTtcbiAgICBfX2V4cG9ydChib3hfYW5kX3doaXNrZXJfc2VyaWVzXzEpO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBjb25zdGFudHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQnViYmxlU2VyaWVzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQnViYmxlU2VyaWVzKCkge1xuICAgICAgICB9XG4gICAgICAgIEJ1YmJsZVNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcywgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gc2VyaWVzLm1hcmtlcjtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlUG9pbnRzID0gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgIHZhciBzaGFwZU9wdGlvbjtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBzZWdtZW50UmFkaXVzO1xuICAgICAgICAgICAgdmFyIHJhZGl1cztcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IE1hdGgubWF4KHNlcmllcy5jaGFydC5pbml0aWFsQ2xpcFJlY3QuaGVpZ2h0LCBzZXJpZXMuY2hhcnQuaW5pdGlhbENsaXBSZWN0LndpZHRoKTtcbiAgICAgICAgICAgIHZhciBwZXJjZW50Q2hhbmdlID0gdmFsdWUgLyAxMDA7XG4gICAgICAgICAgICB2YXIgbWF4UmFkaXVzID0gc2VyaWVzLm1heFJhZGl1cyAqIHBlcmNlbnRDaGFuZ2U7XG4gICAgICAgICAgICB2YXIgbWluUmFkaXVzID0gc2VyaWVzLm1pblJhZGl1cyAqIHBlcmNlbnRDaGFuZ2U7XG4gICAgICAgICAgICB2YXIgbWF4aW11bVNpemUgPSBudWxsO1xuICAgICAgICAgICAgdmFyIG1heFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICgoc2VyaWVzLm1heFJhZGl1cyA9PT0gbnVsbCB8fCBzZXJpZXMubWluUmFkaXVzID09PSBudWxsKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMuY2hhcnQudmlzaWJsZVNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlXzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZV8xLnR5cGUgPT09ICdCdWJibGUnICYmIHZhbHVlXzEudmlzaWJsZSA9PT0gdHJ1ZSAmJiAodmFsdWVfMS5tYXhSYWRpdXMgPT09IG51bGwgfHwgdmFsdWVfMS5taW5SYWRpdXMgPT09IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtU2l6ZSA9IHZhbHVlXzEuc2l6ZU1heCA+IG1heGltdW1TaXplID8gdmFsdWVfMS5zaXplTWF4IDogbWF4aW11bVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWF4VmFsdWUgPSAodmFsdWUgLyA1KSAvIDI7XG4gICAgICAgICAgICAgICAgbWluUmFkaXVzID0gbWF4UmFkaXVzID0gMTtcbiAgICAgICAgICAgICAgICByYWRpdXMgPSBtYXhWYWx1ZSAqIG1heFJhZGl1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1heGltdW1TaXplID0gc2VyaWVzLnNpemVNYXg7XG4gICAgICAgICAgICAgICAgcmFkaXVzID0gbWF4UmFkaXVzIC0gbWluUmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCB2aXNpYmxlUG9pbnRzXzEgPSB2aXNpYmxlUG9pbnRzOyBfYiA8IHZpc2libGVQb2ludHNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYnViYmxlUG9pbnQgPSB2aXNpYmxlUG9pbnRzXzFbX2JdO1xuICAgICAgICAgICAgICAgIGJ1YmJsZVBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGJ1YmJsZVBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAoYnViYmxlUG9pbnQudmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMS53aXRoSW5SYW5nZSh2aXNpYmxlUG9pbnRzW2J1YmJsZVBvaW50LmluZGV4IC0gMV0sIGJ1YmJsZVBvaW50LCB2aXNpYmxlUG9pbnRzW2J1YmJsZVBvaW50LmluZGV4ICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgYnViYmxlUG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goaGVscGVyXzEuZ2V0UG9pbnQoYnViYmxlUG9pbnQueFZhbHVlLCBidWJibGVQb2ludC55VmFsdWUsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlcmllcy5tYXhSYWRpdXMgPT09IG51bGwgfHwgc2VyaWVzLm1pblJhZGl1cyA9PT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRSYWRpdXMgPSByYWRpdXMgKiBNYXRoLmFicygrYnViYmxlUG9pbnQuc2l6ZSAvIG1heGltdW1TaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRSYWRpdXMgPSBtaW5SYWRpdXMgKyByYWRpdXMgKiBNYXRoLmFicygrYnViYmxlUG9pbnQuc2l6ZSAvIG1heGltdW1TaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50UmFkaXVzID0gc2VnbWVudFJhZGl1cyB8fCBtaW5SYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEucG9pbnRSZW5kZXIsIHNlcmllczogc2VyaWVzLCBwb2ludDogYnViYmxlUG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBzZXJpZXMuc2V0UG9pbnRDb2xvcihidWJibGVQb2ludCwgc2VyaWVzLmludGVyaW9yKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogc2VyaWVzLnNldEJvcmRlckNvbG9yKGJ1YmJsZVBvaW50LCB7IHdpZHRoOiBzZXJpZXMuYm9yZGVyLndpZHRoLCBjb2xvcjogc2VyaWVzLmJvcmRlci5jb2xvciB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMiAqIHNlZ21lbnRSYWRpdXMsIHdpZHRoOiAyICogc2VnbWVudFJhZGl1c1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMuY2hhcnQudHJpZ2dlcihjb25zdGFudHNfMS5wb2ludFJlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnViYmxlUG9pbnQuY29sb3IgPSBhcmdzRGF0YS5maWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGVPcHRpb24gPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXggKyAnX1BvaW50XycgKyBidWJibGVQb2ludC5pbmRleCwgYXJnc0RhdGEuZmlsbCwgYXJnc0RhdGEuYm9yZGVyLndpZHRoLCBhcmdzRGF0YS5ib3JkZXIuY29sb3IsIHNlcmllcy5vcGFjaXR5LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKGhlbHBlcl8xLmRyYXdTeW1ib2woYnViYmxlUG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLCAnQ2lyY2xlJywgbmV3IGhlbHBlcl8xLlNpemUoYXJnc0RhdGEud2lkdGgsIGFyZ3NEYXRhLmhlaWdodCksIG1hcmtlci5pbWFnZVVybCwgc2hhcGVPcHRpb24sIGJ1YmJsZVBvaW50LngudG9TdHJpbmcoKSArICc6JyArIGJ1YmJsZVBvaW50LnlWYWx1ZS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGVQb2ludC5yZWdpb25zLnB1c2gobmV3IGhlbHBlcl8xLlJlY3QoYnViYmxlUG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnggLSBzZWdtZW50UmFkaXVzLCBidWJibGVQb2ludC5zeW1ib2xMb2NhdGlvbnNbMF0ueSAtIHNlZ21lbnRSYWRpdXMsIDIgKiBzZWdtZW50UmFkaXVzLCAyICogc2VnbWVudFJhZGl1cykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCdWJibGVTZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgQnViYmxlU2VyaWVzLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdCdWJibGVTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBCdWJibGVTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gc2VyaWVzLmFuaW1hdGlvbi5kdXJhdGlvbjtcbiAgICAgICAgICAgIHZhciBkZWxheSA9IHNlcmllcy5hbmltYXRpb24uZGVsYXk7XG4gICAgICAgICAgICB2YXIgcmVjdEVsZW1lbnRzID0gc2VyaWVzLnNlcmllc0VsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDE7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYnViYmxlUG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFidWJibGVQb2ludC5zeW1ib2xMb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWxwZXJfMS5tYXJrZXJBbmltYXRlKHJlY3RFbGVtZW50c1tjb3VudF0sIGRlbGF5LCBkdXJhdGlvbiwgc2VyaWVzLCBidWJibGVQb2ludC5pbmRleCwgYnViYmxlUG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJ1YmJsZVNlcmllcztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQnViYmxlU2VyaWVzID0gQnViYmxlU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvYnViYmxlLXNlcmllcy5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZnVuY3Rpb24gbWVhc3VyZVRleHQodGV4dCwgZm9udCkge1xuICAgICAgICB2YXIgaHRtbE9iamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydG1lYXN1cmV0ZXh0Jyk7XG4gICAgICAgIGlmIChodG1sT2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICBodG1sT2JqZWN0ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCd0ZXh0JywgeyBpZDogJ2NoYXJ0bWVhc3VyZXRleHQnIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChodG1sT2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgICBodG1sT2JqZWN0LmlubmVySFRNTCA9IHRleHQ7XG4gICAgICAgIGh0bWxPYmplY3Quc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBodG1sT2JqZWN0LnN0eWxlLmZvbnRTaXplID0gZm9udC5zaXplO1xuICAgICAgICBodG1sT2JqZWN0LnN0eWxlLmZvbnRXZWlnaHQgPSBmb250LmZvbnRXZWlnaHQ7XG4gICAgICAgIGh0bWxPYmplY3Quc3R5bGUuZm9udFN0eWxlID0gZm9udC5mb250U3R5bGU7XG4gICAgICAgIGh0bWxPYmplY3Quc3R5bGUuZm9udEZhbWlseSA9IGZvbnQuZm9udEZhbWlseTtcbiAgICAgICAgaHRtbE9iamVjdC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIGh0bWxPYmplY3Quc3R5bGUudG9wID0gJy0xMDAnO1xuICAgICAgICBodG1sT2JqZWN0LnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGh0bWxPYmplY3Quc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnO1xuICAgICAgICBodG1sT2JqZWN0LnN0eWxlLmxpbmVIZWlnaHQgPSAnbm9ybWFsJztcbiAgICAgICAgcmV0dXJuIG5ldyBTaXplKGh0bWxPYmplY3QuY2xpZW50V2lkdGgsIGh0bWxPYmplY3QuY2xpZW50SGVpZ2h0KTtcbiAgICB9XG4gICAgZXhwb3J0cy5tZWFzdXJlVGV4dCA9IG1lYXN1cmVUZXh0O1xuICAgIGZ1bmN0aW9uIHJvdGF0ZVRleHRTaXplKGZvbnQsIHRleHQsIGFuZ2xlLCBjaGFydCkge1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgZWoyX2Jhc2VfMS5TdmdSZW5kZXJlcihjaGFydC5lbGVtZW50LmlkKTtcbiAgICAgICAgdmFyIGJveDtcbiAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgIHZhciBodG1sT2JqZWN0O1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IGZvbnQuc2l6ZSxcbiAgICAgICAgICAgICdmb250LXN0eWxlJzogZm9udC5mb250U3R5bGUsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOiBmb250LmZvbnRGYW1pbHksXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBmb250LmZvbnRXZWlnaHQsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgYW5nbGUgKyAnLCAwLCAwKScsXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJ1xuICAgICAgICB9O1xuICAgICAgICBodG1sT2JqZWN0ID0gcmVuZGVyZXIuY3JlYXRlVGV4dChvcHRpb25zLCB0ZXh0KTtcbiAgICAgICAgaWYgKCFjaGFydC5kZWxheVJlZHJhdykge1xuICAgICAgICAgICAgY2hhcnQuZWxlbWVudC5hcHBlbmRDaGlsZChjaGFydC5zdmdPYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIGNoYXJ0LnN2Z09iamVjdC5hcHBlbmRDaGlsZChodG1sT2JqZWN0KTtcbiAgICAgICAgYm94ID0gaHRtbE9iamVjdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoaHRtbE9iamVjdCk7XG4gICAgICAgIGlmICghY2hhcnQuZGVsYXlSZWRyYXcpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGNoYXJ0LnN2Z09iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaXplKChib3gucmlnaHQgLSBib3gubGVmdCksIChib3guYm90dG9tIC0gYm94LnRvcCkpO1xuICAgIH1cbiAgICBleHBvcnRzLnJvdGF0ZVRleHRTaXplID0gcm90YXRlVGV4dFNpemU7XG4gICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChpZCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoaWQpO1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWoyX2Jhc2VfMy5yZW1vdmUoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5yZW1vdmVFbGVtZW50ID0gcmVtb3ZlRWxlbWVudDtcbiAgICBmdW5jdGlvbiBsb2dCYXNlKHZhbHVlLCBiYXNlKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLmxvZyhiYXNlKTtcbiAgICB9XG4gICAgZXhwb3J0cy5sb2dCYXNlID0gbG9nQmFzZTtcbiAgICBmdW5jdGlvbiBzaG93VG9vbHRpcCh0ZXh0LCB4LCB5LCBhcmVhV2lkdGgsIGlkLCBlbGVtZW50LCBpc1RvdWNoKSB7XG4gICAgICAgIHZhciB0b29sdGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dCh0ZXh0LCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnU2Vnb2UgVUknLCBzaXplOiAnMTJweCcsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdOb3JtYWwnLCBmb250V2VpZ2h0OiAnUmVndWxhcidcbiAgICAgICAgfSkud2lkdGggKyA1O1xuICAgICAgICB4ID0gKHggKyB3aWR0aCA+IGFyZWFXaWR0aCkgPyB4IC0gd2lkdGggOiB4O1xuICAgICAgICBpZiAoIXRvb2x0aXApIHtcbiAgICAgICAgICAgIHRvb2x0aXAgPSBlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHRleHQsXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ3RvcDonICsgKHkgKyAxNSkudG9TdHJpbmcoKSArICdweDtsZWZ0OicgKyAoeCArIDE1KS50b1N0cmluZygpICsgJ3B4O2JhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsnICtcbiAgICAgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uOmFic29sdXRlO2JvcmRlcjoxcHggc29saWQgcmdiKDExMiwgMTEyLCAxMTIpOyBwYWRkaW5nLWxlZnQgOiAzcHg7IHBhZGRpbmctcmlnaHQgOiAycHg7JyArXG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nLWJvdHRvbSA6IDJweDsgcGFkZGluZy10b3AgOiAycHg7IGZvbnQtc2l6ZToxMnB4OyBmb250LWZhbWlseTogXCJTZWdvZSBVSVwiJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRvb2x0aXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9vbHRpcC5pbm5lckhUTUwgPSB0ZXh0O1xuICAgICAgICAgICAgdG9vbHRpcC5zdHlsZS50b3AgPSAoeSArIDE1KS50b1N0cmluZygpICsgJ3B4JztcbiAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9ICh4ICsgMTUpLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1RvdWNoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmVtb3ZlRWxlbWVudChpZCk7IH0sIDE1MDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuc2hvd1Rvb2x0aXAgPSBzaG93VG9vbHRpcDtcbiAgICBmdW5jdGlvbiBpbnNpZGUodmFsdWUsIHJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodmFsdWUgPCByYW5nZS5tYXgpICYmICh2YWx1ZSA+IHJhbmdlLm1pbik7XG4gICAgfVxuICAgIGV4cG9ydHMuaW5zaWRlID0gaW5zaWRlO1xuICAgIGZ1bmN0aW9uIHdpdGhJbih2YWx1ZSwgcmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh2YWx1ZSA8PSByYW5nZS5tYXgpICYmICh2YWx1ZSA+PSByYW5nZS5taW4pO1xuICAgIH1cbiAgICBleHBvcnRzLndpdGhJbiA9IHdpdGhJbjtcbiAgICBmdW5jdGlvbiB3aXRoSW5SYW5nZShwcmV2aW91c1BvaW50LCBjdXJyZW50UG9pbnQsIG5leHRQb2ludCwgc2VyaWVzKSB7XG4gICAgICAgIHZhciBtWDIgPSBzZXJpZXMubG9nV2l0aEluKGN1cnJlbnRQb2ludC54VmFsdWUsIHNlcmllcy54QXhpcyk7XG4gICAgICAgIHZhciBtWDEgPSBwcmV2aW91c1BvaW50ID8gc2VyaWVzLmxvZ1dpdGhJbihwcmV2aW91c1BvaW50LnhWYWx1ZSwgc2VyaWVzLnhBeGlzKSA6IG1YMjtcbiAgICAgICAgdmFyIG1YMyA9IG5leHRQb2ludCA/IHNlcmllcy5sb2dXaXRoSW4obmV4dFBvaW50LnhWYWx1ZSwgc2VyaWVzLnhBeGlzKSA6IG1YMjtcbiAgICAgICAgdmFyIHhTdGFydCA9IE1hdGguZmxvb3Ioc2VyaWVzLnhBeGlzLnZpc2libGVSYW5nZS5taW4pO1xuICAgICAgICB2YXIgeEVuZCA9IE1hdGguY2VpbChzZXJpZXMueEF4aXMudmlzaWJsZVJhbmdlLm1heCk7XG4gICAgICAgIHJldHVybiAoKG1YMSA+PSB4U3RhcnQgJiYgbVgxIDw9IHhFbmQpIHx8IChtWDIgPj0geFN0YXJ0ICYmIG1YMiA8PSB4RW5kKSB8fFxuICAgICAgICAgICAgKG1YMyA+PSB4U3RhcnQgJiYgbVgzIDw9IHhFbmQpIHx8ICh4U3RhcnQgPj0gbVgxICYmIHhTdGFydCA8PSBtWDMpKTtcbiAgICB9XG4gICAgZXhwb3J0cy53aXRoSW5SYW5nZSA9IHdpdGhJblJhbmdlO1xuICAgIGZ1bmN0aW9uIHN1bSh2YWx1ZXMpIHtcbiAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgdmFsdWVzXzEgPSB2YWx1ZXM7IF9pIDwgdmFsdWVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNfMVtfaV07XG4gICAgICAgICAgICBzdW0gKz0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1bTtcbiAgICB9XG4gICAgZXhwb3J0cy5zdW0gPSBzdW07XG4gICAgZnVuY3Rpb24gc3ViQXJyYXlTdW0odmFsdWVzLCBmaXJzdCwgbGFzdCwgaW5kZXgsIHNlcmllcykge1xuICAgICAgICB2YXIgc3VtID0gMDtcbiAgICAgICAgaWYgKGluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKGZpcnN0ICsgMSk7IGkgPCBsYXN0OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXguaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHZhbHVlc1tpXVtzZXJpZXMueU5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoZmlyc3QgKyAxKTsgaSA8IGxhc3Q7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1bSArPSB2YWx1ZXNbaV1bc2VyaWVzLnlOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VtO1xuICAgIH1cbiAgICBleHBvcnRzLnN1YkFycmF5U3VtID0gc3ViQXJyYXlTdW07XG4gICAgZnVuY3Rpb24gc3VidHJhY3RUaGlja25lc3MocmVjdCwgdGhpY2tuZXNzKSB7XG4gICAgICAgIHJlY3QueCArPSB0aGlja25lc3MubGVmdDtcbiAgICAgICAgcmVjdC55ICs9IHRoaWNrbmVzcy50b3A7XG4gICAgICAgIHJlY3Qud2lkdGggLT0gdGhpY2tuZXNzLmxlZnQgKyB0aGlja25lc3MucmlnaHQ7XG4gICAgICAgIHJlY3QuaGVpZ2h0IC09IHRoaWNrbmVzcy50b3AgKyB0aGlja25lc3MuYm90dG9tO1xuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICB9XG4gICAgZXhwb3J0cy5zdWJ0cmFjdFRoaWNrbmVzcyA9IHN1YnRyYWN0VGhpY2tuZXNzO1xuICAgIGZ1bmN0aW9uIHN1YnRyYWN0UmVjdChyZWN0LCB0aGlja25lc3MpIHtcbiAgICAgICAgcmVjdC54ICs9IHRoaWNrbmVzcy54O1xuICAgICAgICByZWN0LnkgKz0gdGhpY2tuZXNzLnk7XG4gICAgICAgIHJlY3Qud2lkdGggLT0gdGhpY2tuZXNzLnggKyB0aGlja25lc3Mud2lkdGg7XG4gICAgICAgIHJlY3QuaGVpZ2h0IC09IHRoaWNrbmVzcy55ICsgdGhpY2tuZXNzLmhlaWdodDtcbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgfVxuICAgIGV4cG9ydHMuc3VidHJhY3RSZWN0ID0gc3VidHJhY3RSZWN0O1xuICAgIGZ1bmN0aW9uIGRlZ3JlZVRvTG9jYXRpb24oZGVncmVlLCByYWRpdXMsIGNlbnRlcikge1xuICAgICAgICB2YXIgcmFkaWFuID0gKGRlZ3JlZSAqIE1hdGguUEkpIC8gMTgwO1xuICAgICAgICByZXR1cm4gbmV3IENoYXJ0TG9jYXRpb24oTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cyArIGNlbnRlci54LCBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzICsgY2VudGVyLnkpO1xuICAgIH1cbiAgICBleHBvcnRzLmRlZ3JlZVRvTG9jYXRpb24gPSBkZWdyZWVUb0xvY2F0aW9uO1xuICAgIGZ1bmN0aW9uIGdldEFjY3VtdWxhdGlvbkxlZ2VuZChsb2NYLCBsb2NZLCByLCBoZWlnaHQsIHdpZHRoLCBtb2RlKSB7XG4gICAgICAgIHZhciBjYXJ0ZXNpYW5sYXJnZSA9IGRlZ3JlZVRvTG9jYXRpb24oMjcwLCByLCBuZXcgQ2hhcnRMb2NhdGlvbihsb2NYLCBsb2NZKSk7XG4gICAgICAgIHZhciBjYXJ0ZXNpYW5zbWFsbCA9IGRlZ3JlZVRvTG9jYXRpb24oMjcwLCByLCBuZXcgQ2hhcnRMb2NhdGlvbihsb2NYICsgKHdpZHRoIC8gMTApLCBsb2NZKSk7XG4gICAgICAgIHJldHVybiAnTScgKyAnICcgKyBsb2NYICsgJyAnICsgbG9jWSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgcikgKyAnICcgKyAobG9jWSkgKyAnICcgKyAnQScgKyAnICcgKyAocikgKyAnICcgKyAocikgK1xuICAgICAgICAgICAgJyAnICsgMCArICcgJyArIDEgKyAnICcgKyAxICsgJyAnICsgY2FydGVzaWFubGFyZ2UueCArICcgJyArIGNhcnRlc2lhbmxhcmdlLnkgKyAnICcgKyAnWicgKyAnICcgKyAnTScgKyAnICcgKyAobG9jWCArXG4gICAgICAgICAgICAod2lkdGggLyAxMCkpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gMTApKSArICcgJyArICdMJyArIChsb2NYICsgKHIpKSArICcgJyArIChsb2NZIC0gaGVpZ2h0IC8gMTApICsgJyAnICsgJ0EnICsgJyAnXG4gICAgICAgICAgICArIChyKSArICcgJyArIChyKSArICcgJyArIDAgKyAnICcgKyAwICsgJyAnICsgMCArICcgJyArIGNhcnRlc2lhbnNtYWxsLnggKyAnICcgKyBjYXJ0ZXNpYW5zbWFsbC55ICsgJyAnICsgJ1onO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRBbmdsZShjZW50ZXIsIHBvaW50KSB7XG4gICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoKHBvaW50LnkgLSBjZW50ZXIueSksIChwb2ludC54IC0gY2VudGVyLngpKTtcbiAgICAgICAgYW5nbGUgPSBhbmdsZSA8IDAgPyAoNi4yODMgKyBhbmdsZSkgOiBhbmdsZTtcbiAgICAgICAgcmV0dXJuIGFuZ2xlICogKDE4MCAvIE1hdGguUEkpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEFuZ2xlID0gZ2V0QW5nbGU7XG4gICAgZnVuY3Rpb24gc3ViQXJyYXkodmFsdWVzLCBpbmRleCkge1xuICAgICAgICB2YXIgc3ViQXJyYXkgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gaW5kZXggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIHN1YkFycmF5LnB1c2godmFsdWVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ViQXJyYXk7XG4gICAgfVxuICAgIGV4cG9ydHMuc3ViQXJyYXkgPSBzdWJBcnJheTtcbiAgICBmdW5jdGlvbiB2YWx1ZVRvQ29lZmZpY2llbnQodmFsdWUsIGF4aXMpIHtcbiAgICAgICAgdmFyIHJhbmdlID0gYXhpcy52aXNpYmxlUmFuZ2U7XG4gICAgICAgIHZhciByZXN1bHQgPSAodmFsdWUgLSByYW5nZS5taW4pIC8gKHJhbmdlLmRlbHRhKTtcbiAgICAgICAgcmV0dXJuIGF4aXMuaXNJbnZlcnNlZCA/ICgxIC0gcmVzdWx0KSA6IHJlc3VsdDtcbiAgICB9XG4gICAgZXhwb3J0cy52YWx1ZVRvQ29lZmZpY2llbnQgPSB2YWx1ZVRvQ29lZmZpY2llbnQ7XG4gICAgZnVuY3Rpb24gVHJhbnNmb3JtVG9WaXNpYmxlKHgsIHksIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKSB7XG4gICAgICAgIHggPSAoeEF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnID8gbG9nQmFzZSh4LCB4QXhpcy5sb2dCYXNlKSA6IHgpO1xuICAgICAgICB5ID0gKHlBeGlzLnZhbHVlVHlwZSA9PT0gJ0xvZ2FyaXRobWljJyA/XG4gICAgICAgICAgICBsb2dCYXNlKHkgPT09IDAgPyAxIDogeSwgeUF4aXMubG9nQmFzZSkgOiB5KTtcbiAgICAgICAgeCArPSB4QXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgeEF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnICYmIHNlcmllcy50eXBlICE9PSAnUmFkYXInID8gMC41IDogMDtcbiAgICAgICAgdmFyIHJhZGl1cyA9IHNlcmllcy5jaGFydC5yYWRpdXMgKiB2YWx1ZVRvQ29lZmZpY2llbnQoeSwgeUF4aXMpO1xuICAgICAgICB2YXIgcG9pbnQgPSBDb2VmZmljaWVudFRvVmVjdG9yKHZhbHVlVG9Qb2xhckNvZWZmaWNpZW50KHgsIHhBeGlzKSwgc2VyaWVzLmNoYXJ0LnByaW1hcnlYQXhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IChzZXJpZXMuY2xpcFJlY3Qud2lkdGggLyAyICsgc2VyaWVzLmNsaXBSZWN0LngpICsgcmFkaXVzICogcG9pbnQueCxcbiAgICAgICAgICAgIHk6IChzZXJpZXMuY2xpcFJlY3QuaGVpZ2h0IC8gMiArIHNlcmllcy5jbGlwUmVjdC55KSArIHJhZGl1cyAqIHBvaW50LnlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5UcmFuc2Zvcm1Ub1Zpc2libGUgPSBUcmFuc2Zvcm1Ub1Zpc2libGU7XG4gICAgZnVuY3Rpb24gQ29lZmZpY2llbnRUb1ZlY3Rvcihjb2VmZmljaWVudCwgc3RhcnRBbmdsZSkge1xuICAgICAgICBzdGFydEFuZ2xlID0gc3RhcnRBbmdsZSA8IDAgPyBzdGFydEFuZ2xlICsgMzYwIDogc3RhcnRBbmdsZTtcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5QSSAqICgxLjUgLSAyICogY29lZmZpY2llbnQpO1xuICAgICAgICBhbmdsZSA9IGFuZ2xlICsgKHN0YXJ0QW5nbGUgKiBNYXRoLlBJKSAvIDE4MDtcbiAgICAgICAgcmV0dXJuIHsgeDogTWF0aC5jb3MoYW5nbGUpLCB5OiBNYXRoLnNpbihhbmdsZSkgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5Db2VmZmljaWVudFRvVmVjdG9yID0gQ29lZmZpY2llbnRUb1ZlY3RvcjtcbiAgICBmdW5jdGlvbiB2YWx1ZVRvUG9sYXJDb2VmZmljaWVudCh2YWx1ZSwgYXhpcykge1xuICAgICAgICB2YXIgcmFuZ2UgPSBheGlzLnZpc2libGVSYW5nZTtcbiAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICB2YXIgbGVuZ3RoO1xuICAgICAgICBpZiAoYXhpcy52YWx1ZVR5cGUgIT09ICdDYXRlZ29yeScpIHtcbiAgICAgICAgICAgIGRlbHRhID0gKHJhbmdlLm1heCAtIChheGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJyA/IGF4aXMuZGF0ZVRpbWVJbnRlcnZhbCA6IHJhbmdlLmludGVydmFsKSkgLSByYW5nZS5taW47XG4gICAgICAgICAgICBsZW5ndGggPSBheGlzLnZpc2libGVMYWJlbHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgPT09IDAgPyAxIDogZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWx0YSA9IHJhbmdlLmRlbHRhO1xuICAgICAgICAgICAgbGVuZ3RoID0gYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXhpcy5pc0ludmVyc2VkID8gKCh2YWx1ZSAtIHJhbmdlLm1pbikgLyBkZWx0YSkgKiAoMSAtIDEgLyAobGVuZ3RoKSkgOlxuICAgICAgICAgICAgMSAtICgodmFsdWUgLSByYW5nZS5taW4pIC8gZGVsdGEpICogKDEgLSAxIC8gKGxlbmd0aCkpO1xuICAgIH1cbiAgICBleHBvcnRzLnZhbHVlVG9Qb2xhckNvZWZmaWNpZW50ID0gdmFsdWVUb1BvbGFyQ29lZmZpY2llbnQ7XG4gICAgdmFyIE1lYW4gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBNZWFuKHZlcnRpY2FsU3RhbmRhcmRNZWFuLCB2ZXJ0aWNhbFNxdWFyZVJvb3QsIGhvcml6b250YWxTdGFuZGFyZE1lYW4sIGhvcml6b250YWxTcXVhcmVSb290LCB2ZXJ0aWNhbE1lYW4sIGhvcml6b250YWxNZWFuKSB7XG4gICAgICAgICAgICB0aGlzLnZlcnRpY2FsU3RhbmRhcmRNZWFuID0gdmVydGljYWxTdGFuZGFyZE1lYW47XG4gICAgICAgICAgICB0aGlzLmhvcml6b250YWxTdGFuZGFyZE1lYW4gPSBob3Jpem9udGFsU3RhbmRhcmRNZWFuO1xuICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbFNxdWFyZVJvb3QgPSB2ZXJ0aWNhbFNxdWFyZVJvb3Q7XG4gICAgICAgICAgICB0aGlzLmhvcml6b250YWxTcXVhcmVSb290ID0gaG9yaXpvbnRhbFNxdWFyZVJvb3Q7XG4gICAgICAgICAgICB0aGlzLnZlcnRpY2FsTWVhbiA9IHZlcnRpY2FsTWVhbjtcbiAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbE1lYW4gPSBob3Jpem9udGFsTWVhbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWVhbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuTWVhbiA9IE1lYW47XG4gICAgdmFyIFBvbGFyQXJjID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUG9sYXJBcmMoc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGlubmVyUmFkaXVzLCByYWRpdXMsIGN1cnJlbnRYUG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRBbmdsZSA9IHN0YXJ0QW5nbGU7XG4gICAgICAgICAgICB0aGlzLmVuZEFuZ2xlID0gZW5kQW5nbGU7XG4gICAgICAgICAgICB0aGlzLmlubmVyUmFkaXVzID0gaW5uZXJSYWRpdXM7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFhQb3NpdGlvbiA9IGN1cnJlbnRYUG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBvbGFyQXJjO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5Qb2xhckFyYyA9IFBvbGFyQXJjO1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXAoaWQsIHRleHQsIHRvcCwgbGVmdCwgZm9udFNpemUpIHtcbiAgICAgICAgdmFyIHRvb2x0aXAgPSBnZXRFbGVtZW50KGlkKTtcbiAgICAgICAgdmFyIHN0eWxlID0gJ3RvcDonICsgdG9wLnRvU3RyaW5nKCkgKyAncHg7JyArXG4gICAgICAgICAgICAnbGVmdDonICsgbGVmdC50b1N0cmluZygpICsgJ3B4OycgK1xuICAgICAgICAgICAgJ2JhY2tncm91bmQ6JyArICcjRkZGRkZGJyArICc7JyArXG4gICAgICAgICAgICAncG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjFweCBzb2xpZCAjNzA3MDcwO2ZvbnQtc2l6ZTonICsgZm9udFNpemUgKyAnO2JvcmRlci1yYWRpdXM6MnB4Oyc7XG4gICAgICAgIGlmICghdG9vbHRpcCkge1xuICAgICAgICAgICAgdG9vbHRpcCA9IGVqMl9iYXNlXzMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiBpZCwgaW5uZXJIVE1MOiAnJm5ic3A7JyArIHRleHQgKyAnJm5ic3A7Jywgc3R5bGVzOiBzdHlsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9vbHRpcC5zZXRBdHRyaWJ1dGUoJ2lubmVySFRNTCcsICcmbmJzcDsnICsgdGV4dCArICcmbmJzcDsnKTtcbiAgICAgICAgICAgIHRvb2x0aXAuc2V0QXR0cmlidXRlKCdzdHlsZXMnLCBzdHlsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVUb29sdGlwID0gY3JlYXRlVG9vbHRpcDtcbiAgICBmdW5jdGlvbiBjcmVhdGVab29taW5nTGFiZWxzKGNoYXJ0LCBheGlzLCBwYXJlbnQsIGluZGV4LCBpc1ZlcnRpY2FsKSB7XG4gICAgICAgIHZhciBtYXJnaW4gPSA1O1xuICAgICAgICB2YXIgb3Bwb3NlZFBvc2l0aW9uID0gYXhpcy5vcHBvc2VkUG9zaXRpb247XG4gICAgICAgIHZhciBhbmNob3IgPSBpc1ZlcnRpY2FsID8gJ3N0YXJ0JyA6ICdhdXRvJztcbiAgICAgICAgdmFyIHNpemU7XG4gICAgICAgIHZhciBjaGFydFJlY3QgPSBjaGFydC5hdmFpbGFibGVTaXplLndpZHRoO1xuICAgICAgICB2YXIgeDtcbiAgICAgICAgdmFyIHk7XG4gICAgICAgIHZhciByeCA9IDM7XG4gICAgICAgIHZhciBhcnJvd0xvY2F0aW9uO1xuICAgICAgICB2YXIgcmVjdCA9IGF4aXMucmVjdDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgICAgICAgIHNpemUgPSBtZWFzdXJlVGV4dChpID8gYXhpcy5lbmRMYWJlbCA6IGF4aXMuc3RhcnRMYWJlbCwgYXhpcy5sYWJlbFN0eWxlKTtcbiAgICAgICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgYXJyb3dMb2NhdGlvbiA9IGkgPyBuZXcgQ2hhcnRMb2NhdGlvbihyZWN0LngsIHJlY3QueSArIHJ4KSA6XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDaGFydExvY2F0aW9uKGF4aXMucmVjdC54LCAocmVjdC55ICsgcmVjdC5oZWlnaHQgLSByeCkpO1xuICAgICAgICAgICAgICAgIHggPSAocmVjdC54ICsgKG9wcG9zZWRQb3NpdGlvbiA/IChyZWN0LndpZHRoICsgbWFyZ2luKSA6IC0oc2l6ZS53aWR0aCArIG1hcmdpbiArIG1hcmdpbikpKTtcbiAgICAgICAgICAgICAgICB5ID0gKHJlY3QueSArIChpID8gMCA6IHJlY3QuaGVpZ2h0IC0gc2l6ZS5oZWlnaHQgLSBtYXJnaW4pKTtcbiAgICAgICAgICAgICAgICB4ICs9ICh4IDwgMCB8fCAoKGNoYXJ0UmVjdCkgPCAoeCArIHNpemUud2lkdGggKyBtYXJnaW4pKSkgPyAob3Bwb3NlZFBvc2l0aW9uID8gLShzaXplLndpZHRoIC8gMikgOiBzaXplLndpZHRoIC8gMikgOiAwO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGZpbmREaXJlY3Rpb24ocngsIHJ4LCBuZXcgUmVjdCh4LCB5LCBzaXplLndpZHRoICsgbWFyZ2luLCBzaXplLmhlaWdodCArIG1hcmdpbiksIGFycm93TG9jYXRpb24sIG1hcmdpbiwgZmFsc2UsIGZhbHNlLCAhb3Bwb3NlZFBvc2l0aW9uLCBhcnJvd0xvY2F0aW9uLngsIGFycm93TG9jYXRpb24ueSArIChpID8gLXJ4IDogcngpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFycm93TG9jYXRpb24gPSBpID8gbmV3IENoYXJ0TG9jYXRpb24oKHJlY3QueCArIHJlY3Qud2lkdGggLSByeCksIChyZWN0LnkgKyByZWN0LmhlaWdodCkpIDpcbiAgICAgICAgICAgICAgICAgICAgbmV3IENoYXJ0TG9jYXRpb24ocmVjdC54ICsgcngsIChyZWN0LnkgKyByZWN0LmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIHggPSAocmVjdC54ICsgKGkgPyAocmVjdC53aWR0aCAtIHNpemUud2lkdGggLSBtYXJnaW4pIDogMCkpO1xuICAgICAgICAgICAgICAgIHkgPSAob3Bwb3NlZFBvc2l0aW9uID8gKHJlY3QueSAtIHNpemUuaGVpZ2h0IC0gMTApIDogKHJlY3QueSArIHJlY3QuaGVpZ2h0ICsgbWFyZ2luKSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZmluZERpcmVjdGlvbihyeCwgcngsIG5ldyBSZWN0KHgsIHksIHNpemUud2lkdGggKyBtYXJnaW4sIHNpemUuaGVpZ2h0ICsgbWFyZ2luKSwgYXJyb3dMb2NhdGlvbiwgbWFyZ2luLCBvcHBvc2VkUG9zaXRpb24sICFvcHBvc2VkUG9zaXRpb24sIGZhbHNlLCBhcnJvd0xvY2F0aW9uLnggKyAoaSA/IHJ4IDogLXJ4KSwgYXJyb3dMb2NhdGlvbi55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHggPSB4ICsgKG1hcmdpbiAvIDIpO1xuICAgICAgICAgICAgeSA9IHkgKyAoMyAqIChzaXplLmhlaWdodCAvIDQpKSArIChtYXJnaW4gLyAyKTtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGFydC5yZW5kZXJlci5kcmF3UGF0aChuZXcgUGF0aE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgJ19ab29tXycgKyBpbmRleCArICdfQXhpc0xhYmVsX1NoYXBlXycgKyBpLCAnIzQxNDE0MScsIDIsICcjNDE0MTQxJywgMSwgbnVsbCwgZGlyZWN0aW9uKSkpO1xuICAgICAgICAgICAgdGV4dEVsZW1lbnQobmV3IFRleHRPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArICdfWm9vbV8nICsgaW5kZXggKyAnX0F4aXNMYWJlbF8nICsgaSwgeCwgeSwgYW5jaG9yLCBpID8gYXhpcy5lbmRMYWJlbCA6IGF4aXMuc3RhcnRMYWJlbCksIHsgY29sb3I6ICd3aGl0ZScsIGZvbnRGYW1pbHk6ICdTZWdvZSBVSScsIGZvbnRXZWlnaHQ6ICdSZWd1bGFyJywgc2l6ZTogJzExcHgnIH0sICd3aGl0ZScsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVab29taW5nTGFiZWxzID0gY3JlYXRlWm9vbWluZ0xhYmVscztcbiAgICBmdW5jdGlvbiB3aXRoSW5Cb3VuZHMoeCwgeSwgYm91bmRzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gdm9pZCAwKSB7IHdpZHRoID0gMDsgfVxuICAgICAgICBpZiAoaGVpZ2h0ID09PSB2b2lkIDApIHsgaGVpZ2h0ID0gMDsgfVxuICAgICAgICByZXR1cm4gKHggPj0gYm91bmRzLnggLSB3aWR0aCAmJiB4IDw9IGJvdW5kcy54ICsgYm91bmRzLndpZHRoICsgd2lkdGggJiYgeSA+PSBib3VuZHMueSAtIGhlaWdodFxuICAgICAgICAgICAgJiYgeSA8PSBib3VuZHMueSArIGJvdW5kcy5oZWlnaHQgKyBoZWlnaHQpO1xuICAgIH1cbiAgICBleHBvcnRzLndpdGhJbkJvdW5kcyA9IHdpdGhJbkJvdW5kcztcbiAgICBmdW5jdGlvbiBnZXRWYWx1ZVhCeVBvaW50KHZhbHVlLCBzaXplLCBheGlzKSB7XG4gICAgICAgIHZhciBhY3R1YWxWYWx1ZSA9ICFheGlzLmlzSW52ZXJzZWQgPyB2YWx1ZSAvIHNpemUgOiAoMSAtICh2YWx1ZSAvIHNpemUpKTtcbiAgICAgICAgcmV0dXJuIGFjdHVhbFZhbHVlICogKGF4aXMudmlzaWJsZVJhbmdlLmRlbHRhKSArIGF4aXMudmlzaWJsZVJhbmdlLm1pbjtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRWYWx1ZVhCeVBvaW50ID0gZ2V0VmFsdWVYQnlQb2ludDtcbiAgICBmdW5jdGlvbiBnZXRWYWx1ZVlCeVBvaW50KHZhbHVlLCBzaXplLCBheGlzKSB7XG4gICAgICAgIHZhciBhY3R1YWxWYWx1ZSA9IGF4aXMuaXNJbnZlcnNlZCA/IHZhbHVlIC8gc2l6ZSA6ICgxIC0gKHZhbHVlIC8gc2l6ZSkpO1xuICAgICAgICByZXR1cm4gYWN0dWFsVmFsdWUgKiAoYXhpcy52aXNpYmxlUmFuZ2UuZGVsdGEpICsgYXhpcy52aXNpYmxlUmFuZ2UubWluO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFZhbHVlWUJ5UG9pbnQgPSBnZXRWYWx1ZVlCeVBvaW50O1xuICAgIGZ1bmN0aW9uIGZpbmRDbGlwUmVjdChzZXJpZXMpIHtcbiAgICAgICAgdmFyIHJlY3QgPSBzZXJpZXMuY2xpcFJlY3Q7XG4gICAgICAgIGlmIChzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgcmVjdC54ID0gc2VyaWVzLnlBeGlzLnJlY3QueDtcbiAgICAgICAgICAgIHJlY3QueSA9IHNlcmllcy54QXhpcy5yZWN0Lnk7XG4gICAgICAgICAgICByZWN0LndpZHRoID0gc2VyaWVzLnlBeGlzLnJlY3Qud2lkdGg7XG4gICAgICAgICAgICByZWN0LmhlaWdodCA9IHNlcmllcy54QXhpcy5yZWN0LmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlY3QueCA9IHNlcmllcy54QXhpcy5yZWN0Lng7XG4gICAgICAgICAgICByZWN0LnkgPSBzZXJpZXMueUF4aXMucmVjdC55O1xuICAgICAgICAgICAgcmVjdC53aWR0aCA9IHNlcmllcy54QXhpcy5yZWN0LndpZHRoO1xuICAgICAgICAgICAgcmVjdC5oZWlnaHQgPSBzZXJpZXMueUF4aXMucmVjdC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0cy5maW5kQ2xpcFJlY3QgPSBmaW5kQ2xpcFJlY3Q7XG4gICAgZnVuY3Rpb24gZmlyc3RUb0xvd2VyQ2FzZShzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgMSkudG9Mb3dlckNhc2UoKSArIHN0ci5zdWJzdHIoMSk7XG4gICAgfVxuICAgIGV4cG9ydHMuZmlyc3RUb0xvd2VyQ2FzZSA9IGZpcnN0VG9Mb3dlckNhc2U7XG4gICAgZnVuY3Rpb24gZ2V0TWluUG9pbnRzRGVsdGEoYXhpcywgc2VyaWVzQ29sbGVjdGlvbikge1xuICAgICAgICB2YXIgbWluRGVsdGEgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgICB2YXIgeFZhbHVlcztcbiAgICAgICAgdmFyIG1pblZhbDtcbiAgICAgICAgc2VyaWVzQ29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChzZXJpZXMsIGluZGV4KSB7XG4gICAgICAgICAgICB4VmFsdWVzID0gW107XG4gICAgICAgICAgICBpZiAoc2VyaWVzLnZpc2libGUgJiZcbiAgICAgICAgICAgICAgICAoYXhpcy5uYW1lID09PSBzZXJpZXMueEF4aXNOYW1lIHx8IChheGlzLm5hbWUgPT09ICdwcmltYXJ5WEF4aXMnICYmIHNlcmllcy54QXhpc05hbWUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHx8IChheGlzLm5hbWUgPT09IHNlcmllcy5jaGFydC5wcmltYXJ5WEF4aXMubmFtZSAmJiAhc2VyaWVzLnhBeGlzTmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgeFZhbHVlcyA9IHNlcmllcy5wb2ludHMubWFwKGZ1bmN0aW9uIChwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50LnhWYWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB4VmFsdWVzLnNvcnQoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsgcmV0dXJuIGZpcnN0IC0gc2Vjb25kOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoeFZhbHVlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsID0geFZhbHVlc1swXSAtICgoc2VyaWVzLnhNaW4gJiYgc2VyaWVzLnhBeGlzLnZhbHVlVHlwZSAhPT0gJ0RhdGVUaW1lJykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnhNaW4gOiBheGlzLnZpc2libGVSYW5nZS5taW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWluVmFsICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5EZWx0YSA9IE1hdGgubWluKG1pbkRlbHRhLCBtaW5WYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB4VmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgeFZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblZhbCA9IHZhbHVlIC0geFZhbHVlc1tpbmRleCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW5WYWwgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRGVsdGEgPSBNYXRoLm1pbihtaW5EZWx0YSwgbWluVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtaW5EZWx0YSA9PT0gTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgICAgICAgbWluRGVsdGEgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW5EZWx0YTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRNaW5Qb2ludHNEZWx0YSA9IGdldE1pblBvaW50c0RlbHRhO1xuICAgIGZ1bmN0aW9uIGdldEFuaW1hdGlvbkZ1bmN0aW9uKGVmZmVjdCkge1xuICAgICAgICB2YXIgZnVuY3Rpb25OYW1lO1xuICAgICAgICBzd2l0Y2ggKGVmZmVjdCkge1xuICAgICAgICAgICAgY2FzZSAnTGluZWFyJzpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBsaW5lYXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uTmFtZTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRBbmltYXRpb25GdW5jdGlvbiA9IGdldEFuaW1hdGlvbkZ1bmN0aW9uO1xuICAgIGZ1bmN0aW9uIGxpbmVhcihjdXJyZW50VGltZSwgc3RhcnRWYWx1ZSwgZW5kVmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHJldHVybiAtZW5kVmFsdWUgKiBNYXRoLmNvcyhjdXJyZW50VGltZSAvIGR1cmF0aW9uICogKE1hdGguUEkgLyAyKSkgKyBlbmRWYWx1ZSArIHN0YXJ0VmFsdWU7XG4gICAgfVxuICAgIGV4cG9ydHMubGluZWFyID0gbGluZWFyO1xuICAgIGZ1bmN0aW9uIG1hcmtlckFuaW1hdGUoZWxlbWVudCwgZGVsYXksIGR1cmF0aW9uLCBzZXJpZXMsIHBvaW50SW5kZXgsIHBvaW50LCBpc0xhYmVsKSB7XG4gICAgICAgIHZhciBjZW50ZXJYID0gcG9pbnQueDtcbiAgICAgICAgdmFyIGNlbnRlclkgPSBwb2ludC55O1xuICAgICAgICB2YXIgaGVpZ2h0ID0gMDtcbiAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIG5ldyBlajJfYmFzZV8xLkFuaW1hdGlvbih7fSkuYW5pbWF0ZShlbGVtZW50LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICBkZWxheTogZGVsYXksXG4gICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJncy50aW1lU3RhbXAgPiBhcmdzLmRlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAoKGFyZ3MudGltZVN0YW1wIC0gYXJncy5kZWxheSkgLyBhcmdzLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIGNlbnRlclhcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJyAnICsgY2VudGVyWSArICcpIHNjYWxlKCcgKyBoZWlnaHQgKyAnKSB0cmFuc2xhdGUoJyArICgtY2VudGVyWCkgKyAnICcgKyAoLWNlbnRlclkpICsgJyknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndHJhbnNmb3JtJyk7XG4gICAgICAgICAgICAgICAgaWYgKChzZXJpZXMudHlwZSA9PT0gJ1NjYXR0ZXInIHx8IHNlcmllcy50eXBlID09PSAnQnViYmxlJykgJiYgIWlzTGFiZWwgJiYgKHBvaW50SW5kZXggPT09IHNlcmllcy5wb2ludHMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzLmNoYXJ0LnRyaWdnZXIoJ2FuaW1hdGlvbkNvbXBsZXRlJywgeyBzZXJpZXM6IHNlcmllcyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleHBvcnRzLm1hcmtlckFuaW1hdGUgPSBtYXJrZXJBbmltYXRlO1xuICAgIGZ1bmN0aW9uIHRlbXBsYXRlQW5pbWF0ZShlbGVtZW50LCBkZWxheSwgZHVyYXRpb24sIG5hbWUsIGlzUmVtb3ZlKSB7XG4gICAgICAgIG5ldyBlajJfYmFzZV8xLkFuaW1hdGlvbih7fSkuYW5pbWF0ZShlbGVtZW50LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICBkZWxheTogZGVsYXksXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgIGlmIChpc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8zLnJlbW92ZShhcmdzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncy5lbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4cG9ydHMudGVtcGxhdGVBbmltYXRlID0gdGVtcGxhdGVBbmltYXRlO1xuICAgIGZ1bmN0aW9uIGRyYXdTeW1ib2wobG9jYXRpb24sIHNoYXBlLCBzaXplLCB1cmwsIG9wdGlvbnMsIGxhYmVsKSB7XG4gICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSAnUGF0aCc7XG4gICAgICAgIHZhciByZW5kZXJlciA9IG5ldyBlajJfYmFzZV8xLlN2Z1JlbmRlcmVyKCcnKTtcbiAgICAgICAgdmFyIHRlbXAgPSBjYWxjdWxhdGVTaGFwZXMobG9jYXRpb24sIHNpemUsIHNoYXBlLCBvcHRpb25zLCB1cmwpO1xuICAgICAgICB2YXIgaHRtbE9iamVjdCA9IHJlbmRlcmVyWydkcmF3JyArIHRlbXAuZnVuY3Rpb25OYW1lXSh0ZW1wLnJlbmRlck9wdGlvbik7XG4gICAgICAgIGh0bWxPYmplY3Quc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGFiZWwpO1xuICAgICAgICByZXR1cm4gaHRtbE9iamVjdDtcbiAgICB9XG4gICAgZXhwb3J0cy5kcmF3U3ltYm9sID0gZHJhd1N5bWJvbDtcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVTaGFwZXMobG9jYXRpb24sIHNpemUsIHNoYXBlLCBvcHRpb25zLCB1cmwpIHtcbiAgICAgICAgdmFyIHBhdGg7XG4gICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSAnUGF0aCc7XG4gICAgICAgIHZhciB3aWR0aCA9IHNpemUud2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQgPSBzaXplLmhlaWdodDtcbiAgICAgICAgdmFyIGxvY1ggPSBsb2NhdGlvbi54O1xuICAgICAgICB2YXIgbG9jWSA9IGxvY2F0aW9uLnk7XG4gICAgICAgIHZhciB4ID0gbG9jYXRpb24ueCArICgtd2lkdGggLyAyKTtcbiAgICAgICAgdmFyIHkgPSBsb2NhdGlvbi55ICsgKC1oZWlnaHQgLyAyKTtcbiAgICAgICAgc3dpdGNoIChzaGFwZSkge1xuICAgICAgICAgICAgY2FzZSAnQ2lyY2xlJzpcbiAgICAgICAgICAgIGNhc2UgJ0J1YmJsZSc6XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gJ0VsbGlwc2UnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAncngnOiB3aWR0aCAvIDIsICdyeSc6IGhlaWdodCAvIDIsICdjeCc6IGxvY1gsICdjeSc6IGxvY1kgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdDcm9zcyc6XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIHggKyAnICcgKyBsb2NZICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICcgKyBsb2NZICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ00nICsgJyAnICsgbG9jWCArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArICdMJyArICcgJyArIGxvY1ggKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAobG9jWSArICgtaGVpZ2h0IC8gMikpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdIb3Jpem9udGFsTGluZSc6XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIHggKyAnICcgKyBsb2NZICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICcgKyBsb2NZO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdWZXJ0aWNhbExpbmUnOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyBsb2NYICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ0wnICsgJyAnICsgbG9jWCArICcgJyArIChsb2NZICsgKC1oZWlnaHQgLyAyKSk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5tZXJnZShvcHRpb25zLCB7ICdkJzogcGF0aCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0RpYW1vbmQnOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyB4ICsgJyAnICsgbG9jWSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIGxvY1ggKyAnICcgKyAobG9jWSArICgtaGVpZ2h0IC8gMikpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICcgKyBsb2NZICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgbG9jWCArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIHggKyAnICcgKyBsb2NZICsgJyB6JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLm1lcmdlKG9wdGlvbnMsIHsgJ2QnOiBwYXRoIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUmVjdGFuZ2xlJzpcbiAgICAgICAgICAgIGNhc2UgJ0hpbG8nOlxuICAgICAgICAgICAgY2FzZSAnSGlsb09wZW5DbG9zZSc6XG4gICAgICAgICAgICBjYXNlICdDYW5kbGUnOlxuICAgICAgICAgICAgY2FzZSAnV2F0ZXJmYWxsJzpcbiAgICAgICAgICAgIGNhc2UgJ0JveEFuZFdoaXNrZXInOlxuICAgICAgICAgICAgY2FzZSAnU3RlcEFyZWEnOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyB4ICsgJyAnICsgKGxvY1kgKyAoLWhlaWdodCAvIDIpKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgKyAoLWhlaWdodCAvIDIpKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgeCArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIHggKyAnICcgKyAobG9jWSArICgtaGVpZ2h0IC8gMikpICsgJyB6JztcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLm1lcmdlKG9wdGlvbnMsIHsgJ2QnOiBwYXRoIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUHlyYW1pZCc6XG4gICAgICAgICAgICBjYXNlICdUcmlhbmdsZSc6XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIHggKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyBsb2NYICsgJyAnICsgKGxvY1kgKyAoLWhlaWdodCAvIDIpKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgeCArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgeic7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5tZXJnZShvcHRpb25zLCB7ICdkJzogcGF0aCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Z1bm5lbCc6XG4gICAgICAgICAgICBjYXNlICdJbnZlcnRlZFRyaWFuZ2xlJzpcbiAgICAgICAgICAgICAgICBwYXRoID0gJ00nICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICcgKyAobG9jWSAtIChoZWlnaHQgLyAyKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyBsb2NYICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKGxvY1ggLSAod2lkdGggLyAyKSkgKyAnICcgKyAobG9jWSAtIChoZWlnaHQgLyAyKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZIC0gKGhlaWdodCAvIDIpKSArICcgeic7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5tZXJnZShvcHRpb25zLCB7ICdkJzogcGF0aCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1BlbnRhZ29uJzpcbiAgICAgICAgICAgICAgICB2YXIgZXEgPSA3MjtcbiAgICAgICAgICAgICAgICB2YXIgeFZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciB5VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gNTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9ICh3aWR0aCAvIDIpICogTWF0aC5jb3MoKE1hdGguUEkgLyAxODApICogKGkgKiBlcSkpO1xuICAgICAgICAgICAgICAgICAgICB5VmFsdWUgPSAoaGVpZ2h0IC8gMikgKiBNYXRoLnNpbigoTWF0aC5QSSAvIDE4MCkgKiAoaSAqIGVxKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gJ00nICsgJyAnICsgKGxvY1ggKyB4VmFsdWUpICsgJyAnICsgKGxvY1kgKyB5VmFsdWUpICsgJyAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguY29uY2F0KCdMJyArICcgJyArIChsb2NYICsgeFZhbHVlKSArICcgJyArIChsb2NZICsgeVZhbHVlKSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGF0aCA9IHBhdGguY29uY2F0KCdaJyk7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5tZXJnZShvcHRpb25zLCB7ICdkJzogcGF0aCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0ltYWdlJzpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSAnSW1hZ2UnO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnaHJlZic6IHVybCwgJ2hlaWdodCc6IGhlaWdodCwgJ3dpZHRoJzogd2lkdGgsIHg6IHgsIHk6IHkgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucyA9IGNhbGN1bGF0ZUxlZ2VuZFNoYXBlcyhsb2NhdGlvbiwgbmV3IFNpemUod2lkdGgsIGhlaWdodCksIHNoYXBlLCBvcHRpb25zKS5yZW5kZXJPcHRpb247XG4gICAgICAgIHJldHVybiB7IHJlbmRlck9wdGlvbjogb3B0aW9ucywgZnVuY3Rpb25OYW1lOiBmdW5jdGlvbk5hbWUgfTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVTaGFwZXMgPSBjYWxjdWxhdGVTaGFwZXM7XG4gICAgZnVuY3Rpb24gZ2V0UmVjdExvY2F0aW9uKHN0YXJ0TG9jYXRpb24sIGVuZExvY2F0aW9uLCBvdXRlclJlY3QpIHtcbiAgICAgICAgdmFyIHg7XG4gICAgICAgIHZhciB5O1xuICAgICAgICB4ID0gKGVuZExvY2F0aW9uLnggPCBvdXRlclJlY3QueCkgPyBvdXRlclJlY3QueCA6XG4gICAgICAgICAgICAoZW5kTG9jYXRpb24ueCA+IChvdXRlclJlY3QueCArIG91dGVyUmVjdC53aWR0aCkpID8gb3V0ZXJSZWN0LnggKyBvdXRlclJlY3Qud2lkdGggOiBlbmRMb2NhdGlvbi54O1xuICAgICAgICB5ID0gKGVuZExvY2F0aW9uLnkgPCBvdXRlclJlY3QueSkgPyBvdXRlclJlY3QueSA6XG4gICAgICAgICAgICAoZW5kTG9jYXRpb24ueSA+IChvdXRlclJlY3QueSArIG91dGVyUmVjdC5oZWlnaHQpKSA/IG91dGVyUmVjdC55ICsgb3V0ZXJSZWN0LmhlaWdodCA6IGVuZExvY2F0aW9uLnk7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdCgoeCA+IHN0YXJ0TG9jYXRpb24ueCA/IHN0YXJ0TG9jYXRpb24ueCA6IHgpLCAoeSA+IHN0YXJ0TG9jYXRpb24ueSA/IHN0YXJ0TG9jYXRpb24ueSA6IHkpLCBNYXRoLmFicyh4IC0gc3RhcnRMb2NhdGlvbi54KSwgTWF0aC5hYnMoeSAtIHN0YXJ0TG9jYXRpb24ueSkpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldFJlY3RMb2NhdGlvbiA9IGdldFJlY3RMb2NhdGlvbjtcbiAgICBmdW5jdGlvbiBtaW5NYXgodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA+IG1heCA/IG1heCA6ICh2YWx1ZSA8IG1pbiA/IG1pbiA6IHZhbHVlKTtcbiAgICB9XG4gICAgZXhwb3J0cy5taW5NYXggPSBtaW5NYXg7XG4gICAgZnVuY3Rpb24gZ2V0RWxlbWVudChpZCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEVsZW1lbnQgPSBnZXRFbGVtZW50O1xuICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlRnVuY3Rpb24odGVtcGxhdGUpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlRm4gPSBudWxsO1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRlbXBsYXRlKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMS5jb21waWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGUpLmlubmVySFRNTC50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZUZuID0gZWoyX2Jhc2VfMS5jb21waWxlKHRlbXBsYXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVtcGxhdGVGbjtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRUZW1wbGF0ZUZ1bmN0aW9uID0gZ2V0VGVtcGxhdGVGdW5jdGlvbjtcbiAgICBmdW5jdGlvbiBjcmVhdGVUZW1wbGF0ZShjaGlsZEVsZW1lbnQsIHBvaW50SW5kZXgsIGNvbnRlbnQsIGNoYXJ0LCBwb2ludCwgc2VyaWVzKSB7XG4gICAgICAgIHZhciB0ZW1wbGF0ZUZuO1xuICAgICAgICB2YXIgdGVtcGxhdGVFbGVtZW50O1xuICAgICAgICB0ZW1wbGF0ZUZuID0gZ2V0VGVtcGxhdGVGdW5jdGlvbihjb250ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZUZuICYmIHRlbXBsYXRlRm4oeyBjaGFydDogY2hhcnQsIHNlcmllczogc2VyaWVzLCBwb2ludDogcG9pbnQgfSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVFbGVtZW50ID0gdGVtcGxhdGVGbih7IGNoYXJ0OiBjaGFydCwgc2VyaWVzOiBzZXJpZXMsIHBvaW50OiBwb2ludCB9KTtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGVtcGxhdGVFbGVtZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRFbGVtZW50LmFwcGVuZENoaWxkKHRlbXBsYXRlRWxlbWVudFswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRFbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGlsZEVsZW1lbnQ7XG4gICAgfVxuICAgIGV4cG9ydHMuY3JlYXRlVGVtcGxhdGUgPSBjcmVhdGVUZW1wbGF0ZTtcbiAgICBmdW5jdGlvbiBnZXRGb250U3R5bGUoZm9udCkge1xuICAgICAgICB2YXIgc3R5bGUgPSAnJztcbiAgICAgICAgc3R5bGUgPSAnZm9udC1zaXplOicgKyBmb250LnNpemUgK1xuICAgICAgICAgICAgJzsgZm9udC1zdHlsZTonICsgZm9udC5mb250U3R5bGUgKyAnOyBmb250LXdlaWdodDonICsgZm9udC5mb250V2VpZ2h0ICtcbiAgICAgICAgICAgICc7IGZvbnQtZmFtaWx5OicgKyBmb250LmZvbnRGYW1pbHkgKyAnO29wYWNpdHk6JyArIGZvbnQub3BhY2l0eSArXG4gICAgICAgICAgICAnOyBjb2xvcjonICsgZm9udC5jb2xvciArICc7JztcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgICBleHBvcnRzLmdldEZvbnRTdHlsZSA9IGdldEZvbnRTdHlsZTtcbiAgICBmdW5jdGlvbiBtZWFzdXJlRWxlbWVudFJlY3QoZWxlbWVudCkge1xuICAgICAgICB2YXIgYm91bmRzO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICBib3VuZHMgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZW1vdmVFbGVtZW50KGVsZW1lbnQuaWQpO1xuICAgICAgICByZXR1cm4gYm91bmRzO1xuICAgIH1cbiAgICBleHBvcnRzLm1lYXN1cmVFbGVtZW50UmVjdCA9IG1lYXN1cmVFbGVtZW50UmVjdDtcbiAgICBmdW5jdGlvbiBmaW5kbEVsZW1lbnQoZWxlbWVudHMsIGlkKSB7XG4gICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uaWQuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgZXhwb3J0cy5maW5kbEVsZW1lbnQgPSBmaW5kbEVsZW1lbnQ7XG4gICAgZnVuY3Rpb24gZ2V0UG9pbnQoeCwgeSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpIHtcbiAgICAgICAgdmFyIHhMZW5ndGggPSBpc0ludmVydGVkID8geEF4aXMucmVjdC5oZWlnaHQgOiB4QXhpcy5yZWN0LndpZHRoO1xuICAgICAgICB2YXIgeUxlbmd0aCA9IGlzSW52ZXJ0ZWQgPyB5QXhpcy5yZWN0LndpZHRoIDogeUF4aXMucmVjdC5oZWlnaHQ7XG4gICAgICAgIHZhciB4dmFsdWUgPSAoeEF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnKSA/IGxvZ0Jhc2UoKCh4ID09PSAwIHx8IHggPCAwKSA/IDEgOiB4KSwgeEF4aXMubG9nQmFzZSkgOiB4O1xuICAgICAgICB2YXIgeXZhbHVlID0gKHlBeGlzLnZhbHVlVHlwZSA9PT0gJ0xvZ2FyaXRobWljJykgPyBsb2dCYXNlKCgoeSA9PT0gMCB8fCB5IDwgMCkgPyAxIDogeSksIHlBeGlzLmxvZ0Jhc2UpIDogeTtcbiAgICAgICAgeHZhbHVlID0gdmFsdWVUb0NvZWZmaWNpZW50KHh2YWx1ZSwgeEF4aXMpO1xuICAgICAgICB5dmFsdWUgPSB2YWx1ZVRvQ29lZmZpY2llbnQoeXZhbHVlLCB5QXhpcyk7XG4gICAgICAgIHZhciBsb2NhdGlvblggPSBpc0ludmVydGVkID8geXZhbHVlICogKHlMZW5ndGgpIDogeHZhbHVlICogKHhMZW5ndGgpO1xuICAgICAgICB2YXIgbG9jYXRpb25ZID0gaXNJbnZlcnRlZCA/ICgxIC0geHZhbHVlKSAqICh4TGVuZ3RoKSA6ICgxIC0geXZhbHVlKSAqICh5TGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFydExvY2F0aW9uKGxvY2F0aW9uWCwgbG9jYXRpb25ZKTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRQb2ludCA9IGdldFBvaW50O1xuICAgIGZ1bmN0aW9uIGFwcGVuZEVsZW1lbnQoY2hpbGQsIHBhcmVudCkge1xuICAgICAgICBpZiAoY2hpbGQgJiYgY2hpbGQuaGFzQ2hpbGROb2RlcygpICYmIHBhcmVudCkge1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMuYXBwZW5kRWxlbWVudCA9IGFwcGVuZEVsZW1lbnQ7XG4gICAgZnVuY3Rpb24gZ2V0RHJhZ2dlZFJlY3RMb2NhdGlvbih4MSwgeTEsIHgyLCB5Miwgb3V0ZXJSZWN0KSB7XG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGguYWJzKHgxIC0geDIpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5hYnMoeTEgLSB5Mik7XG4gICAgICAgIHZhciB4ID0gTWF0aC5tYXgoY2hlY2tCb3VuZHMoTWF0aC5taW4oeDEsIHgyKSwgd2lkdGgsIG91dGVyUmVjdC54LCBvdXRlclJlY3Qud2lkdGgpLCBvdXRlclJlY3QueCk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5tYXgoY2hlY2tCb3VuZHMoTWF0aC5taW4oeTEsIHkyKSwgaGVpZ2h0LCBvdXRlclJlY3QueSwgb3V0ZXJSZWN0LmhlaWdodCksIG91dGVyUmVjdC55KTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0KHgsIHksIE1hdGgubWluKHdpZHRoLCBvdXRlclJlY3Qud2lkdGgpLCBNYXRoLm1pbihoZWlnaHQsIG91dGVyUmVjdC5oZWlnaHQpKTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXREcmFnZ2VkUmVjdExvY2F0aW9uID0gZ2V0RHJhZ2dlZFJlY3RMb2NhdGlvbjtcbiAgICBmdW5jdGlvbiBjaGVja0JvdW5kcyhzdGFydCwgc2l6ZSwgbWluLCBtYXgpIHtcbiAgICAgICAgaWYgKHN0YXJ0IDwgbWluKSB7XG4gICAgICAgICAgICBzdGFydCA9IG1pbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoc3RhcnQgKyBzaXplKSA+IChtYXggKyBtaW4pKSB7XG4gICAgICAgICAgICBzdGFydCA9IChtYXggKyBtaW4pIC0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgfVxuICAgIGV4cG9ydHMuY2hlY2tCb3VuZHMgPSBjaGVja0JvdW5kcztcbiAgICBmdW5jdGlvbiBnZXRMYWJlbFRleHQoY3VycmVudFBvaW50LCBzZXJpZXMsIGNoYXJ0KSB7XG4gICAgICAgIHZhciBsYWJlbEZvcm1hdCA9IHNlcmllcy55QXhpcy5sYWJlbEZvcm1hdDtcbiAgICAgICAgdmFyIHRleHQgPSBbXTtcbiAgICAgICAgdmFyIGN1c3RvbUxhYmVsRm9ybWF0ID0gbGFiZWxGb3JtYXQubWF0Y2goJ3t2YWx1ZX0nKSAhPT0gbnVsbDtcbiAgICAgICAgc3dpdGNoIChzZXJpZXMuc2VyaWVzVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnWFknOlxuICAgICAgICAgICAgICAgIHRleHQucHVzaChjdXJyZW50UG9pbnQudGV4dCB8fCBjdXJyZW50UG9pbnQueVZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnSGlnaExvdyc6XG4gICAgICAgICAgICAgICAgdGV4dC5wdXNoKGN1cnJlbnRQb2ludC50ZXh0IHx8IE1hdGgubWF4KGN1cnJlbnRQb2ludC5oaWdoLCBjdXJyZW50UG9pbnQubG93KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgTWF0aC5taW4oY3VycmVudFBvaW50LmhpZ2gsIGN1cnJlbnRQb2ludC5sb3cpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnSGlnaExvd09wZW5DbG9zZSc6XG4gICAgICAgICAgICAgICAgdGV4dC5wdXNoKGN1cnJlbnRQb2ludC50ZXh0IHx8IE1hdGgubWF4KGN1cnJlbnRQb2ludC5oaWdoLCBjdXJyZW50UG9pbnQubG93KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgTWF0aC5taW4oY3VycmVudFBvaW50LmhpZ2gsIGN1cnJlbnRQb2ludC5sb3cpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHRleHQucHVzaChjdXJyZW50UG9pbnQudGV4dCB8fCBNYXRoLm1heChjdXJyZW50UG9pbnQub3BlbiwgY3VycmVudFBvaW50LmNsb3NlKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgTWF0aC5taW4oY3VycmVudFBvaW50Lm9wZW4sIGN1cnJlbnRQb2ludC5jbG9zZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdCb3hQbG90JzpcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgY3VycmVudFBvaW50Lm1lZGlhbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgY3VycmVudFBvaW50Lm1heGltdW0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgdGV4dC5wdXNoKGN1cnJlbnRQb2ludC50ZXh0IHx8IGN1cnJlbnRQb2ludC5taW5pbXVtLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHRleHQucHVzaChjdXJyZW50UG9pbnQudGV4dCB8fCBjdXJyZW50UG9pbnQudXBwZXJRdWFydGlsZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgY3VycmVudFBvaW50Lmxvd2VyUXVhcnRpbGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGN1cnJlbnRQb2ludC5vdXRsaWVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpZXJzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0LnB1c2goY3VycmVudFBvaW50LnRleHQgfHwgbGllcnMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYWJlbEZvcm1hdCAmJiAhY3VycmVudFBvaW50LnRleHQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRleHRbaV0gPSBjdXN0b21MYWJlbEZvcm1hdCA/IGxhYmVsRm9ybWF0LnJlcGxhY2UoJ3t2YWx1ZX0nLCBzZXJpZXMueUF4aXMuZm9ybWF0KHBhcnNlRmxvYXQodGV4dFtpXSkpKSA6XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy55QXhpcy5mb3JtYXQocGFyc2VGbG9hdCh0ZXh0W2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0TGFiZWxUZXh0ID0gZ2V0TGFiZWxUZXh0O1xuICAgIGZ1bmN0aW9uIHN0b3BUaW1lcih0aW1lcikge1xuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgfVxuICAgIGV4cG9ydHMuc3RvcFRpbWVyID0gc3RvcFRpbWVyO1xuICAgIGZ1bmN0aW9uIGlzQ29sbGlkZShyZWN0LCBjb2xsZWN0aW9ucywgY2xpcFJlY3QpIHtcbiAgICAgICAgdmFyIGlzQ29sbGlkZTtcbiAgICAgICAgdmFyIGN1cnJlbnRSZWN0ID0gbmV3IFJlY3QocmVjdC54ICsgY2xpcFJlY3QueCwgcmVjdC55ICsgY2xpcFJlY3QueSwgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuICAgICAgICBpc0NvbGxpZGUgPSBjb2xsZWN0aW9ucy5zb21lKGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gKGN1cnJlbnRSZWN0LnggPCByZWN0LnggKyByZWN0LndpZHRoICYmIGN1cnJlbnRSZWN0LnggKyBjdXJyZW50UmVjdC53aWR0aCA+IHJlY3QueCAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRSZWN0LnkgPCByZWN0LnkgKyByZWN0LmhlaWdodCAmJiBjdXJyZW50UmVjdC5oZWlnaHQgKyBjdXJyZW50UmVjdC55ID4gcmVjdC55KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpc0NvbGxpZGU7XG4gICAgfVxuICAgIGV4cG9ydHMuaXNDb2xsaWRlID0gaXNDb2xsaWRlO1xuICAgIGZ1bmN0aW9uIGlzT3ZlcmxhcChjdXJyZW50UmVjdCwgcmVjdCkge1xuICAgICAgICByZXR1cm4gKGN1cnJlbnRSZWN0LnggPCByZWN0LnggKyByZWN0LndpZHRoICYmIGN1cnJlbnRSZWN0LnggKyBjdXJyZW50UmVjdC53aWR0aCA+IHJlY3QueCAmJlxuICAgICAgICAgICAgY3VycmVudFJlY3QueSA8IHJlY3QueSArIHJlY3QuaGVpZ2h0ICYmIGN1cnJlbnRSZWN0LmhlaWdodCArIGN1cnJlbnRSZWN0LnkgPiByZWN0LnkpO1xuICAgIH1cbiAgICBleHBvcnRzLmlzT3ZlcmxhcCA9IGlzT3ZlcmxhcDtcbiAgICBmdW5jdGlvbiBjb250YWluc1JlY3QoY3VycmVudFJlY3QsIHJlY3QpIHtcbiAgICAgICAgcmV0dXJuIChjdXJyZW50UmVjdC54IDw9IHJlY3QueCAmJiBjdXJyZW50UmVjdC54ICsgY3VycmVudFJlY3Qud2lkdGggPj0gcmVjdC54ICsgcmVjdC53aWR0aCAmJlxuICAgICAgICAgICAgY3VycmVudFJlY3QueSA8PSByZWN0LnkgJiYgY3VycmVudFJlY3QuaGVpZ2h0ICsgY3VycmVudFJlY3QueSA+PSByZWN0LnkgKyByZWN0LmhlaWdodCk7XG4gICAgfVxuICAgIGV4cG9ydHMuY29udGFpbnNSZWN0ID0gY29udGFpbnNSZWN0O1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVJlY3QobG9jYXRpb24sIHRleHRTaXplLCBtYXJnaW4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0KChsb2NhdGlvbi54IC0gKHRleHRTaXplLndpZHRoIC8gMikgLSBtYXJnaW4ubGVmdCksIChsb2NhdGlvbi55IC0gKHRleHRTaXplLmhlaWdodCAvIDIpIC0gbWFyZ2luLnRvcCksIHRleHRTaXplLndpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQsIHRleHRTaXplLmhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVSZWN0ID0gY2FsY3VsYXRlUmVjdDtcbiAgICBmdW5jdGlvbiBjb252ZXJ0VG9IZXhDb2RlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAnIycgKyBjb21wb25lbnRUb0hleCh2YWx1ZS5yKSArIGNvbXBvbmVudFRvSGV4KHZhbHVlLmcpICsgY29tcG9uZW50VG9IZXgodmFsdWUuYik7XG4gICAgfVxuICAgIGV4cG9ydHMuY29udmVydFRvSGV4Q29kZSA9IGNvbnZlcnRUb0hleENvZGU7XG4gICAgZnVuY3Rpb24gY29tcG9uZW50VG9IZXgodmFsdWUpIHtcbiAgICAgICAgdmFyIGhleCA9IHZhbHVlLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT09IDEgPyAnMCcgKyBoZXggOiBoZXg7XG4gICAgfVxuICAgIGV4cG9ydHMuY29tcG9uZW50VG9IZXggPSBjb21wb25lbnRUb0hleDtcbiAgICBmdW5jdGlvbiBjb252ZXJ0SGV4VG9Db2xvcihoZXgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0ID8gbmV3IENvbG9yVmFsdWUocGFyc2VJbnQocmVzdWx0WzFdLCAxNiksIHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLCBwYXJzZUludChyZXN1bHRbM10sIDE2KSkgOlxuICAgICAgICAgICAgbmV3IENvbG9yVmFsdWUoMjU1LCAyNTUsIDI1NSk7XG4gICAgfVxuICAgIGV4cG9ydHMuY29udmVydEhleFRvQ29sb3IgPSBjb252ZXJ0SGV4VG9Db2xvcjtcbiAgICBmdW5jdGlvbiBjb2xvck5hbWVUb0hleChjb2xvcikge1xuICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgY29sb3IgPSBjb2xvciA9PT0gJ3RyYW5zcGFyZW50JyA/ICd3aGl0ZScgOiBjb2xvcjtcbiAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydG1lYXN1cmV0ZXh0Jyk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICAgICAgY29sb3IgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5jb2xvcjtcbiAgICAgICAgdmFyIGV4cCA9IC9eKHJnYnxoc2wpKGE/KVsoXVxccyooW1xcZC5dK1xccyolPylcXHMqLFxccyooW1xcZC5dK1xccyolPylcXHMqLFxccyooW1xcZC5dK1xccyolPylcXHMqKD86LFxccyooW1xcZC5dKylcXHMqKT9bKV0kLztcbiAgICAgICAgdmFyIGlzUkdCVmFsdWUgPSBleHAuZXhlYyhjb2xvcik7XG4gICAgICAgIHJldHVybiBjb252ZXJ0VG9IZXhDb2RlKG5ldyBDb2xvclZhbHVlKHBhcnNlSW50KGlzUkdCVmFsdWVbM10sIDEwKSwgcGFyc2VJbnQoaXNSR0JWYWx1ZVs0XSwgMTApLCBwYXJzZUludChpc1JHQlZhbHVlWzVdLCAxMCkpKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jb2xvck5hbWVUb0hleCA9IGNvbG9yTmFtZVRvSGV4O1xuICAgIGZ1bmN0aW9uIGdldFNhdHVyYXRpb25Db2xvcihjb2xvciwgZmFjdG9yKSB7XG4gICAgICAgIGNvbG9yID0gY29sb3JOYW1lVG9IZXgoY29sb3IpO1xuICAgICAgICBjb2xvciA9IGNvbG9yLnJlcGxhY2UoL1teMC05YS1mXS9naSwgJycpO1xuICAgICAgICBpZiAoY29sb3IubGVuZ3RoIDwgNikge1xuICAgICAgICAgICAgY29sb3IgPSBjb2xvclswXSArIGNvbG9yWzBdICsgY29sb3JbMV0gKyBjb2xvclsxXSArIGNvbG9yWzJdICsgY29sb3JbMl07XG4gICAgICAgIH1cbiAgICAgICAgZmFjdG9yID0gZmFjdG9yIHx8IDA7XG4gICAgICAgIHZhciByZ2IgPSAnIyc7XG4gICAgICAgIHZhciBjb2xvckNvZGU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBjb2xvckNvZGUgPSBwYXJzZUludChjb2xvci5zdWJzdHIoaSAqIDIsIDIpLCAxNik7XG4gICAgICAgICAgICBjb2xvckNvZGUgPSBNYXRoLnJvdW5kKE1hdGgubWluKE1hdGgubWF4KDAsIGNvbG9yQ29kZSArIChjb2xvckNvZGUgKiBmYWN0b3IpKSwgMjU1KSk7XG4gICAgICAgICAgICByZ2IgKz0gKCcwMCcgKyBjb2xvckNvZGUudG9TdHJpbmcoMTYpKS5zdWJzdHIoY29sb3JDb2RlLnRvU3RyaW5nKDE2KS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZ2I7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0U2F0dXJhdGlvbkNvbG9yID0gZ2V0U2F0dXJhdGlvbkNvbG9yO1xuICAgIGZ1bmN0aW9uIGdldE1lZGlhbih2YWx1ZXMpIHtcbiAgICAgICAgdmFyIGhhbGYgPSBNYXRoLmZsb29yKHZhbHVlcy5sZW5ndGggLyAyKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggJSAyID8gdmFsdWVzW2hhbGZdIDogKCh2YWx1ZXNbaGFsZiAtIDFdICsgdmFsdWVzW2hhbGZdKSAvIDIuMCk7XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0TWVkaWFuID0gZ2V0TWVkaWFuO1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUxlZ2VuZFNoYXBlcyhsb2NhdGlvbiwgc2l6ZSwgc2hhcGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSAxMDtcbiAgICAgICAgdmFyIHBhdGggPSAnJztcbiAgICAgICAgdmFyIGhlaWdodCA9IHNpemUuaGVpZ2h0O1xuICAgICAgICB2YXIgd2lkdGggPSBzaXplLndpZHRoO1xuICAgICAgICB2YXIgbG9jWCA9IGxvY2F0aW9uLng7XG4gICAgICAgIHZhciBsb2NZID0gbG9jYXRpb24ueTtcbiAgICAgICAgc3dpdGNoIChzaGFwZSkge1xuICAgICAgICAgICAgY2FzZSAnTGluZSc6XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDIpKSArICcgJyArIChsb2NZKSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdTdGVwTGluZSc6XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5maWxsID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBwYXRoID0gJ00nICsgJyAnICsgKGxvY1ggKyAoLXdpZHRoIC8gMikgLSAocGFkZGluZyAvIDQpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArICdMJyArICcgJyArIChsb2NYICtcbiAgICAgICAgICAgICAgICAgICAgKC13aWR0aCAvIDIpICsgKHdpZHRoIC8gMTApKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDIpICsgKHdpZHRoIC8gMTApKVxuICAgICAgICAgICAgICAgICAgICArICcgJyArIChsb2NZKSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDEwKSkgKyAnICcgKyAobG9jWSkgKyAnICcgKyAnTCcgKyAnICcgKyAobG9jWCArICgtd2lkdGggLyAxMCkpXG4gICAgICAgICAgICAgICAgICAgICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyA1KSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgKyAnTCcgK1xuICAgICAgICAgICAgICAgICAgICAnICcgKyAobG9jWCArICh3aWR0aCAvIDUpKSArICcgJyArIChsb2NZICsgKC1oZWlnaHQgLyAyKSkgKyAnICcgKyAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZICtcbiAgICAgICAgICAgICAgICAgICAgKC1oZWlnaHQgLyAyKSkgKyAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgJyArICdMJyArICcnICsgKGxvY1ggKyAod2lkdGggLyAyKVxuICAgICAgICAgICAgICAgICAgICArIChwYWRkaW5nIC8gNCkpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdSaWdodEFycm93JzpcbiAgICAgICAgICAgICAgICB2YXIgc3BhY2UgPSAyO1xuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyAobG9jWCArICgtd2lkdGggLyAyKSkgKyAnICcgKyAobG9jWSAtIChoZWlnaHQgLyAyKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZKSArICcgJyArICdMJyArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIChsb2NYICsgKC13aWR0aCAvIDIpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKSArICcgTCcgKyAnICcgKyAobG9jWCArICgtd2lkdGggLyAyKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAobG9jWSArIChoZWlnaHQgLyAyKSAtIHNwYWNlKSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikgLSAoMiAqIHNwYWNlKSkgKyAnICcgKyAobG9jWSkgK1xuICAgICAgICAgICAgICAgICAgICAnIEwnICsgKGxvY1ggKyAoLXdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gMikgKyBzcGFjZSkgKyAnIFonO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdMZWZ0QXJyb3cnOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmlsbCA9IG9wdGlvbnMuc3Ryb2tlO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuc3Ryb2tlID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICBzcGFjZSA9IDI7XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gMikpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKGxvY1ggKyAoLXdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kpICsgJyAnICsgJ0wnICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgKyAnTCcgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpIC0gc3BhY2UpICsgJyBMJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDIpICsgKDIgKiBzcGFjZSkpXG4gICAgICAgICAgICAgICAgICAgICsgJyAnICsgKGxvY1kpICsgJyBMJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gMikgKyBzcGFjZSkgKyAnIFonO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdDb2x1bW4nOlxuICAgICAgICAgICAgY2FzZSAnU3RhY2tpbmdDb2x1bW4nOlxuICAgICAgICAgICAgY2FzZSAnU3RhY2tpbmdDb2x1bW4xMDAnOlxuICAgICAgICAgICAgY2FzZSAnUmFuZ2VDb2x1bW4nOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyAobG9jWCAtIDMgKiAod2lkdGggLyA1KSkgKyAnICcgKyAobG9jWSAtIChoZWlnaHQgLyA1KSkgKyAnICcgKyAnTCcgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAobG9jWCArIDMgKiAoLXdpZHRoIC8gMTApKSArICcgJyArIChsb2NZIC0gKGhlaWdodCAvIDUpKSArICcgJyArICdMJyArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIChsb2NYICsgMyAqICgtd2lkdGggLyAxMCkpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggLSAzICpcbiAgICAgICAgICAgICAgICAgICAgKHdpZHRoIC8gNSkpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ1onICsgJyAnICsgJ00nICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKGxvY1ggKyAoLXdpZHRoIC8gMTApIC0gKHdpZHRoIC8gMjApKSArICcgJyArIChsb2NZIC0gKGhlaWdodCAvIDQpIC0gKHBhZGRpbmcgLyAyKSlcbiAgICAgICAgICAgICAgICAgICAgKyAnICcgKyAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDEwKSArICh3aWR0aCAvIDIwKSkgKyAnICcgKyAobG9jWSAtIChoZWlnaHQgLyA0KSAtXG4gICAgICAgICAgICAgICAgICAgIChwYWRkaW5nIC8gMikpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAxMCkgKyAod2lkdGggLyAyMCkpICsgJyAnICsgKGxvY1lcbiAgICAgICAgICAgICAgICAgICAgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggKyAoLXdpZHRoIC8gMTApIC0gKHdpZHRoIC8gMjApKSArICcgJyArIChsb2NZICtcbiAgICAgICAgICAgICAgICAgICAgKGhlaWdodCAvIDIpKSArICcgJyArICdaJyArICcgJyArICdNJyArICcgJyArIChsb2NYICsgMyAqICh3aWR0aCAvIDEwKSkgKyAnICcgKyAobG9jWSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAobG9jWCArIDMgKiAod2lkdGggLyA1KSkgKyAnICcgKyAobG9jWSkgKyAnICcgKyAnTCcgKyAnICdcbiAgICAgICAgICAgICAgICAgICAgKyAobG9jWCArIDMgKiAod2lkdGggLyA1KSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgKyAnTCcgKyAnICdcbiAgICAgICAgICAgICAgICAgICAgKyAobG9jWCArIDMgKiAod2lkdGggLyAxMCkpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgJ1onO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdCYXInOlxuICAgICAgICAgICAgY2FzZSAnU3RhY2tpbmdCYXInOlxuICAgICAgICAgICAgY2FzZSAnU3RhY2tpbmdCYXIxMDAnOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyAobG9jWCArICgtd2lkdGggLyAyKSArICgtcGFkZGluZyAvIDQpKSArICcgJyArIChsb2NZIC0gMyAqIChoZWlnaHQgLyA1KSkgKyAnICdcbiAgICAgICAgICAgICAgICAgICAgKyAnTCcgKyAnICcgKyAobG9jWCArIDMgKiAod2lkdGggLyAxMCkpICsgJyAnICsgKGxvY1kgLSAzICogKGhlaWdodCAvIDUpKSArICcgJyArICdMJyArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIChsb2NYICsgMyAqICh3aWR0aCAvIDEwKSkgKyAnICcgKyAobG9jWSAtIDMgKiAoaGVpZ2h0IC8gMTApKSArICcgJyArICdMJyArICcgJyArXG4gICAgICAgICAgICAgICAgICAgIChsb2NYIC0gKHdpZHRoIC8gMikgKyAoLXBhZGRpbmcgLyA0KSkgKyAnICcgKyAobG9jWSAtIDMgKiAoaGVpZ2h0IC8gMTApKSArICcgJyArICdaJyArICcgJ1xuICAgICAgICAgICAgICAgICAgICArICdNJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDIpICsgKC1wYWRkaW5nIC8gNCkpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gNSlcbiAgICAgICAgICAgICAgICAgICAgKyAocGFkZGluZyAvIDIwKSkgKyAnICcgKyAnTCcgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpICsgKHBhZGRpbmcgLyA0KSkgKyAnICcgKyAobG9jWVxuICAgICAgICAgICAgICAgICAgICAtIChoZWlnaHQgLyA1KSArIChwYWRkaW5nIC8gMjApKSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikgKyAocGFkZGluZyAvIDQpKVxuICAgICAgICAgICAgICAgICAgICArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDEwKSArIChwYWRkaW5nIC8gMjApKSArICcgJyArICdMJyArICcgJyArIChsb2NYIC0gKHdpZHRoIC8gMilcbiAgICAgICAgICAgICAgICAgICAgKyAoLXBhZGRpbmcgLyA0KSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAxMCkgKyAocGFkZGluZyAvIDIwKSkgKyAnICcgKyAnWicgKyAnICcgKyAnTSdcbiAgICAgICAgICAgICAgICAgICAgKyAnICcgKyAobG9jWCAtICh3aWR0aCAvIDIpICsgKC1wYWRkaW5nIC8gNCkpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gNSlcbiAgICAgICAgICAgICAgICAgICAgKyAocGFkZGluZyAvIDEwKSkgKyAnICcgKyAnTCcgKyAnICcgKyAobG9jWCArICgtd2lkdGggLyA0KSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyA1KVxuICAgICAgICAgICAgICAgICAgICArIChwYWRkaW5nIC8gMTApKSArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDQpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpXG4gICAgICAgICAgICAgICAgICAgICsgKHBhZGRpbmcgLyAxMCkpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1ggLSAod2lkdGggLyAyKSArICgtcGFkZGluZyAvIDQpKVxuICAgICAgICAgICAgICAgICAgICArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpICsgKHBhZGRpbmcgLyAxMCkpICsgJyAnICsgJ1onO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdTcGxpbmUnOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmlsbCA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIChsb2NYIC0gKHdpZHRoIC8gMikpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gNSkpICsgJyAnICsgJ1EnICsgJyAnXG4gICAgICAgICAgICAgICAgICAgICsgbG9jWCArICcgJyArIChsb2NZIC0gaGVpZ2h0KSArICcgJyArIGxvY1ggKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyA1KSlcbiAgICAgICAgICAgICAgICAgICAgKyAnICcgKyAnTScgKyAnICcgKyBsb2NYICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gNSkpICsgJyAnICsgJ1EnICsgJyAnICsgKGxvY1hcbiAgICAgICAgICAgICAgICAgICAgKyAod2lkdGggLyAyKSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgKyAobG9jWCArICh3aWR0aCAvIDIpKSArICcgJ1xuICAgICAgICAgICAgICAgICAgICArIChsb2NZIC0gKGhlaWdodCAvIDIpKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLm1lcmdlKG9wdGlvbnMsIHsgJ2QnOiBwYXRoIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQXJlYSc6XG4gICAgICAgICAgICBjYXNlICdSYW5nZUFyZWEnOlxuICAgICAgICAgICAgY2FzZSAnU3RhY2tpbmdBcmVhJzpcbiAgICAgICAgICAgIGNhc2UgJ1N0YWNraW5nQXJlYTEwMCc6XG4gICAgICAgICAgICAgICAgcGF0aCA9ICdNJyArICcgJyArIChsb2NYIC0gKHdpZHRoIC8gMikgLSAocGFkZGluZyAvIDQpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDIpKVxuICAgICAgICAgICAgICAgICAgICArICcgJyArICdMJyArICcgJyArIChsb2NYICsgKC13aWR0aCAvIDQpICsgKC1wYWRkaW5nIC8gOCkpICsgJyAnICsgKGxvY1kgLSAoaGVpZ2h0IC8gMikpXG4gICAgICAgICAgICAgICAgICAgICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1gpICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gNCkpICsgJyAnICsgJ0wnICsgJyAnICsgKGxvY1hcbiAgICAgICAgICAgICAgICAgICAgKyAod2lkdGggLyA0KSArIChwYWRkaW5nIC8gOCkpICsgJyAnICsgKGxvY1kgKyAoLWhlaWdodCAvIDIpICsgKGhlaWdodCAvIDQpKSArICcgJ1xuICAgICAgICAgICAgICAgICAgICArICdMJyArICcgJyArIChsb2NYICsgKGhlaWdodCAvIDIpICsgKHBhZGRpbmcgLyA0KSkgKyAnICcgKyAobG9jWSArIChoZWlnaHQgLyAyKSkgKyAnICcgKyAnWic7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5tZXJnZShvcHRpb25zLCB7ICdkJzogcGF0aCB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1NwbGluZUFyZWEnOlxuICAgICAgICAgICAgICAgIHBhdGggPSAnTScgKyAnICcgKyAobG9jWCAtICh3aWR0aCAvIDIpKSArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDUpKSArICcgJyArICdRJyArICcgJyArIGxvY1hcbiAgICAgICAgICAgICAgICAgICAgKyAnICcgKyAobG9jWSAtIGhlaWdodCkgKyAnICcgKyBsb2NYICsgJyAnICsgKGxvY1kgKyAoaGVpZ2h0IC8gNSkpICsgJyAnICsgJ1onICsgJyAnICsgJ00nXG4gICAgICAgICAgICAgICAgICAgICsgJyAnICsgbG9jWCArICcgJyArIChsb2NZICsgKGhlaWdodCAvIDUpKSArICcgJyArICdRJyArICcgJyArIChsb2NYICsgKHdpZHRoIC8gMikpICsgJyAnXG4gICAgICAgICAgICAgICAgICAgICsgKGxvY1kgKyAoaGVpZ2h0IC8gMikpICsgJyAnICsgKGxvY1ggKyAod2lkdGggLyAyKSkgKyAnICdcbiAgICAgICAgICAgICAgICAgICAgKyAobG9jWSAtIChoZWlnaHQgLyAyKSkgKyAnICcgKyAnIFonO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIubWVyZ2Uob3B0aW9ucywgeyAnZCc6IHBhdGggfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdQaWUnOlxuICAgICAgICAgICAgY2FzZSAnRG91Z2hudXQnOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc3Ryb2tlID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgICAgICB2YXIgciA9IE1hdGgubWluKGhlaWdodCwgd2lkdGgpIC8gMjtcbiAgICAgICAgICAgICAgICBwYXRoID0gZ2V0QWNjdW11bGF0aW9uTGVnZW5kKGxvY1gsIGxvY1ksIHIsIGhlaWdodCwgd2lkdGgsIHNoYXBlKTtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLm1lcmdlKG9wdGlvbnMsIHsgJ2QnOiBwYXRoIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJlbmRlck9wdGlvbjogb3B0aW9ucyB9O1xuICAgIH1cbiAgICBleHBvcnRzLmNhbGN1bGF0ZUxlZ2VuZFNoYXBlcyA9IGNhbGN1bGF0ZUxlZ2VuZFNoYXBlcztcbiAgICBmdW5jdGlvbiB0ZXh0VHJpbShtYXhXaWR0aCwgdGV4dCwgZm9udCkge1xuICAgICAgICB2YXIgbGFiZWwgPSB0ZXh0O1xuICAgICAgICB2YXIgc2l6ZSA9IG1lYXN1cmVUZXh0KHRleHQsIGZvbnQpLndpZHRoO1xuICAgICAgICBpZiAoc2l6ZSA+IG1heFdpZHRoKSB7XG4gICAgICAgICAgICB2YXIgdGV4dExlbmd0aCA9IHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRleHRMZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGxhYmVsID0gdGV4dC5zdWJzdHJpbmcoMCwgaSkgKyAnLi4uJztcbiAgICAgICAgICAgICAgICBzaXplID0gbWVhc3VyZVRleHQobGFiZWwsIGZvbnQpLndpZHRoO1xuICAgICAgICAgICAgICAgIGlmIChzaXplIDw9IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH1cbiAgICBleHBvcnRzLnRleHRUcmltID0gdGV4dFRyaW07XG4gICAgZnVuY3Rpb24gc3RyaW5nVG9OdW1iZXIodmFsdWUsIGNvbnRhaW5lclNpemUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKCclJykgIT09IC0xID8gKGNvbnRhaW5lclNpemUgLyAxMDApICogcGFyc2VJbnQodmFsdWUsIDEwKSA6IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGV4cG9ydHMuc3RyaW5nVG9OdW1iZXIgPSBzdHJpbmdUb051bWJlcjtcbiAgICBmdW5jdGlvbiBmaW5kRGlyZWN0aW9uKHJYLCByWSwgcmVjdCwgYXJyb3dMb2NhdGlvbiwgYXJyb3dQYWRkaW5nLCB0b3AsIGJvdHRvbSwgbGVmdCwgdGlwWCwgdGlwWSwgdGlwUmFkaXVzKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAnJztcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHJlY3QueDtcbiAgICAgICAgdmFyIHN0YXJ0WSA9IHJlY3QueTtcbiAgICAgICAgdmFyIHdpZHRoID0gcmVjdC54ICsgcmVjdC53aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IHJlY3QueSArIHJlY3QuaGVpZ2h0O1xuICAgICAgICB0aXBSYWRpdXMgPSB0aXBSYWRpdXMgPyB0aXBSYWRpdXMgOiAwO1xuICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCdNJyArICcgJyArIChzdGFydFgpICsgJyAnICsgKHN0YXJ0WSArIHJZKSArICcgUSAnICsgc3RhcnRYICsgJyAnXG4gICAgICAgICAgICAgICAgKyBzdGFydFkgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgc3RhcnRZICsgJyAnICtcbiAgICAgICAgICAgICAgICAnIEwnICsgJyAnICsgKHdpZHRoIC0gclgpICsgJyAnICsgKHN0YXJ0WSkgKyAnIFEgJyArIHdpZHRoICsgJyAnXG4gICAgICAgICAgICAgICAgKyBzdGFydFkgKyAnICcgKyAod2lkdGgpICsgJyAnICsgKHN0YXJ0WSArIHJZKSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCcgTCcgKyAnICcgKyAod2lkdGgpICsgJyAnICsgKGhlaWdodCAtIHJZKSArICcgUSAnICsgd2lkdGggKyAnICdcbiAgICAgICAgICAgICAgICArIChoZWlnaHQpICsgJyAnICsgKHdpZHRoIC0gclgpICsgJyAnICsgKGhlaWdodCkpO1xuICAgICAgICAgICAgaWYgKGFycm93UGFkZGluZyAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyBMJyArICcgJyArIChhcnJvd0xvY2F0aW9uLnggKyBhcnJvd1BhZGRpbmcgLyAyKSArICcgJyArIChoZWlnaHQpKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCcgTCcgKyAnICcgKyAodGlwWCArIHRpcFJhZGl1cykgKyAnICcgKyAoaGVpZ2h0ICsgYXJyb3dQYWRkaW5nIC0gdGlwUmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcgUScgKyAnICcgKyAodGlwWCkgKyAnICcgKyAoaGVpZ2h0ICsgYXJyb3dQYWRkaW5nKSArICcgJyArICh0aXBYIC0gdGlwUmFkaXVzKSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArIChoZWlnaHQgKyBhcnJvd1BhZGRpbmcgLSB0aXBSYWRpdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChhcnJvd0xvY2F0aW9uLnggLSBhcnJvd1BhZGRpbmcgLyAyKSA+IHN0YXJ0WCkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyBMJyArICcgJyArIChhcnJvd0xvY2F0aW9uLnggLSBhcnJvd1BhZGRpbmcgLyAyKSArICcgJyArIGhlaWdodCArXG4gICAgICAgICAgICAgICAgICAgICcgTCcgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgaGVpZ2h0ICsgJyBRICcgKyBzdGFydFggKyAnICdcbiAgICAgICAgICAgICAgICAgICAgKyBoZWlnaHQgKyAnICcgKyAoc3RhcnRYKSArICcgJyArIChoZWlnaHQgLSByWSkgKyAnIHonKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcnJvd1BhZGRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHN0YXJ0WCArIHJYKSArICcgJyArIGhlaWdodCArICcgUSAnICsgc3RhcnRYICsgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICArIGhlaWdodCArICcgJyArIChzdGFydFgpICsgJyAnICsgKGhlaWdodCAtIHJZKSArICcgeicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHN0YXJ0WCkgKyAnICcgKyAoaGVpZ2h0ICsgclkpICsgJyB6Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJvdHRvbSkge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnTScgKyAnICcgKyAoc3RhcnRYKSArICcgJyArIChzdGFydFkgKyByWSkgKyAnIFEgJyArIHN0YXJ0WCArICcgJ1xuICAgICAgICAgICAgICAgICsgKHN0YXJ0WSkgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgKHN0YXJ0WSkgKyAnIEwnICsgJyAnICsgKGFycm93TG9jYXRpb24ueCAtIGFycm93UGFkZGluZyAvIDIpICsgJyAnICsgKHN0YXJ0WSkpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHRpcFggLSB0aXBSYWRpdXMpICsgJyAnICsgKGFycm93TG9jYXRpb24ueSArIHRpcFJhZGl1cykpO1xuICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcgUScgKyAnICcgKyAodGlwWCkgKyAnICcgKyAoYXJyb3dMb2NhdGlvbi55KSArICcgJyArICh0aXBYICsgdGlwUmFkaXVzKSArICcgJyArIChhcnJvd0xvY2F0aW9uLnkgKyB0aXBSYWRpdXMpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKGFycm93TG9jYXRpb24ueCArIGFycm93UGFkZGluZyAvIDIpICsgJyAnICsgKHN0YXJ0WSkgKyAnIEwnICsgJyAnXG4gICAgICAgICAgICAgICAgKyAod2lkdGggLSByWCkgKyAnICcgKyAoc3RhcnRZKSArICcgUSAnICsgKHdpZHRoKSArICcgJyArIChzdGFydFkpICsgJyAnICsgKHdpZHRoKSArICcgJyArIChzdGFydFkgKyByWSkpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHdpZHRoKSArICcgJyArIChoZWlnaHQgLSByWSkgKyAnIFEgJyArICh3aWR0aCkgKyAnICdcbiAgICAgICAgICAgICAgICArIChoZWlnaHQpICsgJyAnICsgKHdpZHRoIC0gclgpICsgJyAnICsgKGhlaWdodCkgK1xuICAgICAgICAgICAgICAgICcgTCcgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgKGhlaWdodCkgKyAnIFEgJyArIChzdGFydFgpICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoaGVpZ2h0KSArICcgJyArIChzdGFydFgpICsgJyAnICsgKGhlaWdodCAtIHJZKSArICcgeicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlZnQpIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJ00nICsgJyAnICsgKHN0YXJ0WCkgKyAnICcgKyAoc3RhcnRZICsgclkpICsgJyBRICcgKyBzdGFydFggKyAnICdcbiAgICAgICAgICAgICAgICArIChzdGFydFkpICsgJyAnICsgKHN0YXJ0WCArIHJYKSArICcgJyArIChzdGFydFkpKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyBMJyArICcgJyArICh3aWR0aCAtIHJYKSArICcgJyArIChzdGFydFkpICsgJyBRICcgKyAod2lkdGgpICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoc3RhcnRZKSArICcgJyArICh3aWR0aCkgKyAnICcgKyAoc3RhcnRZICsgclkpICsgJyBMJyArICcgJyArICh3aWR0aCkgKyAnICcgKyAoYXJyb3dMb2NhdGlvbi55IC0gYXJyb3dQYWRkaW5nIC8gMikpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHdpZHRoICsgYXJyb3dQYWRkaW5nIC0gdGlwUmFkaXVzKSArICcgJyArICh0aXBZIC0gdGlwUmFkaXVzKSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gJyBRICcgKyAod2lkdGggKyBhcnJvd1BhZGRpbmcpICsgJyAnICsgKHRpcFkpICsgJyAnICsgKHdpZHRoICsgYXJyb3dQYWRkaW5nIC0gdGlwUmFkaXVzKSArICcgJyArICh0aXBZICsgdGlwUmFkaXVzKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyBMJyArICcgJyArICh3aWR0aCkgKyAnICcgKyAoYXJyb3dMb2NhdGlvbi55ICsgYXJyb3dQYWRkaW5nIC8gMikgK1xuICAgICAgICAgICAgICAgICcgTCcgKyAnICcgKyAod2lkdGgpICsgJyAnICsgKGhlaWdodCAtIHJZKSArICcgUSAnICsgd2lkdGggKyAnICcgKyAoaGVpZ2h0KSArICcgJyArICh3aWR0aCAtIHJYKSArICcgJyArIChoZWlnaHQpKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyBMJyArICcgJyArIChzdGFydFggKyByWCkgKyAnICcgKyAoaGVpZ2h0KSArICcgUSAnICsgc3RhcnRYICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoaGVpZ2h0KSArICcgJyArIChzdGFydFgpICsgJyAnICsgKGhlaWdodCAtIHJZKSArICcgeicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnTScgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgKHN0YXJ0WSkgKyAnIFEgJyArIChzdGFydFgpICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoc3RhcnRZKSArICcgJyArIChzdGFydFgpICsgJyAnICsgKHN0YXJ0WSArIHJZKSArICcgTCcgKyAnICcgKyAoc3RhcnRYKSArICcgJyArIChhcnJvd0xvY2F0aW9uLnkgLSBhcnJvd1BhZGRpbmcgLyAyKSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCcgTCcgKyAnICcgKyAoc3RhcnRYIC0gYXJyb3dQYWRkaW5nICsgdGlwUmFkaXVzKSArICcgJyArICh0aXBZIC0gdGlwUmFkaXVzKSk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gJyBRICcgKyAoc3RhcnRYIC0gYXJyb3dQYWRkaW5nKSArICcgJyArICh0aXBZKSArICcgJyArIChzdGFydFggLSBhcnJvd1BhZGRpbmcgKyB0aXBSYWRpdXMpICsgJyAnICsgKHRpcFkgKyB0aXBSYWRpdXMpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHN0YXJ0WCkgKyAnICcgKyAoYXJyb3dMb2NhdGlvbi55ICsgYXJyb3dQYWRkaW5nIC8gMikgK1xuICAgICAgICAgICAgICAgICcgTCcgKyAnICcgKyAoc3RhcnRYKSArICcgJyArIChoZWlnaHQgLSByWSkgKyAnIFEgJyArIHN0YXJ0WCArICcgJ1xuICAgICAgICAgICAgICAgICsgKGhlaWdodCkgKyAnICcgKyAoc3RhcnRYICsgclgpICsgJyAnICsgKGhlaWdodCkpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdCgnIEwnICsgJyAnICsgKHdpZHRoIC0gclgpICsgJyAnICsgKGhlaWdodCkgKyAnIFEgJyArIHdpZHRoICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoaGVpZ2h0KSArICcgJyArICh3aWR0aCkgKyAnICcgKyAoaGVpZ2h0IC0gclkpICtcbiAgICAgICAgICAgICAgICAnIEwnICsgJyAnICsgKHdpZHRoKSArICcgJyArIChzdGFydFkgKyByWSkgKyAnIFEgJyArIHdpZHRoICsgJyAnXG4gICAgICAgICAgICAgICAgKyAoc3RhcnRZKSArICcgJyArICh3aWR0aCAtIHJYKSArICcgJyArIChzdGFydFkpICsgJyB6Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICB9XG4gICAgZXhwb3J0cy5maW5kRGlyZWN0aW9uID0gZmluZERpcmVjdGlvbjtcbiAgICBmdW5jdGlvbiB0ZXh0RWxlbWVudChvcHRpb25zLCBmb250LCBjb2xvciwgcGFyZW50LCBpc01pbnVzKSB7XG4gICAgICAgIGlmIChpc01pbnVzID09PSB2b2lkIDApIHsgaXNNaW51cyA9IGZhbHNlOyB9XG4gICAgICAgIHZhciByZW5kZXJPcHRpb25zID0ge307XG4gICAgICAgIHZhciBodG1sT2JqZWN0O1xuICAgICAgICB2YXIgdHNwYW5FbGVtZW50O1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSBuZXcgZWoyX2Jhc2VfMS5TdmdSZW5kZXJlcignJyk7XG4gICAgICAgIHZhciB0ZXh0O1xuICAgICAgICB2YXIgaGVpZ2h0O1xuICAgICAgICByZW5kZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgJ2lkJzogb3B0aW9ucy5pZCxcbiAgICAgICAgICAgICd4Jzogb3B0aW9ucy54LFxuICAgICAgICAgICAgJ3knOiBvcHRpb25zLnksXG4gICAgICAgICAgICAnZmlsbCc6IGNvbG9yLFxuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IGZvbnQuc2l6ZSxcbiAgICAgICAgICAgICdmb250LXN0eWxlJzogZm9udC5mb250U3R5bGUsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOiBmb250LmZvbnRGYW1pbHksXG4gICAgICAgICAgICAnZm9udC13ZWlnaHQnOiBmb250LmZvbnRXZWlnaHQsXG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBvcHRpb25zLnRyYW5zZm9ybSxcbiAgICAgICAgICAgICdvcGFjaXR5JzogZm9udC5vcGFjaXR5LFxuICAgICAgICAgICAgJ2RvbWluYW50LWJhc2VsaW5lJzogb3B0aW9ucy5iYXNlTGluZVxuICAgICAgICB9O1xuICAgICAgICB0ZXh0ID0gdHlwZW9mIG9wdGlvbnMudGV4dCA9PT0gJ3N0cmluZycgPyBvcHRpb25zLnRleHQgOiBpc01pbnVzID8gb3B0aW9ucy50ZXh0W29wdGlvbnMudGV4dC5sZW5ndGggLSAxXSA6IG9wdGlvbnMudGV4dFswXTtcbiAgICAgICAgaHRtbE9iamVjdCA9IHJlbmRlcmVyLmNyZWF0ZVRleHQocmVuZGVyT3B0aW9ucywgdGV4dCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50ZXh0ICE9PSAnc3RyaW5nJyAmJiBvcHRpb25zLnRleHQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IG9wdGlvbnMudGV4dC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IChtZWFzdXJlVGV4dChvcHRpb25zLnRleHRbaV0sIGZvbnQpLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgdHNwYW5FbGVtZW50ID0gcmVuZGVyZXIuY3JlYXRlVFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAneCc6IG9wdGlvbnMueCwgJ2lkJzogb3B0aW9ucy5pZCxcbiAgICAgICAgICAgICAgICAgICAgJ3knOiAob3B0aW9ucy55KSArICgoaXNNaW51cykgPyAtKGkgKiBoZWlnaHQpIDogKGkgKiBoZWlnaHQpKVxuICAgICAgICAgICAgICAgIH0sIGlzTWludXMgPyBvcHRpb25zLnRleHRbb3B0aW9ucy50ZXh0Lmxlbmd0aCAtIChpICsgMSldIDogb3B0aW9ucy50ZXh0W2ldKTtcbiAgICAgICAgICAgICAgICBodG1sT2JqZWN0LmFwcGVuZENoaWxkKHRzcGFuRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGh0bWxPYmplY3QpO1xuICAgICAgICByZXR1cm4gaHRtbE9iamVjdDtcbiAgICB9XG4gICAgZXhwb3J0cy50ZXh0RWxlbWVudCA9IHRleHRFbGVtZW50O1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVNpemUoY2hhcnQpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lcldpZHRoID0gY2hhcnQuZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgdmFyIGNvbnRhaW5lckhlaWdodCA9IGNoYXJ0LmVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICBjaGFydC5hdmFpbGFibGVTaXplID0gbmV3IFNpemUoc3RyaW5nVG9OdW1iZXIoY2hhcnQud2lkdGgsIGNvbnRhaW5lcldpZHRoKSB8fCBjb250YWluZXJXaWR0aCB8fCA2MDAsIHN0cmluZ1RvTnVtYmVyKGNoYXJ0LmhlaWdodCwgY29udGFpbmVySGVpZ2h0KSB8fCBjb250YWluZXJIZWlnaHQgfHwgNDUwKTtcbiAgICB9XG4gICAgZXhwb3J0cy5jYWxjdWxhdGVTaXplID0gY2FsY3VsYXRlU2l6ZTtcbiAgICBmdW5jdGlvbiBjcmVhdGVTdmcoY2hhcnQpIHtcbiAgICAgICAgY2hhcnQucmVuZGVyZXIgPSBuZXcgZWoyX2Jhc2VfMS5TdmdSZW5kZXJlcihjaGFydC5lbGVtZW50LmlkKTtcbiAgICAgICAgY2FsY3VsYXRlU2l6ZShjaGFydCk7XG4gICAgICAgIGNoYXJ0LnN2Z09iamVjdCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZVN2Zyh7XG4gICAgICAgICAgICBpZDogY2hhcnQuZWxlbWVudC5pZCArICdfc3ZnJyxcbiAgICAgICAgICAgIHdpZHRoOiBjaGFydC5hdmFpbGFibGVTaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjaGFydC5hdmFpbGFibGVTaXplLmhlaWdodFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZXhwb3J0cy5jcmVhdGVTdmcgPSBjcmVhdGVTdmc7XG4gICAgZnVuY3Rpb24gdGl0bGVQb3NpdGlvblgoY2hhcnRTaXplLCBsZWZ0UGFkZGluZywgcmlnaHRQYWRkaW5nLCB0aXRsZVN0eWxlLCB0ZXh0U2l6ZSkge1xuICAgICAgICB2YXIgcG9zaXRpb25YO1xuICAgICAgICBpZiAodGl0bGVTdHlsZS50ZXh0QWxpZ25tZW50ID09PSAnTmVhcicpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWCA9IGxlZnRQYWRkaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRpdGxlU3R5bGUudGV4dEFsaWdubWVudCA9PT0gJ0NlbnRlcicpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uWCA9IGNoYXJ0U2l6ZS53aWR0aCAvIDIgLSB0ZXh0U2l6ZS53aWR0aCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwb3NpdGlvblggPSBjaGFydFNpemUud2lkdGggLSByaWdodFBhZGRpbmcgLSB0ZXh0U2l6ZS53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zaXRpb25YO1xuICAgIH1cbiAgICBleHBvcnRzLnRpdGxlUG9zaXRpb25YID0gdGl0bGVQb3NpdGlvblg7XG4gICAgdmFyIEN1c3RvbWl6ZU9wdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEN1c3RvbWl6ZU9wdGlvbihpZCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDdXN0b21pemVPcHRpb247XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkN1c3RvbWl6ZU9wdGlvbiA9IEN1c3RvbWl6ZU9wdGlvbjtcbiAgICB2YXIgU3RhY2tWYWx1ZXMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdGFja1ZhbHVlcyhzdGFydFZhbHVlLCBlbmRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFZhbHVlcyA9IHN0YXJ0VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmVuZFZhbHVlcyA9IGVuZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdGFja1ZhbHVlcztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuU3RhY2tWYWx1ZXMgPSBTdGFja1ZhbHVlcztcbiAgICB2YXIgVGV4dE9wdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUZXh0T3B0aW9uLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUZXh0T3B0aW9uKGlkLCB4LCB5LCBhbmNob3IsIHRleHQsIHRyYW5zZm9ybSwgYmFzZUxpbmUpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0gPT09IHZvaWQgMCkgeyB0cmFuc2Zvcm0gPSAnJzsgfVxuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaWQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgICAgIF90aGlzLmJhc2VMaW5lID0gJ2F1dG8nO1xuICAgICAgICAgICAgX3RoaXMueCA9IHg7XG4gICAgICAgICAgICBfdGhpcy55ID0geTtcbiAgICAgICAgICAgIF90aGlzLmFuY2hvciA9IGFuY2hvcjtcbiAgICAgICAgICAgIF90aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgX3RoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICAgICAgX3RoaXMuYmFzZUxpbmUgPSBiYXNlTGluZTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVGV4dE9wdGlvbjtcbiAgICB9KEN1c3RvbWl6ZU9wdGlvbikpO1xuICAgIGV4cG9ydHMuVGV4dE9wdGlvbiA9IFRleHRPcHRpb247XG4gICAgdmFyIFBhdGhPcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUGF0aE9wdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUGF0aE9wdGlvbihpZCwgZmlsbCwgd2lkdGgsIGNvbG9yLCBvcGFjaXR5LCBkYXNoQXJyYXksIGQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGlkKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgICAgICAgICBfdGhpcy5maWxsID0gZmlsbDtcbiAgICAgICAgICAgIF90aGlzLnN0cm9rZSA9IGNvbG9yO1xuICAgICAgICAgICAgX3RoaXNbJ3N0cm9rZS13aWR0aCddID0gd2lkdGg7XG4gICAgICAgICAgICBfdGhpc1snc3Ryb2tlLWRhc2hhcnJheSddID0gZGFzaEFycmF5O1xuICAgICAgICAgICAgX3RoaXMuZCA9IGQ7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhdGhPcHRpb247XG4gICAgfShDdXN0b21pemVPcHRpb24pKTtcbiAgICBleHBvcnRzLlBhdGhPcHRpb24gPSBQYXRoT3B0aW9uO1xuICAgIHZhciBSZWN0T3B0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJlY3RPcHRpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJlY3RPcHRpb24oaWQsIGZpbGwsIGJvcmRlciwgb3BhY2l0eSwgcmVjdCwgcngsIHJ5LCB0cmFuc2Zvcm0sIGRhc2hBcnJheSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaWQsIGZpbGwsIGJvcmRlci53aWR0aCwgYm9yZGVyLmNvbG9yLCBvcGFjaXR5LCBkYXNoQXJyYXkpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy55ID0gcmVjdC55O1xuICAgICAgICAgICAgX3RoaXMueCA9IHJlY3QueDtcbiAgICAgICAgICAgIF90aGlzLmhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgX3RoaXMud2lkdGggPSByZWN0LndpZHRoO1xuICAgICAgICAgICAgX3RoaXMucnggPSByeCA/IHJ4IDogMDtcbiAgICAgICAgICAgIF90aGlzLnJ5ID0gcnkgPyByeSA6IDA7XG4gICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm0gPyB0cmFuc2Zvcm0gOiAnJztcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVjdE9wdGlvbjtcbiAgICB9KFBhdGhPcHRpb24pKTtcbiAgICBleHBvcnRzLlJlY3RPcHRpb24gPSBSZWN0T3B0aW9uO1xuICAgIHZhciBDaXJjbGVPcHRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ2lyY2xlT3B0aW9uLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDaXJjbGVPcHRpb24oaWQsIGZpbGwsIGJvcmRlciwgb3BhY2l0eSwgY3gsIGN5LCByKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpZCwgZmlsbCwgYm9yZGVyLndpZHRoLCBib3JkZXIuY29sb3IsIG9wYWNpdHkpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jeSA9IGN5O1xuICAgICAgICAgICAgX3RoaXMuY3ggPSBjeDtcbiAgICAgICAgICAgIF90aGlzLnIgPSByO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDaXJjbGVPcHRpb247XG4gICAgfShQYXRoT3B0aW9uKSk7XG4gICAgZXhwb3J0cy5DaXJjbGVPcHRpb24gPSBDaXJjbGVPcHRpb247XG4gICAgdmFyIFBvbHlnb25PcHRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQb2x5Z29uT3B0aW9uKGlkLCBwb2ludHMsIGZpbGwpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICAgICAgdGhpcy5maWxsID0gZmlsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUG9seWdvbk9wdGlvbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUG9seWdvbk9wdGlvbiA9IFBvbHlnb25PcHRpb247XG4gICAgdmFyIFNpemUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTaXplO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TaXplID0gU2l6ZTtcbiAgICB2YXIgUmVjdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVjdDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUmVjdCA9IFJlY3Q7XG4gICAgdmFyIENoYXJ0TG9jYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDaGFydExvY2F0aW9uKHgsIHkpIHtcbiAgICAgICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDaGFydExvY2F0aW9uO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DaGFydExvY2F0aW9uID0gQ2hhcnRMb2NhdGlvbjtcbiAgICB2YXIgVGhpY2tuZXNzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVGhpY2tuZXNzKGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICAgICAgdGhpcy5ib3R0b20gPSBib3R0b207XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFRoaWNrbmVzcztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVGhpY2tuZXNzID0gVGhpY2tuZXNzO1xuICAgIHZhciBDb2xvclZhbHVlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ29sb3JWYWx1ZShyLCBnLCBiKSB7XG4gICAgICAgICAgICB0aGlzLnIgPSByO1xuICAgICAgICAgICAgdGhpcy5nID0gZztcbiAgICAgICAgICAgIHRoaXMuYiA9IGI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbG9yVmFsdWU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbG9yVmFsdWUgPSBDb2xvclZhbHVlO1xuICAgIHZhciBQb2ludERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBQb2ludERhdGEocG9pbnQsIHNlcmllcywgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gMDsgfVxuICAgICAgICAgICAgdGhpcy5wb2ludCA9IHBvaW50O1xuICAgICAgICAgICAgdGhpcy5zZXJpZXMgPSBzZXJpZXM7XG4gICAgICAgICAgICB0aGlzLmxpZXJJbmRleCA9IGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQb2ludERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlBvaW50RGF0YSA9IFBvaW50RGF0YTtcbiAgICB2YXIgQ29udHJvbFBvaW50cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbnRyb2xQb2ludHMoY29udHJvbFBvaW50MSwgY29udHJvbFBvaW50Mikge1xuICAgICAgICAgICAgdGhpcy5jb250cm9sUG9pbnQxID0gY29udHJvbFBvaW50MTtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbFBvaW50MiA9IGNvbnRyb2xQb2ludDI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbnRyb2xQb2ludHM7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkNvbnRyb2xQb2ludHMgPSBDb250cm9sUG9pbnRzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vdXRpbHMvaGVscGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgZXhwb3J0cy5sb2FkZWQgPSAnbG9hZGVkJztcbiAgICBleHBvcnRzLmxvYWQgPSAnbG9hZCc7XG4gICAgZXhwb3J0cy5hbmltYXRpb25Db21wbGV0ZSA9ICdhbmltYXRpb25Db21wbGV0ZSc7XG4gICAgZXhwb3J0cy5sZWdlbmRSZW5kZXIgPSAnbGVnZW5kUmVuZGVyJztcbiAgICBleHBvcnRzLnRleHRSZW5kZXIgPSAndGV4dFJlbmRlcic7XG4gICAgZXhwb3J0cy5wb2ludFJlbmRlciA9ICdwb2ludFJlbmRlcic7XG4gICAgZXhwb3J0cy5zZXJpZXNSZW5kZXIgPSAnc2VyaWVzUmVuZGVyJztcbiAgICBleHBvcnRzLmF4aXNMYWJlbFJlbmRlciA9ICdheGlzTGFiZWxSZW5kZXInO1xuICAgIGV4cG9ydHMudG9vbHRpcFJlbmRlciA9ICd0b29sdGlwUmVuZGVyJztcbiAgICBleHBvcnRzLmNoYXJ0TW91c2VNb3ZlID0gJ2NoYXJ0TW91c2VNb3ZlJztcbiAgICBleHBvcnRzLmNoYXJ0TW91c2VDbGljayA9ICdjaGFydE1vdXNlQ2xpY2snO1xuICAgIGV4cG9ydHMuY2hhcnRNb3VzZUxlYXZlID0gJ2NoYXJ0TW91c2VMZWF2ZSc7XG4gICAgZXhwb3J0cy5jaGFydE1vdXNlRG93biA9ICdjaGFydE1vdXNlRG93bic7XG4gICAgZXhwb3J0cy5jaGFydE1vdXNlVXAgPSAnY2hhcnRNb3VzZVVwJztcbiAgICBleHBvcnRzLnpvb21Db21wbGV0ZSA9ICd6b29tQ29tcGxldGUnO1xuICAgIGV4cG9ydHMuZHJhZ0NvbXBsZXRlID0gJ2RyYWdDb21wbGV0ZSc7XG4gICAgZXhwb3J0cy5yZXNpemVkID0gJ3Jlc2l6ZWQnO1xuICAgIGV4cG9ydHMuYmVmb3JlUHJpbnQgPSAnYmVmb3JlUHJpbnQnO1xuICAgIGV4cG9ydHMuYW5ub3RhdGlvblJlbmRlciA9ICdhbm5vdGF0aW9uUmVuZGVyJztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL21vZGVsL2NvbnN0YW50cy5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vY29tbW9uL21vZGVsL3RoZW1lXCIsIFwiLi4vY29tbW9uL21vZGVsL2Jhc2VcIiwgXCIuL2F4aXMvYXhpc1wiLCBcIi4vYXhpcy9jYXJ0ZXNpYW4tcGFuZWxcIiwgXCIuLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi9zZXJpZXMvY2hhcnQtc2VyaWVzXCIsIFwiLi4vY29tbW9uL21vZGVsL2RhdGFcIiwgXCIuL3Nlcmllcy9tYXJrZXJcIiwgXCIuLi9jb21tb24vbGVnZW5kL2xlZ2VuZFwiLCBcIi4vdGVjaG5pY2FsLWluZGljYXRvcnMvdGVjaG5pY2FsLWluZGljYXRvclwiLCBcIi4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi9jb21tb24vdXRpbHMvZXhwb3J0XCIsIFwiLi9tb2RlbC9jaGFydC1iYXNlXCIsIFwiLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGVqMl9iYXNlXzMsIGVqMl9iYXNlXzQsIGVqMl9iYXNlXzUsIGVqMl9iYXNlXzYsIGhlbHBlcl8xLCBoZWxwZXJfMiwgdGhlbWVfMSwgYmFzZV8xLCBheGlzXzEsIGNhcnRlc2lhbl9wYW5lbF8xLCBoZWxwZXJfMywgY2hhcnRfc2VyaWVzXzEsIGRhdGFfMSwgbWFya2VyXzEsIGxlZ2VuZF8xLCB0ZWNobmljYWxfaW5kaWNhdG9yXzEsIGNvbnN0YW50c18xLCBleHBvcnRfMSwgY2hhcnRfYmFzZV8xLCBoZWxwZXJfNCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVG9vbHRpcFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRvb2x0aXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVG9vbHRpcFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBUb29sdGlwU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBUb29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwic2hhcmVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJyMwMDA4MTYnKVxuICAgIF0sIFRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiZmlsbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgVG9vbHRpcFNldHRpbmdzLnByb3RvdHlwZSwgXCJoZWFkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwLjc1KVxuICAgIF0sIFRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BhY2l0eVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbXBsZXgodGhlbWVfMS5UaGVtZS50b29sdGlwTGFiZWxGb250LCBiYXNlXzEuRm9udClcbiAgICBdLCBUb29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgVG9vbHRpcFNldHRpbmdzLnByb3RvdHlwZSwgXCJmb3JtYXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlQW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh7IGNvbG9yOiAnI2NjY2NjYycsIHdpZHRoOiAwLjUgfSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBUb29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuVG9vbHRpcFNldHRpbmdzID0gVG9vbHRpcFNldHRpbmdzO1xuICAgIHZhciBDcm9zc2hhaXJTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDcm9zc2hhaXJTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ3Jvc3NoYWlyU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENyb3NzaGFpclNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMi5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQ3Jvc3NoYWlyU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbXBsZXgoeyBjb2xvcjogJyM0ZjRmNGYnLCB3aWR0aDogMSB9LCBiYXNlXzEuQm9yZGVyKVxuICAgIF0sIENyb3NzaGFpclNldHRpbmdzLnByb3RvdHlwZSwgXCJsaW5lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0JvdGgnKVxuICAgIF0sIENyb3NzaGFpclNldHRpbmdzLnByb3RvdHlwZSwgXCJsaW5lVHlwZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQ3Jvc3NoYWlyU2V0dGluZ3MgPSBDcm9zc2hhaXJTZXR0aW5ncztcbiAgICB2YXIgWm9vbVNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFpvb21TZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gWm9vbVNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBab29tU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8yLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBab29tU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVNlbGVjdGlvblpvb21pbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBab29tU2V0dGluZ3MucHJvdG90eXBlLCBcImVuYWJsZVBpbmNoWm9vbWluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFpvb21TZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlTW91c2VXaGVlbFpvb21pbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFpvb21TZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlRGVmZXJyZWRab29taW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ1hZJylcbiAgICBdLCBab29tU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShbJ1pvb20nLCAnWm9vbUluJywgJ1pvb21PdXQnLCAnUGFuJywgJ1Jlc2V0J10pXG4gICAgXSwgWm9vbVNldHRpbmdzLnByb3RvdHlwZSwgXCJ0b29sYmFySXRlbXNcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlpvb21TZXR0aW5ncyA9IFpvb21TZXR0aW5ncztcbiAgICB2YXIgQ2hhcnQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ2hhcnQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENoYXJ0KG9wdGlvbnMsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMsIGVsZW1lbnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jaGFydEFyZWFUeXBlID0gJ0NhcnRlc2lhbic7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudW5XaXJlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRQcml2YXRlVmFyaWFibGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3VsdHVyZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRUaGVtZSgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDaGFydFN2ZygpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5pbml0UHJpdmF0ZVZhcmlhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlU2VyaWVzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbEF4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudmVydGljYWxBeGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hBeGlzKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEZWZpbml0aW9uKHRoaXMucm93cyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hEZWZpbml0aW9uKHRoaXMuY29sdW1ucyk7XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwTW9kdWxlLnByZXZpb3VzUG9pbnRzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoY29uc3RhbnRzXzEubG9hZCwgeyBjaGFydDogdGhpcyB9KTtcbiAgICAgICAgICAgIHRoaXMubWFya2VyUmVuZGVyID0gbmV3IG1hcmtlcl8xLk1hcmtlcih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQXJlYVR5cGUoKTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVmlzaWJsZVNlcmllcygpO1xuICAgICAgICAgICAgdGhpcy5pbml0VGVjaG5pY2FsSW5kaWNhdG9ycygpO1xuICAgICAgICAgICAgdGhpcy5pbml0VHJlbmRMaW5lcygpO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWaXNpYmxlQXhpcygpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YSgpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZ2V0TG9jYWxpemVkTGFiZWwgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVPYmplY3QuZ2V0Q29uc3RhbnQoa2V5KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnJlZnJlc2hCb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlZ2VuZE1vZHVsZSAmJiB0aGlzLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZE1vZHVsZS5nZXRMZWdlbmRPcHRpb25zKHRoaXMudmlzaWJsZVNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaXNDYWxjdWxhdGVTdGFja2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHNlcmllcztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnZpc2libGVTZXJpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZXJpZXMgPSB0aGlzLnZpc2libGVTZXJpZXNbaV07XG4gICAgICAgICAgICAgICAgc2VyaWVzLnBvc2l0aW9uID0gc2VyaWVzLnJlY3RDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoKChzZXJpZXMudHlwZS5pbmRleE9mKCdTdGFja2luZycpICE9PSAtMSkgfHwgKHNlcmllcy5kcmF3VHlwZS5pbmRleE9mKCdTdGFja2luZycpICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykpICYmICFpc0NhbGN1bGF0ZVN0YWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5jYWxjdWxhdGVTdGFja2VkVmFsdWUoc2VyaWVzLnR5cGUuaW5kZXhPZignMTAwJykgPiAtMSk7XG4gICAgICAgICAgICAgICAgICAgIGlzQ2FsY3VsYXRlU3RhY2tpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQm91bmRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQm9yZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpdGxlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckFyZWFCb3JkZXIoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2VyaWVzRWxlbWVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlab29ta2l0KCk7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1TZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2Vjb25kYXJ5RWxlbWVudFBvc2l0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckFubm90YXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnNldFNlY29uZGFyeUVsZW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gaGVscGVyXzQuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX1NlY29uZGFyeV9FbGVtZW50Jyk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBzdmdSZWN0ID0gaGVscGVyXzQuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3N2ZycpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gTWF0aC5tYXgoc3ZnUmVjdC5sZWZ0IC0gcmVjdC5sZWZ0LCAwKSArICdweCc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IE1hdGgubWF4KHN2Z1JlY3QudG9wIC0gcmVjdC50b3AsIDApICsgJ3B4JztcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmluaXRpYWxpemVNb2R1bGVFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUxhYmVsQ29sbGVjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzRWxlbWVudHMgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdTZXJpZXNDb2xsZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIHRoaXMueUF4aXNFbGVtZW50cyA9IHRoaXMucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ3lBeGlzQ29sbGVjdGlvbicgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmRpY2F0b3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNhdG9yRWxlbWVudHMgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdJbmRpY2F0b3JDb2xsZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhhc1RyZW5kbGluZXMoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlbmRMaW5lRWxlbWVudHMgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdUcmVuZExpbmVDb2xsZWN0aW9uJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YUxhYmVsRWxlbWVudHMgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdEYXRhTGFiZWxDb2xsZWN0aW9uJyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmhhc1RyZW5kbGluZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXNUcmVuZGxpbmU7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpc1RyZW5kbGluZSA9IHNlcmllcy50cmVuZGxpbmVzLmxlbmd0aCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNUcmVuZGxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzVHJlbmRsaW5lO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUucmVuZGVyU2VyaWVzRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVNb2R1bGVFbGVtZW50cygpO1xuICAgICAgICAgICAgaWYgKHRoaXMucm93cy5sZW5ndGggPiAwICYmIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydEF4aXNMYXlvdXRQYW5lbC5yZW5kZXJBeGVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRvb2x0aXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0b29sdGlwRGl2LmlkID0gdGhpcy5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCc7XG4gICAgICAgICAgICAgICAgdG9vbHRpcERpdi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3Bvc2l0aW9uOiByZWxhdGl2ZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0b29sdGlwRGl2KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b29sdGlwLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN2Z09iamVjdC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdfVXNlckludGVyYWN0aW9uJywgc3R5bGU6ICdwb2ludGVyLWV2ZW50czpub25lOycgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5pbmRpY2F0b3JzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNhdG9yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1toZWxwZXJfMi5maXJzdFRvTG93ZXJDYXNlKGluZGljYXRvci50eXBlKSArICdJbmRpY2F0b3JNb2R1bGUnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1toZWxwZXJfMi5maXJzdFRvTG93ZXJDYXNlKGluZGljYXRvci50eXBlKSArICdJbmRpY2F0b3JNb2R1bGUnXS5jcmVhdGVJbmRpY2F0b3JFbGVtZW50cyh0aGlzLCBpbmRpY2F0b3IsIGluZGljYXRvci5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMudmlzaWJsZVNlcmllczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllcy50cmVuZGxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVuZExpbmVNb2R1bGUuZ2V0VHJlbmRMaW5lRWxlbWVudHMoc2VyaWVzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfZCA9IDAsIF9lID0gdGhpcy52aXNpYmxlU2VyaWVzOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9lW19kXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyXzEuZmluZENsaXBSZWN0KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5yZW5kZXJTZXJpZXModGhpcywgaXRlbS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFwcGVuZFNlcmllc0VsZW1lbnRzKCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5hcHBlbmRTZXJpZXNFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjbGlwUmVjdCA9IHRoaXMucmVuZGVyZXIuZHJhd0NsaXBQYXRoKHtcbiAgICAgICAgICAgICAgICAnaWQnOiB0aGlzLmVsZW1lbnQuaWQgKyAnX0NoYXJ0QXJlYUNsaXBSZWN0XycsXG4gICAgICAgICAgICAgICAgJ3gnOiB0aGlzLmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0LngsXG4gICAgICAgICAgICAgICAgJ3knOiB0aGlzLmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0LnksXG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogdGhpcy5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogdGhpcy5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdC5oZWlnaHQsXG4gICAgICAgICAgICAgICAgJ2ZpbGwnOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAxLFxuICAgICAgICAgICAgICAgICdzdHJva2UnOiAnR3JheSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXJpZXNFbGVtZW50cy5hcHBlbmRDaGlsZChjbGlwUmVjdCk7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhTGFiZWxFbGVtZW50cy5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmllc0VsZW1lbnRzLmFwcGVuZENoaWxkKHRoaXMuZGF0YUxhYmVsRWxlbWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RyaXBMaW5lTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpcExpbmVNb2R1bGUucmVuZGVyU3RyaXBMaW5lKHRoaXMsICdCZWhpbmQnLCB0aGlzLmF4aXNDb2xsZWN0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN2Z09iamVjdC5hcHBlbmRDaGlsZCh0aGlzLnNlcmllc0VsZW1lbnRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqZWN0LmFwcGVuZENoaWxkKHRoaXMueUF4aXNFbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pbmRpY2F0b3JFbGVtZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqZWN0LmFwcGVuZENoaWxkKHRoaXMuaW5kaWNhdG9yRWxlbWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHJlbmRMaW5lRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iamVjdC5hcHBlbmRDaGlsZCh0aGlzLnRyZW5kTGluZUVsZW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmlwTGluZU1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBMaW5lTW9kdWxlLnJlbmRlclN0cmlwTGluZSh0aGlzLCAnT3ZlcicsIHRoaXMuYXhpc0NvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxlZ2VuZE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGVnZW5kTW9kdWxlLnJlbmRlckxlZ2VuZCh0aGlzLCB0aGlzLmxlZ2VuZFNldHRpbmdzLCB0aGlzLmxlZ2VuZE1vZHVsZS5sZWdlbmRCb3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnRvb2x0aXAuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmplY3QuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiB0aGlzLmVsZW1lbnQuaWQgKyAnX1VzZXJJbnRlcmFjdGlvbicsIHN0eWxlOiAncG9pbnRlci1ldmVudHM6bm9uZTsnIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnN2Z09iamVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5hcHBseVpvb21raXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tTW9kdWxlICYmIHRoaXMuem9vbU1vZHVsZS5pc1pvb21lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuem9vbU1vZHVsZS5hcHBseVpvb21Ub29sa2l0KHRoaXMsIHRoaXMuYXhpc0NvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnJlbmRlckFubm90YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbm5vdGF0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uTW9kdWxlLnJlbmRlckFubm90YXRpb25zKGhlbHBlcl80LmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnBlcmZvcm1TZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhSW5kZXhlcyA9IGVqMl9iYXNlXzQuZXh0ZW5kKFtdLCB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5pbnZva2VTZWxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhSW5kZXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWREYXRhSW5kZXhlcyA9IHNlbGVjdGVkRGF0YUluZGV4ZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUucmVkcmF3U2VsZWN0aW9uKHRoaXMsIHRoaXMuc2VsZWN0aW9uTW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5wcm9jZXNzRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXM7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVTZXJpZXNDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudmlzaWJsZVNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzXzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFzZXJpZXNfMS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlcmllc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzXzEuY2F0ZWdvcnkgIT09ICdJbmRpY2F0b3InICYmIHNlcmllc18xLmNhdGVnb3J5ICE9PSAnVHJlbmRMaW5lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEYXRhTW9kdWxlKHNlcmllc18xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5pbmRpY2F0b3JzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgIHZhciBpbmRpY2F0b3IgPSBfY1tfYl07XG4gICAgICAgICAgICAgICAgaWYgKCFpbmRpY2F0b3Iuc2VyaWVzTmFtZSAmJiBpbmRpY2F0b3IuZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVjaEluZGljYXRvciA9IGluZGljYXRvcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRGF0YU1vZHVsZSh0ZWNoSW5kaWNhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlzaWJsZVNlcmllcy5sZW5ndGggfHwgdGhpcy52aXNpYmxlU2VyaWVzQ291bnQgPT09IHRoaXMudmlzaWJsZVNlcmllcy5sZW5ndGggJiYgY2hlY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hCb3VuZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkJywgeyBjaGFydDogdGhpcyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmluaXRpYWxpemVEYXRhTW9kdWxlID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgc2VyaWVzLnhEYXRhID0gW107XG4gICAgICAgICAgICBzZXJpZXMueURhdGEgPSBbXTtcbiAgICAgICAgICAgIHNlcmllcy5kYXRhTW9kdWxlID0gbmV3IGRhdGFfMS5EYXRhKHNlcmllcy5kYXRhU291cmNlLCBzZXJpZXMucXVlcnkpO1xuICAgICAgICAgICAgc2VyaWVzLnBvaW50cyA9IFtdO1xuICAgICAgICAgICAgc2VyaWVzLnJlZnJlc2hEYXRhTWFuYWdlcih0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNhbGN1bGF0ZUJvdW5kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gMTU7XG4gICAgICAgICAgICB2YXIgbWFyZ2luID0gdGhpcy5tYXJnaW47XG4gICAgICAgICAgICB2YXIgdGl0bGVIZWlnaHQgPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMudGl0bGUpIHtcbiAgICAgICAgICAgICAgICB0aXRsZUhlaWdodCA9IGhlbHBlcl8xLm1lYXN1cmVUZXh0KHRoaXMudGl0bGUsIHRoaXMudGl0bGVTdHlsZSkuaGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0b3AgPSBtYXJnaW4udG9wICsgdGl0bGVIZWlnaHQgKyB0aGlzLmNoYXJ0QXJlYS5ib3JkZXIud2lkdGggLyAyO1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBtYXJnaW4ubGVmdDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuYXZhaWxhYmxlU2l6ZS53aWR0aCAtIGxlZnQgLSBtYXJnaW4ucmlnaHQgLSB0aGlzLmJvcmRlci53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmF2YWlsYWJsZVNpemUuaGVpZ2h0IC0gdG9wIC0gdGhpcy5ib3JkZXIud2lkdGggLSBtYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsQ2xpcFJlY3QgPSBuZXcgaGVscGVyXzMuUmVjdChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGVnZW5kTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWdlbmRNb2R1bGUuY2FsY3VsYXRlTGVnZW5kQm91bmRzKHRoaXMuaW5pdGlhbENsaXBSZWN0LCB0aGlzLmF2YWlsYWJsZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFydEF4aXNMYXlvdXRQYW5lbC5tZWFzdXJlQXhpcyh0aGlzLmluaXRpYWxDbGlwUmVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5wcmludCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIGV4cG9ydENoYXJ0ID0gbmV3IGV4cG9ydF8xLkV4cG9ydFV0aWxzKHRoaXMpO1xuICAgICAgICAgICAgZXhwb3J0Q2hhcnQucHJpbnQoaWQpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZXhwb3J0ID0gZnVuY3Rpb24gKHR5cGUsIGZpbGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZXhwb3J0Q2hhcnQgPSBuZXcgZXhwb3J0XzEuRXhwb3J0VXRpbHModGhpcyk7XG4gICAgICAgICAgICBleHBvcnRDaGFydC5leHBvcnQodHlwZSwgZmlsZU5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuaW5pdFRyZW5kTGluZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy52aXNpYmxlU2VyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzZXJpZXMgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIHRyZW5kSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSBzZXJpZXMudHJlbmRsaW5lczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZW5kbGluZSA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZW5kTGluZSA9IHRyZW5kbGluZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBoZWxwZXJfMi5maXJzdFRvTG93ZXJDYXNlKHRyZW5kTGluZS50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJlbmRMaW5lTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmVuZExpbmUuaW5kZXggPSB0cmVuZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJlbmRMaW5lLnNvdXJjZUluZGV4ID0gc2VyaWVzLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVuZExpbmVNb2R1bGUuaW5pdFNlcmllc0NvbGxlY3Rpb24odHJlbmRMaW5lLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmVuZExpbmUudGFyZ2V0U2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlU2VyaWVzLnB1c2godHJlbmRMaW5lLnRhcmdldFNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJlbmRJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNhbGN1bGF0ZUFyZWFUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuc2VyaWVzWzBdO1xuICAgICAgICAgICAgaWYgKHNlcmllcykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVxdWlyZUludmVydGVkQXhpcyA9ICgoc2VyaWVzLnR5cGUuaW5kZXhPZignQmFyJykgIT09IC0xKSAmJiAhdGhpcy5pc1RyYW5zcG9zZWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICgoc2VyaWVzLnR5cGUuaW5kZXhPZignQmFyJykgPT09IC0xKSAmJiB0aGlzLmlzVHJhbnNwb3NlZCAmJiB0aGlzLmNoYXJ0QXJlYVR5cGUgIT09ICdQb2xhclJhZGFyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYXJ0QXhpc0xheW91dFBhbmVsID0gdGhpcy5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyAodGhpcy5wb2xhclNlcmllc01vZHVsZSB8fCB0aGlzLnJhZGFyU2VyaWVzTW9kdWxlKVxuICAgICAgICAgICAgICAgIDogbmV3IGNhcnRlc2lhbl9wYW5lbF8xLkNhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbCh0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNhbGN1bGF0ZVZpc2libGVBeGlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGF4aXM7XG4gICAgICAgICAgICB2YXIgc2VyaWVzO1xuICAgICAgICAgICAgdmFyIGF4ZXMgPSBbdGhpcy5wcmltYXJ5WEF4aXMsIHRoaXMucHJpbWFyeVlBeGlzXTtcbiAgICAgICAgICAgIGF4ZXMgPSB0aGlzLmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nID8gYXhlcy5jb25jYXQodGhpcy5heGVzKSA6IGF4ZXM7XG4gICAgICAgICAgICB0aGlzLmF4aXNDb2xsZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGF4ZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBheGlzID0gYXhlc1tpXTtcbiAgICAgICAgICAgICAgICBheGlzLnNlcmllcyA9IFtdO1xuICAgICAgICAgICAgICAgIGF4aXMubGFiZWxzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudmlzaWJsZVNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllc18yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRBeGlzKHNlcmllc18yLCBheGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMuaW5kaWNhdG9yczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGljYXRvciA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0QXhpcyhpbmRpY2F0b3IsIGF4aXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5vcmllbnRhdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXhpc0NvbGxlY3Rpb25zLnB1c2goYXhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucm93cy5sZW5ndGggPiAwICYmIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydEF4aXNMYXlvdXRQYW5lbC5tZWFzdXJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5pbml0QXhpcyA9IGZ1bmN0aW9uIChzZXJpZXMsIGF4aXMpIHtcbiAgICAgICAgICAgIGlmIChzZXJpZXMueEF4aXNOYW1lID09PSBheGlzLm5hbWUgfHwgKHNlcmllcy54QXhpc05hbWUgPT0gbnVsbCAmJiBheGlzLm5hbWUgPT09ICdwcmltYXJ5WEF4aXMnKSkge1xuICAgICAgICAgICAgICAgIGF4aXMub3JpZW50YXRpb24gPSB0aGlzLnJlcXVpcmVJbnZlcnRlZEF4aXMgPyAnVmVydGljYWwnIDogJ0hvcml6b250YWwnO1xuICAgICAgICAgICAgICAgIHNlcmllcy54QXhpcyA9IGF4aXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlcmllcyBpbnN0YW5jZW9mIGNoYXJ0X3Nlcmllc18xLlNlcmllcykge1xuICAgICAgICAgICAgICAgICAgICBheGlzLnNlcmllcy5wdXNoKHNlcmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLnlBeGlzTmFtZSA9PT0gYXhpcy5uYW1lIHx8IChzZXJpZXMueUF4aXNOYW1lID09IG51bGwgJiYgYXhpcy5uYW1lID09PSAncHJpbWFyeVlBeGlzJykpIHtcbiAgICAgICAgICAgICAgICBheGlzLm9yaWVudGF0aW9uID0gdGhpcy5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gJ0hvcml6b250YWwnIDogJ1ZlcnRpY2FsJztcbiAgICAgICAgICAgICAgICBzZXJpZXMueUF4aXMgPSBheGlzO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMgaW5zdGFuY2VvZiBjaGFydF9zZXJpZXNfMS5TZXJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5zZXJpZXMucHVzaChzZXJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmluaXRUZWNobmljYWxJbmRpY2F0b3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuaW5kaWNhdG9yczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kaWNhdG9yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciB0ZWNoSW5kaWNhdG9yID0gaW5kaWNhdG9yO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gaGVscGVyXzIuZmlyc3RUb0xvd2VyQ2FzZSh0ZWNoSW5kaWNhdG9yLnR5cGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzW3R5cGUgKyAnSW5kaWNhdG9yTW9kdWxlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgdGVjaEluZGljYXRvci5pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbdHlwZSArICdJbmRpY2F0b3JNb2R1bGUnXS5pbml0U2VyaWVzQ29sbGVjdGlvbih0ZWNoSW5kaWNhdG9yLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRlY2hJbmRpY2F0b3IudGFyZ2V0U2VyaWVzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFNlcmllcyA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRpY2F0b3Iuc2VyaWVzTmFtZSB8fCBpbmRpY2F0b3IuZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlcmllcy5wdXNoKHRhcmdldFNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUucmVmcmVzaFRlY2huaWNhbEluZGljYXRvciA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluZGljYXRvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEluZGljYXRvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHNlcmllcyBpbnN0YW5jZW9mIGNoYXJ0X3Nlcmllc18xLlNlcmllcyAmJiBzZXJpZXMuY2F0ZWdvcnkgIT09ICdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmluZGljYXRvcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kaWNhdG9yID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGljYXRvci5zZXJpZXNOYW1lID09PSBzZXJpZXMubmFtZSAmJiAhaW5kaWNhdG9yLmRhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kaWNhdG9yLnNldERhdGFTb3VyY2Uoc2VyaWVzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzZXJpZXMgaW5zdGFuY2VvZiB0ZWNobmljYWxfaW5kaWNhdG9yXzEuVGVjaG5pY2FsSW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEluZGljYXRvciA9IHNlcmllcztcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SW5kaWNhdG9yLnNldERhdGFTb3VyY2Uoc2VyaWVzIGluc3RhbmNlb2YgY2hhcnRfc2VyaWVzXzEuU2VyaWVzID8gc2VyaWVzIDogbnVsbCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZVNlcmllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXM7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVTZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2xvcnMgPSB0aGlzLnBhbGV0dGVzLmxlbmd0aCA/IHRoaXMucGFsZXR0ZXMgOiB0aGVtZV8xLmdldFNlcmllc0NvbG9yKHRoaXMudGhlbWUpO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gY29sb3JzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnNlcmllcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNlcmllcyA9IHRoaXMuc2VyaWVzW2ldO1xuICAgICAgICAgICAgICAgIHNlcmllcy5pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmludGVyaW9yID0gc2VyaWVzLmZpbGwgfHwgY29sb3JzW2kgJSBjb3VudF07XG4gICAgICAgICAgICAgICAgc3dpdGNoIChzZXJpZXMudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdCYXInOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdTdGFja2luZ0Jhcic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1N0YWNraW5nQmFyMTAwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcmllc1swXS50eXBlLmluZGV4T2YoJ0JhcicpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BvbGFyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmFkYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnRBcmVhVHlwZSAhPT0gJ1BvbGFyUmFkYXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgJiYgKChzZXJpZXMueEF4aXNOYW1lID09PSBudWxsICYmIHNlcmllcy55QXhpc05hbWUgIT09IG51bGwpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNlcmllcy54QXhpc05hbWUgIT09IG51bGwgJiYgc2VyaWVzLnlBeGlzTmFtZSA9PT0gbnVsbCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VyaWVzLnhBeGlzTmFtZSAhPT0gbnVsbCAmJiBzZXJpZXMueUF4aXNOYW1lICE9PSBudWxsKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInIHx8IHRoaXMuc2VyaWVzWzBdLnR5cGUuaW5kZXhPZignQmFyJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlcmllcy5wdXNoKHNlcmllcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJpZXNbaV0gPSBzZXJpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5yZW5kZXJUaXRsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heFRpdGxlU2l6ZSA9IHRoaXMuYXZhaWxhYmxlU2l6ZS53aWR0aCAtIHRoaXMubWFyZ2luLmxlZnQgLSB0aGlzLm1hcmdpbi5yaWdodDtcbiAgICAgICAgICAgICAgICB2YXIgdHJpbW1lZFRpdGxlID0gaGVscGVyXzEudGV4dFRyaW0obWF4VGl0bGVTaXplLCB0aGlzLnRpdGxlLCB0aGlzLnRpdGxlU3R5bGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBoZWxwZXJfMS5tZWFzdXJlVGV4dCh0cmltbWVkVGl0bGUsIHRoaXMudGl0bGVTdHlsZSk7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuVGV4dE9wdGlvbih0aGlzLmVsZW1lbnQuaWQgKyAnX0NoYXJ0VGl0bGUnLCBoZWxwZXJfMi50aXRsZVBvc2l0aW9uWCh0aGlzLmF2YWlsYWJsZVNpemUsIHRoaXMubWFyZ2luLmxlZnQsIHRoaXMubWFyZ2luLnJpZ2h0LCB0aGlzLnRpdGxlU3R5bGUsIHRoaXMuZWxlbWVudFNpemUpLCB0aGlzLm1hcmdpbi50b3AgKyAzICogKHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0IC8gNCksICdzdGFydCcsIHRyaW1tZWRUaXRsZSk7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBoZWxwZXJfMi50ZXh0RWxlbWVudChvcHRpb25zLCB0aGlzLnRpdGxlU3R5bGUsIHRoaXMudGl0bGVTdHlsZS5jb2xvciwgdGhpcy5zdmdPYmplY3QpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy5kZXNjcmlwdGlvbiB8fCB0aGlzLnRpdGxlKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCB0aGlzLnRhYkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUucmVuZGVyQm9yZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5ib3JkZXIud2lkdGg7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBoZWxwZXJfMi5SZWN0T3B0aW9uKHRoaXMuZWxlbWVudC5pZCArICdfQ2hhcnRCb3JkZXInLCB0aGlzLmJhY2tncm91bmQsIHRoaXMuYm9yZGVyLCAxLCBuZXcgaGVscGVyXzMuUmVjdCh3aWR0aCAvIDIsIHdpZHRoIC8gMiwgdGhpcy5hdmFpbGFibGVTaXplLndpZHRoIC0gd2lkdGgsIHRoaXMuYXZhaWxhYmxlU2l6ZS5oZWlnaHQgLSB3aWR0aCkpO1xuICAgICAgICAgICAgdGhpcy5odG1sT2JqZWN0ID0gdGhpcy5yZW5kZXJlci5kcmF3UmVjdGFuZ2xlKHJlY3QpO1xuICAgICAgICAgICAgdGhpcy5zdmdPYmplY3QuYXBwZW5kQ2hpbGQodGhpcy5odG1sT2JqZWN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnJlbmRlckFyZWFCb3JkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gbmV3IGhlbHBlcl8yLlJlY3RPcHRpb24odGhpcy5lbGVtZW50LmlkICsgJ19DaGFydEFyZWFCb3JkZXInLCB0aGlzLmNoYXJ0QXJlYS5iYWNrZ3JvdW5kLCB0aGlzLmNoYXJ0QXJlYS5ib3JkZXIsIHRoaXMuY2hhcnRBcmVhLm9wYWNpdHksIHRoaXMuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuaHRtbE9iamVjdCA9IHRoaXMucmVuZGVyZXIuZHJhd1JlY3RhbmdsZShyZWN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iamVjdC5hcHBlbmRDaGlsZCh0aGlzLmh0bWxPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuYWRkU2VyaWVzID0gZnVuY3Rpb24gKHNlcmllc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc2VyaWVzQ29sbGVjdGlvbl8xID0gc2VyaWVzQ29sbGVjdGlvbjsgX2kgPCBzZXJpZXNDb2xsZWN0aW9uXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IHNlcmllc0NvbGxlY3Rpb25fMVtfaV07XG4gICAgICAgICAgICAgICAgc2VyaWVzID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyh0aGlzLCAnc2VyaWVzJywgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmllcy5wdXNoKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1jaGFydCcpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnY2hhcnQnO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5RW50aXR5ID0gWydsb2FkZWQnLCAnYW5pbWF0aW9uQ29tcGxldGUnXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZE9uUGVyc2lzdChrZXlFbnRpdHkpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuY3JlYXRlQ2hhcnRTdmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgaGVscGVyXzIuY3JlYXRlU3ZnKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUudW5XaXJlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0RXZlbnQgPSBlajJfYmFzZV81LkJyb3dzZXIudG91Y2hTdGFydEV2ZW50O1xuICAgICAgICAgICAgdmFyIG1vdmVFdmVudCA9IGVqMl9iYXNlXzUuQnJvd3Nlci50b3VjaE1vdmVFdmVudDtcbiAgICAgICAgICAgIHZhciBzdG9wRXZlbnQgPSBlajJfYmFzZV81LkJyb3dzZXIudG91Y2hFbmRFdmVudDtcbiAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IGVqMl9iYXNlXzUuQnJvd3Nlci5pc1BvaW50ZXIgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIHN0YXJ0RXZlbnQsIHRoaXMuY2hhcnRPbk1vdXNlRG93bik7XG4gICAgICAgICAgICBlajJfYmFzZV82LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBtb3ZlRXZlbnQsIHRoaXMubW91c2VNb3ZlKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIHN0b3BFdmVudCwgdGhpcy5tb3VzZUVuZCk7XG4gICAgICAgICAgICBlajJfYmFzZV82LkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLmNoYXJ0T25Nb3VzZUNsaWNrKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjb250ZXh0bWVudScsIHRoaXMuY2hhcnRSaWdodENsaWNrKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsIGNhbmNlbEV2ZW50LCB0aGlzLm1vdXNlTGVhdmUpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoKGVqMl9iYXNlXzUuQnJvd3Nlci5pc1RvdWNoICYmICgnb3JpZW50YXRpb24nIGluIHdpbmRvdyAmJiAnb25vcmllbnRhdGlvbmNoYW5nZScgaW4gd2luZG93KSkgPyAnb3JpZW50YXRpb25jaGFuZ2UnIDogJ3Jlc2l6ZScsIHRoaXMuY2hhcnRSZXNpemUpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IGVqMl9iYXNlXzUuQnJvd3Nlci5pc1BvaW50ZXIgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsIGVqMl9iYXNlXzUuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMuY2hhcnRPbk1vdXNlRG93biwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV82LkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBlajJfYmFzZV81LkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMubW91c2VNb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsIGVqMl9iYXNlXzUuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlRW5kLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzYuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuY2hhcnRPbk1vdXNlQ2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgJ2NvbnRleHRtZW51JywgdGhpcy5jaGFydFJpZ2h0Q2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfNi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgY2FuY2VsRXZlbnQsIHRoaXMubW91c2VMZWF2ZSwgdGhpcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigoZWoyX2Jhc2VfNS5Ccm93c2VyLmlzVG91Y2ggJiYgKCdvcmllbnRhdGlvbicgaW4gd2luZG93ICYmICdvbm9yaWVudGF0aW9uY2hhbmdlJyBpbiB3aW5kb3cpKSA/ICdvcmllbnRhdGlvbmNoYW5nZScgOiAncmVzaXplJywgdGhpcy5jaGFydFJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMubG9uZ1ByZXNzID0gdGhpcy5sb25nUHJlc3MuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV81LlRvdWNoKHRoaXMuZWxlbWVudCwgeyB0YXBIb2xkOiB0aGlzLmxvbmdQcmVzcywgdGFwSG9sZFRocmVzaG9sZDogNTAwIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuY2hhcnRSaWdodENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jcm9zc2hhaXIuZW5hYmxlICYmIHRoaXMuY3Jvc3NoYWlyTW9kdWxlICYmXG4gICAgICAgICAgICAgICAgKGV2ZW50LmJ1dHRvbnMgPT09IDIgfHwgZXZlbnQud2hpY2ggPT09IDAgfHwgZXZlbnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB6b29taW5nID0gdGhpcy56b29tU2V0dGluZ3M7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZVNjcm9sbCA9IHpvb21pbmcuZW5hYmxlU2VsZWN0aW9uWm9vbWluZyB8fCB6b29taW5nLmVuYWJsZU1vdXNlV2hlZWxab29taW5nIHx8IHpvb21pbmcuZW5hYmxlUGluY2hab29taW5nIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlICE9PSAnTm9uZScgfHwgdGhpcy5jcm9zc2hhaXIuZW5hYmxlO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3VjaEFjdGlvbiA9IGRpc2FibGVTY3JvbGwgPyAnbm9uZScgOiAnZWxlbWVudCc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1zVG91Y2hBY3Rpb24gPSBkaXNhYmxlU2Nyb2xsID8gJ25vbmUnIDogJ2VsZW1lbnQnO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tc0NvbnRlbnRab29taW5nID0gJ25vbmUnO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tc1VzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5pc09yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICgnb3JpZW50YXRpb24nIGluIHdpbmRvdyAmJiAnb25vcmllbnRhdGlvbmNoYW5nZScgaW4gd2luZG93KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmxvbmdQcmVzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlWCA9IChlICYmIGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcykgPyAoZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgpIDogMDtcbiAgICAgICAgICAgIHRoaXMubW91c2VZID0gKGUgJiYgZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzKSA/IChlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSkgOiAwO1xuICAgICAgICAgICAgdGhpcy5zdGFydE1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZXRNb3VzZVhZKHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeSgndGFwSG9sZCcsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuc2V0TW91c2VYWSA9IGZ1bmN0aW9uIChwYWdlWCwgcGFnZVkpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHN2Z1JlY3QgPSBoZWxwZXJfNC5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfc3ZnJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB0aGlzLm1vdXNlWCA9IChwYWdlWCAtIHJlY3QubGVmdCkgLSBNYXRoLm1heChzdmdSZWN0LmxlZnQgLSByZWN0LmxlZnQsIDApO1xuICAgICAgICAgICAgdGhpcy5tb3VzZVkgPSAocGFnZVkgLSByZWN0LnRvcCkgLSBNYXRoLm1heChzdmdSZWN0LnRvcCAtIHJlY3QudG9wLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNoYXJ0UmVzaXplID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVTZXJpZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZVRvKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNpemVUbyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMucmVzaXplVG8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWF0ZUNoYXJ0U3ZnKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucmVmcmVzaEF4aXMoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWZyZXNoQm91bmQoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdsb2FkZWQnLCB7IGNoYXJ0OiBfdGhpcyB9KTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5tb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHBhZ2VYO1xuICAgICAgICAgICAgdmFyIHBhZ2VZO1xuICAgICAgICAgICAgdmFyIHRvdWNoQXJnO1xuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRvdWNoQXJnID0gZTtcbiAgICAgICAgICAgICAgICBwYWdlWCA9IHRvdWNoQXJnLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSB0b3VjaEFyZy5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyB8fCBlLnBvaW50ZXJUeXBlID09PSAnMicgfHwgdGhpcy5pc1RvdWNoO1xuICAgICAgICAgICAgICAgIHBhZ2VYID0gZS5jbGllbnRYO1xuICAgICAgICAgICAgICAgIHBhZ2VZID0gZS5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRNb3VzZVhZKHBhZ2VYLCBwYWdlWSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0T25Nb3VzZU1vdmUoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5tb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlWDtcbiAgICAgICAgICAgIHZhciBwYWdlWTtcbiAgICAgICAgICAgIHZhciB0b3VjaEFyZztcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICd0b3VjaGxlYXZlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdG91Y2hBcmcgPSBlO1xuICAgICAgICAgICAgICAgIHBhZ2VYID0gdG91Y2hBcmcuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgICAgICBwYWdlWSA9IHRvdWNoQXJnLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG91Y2ggPSBlLnBvaW50ZXJUeXBlID09PSAndG91Y2gnIHx8IGUucG9pbnRlclR5cGUgPT09ICcyJztcbiAgICAgICAgICAgICAgICBwYWdlWCA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgICAgICBwYWdlWSA9IGUuY2xpZW50WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0TW91c2VYWShwYWdlWCwgcGFnZVkpO1xuICAgICAgICAgICAgdGhpcy5jaGFydE9uTW91c2VMZWF2ZShlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNoYXJ0T25Nb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgY2FuY2VsRXZlbnQgPSBlajJfYmFzZV81LkJyb3dzZXIuaXNQb2ludGVyID8gJ3BvaW50ZXJsZWF2ZScgOiAnbW91c2VsZWF2ZSc7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoY29uc3RhbnRzXzEuY2hhcnRNb3VzZUxlYXZlLCB7IHRhcmdldDogZWxlbWVudC5pZCwgeDogdGhpcy5tb3VzZVgsIHk6IHRoaXMubW91c2VZIH0pO1xuICAgICAgICAgICAgdGhpcy5pc0NoYXJ0RHJhZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoY2FuY2VsRXZlbnQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuY2hhcnRPbk1vdXNlQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihjb25zdGFudHNfMS5jaGFydE1vdXNlQ2xpY2ssIHsgdGFyZ2V0OiBlbGVtZW50LmlkLCB4OiB0aGlzLm1vdXNlWCwgeTogdGhpcy5tb3VzZVkgfSk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeSgnY2xpY2snLCBlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmNoYXJ0T25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihjb25zdGFudHNfMS5jaGFydE1vdXNlTW92ZSwgeyB0YXJnZXQ6IGVsZW1lbnQuaWQsIHg6IHRoaXMubW91c2VYLCB5OiB0aGlzLm1vdXNlWSB9KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZVRvb2x0aXAoZSwgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF4aXNUb29sdGlwKGUsIHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShlajJfYmFzZV81LkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIGUpO1xuICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS50aXRsZVRvb2x0aXAgPSBmdW5jdGlvbiAoZXZlbnQsIHgsIHksIGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICAgICAgICAgIGlmICgodGFyZ2V0SWQgPT09ICh0aGlzLmVsZW1lbnQuaWQgKyAnX0NoYXJ0VGl0bGUnKSkgJiYgKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudC5pbmRleE9mKCcuLi4nKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnNob3dUb29sdGlwKHRoaXMudGl0bGUsIHgsIHksIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCwgdGhpcy5lbGVtZW50LmlkICsgJ19FSjJfVGl0bGVfVG9vbHRpcCcsIGhlbHBlcl80LmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpLCBpc1RvdWNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19FSjJfVGl0bGVfVG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuYXhpc1Rvb2x0aXAgPSBmdW5jdGlvbiAoZXZlbnQsIHgsIHksIGlzVG91Y2gpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICAgICAgICAgIGlmICgodGFyZ2V0SWQuaW5kZXhPZignQXhpc0xhYmVsJykgPiAtMSkgJiYgKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudC5pbmRleE9mKCcuLi4nKSA+IC0xKSkge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnNob3dUb29sdGlwKHRoaXMuZmluZEF4aXNMYWJlbCh0YXJnZXRJZCksIHgsIHksIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCwgdGhpcy5lbGVtZW50LmlkICsgJ19FSjJfQXhpc0xhYmVsX1Rvb2x0aXAnLCBoZWxwZXJfNC5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKSwgaXNUb3VjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfRUoyX0F4aXNMYWJlbF9Ub29sdGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5maW5kQXhpc0xhYmVsID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0cyA9ICgodGV4dC5yZXBsYWNlKHRoaXMuZWxlbWVudC5pZCwgJycpKS5yZXBsYWNlKCdBeGlzTGFiZWxfJywgJycpKS5zcGxpdCgnXycpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXhpc0NvbGxlY3Rpb25zW3BhcnNlSW50KHRleHRzWzBdLCAxMCldLnZpc2libGVMYWJlbHNbcGFyc2VJbnQodGV4dHNbMV0sIDEwKV0ub3JpZ2luYWxUZXh0O1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuY2hhcnRPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVg7XG4gICAgICAgICAgICB2YXIgcGFnZVk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHRvdWNoQXJnO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGVqMl9iYXNlXzUuQnJvd3Nlci5pc0RldmljZSA/IDIwIDogMzA7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoY29uc3RhbnRzXzEuY2hhcnRNb3VzZURvd24sIHsgdGFyZ2V0OiBlbGVtZW50LmlkLCB4OiB0aGlzLm1vdXNlWCwgeTogdGhpcy5tb3VzZVkgfSk7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG91Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRvdWNoQXJnID0gZTtcbiAgICAgICAgICAgICAgICBwYWdlWCA9IHRvdWNoQXJnLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSB0b3VjaEFyZy5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRvdWNoQXJnLnRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUb3VjaCA9IGUucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG4gICAgICAgICAgICAgICAgcGFnZVggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3ZnUmVjdCA9IGhlbHBlcl80LmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19zdmcnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duWCA9IHRoaXMucHJldmlvdXNNb3VzZU1vdmVYID0gKHBhZ2VYIC0gcmVjdC5sZWZ0KSAtIE1hdGgubWF4KHN2Z1JlY3QubGVmdCAtIHJlY3QubGVmdCwgMCk7XG4gICAgICAgICAgICB0aGlzLm1vdXNlRG93blkgPSB0aGlzLnByZXZpb3VzTW91c2VNb3ZlWSA9IChwYWdlWSAtIHJlY3QudG9wKSAtIE1hdGgubWF4KHN2Z1JlY3QudG9wIC0gcmVjdC50b3AsIDApO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEb3VibGVUYXAgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgPCB0aGlzLnRocmVzaG9sZCAmJiB0YXJnZXQuaWQuaW5kZXhPZih0aGlzLmVsZW1lbnQuaWQgKyAnX1pvb21pbmdfJykgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLm1vdXNlRG93blggLSBvZmZzZXQgPj0gdGhpcy5tb3VzZVggfHwgdGhpcy5tb3VzZURvd25YICsgb2Zmc2V0ID49IHRoaXMubW91c2VYKSAmJlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5tb3VzZURvd25ZIC0gb2Zmc2V0ID49IHRoaXMubW91c2VZIHx8IHRoaXMubW91c2VEb3duWSArIG9mZnNldCA+PSB0aGlzLm1vdXNlWSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMubW91c2VYIC0gb2Zmc2V0ID49IHRoaXMubW91c2VEb3duWCB8fCB0aGlzLm1vdXNlWCArIG9mZnNldCA+PSB0aGlzLm1vdXNlRG93blgpICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLm1vdXNlWSAtIG9mZnNldCA+PSB0aGlzLm1vdXNlRG93blkgfHwgdGhpcy5tb3VzZVkgKyBvZmZzZXQgPj0gdGhpcy5tb3VzZURvd25ZKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGlmeShlajJfYmFzZV81LkJyb3dzZXIudG91Y2hTdGFydEV2ZW50LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLm1vdXNlRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYWdlWTtcbiAgICAgICAgICAgIHZhciBwYWdlWDtcbiAgICAgICAgICAgIHZhciB0b3VjaEFyZztcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICd0b3VjaGVuZCcpIHtcbiAgICAgICAgICAgICAgICB0b3VjaEFyZyA9IGU7XG4gICAgICAgICAgICAgICAgcGFnZVggPSB0b3VjaEFyZy5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSB0b3VjaEFyZy5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgcGFnZVggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyB8fCBlLnBvaW50ZXJUeXBlID09PSAnMic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldE1vdXNlWFkocGFnZVgsIHBhZ2VZKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnRPbk1vdXNlVXAoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5jaGFydE9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGNvbnN0YW50c18xLmNoYXJ0TW91c2VVcCwgeyB0YXJnZXQ6IGVsZW1lbnQuaWQsIHg6IHRoaXMubW91c2VYLCB5OiB0aGlzLm1vdXNlWSB9KTtcbiAgICAgICAgICAgIHRoaXMuaXNDaGFydERyYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVG91Y2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlVG9vbHRpcChlLCB0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVksIHRoaXMuaXNUb3VjaCk7XG4gICAgICAgICAgICAgICAgdGhpcy5heGlzVG9vbHRpcChlLCB0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVksIHRoaXMuaXNUb3VjaCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlc2hvbGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDMwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VyaWVzRWxlbWVudHMucmVtb3ZlQXR0cmlidXRlKCdjbGlwLXBhdGgnKTtcbiAgICAgICAgICAgIHRoaXMubm90aWZ5KGVqMl9iYXNlXzUuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnNldEN1bHR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmludGwgPSBuZXcgZWoyX2Jhc2VfMS5JbnRlcm5hdGlvbmFsaXphdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbGVDb25zdGFudHMoKTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxlT2JqZWN0ID0gbmV3IGVqMl9iYXNlXzEuTDEwbih0aGlzLmdldE1vZHVsZU5hbWUoKSwgdGhpcy5kZWZhdWx0TG9jYWxDb25zdGFudHMsIHRoaXMubG9jYWxlKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLnNldExvY2FsZUNvbnN0YW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdExvY2FsQ29uc3RhbnRzID0ge1xuICAgICAgICAgICAgICAgIFpvb21JbjogJ1pvb21JbicsXG4gICAgICAgICAgICAgICAgWm9vbTogJ1pvb20nLFxuICAgICAgICAgICAgICAgIFpvb21PdXQ6ICdab29tT3V0JyxcbiAgICAgICAgICAgICAgICBQYW46ICdQYW4nLFxuICAgICAgICAgICAgICAgIFJlc2V0OiAnUmVzZXQnLFxuICAgICAgICAgICAgICAgIFJlc2V0Wm9vbTogJ1Jlc2V0IFpvb20nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuc2V0VGhlbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5yZXF1aXJlZE1vZHVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLnNlcmllcztcbiAgICAgICAgICAgIHZhciBlbmFibGVBbm5vdGF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbW9kdWxlTmFtZTtcbiAgICAgICAgICAgIHZhciBlcnJvckJhclZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBkYXRhTGFiZWxFbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciB6b29taW5nID0gdGhpcy56b29tU2V0dGluZ3M7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0QXJlYVR5cGUgPSAoc2VyaWVzLmxlbmd0aCA+IDAgJiYgKHNlcmllc1swXS50eXBlID09PSAnUG9sYXInIHx8IHNlcmllc1swXS50eXBlID09PSAnUmFkYXInKSkgPyAnUG9sYXJSYWRhcicgOiAnQ2FydGVzaWFuJztcbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXAuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnVG9vbHRpcCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0xlZ2VuZCA9IChfdGhpcy5sZWdlbmRTZXR0aW5ncy52aXNpYmxlICYmICgodmFsdWUubmFtZSAhPT0gJycpIHx8ICEhX3RoaXMuaXNMZWdlbmQpKTtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lID0gdmFsdWUudHlwZS5pbmRleE9mKCcxMDAnKSAhPT0gLTEgPyB2YWx1ZS50eXBlLnJlcGxhY2UoJzEwMCcsICcnKSArICdTZXJpZXMnIDogdmFsdWUudHlwZSArICdTZXJpZXMnO1xuICAgICAgICAgICAgICAgIGVycm9yQmFyVmlzaWJsZSA9IHZhbHVlLmVycm9yQmFyLnZpc2libGUgfHwgZXJyb3JCYXJWaXNpYmxlO1xuICAgICAgICAgICAgICAgIGRhdGFMYWJlbEVuYWJsZSA9IHZhbHVlLm1hcmtlci5kYXRhTGFiZWwudmlzaWJsZSB8fCBkYXRhTGFiZWxFbmFibGU7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiBtb2R1bGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbX3RoaXMsIHNlcmllc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXI6IHZhbHVlLmRyYXdUeXBlICsgJ1NlcmllcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBbX3RoaXMsIHNlcmllc11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZpbmRJbmRpY2F0b3JNb2R1bGVzKG1vZHVsZXMpO1xuICAgICAgICAgICAgdGhpcy5maW5kVHJlbmRMaW5lTW9kdWxlcyhtb2R1bGVzKTtcbiAgICAgICAgICAgIG1vZHVsZXMgPSB0aGlzLmZpbmRBeGlzTW9kdWxlKG1vZHVsZXMpO1xuICAgICAgICAgICAgZW5hYmxlQW5ub3RhdGlvbiA9IHRoaXMuYW5ub3RhdGlvbnMuc29tZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlLmNvbnRlbnQgIT09IG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZXJyb3JCYXJWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnRXJyb3JCYXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgc2VyaWVzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMZWdlbmQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdMZWdlbmQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0QXJlYVR5cGUgIT09ICdQb2xhclJhZGFyJyAmJiAoem9vbWluZy5lbmFibGVTZWxlY3Rpb25ab29taW5nXG4gICAgICAgICAgICAgICAgfHwgem9vbWluZy5lbmFibGVNb3VzZVdoZWVsWm9vbWluZyB8fCB6b29taW5nLmVuYWJsZVBpbmNoWm9vbWluZykpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdab29tJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXMsIHRoaXMuem9vbVNldHRpbmdzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnRBcmVhVHlwZSAhPT0gJ1BvbGFyUmFkYXInIHx8ICh0aGlzLmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyAmJlxuICAgICAgICAgICAgICAgICghKHRoaXMuc2VsZWN0aW9uTW9kZS5pbmRleE9mKCdEcmFnWCcpID4gLTEgfHwgdGhpcy5zZWxlY3Rpb25Nb2RlLmluZGV4T2YoJ0RyYWdYWScpID4gLTEgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlLmluZGV4T2YoJ0RyYWdZJykgPiAtMSkpKSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ1NlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGFMYWJlbEVuYWJsZSkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ0RhdGFMYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCBzZXJpZXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5hYmxlQW5ub3RhdGlvbikge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ0Fubm90YXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpcywgdGhpcy5hbm5vdGF0aW9uc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0QXJlYVR5cGUgIT09ICdQb2xhclJhZGFyJyAmJiB0aGlzLmNyb3NzaGFpci5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdDcm9zc2hhaXInLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZmluZEF4aXNNb2R1bGUgPSBmdW5jdGlvbiAobW9kdWxlcykge1xuICAgICAgICAgICAgdmFyIGF4aXNDb2xsZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgYXhpc0NvbGxlY3Rpb25zLnB1c2godGhpcy5wcmltYXJ5WEF4aXMpO1xuICAgICAgICAgICAgYXhpc0NvbGxlY3Rpb25zLnB1c2godGhpcy5wcmltYXJ5WUF4aXMpO1xuICAgICAgICAgICAgYXhpc0NvbGxlY3Rpb25zID0gYXhpc0NvbGxlY3Rpb25zLmNvbmNhdCh0aGlzLmF4ZXMpO1xuICAgICAgICAgICAgdmFyIGRhdGV0aW1lRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNhdGVnb3J5RW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGxvZ2FyaXRobWljRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHN0cmlwbGluZUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYXhpc0NvbGxlY3Rpb25zXzEgPSBheGlzQ29sbGVjdGlvbnM7IF9pIDwgYXhpc0NvbGxlY3Rpb25zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF4aXMgPSBheGlzQ29sbGVjdGlvbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgZGF0ZXRpbWVFbmFibGVkID0gYXhpcy52YWx1ZVR5cGUgPT09ICdEYXRlVGltZScgfHwgZGF0ZXRpbWVFbmFibGVkO1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5RW5hYmxlZCA9IGF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknIHx8IGNhdGVnb3J5RW5hYmxlZDtcbiAgICAgICAgICAgICAgICBsb2dhcml0aG1pY0VuYWJsZWQgPSBheGlzLnZhbHVlVHlwZSA9PT0gJ0xvZ2FyaXRobWljJyB8fCBsb2dhcml0aG1pY0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgc3RyaXBsaW5lRW5hYmxlZCA9IHRoaXMuZmluZFN0cmlwbGluZVZpc2liaWxpdHkoYXhpcy5zdHJpcExpbmVzKSB8fCBzdHJpcGxpbmVFbmFibGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGV0aW1lRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ0RhdGVUaW1lJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnlFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnQ2F0ZWdvcnknLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsb2dhcml0aG1pY0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdMb2dhcml0aG1pYycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0cmlwbGluZUVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdTdHJpcExpbmUnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVzO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZmluZEluZGljYXRvck1vZHVsZXMgPSBmdW5jdGlvbiAobW9kdWxlcykge1xuICAgICAgICAgICAgdmFyIG1hY2RFbmFibGU7XG4gICAgICAgICAgICB2YXIgYmFuZEVuYWJsZTtcbiAgICAgICAgICAgIHZhciBpbmRpY2F0b3JzID0gdGhpcy5pbmRpY2F0b3JzO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5kaWNhdG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdMaW5lU2VyaWVzJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW5kaWNhdG9ycy5tYXAoZnVuY3Rpb24gKGluZGljYXRvcikge1xuICAgICAgICAgICAgICAgICAgICBtYWNkRW5hYmxlID0gbWFjZEVuYWJsZSB8fCBpbmRpY2F0b3IudHlwZSA9PT0gJ01hY2QnO1xuICAgICAgICAgICAgICAgICAgICBiYW5kRW5hYmxlID0gYmFuZEVuYWJsZSB8fCBpbmRpY2F0b3IudHlwZSA9PT0gJ0JvbGxpbmdlckJhbmRzJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobWFjZEVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnQ29sdW1uU2VyaWVzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJhbmRFbmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcjogJ1JhbmdlQXJlYVNlcmllcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmluZGljYXRvcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRpY2F0b3IgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXI6IGluZGljYXRvci50eXBlICsgJ0luZGljYXRvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUuZmluZFRyZW5kTGluZU1vZHVsZXMgPSBmdW5jdGlvbiAobW9kdWxlcykge1xuICAgICAgICAgICAgdmFyIGlzTGluZTtcbiAgICAgICAgICAgIHZhciBpc1NwbGluZTtcbiAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJFbmFibGU7XG4gICAgICAgICAgICAgICAgc2VyaWVzLnRyZW5kbGluZXMubWFwKGZ1bmN0aW9uICh0cmVuZGxpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyRW5hYmxlID0gbWFya2VyRW5hYmxlIHx8IHRyZW5kbGluZS5tYXJrZXIudmlzaWJsZTtcbiAgICAgICAgICAgICAgICAgICAgaXNMaW5lID0gaXNMaW5lIHx8ICh0cmVuZGxpbmUudHlwZSA9PT0gJ0xpbmVhcicgfHwgdHJlbmRsaW5lLnR5cGUgPT09ICdNb3ZpbmdBdmVyYWdlJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzU3BsaW5lID0gaXNTcGxpbmUgfHwgIWlzTGluZSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobWFya2VyRW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdNYXJrZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNfMSwgc2VyaWVzXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNMaW5lIHx8IGlzU3BsaW5lKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnVHJlbmRMaW5lJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNMaW5lKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnTGluZVNlcmllcycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU3BsaW5lKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnU3BsaW5lU2VyaWVzJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5maW5kU3RyaXBsaW5lVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIChzdHJpcGxpbmVzKSB7XG4gICAgICAgICAgICB2YXIgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzdHJpcGxpbmVzXzEgPSBzdHJpcGxpbmVzOyBfaSA8IHN0cmlwbGluZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RyaXBsaW5lID0gc3RyaXBsaW5lc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RyaXBsaW5lLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2aXNpYmxlO1xuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUucmVtb3ZlU3ZnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVtb3ZlTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnpvb21Nb2R1bGUgJiYgdGhpcy56b29tTW9kdWxlLnBpbmNoVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tTW9kdWxlLnBpbmNoVGFyZ2V0LmlkID0gJyc7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tTW9kdWxlLnBpbmNoVGFyZ2V0LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsICcwJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmplY3QuYXBwZW5kQ2hpbGQodGhpcy56b29tTW9kdWxlLnBpbmNoVGFyZ2V0KTtcbiAgICAgICAgICAgICAgICByZW1vdmVMZW5ndGggPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3ZnT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuc3ZnT2JqZWN0LmNoaWxkTm9kZXMubGVuZ3RoID4gcmVtb3ZlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqZWN0LnJlbW92ZUNoaWxkKHRoaXMuc3ZnT2JqZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3ZnT2JqZWN0Lmhhc0NoaWxkTm9kZXMoKSAmJiB0aGlzLnN2Z09iamVjdC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKHRoaXMuc3ZnT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5yZWZyZXNoRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChkZWZpbml0aW9ucykge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkZWZpbml0aW9uc18xID0gZGVmaW5pdGlvbnM7IF9pIDwgZGVmaW5pdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRlZmluaXRpb25zXzFbX2ldO1xuICAgICAgICAgICAgICAgIGl0ZW0uYXhlcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDaGFydC5wcm90b3R5cGUucmVmcmVzaEF4aXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXhpcyA9IHRoaXMucHJpbWFyeVhBeGlzO1xuICAgICAgICAgICAgYXhpcy5yZWN0ID0gbmV3IGhlbHBlcl8zLlJlY3QodW5kZWZpbmVkLCB1bmRlZmluZWQsIDAsIDApO1xuICAgICAgICAgICAgYXhpcyA9IHRoaXMucHJpbWFyeVlBeGlzO1xuICAgICAgICAgICAgYXhpcy5pc1N0YWNrMTAwID0gZmFsc2U7XG4gICAgICAgICAgICBheGlzLnJlY3QgPSBuZXcgaGVscGVyXzMuUmVjdCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgMCwgMCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5heGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGF4aXMgPSBpdGVtO1xuICAgICAgICAgICAgICAgIGF4aXMucmVjdCA9IG5ldyBoZWxwZXJfMy5SZWN0KHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAwLCAwKTtcbiAgICAgICAgICAgICAgICBheGlzLmlzU3RhY2sxMDAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2hhcnQucHJvdG90eXBlLmF4aXNDaGFuZ2UgPSBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgaWYgKCFheGlzLm5hbWUgJiYgIWF4aXMudmFsdWVUeXBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGVmaW5pdGlvbih0aGlzLmNvbHVtbnMpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGVmaW5pdGlvbih0aGlzLnJvd3MpO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWaXNpYmxlQXhpcygpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciByZWZyZXNoQm91bmRzID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV3UHJvcCkubGVuZ3RoID09PSAxICYmIE9iamVjdC5rZXlzKG5ld1Byb3ApWzBdID09PSAnaW5kaWNhdG9ycycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVTZXJpZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5kZWxheVJlZHJhdykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhuZXdQcm9wKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJpbWFyeVhBeGlzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm91bmRzID0gdGhpcy5heGlzQ2hhbmdlKG5ld1Byb3AucHJpbWFyeVhBeGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC5wcmltYXJ5WEF4aXMuZWRnZUxhYmVsUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdQcm9wLnByaW1hcnlYQXhpcy5jcm9zc2hhaXJUb29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hCb3VuZHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ByaW1hcnlZQXhpcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEJvdW5kcyA9IHRoaXMuYXhpc0NoYW5nZShuZXdQcm9wLnByaW1hcnlZQXhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3AucHJpbWFyeVlBeGlzLmVkZ2VMYWJlbFBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3UHJvcC5wcmltYXJ5WUF4aXMuY3Jvc3NoYWlyVG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWlnaHQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnd2lkdGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2hhcnRTdmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UHJvcC50aXRsZSA9PT0gJycgfHwgb2xkUHJvcC50aXRsZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaEJvdW5kcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGl0bGVTdHlsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Byb3AudGl0bGVTdHlsZSAmJiBuZXdQcm9wLnRpdGxlU3R5bGUuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdib3JkZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvb21TZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdiYWNrZ3JvdW5kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFydEFyZWEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLmNoYXJ0QXJlYS5ib3JkZXIgJiYgbmV3UHJvcC5jaGFydEFyZWEuYm9yZGVyLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hCb3VuZHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsZWdlbmRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdQcm9wLmxlZ2VuZFNldHRpbmdzLmJhY2tncm91bmQgfHwgIW5ld1Byb3AubGVnZW5kU2V0dGluZ3Mub3BhY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGFsZXR0ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVmlzaWJsZVNlcmllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGVkRGF0YUluZGV4ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0aW9uTW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kdWxlICYmIG5ld1Byb3Auc2VsZWN0aW9uTW9kZSAmJiBuZXdQcm9wLnNlbGVjdGlvbk1vZGUuaW5kZXhPZignRHJhZycpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZHVsZS5yZWRyYXdTZWxlY3Rpb24odGhpcywgb2xkUHJvcC5zZWxlY3Rpb25Nb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdpc011bHRpU2VsZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2R1bGUgJiYgIW5ld1Byb3AuaXNNdWx0aVNlbGVjdCAmJiB0aGlzLnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2R1bGUucmVkcmF3U2VsZWN0aW9uKHRoaXMsIG9sZFByb3Auc2VsZWN0aW9uTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGhlbWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVNlcmllcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsb2NhbGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q3VsdHVyZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Rvb2x0aXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcE1vZHVsZS5wcmV2aW91c1BvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcmVmcmVzaEJvdW5kcyAmJiByZW5kZXJlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignbG9hZGVkJywgeyBjaGFydDogdGhpcyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hCb3VuZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdmcoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXhpcygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hCb3VuZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2xvYWRlZCcsIHsgY2hhcnQ6IHRoaXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2hhcnQ7XG4gICAgfShlajJfYmFzZV8xLkNvbXBvbmVudCkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh0aGVtZV8xLlRoZW1lLmNoYXJ0VGl0bGVGb250LCBiYXNlXzEuRm9udClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwidGl0bGVTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbXBsZXgoe30sIGJhc2VfMS5NYXJnaW4pXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcIm1hcmdpblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbXBsZXgoeyBjb2xvcjogJyNEREREREQnLCB3aWR0aDogMCB9LCBiYXNlXzEuQm9yZGVyKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0aGVtZV8xLlRoZW1lLmNoYXJ0QmFja2dyb3VuZENvbG9yKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJiYWNrZ3JvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh7IGJvcmRlcjogeyBjb2xvcjogJ0dyYXknLCB3aWR0aDogMC41IH0sIGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcgfSwgYmFzZV8xLkNoYXJ0QXJlYSlcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiY2hhcnRBcmVhXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh7IG5hbWU6ICdwcmltYXJ5WEF4aXMnIH0sIGF4aXNfMS5BeGlzKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJwcmltYXJ5WEF4aXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5Db21wbGV4KHsgbmFtZTogJ3ByaW1hcnlZQXhpcycgfSwgYXhpc18xLkF4aXMpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInByaW1hcnlZQXhpc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbGxlY3Rpb24oW3t9XSwgYXhpc18xLlJvdylcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwicm93c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbGxlY3Rpb24oW3t9XSwgYXhpc18xLkNvbHVtbilcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiY29sdW1uc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbGxlY3Rpb24oW3t9XSwgYXhpc18xLkF4aXMpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImF4ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5Db2xsZWN0aW9uKFt7fV0sIGNoYXJ0X3Nlcmllc18xLlNlcmllcylcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwic2VyaWVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29sbGVjdGlvbihbe31dLCBjaGFydF9iYXNlXzEuQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImFubm90YXRpb25zXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoW10pXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInBhbGV0dGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ01hdGVyaWFsJylcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwidGhlbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5Db21wbGV4KHt9LCBUb29sdGlwU2V0dGluZ3MpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInRvb2x0aXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5Db21wbGV4KHt9LCBDcm9zc2hhaXJTZXR0aW5ncylcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiY3Jvc3NoYWlyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh7fSwgbGVnZW5kXzEuTGVnZW5kU2V0dGluZ3MpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImxlZ2VuZFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuQ29tcGxleCh7fSwgWm9vbVNldHRpbmdzKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJ6b29tU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTm9uZScpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInNlbGVjdGlvbk1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiaXNNdWx0aVNlbGVjdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbGxlY3Rpb24oW10sIGJhc2VfMS5JbmRleGVzKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJzZWxlY3RlZERhdGFJbmRleGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInVzZUdyb3VwaW5nU2VwYXJhdG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImlzVHJhbnNwb3NlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkNvbGxlY3Rpb24oW10sIHRlY2huaWNhbF9pbmRpY2F0b3JfMS5UZWNobmljYWxJbmRpY2F0b3IpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImluZGljYXRvcnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJkZXNjcmlwdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiZW5hYmxlU2lkZUJ5U2lkZVBsYWNlbWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiYW5ub3RhdGlvblJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiYmVmb3JlUHJpbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5FdmVudCgpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImxvYWRlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwibG9hZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiYW5pbWF0aW9uQ29tcGxldGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5FdmVudCgpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImxlZ2VuZFJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwidGV4dFJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwicG9pbnRSZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5FdmVudCgpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcInNlcmllc1JlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiYXhpc0xhYmVsUmVuZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuRXZlbnQoKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJ0b29sdGlwUmVuZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuRXZlbnQoKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJjaGFydE1vdXNlTW92ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiY2hhcnRNb3VzZUNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuRXZlbnQoKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJjaGFydE1vdXNlTGVhdmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5FdmVudCgpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImNoYXJ0TW91c2VEb3duXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzYuRXZlbnQoKVxuICAgIF0sIENoYXJ0LnByb3RvdHlwZSwgXCJjaGFydE1vdXNlVXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfNi5FdmVudCgpXG4gICAgXSwgQ2hhcnQucHJvdG90eXBlLCBcImRyYWdDb21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV82LkV2ZW50KClcbiAgICBdLCBDaGFydC5wcm90b3R5cGUsIFwiem9vbUNvbXBsZXRlXCIsIHZvaWQgMCk7XG4gICAgQ2hhcnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBDaGFydCk7XG4gICAgZXhwb3J0cy5DaGFydCA9IENoYXJ0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9jaGFydC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2Jhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vdXRpbHMvZG91YmxlLXJhbmdlXCIsIFwiLi4vYXhpcy9kb3VibGUtYXhpc1wiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC90aGVtZVwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi9tb2RlbC9jaGFydC1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgYmFzZV8xLCBoZWxwZXJfMSwgZG91YmxlX3JhbmdlXzEsIGRvdWJsZV9heGlzXzEsIHRoZW1lXzEsIGNvbnN0YW50c18xLCBjaGFydF9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIGF4aXNQYWRkaW5nID0gMTA7XG4gICAgdmFyIFJvdyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhSb3csIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJvdygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYXhlcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMubmVhclNpemVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5mYXJTaXplcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFJvdy5wcm90b3R5cGUuY29tcHV0ZVNpemUgPSBmdW5jdGlvbiAoYXhpcywgY2xpcFJlY3QpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZVNpemUgPSAwO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBpbm5lclBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgaWYgKGF4aXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGlmIChheGlzLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlU2l6ZSA9IGhlbHBlcl8xLm1lYXN1cmVUZXh0KGF4aXMudGl0bGUsIGF4aXMudGl0bGVTdHlsZSkuaGVpZ2h0ICsgaW5uZXJQYWRkaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aWR0aCArPSAodGl0bGVTaXplICsgYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyBheGlzLm1heExhYmVsU2l6ZS53aWR0aCArIGlubmVyUGFkZGluZyArIGF4aXNQYWRkaW5nICtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5saW5lU3R5bGUud2lkdGggLyAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm9wcG9zZWRQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZmFyU2l6ZXMucHVzaCh3aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5lYXJTaXplcy5wdXNoKHdpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvdztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcxMDAlJylcbiAgICBdLCBSb3cucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIGJhc2VfMS5Cb3JkZXIpXG4gICAgXSwgUm93LnByb3RvdHlwZSwgXCJib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlJvdyA9IFJvdztcbiAgICB2YXIgQ29sdW1uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENvbHVtbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5heGVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5uZWFyU2l6ZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmZhclNpemVzID0gW107XG4gICAgICAgICAgICBfdGhpcy5wYWRkaW5nID0gMDtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDb2x1bW4ucHJvdG90eXBlLmNvbXB1dGVTaXplID0gZnVuY3Rpb24gKGF4aXMsIGNsaXBSZWN0KSB7XG4gICAgICAgICAgICB2YXIgdGl0bGVTaXplID0gMDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIGlubmVyUGFkZGluZyA9IDU7XG4gICAgICAgICAgICBpZiAoYXhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQoYXhpcy50aXRsZSwgYXhpcy50aXRsZVN0eWxlKS5oZWlnaHQgKyBpbm5lclBhZGRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlaWdodCArPSAodGl0bGVTaXplICsgYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyBheGlzLm1heExhYmVsU2l6ZS5oZWlnaHQgKyBpbm5lclBhZGRpbmcgKyBheGlzUGFkZGluZ1xuICAgICAgICAgICAgICAgICAgICArIGF4aXMubGluZVN0eWxlLndpZHRoIC8gMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpcy5vcHBvc2VkUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZhclNpemVzLnB1c2goaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubmVhclNpemVzLnB1c2goaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtbjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcxMDAlJylcbiAgICBdLCBDb2x1bW4ucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBDb2x1bW4ucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQ29sdW1uID0gQ29sdW1uO1xuICAgIHZhciBNYWpvckdyaWRMaW5lcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhNYWpvckdyaWRMaW5lcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTWFqb3JHcmlkTGluZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1ham9yR3JpZExpbmVzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBNYWpvckdyaWRMaW5lcy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNYWpvckdyaWRMaW5lcy5wcm90b3R5cGUsIFwiZGFzaEFycmF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodGhlbWVfMS5UaGVtZS5heGlzTWFqb3JHcmlkTGluZUNvbG9yKVxuICAgIF0sIE1ham9yR3JpZExpbmVzLnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTWFqb3JHcmlkTGluZXMgPSBNYWpvckdyaWRMaW5lcztcbiAgICB2YXIgTWlub3JHcmlkTGluZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTWlub3JHcmlkTGluZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE1pbm9yR3JpZExpbmVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNaW5vckdyaWRMaW5lcztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDAuNylcbiAgICBdLCBNaW5vckdyaWRMaW5lcy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBNaW5vckdyaWRMaW5lcy5wcm90b3R5cGUsIFwiZGFzaEFycmF5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodGhlbWVfMS5UaGVtZS5heGlzTWlub3JHcmlkTGluZUNvbG9yKVxuICAgIF0sIE1pbm9yR3JpZExpbmVzLnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTWlub3JHcmlkTGluZXMgPSBNaW5vckdyaWRMaW5lcztcbiAgICB2YXIgQXhpc0xpbmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQXhpc0xpbmUsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEF4aXNMaW5lKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBeGlzTGluZTtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgQXhpc0xpbmUucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQXhpc0xpbmUucHJvdG90eXBlLCBcImRhc2hBcnJheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRoZW1lXzEuVGhlbWUuYXhpc0xpbmVDb2xvcilcbiAgICBdLCBBeGlzTGluZS5wcm90b3R5cGUsIFwiY29sb3JcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkF4aXNMaW5lID0gQXhpc0xpbmU7XG4gICAgdmFyIE1ham9yVGlja0xpbmVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1ham9yVGlja0xpbmVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNYWpvclRpY2tMaW5lcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWFqb3JUaWNrTGluZXM7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIE1ham9yVGlja0xpbmVzLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDUpXG4gICAgXSwgTWFqb3JUaWNrTGluZXMucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRoZW1lXzEuVGhlbWUuYXhpc01ham9yVGlja0xpbmVDb2xvcilcbiAgICBdLCBNYWpvclRpY2tMaW5lcy5wcm90b3R5cGUsIFwiY29sb3JcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLk1ham9yVGlja0xpbmVzID0gTWFqb3JUaWNrTGluZXM7XG4gICAgdmFyIE1pbm9yVGlja0xpbmVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1pbm9yVGlja0xpbmVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNaW5vclRpY2tMaW5lcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWlub3JUaWNrTGluZXM7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwLjcpXG4gICAgXSwgTWlub3JUaWNrTGluZXMucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNSlcbiAgICBdLCBNaW5vclRpY2tMaW5lcy5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodGhlbWVfMS5UaGVtZS5heGlzTWlub3JUaWNrTGluZUNvbG9yKVxuICAgIF0sIE1pbm9yVGlja0xpbmVzLnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTWlub3JUaWNrTGluZXMgPSBNaW5vclRpY2tMaW5lcztcbiAgICB2YXIgQ3Jvc3NoYWlyVG9vbHRpcCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDcm9zc2hhaXJUb29sdGlwLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDcm9zc2hhaXJUb29sdGlwKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDcm9zc2hhaXJUb29sdGlwO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQ3Jvc3NoYWlyVG9vbHRpcC5wcm90b3R5cGUsIFwiZW5hYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodGhlbWVfMS5UaGVtZS5jcm9zc0hhaXJMYWJlbENvbG9yKVxuICAgIF0sIENyb3NzaGFpclRvb2x0aXAucHJvdG90eXBlLCBcImZpbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHRoZW1lXzEuVGhlbWUuY3Jvc3NoYWlyTGFiZWxGb250LCBiYXNlXzEuRm9udClcbiAgICBdLCBDcm9zc2hhaXJUb29sdGlwLnByb3RvdHlwZSwgXCJ0ZXh0U3R5bGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkNyb3NzaGFpclRvb2x0aXAgPSBDcm9zc2hhaXJUb29sdGlwO1xuICAgIHZhciBBeGlzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEF4aXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEF4aXMoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnZpc2libGVMYWJlbHMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLnNlcmllcyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMucmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAwLCAwKTtcbiAgICAgICAgICAgIF90aGlzLmF4aXNCb3R0b21MaW5lID0gbnVsbDtcbiAgICAgICAgICAgIF90aGlzLmludGVydmFsRGl2cyA9IFsxMCwgNSwgMiwgMV07XG4gICAgICAgICAgICBfdGhpcy5hbmdsZSA9IF90aGlzLmxhYmVsUm90YXRpb247XG4gICAgICAgICAgICBfdGhpcy5pc1N0YWNrMTAwID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQXhpcy5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5taW5pbXVtICE9IG51bGwgJiYgdGhpcy5tYXhpbXVtICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQXhpcy5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZVJhbmdlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3IgPCAxIHx8IHRoaXMuem9vbVBvc2l0aW9uID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBiYXNlUmFuZ2UgPSB0aGlzLmFjdHVhbFJhbmdlO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmVyc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdGhpcy5hY3R1YWxSYW5nZS5taW4gKyB0aGlzLnpvb21Qb3NpdGlvbiAqIHRoaXMuYWN0dWFsUmFuZ2UuZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgdGhpcy56b29tRmFjdG9yICogdGhpcy5hY3R1YWxSYW5nZS5kZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdGhpcy5hY3R1YWxSYW5nZS5tYXggLSAodGhpcy56b29tUG9zaXRpb24gKiB0aGlzLmFjdHVhbFJhbmdlLmRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gc3RhcnQgLSAodGhpcy56b29tRmFjdG9yICogdGhpcy5hY3R1YWxSYW5nZS5kZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGFydCA8IGJhc2VSYW5nZS5taW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gZW5kICsgKGJhc2VSYW5nZS5taW4gLSBzdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gYmFzZVJhbmdlLm1pbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA+IGJhc2VSYW5nZS5tYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBzdGFydCAtIChlbmQgLSBiYXNlUmFuZ2UubWF4KTtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gYmFzZVJhbmdlLm1heDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kb3VibGVSYW5nZSA9IG5ldyBkb3VibGVfcmFuZ2VfMS5Eb3VibGVSYW5nZShzdGFydCwgZW5kKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSYW5nZS5taW4gPSB0aGlzLmRvdWJsZVJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJhbmdlLm1heCA9IHRoaXMuZG91YmxlUmFuZ2UuZW5kO1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJhbmdlLmRlbHRhID0gdGhpcy5kb3VibGVSYW5nZS5kZWx0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQXhpcy5wcm90b3R5cGUuZ2V0QWN0dWFsRGVzaXJlZEludGVydmFsc0NvdW50ID0gZnVuY3Rpb24gKGF2YWlsYWJsZVNpemUpIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnID8gYXZhaWxhYmxlU2l6ZS53aWR0aCA6IGF2YWlsYWJsZVNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVzaXJlZEludGVydmFscyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBkZXNpcmVkSW50ZXJ2YWxzQ291bnQgPSAodGhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnID8gMC41MzMgOiAxKSAqIHRoaXMubWF4aW11bUxhYmVscztcbiAgICAgICAgICAgICAgICBkZXNpcmVkSW50ZXJ2YWxzQ291bnQgPSBNYXRoLm1heCgoc2l6ZSAqIChkZXNpcmVkSW50ZXJ2YWxzQ291bnQgLyAxMDApKSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2lyZWRJbnRlcnZhbHNDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlc2lyZWRJbnRlcnZhbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEF4aXMucHJvdG90eXBlLnRyaWdnZXJMYWJlbFJlbmRlciA9IGZ1bmN0aW9uIChjaGFydCwgdGVtcEludGVydmFsLCB0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS5heGlzTGFiZWxSZW5kZXIsIGF4aXM6IHRoaXMsXG4gICAgICAgICAgICAgICAgdGV4dDogdGV4dCwgdmFsdWU6IHRlbXBJbnRlcnZhbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNoYXJ0LnRyaWdnZXIoY29uc3RhbnRzXzEuYXhpc0xhYmVsUmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZUxhYmVscy5wdXNoKG5ldyBWaXNpYmxlTGFiZWxzKGFyZ3NEYXRhLnRleHQsIGFyZ3NEYXRhLnZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEF4aXMucHJvdG90eXBlLmdldFJhbmdlUGFkZGluZyA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnJhbmdlUGFkZGluZztcbiAgICAgICAgICAgIGlmIChwYWRkaW5nICE9PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5vcmllbnRhdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9ICh0aGlzLmlzU3RhY2sxMDAgPyAnUm91bmQnIDogJ05vcm1hbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9ICdOb25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdWZXJ0aWNhbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9ICh0aGlzLmlzU3RhY2sxMDAgPyAnUm91bmQnIDogJ05vcm1hbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9ICdOb25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYWRkaW5nO1xuICAgICAgICB9O1xuICAgICAgICBBeGlzLnByb3RvdHlwZS5nZXRNYXhMYWJlbFdpZHRoID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgcHJldlNpemUgPSBuZXcgaGVscGVyXzEuU2l6ZSgwLCAwKTtcbiAgICAgICAgICAgIHZhciByb3RhdGVkTGFiZWw7XG4gICAgICAgICAgICB2YXIgcG9pbnRYO1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzRW5kID0gMDtcbiAgICAgICAgICAgIHZhciBpc0ludGVyc2VjdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5hbmdsZSA9IHRoaXMubGFiZWxSb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMubWF4TGFiZWxTaXplID0gbmV3IGhlbHBlcl8xLlNpemUoMCwgMCk7XG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gdGhpcy5sYWJlbEludGVyc2VjdEFjdGlvbjtcbiAgICAgICAgICAgIHZhciBsYWJlbDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLnZpc2libGVMYWJlbHNbaV07XG4gICAgICAgICAgICAgICAgbGFiZWwuc2l6ZSA9IGhlbHBlcl8xLm1lYXN1cmVUZXh0KGxhYmVsLnRleHQsIHRoaXMubGFiZWxTdHlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsLnNpemUud2lkdGggPiB0aGlzLm1heExhYmVsU2l6ZS53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1heExhYmVsU2l6ZS53aWR0aCA9IGxhYmVsLnNpemUud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlZExhYmVsID0gbGFiZWwudGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsLnNpemUuaGVpZ2h0ID4gdGhpcy5tYXhMYWJlbFNpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF4TGFiZWxTaXplLmhlaWdodCA9IGxhYmVsLnNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uID09PSAnTm9uZScgfHwgYWN0aW9uID09PSAnSGlkZScgfHwgYWN0aW9uID09PSAnVHJpbScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICUgMzYwID09PSAwICYmIHRoaXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJyAmJiB0aGlzLnJlY3Qud2lkdGggPiAwICYmICFpc0ludGVyc2VjdCkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludFggPSAoaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KGxhYmVsLnZhbHVlLCB0aGlzKSAqIHRoaXMucmVjdC53aWR0aCkgKyB0aGlzLnJlY3QueDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRYIC09IGxhYmVsLnNpemUud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lZGdlTGFiZWxQbGFjZW1lbnQgPT09ICdTaGlmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwICYmIHBvaW50WCA8IHRoaXMucmVjdC54KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRYID0gdGhpcy5yZWN0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gdGhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aCAtIDEgJiYgKChwb2ludFggKyBsYWJlbC5zaXplLndpZHRoKSA+ICh0aGlzLnJlY3QueCArIHRoaXMucmVjdC53aWR0aCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRYID0gdGhpcy5yZWN0LnggKyB0aGlzLnJlY3Qud2lkdGggLSBsYWJlbC5zaXplLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNdWx0aXBsZVJvd3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRNdWx0aVJvd3MoaSwgcG9pbnRYLCBsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUm90YXRlNDUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUm90YXRlOTAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiAoIXRoaXMuaXNJbnZlcnNlZCA/IHBvaW50WCA8PSBwcmV2aW91c0VuZCA6IHBvaW50WCArIGxhYmVsLnNpemUud2lkdGggPj0gcHJldmlvdXNFbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSAoYWN0aW9uID09PSAnUm90YXRlNDUnKSA/IDQ1IDogOTA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW50ZXJzZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZFdyYXAoaSwgcG9pbnRYLCBsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbmQgPSB0aGlzLmlzSW52ZXJzZWQgPyBwb2ludFggOiBwb2ludFggKyBsYWJlbC5zaXplLndpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuZ2xlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhMYWJlbFNpemUgPSBoZWxwZXJfMS5yb3RhdGVUZXh0U2l6ZSh0aGlzLmxhYmVsU3R5bGUsIHRoaXMucm90YXRlZExhYmVsLCB0aGlzLmFuZ2xlLCBjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEF4aXMucHJvdG90eXBlLmZpbmRXcmFwID0gZnVuY3Rpb24gKHdpZHRoLCBjdXJyZW50WCwgY3VycmVudExhYmVsKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWxMZW5ndGggPSB0aGlzLnJlY3Qud2lkdGggLyB0aGlzLnZpc2libGVMYWJlbHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHRleHRDb2xsZWN0aW9uID0gY3VycmVudExhYmVsLnRleHQuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9ICcnO1xuICAgICAgICAgICAgdmFyIGxhYmVsQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHRleHQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGV4dENvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dENvbGxlY3Rpb25baV07XG4gICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLm1lYXN1cmVUZXh0KGxhYmVsLmNvbmNhdCh0ZXh0KSwgdGhpcy5sYWJlbFN0eWxlKS53aWR0aCA8IGludGVydmFsTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsID0gbGFiZWwuY29uY2F0KChsYWJlbCA9PT0gJycgPyAnJyA6ICcgJykgKyB0ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsQ29sbGVjdGlvbi5wdXNoKGhlbHBlcl8xLnRleHRUcmltKGludGVydmFsTGVuZ3RoLCBsYWJlbCwgdGhpcy5sYWJlbFN0eWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbENvbGxlY3Rpb24ucHVzaChoZWxwZXJfMS50ZXh0VHJpbShpbnRlcnZhbExlbmd0aCwgdGV4dCwgdGhpcy5sYWJlbFN0eWxlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsICYmIGkgPT09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxDb2xsZWN0aW9uLnB1c2goaGVscGVyXzEudGV4dFRyaW0oaW50ZXJ2YWxMZW5ndGgsIGxhYmVsLCB0aGlzLmxhYmVsU3R5bGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50TGFiZWwudGV4dCA9IGxhYmVsQ29sbGVjdGlvbjtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoY3VycmVudExhYmVsLnNpemUuaGVpZ2h0ICogbGFiZWxDb2xsZWN0aW9uLmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0ID4gdGhpcy5tYXhMYWJlbFNpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhMYWJlbFNpemUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBeGlzLnByb3RvdHlwZS5maW5kTXVsdGlSb3dzID0gZnVuY3Rpb24gKGxlbmd0aCwgY3VycmVudFgsIGN1cnJlbnRMYWJlbCkge1xuICAgICAgICAgICAgdmFyIGxhYmVsO1xuICAgICAgICAgICAgdmFyIHBvaW50WDtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGlzTXVsdGlSb3dzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSB0aGlzLnZpc2libGVMYWJlbHNbaV07XG4gICAgICAgICAgICAgICAgcG9pbnRYID0gKGhlbHBlcl8xLnZhbHVlVG9Db2VmZmljaWVudChsYWJlbC52YWx1ZSwgdGhpcykgKiB0aGlzLnJlY3Qud2lkdGgpICsgdGhpcy5yZWN0Lng7XG4gICAgICAgICAgICAgICAgaXNNdWx0aVJvd3MgPSAhdGhpcy5pc0ludmVyc2VkID8gY3VycmVudFggPCAocG9pbnRYICsgbGFiZWwuc2l6ZS53aWR0aCAvIDIpIDpcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFggKyBjdXJyZW50TGFiZWwuc2l6ZS53aWR0aCA+IChwb2ludFggLSBsYWJlbC5zaXplLndpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgaWYgKGlzTXVsdGlSb3dzKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlLnB1c2gobGFiZWwuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGFiZWwuaW5kZXggPSAoY3VycmVudExhYmVsLmluZGV4ID4gbGFiZWwuaW5kZXgpID8gY3VycmVudExhYmVsLmluZGV4IDogbGFiZWwuaW5kZXggKyAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExhYmVsLmluZGV4ID0gc3RvcmUuaW5kZXhPZihsYWJlbC5pbmRleCkgPiAtMSA/IGN1cnJlbnRMYWJlbC5pbmRleCA6IGxhYmVsLmluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoY3VycmVudExhYmVsLnNpemUuaGVpZ2h0ICogY3VycmVudExhYmVsLmluZGV4KSArICg1ICogKGN1cnJlbnRMYWJlbC5pbmRleCAtIDEpKTtcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPiB0aGlzLm1heExhYmVsU2l6ZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1heExhYmVsU2l6ZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEF4aXMucHJvdG90eXBlLmdldE1vZHVsZSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVUeXBlID09PSAnRG91YmxlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFzZU1vZHVsZSA9IG5ldyBkb3VibGVfYXhpc18xLkRvdWJsZShjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VNb2R1bGUgPSBjaGFydFtoZWxwZXJfMS5maXJzdFRvTG93ZXJDYXNlKHRoaXMudmFsdWVUeXBlKSArICdNb2R1bGUnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEF4aXM7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHRoZW1lXzEuVGhlbWUuYXhpc0xhYmVsRm9udCwgYmFzZV8xLkZvbnQpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwibGFiZWxTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIENyb3NzaGFpclRvb2x0aXApXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwiY3Jvc3NoYWlyVG9vbHRpcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInRpdGxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh0aGVtZV8xLlRoZW1lLmF4aXNUaXRsZUZvbnQsIGJhc2VfMS5Gb250KVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInRpdGxlU3R5bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJsYWJlbEZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInNrZWxldG9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0RhdGVUaW1lJylcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJza2VsZXRvblR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInBsb3RPZmZzZXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJpc0luZGV4ZWRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxMClcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJsb2dCYXNlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJjb2x1bW5JbmRleFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwicm93SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInNwYW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcImRlc2lyZWRJbnRlcnZhbHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgzKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcIm1heGltdW1MYWJlbHNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInpvb21GYWN0b3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInpvb21Qb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcIm9wcG9zZWRQb3NpdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwiZW5hYmxlQXV0b0ludGVydmFsT25ab29taW5nXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0F1dG8nKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInJhbmdlUGFkZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdEb3VibGUnKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcInZhbHVlVHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOb25lJylcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJlZGdlTGFiZWxQbGFjZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQXV0bycpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwiaW50ZXJ2YWxUeXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0JldHdlZW5UaWNrcycpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwibGFiZWxQbGFjZW1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJtaW5vclRpY2tzUGVySW50ZXJ2YWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcImxhYmVsUm90YXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcIm1pbmltdW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcIm1heGltdW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcImludGVydmFsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgTWFqb3JUaWNrTGluZXMpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwibWFqb3JUaWNrTGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBNaW5vclRpY2tMaW5lcylcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJtaW5vclRpY2tMaW5lc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIE1ham9yR3JpZExpbmVzKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcIm1ham9yR3JpZExpbmVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgTWlub3JHcmlkTGluZXMpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwibWlub3JHcmlkTGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBBeGlzTGluZSlcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJsaW5lU3R5bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnSGlkZScpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwibGFiZWxJbnRlcnNlY3RBY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShmYWxzZSlcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJpc0ludmVyc2VkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTAwKVxuICAgIF0sIEF4aXMucHJvdG90eXBlLCBcImNvZWZmaWNpZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJzdGFydEFuZ2xlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBeGlzLnByb3RvdHlwZSwgXCJkZXNjcmlwdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDIpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwidGFiSW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db2xsZWN0aW9uKFtdLCBjaGFydF9iYXNlXzEuU3RyaXBMaW5lU2V0dGluZ3MpXG4gICAgXSwgQXhpcy5wcm90b3R5cGUsIFwic3RyaXBMaW5lc1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQXhpcyA9IEF4aXM7XG4gICAgdmFyIFZpc2libGVMYWJlbHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBWaXNpYmxlTGFiZWxzKHRleHQsIHZhbHVlLCBzaXplLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKHNpemUgPT09IHZvaWQgMCkgeyBzaXplID0gbmV3IGhlbHBlcl8xLlNpemUoMCwgMCk7IH1cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gMTsgfVxuICAgICAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGV4dDtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVmlzaWJsZUxhYmVscztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuVmlzaWJsZUxhYmVscyA9IFZpc2libGVMYWJlbHM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L2F4aXMvYXhpcy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEb3VibGVSYW5nZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIERvdWJsZVJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubVN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tRW5kID0gZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tU3RhcnQgPSBlbmQ7XG4gICAgICAgICAgICAgICAgdGhpcy5tRW5kID0gc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvdWJsZVJhbmdlLnByb3RvdHlwZSwgXCJzdGFydFwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tU3RhcnQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvdWJsZVJhbmdlLnByb3RvdHlwZSwgXCJlbmRcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubUVuZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG91YmxlUmFuZ2UucHJvdG90eXBlLCBcImRlbHRhXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodGhpcy5tRW5kIC0gdGhpcy5tU3RhcnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb3VibGVSYW5nZS5wcm90b3R5cGUsIFwibWVkaWFuXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1TdGFydCArICh0aGlzLm1FbmQgLSB0aGlzLm1TdGFydCkgLyAyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEb3VibGVSYW5nZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRG91YmxlUmFuZ2UgPSBEb3VibGVSYW5nZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdXRpbHMvZG91YmxlLXJhbmdlLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDb25uZWN0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ29ubmVjdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDb25uZWN0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbm5lY3RvcjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdMaW5lJylcbiAgICBdLCBDb25uZWN0b3IucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIENvbm5lY3Rvci5wcm90b3R5cGUsIFwiY29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIENvbm5lY3Rvci5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIENvbm5lY3Rvci5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQ29ubmVjdG9yLnByb3RvdHlwZSwgXCJkYXNoQXJyYXlcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkNvbm5lY3RvciA9IENvbm5lY3RvcjtcbiAgICB2YXIgRm9udCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhGb250LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBGb250KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBGb250O1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzE2cHgnKVxuICAgIF0sIEZvbnQucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBGb250LnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTZWdvZSBVSScpXG4gICAgXSwgRm9udC5wcm90b3R5cGUsIFwiZm9udEZhbWlseVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOb3JtYWwnKVxuICAgIF0sIEZvbnQucHJvdG90eXBlLCBcImZvbnRXZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTm9ybWFsJylcbiAgICBdLCBGb250LnByb3RvdHlwZSwgXCJmb250U3R5bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIEZvbnQucHJvdG90eXBlLCBcIm9wYWNpdHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQ2VudGVyJylcbiAgICBdLCBGb250LnByb3RvdHlwZSwgXCJ0ZXh0QWxpZ25tZW50XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Gb250ID0gRm9udDtcbiAgICB2YXIgQm9yZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEJvcmRlciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQm9yZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBCb3JkZXI7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBCb3JkZXIucHJvdG90eXBlLCBcImNvbG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBCb3JkZXIucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5Cb3JkZXIgPSBCb3JkZXI7XG4gICAgdmFyIENoYXJ0QXJlYSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDaGFydEFyZWEsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENoYXJ0QXJlYSgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2hhcnRBcmVhO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgQm9yZGVyKVxuICAgIF0sIENoYXJ0QXJlYS5wcm90b3R5cGUsIFwiYm9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ3RyYW5zcGFyZW50JylcbiAgICBdLCBDaGFydEFyZWEucHJvdG90eXBlLCBcImJhY2tncm91bmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIENoYXJ0QXJlYS5wcm90b3R5cGUsIFwib3BhY2l0eVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQ2hhcnRBcmVhID0gQ2hhcnRBcmVhO1xuICAgIHZhciBNYXJnaW4gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTWFyZ2luLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNYXJnaW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hcmdpbjtcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEwKVxuICAgIF0sIE1hcmdpbi5wcm90b3R5cGUsIFwibGVmdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEwKVxuICAgIF0sIE1hcmdpbi5wcm90b3R5cGUsIFwicmlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxMClcbiAgICBdLCBNYXJnaW4ucHJvdG90eXBlLCBcInRvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEwKVxuICAgIF0sIE1hcmdpbi5wcm90b3R5cGUsIFwiYm90dG9tXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5NYXJnaW4gPSBNYXJnaW47XG4gICAgdmFyIEFuaW1hdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBbmltYXRpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQW5pbWF0aW9uO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBBbmltYXRpb24ucHJvdG90eXBlLCBcImVuYWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEwMDApXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJkdXJhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgQW5pbWF0aW9uLnByb3RvdHlwZSwgXCJkZWxheVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQW5pbWF0aW9uID0gQW5pbWF0aW9uO1xuICAgIHZhciBJbmRleGVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEluZGV4ZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEluZGV4ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEluZGV4ZXM7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIEluZGV4ZXMucHJvdG90eXBlLCBcInNlcmllc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgSW5kZXhlcy5wcm90b3R5cGUsIFwicG9pbnRcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkluZGV4ZXMgPSBJbmRleGVzO1xuICAgIHZhciBDb3JuZXJSYWRpdXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ29ybmVyUmFkaXVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBDb3JuZXJSYWRpdXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvcm5lclJhZGl1cztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgQ29ybmVyUmFkaXVzLnByb3RvdHlwZSwgXCJ0b3BMZWZ0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBDb3JuZXJSYWRpdXMucHJvdG90eXBlLCBcInRvcFJpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBDb3JuZXJSYWRpdXMucHJvdG90eXBlLCBcImJvdHRvbUxlZnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIENvcm5lclJhZGl1cy5wcm90b3R5cGUsIFwiYm90dG9tUmlnaHRcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkNvcm5lclJhZGl1cyA9IENvcm5lclJhZGl1cztcbiAgICB2YXIgSW5kZXggPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBJbmRleChzZXJpZXNJbmRleCwgcG9pbnRJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5zZXJpZXMgPSBzZXJpZXNJbmRleDtcbiAgICAgICAgICAgIHRoaXMucG9pbnQgPSBwb2ludEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBJbmRleDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuSW5kZXggPSBJbmRleDtcbiAgICB2YXIgRW1wdHlQb2ludFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEVtcHR5UG9pbnRTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRW1wdHlQb2ludFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBFbXB0eVBvaW50U2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEVtcHR5UG9pbnRTZXR0aW5ncy5wcm90b3R5cGUsIFwiZmlsbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJ3RyYW5zcGFyZW50Jywgd2lkdGg6IDAgfSwgQm9yZGVyKVxuICAgIF0sIEVtcHR5UG9pbnRTZXR0aW5ncy5wcm90b3R5cGUsIFwiYm9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0dhcCcpXG4gICAgXSwgRW1wdHlQb2ludFNldHRpbmdzLnByb3RvdHlwZSwgXCJtb2RlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5FbXB0eVBvaW50U2V0dGluZ3MgPSBFbXB0eVBvaW50U2V0dGluZ3M7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9tb2RlbC9iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi91dGlscy9kb3VibGUtcmFuZ2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGRvdWJsZV9yYW5nZV8xLCBoZWxwZXJfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRG91YmxlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRG91YmxlKGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgRG91YmxlLnByb3RvdHlwZS5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsID0gZnVuY3Rpb24gKGF4aXMsIGRlbHRhLCBzaXplKSB7XG4gICAgICAgICAgICB2YXIgYWN0dWFsRGVzaXJlZEludGVydmFsc0NvdW50ID0gYXhpcy5nZXRBY3R1YWxEZXNpcmVkSW50ZXJ2YWxzQ291bnQoc2l6ZSk7XG4gICAgICAgICAgICB2YXIgbmljZUludGVydmFsID0gZGVsdGEgLyBhY3R1YWxEZXNpcmVkSW50ZXJ2YWxzQ291bnQ7XG4gICAgICAgICAgICBpZiAoYXhpcy5kZXNpcmVkSW50ZXJ2YWxzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmljZUludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1pbkludGVydmFsID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoaGVscGVyXzIubG9nQmFzZShuaWNlSW50ZXJ2YWwsIDEwKSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGF4aXMuaW50ZXJ2YWxEaXZzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEludGVydmFsID0gbWluSW50ZXJ2YWwgKiBpbnRlcnZhbDtcbiAgICAgICAgICAgICAgICBpZiAoYWN0dWFsRGVzaXJlZEludGVydmFsc0NvdW50IDwgKGRlbHRhIC8gY3VycmVudEludGVydmFsKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmljZUludGVydmFsID0gY3VycmVudEludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5pY2VJbnRlcnZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRG91YmxlLnByb3RvdHlwZS5nZXRBY3R1YWxSYW5nZSA9IGZ1bmN0aW9uIChheGlzLCBzaXplKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEb3VibGVSYW5nZShheGlzKTtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UuaW50ZXJ2YWwgPSBheGlzLmludGVydmFsIHx8IHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCBheGlzLmRvdWJsZVJhbmdlLmRlbHRhLCBzaXplKTtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWluID0gYXhpcy5kb3VibGVSYW5nZS5zdGFydDtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWF4ID0gYXhpcy5kb3VibGVSYW5nZS5lbmQ7XG4gICAgICAgIH07XG4gICAgICAgIERvdWJsZS5wcm90b3R5cGUuaW5pdGlhbGl6ZURvdWJsZVJhbmdlID0gZnVuY3Rpb24gKGF4aXMpIHtcbiAgICAgICAgICAgIGlmIChheGlzLm1pbmltdW0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbiA9IGF4aXMubWluaW11bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubWluID09PSBudWxsIHx8IHRoaXMubWluID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpcy5tYXhpbXVtICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSBheGlzLm1heGltdW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm1heCA9PT0gbnVsbCB8fCB0aGlzLm1heCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSA1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWluID09PSB0aGlzLm1heCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4ID0gdGhpcy5taW4gKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXhpcy5kb3VibGVSYW5nZSA9IG5ldyBkb3VibGVfcmFuZ2VfMS5Eb3VibGVSYW5nZSh0aGlzLm1pbiwgdGhpcy5tYXgpO1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZSA9IHt9O1xuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLmNhbGN1bGF0ZVJhbmdlQW5kSW50ZXJ2YWwgPSBmdW5jdGlvbiAoc2l6ZSwgYXhpcykge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVSYW5nZShheGlzLCBzaXplKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0QWN0dWFsUmFuZ2UoYXhpcywgc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5UmFuZ2VQYWRkaW5nKGF4aXMsIHNpemUpO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWaXNpYmxlTGFiZWxzKGF4aXMsIHRoaXMuY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLmNhbGN1bGF0ZVJhbmdlID0gZnVuY3Rpb24gKGF4aXMsIHNpemUpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXM7XG4gICAgICAgICAgICB0aGlzLm1pbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm1heCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWF4aXMuc2V0UmFuZ2UoKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBheGlzLnNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllc18xID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcmllc18xLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZ0ludGVydmFsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNfMS50eXBlLmluZGV4T2YoJ0NvbHVtbicpID4gLTEgJiYgYXhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHNlcmllc18xLnR5cGUuaW5kZXhPZignQmFyJykgPiAtMSAmJiBheGlzLm9yaWVudGF0aW9uID09PSAnVmVydGljYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzZXJpZXNfMS54QXhpcy52YWx1ZVR5cGUgPT09ICdEb3VibGUnIHx8IHNlcmllc18xLnhBeGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBzZXJpZXNfMS54QXhpcy5yYW5nZVBhZGRpbmcgPT09ICdBdXRvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZ0ludGVydmFsID0gaGVscGVyXzEuZ2V0TWluUG9pbnRzRGVsdGEoc2VyaWVzXzEueEF4aXMsIGF4aXMuc2VyaWVzKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZE1pbk1heChzZXJpZXNfMS55TWluLCBzZXJpZXNfMS55TWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZE1pbk1heChzZXJpZXNfMS54TWluIC0gdGhpcy5wYWRkaW5nSW50ZXJ2YWwsIHNlcmllc18xLnhNYXggKyB0aGlzLnBhZGRpbmdJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdWZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRNaW5NYXgoc2VyaWVzXzEueE1pbiAtIHRoaXMucGFkZGluZ0ludGVydmFsLCBzZXJpZXNfMS54TWF4ICsgdGhpcy5wYWRkaW5nSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kTWluTWF4KHNlcmllc18xLnlNaW4sIHNlcmllc18xLnlNYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLmZpbmRNaW5NYXggPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pbiA9PT0gbnVsbCB8fCB0aGlzLm1pbiA+IG1pbikge1xuICAgICAgICAgICAgICAgIHRoaXMubWluID0gbWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWF4ID09PSBudWxsIHx8IHRoaXMubWF4IDwgbWF4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERvdWJsZS5wcm90b3R5cGUuYXBwbHlSYW5nZVBhZGRpbmcgPSBmdW5jdGlvbiAoYXhpcywgc2l6ZSkge1xuICAgICAgICAgICAgdmFyIHJhbmdlO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gYXhpcy5hY3R1YWxSYW5nZS5taW47XG4gICAgICAgICAgICB2YXIgZW5kID0gYXhpcy5hY3R1YWxSYW5nZS5tYXg7XG4gICAgICAgICAgICBpZiAoIWF4aXMuc2V0UmFuZ2UoKSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IGF4aXMuYWN0dWFsUmFuZ2UuaW50ZXJ2YWw7XG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBheGlzLmdldFJhbmdlUGFkZGluZyh0aGlzLmNoYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAocGFkZGluZyA9PT0gJ0FkZGl0aW9uYWwnIHx8IHBhZGRpbmcgPT09ICdSb3VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kQWRkaXRpb25hbChheGlzLCBzdGFydCwgZW5kLCBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhZGRpbmcgPT09ICdOb3JtYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZE5vcm1hbChheGlzLCBzdGFydCwgZW5kLCBpbnRlcnZhbCwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFjdHVhbFJhbmdlKGF4aXMsIHN0YXJ0LCBlbmQsIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLmRlbHRhID0gYXhpcy5hY3R1YWxSYW5nZS5tYXggLSBheGlzLmFjdHVhbFJhbmdlLm1pbjtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVmlzaWJsZVJhbmdlKHNpemUsIGF4aXMpO1xuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLnVwZGF0ZUFjdHVhbFJhbmdlID0gZnVuY3Rpb24gKGF4aXMsIG1pbmltdW0sIG1heGltdW0sIGludGVydmFsKSB7XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1pbiA9IGF4aXMubWluaW11bSAhPSBudWxsID8gYXhpcy5taW5pbXVtIDogbWluaW11bTtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWF4ID0gYXhpcy5tYXhpbXVtICE9IG51bGwgPyBheGlzLm1heGltdW0gOiBtYXhpbXVtO1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5pbnRlcnZhbCA9IGF4aXMuaW50ZXJ2YWwgIT0gbnVsbCA/IGF4aXMuaW50ZXJ2YWwgOiBpbnRlcnZhbDtcbiAgICAgICAgfTtcbiAgICAgICAgRG91YmxlLnByb3RvdHlwZS5maW5kQWRkaXRpb25hbCA9IGZ1bmN0aW9uIChheGlzLCBzdGFydCwgZW5kLCBpbnRlcnZhbCkge1xuICAgICAgICAgICAgdmFyIG1pbmltdW07XG4gICAgICAgICAgICB2YXIgbWF4aW11bTtcbiAgICAgICAgICAgIG1pbmltdW0gPSBNYXRoLmZsb29yKHN0YXJ0IC8gaW50ZXJ2YWwpICogaW50ZXJ2YWw7XG4gICAgICAgICAgICBtYXhpbXVtID0gTWF0aC5jZWlsKGVuZCAvIGludGVydmFsKSAqIGludGVydmFsO1xuICAgICAgICAgICAgaWYgKGF4aXMucmFuZ2VQYWRkaW5nID09PSAnQWRkaXRpb25hbCcpIHtcbiAgICAgICAgICAgICAgICBtaW5pbXVtIC09IGludGVydmFsO1xuICAgICAgICAgICAgICAgIG1heGltdW0gKz0gaW50ZXJ2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjdHVhbFJhbmdlKGF4aXMsIG1pbmltdW0sIG1heGltdW0sIGludGVydmFsKTtcbiAgICAgICAgfTtcbiAgICAgICAgRG91YmxlLnByb3RvdHlwZS5maW5kTm9ybWFsID0gZnVuY3Rpb24gKGF4aXMsIHN0YXJ0LCBlbmQsIGludGVydmFsLCBzaXplKSB7XG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nO1xuICAgICAgICAgICAgdmFyIG1pbmltdW07XG4gICAgICAgICAgICB2YXIgbWF4aW11bTtcbiAgICAgICAgICAgIHZhciBzdGFydFZhbHVlID0gc3RhcnQ7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRWYWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgbWluaW11bSA9IHN0YXJ0ICsgKHN0YXJ0IC8gMjApO1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZyA9IGludGVydmFsICsgKG1pbmltdW0gJSBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKCgwLjM2NSAqIGludGVydmFsKSA+PSByZW1haW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bSAtPSBpbnRlcnZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1pbmltdW0gJSBpbnRlcnZhbCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bSA9IChtaW5pbXVtIC0gaW50ZXJ2YWwpIC0gKG1pbmltdW0gJSBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWluaW11bSA9IHN0YXJ0IDwgKCg1LjAgLyA2LjApICogZW5kKSA/IDAgOiAoc3RhcnQgLSAoZW5kIC0gc3RhcnQpIC8gMik7XG4gICAgICAgICAgICAgICAgaWYgKG1pbmltdW0gJSBpbnRlcnZhbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bSAtPSAobWluaW11bSAlIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXhpbXVtID0gKGVuZCA+IDApID8gKGVuZCArIChlbmQgLSBzdGFydFZhbHVlKSAvIDIwKSA6IChlbmQgLSAoZW5kIC0gc3RhcnRWYWx1ZSkgLyAyMCk7XG4gICAgICAgICAgICByZW1haW5pbmcgPSBpbnRlcnZhbCAtIChtYXhpbXVtICUgaW50ZXJ2YWwpO1xuICAgICAgICAgICAgaWYgKCgwLjM2NSAqIGludGVydmFsKSA+PSByZW1haW5pbmcpIHtcbiAgICAgICAgICAgICAgICBtYXhpbXVtICs9IGludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1heGltdW0gJSBpbnRlcnZhbCA+IDApIHtcbiAgICAgICAgICAgICAgICBtYXhpbXVtID0gKG1heGltdW0gKyBpbnRlcnZhbCkgLSAobWF4aW11bSAlIGludGVydmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXMuZG91YmxlUmFuZ2UgPSBuZXcgZG91YmxlX3JhbmdlXzEuRG91YmxlUmFuZ2UobWluaW11bSwgbWF4aW11bSk7XG4gICAgICAgICAgICBpZiAobWluaW11bSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGludGVydmFsID0gdGhpcy5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsKGF4aXMsIGF4aXMuZG91YmxlUmFuZ2UuZGVsdGEsIHNpemUpO1xuICAgICAgICAgICAgICAgIG1heGltdW0gPSBNYXRoLmNlaWwobWF4aW11bSAvIGludGVydmFsKSAqIGludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVBY3R1YWxSYW5nZShheGlzLCBtaW5pbXVtLCBtYXhpbXVtLCBpbnRlcnZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIERvdWJsZS5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZVJhbmdlID0gZnVuY3Rpb24gKHNpemUsIGF4aXMpIHtcbiAgICAgICAgICAgIGF4aXMudmlzaWJsZVJhbmdlID0gYXhpcy5hY3R1YWxSYW5nZTtcbiAgICAgICAgICAgIGlmIChheGlzLnpvb21GYWN0b3IgPCAxIHx8IGF4aXMuem9vbVBvc2l0aW9uID4gMCkge1xuICAgICAgICAgICAgICAgIGF4aXMuY2FsY3VsYXRlVmlzaWJsZVJhbmdlKHNpemUpO1xuICAgICAgICAgICAgICAgIGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsID0gKGF4aXMuZW5hYmxlQXV0b0ludGVydmFsT25ab29taW5nICYmIGF4aXMudmFsdWVUeXBlICE9PSAnQ2F0ZWdvcnknKSA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCBheGlzLmRvdWJsZVJhbmdlLmRlbHRhLCBzaXplKVxuICAgICAgICAgICAgICAgICAgICA6IGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLmNhbGN1bGF0ZVZpc2libGVMYWJlbHMgPSBmdW5jdGlvbiAoYXhpcywgY2hhcnQpIHtcbiAgICAgICAgICAgIGF4aXMudmlzaWJsZUxhYmVscyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRlbXBJbnRlcnZhbCA9IGF4aXMudmlzaWJsZVJhbmdlLm1pbjtcbiAgICAgICAgICAgIGlmIChheGlzLnpvb21GYWN0b3IgPCAxIHx8IGF4aXMuem9vbVBvc2l0aW9uID4gMCB8fCB0aGlzLnBhZGRpbmdJbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIHRlbXBJbnRlcnZhbCA9IGF4aXMudmlzaWJsZVJhbmdlLm1pbiAtIChheGlzLnZpc2libGVSYW5nZS5taW4gJSBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5nZXRGb3JtYXQoYXhpcyk7XG4gICAgICAgICAgICB2YXIgaXNDdXN0b20gPSBmb3JtYXQubWF0Y2goJ3t2YWx1ZX0nKSAhPT0gbnVsbDtcbiAgICAgICAgICAgIGF4aXMuZm9ybWF0ID0gY2hhcnQuaW50bC5nZXROdW1iZXJGb3JtYXQoeyBmb3JtYXQ6IGlzQ3VzdG9tID8gJycgOiBmb3JtYXQsXG4gICAgICAgICAgICAgICAgdXNlR3JvdXBpbmc6IGNoYXJ0LnVzZUdyb3VwaW5nU2VwYXJhdG9yIH0pO1xuICAgICAgICAgICAgYXhpcy5zdGFydExhYmVsID0gYXhpcy5mb3JtYXQoYXhpcy52aXNpYmxlUmFuZ2UubWluKTtcbiAgICAgICAgICAgIGF4aXMuZW5kTGFiZWwgPSBheGlzLmZvcm1hdChheGlzLnZpc2libGVSYW5nZS5tYXgpO1xuICAgICAgICAgICAgZm9yICg7IHRlbXBJbnRlcnZhbCA8PSBheGlzLnZpc2libGVSYW5nZS5tYXg7IHRlbXBJbnRlcnZhbCArPSBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbCkge1xuICAgICAgICAgICAgICAgIGlmIChoZWxwZXJfMi53aXRoSW4odGVtcEludGVydmFsLCBheGlzLnZpc2libGVSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy50cmlnZ2VyTGFiZWxSZW5kZXIoY2hhcnQsIHRlbXBJbnRlcnZhbCwgdGhpcy5mb3JtYXRWYWx1ZShheGlzLCBpc0N1c3RvbSwgZm9ybWF0LCB0ZW1wSW50ZXJ2YWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmdldE1heExhYmVsV2lkdGgoY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBEb3VibGUucHJvdG90eXBlLmdldEZvcm1hdCA9IGZ1bmN0aW9uIChheGlzKSB7XG4gICAgICAgICAgICBpZiAoYXhpcy5sYWJlbEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlzLmxhYmVsRm9ybWF0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF4aXMuaXNTdGFjazEwMCA/ICd7dmFsdWV9JScgOiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgRG91YmxlLnByb3RvdHlwZS5mb3JtYXRWYWx1ZSA9IGZ1bmN0aW9uIChheGlzLCBpc0N1c3RvbSwgZm9ybWF0LCB0ZW1wSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0N1c3RvbSA/IGZvcm1hdC5yZXBsYWNlKCd7dmFsdWV9JywgYXhpcy5mb3JtYXQodGVtcEludGVydmFsKSlcbiAgICAgICAgICAgICAgICA6IGF4aXMuZm9ybWF0KHRlbXBJbnRlcnZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEb3VibGU7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRvdWJsZSA9IERvdWJsZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvYXhpcy9kb3VibGUtYXhpcy5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVGhlbWU7XG4gICAgKGZ1bmN0aW9uIChUaGVtZSkge1xuICAgICAgICBUaGVtZS5heGlzTGFiZWxGb250ID0ge1xuICAgICAgICAgICAgc2l6ZTogJzEycHgnLFxuICAgICAgICAgICAgZm9udFdlaWdodDogJ05vcm1hbCcsXG4gICAgICAgICAgICBjb2xvcjogJyM2ODY4NjgnLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnTm9ybWFsJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTZWdvZSBVSSdcbiAgICAgICAgfTtcbiAgICAgICAgVGhlbWUuYXhpc1RpdGxlRm9udCA9IHtcbiAgICAgICAgICAgIHNpemU6ICcxNHB4JyxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgY29sb3I6ICcjNDI0MjQyJyxcbiAgICAgICAgICAgIGZvbnRTdHlsZTogJ05vcm1hbCcsXG4gICAgICAgICAgICBmb250RmFtaWx5OiAnU2Vnb2UgVUknXG4gICAgICAgIH07XG4gICAgICAgIFRoZW1lLmNoYXJ0VGl0bGVGb250ID0ge1xuICAgICAgICAgICAgc2l6ZTogJzE1cHgnLFxuICAgICAgICAgICAgZm9udFdlaWdodDogJzUwMCcsXG4gICAgICAgICAgICBjb2xvcjogJyM0MjQyNDInLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnTm9ybWFsJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTZWdvZSBVSSdcbiAgICAgICAgfTtcbiAgICAgICAgVGhlbWUuY3Jvc3NoYWlyTGFiZWxGb250ID0ge1xuICAgICAgICAgICAgc2l6ZTogJzEzcHgnLFxuICAgICAgICAgICAgZm9udFdlaWdodDogJ05vcm1hbCcsXG4gICAgICAgICAgICBjb2xvcjogJyNlNWU1ZTUnLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnTm9ybWFsJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTZWdvZSBVSSdcbiAgICAgICAgfTtcbiAgICAgICAgVGhlbWUudG9vbHRpcExhYmVsRm9udCA9IHtcbiAgICAgICAgICAgIHNpemU6ICcxM3B4JyxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdOb3JtYWwnLFxuICAgICAgICAgICAgY29sb3I6IG51bGwsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdOb3JtYWwnLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ1NlZ29lIFVJJ1xuICAgICAgICB9O1xuICAgICAgICBUaGVtZS5sZWdlbmRMYWJlbEZvbnQgPSB7XG4gICAgICAgICAgICBzaXplOiAnMTNweCcsXG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnTm9ybWFsJyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzM1MzUzNScsXG4gICAgICAgICAgICBmb250U3R5bGU6ICdOb3JtYWwnLFxuICAgICAgICAgICAgZm9udEZhbWlseTogJ1NlZ29lIFVJJ1xuICAgICAgICB9O1xuICAgICAgICBUaGVtZS5zdHJpcExpbmVMYWJlbEZvbnQgPSB7XG4gICAgICAgICAgICBzaXplOiAnMTJweCcsXG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnUmVndWxhcicsXG4gICAgICAgICAgICBjb2xvcjogJyMzNTM1MzUnLFxuICAgICAgICAgICAgZm9udFN0eWxlOiAnTm9ybWFsJyxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdTZWdvZSBVSSdcbiAgICAgICAgfTtcbiAgICAgICAgVGhlbWUuYXhpc0xpbmVDb2xvciA9ICcjYjViNWI1JztcbiAgICAgICAgVGhlbWUuYXhpc01ham9yR3JpZExpbmVDb2xvciA9ICcjZGJkYmRiJztcbiAgICAgICAgVGhlbWUuYXhpc01pbm9yR3JpZExpbmVDb2xvciA9ICcjZWFlYWVhJztcbiAgICAgICAgVGhlbWUuYXhpc01ham9yVGlja0xpbmVDb2xvciA9ICcjYjViNWI1JztcbiAgICAgICAgVGhlbWUuYXhpc01pbm9yVGlja0xpbmVDb2xvciA9ICcjZDZkNmQ2JztcbiAgICAgICAgVGhlbWUuY3Jvc3NIYWlyTGFiZWxDb2xvciA9ICcjNGY0ZjRmJztcbiAgICAgICAgVGhlbWUuY2hhcnRCYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGRkZGRic7XG4gICAgICAgIFRoZW1lLnNlbGVjdGlvblJlY3RGaWxsID0gJ3JnYmEoNDEsIDE3MSwgMjI2LCAwLjEpJztcbiAgICAgICAgVGhlbWUuc2VsZWN0aW9uUmVjdFN0cm9rZSA9ICcjMjlhYmUyJztcbiAgICB9KShUaGVtZSA9IGV4cG9ydHMuVGhlbWUgfHwgKGV4cG9ydHMuVGhlbWUgPSB7fSkpO1xuICAgIGZ1bmN0aW9uIGdldFNlcmllc0NvbG9yKHRoZW1lKSB7XG4gICAgICAgIHZhciBwYWxldHRlO1xuICAgICAgICBzd2l0Y2ggKHRoZW1lKSB7XG4gICAgICAgICAgICBjYXNlICdNYXRlcmlhbCc6XG4gICAgICAgICAgICAgICAgcGFsZXR0ZSA9IFsnIzAwYmRhZScsICcjNDA0MDQxJywgJyMzNTdjZDInLCAnI2U1NjU5MCcsICcjZjhiODgzJyxcbiAgICAgICAgICAgICAgICAgICAgJyM3MGFkNDcnLCAnI2RkOGFiZCcsICcjN2Y4NGU4JywgJyM3YmI0ZWInLCAnI2VhN2E1NyddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnRmFicmljJzpcbiAgICAgICAgICAgICAgICBwYWxldHRlID0gWycjNDQ3MmM0JywgJyNlZDdkMzEnLCAnI2ZmYzAwMCcsICcjNzBhZDQ3JywgJyM1YjliZDUnLFxuICAgICAgICAgICAgICAgICAgICAnI2MxYzFjMScsICcjNmY2ZmUyJywgJyNlMjY5YWUnLCAnIzllNDgwZScsICcjOTk3MzAwJ107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdCb290c3RyYXAnOlxuICAgICAgICAgICAgICAgIHBhbGV0dGUgPSBbJyNhMTZlZTUnLCAnI2Y3Y2U2OScsICcjNTVhNWMyJywgJyM3ZGRmMWUnLCAnI2ZmNmVhNicsXG4gICAgICAgICAgICAgICAgICAgICcjNzk1M2FjJywgJyNiOTliNGYnLCAnIzQwN2M5MicsICcjNWVhNzE2JywgJyNiOTFjNTInXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFsZXR0ZTtcbiAgICB9XG4gICAgZXhwb3J0cy5nZXRTZXJpZXNDb2xvciA9IGdldFNlcmllc0NvbG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vbW9kZWwvdGhlbWUuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvdGhlbWVcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIHRoZW1lXzEsIGJhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIENoYXJ0QW5ub3RhdGlvblNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDaGFydEFubm90YXRpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcwJylcbiAgICBdLCBDaGFydEFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwieFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcwJylcbiAgICBdLCBDaGFydEFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwieVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbnRlbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQ2VudGVyJylcbiAgICBdLCBDaGFydEFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiaG9yaXpvbnRhbEFsaWdubWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdQaXhlbCcpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImNvb3JkaW5hdGVVbml0c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdDaGFydCcpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInJlZ2lvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdNaWRkbGUnKVxuICAgIF0sIENoYXJ0QW5ub3RhdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbEFsaWdubWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInhBeGlzTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInlBeGlzTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQ2hhcnRBbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImRlc2NyaXB0aW9uXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5DaGFydEFubm90YXRpb25TZXR0aW5ncyA9IENoYXJ0QW5ub3RhdGlvblNldHRpbmdzO1xuICAgIHZhciBTdHJpcExpbmVTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdHJpcExpbmVTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RyaXBMaW5lU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN0cmlwTGluZVNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBTdHJpcExpbmVTZXR0aW5ncy5wcm90b3R5cGUsIFwidmlzaWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJzdGFydEZyb21BeGlzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBTdHJpcExpbmVTZXR0aW5ncy5wcm90b3R5cGUsIFwic3RhcnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJlbmRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJzaXplXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJyM4MDgwODAnKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJjb2xvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJ3RyYW5zcGFyZW50Jywgd2lkdGg6IDEgfSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBTdHJpcExpbmVTZXR0aW5ncy5wcm90b3R5cGUsIFwiYm9yZGVyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgU3RyaXBMaW5lU2V0dGluZ3MucHJvdG90eXBlLCBcInRleHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJyb3RhdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdNaWRkbGUnKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJob3Jpem9udGFsQWxpZ25tZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ01pZGRsZScpXG4gICAgXSwgU3RyaXBMaW5lU2V0dGluZ3MucHJvdG90eXBlLCBcInZlcnRpY2FsQWxpZ25tZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh0aGVtZV8xLlRoZW1lLnN0cmlwTGluZUxhYmVsRm9udCwgYmFzZV8xLkZvbnQpXG4gICAgXSwgU3RyaXBMaW5lU2V0dGluZ3MucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdCZWhpbmQnKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIFN0cmlwTGluZVNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGFjaXR5XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5TdHJpcExpbmVTZXR0aW5ncyA9IFN0cmlwTGluZVNldHRpbmdzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9tb2RlbC9jaGFydC1iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgaGVscGVyXzIsIGhlbHBlcl8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBheGlzUGFkZGluZyA9IDEwO1xuICAgIHZhciBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwoY2hhcnRNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQgPSBjaGFydE1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZyA9IDU7XG4gICAgICAgIH1cbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5tZWFzdXJlQXhpcyA9IGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdGhpcy5zZXJpZXNDbGlwUmVjdCA9IG5ldyBoZWxwZXJfMi5SZWN0KHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxDbGlwUmVjdCA9IHJlY3Q7XG4gICAgICAgICAgICB0aGlzLmxlZnRTaXplID0gMDtcbiAgICAgICAgICAgIHRoaXMucmlnaHRTaXplID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9wU2l6ZSA9IDA7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbVNpemUgPSAwO1xuICAgICAgICAgICAgdGhpcy5tZWFzdXJlUm93QXhpcyhjaGFydCwgdGhpcy5pbml0aWFsQ2xpcFJlY3QpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsQ2xpcFJlY3QgPSBoZWxwZXJfMS5zdWJ0cmFjdFRoaWNrbmVzcyh0aGlzLmluaXRpYWxDbGlwUmVjdCwgbmV3IGhlbHBlcl8yLlRoaWNrbmVzcyh0aGlzLmxlZnRTaXplLCB0aGlzLnJpZ2h0U2l6ZSwgMCwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tZWFzdXJlQ29sdW1uQXhpcyhjaGFydCwgdGhpcy5pbml0aWFsQ2xpcFJlY3QpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsQ2xpcFJlY3QgPSBoZWxwZXJfMS5zdWJ0cmFjdFRoaWNrbmVzcyh0aGlzLmluaXRpYWxDbGlwUmVjdCwgbmV3IGhlbHBlcl8yLlRoaWNrbmVzcygwLCAwLCB0aGlzLnRvcFNpemUsIHRoaXMuYm90dG9tU2l6ZSkpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoYXJ0LmRlbGF5UmVkcmF3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVBeGlzU2l6ZSh0aGlzLmluaXRpYWxDbGlwUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxlZnRTaXplID0gMDtcbiAgICAgICAgICAgIHRoaXMucmlnaHRTaXplID0gMDtcbiAgICAgICAgICAgIHRoaXMudG9wU2l6ZSA9IDA7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbVNpemUgPSAwO1xuICAgICAgICAgICAgdGhpcy5tZWFzdXJlUm93QXhpcyhjaGFydCwgdGhpcy5pbml0aWFsQ2xpcFJlY3QpO1xuICAgICAgICAgICAgdGhpcy5zZXJpZXNDbGlwUmVjdCA9IGhlbHBlcl8xLnN1YnRyYWN0VGhpY2tuZXNzKHRoaXMuc2VyaWVzQ2xpcFJlY3QsIG5ldyBoZWxwZXJfMi5UaGlja25lc3ModGhpcy5sZWZ0U2l6ZSwgdGhpcy5yaWdodFNpemUsIDAsIDApKTtcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZUNvbHVtbkF4aXMoY2hhcnQsIHRoaXMuaW5pdGlhbENsaXBSZWN0KTtcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ2xpcFJlY3QgPSBoZWxwZXJfMS5zdWJ0cmFjdFRoaWNrbmVzcyh0aGlzLnNlcmllc0NsaXBSZWN0LCBuZXcgaGVscGVyXzIuVGhpY2tuZXNzKDAsIDAsIHRoaXMudG9wU2l6ZSwgdGhpcy5ib3R0b21TaXplKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hhcnQuZGVsYXlSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICBjaGFydC5yZWZyZXNoQXhpcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQXhpc1NpemUodGhpcy5zZXJpZXNDbGlwUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUubWVhc3VyZVJvd0F4aXMgPSBmdW5jdGlvbiAoY2hhcnQsIHJlY3QpIHtcbiAgICAgICAgICAgIHZhciByb3c7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVJvd1NpemUocmVjdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY2hhcnQucm93czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICByb3cgPSBpdGVtO1xuICAgICAgICAgICAgICAgIHJvdy5uZWFyU2l6ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICByb3cuZmFyU2l6ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmFycmFuZ2VBeGlzKHJvdyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlRGVmaW5pdGlvbihyb3csIGNoYXJ0LCBuZXcgaGVscGVyXzIuU2l6ZShjaGFydC5hdmFpbGFibGVTaXplLndpZHRoLCByb3cuY29tcHV0ZWRIZWlnaHQpLCByZWN0KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sZWZ0U2l6ZSA8IGhlbHBlcl8xLnN1bShyb3cubmVhclNpemVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRTaXplID0gaGVscGVyXzEuc3VtKHJvdy5uZWFyU2l6ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yaWdodFNpemUgPCBoZWxwZXJfMS5zdW0ocm93LmZhclNpemVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0U2l6ZSA9IGhlbHBlcl8xLnN1bShyb3cuZmFyU2l6ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1uQXhpcyA9IGZ1bmN0aW9uIChjaGFydCwgcmVjdCkge1xuICAgICAgICAgICAgdmFyIGNvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ29sdW1uU2l6ZShyZWN0KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjaGFydC5jb2x1bW5zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IGl0ZW07XG4gICAgICAgICAgICAgICAgY29sdW1uLmZhclNpemVzID0gW107XG4gICAgICAgICAgICAgICAgY29sdW1uLm5lYXJTaXplcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJyYW5nZUF4aXMoY29sdW1uKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVEZWZpbml0aW9uKGNvbHVtbiwgY2hhcnQsIG5ldyBoZWxwZXJfMi5TaXplKGNvbHVtbi5jb21wdXRlZFdpZHRoLCBjaGFydC5hdmFpbGFibGVTaXplLmhlaWdodCksIHJlY3QpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdHRvbVNpemUgPCBoZWxwZXJfMS5zdW0oY29sdW1uLm5lYXJTaXplcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3R0b21TaXplID0gaGVscGVyXzEuc3VtKGNvbHVtbi5uZWFyU2l6ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b3BTaXplIDwgaGVscGVyXzEuc3VtKGNvbHVtbi5mYXJTaXplcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3BTaXplID0gaGVscGVyXzEuc3VtKGNvbHVtbi5mYXJTaXplcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLm1lYXN1cmVEZWZpbml0aW9uID0gZnVuY3Rpb24gKGRlZmluaXRpb24sIGNoYXJ0LCBzaXplLCBjbGlwUmVjdCkge1xuICAgICAgICAgICAgdmFyIGF4aXM7XG4gICAgICAgICAgICB2YXIgYXhpc1R5cGU7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZGVmaW5pdGlvbi5heGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBheGlzXzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgYXhpc18xLmdldE1vZHVsZShjaGFydCk7XG4gICAgICAgICAgICAgICAgYXhpc18xLmJhc2VNb2R1bGUuY2FsY3VsYXRlUmFuZ2VBbmRJbnRlcnZhbChzaXplLCBheGlzXzEpO1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24uY29tcHV0ZVNpemUoYXhpc18xLCBjbGlwUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5mYXJTaXplcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5mYXJTaXplc1tkZWZpbml0aW9uLmZhclNpemVzLmxlbmd0aCAtIDFdIC09IGF4aXNQYWRkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24ubmVhclNpemVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLm5lYXJTaXplc1tkZWZpbml0aW9uLm5lYXJTaXplcy5sZW5ndGggLSAxXSAtPSBheGlzUGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5jYWxjdWxhdGVBeGlzU2l6ZSA9IGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHJvdztcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICB2YXIgZGVmaW5pdGlvbjtcbiAgICAgICAgICAgIHZhciBheGlzO1xuICAgICAgICAgICAgdmFyIG5lYXJDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgZmFyQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIHNpemUgPSAwO1xuICAgICAgICAgICAgdmFyIHg7XG4gICAgICAgICAgICB2YXIgeTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUm93U2l6ZShyZWN0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5yb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93ID0gY2hhcnQucm93c1tpXTtcbiAgICAgICAgICAgICAgICBuZWFyQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGZhckNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzEgPSByb3cuYXhlcy5sZW5ndGg7IGogPCBsZW5fMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMgPSByb3cuYXhlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMucmVjdC5oZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMucmVjdC5oZWlnaHQgPSByb3cuY29tcHV0ZWRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSBpICsgMSwgbGVuXzIgPSBpICsgYXhpcy5zcGFuOyBrIDwgbGVuXzI7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPSBjaGFydC5yb3dzW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgKz0gZGVmaW5pdGlvbi5jb21wdXRlZEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMucmVjdC55ID0gKHJvdy5jb21wdXRlZFRvcCAtIHNpemUpICsgYXhpcy5wbG90T2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcy5yZWN0LmhlaWdodCA9IChheGlzLnJlY3QuaGVpZ2h0ICsgc2l6ZSkgLSAoMiAqIGF4aXMucGxvdE9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnJlY3Qud2lkdGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChheGlzLm9wcG9zZWRQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHJlY3QueCArIHJlY3Qud2lkdGggKyBoZWxwZXJfMS5zdW0oaGVscGVyXzEuc3ViQXJyYXkocm93LmZhclNpemVzLCBmYXJDb3VudCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcy5yZWN0LnggPSBheGlzLnJlY3QueCA+PSB4ID8gYXhpcy5yZWN0LnggOiB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFyQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHggPSByZWN0LnggLSBoZWxwZXJfMS5zdW0oaGVscGVyXzEuc3ViQXJyYXkocm93Lm5lYXJTaXplcywgbmVhckNvdW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnJlY3QueCA9IGF4aXMucmVjdC54IDw9IHggPyBheGlzLnJlY3QueCA6IHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWFyQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ29sdW1uU2l6ZShyZWN0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gY2hhcnQuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICBuZWFyQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGZhckNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuXzMgPSBjb2x1bW4uYXhlcy5sZW5ndGg7IGogPCBsZW5fMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMgPSBjb2x1bW4uYXhlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMucmVjdC53aWR0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IGksIGxlbl80ID0gKGkgKyBheGlzLnNwYW4pOyBrIDwgbGVuXzQ7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPSBjaGFydC5jb2x1bW5zW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMucmVjdC53aWR0aCArPSBkZWZpbml0aW9uLmNvbXB1dGVkV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnJlY3QueCA9IGNvbHVtbi5jb21wdXRlZExlZnQgKyBheGlzLnBsb3RPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnJlY3Qud2lkdGggLT0gKDIgKiBheGlzLnBsb3RPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcy5yZWN0LmhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMub3Bwb3NlZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcmVjdC55IC0gaGVscGVyXzEuc3VtKGhlbHBlcl8xLnN1YkFycmF5KGNvbHVtbi5mYXJTaXplcywgZmFyQ291bnQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMucmVjdC55ID0gYXhpcy5yZWN0LnkgPD0geSA/IGF4aXMucmVjdC55IDogeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhckNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gcmVjdC55ICsgcmVjdC5oZWlnaHQgKyBoZWxwZXJfMS5zdW0oaGVscGVyXzEuc3ViQXJyYXkoY29sdW1uLm5lYXJTaXplcywgbmVhckNvdW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnJlY3QueSA9IGF4aXMucmVjdC55ID49IHkgPyBheGlzLnJlY3QueSA6IHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWFyQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciByb3c7XG4gICAgICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICAgICAgdmFyIGRlZmluaXRpb247XG4gICAgICAgICAgICB2YXIgYXhpcztcbiAgICAgICAgICAgIHZhciBhY3R1YWxJbmRleDtcbiAgICAgICAgICAgIHZhciBzcGFuO1xuICAgICAgICAgICAgdmFyIGF4aXNMZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY2hhcnQuYXhpc0NvbGxlY3Rpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBheGlzXzIgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXNfMi5vcmllbnRhdGlvbiA9PT0gJ1ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICBjaGFydC52ZXJ0aWNhbEF4ZXMucHVzaChheGlzXzIpO1xuICAgICAgICAgICAgICAgICAgICBhY3R1YWxJbmRleCA9IHRoaXMuZ2V0QWN0dWFsUm93KGF4aXNfMik7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IGNoYXJ0LnJvd3NbYWN0dWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hBeGlzKHJvdywgYXhpc18yKTtcbiAgICAgICAgICAgICAgICAgICAgc3BhbiA9ICgoYWN0dWFsSW5kZXggKyBheGlzXzIuc3BhbikgPiBjaGFydC5yb3dzLmxlbmd0aCA/IGNoYXJ0LnJvd3MubGVuZ3RoIDogKGFjdHVhbEluZGV4ICsgYXhpc18yLnNwYW4pKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGFjdHVhbEluZGV4ICsgMTsgaiA8IHNwYW47IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbiA9IGNoYXJ0LnJvd3Nbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uLmF4ZXNbcm93LmF4ZXMubGVuZ3RoIC0gMV0gPSBheGlzXzI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydC5yb3dzW2pdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGFydC5yb3dzW2FjdHVhbEluZGV4XSA9IHJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0Lmhvcml6b250YWxBeGVzLnB1c2goYXhpc18yKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsSW5kZXggPSB0aGlzLmdldEFjdHVhbENvbHVtbihheGlzXzIpO1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW4gPSBjaGFydC5jb2x1bW5zW2FjdHVhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoQXhpcyhjb2x1bW4sIGF4aXNfMik7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4gPSAoKGFjdHVhbEluZGV4ICsgYXhpc18yLnNwYW4pID4gY2hhcnQuY29sdW1ucy5sZW5ndGggPyBjaGFydC5jb2x1bW5zLmxlbmd0aCA6IChhY3R1YWxJbmRleCArIGF4aXNfMi5zcGFuKSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBhY3R1YWxJbmRleCArIDE7IGogPCBzcGFuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPSBjaGFydC5jb2x1bW5zW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5heGVzW2NvbHVtbi5heGVzLmxlbmd0aCAtIDFdID0gYXhpc18yO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnQuY29sdW1uc1tqXSA9IGRlZmluaXRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuY29sdW1uc1thY3R1YWxJbmRleF0gPSBjb2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLnB1c2hBeGlzID0gZnVuY3Rpb24gKGRlZmluaXRpb24sIGF4aXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkZWZpbml0aW9uLmF4ZXMubGVuZ3RoOyBpIDw9IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkZWZpbml0aW9uLmF4ZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5heGVzW2ldID0gYXhpcztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmFycmFuZ2VBeGlzID0gZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBheGlzQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRlZmluaXRpb24uYXhlcy5sZW5ndGg7IGkgPD0gbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5heGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXNDb2xsZWN0aW9uLnB1c2goZGVmaW5pdGlvbi5heGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZpbml0aW9uLmF4ZXMgPSBheGlzQ29sbGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5nZXRBY3R1YWxDb2x1bW4gPSBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgdmFyIGFjdHVhbExlbmd0aCA9IHRoaXMuY2hhcnQuY29sdW1ucy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgcG9zID0gYXhpcy5jb2x1bW5JbmRleDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBwb3MgPj0gYWN0dWFsTGVuZ3RoID8gYWN0dWFsTGVuZ3RoIC0gMSA6IChwb3MgPCAwID8gMCA6IHBvcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmdldEFjdHVhbFJvdyA9IGZ1bmN0aW9uIChheGlzKSB7XG4gICAgICAgICAgICB2YXIgYWN0dWFsTGVuZ3RoID0gdGhpcy5jaGFydC5yb3dzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBwb3MgPSBheGlzLnJvd0luZGV4O1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBvcyA+PSBhY3R1YWxMZW5ndGggPyBhY3R1YWxMZW5ndGggLSAxIDogKHBvcyA8IDAgPyAwIDogcG9zKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuY2FsY3VsYXRlUm93U2l6ZSA9IGZ1bmN0aW9uIChyZWN0KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHJvdztcbiAgICAgICAgICAgIHZhciByb3dUb3AgPSByZWN0LnkgKyByZWN0LmhlaWdodDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIHJlbWFpbmluZ0hlaWdodCA9IE1hdGgubWF4KDAsIHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5yb3dzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcm93ID0gY2hhcnQucm93c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmhlaWdodC5pbmRleE9mKCclJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IE1hdGgubWluKHJlbWFpbmluZ0hlaWdodCwgKHJlY3QuaGVpZ2h0ICogcGFyc2VJbnQocm93LmhlaWdodCwgMTApIC8gMTAwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSBNYXRoLm1pbihyZW1haW5pbmdIZWlnaHQsIHBhcnNlSW50KHJvdy5oZWlnaHQsIDEwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlaWdodCA9IChpICE9PSAobGVuIC0gMSkpID8gaGVpZ2h0IDogcmVtYWluaW5nSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHJvdy5jb21wdXRlZEhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICByb3dUb3AgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHJvdy5jb21wdXRlZFRvcCA9IHJvd1RvcDtcbiAgICAgICAgICAgICAgICByZW1haW5pbmdIZWlnaHQgLT0gaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmNhbGN1bGF0ZUNvbHVtblNpemUgPSBmdW5jdGlvbiAocmVjdCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBjb2x1bW47XG4gICAgICAgICAgICB2YXIgY29sdW1uTGVmdCA9IHJlY3QueDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nV2lkdGggPSBNYXRoLm1heCgwLCByZWN0LndpZHRoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5jb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gY2hhcnQuY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLndpZHRoLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLm1pbihyZW1haW5pbmdXaWR0aCwgKHJlY3Qud2lkdGggKiBwYXJzZUludChjb2x1bW4ud2lkdGgsIDEwKSAvIDEwMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLm1pbihyZW1haW5pbmdXaWR0aCwgcGFyc2VJbnQoY29sdW1uLndpZHRoLCAxMCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aWR0aCA9IChpICE9PSAobGVuIC0gMSkpID8gd2lkdGggOiByZW1haW5pbmdXaWR0aDtcbiAgICAgICAgICAgICAgICBjb2x1bW4uY29tcHV0ZWRXaWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIGNvbHVtbi5jb21wdXRlZExlZnQgPSBjb2x1bW5MZWZ0O1xuICAgICAgICAgICAgICAgIGNvbHVtbkxlZnQgKz0gd2lkdGg7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nV2lkdGggLT0gd2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUucmVuZGVyQXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgYXhpcztcbiAgICAgICAgICAgIHZhciBheGlzRWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0NvbGxlY3Rpb24nIH0pO1xuICAgICAgICAgICAgdmFyIGRlZmluaXRpb25FbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogY2hhcnQuZWxlbWVudC5pZCArICdEZWZpbnRpb25MaW5lJyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5heGlzQ29sbGVjdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBheGlzID0gY2hhcnQuYXhpc0NvbGxlY3Rpb25zW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0dyb3VwJyArIGkgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy52aXNpYmxlICYmIGF4aXMubGluZVN0eWxlLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3QXhpc0xpbmUoYXhpcywgaSwgYXhpcy5wbG90T2Zmc2V0LCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy5tYWpvckdyaWRMaW5lcy53aWR0aCA+IDAgfHwgYXhpcy5tYWpvclRpY2tMaW5lcy53aWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1hBeGlzR3JpZExpbmUoYXhpcywgaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WEF4aXNMYWJlbHMoYXhpcywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdYQXhpc1RpdGxlKGF4aXMsIGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy52aXNpYmxlICYmIGF4aXMubGluZVN0eWxlLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3QXhpc0xpbmUoYXhpcywgaSwgMCwgYXhpcy5wbG90T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy5tYWpvckdyaWRMaW5lcy53aWR0aCA+IDAgfHwgYXhpcy5tYWpvclRpY2tMaW5lcy53aWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1lBeGlzR3JpZExpbmUoYXhpcywgaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WUF4aXNMYWJlbHMoYXhpcywgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdZQXhpc1RpdGxlKGF4aXMsIGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF4aXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiBjaGFydC5lbGVtZW50LmlkICsgJ0RlZmludGlvbkxpbmUnIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGNoYXJ0LnJvd3MubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gY2hhcnQucm93c1tqXTtcbiAgICAgICAgICAgICAgICBpZiAocm93LmJvcmRlci5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdCb3R0b21MaW5lKHJvdywgaiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGNoYXJ0LmNvbHVtbnMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gY2hhcnQuY29sdW1uc1tqXTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmJvcmRlci5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdCb3R0b21MaW5lKGNvbHVtbiwgaiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBjaGFydC5zdmdPYmplY3QuYXBwZW5kQ2hpbGQoYXhpc0VsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmRyYXdCb3R0b21MaW5lID0gZnVuY3Rpb24gKGRlZmluaXRpb24sIGluZGV4LCBpc1Jvdykge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBvcHRpb25zTGluZSA9IHt9O1xuICAgICAgICAgICAgdmFyIHgxO1xuICAgICAgICAgICAgdmFyIHgyO1xuICAgICAgICAgICAgdmFyIHkxO1xuICAgICAgICAgICAgdmFyIHkyO1xuICAgICAgICAgICAgdmFyIGRlZmluaXRpb25OYW1lO1xuICAgICAgICAgICAgaWYgKGlzUm93KSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgICAgICAgICAgICAgeTEgPSB5MiA9IGRlZmluaXRpb24uY29tcHV0ZWRUb3AgKyBkZWZpbml0aW9uLmNvbXB1dGVkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHgxID0gdGhpcy5zZXJpZXNDbGlwUmVjdC54O1xuICAgICAgICAgICAgICAgIHgyID0geDEgKyB0aGlzLnNlcmllc0NsaXBSZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb25OYW1lID0gJ1Jvdyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgICB4MSA9IHgyID0gZGVmaW5pdGlvbi5jb21wdXRlZExlZnQ7XG4gICAgICAgICAgICAgICAgeTEgPSB0aGlzLnNlcmllc0NsaXBSZWN0Lnk7XG4gICAgICAgICAgICAgICAgeTIgPSB5MSArIHRoaXMuc2VyaWVzQ2xpcFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb25OYW1lID0gJ0NvbHVtbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zTGluZSA9IHtcbiAgICAgICAgICAgICAgICAnaWQnOiBjaGFydC5lbGVtZW50LmlkICsgJ19BeGlzQm90dG9tXycgKyBkZWZpbml0aW9uTmFtZSArIGluZGV4LFxuICAgICAgICAgICAgICAgIHgxOiB4MSxcbiAgICAgICAgICAgICAgICB5MTogeTEsXG4gICAgICAgICAgICAgICAgeDI6IHgyLFxuICAgICAgICAgICAgICAgIHkyOiB5MixcbiAgICAgICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogZGVmaW5pdGlvbi5ib3JkZXIud2lkdGgsXG4gICAgICAgICAgICAgICAgJ3N0cm9rZSc6IGRlZmluaXRpb24uYm9yZGVyLmNvbG9yLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaHRtbE9iamVjdCA9IGNoYXJ0LnJlbmRlcmVyLmRyYXdMaW5lKG9wdGlvbnNMaW5lKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmh0bWxPYmplY3QpO1xuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmRyYXdBeGlzTGluZSA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCwgcGxvdFgsIHBsb3RZKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIG9wdGlvbnNMaW5lID0ge307XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGF4aXMucmVjdDtcbiAgICAgICAgICAgIG9wdGlvbnNMaW5lID0ge1xuICAgICAgICAgICAgICAgICdpZCc6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0xpbmVfJyArIGluZGV4LFxuICAgICAgICAgICAgICAgIHgxOiByZWN0LnggLSBwbG90WCxcbiAgICAgICAgICAgICAgICB5MTogcmVjdC55IC0gcGxvdFksXG4gICAgICAgICAgICAgICAgeDI6IHJlY3QueCArIHJlY3Qud2lkdGggKyBwbG90WCxcbiAgICAgICAgICAgICAgICB5MjogcmVjdC55ICsgcmVjdC5oZWlnaHQgKyBwbG90WSxcbiAgICAgICAgICAgICAgICAnc3Ryb2tlLWRhc2hhcnJheSc6IGF4aXMubGluZVN0eWxlLmRhc2hBcnJheSxcbiAgICAgICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogYXhpcy5saW5lU3R5bGUud2lkdGgsXG4gICAgICAgICAgICAgICAgJ3N0cm9rZSc6IGF4aXMubGluZVN0eWxlLmNvbG9yXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5odG1sT2JqZWN0ID0gY2hhcnQucmVuZGVyZXIuZHJhd0xpbmUob3B0aW9uc0xpbmUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaHRtbE9iamVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuZHJhd1lBeGlzR3JpZExpbmUgPSBmdW5jdGlvbiAoYXhpcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgdGVtcEludGVydmFsO1xuICAgICAgICAgICAgdmFyIHBvaW50WSA9IDA7XG4gICAgICAgICAgICB2YXIgbWFqb3JHcmlkID0gJyc7XG4gICAgICAgICAgICB2YXIgbWFqb3JUaWNrID0gJyc7XG4gICAgICAgICAgICB2YXIgbWlub3JHaXJkID0gJyc7XG4gICAgICAgICAgICB2YXIgbWlub3JUaWNrID0gJyc7XG4gICAgICAgICAgICB2YXIgbWlub3JEaXJlY3Rpb247XG4gICAgICAgICAgICB2YXIgdGlja1NpemUgPSAoYXhpcy5vcHBvc2VkUG9zaXRpb24pID8gYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgOiAtYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgYXhpc0xpbmVTaXplID0gKGF4aXMub3Bwb3NlZFBvc2l0aW9uKSA/IGF4aXMubGluZVN0eWxlLndpZHRoIC8gMiA6IC1heGlzLmxpbmVTdHlsZS53aWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGF4aXMucmVjdDtcbiAgICAgICAgICAgIHZhciB0aWNrc2J3dExhYmVsID0gKGF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknICYmIGF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnKSA/XG4gICAgICAgICAgICAgICAgMC41IDogMDtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBheGlzLnZpc2libGVMYWJlbHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknICYmIGF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnICYmIGxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ZW1wSW50ZXJ2YWwgPSAhYXhpcy52aXNpYmxlTGFiZWxzW2ldID8gKGF4aXMudmlzaWJsZUxhYmVsc1tpIC0gMV0udmFsdWUgKyBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbCkgLSB0aWNrc2J3dExhYmVsXG4gICAgICAgICAgICAgICAgICAgIDogYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlIC0gdGlja3Nid3RMYWJlbDtcbiAgICAgICAgICAgICAgICBwb2ludFkgPSBoZWxwZXJfMS52YWx1ZVRvQ29lZmZpY2llbnQodGVtcEludGVydmFsLCBheGlzKSAqIHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHBvaW50WSA9IChwb2ludFkgKiAtMSkgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludFkgPj0gcmVjdC55ICYmIChyZWN0LnkgKyByZWN0LmhlaWdodCkgPj0gcG9pbnRZKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaGVscGVyXzEuaW5zaWRlKHRlbXBJbnRlcnZhbCwgYXhpcy52aXNpYmxlUmFuZ2UpKSB8fCB0aGlzLmlzQm9yZGVyKGF4aXMsIGksIHBvaW50WSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ham9yR3JpZCA9IG1ham9yR3JpZC5jb25jYXQoJ00gJyArIHRoaXMuc2VyaWVzQ2xpcFJlY3QueCArICcgJyArIChwb2ludFkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIEwgJyArICh0aGlzLnNlcmllc0NsaXBSZWN0LnggKyB0aGlzLnNlcmllc0NsaXBSZWN0LndpZHRoKSArICcgJyArIHBvaW50WSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFqb3JUaWNrID0gbWFqb3JUaWNrLmNvbmNhdCgnTSAnICsgKHJlY3QueCArIGF4aXNMaW5lU2l6ZSkgKyAnICcgKyBwb2ludFkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBMICcgKyAocmVjdC54ICsgdGlja1NpemUgKyBheGlzTGluZVNpemUpICsgJyAnICsgcG9pbnRZICsgJyAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChheGlzLm1pbm9yR3JpZExpbmVzLndpZHRoID4gMCB8fCBheGlzLm1pbm9yVGlja0xpbmVzLndpZHRoID4gMCkgJiYgYXhpcy5taW5vclRpY2tzUGVySW50ZXJ2YWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yRGlyZWN0aW9uID0gdGhpcy5kcmF3QXhpc01pbm9yTGluZShheGlzLCB0ZW1wSW50ZXJ2YWwsIG1pbm9yR2lyZCwgbWlub3JUaWNrKTtcbiAgICAgICAgICAgICAgICAgICAgbWlub3JHaXJkID0gbWlub3JEaXJlY3Rpb25bMF07XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yVGljayA9IG1pbm9yRGlyZWN0aW9uWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JpZExpbmUoYXhpcywgaW5kZXgsIG1ham9yR3JpZCwgbWlub3JHaXJkKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGlja0xpbmUoYXhpcywgaW5kZXgsIG1ham9yVGljaywgbWlub3JUaWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5pc0JvcmRlciA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gY2hhcnQuY2hhcnRBcmVhLmJvcmRlcjtcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbiA9IGF4aXMub3JpZW50YXRpb247XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAob3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykgPyByZWN0LnggOiByZWN0Lnk7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IChvcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnKSA/IHJlY3Qud2lkdGggOiByZWN0LmhlaWdodDtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gKG9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpID8gMCA6IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gKG9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpID8gYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aCAtIDEgOiAwO1xuICAgICAgICAgICAgaWYgKGF4aXMucGxvdE9mZnNldCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCh2YWx1ZSA9PT0gc3RhcnQgfHwgdmFsdWUgPT09IChzdGFydCArIHNpemUpKSAmJiAoYm9yZGVyLndpZHRoIDw9IDAgfHwgYm9yZGVyLmNvbG9yID09PSAndHJhbnNwYXJlbnQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICE9PSBzdGFydCAmJiBpbmRleCA9PT0gc3RhcnRJbmRleCkgfHwgKHZhbHVlICE9PSAoc3RhcnQgKyBzaXplKSAmJiBpbmRleCA9PT0gZW5kSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuZHJhd1lBeGlzTGFiZWxzID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHBvaW50WCA9IDA7XG4gICAgICAgICAgICB2YXIgcG9pbnRZID0gMDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50U2l6ZTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBheGlzLm1ham9yVGlja0xpbmVzLmhlaWdodCArIHRoaXMucGFkZGluZyArIGF4aXMubGluZVN0eWxlLndpZHRoIC8gMjtcbiAgICAgICAgICAgIHBhZGRpbmcgPSAoYXhpcy5vcHBvc2VkUG9zaXRpb24pID8gcGFkZGluZyA6IC1wYWRkaW5nO1xuICAgICAgICAgICAgdmFyIGFuY2hvciA9IChheGlzLm9wcG9zZWRQb3NpdGlvbikgPyAnc3RhcnQnIDogJ2VuZCc7XG4gICAgICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogY2hhcnQuZWxlbWVudC5pZCArICdBeGlzTGFiZWxzJyArIGluZGV4IH0pO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBheGlzLnJlY3Q7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRYID0gKHJlY3QueCArIHBhZGRpbmcpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRTaXplID0gYXhpcy52aXNpYmxlTGFiZWxzW2ldLnNpemU7XG4gICAgICAgICAgICAgICAgcG9pbnRZID0gaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KGF4aXMudmlzaWJsZUxhYmVsc1tpXS52YWx1ZSwgYXhpcykgKiByZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgICBwb2ludFkgPSBNYXRoLmZsb29yKChwb2ludFkgKiAtMSkgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlRleHRPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArIGluZGV4ICsgJ19BeGlzTGFiZWxfJyArIGksIHBvaW50WCwgcG9pbnRZICsgKGVsZW1lbnRTaXplLmhlaWdodCAvIDQpLCBhbmNob3IsIGF4aXMudmlzaWJsZUxhYmVsc1tpXS50ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5lZGdlTGFiZWxQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChheGlzLmVkZ2VMYWJlbFBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTm9uZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdIaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChpID09PSAwIHx8IChheGlzLmlzSW52ZXJzZWQgJiYgaSA9PT0gbGVuIC0gMSkpICYmIG9wdGlvbnMueSA+IHJlY3QueSArIHJlY3QuaGVpZ2h0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKChpID09PSBsZW4gLSAxKSB8fCAoYXhpcy5pc0ludmVyc2VkICYmIGkgPT09IDApKSAmJiBvcHRpb25zLnkgLSBlbGVtZW50U2l6ZS5oZWlnaHQgLyAyIDwgcmVjdC55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRleHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChpID09PSAwIHx8IChheGlzLmlzSW52ZXJzZWQgJiYgaSA9PT0gbGVuIC0gMSkpICYmIG9wdGlvbnMueSA+IHJlY3QueSArIHJlY3QuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueSA9IHBvaW50WSA9IHJlY3QueSArIHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoKGkgPT09IGxlbiAtIDEpIHx8IChheGlzLmlzSW52ZXJzZWQgJiYgaSA9PT0gMCkpICYmIChvcHRpb25zLnkgLSBlbGVtZW50U2l6ZS5oZWlnaHQgLyAyIDwgcmVjdC55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnkgPSBwb2ludFkgPSByZWN0LnkgKyBlbGVtZW50U2l6ZS5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoZWxwZXJfMy50ZXh0RWxlbWVudChvcHRpb25zLCBheGlzLmxhYmVsU3R5bGUsIGF4aXMubGFiZWxTdHlsZS5jb2xvciwgbGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2hhcnQuZGVsYXlSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGF4aXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlWm9vbWluZ0xhYmVsKHRoaXMuY2hhcnQsIGxhYmVsRWxlbWVudCwgYXhpcywgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmRyYXdZQXhpc1RpdGxlID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIGxhYmVsUm90YXRpb24gPSAoYXhpcy5vcHBvc2VkUG9zaXRpb24pID8gOTAgOiAtOTA7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFNpemUgPSBoZWxwZXJfMS5tZWFzdXJlVGV4dChheGlzLnRpdGxlLCBheGlzLnRpdGxlU3R5bGUpO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBheGlzLm1ham9yVGlja0xpbmVzLmhlaWdodCArIGF4aXMubWF4TGFiZWxTaXplLndpZHRoICsgdGhpcy5wYWRkaW5nICogMjtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgcGFkZGluZyA9IGF4aXMub3Bwb3NlZFBvc2l0aW9uID8gcGFkZGluZyA6IC1wYWRkaW5nO1xuICAgICAgICAgICAgdmFyIHggPSByZWN0LnggKyBwYWRkaW5nO1xuICAgICAgICAgICAgdmFyIHkgPSByZWN0LnkgKyByZWN0LmhlaWdodCAvIDI7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5UZXh0T3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX0F4aXNUaXRsZV8nICsgaW5kZXgsIHgsIHkgLSB0aGlzLnBhZGRpbmcsICdtaWRkbGUnLCBheGlzLnRpdGxlLCAncm90YXRlKCcgKyBsYWJlbFJvdGF0aW9uICsgJywnICsgKHgpICsgJywnICsgKHkpICsgJyknKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gaGVscGVyXzMudGV4dEVsZW1lbnQob3B0aW9ucywgYXhpcy50aXRsZVN0eWxlLCBheGlzLnRpdGxlU3R5bGUuY29sb3IsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGF4aXMuZGVzY3JpcHRpb24gfHwgYXhpcy50aXRsZSk7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCBheGlzLnRhYkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmRyYXdYQXhpc0dyaWRMaW5lID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHRlbXBJbnRlcnZhbDtcbiAgICAgICAgICAgIHZhciBwb2ludFggPSAwO1xuICAgICAgICAgICAgdmFyIG1ham9yR3JpZCA9ICcnO1xuICAgICAgICAgICAgdmFyIG1ham9yVGljayA9ICcnO1xuICAgICAgICAgICAgdmFyIG1pbm9yR2lyZCA9ICcnO1xuICAgICAgICAgICAgdmFyIG1pbm9yVGljayA9ICcnO1xuICAgICAgICAgICAgdmFyIG1pbm9yRGlyZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHRpY2tTaXplID0gKGF4aXMub3Bwb3NlZFBvc2l0aW9uKSA/IC1heGlzLm1ham9yVGlja0xpbmVzLmhlaWdodCA6IGF4aXMubWFqb3JUaWNrTGluZXMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIGF4aXNMaW5lU2l6ZSA9IChheGlzLm9wcG9zZWRQb3NpdGlvbikgPyAtYXhpcy5saW5lU3R5bGUud2lkdGggLyAyIDogYXhpcy5saW5lU3R5bGUud2lkdGggLyAyO1xuICAgICAgICAgICAgdmFyIHRpY2tzYnd0TGFiZWwgPSAoYXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgYXhpcy5sYWJlbFBsYWNlbWVudCA9PT0gJ0JldHdlZW5UaWNrcycpID9cbiAgICAgICAgICAgICAgICAwLjUgOiAwO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBheGlzLnJlY3Q7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChheGlzLnZhbHVlVHlwZSA9PT0gJ0NhdGVnb3J5JyAmJiBsZW5ndGggPiAwICYmIGF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGVtcEludGVydmFsID0gYXhpcy52aXNpYmxlTGFiZWxzW2ldID8gYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlIC0gdGlja3Nid3RMYWJlbFxuICAgICAgICAgICAgICAgICAgICA6IChheGlzLnZpc2libGVMYWJlbHNbaSAtIDFdLnZhbHVlICsgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwpIC0gdGlja3Nid3RMYWJlbDtcbiAgICAgICAgICAgICAgICBwb2ludFggPSAoaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KHRlbXBJbnRlcnZhbCwgYXhpcykgKiByZWN0LndpZHRoKSArIHJlY3QueDtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRYID49IHJlY3QueCAmJiAocmVjdC54ICsgcmVjdC53aWR0aCkgPj0gcG9pbnRYKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWxwZXJfMS5pbnNpZGUodGVtcEludGVydmFsLCBheGlzLnZpc2libGVSYW5nZSkgfHwgdGhpcy5pc0JvcmRlcihheGlzLCBpLCBwb2ludFgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWpvckdyaWQgPSBtYWpvckdyaWQuY29uY2F0KCdNICcgKyBwb2ludFggKyAnICcgKyAodGhpcy5zZXJpZXNDbGlwUmVjdC55ICsgdGhpcy5zZXJpZXNDbGlwUmVjdC5oZWlnaHQpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIEwgJyArIHBvaW50WCArICcgJyArIHRoaXMuc2VyaWVzQ2xpcFJlY3QueSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFqb3JUaWNrID0gbWFqb3JUaWNrLmNvbmNhdCgnTSAnICsgKHBvaW50WCkgKyAnICcgKyAocmVjdC55ICsgYXhpc0xpbmVTaXplKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnIEwgJyArIChwb2ludFgpICsgJyAnICsgKHJlY3QueSArIHRpY2tTaXplICsgYXhpc0xpbmVTaXplKSArICcgJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbCA+IDAgJiYgKGF4aXMubWlub3JHcmlkTGluZXMud2lkdGggPiAwIHx8IGF4aXMubWlub3JUaWNrTGluZXMud2lkdGggPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICBtaW5vckRpcmVjdGlvbiA9IHRoaXMuZHJhd0F4aXNNaW5vckxpbmUoYXhpcywgdGVtcEludGVydmFsLCBtaW5vckdpcmQsIG1pbm9yVGljayk7XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yR2lyZCA9IG1pbm9yRGlyZWN0aW9uWzBdO1xuICAgICAgICAgICAgICAgICAgICBtaW5vclRpY2sgPSBtaW5vckRpcmVjdGlvblsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyaWRMaW5lKGF4aXMsIGluZGV4LCBtYWpvckdyaWQsIG1pbm9yR2lyZCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpY2tMaW5lKGF4aXMsIGluZGV4LCBtYWpvclRpY2ssIG1pbm9yVGljayk7XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuZHJhd0F4aXNNaW5vckxpbmUgPSBmdW5jdGlvbiAoYXhpcywgdGVtcEludGVydmFsLCBtaW5vckdpcmQsIG1pbm9yVGljaykge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGVtcEludGVydmFsO1xuICAgICAgICAgICAgdmFyIGNvb3IgPSAwO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IGF4aXMudmlzaWJsZVJhbmdlO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHRpY2tTaXplID0gYXhpcy5vcHBvc2VkUG9zaXRpb24gPyAtYXhpcy5taW5vclRpY2tMaW5lcy5oZWlnaHQgOiBheGlzLm1pbm9yVGlja0xpbmVzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgdmFyIGxvZ1N0YXJ0O1xuICAgICAgICAgICAgdmFyIGxvZ0VuZDtcbiAgICAgICAgICAgIHZhciBsb2dJbnRlcnZhbCA9IDE7XG4gICAgICAgICAgICB2YXIgbG9nUG9zaXRpb24gPSAxO1xuICAgICAgICAgICAgaWYgKGF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnKSB7XG4gICAgICAgICAgICAgICAgbG9nU3RhcnQgPSBNYXRoLnBvdyhheGlzLmxvZ0Jhc2UsIHZhbHVlIC0gcmFuZ2UuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIGxvZ0VuZCA9IE1hdGgucG93KGF4aXMubG9nQmFzZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGxvZ0ludGVydmFsID0gKGxvZ0VuZCAtIGxvZ1N0YXJ0KSAvIChheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbCArIDEpO1xuICAgICAgICAgICAgICAgIGxvZ1Bvc2l0aW9uID0gbG9nU3RhcnQgKyBsb2dJbnRlcnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGF4aXMubWlub3JUaWNrc1BlckludGVydmFsOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmZpbmRMb2dOdW1lcmljKGF4aXMsIGxvZ1Bvc2l0aW9uLCBsb2dJbnRlcnZhbCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBsb2dQb3NpdGlvbiArPSBsb2dJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLmluc2lkZSh2YWx1ZSwgcmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGguY2VpbCgoKHZhbHVlIC0gcmFuZ2UubWluKSAvIChyYW5nZS5tYXggLSByYW5nZS5taW4pKSAqIHJlY3Qud2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29vciA9IChNYXRoLmZsb29yKHBvc2l0aW9uICsgcmVjdC54KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5vckdpcmQgPSBtaW5vckdpcmQuY29uY2F0KCdNJyArICcgJyArIGNvb3IgKyAnICcgKyAodGhpcy5zZXJpZXNDbGlwUmVjdC55KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJ0wgJyArIGNvb3IgKyAnICcgKyAodGhpcy5zZXJpZXNDbGlwUmVjdC55ICsgdGhpcy5zZXJpZXNDbGlwUmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3IgPSAoTWF0aC5mbG9vcihwb3NpdGlvbiArIHJlY3QueCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlub3JUaWNrID0gbWlub3JUaWNrLmNvbmNhdCgnTScgKyAnICcgKyBjb29yICsgJyAnICsgKHJlY3QueSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICdMICcgKyBjb29yICsgJyAnICsgKHJlY3QueSArIHRpY2tTaXplKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWNrU2l6ZSA9IGF4aXMub3Bwb3NlZFBvc2l0aW9uID8gYXhpcy5taW5vclRpY2tMaW5lcy5oZWlnaHQgOiAtYXhpcy5taW5vclRpY2tMaW5lcy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5maW5kTG9nTnVtZXJpYyhheGlzLCBsb2dQb3NpdGlvbiwgbG9nSW50ZXJ2YWwsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLmluc2lkZSh2YWx1ZSwgcmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGguY2VpbCgoKHZhbHVlIC0gcmFuZ2UubWluKSAvIChyYW5nZS5tYXggLSByYW5nZS5taW4pKSAqIHJlY3QuaGVpZ2h0KSAqIC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29vciA9IChNYXRoLmZsb29yKHBvc2l0aW9uICsgcmVjdC55ICsgcmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbm9yR2lyZCA9IG1pbm9yR2lyZC5jb25jYXQoJ00nICsgJyAnICsgKHRoaXMuc2VyaWVzQ2xpcFJlY3QueCkgKyAnICcgKyBjb29yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnTCAnICsgKHRoaXMuc2VyaWVzQ2xpcFJlY3QueCArIHRoaXMuc2VyaWVzQ2xpcFJlY3Qud2lkdGgpICsgJyAnICsgY29vcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yID0gKE1hdGguZmxvb3IocG9zaXRpb24gKyByZWN0LnkgKyByZWN0LmhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlub3JUaWNrID0gbWlub3JUaWNrLmNvbmNhdCgnTScgKyAnICcgKyByZWN0LnggKyAnICcgKyBjb29yICsgJ0wgJyArIChyZWN0LnggKyB0aWNrU2l6ZSkgKyAnICcgKyBjb29yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dQb3NpdGlvbiArPSBsb2dJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXJlY3Rpb24ucHVzaChtaW5vckdpcmQpO1xuICAgICAgICAgICAgZGlyZWN0aW9uLnB1c2gobWlub3JUaWNrKTtcbiAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb247XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuZmluZExvZ051bWVyaWMgPSBmdW5jdGlvbiAoYXhpcywgbG9nUG9zaXRpb24sIGxvZ0ludGVydmFsLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gYXhpcy52aXNpYmxlUmFuZ2U7XG4gICAgICAgICAgICBpZiAoYXhpcy52YWx1ZVR5cGUgPT09ICdMb2dhcml0aG1pYycpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGhlbHBlcl8yLmxvZ0Jhc2UobG9nUG9zaXRpb24sIGF4aXMubG9nQmFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChheGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJykge1xuICAgICAgICAgICAgICAgIHZhbHVlICs9IGF4aXMuZGF0ZVRpbWVJbnRlcnZhbCAvIChheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gcmFuZ2UuaW50ZXJ2YWwgLyAoYXhpcy5taW5vclRpY2tzUGVySW50ZXJ2YWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5kcmF3WEF4aXNMYWJlbHMgPSBmdW5jdGlvbiAoYXhpcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgcG9pbnRYID0gMDtcbiAgICAgICAgICAgIHZhciBwb2ludFkgPSAwO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRTaXplO1xuICAgICAgICAgICAgdmFyIGxhYmVsRWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0xhYmVscycgKyBpbmRleCB9KTtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyB0aGlzLnBhZGRpbmcgKyBheGlzLmxpbmVTdHlsZS53aWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgbGFiZWxQYWRkaW5nO1xuICAgICAgICAgICAgdmFyIHJvdGF0ZVNpemU7XG4gICAgICAgICAgICB2YXIgZGlmZkhlaWdodDtcbiAgICAgICAgICAgIHZhciB5TG9jYXRpb247XG4gICAgICAgICAgICB2YXIgYW5nbGU7XG4gICAgICAgICAgICB2YXIgYW5nbGVQYWRkaW5nID0gKChheGlzLmFuZ2xlID09PSA5MCB8fCBheGlzLmFuZ2xlID09PSAtOTApKSA/IC0yIDogMDtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNFbmQgPSAwO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbExlbmd0aCA9IGF4aXMucmVjdC53aWR0aCAvIGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgbGFiZWw7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBheGlzLnZpc2libGVMYWJlbHNbaV07XG4gICAgICAgICAgICAgICAgcG9pbnRYID0gKGhlbHBlcl8xLnZhbHVlVG9Db2VmZmljaWVudChsYWJlbC52YWx1ZSwgYXhpcykgKiByZWN0LndpZHRoKSArIHJlY3QueDtcbiAgICAgICAgICAgICAgICBlbGVtZW50U2l6ZSA9IGxhYmVsLnNpemU7XG4gICAgICAgICAgICAgICAgd2lkdGggPSAoKGF4aXMubGFiZWxJbnRlcnNlY3RBY3Rpb24gPT09ICdUcmltJyB8fCBheGlzLmxhYmVsSW50ZXJzZWN0QWN0aW9uID09PSAnV3JhcCcpXG4gICAgICAgICAgICAgICAgICAgICYmIGVsZW1lbnRTaXplLndpZHRoID4gaW50ZXJ2YWxMZW5ndGgpID8gaW50ZXJ2YWxMZW5ndGggOiBlbGVtZW50U2l6ZS53aWR0aDtcbiAgICAgICAgICAgICAgICBwb2ludFggLT0gd2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIGxhYmVsUGFkZGluZyA9IChheGlzLm9wcG9zZWRQb3NpdGlvbikgP1xuICAgICAgICAgICAgICAgICAgICAtKHBhZGRpbmcgKyAoKGF4aXMuYW5nbGUgIT09IDApID8gKDMgKiAoZWxlbWVudFNpemUuaGVpZ2h0IC8gNCkgKyAoMiAqIGF4aXMubWF4TGFiZWxTaXplLmhlaWdodCAvIDUpKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAobGFiZWwuaW5kZXggPiAxID8gKDIgKiAoZWxlbWVudFNpemUuaGVpZ2h0IC8gNCkpIDogMCkpKVxuICAgICAgICAgICAgICAgICAgICA6IHBhZGRpbmcgKyAoKGF4aXMuYW5nbGUgIT09IDApID8gKDMgKiAoZWxlbWVudFNpemUuaGVpZ2h0IC8gNCkpICsgKDIgKiBheGlzLm1heExhYmVsU2l6ZS5oZWlnaHQgLyA1KVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoMyAqIChlbGVtZW50U2l6ZS5oZWlnaHQgLyA0KSkpO1xuICAgICAgICAgICAgICAgIHBvaW50WSA9IChyZWN0LnkgKyAobGFiZWxQYWRkaW5nICogbGFiZWwuaW5kZXgpKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlRleHRPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArIGluZGV4ICsgJ19BeGlzTGFiZWxfJyArIGksIHBvaW50WCwgcG9pbnRZLCAnJywgdGhpcy5maW5kQXhpc0xhYmVsKGF4aXMsIGxhYmVsLnRleHQsIGludGVydmFsTGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuZWRnZUxhYmVsUGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXhpcy5lZGdlTGFiZWxQbGFjZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ05vbmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSGlkZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoaSA9PT0gMCB8fCAoYXhpcy5pc0ludmVyc2VkICYmIGkgPT09IGxlbiAtIDEpKSAmJiBvcHRpb25zLnggPCByZWN0LngpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaSA9PT0gbGVuIC0gMSB8fCAoYXhpcy5pc0ludmVyc2VkICYmIGkgPT09IDApKSAmJiAob3B0aW9ucy54ICsgd2lkdGggPiByZWN0LnggKyByZWN0LndpZHRoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2hpZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoaSA9PT0gMCB8fCAoYXhpcy5pc0ludmVyc2VkICYmIGkgPT09IGxlbiAtIDEpKSAmJiBvcHRpb25zLnggPCByZWN0LngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy54ID0gcG9pbnRYID0gcmVjdC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoaSA9PT0gbGVuIC0gMSB8fCAoYXhpcy5pc0ludmVyc2VkICYmIGkgPT09IDApKSAmJiAoKG9wdGlvbnMueCArIHdpZHRoKSA+IHJlY3QueCArIHJlY3Qud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMueCA9IHBvaW50WCA9IHJlY3QueCArIHJlY3Qud2lkdGggLSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuYW5nbGUgJSAzNjAgPT09IDAgJiYgYXhpcy5sYWJlbEludGVyc2VjdEFjdGlvbiA9PT0gJ0hpZGUnICYmIGkgIT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFheGlzLmlzSW52ZXJzZWQgPyBvcHRpb25zLnggPD0gcHJldmlvdXNFbmQgOiBvcHRpb25zLnggKyB3aWR0aCA+PSBwcmV2aW91c0VuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZpb3VzRW5kID0gYXhpcy5pc0ludmVyc2VkID8gb3B0aW9ucy54IDogb3B0aW9ucy54ICsgd2lkdGg7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMuYW5nbGUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSAoYXhpcy5hbmdsZSA+IDM2MCkgPyBheGlzLmFuZ2xlICUgMzYwIDogYXhpcy5hbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlU2l6ZSA9IGhlbHBlcl8yLnJvdGF0ZVRleHRTaXplKGF4aXMubGFiZWxTdHlsZSwgbGFiZWwudGV4dCwgYW5nbGUsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgZGlmZkhlaWdodCA9IGF4aXMubWF4TGFiZWxTaXplLmhlaWdodCAtIE1hdGguY2VpbChyb3RhdGVTaXplLmhlaWdodCAtIGVsZW1lbnRTaXplLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIHlMb2NhdGlvbiA9IGF4aXMub3Bwb3NlZFBvc2l0aW9uID8gZGlmZkhlaWdodCAvIDIgOiAtZGlmZkhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgYW5nbGUgKyAnLCcgKyAocG9pbnRYICsgd2lkdGggLyAyICsgYW5nbGVQYWRkaW5nKSArICcsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAocG9pbnRZICsgeUxvY2F0aW9uKSArICcpJztcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy55ICs9IHlMb2NhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVscGVyXzMudGV4dEVsZW1lbnQob3B0aW9ucywgYXhpcy5sYWJlbFN0eWxlLCBheGlzLmxhYmVsU3R5bGUuY29sb3IsIGxhYmVsRWxlbWVudCwgYXhpcy5vcHBvc2VkUG9zaXRpb24pLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnY3Vyc29yOiBkZWZhdWx0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNoYXJ0LmRlbGF5UmVkcmF3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGxhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChheGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVpvb21pbmdMYWJlbCh0aGlzLmNoYXJ0LCBsYWJlbEVsZW1lbnQsIGF4aXMsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5maW5kQXhpc0xhYmVsID0gZnVuY3Rpb24gKGF4aXMsIGxhYmVsLCB3aWR0aCkge1xuICAgICAgICAgICAgc3dpdGNoIChheGlzLmxhYmVsSW50ZXJzZWN0QWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnVHJpbSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoZWxwZXJfMy50ZXh0VHJpbSh3aWR0aCwgbGFiZWwsIGF4aXMubGFiZWxTdHlsZSk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLmRyYXdYQXhpc1RpdGxlID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQoYXhpcy50aXRsZSwgYXhpcy50aXRsZVN0eWxlKTtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyBheGlzLm1heExhYmVsU2l6ZS5oZWlnaHQgKyB0aGlzLnBhZGRpbmcgKiAyO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBheGlzLnJlY3Q7XG4gICAgICAgICAgICBwYWRkaW5nID0gYXhpcy5vcHBvc2VkUG9zaXRpb24gPyAtKHBhZGRpbmcgKyBlbGVtZW50U2l6ZS5oZWlnaHQgLyA0KSA6IChwYWRkaW5nICsgKDMgKiBlbGVtZW50U2l6ZS5oZWlnaHQgLyA0KSk7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5UZXh0T3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX0F4aXNUaXRsZV8nICsgaW5kZXgsIHJlY3QueCArIHJlY3Qud2lkdGggLyAyLCByZWN0LnkgKyBwYWRkaW5nLCAnbWlkZGxlJywgYXhpcy50aXRsZSk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGhlbHBlcl8zLnRleHRFbGVtZW50KG9wdGlvbnMsIGF4aXMudGl0bGVTdHlsZSwgYXhpcy50aXRsZVN0eWxlLmNvbG9yLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBheGlzLmRlc2NyaXB0aW9uIHx8IGF4aXMudGl0bGUpO1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgYXhpcy50YWJJbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsLnByb3RvdHlwZS5yZW5kZXJUaWNrTGluZSA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCwgbWFqb3JUaWNrLCBtaW5vclRpY2spIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChheGlzLm1ham9yVGlja0xpbmVzLndpZHRoID4gMCAmJiBheGlzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArICdfTWFqb3JUaWNrTGluZV8nICsgaW5kZXgsICd0cmFuc3BhcmVudCcsIGF4aXMubWFqb3JUaWNrTGluZXMud2lkdGgsIGF4aXMubWFqb3JUaWNrTGluZXMuY29sb3IsIG51bGwsIG51bGwsIG1ham9yVGljayk7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sT2JqZWN0ID0gY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaHRtbE9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXhpcy5taW5vclRpY2tMaW5lcy53aWR0aCA+IDAgJiYgYXhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMi5QYXRoT3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX01pbm9yVGlja0xpbmVfJyArIGluZGV4LCAndHJhbnNwYXJlbnQnLCBheGlzLm1pbm9yVGlja0xpbmVzLndpZHRoLCBheGlzLm1pbm9yVGlja0xpbmVzLmNvbG9yLCBudWxsLCBudWxsLCBtaW5vclRpY2spO1xuICAgICAgICAgICAgICAgIHRoaXMuaHRtbE9iamVjdCA9IGNoYXJ0LnJlbmRlcmVyLmRyYXdQYXRoKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmh0bWxPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwucHJvdG90eXBlLnJlbmRlckdyaWRMaW5lID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4LCBtYWpvckdyaWQsIG1pbm9yR2lyZCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgaWYgKGF4aXMubWFqb3JHcmlkTGluZXMud2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMi5QYXRoT3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX01ham9yR3JpZExpbmVfJyArIGluZGV4LCAndHJhbnNwYXJlbnQnLCBheGlzLm1ham9yR3JpZExpbmVzLndpZHRoLCBheGlzLm1ham9yR3JpZExpbmVzLmNvbG9yLCBudWxsLCBheGlzLm1ham9yR3JpZExpbmVzLmRhc2hBcnJheSwgbWFqb3JHcmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxPYmplY3QgPSBjaGFydC5yZW5kZXJlci5kcmF3UGF0aChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5odG1sT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm1pbm9yR3JpZExpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgaGVscGVyXzIuUGF0aE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgJ19NaW5vckdyaWRMaW5lXycgKyBpbmRleCwgJ3RyYW5zcGFyZW50JywgYXhpcy5taW5vckdyaWRMaW5lcy53aWR0aCwgYXhpcy5taW5vckdyaWRMaW5lcy5jb2xvciwgbnVsbCwgYXhpcy5taW5vckdyaWRMaW5lcy5kYXNoQXJyYXksIG1pbm9yR2lyZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5odG1sT2JqZWN0ID0gY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaHRtbE9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENhcnRlc2lhbkF4aXNMYXlvdXRQYW5lbC5wcm90b3R5cGUuY3JlYXRlWm9vbWluZ0xhYmVsID0gZnVuY3Rpb24gKGNoYXJ0LCBsYWJlbEVsZW1lbnQsIGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0dyb3VwJyArIGluZGV4KTtcbiAgICAgICAgICAgIGxhYmVsRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCAnMC4zJyk7XG4gICAgICAgICAgICB2YXIgem9vbUVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0xhYmVsc19ab29tJyArIGluZGV4XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHpvb21FbGVtZW50ID0gaGVscGVyXzIuY3JlYXRlWm9vbWluZ0xhYmVscyhjaGFydCwgYXhpcywgem9vbUVsZW1lbnQsIGluZGV4LCBheGlzLm9yaWVudGF0aW9uID09PSAnVmVydGljYWwnKTtcbiAgICAgICAgICAgIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGxhYmVsRWxlbWVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGFiZWxFbGVtZW50LmlkKSk7XG4gICAgICAgICAgICBpZiAoaGVscGVyXzIuZ2V0RWxlbWVudChjaGFydC5lbGVtZW50LmlkICsgJ0F4aXNMYWJlbHNfWm9vbScgKyBpbmRleCkpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh6b29tRWxlbWVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoem9vbUVsZW1lbnQuaWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoem9vbUVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2FydGVzaWFuQXhpc0xheW91dFBhbmVsO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5DYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWwgPSBDYXJ0ZXNpYW5BeGlzTGF5b3V0UGFuZWw7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L2F4aXMvY2FydGVzaWFuLXBhbmVsLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9iYXNlXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGhlbHBlcl8xLCBoZWxwZXJfMiwgYmFzZV8xLCBjb25zdGFudHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUG9pbnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gUG9pbnRzKCkge1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xMb2NhdGlvbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZWdpb25zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVnaW9uRGF0YSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBvaW50cztcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuUG9pbnRzID0gUG9pbnRzO1xuICAgIHZhciBEYXRhTGFiZWxTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhEYXRhTGFiZWxTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRGF0YUxhYmVsU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERhdGFMYWJlbFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcInZpc2libGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIERhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJuYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ3RyYW5zcGFyZW50JylcbiAgICBdLCBEYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwiZmlsbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcIm9wYWNpdHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQXV0bycpXG4gICAgXSwgRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNSlcbiAgICBdLCBEYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwicnhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg1KVxuICAgIF0sIERhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJyeVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdDZW50ZXInKVxuICAgIF0sIERhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGlnbm1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgd2lkdGg6IG51bGwsIGNvbG9yOiBudWxsIH0sIGJhc2VfMS5Cb3JkZXIpXG4gICAgXSwgRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBsZWZ0OiA1LCByaWdodDogNSwgdG9wOiA1LCBib3R0b206IDUgfSwgYmFzZV8xLk1hcmdpbilcbiAgICBdLCBEYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwibWFyZ2luXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IHNpemU6ICcxMXB4JywgY29sb3I6IG51bGwgfSwgYmFzZV8xLkZvbnQpXG4gICAgXSwgRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcImZvbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIERhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuRGF0YUxhYmVsU2V0dGluZ3MgPSBEYXRhTGFiZWxTZXR0aW5ncztcbiAgICB2YXIgTWFya2VyU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTWFya2VyU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE1hcmtlclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXJrZXJTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIE1hcmtlclNldHRpbmdzLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0NpcmNsZScpXG4gICAgXSwgTWFya2VyU2V0dGluZ3MucHJvdG90eXBlLCBcInNoYXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgTWFya2VyU2V0dGluZ3MucHJvdG90eXBlLCBcImltYWdlVXJsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNSlcbiAgICBdLCBNYXJrZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoNSlcbiAgICBdLCBNYXJrZXJTZXR0aW5ncy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgd2lkdGg6IDIsIGNvbG9yOiBudWxsIH0sIGJhc2VfMS5Cb3JkZXIpXG4gICAgXSwgTWFya2VyU2V0dGluZ3MucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgTWFya2VyU2V0dGluZ3MucHJvdG90eXBlLCBcImZpbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIE1hcmtlclNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGFjaXR5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7fSwgRGF0YUxhYmVsU2V0dGluZ3MpXG4gICAgXSwgTWFya2VyU2V0dGluZ3MucHJvdG90eXBlLCBcImRhdGFMYWJlbFwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuTWFya2VyU2V0dGluZ3MgPSBNYXJrZXJTZXR0aW5ncztcbiAgICB2YXIgVHJlbmRsaW5lID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRyZW5kbGluZSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVHJlbmRsaW5lKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jbGlwUmVjdCA9IG5ldyBoZWxwZXJfMi5SZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRyZW5kbGluZS5wcm90b3R5cGUuc2V0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChzZXJpZXMsIGNoYXJ0KSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHMgPSBzZXJpZXMucG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHR5cGUgPSBoZWxwZXJfMi5maXJzdFRvTG93ZXJDYXNlKHRoaXMudHlwZSk7XG4gICAgICAgICAgICBjaGFydC50cmVuZExpbmVNb2R1bGUuaW5pdERhdGFTb3VyY2UodGhpcywgY2hhcnQpO1xuICAgICAgICAgICAgY2hhcnQudmlzaWJsZVNlcmllc0NvdW50Kys7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBUcmVuZGxpbmU7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTGluZWFyJylcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcInR5cGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgyKVxuICAgIF0sIFRyZW5kbGluZS5wcm90b3R5cGUsIFwicGVyaW9kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMilcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcInBvbHlub21pYWxPcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgVHJlbmRsaW5lLnByb3RvdHlwZSwgXCJiYWNrd2FyZEZvcmVjYXN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcImZvcndhcmRGb3JlY2FzdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIGJhc2VfMS5BbmltYXRpb24pXG4gICAgXSwgVHJlbmRsaW5lLnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBNYXJrZXJTZXR0aW5ncylcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcIm1hcmtlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgVHJlbmRsaW5lLnByb3RvdHlwZSwgXCJlbmFibGVUb29sdGlwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcImludGVyY2VwdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFRyZW5kbGluZS5wcm90b3R5cGUsIFwiZmlsbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgVHJlbmRsaW5lLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTZXJpZXNUeXBlJylcbiAgICBdLCBUcmVuZGxpbmUucHJvdG90eXBlLCBcImxlZ2VuZFNoYXBlXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UcmVuZGxpbmUgPSBUcmVuZGxpbmU7XG4gICAgdmFyIEVycm9yQmFyQ2FwU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoRXJyb3JCYXJDYXBTZXR0aW5ncywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRXJyb3JCYXJDYXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRXJyb3JCYXJDYXBTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgRXJyb3JCYXJDYXBTZXR0aW5ncy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxMClcbiAgICBdLCBFcnJvckJhckNhcFNldHRpbmdzLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYmxhY2snKVxuICAgIF0sIEVycm9yQmFyQ2FwU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBFcnJvckJhckNhcFNldHRpbmdzLnByb3RvdHlwZSwgXCJvcGFjaXR5XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5FcnJvckJhckNhcFNldHRpbmdzID0gRXJyb3JCYXJDYXBTZXR0aW5ncztcbiAgICB2YXIgRXJyb3JCYXJTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFcnJvckJhclNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBFcnJvckJhclNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBFcnJvckJhclNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgRXJyb3JCYXJTZXR0aW5ncy5wcm90b3R5cGUsIFwidmlzaWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdGaXhlZCcpXG4gICAgXSwgRXJyb3JCYXJTZXR0aW5ncy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdCb3RoJylcbiAgICBdLCBFcnJvckJhclNldHRpbmdzLnByb3RvdHlwZSwgXCJkaXJlY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnVmVydGljYWwnKVxuICAgIF0sIEVycm9yQmFyU2V0dGluZ3MucHJvdG90eXBlLCBcIm1vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnYmxhY2snKVxuICAgIF0sIEVycm9yQmFyU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBFcnJvckJhclNldHRpbmdzLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbEVycm9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBFcnJvckJhclNldHRpbmdzLnByb3RvdHlwZSwgXCJ3aWR0aFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgRXJyb3JCYXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaG9yaXpvbnRhbEVycm9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMylcbiAgICBdLCBFcnJvckJhclNldHRpbmdzLnByb3RvdHlwZSwgXCJ2ZXJ0aWNhbFBvc2l0aXZlRXJyb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgzKVxuICAgIF0sIEVycm9yQmFyU2V0dGluZ3MucHJvdG90eXBlLCBcInZlcnRpY2FsTmVnYXRpdmVFcnJvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgRXJyb3JCYXJTZXR0aW5ncy5wcm90b3R5cGUsIFwiaG9yaXpvbnRhbFBvc2l0aXZlRXJyb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIEVycm9yQmFyU2V0dGluZ3MucHJvdG90eXBlLCBcImhvcml6b250YWxOZWdhdGl2ZUVycm9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleChudWxsLCBFcnJvckJhckNhcFNldHRpbmdzKVxuICAgIF0sIEVycm9yQmFyU2V0dGluZ3MucHJvdG90eXBlLCBcImVycm9yQmFyQ2FwXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5FcnJvckJhclNldHRpbmdzID0gRXJyb3JCYXJTZXR0aW5ncztcbiAgICB2YXIgU2VyaWVzQmFzZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZXJpZXNCYXNlLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZXJpZXNCYXNlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmNsaXBSZWN0ID0gbmV3IGhlbHBlcl8yLlJlY3QoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICBfdGhpcy5zZXJpZXNUeXBlID0gJ1hZJztcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTZXJpZXNCYXNlLnByb3RvdHlwZS5wcm9jZXNzSnNvbkRhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICB2YXIgbGVuID0gT2JqZWN0LmtleXModGhpcy5jdXJyZW50Vmlld0RhdGEpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBQb2ludHMoKTtcbiAgICAgICAgICAgIHZhciB0ZXh0TWFwcGluZ05hbWUgPSB0aGlzIGluc3RhbmNlb2YgU2VyaWVzID8gdGhpcy5tYXJrZXIuZGF0YUxhYmVsLm5hbWUgOiAnJztcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgU2VyaWVzICYmIHRoaXMudHlwZSA9PT0gJ1dhdGVyZmFsbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0W2hlbHBlcl8yLmZpcnN0VG9Mb3dlckNhc2UodGhpcy50eXBlKSArICdTZXJpZXNNb2R1bGUnXS5cbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1dhdGVyZmFsbERhdGEodGhpcy5jdXJyZW50Vmlld0RhdGEsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMueE1pbiA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy54TWF4ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy55TWluID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnlNYXggPSAtSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnNpemVNYXggPSAtSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLmdldFNlcmllc1R5cGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnhBeGlzLnZhbHVlVHlwZSA9PT0gJ0NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gdGhpcy5kYXRhUG9pbnQoaSwgdGV4dE1hcHBpbmdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoQ2F0ZWdvcnlEYXRhKHBvaW50LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoRGF0YShwb2ludCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW1wdHlQb2ludChwb2ludCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnhBeGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJykge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIHNrZWxldG9uOiAnZnVsbCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYXRlVGltZSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBkYXRlUGFyc2VyID0gdGhpcy5jaGFydC5pbnRsLmdldERhdGVQYXJzZXIob3B0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZUZvcm1hdHRlciA9IHRoaXMuY2hhcnQuaW50bC5nZXREYXRlRm9ybWF0KG9wdGlvbik7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLmRhdGFQb2ludChpLCB0ZXh0TWFwcGluZ05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC54VmFsdWUgPSBEYXRlLnBhcnNlKGRhdGVQYXJzZXIoZGF0ZUZvcm1hdHRlcihwb2ludC54KSkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hEYXRhKHBvaW50LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRFbXB0eVBvaW50KHBvaW50LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gdGhpcy5kYXRhUG9pbnQoaSwgdGV4dE1hcHBpbmdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQueFZhbHVlID0gcG9pbnQueDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoRGF0YShwb2ludCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RW1wdHlQb2ludChwb2ludCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFNlcmllcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdTcGxpbmUnIHx8IHRoaXMuZHJhd1R5cGUgPT09ICdTcGxpbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQuc3BsaW5lU2VyaWVzTW9kdWxlLmZpbmRTcGxpbmVQb2ludCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLnB1c2hEYXRhID0gZnVuY3Rpb24gKHBvaW50LCBpKSB7XG4gICAgICAgICAgICBwb2ludC5pbmRleCA9IGk7XG4gICAgICAgICAgICBwb2ludC55VmFsdWUgPSBwb2ludC55O1xuICAgICAgICAgICAgdGhpcy54TWluID0gTWF0aC5taW4odGhpcy54TWluLCBwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgdGhpcy54TWF4ID0gTWF0aC5tYXgodGhpcy54TWF4LCBwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgdGhpcy54RGF0YS5wdXNoKHBvaW50LnhWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLmRhdGFQb2ludCA9IGZ1bmN0aW9uIChpLCB0ZXh0TWFwcGluZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBwb2ludDtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzW2ldID0gbmV3IFBvaW50cygpO1xuICAgICAgICAgICAgcG9pbnQgPSB0aGlzLnBvaW50c1tpXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Vmlld0RhdGEgPSB0aGlzLmN1cnJlbnRWaWV3RGF0YTtcbiAgICAgICAgICAgIHBvaW50LnggPSBjdXJyZW50Vmlld0RhdGFbaV1bdGhpcy54TmFtZV07XG4gICAgICAgICAgICBwb2ludC5oaWdoID0gY3VycmVudFZpZXdEYXRhW2ldW3RoaXMuaGlnaF07XG4gICAgICAgICAgICBwb2ludC5sb3cgPSBjdXJyZW50Vmlld0RhdGFbaV1bdGhpcy5sb3ddO1xuICAgICAgICAgICAgcG9pbnQub3BlbiA9IGN1cnJlbnRWaWV3RGF0YVtpXVt0aGlzLm9wZW5dO1xuICAgICAgICAgICAgcG9pbnQuY2xvc2UgPSBjdXJyZW50Vmlld0RhdGFbaV1bdGhpcy5jbG9zZV07XG4gICAgICAgICAgICBwb2ludC52b2x1bWUgPSBjdXJyZW50Vmlld0RhdGFbaV1bdGhpcy52b2x1bWVdO1xuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBwb2ludC55ID0gY3VycmVudFZpZXdEYXRhW2ldW3RoaXMueU5hbWVdO1xuICAgICAgICAgICAgICAgIHBvaW50LnNpemUgPSBjdXJyZW50Vmlld0RhdGFbaV1bdGhpcy5zaXplXTtcbiAgICAgICAgICAgICAgICBwb2ludC50ZXh0ID0gY3VycmVudFZpZXdEYXRhW2ldW3RleHRNYXBwaW5nTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLnNldEVtcHR5UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5maW5kVmlzaWJpbGl0eShwb2ludCkpIHtcbiAgICAgICAgICAgICAgICBwb2ludC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50LmlzRW1wdHkgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG1vZGUgPSB0aGlzIGluc3RhbmNlb2YgU2VyaWVzID8gdGhpcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSA6ICdEcm9wJztcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1plcm8nOlxuICAgICAgICAgICAgICAgICAgICBwb2ludC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMgJiYgdGhpcy5zZXJpZXNUeXBlLmluZGV4T2YoJ0hpZ2hMb3cnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5oaWdoID0gcG9pbnQubG93ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcmllc1R5cGUuaW5kZXhPZignSGlnaExvd09wZW5DbG9zZScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5vcGVuID0gcG9pbnQuY2xvc2UgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQueSA9IHBvaW50LnlWYWx1ZSA9IHRoaXMueURhdGFbaV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0F2ZXJhZ2UnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFNlcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VyaWVzVHlwZS5pbmRleE9mKCdIaWdoTG93JykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LmhpZ2ggPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LmhpZ2gpID8gdGhpcy5nZXRBdmVyYWdlKHRoaXMuaGlnaCwgaSkgOiBwb2ludC5oaWdoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LmxvdyA9IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9pbnQubG93KSA/IHRoaXMuZ2V0QXZlcmFnZSh0aGlzLmxvdywgaSkgOiBwb2ludC5sb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VyaWVzVHlwZS5pbmRleE9mKCdIaWdoTG93T3BlbkNsb3NlJykgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5vcGVuID0gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb2ludC5vcGVuKSA/IHRoaXMuZ2V0QXZlcmFnZSh0aGlzLm9wZW4sIGkpIDogcG9pbnQub3BlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQuY2xvc2UgPSBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LmNsb3NlKSA/IHRoaXMuZ2V0QXZlcmFnZSh0aGlzLmNsb3NlLCBpKSA6IHBvaW50LmNsb3NlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LnkgPSBwb2ludC55VmFsdWUgPSB0aGlzLnlEYXRhW2ldID0gdGhpcy5nZXRBdmVyYWdlKHRoaXMueU5hbWUsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdEcm9wJzpcbiAgICAgICAgICAgICAgICBjYXNlICdHYXAnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnlEYXRhW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzQmFzZS5wcm90b3R5cGUuZmluZFZpc2liaWxpdHkgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcyBpbnN0YW5jZW9mIFNlcmllcyA/IHRoaXMuc2VyaWVzVHlwZSA6ICdIaWdoTG93T3BlbkNsb3NlJztcbiAgICAgICAgICAgIHZhciB5VmFsdWVzO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnWFknOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFhZTWluTWF4KHBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueURhdGEucHVzaChwb2ludC55VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFNlcmllcyAmJiB0aGlzLnR5cGUgPT09ICdCdWJibGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemVNYXggPSBNYXRoLm1heCh0aGlzLnNpemVNYXgsIHBvaW50LnNpemUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LngpIHx8IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9pbnQueSk7XG4gICAgICAgICAgICAgICAgY2FzZSAnSGlnaExvdyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGlsb01pbk1heChwb2ludC5oaWdoLCBwb2ludC5sb3cpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb2ludC54KSB8fCBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LmxvdykgfHwgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb2ludC5oaWdoKTtcbiAgICAgICAgICAgICAgICBjYXNlICdIaWdoTG93T3BlbkNsb3NlJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRIaWxvTWluTWF4KHBvaW50LmhpZ2gsIHBvaW50Lmxvdyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LngpIHx8IGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9pbnQubG93KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb2ludC5vcGVuKSB8fCBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LmNsb3NlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChwb2ludC5oaWdoKTtcbiAgICAgICAgICAgICAgICBjYXNlICdCb3hQbG90JzpcbiAgICAgICAgICAgICAgICAgICAgeVZhbHVlcyA9IChwb2ludC55IHx8IFtudWxsXSkuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgLSBiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQueSA9IHlWYWx1ZXM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueU1pbiA9IE1hdGgubWluKHRoaXMueU1pbiwgTWF0aC5taW4uYXBwbHkoTWF0aCwgeVZhbHVlcykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnlNYXggPSBNYXRoLm1heCh0aGlzLnlNYXgsIE1hdGgubWF4LmFwcGx5KE1hdGgsIHlWYWx1ZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF5VmFsdWVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzQmFzZS5wcm90b3R5cGUuc2V0WFlNaW5NYXggPSBmdW5jdGlvbiAoeVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnlNaW4gPSBNYXRoLm1pbih0aGlzLnlNaW4sIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoeVZhbHVlKSA/IHRoaXMueU1pbiA6IHlWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnlNYXggPSBNYXRoLm1heCh0aGlzLnlNYXgsIGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQoeVZhbHVlKSA/IHRoaXMueU1heCA6IHlWYWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLnNldEhpbG9NaW5NYXggPSBmdW5jdGlvbiAoaGlnaCwgbG93KSB7XG4gICAgICAgICAgICB0aGlzLnlNaW4gPSBNYXRoLm1pbih0aGlzLnlNaW4sIE1hdGgubWluKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQobG93KSA/IHRoaXMueU1pbiA6IGxvdywgZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChoaWdoKSA/IHRoaXMueU1pbiA6IGhpZ2gpKTtcbiAgICAgICAgICAgIHRoaXMueU1heCA9IE1hdGgubWF4KHRoaXMueU1heCwgTWF0aC5tYXgoZWoyX2Jhc2VfMi5pc051bGxPclVuZGVmaW5lZChsb3cpID8gdGhpcy55TWF4IDogbG93LCBlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGhpZ2gpID8gdGhpcy55TWF4IDogaGlnaCkpO1xuICAgICAgICB9O1xuICAgICAgICBTZXJpZXNCYXNlLnByb3RvdHlwZS5nZXRTZXJpZXNUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIFNlcmllcykge1xuICAgICAgICAgICAgICAgIHZhciBzZXJpZXNUeXBlID0gdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyB0aGlzLmRyYXdUeXBlIDogdGhpcy50eXBlO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXNUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc2VyaWVzVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmFuZ2VDb2x1bW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmFuZ2VBcmVhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0hpbG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnSGlnaExvdyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdIaWxvT3BlbkNsb3NlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NhbmRsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9ICdIaWdoTG93T3BlbkNsb3NlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0JveEFuZFdoaXNrZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnQm94UGxvdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnWFknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXJpZXNUeXBlID0gdHlwZTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzQmFzZS5wcm90b3R5cGUucHVzaENhdGVnb3J5RGF0YSA9IGZ1bmN0aW9uIChwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy54QXhpcy5pc0luZGV4ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy54QXhpcy5sYWJlbHMuaW5kZXhPZihwb2ludC54KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54QXhpcy5sYWJlbHMucHVzaChwb2ludC54KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9pbnQueFZhbHVlID0gdGhpcy54QXhpcy5sYWJlbHMuaW5kZXhPZihwb2ludC54KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMueEF4aXMubGFiZWxzW2luZGV4XSA/IHRoaXMueEF4aXMubGFiZWxzW2luZGV4XSArPSAnLCAnICsgcG9pbnQueCA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMueEF4aXMubGFiZWxzLnB1c2gocG9pbnQueCk7XG4gICAgICAgICAgICAgICAgcG9pbnQueFZhbHVlID0gaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLmdldEF2ZXJhZ2UgPSBmdW5jdGlvbiAobWVtYmVyLCBpLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7IGRhdGEgPSB0aGlzLmN1cnJlbnRWaWV3RGF0YTsgfVxuICAgICAgICAgICAgdmFyIHByZXZpb3VzID0gZGF0YVtpIC0gMV0gPyAoZGF0YVtpIC0gMV1bbWVtYmVyXSB8fCAwKSA6IDA7XG4gICAgICAgICAgICB2YXIgbmV4dCA9IGRhdGFbaSArIDFdID8gKGRhdGFbaSArIDFdW21lbWJlcl0gfHwgMCkgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIChwcmV2aW91cyArIG5leHQpIC8gMjtcbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzQmFzZS5wcm90b3R5cGUucmVmcmVzaERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5xdWVyeSkgJiYgIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5kYXRhU291cmNlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKHsgcmVzdWx0OiB0aGlzLmRhdGFTb3VyY2UsIGNvdW50OiB0aGlzLmRhdGFTb3VyY2UubGVuZ3RoIH0sIGNoYXJ0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGFNYW5hZ2VyID0gdGhpcy5kYXRhTW9kdWxlLmdldERhdGEodGhpcy5kYXRhTW9kdWxlLmdlbmVyYXRlUXVlcnkoKS5yZXF1aXJlc0NvdW50KCkpO1xuICAgICAgICAgICAgZGF0YU1hbmFnZXIudGhlbihmdW5jdGlvbiAoZSkgeyByZXR1cm4gX3RoaXMuZGF0YU1hbmFnZXJTdWNjZXNzKGUsIGNoYXJ0KTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllc0Jhc2UucHJvdG90eXBlLmRhdGFNYW5hZ2VyU3VjY2VzcyA9IGZ1bmN0aW9uIChlLCBjaGFydCwgaXNSZW1vdGVEYXRhKSB7XG4gICAgICAgICAgICBpZiAoaXNSZW1vdGVEYXRhID09PSB2b2lkIDApIHsgaXNSZW1vdGVEYXRhID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Vmlld0RhdGEgPSBlLnJlc3VsdCAhPT0gJycgPyBlLnJlc3VsdCA6IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGNvbnN0YW50c18xLnNlcmllc1JlbmRlciwgc2VyaWVzOiB0aGlzLCBkYXRhOiB0aGlzLmN1cnJlbnRWaWV3RGF0YSwgZmlsbDogdGhpcy5pbnRlcmlvclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnNlcmllc1JlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJpb3IgPSBhcmdzRGF0YS5maWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZpZXdEYXRhID0gYXJnc0RhdGEuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0pzb25EYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnJlY29yZHNDb3VudCA9IGUuY291bnQ7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDaGFydChpc1JlbW90ZURhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBTZXJpZXNCYXNlLnByb3RvdHlwZS5yZWZyZXNoQ2hhcnQgPSBmdW5jdGlvbiAoaXNSZW1vdGVEYXRhKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjaGFydC52aXNpYmxlU2VyaWVzQ291bnQgKz0gaXNSZW1vdGVEYXRhID8gMSA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFydC5yZWZyZXNoVGVjaG5pY2FsSW5kaWNhdG9yKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMgJiYgdGhpcy5jYXRlZ29yeSAhPT0gJ1RyZW5kTGluZScpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy50cmVuZGxpbmVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJlbmRsaW5lID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0cmVuZGxpbmUuc2V0RGF0YVNvdXJjZSh0aGlzLCBjaGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYXJ0LnZpc2libGVTZXJpZXMubGVuZ3RoID09PSAoY2hhcnQudmlzaWJsZVNlcmllc0NvdW50KSkge1xuICAgICAgICAgICAgICAgIGNoYXJ0LnJlZnJlc2hCb3VuZCgpO1xuICAgICAgICAgICAgICAgIGNoYXJ0LnRyaWdnZXIoJ2xvYWRlZCcsIHsgY2hhcnQ6IGNoYXJ0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjaGFydC52aXNpYmxlU2VyaWVzQ291bnQgKz0gaXNSZW1vdGVEYXRhID8gMCA6IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZXJpZXNCYXNlO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgU2VyaWVzQmFzZS5wcm90b3R5cGUsIFwieE5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBTZXJpZXNCYXNlLnByb3RvdHlwZSwgXCJoaWdoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgU2VyaWVzQmFzZS5wcm90b3R5cGUsIFwibG93XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgU2VyaWVzQmFzZS5wcm90b3R5cGUsIFwib3BlblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcImNsb3NlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgU2VyaWVzQmFzZS5wcm90b3R5cGUsIFwidm9sdW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBTZXJpZXNCYXNlLnByb3RvdHlwZSwgXCJ4QXhpc05hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcInlBeGlzTmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgobnVsbCwgYmFzZV8xLkFuaW1hdGlvbilcbiAgICBdLCBTZXJpZXNCYXNlLnByb3RvdHlwZSwgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcImZpbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgxKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcIndpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzAnKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcImRhc2hBcnJheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFNlcmllc0Jhc2UucHJvdG90eXBlLCBcImRhdGFTb3VyY2VcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgU2VyaWVzQmFzZS5wcm90b3R5cGUsIFwicXVlcnlcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLlNlcmllc0Jhc2UgPSBTZXJpZXNCYXNlO1xuICAgIHZhciBTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU2VyaWVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTZXJpZXMocGFyZW50LCBwcm9wTmFtZSwgZGVmYXVsdFZhbHVlLCBpc0FycmF5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQsIHByb3BOYW1lLCBkZWZhdWx0VmFsdWUsIGlzQXJyYXkpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy52aXNpYmxlU2VyaWVzQ291bnQgPSAwO1xuICAgICAgICAgICAgX3RoaXMuY2F0ZWdvcnkgPSAnU2VyaWVzJztcbiAgICAgICAgICAgIF90aGlzLmlzUmVjdFNlcmllcyA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMuZHJhd1BvaW50cyA9IFtdO1xuICAgICAgICAgICAgX3RoaXMuZGVsYXllZEFuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUucmVmcmVzaEF4aXNMYWJlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnhBeGlzLnZhbHVlVHlwZSAhPT0gJ0NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy54QXhpcy5sYWJlbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnhBeGlzLnNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ueE1pbiA9IEluZmluaXR5O1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnhNYXggPSAtSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSBpdGVtLnBvaW50czsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ucHVzaENhdGVnb3J5RGF0YShwb2ludCwgcG9pbnQuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS54TWluID0gTWF0aC5taW4oaXRlbS54TWluLCBwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS54TWF4ID0gTWF0aC5tYXgoaXRlbS54TWF4LCBwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZXJpZXMucHJvdG90eXBlLmZpbmRTZXJpZXNDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGNvbHVtbiwgcm93LCBpc1N0YWNrKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJvdy5heGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dBeGlzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSByb3dBeGlzLnNlcmllczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd1NlcmllcyA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IGNvbHVtbi5heGVzOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF4aXMgPSBfZVtfZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfZiA9IDAsIF9nID0gYXhpcy5zZXJpZXM7IF9mIDwgX2cubGVuZ3RoOyBfZisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9nW19mXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzID09PSByb3dTZXJpZXMgJiYgc2VyaWVzLnZpc2libGUgJiYgdGhpcy5yZWN0U2VyaWVzSW5DaGFydChzZXJpZXMsIGlzU3RhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0NvbGxlY3Rpb24ucHVzaChzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXJpZXNDb2xsZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBTZXJpZXMucHJvdG90eXBlLnJlY3RTZXJpZXNJbkNoYXJ0ID0gZnVuY3Rpb24gKHNlcmllcywgaXNTdGFjaykge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSAoc2VyaWVzLnR5cGUpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gKHR5cGUuaW5kZXhPZignY29sdW1uJykgIT09IC0xIHx8IHR5cGUuaW5kZXhPZignYmFyJykgIT09IC0xIHx8XG4gICAgICAgICAgICAgICAgdHlwZS5pbmRleE9mKCdoaWxvb3BlbmNsb3NlJykgIT09IC0xIHx8IHR5cGUuaW5kZXhPZignY2FuZGxlJykgIT09IC0xIHx8XG4gICAgICAgICAgICAgICAgdHlwZS5pbmRleE9mKCdoaWxvJykgIT09IC0xIHx8IHNlcmllcy5kcmF3VHlwZS5pbmRleE9mKCdDb2x1bW4nKSAhPT0gLTEgfHxcbiAgICAgICAgICAgICAgICB0eXBlLmluZGV4T2YoJ3dhdGVyZmFsbCcpICE9PSAtMSB8fCB0eXBlLmluZGV4T2YoJ2JveGFuZHdoaXNrZXInKSAhPT0gLTEgfHwgaXNTdGFjayk7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUuY2FsY3VsYXRlU3RhY2tlZFZhbHVlID0gZnVuY3Rpb24gKGlzU3RhY2tpbmcxMDApIHtcbiAgICAgICAgICAgIHZhciBheGlzU2VyaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY2hhcnQuY29sdW1uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uSXRlbSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5jaGFydC5yb3dzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9jW19iXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVTdGFja2luZ1ZhbHVlcyh0aGlzLmZpbmRTZXJpZXNDb2xsZWN0aW9uKGNvbHVtbkl0ZW0sIGl0ZW0sIHRydWUpLCBpc1N0YWNraW5nMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUuY2FsY3VsYXRlU3RhY2tpbmdWYWx1ZXMgPSBmdW5jdGlvbiAoc2VyaWVzQ29sbGVjdGlvbiwgaXNTdGFja2luZzEwMCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0VmFsdWVzO1xuICAgICAgICAgICAgdmFyIGVuZFZhbHVlcztcbiAgICAgICAgICAgIHZhciB5VmFsdWVzID0gW107XG4gICAgICAgICAgICB2YXIgbGFzdFBvc2l0aXZlID0gW107XG4gICAgICAgICAgICB2YXIgbGFzdE5lZ2F0aXZlID0gW107XG4gICAgICAgICAgICB2YXIgc3RhY2tpbmdHcm91cDtcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgZnJlcXVlbmNpZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChpc1N0YWNraW5nMTAwKSB7XG4gICAgICAgICAgICAgICAgZnJlcXVlbmNpZXMgPSB0aGlzLmZpbmRGcmVxdWVuY2llcyhzZXJpZXNDb2xsZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc2VyaWVzQ29sbGVjdGlvbl8xID0gc2VyaWVzQ29sbGVjdGlvbjsgX2kgPCBzZXJpZXNDb2xsZWN0aW9uXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IHNlcmllc0NvbGxlY3Rpb25fMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHNlcmllcy50eXBlLmluZGV4T2YoJ1N0YWNraW5nJykgIT09IC0xIHx8IChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignU3RhY2tpbmcnKSAhPT0gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgKHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicpKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFja2luZ0dyb3VwID0gKHNlcmllcy50eXBlLmluZGV4T2YoJ1N0YWNraW5nQXJlYScpICE9PSAtMSkgPyAnU3RhY2tpbmdBcmVhMTAwJyA6IHNlcmllcy5zdGFja2luZ0dyb3VwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxhc3RQb3NpdGl2ZVtzdGFja2luZ0dyb3VwXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvc2l0aXZlW3N0YWNraW5nR3JvdXBdID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmVnYXRpdmVbc3RhY2tpbmdHcm91cF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB5VmFsdWVzID0gc2VyaWVzLnlEYXRhO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIHBvaW50c0xlbmd0aCA9IHNlcmllcy5wb2ludHMubGVuZ3RoOyBqIDwgcG9pbnRzTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHlWYWx1ZXNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFBvc2l0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvc2l0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdE5lZ2F0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5lZ2F0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdGFja2luZzEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgLyBmcmVxdWVuY2llc1tzdGFja2luZ0dyb3VwXVtzZXJpZXMucG9pbnRzW2pdLnhWYWx1ZV0gKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAhaXNOYU4odmFsdWUpID8gdmFsdWUgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb2ludHNbal0ucGVyY2VudCA9IHZhbHVlLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGxhc3RQb3NpdGl2ZVtzdGFja2luZ0dyb3VwXVtzZXJpZXMucG9pbnRzW2pdLnhWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvc2l0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSArPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGxhc3ROZWdhdGl2ZVtzdGFja2luZ0dyb3VwXVtzZXJpZXMucG9pbnRzW2pdLnhWYWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5lZ2F0aXZlW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSArPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VmFsdWVzLnB1c2gobGFzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlcy5wdXNoKHZhbHVlICsgbGFzdFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N0YWNraW5nMTAwICYmIChlbmRWYWx1ZXNbal0gPiAxMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWVzW2pdID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5zdGFja2VkVmFsdWVzID0gbmV3IGhlbHBlcl8xLlN0YWNrVmFsdWVzKHN0YXJ0VmFsdWVzLCBlbmRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMueU1pbiA9IE1hdGgubWluLmFwcGx5KDAsIHN0YXJ0VmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnlNYXggPSBNYXRoLm1heC5hcHBseSgwLCBlbmRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnlNaW4gPiBNYXRoLm1pbi5hcHBseSgwLCBlbmRWYWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMueU1pbiA9IChpc1N0YWNraW5nMTAwKSA/IC0xMDAgOiBNYXRoLm1pbi5hcHBseSgwLCBlbmRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMueU1heCA8IE1hdGgubWF4LmFwcGx5KDAsIHN0YXJ0VmFsdWVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnlNYXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZXJpZXMucHJvdG90eXBlLmZpbmRGcmVxdWVuY2llcyA9IGZ1bmN0aW9uIChzZXJpZXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZnJlcXVlbmNpZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdGFja2luZ0dyb3VwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzZXJpZXNDb2xsZWN0aW9uXzIgPSBzZXJpZXNDb2xsZWN0aW9uOyBfaSA8IHNlcmllc0NvbGxlY3Rpb25fMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gc2VyaWVzQ29sbGVjdGlvbl8yW19pXTtcbiAgICAgICAgICAgICAgICBzZXJpZXMueUF4aXMuaXNTdGFjazEwMCA9IHNlcmllcy50eXBlLmluZGV4T2YoJzEwMCcpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnR5cGUuaW5kZXhPZignU3RhY2tpbmcnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2tpbmdHcm91cCA9IChzZXJpZXMudHlwZS5pbmRleE9mKCdTdGFja2luZ0FyZWEnKSAhPT0gLTEpID8gJ1N0YWNraW5nQXJlYTEwMCcgOiBzZXJpZXMuc3RhY2tpbmdHcm91cDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmcmVxdWVuY2llc1tzdGFja2luZ0dyb3VwXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmNpZXNbc3RhY2tpbmdHcm91cF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgcG9pbnRzTGVuZ3RoID0gc2VyaWVzLnBvaW50cy5sZW5ndGg7IGogPCBwb2ludHNMZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyZXF1ZW5jaWVzW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmNpZXNbc3RhY2tpbmdHcm91cF1bc2VyaWVzLnBvaW50c1tqXS54VmFsdWVdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMueURhdGFbal0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlcXVlbmNpZXNbc3RhY2tpbmdHcm91cF1bc2VyaWVzLnBvaW50c1tqXS54VmFsdWVdICs9IHNlcmllcy55RGF0YVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyZXF1ZW5jaWVzW3N0YWNraW5nR3JvdXBdW3Nlcmllcy5wb2ludHNbal0ueFZhbHVlXSAtPSBzZXJpZXMueURhdGFbal07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZnJlcXVlbmNpZXM7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUubG9nV2l0aEluID0gZnVuY3Rpb24gKHZhbHVlLCBheGlzKSB7XG4gICAgICAgICAgICBpZiAoYXhpcy52YWx1ZVR5cGUgPT09ICdMb2dhcml0aG1pYycpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGhlbHBlcl8yLmxvZ0Jhc2UodmFsdWUsIGF4aXMubG9nQmFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBTZXJpZXMucHJvdG90eXBlLnJlbmRlclNlcmllcyA9IGZ1bmN0aW9uIChjaGFydCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXNUeXBlID0gaGVscGVyXzIuZmlyc3RUb0xvd2VyQ2FzZSh0aGlzLnR5cGUpO1xuICAgICAgICAgICAgaWYgKHNlcmllc1R5cGUuaW5kZXhPZignMTAwJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzVHlwZSA9IHNlcmllc1R5cGUucmVwbGFjZSgnMTAwJywgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYXJ0W3Nlcmllc1R5cGUgKyAnU2VyaWVzTW9kdWxlJ10pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYXRlZ29yeSAhPT0gJ0luZGljYXRvcicgJiYgdGhpcy5jYXRlZ29yeSAhPT0gJ1RyZW5kTGluZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVTZXJpZXNFbGVtZW50cyhjaGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYXJ0W3Nlcmllc1R5cGUgKyAnU2VyaWVzTW9kdWxlJ10ucmVuZGVyKHRoaXMsIHRoaXMueEF4aXMsIHRoaXMueUF4aXMsIGNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhdGVnb3J5ICE9PSAnSW5kaWNhdG9yJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lcnJvckJhci52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LmVycm9yQmFyTW9kdWxlLnJlbmRlcih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXJrZXIuZGF0YUxhYmVsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LmRhdGFMYWJlbE1vZHVsZS5yZW5kZXIodGhpcywgdGhpcy5jaGFydCwgdGhpcy5tYXJrZXIuZGF0YUxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFNlcmllc0VsZW1lbnQoY2hhcnQuc2VyaWVzRWxlbWVudHMsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtQW5pbWF0aW9uKGNoYXJ0LCBzZXJpZXNUeXBlLCB0aGlzLmVycm9yQmFyLCB0aGlzLm1hcmtlciwgdGhpcy5tYXJrZXIuZGF0YUxhYmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzLnByb3RvdHlwZS5jcmVhdGVTZXJpZXNFbGVtZW50cyA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2F0ZWdvcnkgIT09ICdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRJZCA9IGNoYXJ0LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICAgICAgdmFyIHhBeGlzUmVjdCA9IHRoaXMueEF4aXMucmVjdDtcbiAgICAgICAgICAgICAgICB2YXIgZXhwbG9kZVZhbHVlID0gdGhpcy5tYXJrZXIuYm9yZGVyLndpZHRoICsgOCArIDU7XG4gICAgICAgICAgICAgICAgdmFyIHlBeGlzUmVjdCA9IHRoaXMueUF4aXMucmVjdDtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gdGhpcy5tYXJrZXI7XG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlciA9IGNoYXJ0LnJlbmRlcmVyO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckhlaWdodCA9ICh0aGlzLnR5cGUgPT09ICdTY2F0dGVyJykgPyAodGhpcy5tYXJrZXIuaGVpZ2h0ICsgZXhwbG9kZVZhbHVlKSAvIDIgOiAwO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJXaWR0aCA9ICh0aGlzLnR5cGUgPT09ICdTY2F0dGVyJykgPyAodGhpcy5tYXJrZXIud2lkdGggKyBleHBsb2RlVmFsdWUpIC8gMiA6IDA7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBSZWN0RWxlbWVudCA9IHJlbmRlci5kcmF3Q2lyY3VsYXJDbGlwUGF0aChuZXcgaGVscGVyXzIuQ2lyY2xlT3B0aW9uKGVsZW1lbnRJZCArICdfQ2hhcnRTZXJpZXNDbGlwUmVjdF8nICsgaW5kZXgsICd0cmFuc3BhcmVudCcsIHsgd2lkdGg6IDEsIGNvbG9yOiAnR3JheScgfSwgMSwgdGhpcy5jbGlwUmVjdC53aWR0aCAvIDIgKyB0aGlzLmNsaXBSZWN0LngsIHRoaXMuY2xpcFJlY3QuaGVpZ2h0IC8gMiArIHRoaXMuY2xpcFJlY3QueSwgY2hhcnQucmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBSZWN0RWxlbWVudCA9IHJlbmRlci5kcmF3Q2xpcFBhdGgobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24oZWxlbWVudElkICsgJ19DaGFydFNlcmllc0NsaXBSZWN0XycgKyBpbmRleCwgJ3RyYW5zcGFyZW50JywgeyB3aWR0aDogMSwgY29sb3I6ICdHcmF5JyB9LCAxLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAtbWFya2VyV2lkdGgsIHk6IC1tYXJrZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5jbGlwUmVjdC53aWR0aCArIG1hcmtlcldpZHRoICogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5jbGlwUmVjdC5oZWlnaHQgKyBtYXJrZXJIZWlnaHQgKiAyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSBjaGFydC5jaGFydEFyZWFUeXBlID09PSAnQ2FydGVzaWFuJyA/ICd0cmFuc2xhdGUoJyArIHRoaXMuY2xpcFJlY3QueCArICcsJyArICh0aGlzLmNsaXBSZWN0LnkpICsgJyknIDogJyc7XG4gICAgICAgICAgICAgICAgdGhpcy5zeW1ib2xFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcmllc0VsZW1lbnQgPSByZW5kZXIuY3JlYXRlR3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiBlbGVtZW50SWQgKyAnU2VyaWVzR3JvdXAnICsgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiB0cmFuc2Zvcm0sXG4gICAgICAgICAgICAgICAgICAgICdjbGlwLXBhdGgnOiAndXJsKCMnICsgZWxlbWVudElkICsgJ19DaGFydFNlcmllc0NsaXBSZWN0XycgKyBpbmRleCArICcpJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWVzRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNsaXBSZWN0RWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUuYXBwZW5kU2VyaWVzRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBjaGFydCkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMubWFya2VyO1xuICAgICAgICAgICAgdmFyIGRhdGFMYWJlbCA9IG1hcmtlci5kYXRhTGFiZWw7XG4gICAgICAgICAgICBpZiAodGhpcy5jYXRlZ29yeSAhPT0gJ1RyZW5kTGluZScpIHtcbiAgICAgICAgICAgICAgICBjaGFydC5zZXJpZXNFbGVtZW50cy5hcHBlbmRDaGlsZCh0aGlzLnNlcmllc0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBlcnJvckJhciA9IHRoaXMuZXJyb3JCYXI7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yQmFyLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnQuc2VyaWVzRWxlbWVudHMuYXBwZW5kQ2hpbGQodGhpcy5zZXJpZXNFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LnNlcmllc0VsZW1lbnRzLmFwcGVuZENoaWxkKHRoaXMuZXJyb3JCYXJFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnU2NhdHRlcicgfHwgdGhpcy50eXBlID09PSAnQnViYmxlJykge1xuICAgICAgICAgICAgICAgICAgICBjaGFydC5zZXJpZXNFbGVtZW50cy5hcHBlbmRDaGlsZCh0aGlzLnNlcmllc0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXJrZXIudmlzaWJsZSAmJiAoKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nICYmICghdGhpcy5pc1JlY3RTZXJpZXMgfHwgdGhpcy50eXBlID09PSAnQm94QW5kV2hpc2tlcicpKVxuICAgICAgICAgICAgICAgIHx8ICgodGhpcy5kcmF3VHlwZSAhPT0gJ1NjYXR0ZXInICYmICF0aGlzLmlzUmVjdFNlcmllcykgJiYgY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInKSkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgIT09ICdTY2F0dGVyJyAmJiB0aGlzLnR5cGUgIT09ICdCdWJibGUnKSB7XG4gICAgICAgICAgICAgICAgY2hhcnQuc2VyaWVzRWxlbWVudHMuYXBwZW5kQ2hpbGQodGhpcy5zeW1ib2xFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhTGFiZWwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNoYXJ0LmRhdGFMYWJlbEVsZW1lbnRzLmFwcGVuZENoaWxkKHRoaXMuc2hhcGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBjaGFydC5kYXRhTGFiZWxFbGVtZW50cy5hcHBlbmRDaGlsZCh0aGlzLnRleHRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VyaWVzLnByb3RvdHlwZS5wZXJmb3JtQW5pbWF0aW9uID0gZnVuY3Rpb24gKGNoYXJ0LCB0eXBlLCBlcnJvckJhciwgbWFya2VyLCBkYXRhTGFiZWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbi5lbmFibGUgJiYgY2hhcnQuYW5pbWF0ZVNlcmllcykge1xuICAgICAgICAgICAgICAgIGNoYXJ0W3R5cGUgKyAnU2VyaWVzTW9kdWxlJ10uZG9BbmltYXRpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yQmFyLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuZXJyb3JCYXJNb2R1bGUuZG9FcnJvckJhckFuaW1hdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlci52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0Lm1hcmtlclJlbmRlci5kb01hcmtlckFuaW1hdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFMYWJlbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LmRhdGFMYWJlbE1vZHVsZS5kb0RhdGFMYWJlbEFuaW1hdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUuc2V0UG9pbnRDb2xvciA9IGZ1bmN0aW9uIChwb2ludCwgY29sb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBwb2ludC5pc0VtcHR5ID8gKHRoaXMuZW1wdHlQb2ludFNldHRpbmdzLmZpbGwgfHwgY29sb3IpIDogY29sb3I7XG4gICAgICAgIH07XG4gICAgICAgIFNlcmllcy5wcm90b3R5cGUuc2V0Qm9yZGVyQ29sb3IgPSBmdW5jdGlvbiAocG9pbnQsIGJvcmRlcikge1xuICAgICAgICAgICAgYm9yZGVyLndpZHRoID0gcG9pbnQuaXNFbXB0eSA/ICh0aGlzLmVtcHR5UG9pbnRTZXR0aW5ncy5ib3JkZXIud2lkdGggfHwgYm9yZGVyLndpZHRoKSA6IGJvcmRlci53aWR0aDtcbiAgICAgICAgICAgIGJvcmRlci5jb2xvciA9IHBvaW50LmlzRW1wdHkgPyAodGhpcy5lbXB0eVBvaW50U2V0dGluZ3MuYm9yZGVyLmNvbG9yIHx8IGJvcmRlci5jb2xvcikgOiBib3JkZXIuY29sb3I7XG4gICAgICAgICAgICByZXR1cm4gYm9yZGVyO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU2VyaWVzO1xuICAgIH0oU2VyaWVzQmFzZSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwieU5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTGluZScpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJkcmF3VHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJpc0Nsb3NlZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcjMmVjZDcxJylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImJlYXJGaWxsQ29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnI2U3NGMzZCcpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJidWxsRmlsbENvbG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJlbmFibGVTb2xpZENhbmRsZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInNpemVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnJylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInN0YWNraW5nR3JvdXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwidmlzaWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJ3RyYW5zcGFyZW50Jywgd2lkdGg6IDAgfSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDEpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJvcGFjaXR5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0xpbmUnKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgobnVsbCwgRXJyb3JCYXJTZXR0aW5ncylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImVycm9yQmFyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleChudWxsLCBNYXJrZXJTZXR0aW5ncylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcIm1hcmtlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbGxlY3Rpb24oW10sIFRyZW5kbGluZSlcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInRyZW5kbGluZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwiZW5hYmxlVG9vbHRpcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTZXJpZXNUeXBlJylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImxlZ2VuZFNoYXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInNlbGVjdGlvblN0eWxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcIm1pblJhZGl1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDMpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJtYXhSYWRpdXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTmF0dXJhbCcpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJzcGxpbmVUeXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMC41KVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwiY2FyZGluYWxTcGxpbmVUZW5zaW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleChudWxsLCBiYXNlXzEuRW1wdHlQb2ludFNldHRpbmdzKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwiZW1wdHlQb2ludFNldHRpbmdzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInNob3dNZWFuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ05vcm1hbCcpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJib3hQbG90TW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDAuNylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImNvbHVtbldpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImNvbHVtblNwYWNpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnI0M2NEU0QScpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJuZWdhdGl2ZUZpbGxDb2xvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcjNEU4MUJDJylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcInN1bW1hcnlGaWxsQ29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgpXG4gICAgXSwgU2VyaWVzLnByb3RvdHlwZSwgXCJpbnRlcm1lZGlhdGVTdW1JbmRleGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoKVxuICAgIF0sIFNlcmllcy5wcm90b3R5cGUsIFwic3VtSW5kZXhlc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJ2JsYWNrJywgd2lkdGg6IDIgfSwgYmFzZV8xLkNvbm5lY3RvcilcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImNvbm5lY3RvclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgobnVsbCwgYmFzZV8xLkNvcm5lclJhZGl1cylcbiAgICBdLCBTZXJpZXMucHJvdG90eXBlLCBcImNvcm5lclJhZGl1c1wiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuU2VyaWVzID0gU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvY2hhcnQtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItZGF0YVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9kYXRhXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhKGRhdGFTb3VyY2UsIHF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLmluaXREYXRhTWFuYWdlcihkYXRhU291cmNlLCBxdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgRGF0YS5wcm90b3R5cGUuaW5pdERhdGFNYW5hZ2VyID0gZnVuY3Rpb24gKGRhdGFTb3VyY2UsIHF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyID0gZGF0YVNvdXJjZSBpbnN0YW5jZW9mIGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIgPyBkYXRhU291cmNlIDogbmV3IGVqMl9kYXRhXzEuRGF0YU1hbmFnZXIoZGF0YVNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnkgaW5zdGFuY2VvZiBlajJfZGF0YV8xLlF1ZXJ5ID8gcXVlcnkgOiBuZXcgZWoyX2RhdGFfMS5RdWVyeSgpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeS5jbG9uZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5O1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFuYWdlci5leGVjdXRlUXVlcnkocXVlcnkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRGF0YTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0YSA9IERhdGE7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9tb2RlbC9kYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTZfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkBzeW5jZnVzaW9uL2VqMi1kYXRhXCJcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuL21hcmtlci1leHBsb2RlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBoZWxwZXJfMiwgZWoyX2Jhc2VfMSwgY29uc3RhbnRzXzEsIG1hcmtlcl9leHBsb2RlXzEsIGhlbHBlcl8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBNYXJrZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTWFya2VyLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNYXJrZXIoY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNoYXJ0KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIE1hcmtlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRWxlbWVudChzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSAmJiBwb2ludC5zeW1ib2xMb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKGxvY2F0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyTWFya2VyKHNlcmllcywgcG9pbnQsIGxvY2F0aW9uLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgX2xvb3BfMShwb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1hcmtlci5wcm90b3R5cGUucmVuZGVyTWFya2VyID0gZnVuY3Rpb24gKHNlcmllcywgcG9pbnQsIGxvY2F0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIHNlcmllc0luZGV4ID0gc2VyaWVzLmluZGV4O1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHNlcmllcy5tYXJrZXI7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0ge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBtYXJrZXIuYm9yZGVyLmNvbG9yLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBtYXJrZXIuYm9yZGVyLndpZHRoXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHNoYXBlID0gbWFya2VyLnNoYXBlO1xuICAgICAgICAgICAgdmFyIGJvcmRlckNvbG9yID0gbWFya2VyLmJvcmRlci5jb2xvcjtcbiAgICAgICAgICAgIHZhciBzeW1ib2xJZDtcbiAgICAgICAgICAgIHZhciBzaGFwZU9wdGlvbjtcbiAgICAgICAgICAgIHZhciBpc0JveFBsb3QgPSBzZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInO1xuICAgICAgICAgICAgdmFyIGZpbGwgPSBtYXJrZXIuZmlsbCB8fCAoaXNCb3hQbG90ID8gc2VyaWVzLmludGVyaW9yIDogJyNmZmZmZmYnKTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gaXNCb3hQbG90ID9cbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5maW5kbEVsZW1lbnQoc2VyaWVzLnNlcmllc0VsZW1lbnQuY2hpbGROb2RlcywgJ1Nlcmllc18nICsgc2VyaWVzLmluZGV4ICsgJ19Qb2ludF8nICsgcG9pbnQuaW5kZXgpXG4gICAgICAgICAgICAgICAgOiBzZXJpZXMuc3ltYm9sRWxlbWVudDtcbiAgICAgICAgICAgIGJvcmRlci5jb2xvciA9IGJvcmRlckNvbG9yIHx8IHNlcmllcy5pbnRlcmlvcjtcbiAgICAgICAgICAgIHN5bWJvbElkID0gdGhpcy5lbGVtZW50SWQgKyAnX1Nlcmllc18nICsgc2VyaWVzSW5kZXggKyAnX1BvaW50XycgKyBwb2ludC5pbmRleCArICdfU3ltYm9sJyArXG4gICAgICAgICAgICAgICAgKGluZGV4ID8gaW5kZXggOiAnJyk7XG4gICAgICAgICAgICBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS5wb2ludFJlbmRlciwgc2VyaWVzOiBzZXJpZXMsIHBvaW50OiBwb2ludCwgZmlsbDogc2VyaWVzLnNldFBvaW50Q29sb3IocG9pbnQsIGZpbGwpLFxuICAgICAgICAgICAgICAgIGJvcmRlcjoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoYm9yZGVyQ29sb3IpICYmIGJvcmRlckNvbG9yICE9PSAndHJhbnNwYXJlbnQnKSA/IGJvcmRlckNvbG9yIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMy5nZXRTYXR1cmF0aW9uQ29sb3IoZmlsbCwgLTAuNilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYm9yZGVyLmNvbG9yLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogYm9yZGVyLndpZHRoXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG1hcmtlci5oZWlnaHQsXG4gICAgICAgICAgICAgICAgd2lkdGg6IG1hcmtlci53aWR0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFyZ3NEYXRhLmJvcmRlciA9IHNlcmllcy5zZXRCb3JkZXJDb2xvcihwb2ludCwgeyB3aWR0aDogYXJnc0RhdGEuYm9yZGVyLndpZHRoLCBjb2xvcjogYXJnc0RhdGEuYm9yZGVyLmNvbG9yIH0pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnBvaW50UmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBwb2ludC5jb2xvciA9IGFyZ3NEYXRhLmZpbGw7XG4gICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIHZhciB5ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ1JhbmdlQXJlYScpIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IGluZGV4ID8gcG9pbnQubG93IDogcG9pbnQuaGlnaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNCb3hQbG90KSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSBwb2ludC5vdXRsaWVyc1tpbmRleF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5ID0gcG9pbnQueTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hhcGVPcHRpb24gPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihzeW1ib2xJZCwgYXJnc0RhdGEuZmlsbCwgYXJnc0RhdGEuYm9yZGVyLndpZHRoLCBhcmdzRGF0YS5ib3JkZXIuY29sb3IsIG1hcmtlci5vcGFjaXR5LCBudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHBhcmVudEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChoZWxwZXJfMS5kcmF3U3ltYm9sKGxvY2F0aW9uLCBzaGFwZSwgbmV3IGhlbHBlcl8xLlNpemUoYXJnc0RhdGEud2lkdGgsIGFyZ3NEYXRhLmhlaWdodCksIG1hcmtlci5pbWFnZVVybCwgc2hhcGVPcHRpb24sIHBvaW50LngudG9TdHJpbmcoKSArICc6JyArIHkudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWFya2VyLnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIG1hcmtlckNsaXBSZWN0O1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHNlcmllcy5tYXJrZXI7XG4gICAgICAgICAgICB2YXIgZXhwbG9kZVZhbHVlID0gbWFya2VyLmJvcmRlci53aWR0aCArIDggKyA1O1xuICAgICAgICAgICAgdmFyIHJlbmRlciA9IHNlcmllcy5jaGFydC5yZW5kZXJlcjtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm07XG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBzZXJpZXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ0NhcnRlc2lhbicgPyAndHJhbnNsYXRlKCcgKyBzZXJpZXMuY2xpcFJlY3QueCArICcsJyArIChzZXJpZXMuY2xpcFJlY3QueSkgKyAnKScgOiAnJztcbiAgICAgICAgICAgIGlmIChtYXJrZXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJIZWlnaHQgPSAobWFya2VyLmhlaWdodCArIGV4cGxvZGVWYWx1ZSkgLyAyO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJXaWR0aCA9IChtYXJrZXIud2lkdGggKyBleHBsb2RlVmFsdWUpIC8gMjtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNsaXBSZWN0ID0gcmVuZGVyLmRyYXdDbGlwUGF0aChuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfQ2hhcnRNYXJrZXJDbGlwUmVjdF8nICsgc2VyaWVzLmluZGV4LCAndHJhbnNwYXJlbnQnLCB7IHdpZHRoOiAxLCBjb2xvcjogJ0dyYXknIH0sIDEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IC1tYXJrZXJXaWR0aCwgeTogLW1hcmtlckhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzZXJpZXMuY2xpcFJlY3Qud2lkdGggKyBtYXJrZXJXaWR0aCAqIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNlcmllcy5jbGlwUmVjdC5oZWlnaHQgKyBtYXJrZXJIZWlnaHQgKiAyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckNsaXBSZWN0ID0gcmVuZGVyLmRyYXdDaXJjdWxhckNsaXBQYXRoKG5ldyBoZWxwZXJfMS5DaXJjbGVPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX0NoYXJ0TWFya2VyQ2xpcFJlY3RfJyArIHNlcmllcy5pbmRleCwgJ3RyYW5zcGFyZW50JywgeyB3aWR0aDogMSwgY29sb3I6ICdHcmF5JyB9LCAxLCBzZXJpZXMuY2xpcFJlY3Qud2lkdGggLyAyICsgc2VyaWVzLmNsaXBSZWN0LngsIHNlcmllcy5jbGlwUmVjdC5oZWlnaHQgLyAyICsgc2VyaWVzLmNsaXBSZWN0LnksIHNlcmllcy5jaGFydC5yYWRpdXMgKyBNYXRoLm1heChtYXJrZXJIZWlnaHQsIG1hcmtlcldpZHRoKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXJpZXMuc3ltYm9sRWxlbWVudCA9IHJlbmRlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuZWxlbWVudElkICsgJ1N5bWJvbEdyb3VwJyArIHNlcmllcy5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHRyYW5zZm9ybSxcbiAgICAgICAgICAgICAgICAgICAgJ2NsaXAtcGF0aCc6ICd1cmwoIycgKyB0aGlzLmVsZW1lbnRJZCArICdfQ2hhcnRNYXJrZXJDbGlwUmVjdF8nICsgc2VyaWVzLmluZGV4ICsgJyknXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2VyaWVzLnN5bWJvbEVsZW1lbnQuYXBwZW5kQ2hpbGQobWFya2VyQ2xpcFJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYXJrZXIucHJvdG90eXBlLmdldFJhbmdlTG93UG9pbnQgPSBmdW5jdGlvbiAocmVnaW9uLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcmVnaW9uLng7XG4gICAgICAgICAgICB2YXIgeSA9IHJlZ2lvbi55O1xuICAgICAgICAgICAgaWYgKHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgeSArPSByZWdpb24uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICB4ICs9IHNlcmllcy55QXhpcy5pc0ludmVyc2VkID8gcmVnaW9uLndpZHRoIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHkgKz0gc2VyaWVzLnlBeGlzLmlzSW52ZXJzZWQgPyAwIDogcmVnaW9uLmhlaWdodDtcbiAgICAgICAgICAgICAgICB4ICs9IHJlZ2lvbi53aWR0aCAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB4OiB4LCB5OiB5IH07XG4gICAgICAgIH07XG4gICAgICAgIE1hcmtlci5wcm90b3R5cGUuZG9NYXJrZXJBbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICBpZiAoIShzZXJpZXMuaXNSZWN0U2VyaWVzIHx8IHNlcmllcy50eXBlID09PSAnU2NhdHRlcicgfHwgc2VyaWVzLnR5cGUgPT09ICdCdWJibGUnIHx8XG4gICAgICAgICAgICAgICAgKHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgJiYgKHNlcmllcy5kcmF3VHlwZSA9PT0gJ1NjYXR0ZXInIHx8IHNlcmllcy5kcmF3VHlwZS5pbmRleE9mKCdDb2x1bW4nKSA+IC0xKSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckVsZW1lbnRzID0gc2VyaWVzLnN5bWJvbEVsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICB2YXIgZGVsYXkgPSBzZXJpZXMuYW5pbWF0aW9uLmRlbGF5ICsgc2VyaWVzLmFuaW1hdGlvbi5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgaiA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIGluY0ZhY3RvciA9IHNlcmllcy50eXBlID09PSAnUmFuZ2VBcmVhJyA/IDIgOiAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VyaWVzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5wb2ludHNbaV0uc3ltYm9sTG9jYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaGVscGVyXzEubWFya2VyQW5pbWF0ZShtYXJrZXJFbGVtZW50c1tqXSwgZGVsYXksIDIwMCwgc2VyaWVzLCBpLCBzZXJpZXMucG9pbnRzW2ldLnN5bWJvbExvY2F0aW9uc1swXSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jRmFjdG9yID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG93UG9pbnQgPSB0aGlzLmdldFJhbmdlTG93UG9pbnQoc2VyaWVzLnBvaW50c1tpXS5yZWdpb25zWzBdLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyXzEubWFya2VyQW5pbWF0ZShtYXJrZXJFbGVtZW50c1tqICsgMV0sIGRlbGF5LCAyMDAsIHNlcmllcywgaSwgbG93UG9pbnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBqICs9IGluY0ZhY3RvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNYXJrZXI7XG4gICAgfShtYXJrZXJfZXhwbG9kZV8xLk1hcmtlckV4cGxvZGUpKTtcbiAgICBleHBvcnRzLk1hcmtlciA9IE1hcmtlcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL21hcmtlci5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jaGFydC91dGlscy9nZXQtZGF0YVwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGVqMl9iYXNlXzEsIGdldF9kYXRhXzEsIGhlbHBlcl8yLCBoZWxwZXJfMykge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgTWFya2VyRXhwbG9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhNYXJrZXJFeHBsb2RlLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBNYXJrZXJFeHBsb2RlKGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjaGFydCkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnRJZCA9IGNoYXJ0LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgTWFya2VyRXhwbG9kZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFydC5vbihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTWFya2VyRXhwbG9kZS5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgaWYgKGNoYXJ0LmlzVG91Y2ggJiYgIWNoYXJ0LmNyb3NzaGFpci5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtlck1vdmUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1hcmtlckV4cGxvZGUucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgaWYgKCghY2hhcnQuY3Jvc3NoYWlyLmVuYWJsZSB8fCAoY2hhcnQudG9vbHRpcC5lbmFibGUpKSAmJiAoIWNoYXJ0LmlzVG91Y2ggfHwgY2hhcnQuc3RhcnRNb3ZlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFya2VyTW92ZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1hcmtlckV4cGxvZGUucHJvdG90eXBlLm1hcmtlck1vdmUgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICB2YXIgZXhwbG9kZVNlcmllcztcbiAgICAgICAgICAgIGlmICghY2hhcnQudG9vbHRpcC5zaGFyZWQgfHwgIWNoYXJ0LnRvb2x0aXAuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgIGV4cGxvZGVTZXJpZXMgPSAoZGF0YS5zZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInIHx8IGRhdGEuc2VyaWVzLnR5cGUgPT09ICdCdWJibGUnIHx8IGRhdGEuc2VyaWVzLmRyYXdUeXBlID09PSAnU2NhdHRlcidcbiAgICAgICAgICAgICAgICAgICAgfHwgZGF0YS5zZXJpZXMudHlwZSA9PT0gJ1NjYXR0ZXInIHx8ICghZGF0YS5zZXJpZXMuaXNSZWN0U2VyaWVzICYmIGRhdGEuc2VyaWVzLm1hcmtlci52aXNpYmxlKSk7XG4gICAgICAgICAgICAgICAgZGF0YS5saWVySW5kZXggPSB0aGlzLmxpZXJJbmRleDtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5wb2ludCAmJiBleHBsb2RlU2VyaWVzICYmICgoIXRoaXMucHJldmlvdXNQb2ludHNbMF0gfHwgKHRoaXMucHJldmlvdXNQb2ludHNbMF0ucG9pbnQgIT09IGRhdGEucG9pbnQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmV2aW91c1BvaW50c1swXSAmJiB0aGlzLnByZXZpb3VzUG9pbnRzWzBdLmxpZXJJbmRleCA+IDMgJiYgdGhpcy5wcmV2aW91c1BvaW50c1swXS5saWVySW5kZXggIT09IHRoaXMubGllckluZGV4KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnRzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoZWxwZXJfMi53aXRoSW5Cb3VuZHMoY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVksIGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJ0LnRvb2x0aXAuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludERhdGEgPSBjaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyB0aGlzLmdldERhdGEoKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjaGFydC52aXNpYmxlU2VyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0U2VyaWVzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFydFNlcmllcy5lbmFibGVUb29sdGlwIHx8IGNoYXJ0U2VyaWVzLmNhdGVnb3J5ID09PSAnSW5kaWNhdG9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nICYmIGNoYXJ0U2VyaWVzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5nZXRDbG9zZXN0WChjaGFydCwgY2hhcnRTZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInICYmIGNoYXJ0U2VyaWVzLnZpc2libGUgJiYgcG9pbnREYXRhLnBvaW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBoZWxwZXJfMi5Qb2ludERhdGEoY2hhcnRTZXJpZXMucG9pbnRzW3BvaW50RGF0YS5wb2ludC5pbmRleF0sIGNoYXJ0U2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnRzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5wcmV2aW91c1BvaW50cy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UG9pbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwIHx8IChsZW5ndGggPiAwICYmIHRoaXMucHJldmlvdXNQb2ludHNbMF0ucG9pbnQgIT09IHRoaXMuY3VycmVudFBvaW50c1swXS5wb2ludCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVIaWdobGlnaHRlZE1hcmtlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGRhdGFfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFfMSAmJiBkYXRhXzEucG9pbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWRhdGFfMS5zZXJpZXMuaXNSZWN0U2VyaWVzIHx8IGRhdGFfMS5zZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8yLnN0b3BUaW1lcih0aGlzXzEubWFya2VyRXhwbG9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmlzUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhXzEucG9pbnQuc3ltYm9sTG9jYXRpb25zLm1hcChmdW5jdGlvbiAobG9jYXRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYXdUcmFja0JhbGwoZGF0YV8xLnNlcmllcywgZGF0YV8xLnBvaW50LCBsb2NhdGlvbiwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc18xID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMuY3VycmVudFBvaW50czsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhXzEgPSBfY1tfYl07XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKGRhdGFfMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BvaW50cyA9IGVqMl9iYXNlXzEuZXh0ZW5kKFtdLCB0aGlzLmN1cnJlbnRQb2ludHMsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2hhcnQudG9vbHRpcC5lbmFibGUgJiYgKCh0aGlzLmN1cnJlbnRQb2ludHMubGVuZ3RoID09PSAwICYmIHRoaXMuaXNSZW1vdmUpIHx8IChyZW1vdmUgJiYgdGhpcy5pc1JlbW92ZSkgfHxcbiAgICAgICAgICAgICAgICAhaGVscGVyXzIud2l0aEluQm91bmRzKGNoYXJ0Lm1vdXNlWCwgY2hhcnQubW91c2VZLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubWFya2VyRXhwbG9kZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVIaWdobGlnaHRlZE1hcmtlcigpO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnRzID0gW107XG4gICAgICAgIH07XG4gICAgICAgIE1hcmtlckV4cGxvZGUucHJvdG90eXBlLmRyYXdUcmFja0JhbGwgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCwgbG9jYXRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gc2VyaWVzLm1hcmtlcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2VyaWVzLnN5bWJvbEVsZW1lbnQgfHwgc2VyaWVzLnNlcmllc0VsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgc2hhcGUgPSBzZXJpZXMudHlwZSA9PT0gJ0J1YmJsZScgPyAnQ2lyY2xlJyA6IG1hcmtlci5zaGFwZTtcbiAgICAgICAgICAgIHZhciBzeW1ib2xJZCA9IHRoaXMuZWxlbWVudElkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfUG9pbnRfJyArIHBvaW50LmluZGV4ICsgJ19UcmFja2JhbGwnICtcbiAgICAgICAgICAgICAgICAoaW5kZXggPyBpbmRleCA6ICcnKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IChzZXJpZXMudHlwZSAhPT0gJ0J1YmJsZScpID8gbWFya2VyLndpZHRoIDogKHBvaW50LnJlZ2lvbnNbMF0ud2lkdGgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IChzZXJpZXMudHlwZSAhPT0gJ0J1YmJsZScpID8gbWFya2VyLmhlaWdodCA6IChwb2ludC5yZWdpb25zWzBdLmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IG5ldyBoZWxwZXJfMS5TaXplKHdpZHRoICsgNSwgaGVpZ2h0ICsgNSk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0gKHNlcmllcy50eXBlID09PSAnQnViYmxlJyB8fCBzZXJpZXMudHlwZSA9PT0gJ1NjYXR0ZXInID8gc2VyaWVzLmJvcmRlciA6IG1hcmtlci5ib3JkZXIpO1xuICAgICAgICAgICAgdmFyIGV4cGxvZGVTZXJpZXMgPSAoc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJyB8fCBzZXJpZXMudHlwZSA9PT0gJ0J1YmJsZScgfHwgc2VyaWVzLnR5cGUgPT09ICdTY2F0dGVyJyk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyQ29sb3IgPSAoYm9yZGVyLmNvbG9yICYmIGJvcmRlci5jb2xvciAhPT0gJ3RyYW5zcGFyZW50JykgPyBib3JkZXIuY29sb3IgOlxuICAgICAgICAgICAgICAgIGV4cGxvZGVTZXJpZXMgPyBwb2ludC5jb2xvciA6IHNlcmllcy5pbnRlcmlvcjtcbiAgICAgICAgICAgIHZhciBjb2xvclZhbHVlID0gaGVscGVyXzMuY29udmVydEhleFRvQ29sb3IoaGVscGVyXzMuY29sb3JOYW1lVG9IZXgoYm9yZGVyQ29sb3IpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihzeW1ib2xJZCArICdfJyArIGksIGkgPyAobWFya2VyLmZpbGwgfHwgcG9pbnQuY29sb3IgfHwgKGV4cGxvZGVTZXJpZXMgPyBzZXJpZXMuaW50ZXJpb3IgOiAnI2ZmZmZmZicpKSA6ICd0cmFuc3BhcmVudCcsIG1hcmtlci5ib3JkZXIud2lkdGggKyAoaSA/IDAgOiA4KSwgaSA/IGJvcmRlckNvbG9yIDogJ3JnYmEoJyArIGNvbG9yVmFsdWUuciArICcsJyArIGNvbG9yVmFsdWUuZyArICcsJyArIGNvbG9yVmFsdWUuYiArICcsMC4yKScsIG1hcmtlci5vcGFjaXR5LCBudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICB2YXIgc3ltYm9sID0gaGVscGVyXzEuZHJhd1N5bWJvbChsb2NhdGlvbiwgc2hhcGUsIHNpemUsIG51bGwsIG9wdGlvbnMsICcnKTtcbiAgICAgICAgICAgICAgICBzeW1ib2wuc2V0QXR0cmlidXRlKCdzdHlsZScsICdwb2ludGVyLWV2ZW50czpub25lJyk7XG4gICAgICAgICAgICAgICAgc3ltYm9sLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnRUoyLVRyYWNrYmFsbCcpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ltYm9sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTWFya2VyRXhwbG9kZS5wcm90b3R5cGUucmVtb3ZlSGlnaGxpZ2h0ZWRNYXJrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdFSjItVHJhY2tiYWxsJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZShlbGVtZW50c1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9pbnRzID0gW107XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNYXJrZXJFeHBsb2RlO1xuICAgIH0oZ2V0X2RhdGFfMS5EYXRhKSk7XG4gICAgZXhwb3J0cy5NYXJrZXJFeHBsb2RlID0gTWFya2VyRXhwbG9kZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL21hcmtlci1leHBsb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhKGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICAgIHRoaXMubGllckluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gbnVsbDtcbiAgICAgICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgICAgICBmb3IgKHZhciBsZW4gPSBjaGFydC52aXNpYmxlU2VyaWVzLmxlbmd0aCwgaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzID0gY2hhcnQudmlzaWJsZVNlcmllc1tpXTtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IChzZXJpZXMudHlwZSA9PT0gJ1NjYXR0ZXInIHx8IHNlcmllcy5kcmF3VHlwZSA9PT0gJ1NjYXR0ZXInIHx8ICghc2VyaWVzLmlzUmVjdFNlcmllcyAmJiBzZXJpZXMubWFya2VyLnZpc2libGUpKVxuICAgICAgICAgICAgICAgICAgICA/IChzZXJpZXMubWFya2VyLmhlaWdodCArIDUpIC8gMiA6IDA7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gKHNlcmllcy50eXBlID09PSAnU2NhdHRlcicgfHwgc2VyaWVzLmRyYXdUeXBlID09PSAnU2NhdHRlcicgfHwgKCFzZXJpZXMuaXNSZWN0U2VyaWVzICYmIHNlcmllcy5tYXJrZXIudmlzaWJsZSkpXG4gICAgICAgICAgICAgICAgICAgID8gKHNlcmllcy5tYXJrZXIud2lkdGggKyA1KSAvIDIgOiAwO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudmlzaWJsZSAmJiBoZWxwZXJfMS53aXRoSW5Cb3VuZHMoY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVksIHNlcmllcy5jbGlwUmVjdCwgd2lkdGgsIGhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLmdldFJlY3RQb2ludChzZXJpZXMsIHNlcmllcy5jbGlwUmVjdCwgY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5Qb2ludERhdGEocG9pbnQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5Qb2ludERhdGEocG9pbnQsIHNlcmllcyk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldFJlY3RQb2ludCA9IGZ1bmN0aW9uIChzZXJpZXMsIHJlY3QsIHgsIHkpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UmVjdDtcbiAgICAgICAgICAgIHZhciBmcm9tQ2VudGVyWDtcbiAgICAgICAgICAgIHZhciBmcm9tQ2VudGVyWTtcbiAgICAgICAgICAgIHZhciBjbGlja0FuZ2xlO1xuICAgICAgICAgICAgdmFyIGFyY0FuZ2xlID0gMDtcbiAgICAgICAgICAgIHZhciBzdGFydEFuZ2xlO1xuICAgICAgICAgICAgdmFyIGVuZEFuZ2xlO1xuICAgICAgICAgICAgdmFyIGRpc3RhbmNlRnJvbUNlbnRlcjtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIXBvaW50LnJlZ2lvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb2ludC5yZWdpb25zIHx8ICFwb2ludC5yZWdpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnJlZ2lvbkRhdGEgJiYgdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgJiYgc2VyaWVzLmRyYXdUeXBlLmluZGV4T2YoJ0NvbHVtbicpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUNlbnRlclggPSB4IC0gKHNlcmllcy5jbGlwUmVjdC53aWR0aCAvIDIgKyBzZXJpZXMuY2xpcFJlY3QueCk7XG4gICAgICAgICAgICAgICAgICAgIGZyb21DZW50ZXJZID0geSAtIChzZXJpZXMuY2xpcFJlY3QuaGVpZ2h0IC8gMiArIHNlcmllcy5jbGlwUmVjdC55KTtcbiAgICAgICAgICAgICAgICAgICAgYXJjQW5nbGUgPSAyICogTWF0aC5QSSAqIChwb2ludC5yZWdpb25EYXRhLmN1cnJlbnRYUG9zaXRpb24gPCAwID8gMSArIHBvaW50LnJlZ2lvbkRhdGEuY3VycmVudFhQb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwb2ludC5yZWdpb25EYXRhLmN1cnJlbnRYUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBjbGlja0FuZ2xlID0gKE1hdGguYXRhbjIoZnJvbUNlbnRlclksIGZyb21DZW50ZXJYKSArIDAuNSAqIE1hdGguUEkgLSBhcmNBbmdsZSkgJSAoMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICBjbGlja0FuZ2xlID0gY2xpY2tBbmdsZSA8IDAgPyAyICogTWF0aC5QSSArIGNsaWNrQW5nbGUgOiBjbGlja0FuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBjbGlja0FuZ2xlID0gY2xpY2tBbmdsZSArIDIgKiBNYXRoLlBJICogc2VyaWVzLmNoYXJ0LnByaW1hcnlYQXhpcy5zdGFydEFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlID0gcG9pbnQucmVnaW9uRGF0YS5zdGFydEFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlIC09IGFyY0FuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlID0gc3RhcnRBbmdsZSA8IDAgPyAyICogTWF0aC5QSSArIHN0YXJ0QW5nbGUgOiBzdGFydEFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZSA9IHBvaW50LnJlZ2lvbkRhdGEuZW5kQW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIGVuZEFuZ2xlIC09IGFyY0FuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZSA9IGVuZEFuZ2xlIDwgMCA/IDIgKiBNYXRoLlBJICsgZW5kQW5nbGUgOiBlbmRBbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQ2VudGVyID0gTWF0aC5zcXJ0KE1hdGgucG93KE1hdGguYWJzKGZyb21DZW50ZXJYKSwgMikgKyBNYXRoLnBvdyhNYXRoLmFicyhmcm9tQ2VudGVyWSksIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWNrQW5nbGUgPj0gc3RhcnRBbmdsZSAmJiBjbGlja0FuZ2xlIDw9IGVuZEFuZ2xlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoKChkaXN0YW5jZUZyb21DZW50ZXIgPj0gcG9pbnQucmVnaW9uRGF0YS5pbm5lclJhZGl1cyAmJiBkaXN0YW5jZUZyb21DZW50ZXIgPD0gcG9pbnQucmVnaW9uRGF0YS5yYWRpdXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRpc3RhbmNlRnJvbUNlbnRlciA8PSBwb2ludC5yZWdpb25EYXRhLmlubmVyUmFkaXVzICYmIGRpc3RhbmNlRnJvbUNlbnRlciA+PSBwb2ludC5yZWdpb25EYXRhLnJhZGl1cykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgZGlzdGFuY2VGcm9tQ2VudGVyIDw9IHNlcmllcy5jaGFydC5yYWRpdXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jaGVja1JlZ2lvbkNvbnRhaW5zUG9pbnQocG9pbnQucmVnaW9ucywgcmVjdCwgeCwgeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5jaGVja1JlZ2lvbkNvbnRhaW5zUG9pbnQgPSBmdW5jdGlvbiAocmVnaW9uUmVjdCwgcmVjdCwgeCwgeSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiByZWdpb25SZWN0LnNvbWUoZnVuY3Rpb24gKHJlZ2lvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5saWVySW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGVscGVyXzEud2l0aEluQm91bmRzKHgsIHksIG5ldyBoZWxwZXJfMS5SZWN0KChfdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnQ2FydGVzaWFuJyA/IHJlY3QueCA6IDApICsgcmVnaW9uLngsIChfdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnQ2FydGVzaWFuJyA/IHJlY3QueSA6IDApICsgcmVnaW9uLnksIHJlZ2lvbi53aWR0aCwgcmVnaW9uLmhlaWdodCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIERhdGEucHJvdG90eXBlLmdldENsb3Nlc3QgPSBmdW5jdGlvbiAoc2VyaWVzLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHhEYXRhID0gc2VyaWVzLnhEYXRhO1xuICAgICAgICAgICAgdmFyIGNsb3Nlc3Q7XG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gc2VyaWVzLnhNaW4gLSAwLjUgJiYgdmFsdWUgPD0gc2VyaWVzLnhNYXggKyAwLjUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHhEYXRhXzEgPSB4RGF0YTsgX2kgPCB4RGF0YV8xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHhEYXRhXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdCA9PSBudWxsIHx8IE1hdGguYWJzKGRhdGEgLSB2YWx1ZSkgPCBNYXRoLmFicyhjbG9zZXN0IC0gdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0ID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbG9zZXN0O1xuICAgICAgICB9O1xuICAgICAgICBEYXRhLnByb3RvdHlwZS5nZXRDbG9zZXN0WCA9IGZ1bmN0aW9uIChjaGFydCwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IHNlcmllcy5jbGlwUmVjdDtcbiAgICAgICAgICAgIGlmICghY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gaGVscGVyXzEuZ2V0VmFsdWVYQnlQb2ludChjaGFydC5tb3VzZVggLSByZWN0LngsIHJlY3Qud2lkdGgsIHNlcmllcy54QXhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGhlbHBlcl8xLmdldFZhbHVlWUJ5UG9pbnQoY2hhcnQubW91c2VZIC0gcmVjdC55LCByZWN0LmhlaWdodCwgc2VyaWVzLnhBeGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9zZXN0ID0gdGhpcy5nZXRDbG9zZXN0KHNlcmllcywgdmFsdWUpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZXN0ID09PSBwb2ludC54VmFsdWUgJiYgcG9pbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGhlbHBlcl8xLlBvaW50RGF0YShwb2ludCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGE7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkRhdGEgPSBEYXRhO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC91dGlscy9nZXQtZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVsL2Jhc2VcIiwgXCIuLi9tb2RlbC90aGVtZVwiLCBcIi4uL3V0aWxzL2hlbHBlclwiLCBcIi4uL3V0aWxzL2hlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGJhc2VfMSwgdGhlbWVfMSwgaGVscGVyXzEsIGhlbHBlcl8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBMb2NhdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhMb2NhdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTG9jYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIExvY2F0aW9uO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMClcbiAgICBdLCBMb2NhdGlvbi5wcm90b3R5cGUsIFwieFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgTG9jYXRpb24ucHJvdG90eXBlLCBcInlcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkxvY2F0aW9uID0gTG9jYXRpb247XG4gICAgdmFyIExlZ2VuZFNldHRpbmdzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKExlZ2VuZFNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBMZWdlbmRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTGVnZW5kU2V0dGluZ3M7XG4gICAgfShlajJfYmFzZV8xLkNoaWxkUHJvcGVydHkpKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwiaGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgeDogMCwgeTogMCB9LCBMb2NhdGlvbilcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwibG9jYXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQXV0bycpXG4gICAgXSwgTGVnZW5kU2V0dGluZ3MucHJvdG90eXBlLCBcInBvc2l0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoOClcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwicGFkZGluZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdDZW50ZXInKVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJhbGlnbm1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHRoZW1lXzEuVGhlbWUubGVnZW5kTGFiZWxGb250LCBiYXNlXzEuRm9udClcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwidGV4dFN0eWxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTApXG4gICAgXSwgTGVnZW5kU2V0dGluZ3MucHJvdG90eXBlLCBcInNoYXBlSGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTApXG4gICAgXSwgTGVnZW5kU2V0dGluZ3MucHJvdG90eXBlLCBcInNoYXBlV2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBiYXNlXzEuQm9yZGVyKVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg1KVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJzaGFwZVBhZGRpbmdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgndHJhbnNwYXJlbnQnKVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJiYWNrZ3JvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMSlcbiAgICBdLCBMZWdlbmRTZXR0aW5ncy5wcm90b3R5cGUsIFwib3BhY2l0eVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgTGVnZW5kU2V0dGluZ3MucHJvdG90eXBlLCBcInRvZ2dsZVZpc2liaWxpdHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIExlZ2VuZFNldHRpbmdzLnByb3RvdHlwZSwgXCJkZXNjcmlwdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDMpXG4gICAgXSwgTGVnZW5kU2V0dGluZ3MucHJvdG90eXBlLCBcInRhYkluZGV4XCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5MZWdlbmRTZXR0aW5ncyA9IExlZ2VuZFNldHRpbmdzO1xuICAgIHZhciBCYXNlTGVnZW5kID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQmFzZUxlZ2VuZChjaGFydCkge1xuICAgICAgICAgICAgdGhpcy5yb3dDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMucGFnZUJ1dHRvblNpemUgPSA4O1xuICAgICAgICAgICAgdGhpcy5wYWdlWENvbGxlY3Rpb25zID0gW107XG4gICAgICAgICAgICB0aGlzLm1heENvbHVtbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pc1RyaW1tZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubWF4V2lkdGggPSAwO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgICAgICB0aGlzLmxlZ2VuZCA9IGNoYXJ0LmxlZ2VuZFNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy5sZWdlbmRJRCA9IGNoYXJ0LmVsZW1lbnQuaWQgKyAnX2NoYXJ0X2xlZ2VuZCc7XG4gICAgICAgICAgICB0aGlzLmlzQ2hhcnRDb250cm9sID0gKGNoYXJ0LmdldE1vZHVsZU5hbWUoKSA9PT0gJ2NoYXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgQmFzZUxlZ2VuZC5wcm90b3R5cGUuY2FsY3VsYXRlTGVnZW5kQm91bmRzID0gZnVuY3Rpb24gKHJlY3QsIGF2YWlsYWJsZVNpemUpIHtcbiAgICAgICAgICAgIHZhciBsZWdlbmQgPSB0aGlzLmxlZ2VuZDtcbiAgICAgICAgICAgIHRoaXMuZ2V0UG9zaXRpb24obGVnZW5kLnBvc2l0aW9uLCBhdmFpbGFibGVTaXplKTtcbiAgICAgICAgICAgIHRoaXMubGVnZW5kQm91bmRzID0gbmV3IGhlbHBlcl8xLlJlY3QocmVjdC54LCByZWN0LnksIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5pc1ZlcnRpY2FsID0gKHRoaXMucG9zaXRpb24gPT09ICdMZWZ0JyB8fCB0aGlzLnBvc2l0aW9uID09PSAnUmlnaHQnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZEJvdW5kcy5oZWlnaHQgPSBoZWxwZXJfMi5zdHJpbmdUb051bWJlcihsZWdlbmQuaGVpZ2h0LCBhdmFpbGFibGVTaXplLmhlaWdodCAtIChyZWN0LnkgLSB0aGlzLmNoYXJ0Lm1hcmdpbi50b3ApKSB8fCByZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZEJvdW5kcy53aWR0aCA9IGhlbHBlcl8yLnN0cmluZ1RvTnVtYmVyKGxlZ2VuZC53aWR0aCB8fCAnMjAlJywgYXZhaWxhYmxlU2l6ZS53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZEJvdW5kcy53aWR0aCA9IGhlbHBlcl8yLnN0cmluZ1RvTnVtYmVyKGxlZ2VuZC53aWR0aCwgYXZhaWxhYmxlU2l6ZS53aWR0aCkgfHwgcmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZEJvdW5kcy5oZWlnaHQgPSBoZWxwZXJfMi5zdHJpbmdUb051bWJlcihsZWdlbmQuaGVpZ2h0IHx8ICcyMCUnLCBhdmFpbGFibGVTaXplLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxpYnJhcnkuZ2V0TGVnZW5kQm91bmRzKGF2YWlsYWJsZVNpemUsIHRoaXMubGVnZW5kQm91bmRzLCBsZWdlbmQpO1xuICAgICAgICAgICAgdGhpcy5nZXRMb2NhdGlvbih0aGlzLnBvc2l0aW9uLCBsZWdlbmQuYWxpZ25tZW50LCB0aGlzLmxlZ2VuZEJvdW5kcywgcmVjdCwgYXZhaWxhYmxlU2l6ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBhdmFpbGFibGVTaXplKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoYXJ0Q29udHJvbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSAocG9zaXRpb24gIT09ICdBdXRvJykgPyBwb3NpdGlvbiA6ICdCb3R0b20nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnQXV0bycgJiYgdGhpcy5jaGFydC52aXNpYmxlU2VyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmNoYXJ0LnZpc2libGVTZXJpZXNbMF0udHlwZSA9PT0gJ0Z1bm5lbCcgfHwgdGhpcy5jaGFydC52aXNpYmxlU2VyaWVzWzBdLnR5cGUgPT09ICdQeXJhbWlkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAnVG9wJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IChwb3NpdGlvbiAhPT0gJ0F1dG8nKSA/IHBvc2l0aW9uIDpcbiAgICAgICAgICAgICAgICAgICAgKGF2YWlsYWJsZVNpemUud2lkdGggPiBhdmFpbGFibGVTaXplLmhlaWdodCA/ICdSaWdodCcgOiAnQm90dG9tJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLnNldEJvdW5kcyA9IGZ1bmN0aW9uIChjb21wdXRlZFdpZHRoLCBjb21wdXRlZEhlaWdodCwgbGVnZW5kLCBsZWdlbmRCb3VuZHMpIHtcbiAgICAgICAgICAgIGNvbXB1dGVkV2lkdGggPSBjb21wdXRlZFdpZHRoIDwgbGVnZW5kQm91bmRzLndpZHRoID8gY29tcHV0ZWRXaWR0aCA6IGxlZ2VuZEJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIGNvbXB1dGVkSGVpZ2h0ID0gY29tcHV0ZWRIZWlnaHQgPCBsZWdlbmRCb3VuZHMuaGVpZ2h0ID8gY29tcHV0ZWRIZWlnaHQgOiBsZWdlbmRCb3VuZHMuaGVpZ2h0O1xuICAgICAgICAgICAgbGVnZW5kQm91bmRzLndpZHRoID0gIWxlZ2VuZC53aWR0aCA/IGNvbXB1dGVkV2lkdGggOiBsZWdlbmRCb3VuZHMud2lkdGg7XG4gICAgICAgICAgICBsZWdlbmRCb3VuZHMuaGVpZ2h0ID0gIWxlZ2VuZC5oZWlnaHQgPyBjb21wdXRlZEhlaWdodCA6IGxlZ2VuZEJvdW5kcy5oZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnJvd0NvdW50ID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKChsZWdlbmRCb3VuZHMuaGVpZ2h0IC0gbGVnZW5kLnBhZGRpbmcpIC8gKHRoaXMubWF4SXRlbUhlaWdodCArIGxlZ2VuZC5wYWRkaW5nKSkpO1xuICAgICAgICB9O1xuICAgICAgICBCYXNlTGVnZW5kLnByb3RvdHlwZS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgYWxpZ25tZW50LCBsZWdlbmRCb3VuZHMsIHJlY3QsIGF2YWlsYWJsZVNpemUpIHtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5sZWdlbmQuYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZEhlaWdodCA9IGxlZ2VuZEJvdW5kcy5oZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZFdpZHRoID0gbGVnZW5kQm91bmRzLndpZHRoICsgcGFkZGluZztcbiAgICAgICAgICAgIHZhciBtYXJnaW5Cb3R0b20gPSB0aGlzLmNoYXJ0Lm1hcmdpbi5ib3R0b207XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdCb3R0b20nKSB7XG4gICAgICAgICAgICAgICAgbGVnZW5kQm91bmRzLnggPSB0aGlzLmFsaWduTGVnZW5kKGxlZ2VuZEJvdW5kcy54LCBhdmFpbGFibGVTaXplLndpZHRoLCBsZWdlbmRCb3VuZHMud2lkdGgsIGFsaWdubWVudCk7XG4gICAgICAgICAgICAgICAgbGVnZW5kQm91bmRzLnkgPSByZWN0LnkgKyAocmVjdC5oZWlnaHQgLSBsZWdlbmRIZWlnaHQpICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICBoZWxwZXJfMS5zdWJ0cmFjdFRoaWNrbmVzcyhyZWN0LCBuZXcgaGVscGVyXzEuVGhpY2tuZXNzKDAsIDAsIDAsIGxlZ2VuZEhlaWdodCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT09ICdUb3AnKSB7XG4gICAgICAgICAgICAgICAgbGVnZW5kQm91bmRzLnggPSB0aGlzLmFsaWduTGVnZW5kKGxlZ2VuZEJvdW5kcy54LCBhdmFpbGFibGVTaXplLndpZHRoLCBsZWdlbmRCb3VuZHMud2lkdGgsIGFsaWdubWVudCk7XG4gICAgICAgICAgICAgICAgbGVnZW5kQm91bmRzLnkgPSByZWN0LnkgKyBwYWRkaW5nO1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnN1YnRyYWN0VGhpY2tuZXNzKHJlY3QsIG5ldyBoZWxwZXJfMS5UaGlja25lc3MoMCwgMCwgbGVnZW5kSGVpZ2h0LCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ1JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIGxlZ2VuZEJvdW5kcy54ID0gcmVjdC54ICsgKHJlY3Qud2lkdGggLSBsZWdlbmRCb3VuZHMud2lkdGgpO1xuICAgICAgICAgICAgICAgIGxlZ2VuZEJvdW5kcy55ID0gcmVjdC55ICsgdGhpcy5hbGlnbkxlZ2VuZCgwLCBhdmFpbGFibGVTaXplLmhlaWdodCAtIChyZWN0LnkgKyBtYXJnaW5Cb3R0b20pLCBsZWdlbmRCb3VuZHMuaGVpZ2h0LCBhbGlnbm1lbnQpO1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnN1YnRyYWN0VGhpY2tuZXNzKHJlY3QsIG5ldyBoZWxwZXJfMS5UaGlja25lc3MoMCwgbGVnZW5kV2lkdGgsIDAsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZHMueSA9IHJlY3QueSArIHRoaXMuYWxpZ25MZWdlbmQoMCwgYXZhaWxhYmxlU2l6ZS5oZWlnaHQgLSAocmVjdC55ICsgbWFyZ2luQm90dG9tKSwgbGVnZW5kQm91bmRzLmhlaWdodCwgYWxpZ25tZW50KTtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMS5zdWJ0cmFjdFRoaWNrbmVzcyhyZWN0LCBuZXcgaGVscGVyXzEuVGhpY2tuZXNzKGxlZ2VuZFdpZHRoLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZHMueCA9IHRoaXMubGVnZW5kLmxvY2F0aW9uLng7XG4gICAgICAgICAgICAgICAgbGVnZW5kQm91bmRzLnkgPSB0aGlzLmxlZ2VuZC5sb2NhdGlvbi55O1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnN1YnRyYWN0VGhpY2tuZXNzKHJlY3QsIG5ldyBoZWxwZXJfMS5UaGlja25lc3MoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXNlTGVnZW5kLnByb3RvdHlwZS5hbGlnbkxlZ2VuZCA9IGZ1bmN0aW9uIChzdGFydCwgc2l6ZSwgbGVnZW5kU2l6ZSwgYWxpZ25tZW50KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFsaWdubWVudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Zhcic6XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gKHNpemUgLSBsZWdlbmRTaXplKSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdDZW50ZXInOlxuICAgICAgICAgICAgICAgICAgICBzdGFydCA9ICgoc2l6ZSAtIGxlZ2VuZFNpemUpIC8gMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0O1xuICAgICAgICB9O1xuICAgICAgICBCYXNlTGVnZW5kLnByb3RvdHlwZS5yZW5kZXJMZWdlbmQgPSBmdW5jdGlvbiAoY2hhcnQsIGxlZ2VuZCwgbGVnZW5kQm91bmRzKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3RMZWdlbmQgPSB0aGlzLmZpbmRGaXJzdExlZ2VuZFBvc2l0aW9uKHRoaXMubGVnZW5kQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBsZWdlbmQucGFkZGluZztcbiAgICAgICAgICAgIHRoaXMubWF4SXRlbUhlaWdodCA9IE1hdGgubWF4KHRoaXMubGVnZW5kQ29sbGVjdGlvbnNbMF0udGV4dFNpemUuaGVpZ2h0LCBsZWdlbmQuc2hhcGVIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZEdyb3VwID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogdGhpcy5sZWdlbmRJRCArICdfZycgfSk7XG4gICAgICAgICAgICB2YXIgbGVnZW5kVHJhbnNsYXRlR3JvdXAgPSB0aGlzLmNyZWF0ZUxlZ2VuZEVsZW1lbnRzKGNoYXJ0LCBsZWdlbmRCb3VuZHMsIGxlZ2VuZEdyb3VwLCBsZWdlbmQsIHRoaXMubGVnZW5kSUQpO1xuICAgICAgICAgICAgaWYgKGZpcnN0TGVnZW5kICE9PSB0aGlzLmxlZ2VuZENvbGxlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBsZWdlbmRTZXJpZXNHcm91cCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihsZWdlbmRCb3VuZHMueCArIHBhZGRpbmcgKyAobGVnZW5kLnNoYXBlV2lkdGggLyAyKSwgbGVnZW5kQm91bmRzLnkgKyBwYWRkaW5nICsgdGhpcy5tYXhJdGVtSGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgdmFyIHRleHRPcHRpb25zID0gbmV3IGhlbHBlcl8yLlRleHRPcHRpb24oJycsIHN0YXJ0LngsIHN0YXJ0LnksICdzdGFydCcpO1xuICAgICAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IHRoaXMuaXNDaGFydENvbnRyb2wgPyB0aGlzLnRvdGFsUGFnZXMgOiAwO1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0UGFkZGluZyA9IGxlZ2VuZC5zaGFwZVBhZGRpbmcgKyBwYWRkaW5nICsgbGVnZW5kLnNoYXBlV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYQ29sbGVjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZENvbGxlY3Rpb25zW2ZpcnN0TGVnZW5kXS5sb2NhdGlvbiA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c0xlZ2VuZCA9IHRoaXMubGVnZW5kQ29sbGVjdGlvbnNbZmlyc3RMZWdlbmRdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmxlZ2VuZENvbGxlY3Rpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVnZW5kT3B0aW9uID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVnZW5kT3B0aW9uLnJlbmRlciAmJiBsZWdlbmRPcHRpb24udGV4dCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZFNlcmllc0dyb3VwID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLmxlZ2VuZElEICsgdGhpcy5nZW5lcmF0ZUlkKGxlZ2VuZE9wdGlvbiwgJ19nXycsIGNvdW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmRTZXJpZXNHcm91cC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgbGVnZW5kLnRhYkluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVnZW5kU2VyaWVzR3JvdXAuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGVnZW5kLmRlc2NyaXB0aW9uIHx8ICdDbGljayB0byBzaG93IG9yIGhpZGUgdGhlICcgKyBsZWdlbmRPcHRpb24udGV4dCArICcgc2VyaWVzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpYnJhcnkuZ2V0UmVuZGVyUG9pbnQobGVnZW5kT3B0aW9uLCBzdGFydCwgdGV4dFBhZGRpbmcsIHByZXZpb3VzTGVnZW5kLCBsZWdlbmRCb3VuZHMsIGNvdW50LCBmaXJzdExlZ2VuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN5bWJvbChsZWdlbmRPcHRpb24sIGxlZ2VuZFNlcmllc0dyb3VwLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRleHQoY2hhcnQsIGxlZ2VuZE9wdGlvbiwgbGVnZW5kU2VyaWVzR3JvdXAsIHRleHRPcHRpb25zLCBjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmRTZXJpZXNHcm91cC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2N1cnNvcjogJyArICgoIWxlZ2VuZC50b2dnbGVWaXNpYmlsaXR5ICYmIGNoYXJ0LnNlbGVjdGlvbk1vZGUgPT09ICdOb25lJykgPyAnYXV0bycgOiAncG9pbnRlcicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZFRyYW5zbGF0ZUdyb3VwLmFwcGVuZENoaWxkKGxlZ2VuZFNlcmllc0dyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzTGVnZW5kID0gbGVnZW5kT3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUGFnaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnaW5nRWxlbWVudHMoY2hhcnQsIGxlZ2VuZEJvdW5kcywgdGV4dE9wdGlvbnMsIGxlZ2VuZEdyb3VwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFydC5zdmdPYmplY3QuYXBwZW5kQ2hpbGQobGVnZW5kR3JvdXApO1xuICAgICAgICB9O1xuICAgICAgICBCYXNlTGVnZW5kLnByb3RvdHlwZS5maW5kRmlyc3RMZWdlbmRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsZWdlbmRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBsZWdlbmRDb2xsZWN0aW9uXzEgPSBsZWdlbmRDb2xsZWN0aW9uOyBfaSA8IGxlZ2VuZENvbGxlY3Rpb25fMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVnZW5kID0gbGVnZW5kQ29sbGVjdGlvbl8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAobGVnZW5kLnJlbmRlciAmJiBsZWdlbmQudGV4dCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLmNyZWF0ZUxlZ2VuZEVsZW1lbnRzID0gZnVuY3Rpb24gKGNoYXJ0LCBsZWdlbmRCb3VuZHMsIGxlZ2VuZEdyb3VwLCBsZWdlbmQsIGlkKSB7XG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IGxlZ2VuZC5wYWRkaW5nO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBuZXcgaGVscGVyXzIuUmVjdE9wdGlvbihpZCArICdfZWxlbWVudCcsIGxlZ2VuZC5iYWNrZ3JvdW5kLCBsZWdlbmQuYm9yZGVyLCBsZWdlbmQub3BhY2l0eSwgbGVnZW5kQm91bmRzKTtcbiAgICAgICAgICAgIGxlZ2VuZEdyb3VwLmFwcGVuZENoaWxkKGNoYXJ0LnJlbmRlcmVyLmRyYXdSZWN0YW5nbGUob3B0aW9ucykpO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZEl0ZW1zR3JvdXAgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiBpZCArICdfY29sbGVjdGlvbnMnIH0pO1xuICAgICAgICAgICAgbGVnZW5kR3JvdXAuYXBwZW5kQ2hpbGQobGVnZW5kSXRlbXNHcm91cCk7XG4gICAgICAgICAgICB0aGlzLmxlZ2VuZFRyYW5zbGF0ZUdyb3VwID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogaWQgKyAnX3RyYW5zbGF0ZV9nJyB9KTtcbiAgICAgICAgICAgIGxlZ2VuZEl0ZW1zR3JvdXAuYXBwZW5kQ2hpbGQodGhpcy5sZWdlbmRUcmFuc2xhdGVHcm91cCk7XG4gICAgICAgICAgICB2YXIgY2xpcHBhdGggPSBjaGFydC5yZW5kZXJlci5jcmVhdGVDbGlwUGF0aCh7IGlkOiBpZCArICdfY2xpcFBhdGgnIH0pO1xuICAgICAgICAgICAgb3B0aW9ucy55ICs9IHBhZGRpbmc7XG4gICAgICAgICAgICBvcHRpb25zLmlkICs9ICdfY2xpcFBhdGhfcmVjdCc7XG4gICAgICAgICAgICBvcHRpb25zLndpZHRoID0gKCF0aGlzLmlzQ2hhcnRDb250cm9sICYmIHRoaXMuaXNWZXJ0aWNhbCkgPyB0aGlzLm1heFdpZHRoIC0gcGFkZGluZyA6IGxlZ2VuZEJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuY2xpcFJlY3QgPSBjaGFydC5yZW5kZXJlci5kcmF3UmVjdGFuZ2xlKG9wdGlvbnMpO1xuICAgICAgICAgICAgY2xpcHBhdGguYXBwZW5kQ2hpbGQodGhpcy5jbGlwUmVjdCk7XG4gICAgICAgICAgICBjaGFydC5zdmdPYmplY3QuYXBwZW5kQ2hpbGQoY2xpcHBhdGgpO1xuICAgICAgICAgICAgbGVnZW5kSXRlbXNHcm91cC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2NsaXAtcGF0aDp1cmwoIycgKyBjbGlwcGF0aC5pZCArICcpJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWdlbmRUcmFuc2xhdGVHcm91cDtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzZUxlZ2VuZC5wcm90b3R5cGUucmVuZGVyU3ltYm9sID0gZnVuY3Rpb24gKGxlZ2VuZE9wdGlvbiwgZ3JvdXAsIGkpIHtcbiAgICAgICAgICAgIHZhciBzeW1ib2xDb2xvciA9IGxlZ2VuZE9wdGlvbi52aXNpYmxlID8gbGVnZW5kT3B0aW9uLmZpbGwgOiAnI0QzRDNEMyc7XG4gICAgICAgICAgICB2YXIgc2hhcGUgPSAobGVnZW5kT3B0aW9uLnNoYXBlID09PSAnU2VyaWVzVHlwZScpID8gbGVnZW5kT3B0aW9uLnR5cGUgOiBsZWdlbmRPcHRpb24uc2hhcGU7XG4gICAgICAgICAgICBzaGFwZSA9IHNoYXBlID09PSAnU2NhdHRlcicgPyBsZWdlbmRPcHRpb24ubWFya2VyU2hhcGUgOiBzaGFwZTtcbiAgICAgICAgICAgIHZhciBzeW1ib2xPcHRpb24gPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbih0aGlzLmxlZ2VuZElEICsgdGhpcy5nZW5lcmF0ZUlkKGxlZ2VuZE9wdGlvbiwgJ19zaGFwZV8nLCBpKSwgc3ltYm9sQ29sb3IsIDEsIHN5bWJvbENvbG9yLCAxLCAnJywgJycpO1xuICAgICAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQoaGVscGVyXzEuZHJhd1N5bWJvbChsZWdlbmRPcHRpb24ubG9jYXRpb24sIHNoYXBlLCBuZXcgaGVscGVyXzEuU2l6ZSh0aGlzLmxlZ2VuZC5zaGFwZVdpZHRoLCB0aGlzLmxlZ2VuZC5zaGFwZUhlaWdodCksICcnLCBzeW1ib2xPcHRpb24sICdDbGljayB0byBzaG93IG9yIGhpZGUgdGhlICcgKyBsZWdlbmRPcHRpb24udGV4dCArICcgc2VyaWVzJykpO1xuICAgICAgICAgICAgaWYgKHNoYXBlID09PSAnTGluZScgJiYgbGVnZW5kT3B0aW9uLm1hcmtlclZpc2liaWxpdHkgJiYgbGVnZW5kT3B0aW9uLm1hcmtlclNoYXBlICE9PSAnSW1hZ2UnIHx8XG4gICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLnR5cGUgPT09ICdEb3VnaG51dCcpIHtcbiAgICAgICAgICAgICAgICBzeW1ib2xPcHRpb24uaWQgPSB0aGlzLmxlZ2VuZElEICsgdGhpcy5nZW5lcmF0ZUlkKGxlZ2VuZE9wdGlvbiwgJ19zaGFwZV9tYXJrZXJfJywgaSk7XG4gICAgICAgICAgICAgICAgc2hhcGUgPSBsZWdlbmRPcHRpb24udHlwZSA9PT0gJ0RvdWdobnV0JyA/ICdDaXJjbGUnIDogbGVnZW5kT3B0aW9uLm1hcmtlclNoYXBlO1xuICAgICAgICAgICAgICAgIHN5bWJvbE9wdGlvbi5maWxsID0gbGVnZW5kT3B0aW9uLnR5cGUgPT09ICdEb3VnaG51dCcgPyAnI0ZGRkZGRicgOiBzeW1ib2xPcHRpb24uZmlsbDtcbiAgICAgICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChoZWxwZXJfMS5kcmF3U3ltYm9sKGxlZ2VuZE9wdGlvbi5sb2NhdGlvbiwgc2hhcGUsIG5ldyBoZWxwZXJfMS5TaXplKHRoaXMubGVnZW5kLnNoYXBlV2lkdGggLyAyLCB0aGlzLmxlZ2VuZC5zaGFwZUhlaWdodCAvIDIpLCAnJywgc3ltYm9sT3B0aW9uLCAnQ2xpY2sgdG8gc2hvdyBvciBoaWRlIHRoZSAnICsgbGVnZW5kT3B0aW9uLnRleHQgKyAnIHNlcmllcycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmFzZUxlZ2VuZC5wcm90b3R5cGUucmVuZGVyVGV4dCA9IGZ1bmN0aW9uIChjaGFydCwgbGVnZW5kT3B0aW9uLCBncm91cCwgdGV4dE9wdGlvbnMsIGkpIHtcbiAgICAgICAgICAgIHZhciBsZWdlbmQgPSBjaGFydC5sZWdlbmRTZXR0aW5ncztcbiAgICAgICAgICAgIHZhciBoaWRkZW5Db2xvciA9ICcjRDNEM0QzJztcbiAgICAgICAgICAgIHRleHRPcHRpb25zLmlkID0gdGhpcy5sZWdlbmRJRCArIHRoaXMuZ2VuZXJhdGVJZChsZWdlbmRPcHRpb24sICdfdGV4dF8nLCBpKTtcbiAgICAgICAgICAgIHZhciBmb250Y29sb3IgPSBsZWdlbmRPcHRpb24udmlzaWJsZSA/IGxlZ2VuZC50ZXh0U3R5bGUuY29sb3IgOiBoaWRkZW5Db2xvcjtcbiAgICAgICAgICAgIHRleHRPcHRpb25zLnRleHQgPSBsZWdlbmRPcHRpb24udGV4dDtcbiAgICAgICAgICAgIHRleHRPcHRpb25zLnggPSBsZWdlbmRPcHRpb24ubG9jYXRpb24ueCArIChsZWdlbmQuc2hhcGVXaWR0aCAvIDIpICsgbGVnZW5kLnNoYXBlUGFkZGluZztcbiAgICAgICAgICAgIHRleHRPcHRpb25zLnkgPSBsZWdlbmRPcHRpb24ubG9jYXRpb24ueSArIHRoaXMubWF4SXRlbUhlaWdodCAvIDQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGhlbHBlcl8yLnRleHRFbGVtZW50KHRleHRPcHRpb25zLCBsZWdlbmQudGV4dFN0eWxlLCBmb250Y29sb3IsIGdyb3VwKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbGVnZW5kLmRlc2NyaXB0aW9uIHx8ICdDbGljayB0byBzaG93IG9yIGhpZGUgdGhlICcgKyBsZWdlbmRPcHRpb24udGV4dCArICcgc2VyaWVzJyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLnJlbmRlclBhZ2luZ0VsZW1lbnRzID0gZnVuY3Rpb24gKGNoYXJ0LCBib3VuZHMsIHRleHRPcHRpb24sIGxlZ2VuZEdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgcGFnaW5nZ3JvdXAgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiB0aGlzLmxlZ2VuZElEICsgJ19uYXZpZ2F0aW9uJyB9KTtcbiAgICAgICAgICAgIGxlZ2VuZEdyb3VwLmFwcGVuZENoaWxkKHBhZ2luZ2dyb3VwKTtcbiAgICAgICAgICAgIHZhciBncmF5Q29sb3IgPSAnIzU0NTQ1NCc7XG4gICAgICAgICAgICB2YXIgbGVnZW5kID0gY2hhcnQubGVnZW5kU2V0dGluZ3M7XG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IDg7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoYXJ0Q29udHJvbCB8fCAhdGhpcy5pc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRoaXMudG90YWxQYWdlcyAvIE1hdGgubWF4KDEsIHRoaXMucm93Q291bnQgLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodGhpcy50b3RhbFBhZ2VzIC8gdGhpcy5tYXhDb2x1bW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzeW1ib2xPcHRpb24gPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbih0aGlzLmxlZ2VuZElEICsgJ19wYWdldXAnLCAndHJhbnNwYXJlbnQnLCA1LCBncmF5Q29sb3IsIDEsICcnLCAnJyk7XG4gICAgICAgICAgICB2YXIgaWNvblNpemUgPSB0aGlzLnBhZ2VCdXR0b25TaXplO1xuICAgICAgICAgICAgcGFnaW5nZ3JvdXAuc2V0QXR0cmlidXRlKCdzdHlsZScsICdjdXJzb3I6IHBvaW50ZXInKTtcbiAgICAgICAgICAgIHRoaXMuY2xpcFBhdGhIZWlnaHQgPSAodGhpcy5yb3dDb3VudCAtIDEpICogKHRoaXMubWF4SXRlbUhlaWdodCArIGxlZ2VuZC5wYWRkaW5nKTtcbiAgICAgICAgICAgIHRoaXMuY2xpcFJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCB0aGlzLmNsaXBQYXRoSGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgdmFyIHggPSBib3VuZHMueCArIGljb25TaXplIC8gMjtcbiAgICAgICAgICAgIHZhciB5ID0gYm91bmRzLnkgKyB0aGlzLmNsaXBQYXRoSGVpZ2h0ICsgKChib3VuZHMuaGVpZ2h0IC0gdGhpcy5jbGlwUGF0aEhlaWdodCkgLyAyKTtcbiAgICAgICAgICAgIHBhZ2luZ2dyb3VwLmFwcGVuZENoaWxkKGhlbHBlcl8xLmRyYXdTeW1ib2woeyB4OiB4LCB5OiB5IH0sICdMZWZ0QXJyb3cnLCBuZXcgaGVscGVyXzEuU2l6ZShpY29uU2l6ZSwgaWNvblNpemUpLCAnJywgc3ltYm9sT3B0aW9uLCAnTGVmdEFycm93JykpO1xuICAgICAgICAgICAgdGV4dE9wdGlvbi54ID0geCArIChpY29uU2l6ZSAvIDIpICsgcGFkZGluZztcbiAgICAgICAgICAgIHZhciBzaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQodGhpcy50b3RhbFBhZ2VzICsgJy8nICsgdGhpcy50b3RhbFBhZ2VzLCBsZWdlbmQudGV4dFN0eWxlKTtcbiAgICAgICAgICAgIHRleHRPcHRpb24ueSA9IHkgKyAoc2l6ZS5oZWlnaHQgLyA0KTtcbiAgICAgICAgICAgIHRleHRPcHRpb24uaWQgPSB0aGlzLmxlZ2VuZElEICsgJ19wYWdlbnVtYmVyJztcbiAgICAgICAgICAgIHRleHRPcHRpb24udGV4dCA9ICcxLycgKyB0aGlzLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICB2YXIgcGFnZVRleHRFbGVtZW50ID0gaGVscGVyXzIudGV4dEVsZW1lbnQodGV4dE9wdGlvbiwgbGVnZW5kLnRleHRTdHlsZSwgbGVnZW5kLnRleHRTdHlsZS5jb2xvciwgcGFnaW5nZ3JvdXApO1xuICAgICAgICAgICAgeCA9ICh0ZXh0T3B0aW9uLnggKyBwYWRkaW5nICsgKGljb25TaXplIC8gMikgKyBzaXplLndpZHRoKTtcbiAgICAgICAgICAgIHN5bWJvbE9wdGlvbi5pZCA9IHRoaXMubGVnZW5kSUQgKyAnX3BhZ2Vkb3duJztcbiAgICAgICAgICAgIHBhZ2luZ2dyb3VwLmFwcGVuZENoaWxkKGhlbHBlcl8xLmRyYXdTeW1ib2woeyB4OiB4LCB5OiB5IH0sICdSaWdodEFycm93JywgbmV3IGhlbHBlcl8xLlNpemUoaWNvblNpemUsIGljb25TaXplKSwgJycsIHN5bWJvbE9wdGlvbiwgJ1JpZ2h0QXJyb3cnKSk7XG4gICAgICAgICAgICBwYWdpbmdncm91cC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChib3VuZHMud2lkdGggLSAoMiAqIChpY29uU2l6ZSArIHBhZGRpbmcpICtcbiAgICAgICAgICAgICAgICBwYWRkaW5nICsgc2l6ZS53aWR0aCkpICsgJywgJyArIDAgKyAnKScpO1xuICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVQYWdlKHBhZ2VUZXh0RWxlbWVudCwgdGhpcy5jdXJyZW50UGFnZSAtIDEsIHRoaXMuY3VycmVudFBhZ2UpO1xuICAgICAgICB9O1xuICAgICAgICBCYXNlTGVnZW5kLnByb3RvdHlwZS50cmFuc2xhdGVQYWdlID0gZnVuY3Rpb24gKHBhZ2luZ1RleHQsIHBhZ2UsIHBhZ2VOdW1iZXIpIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gKHRoaXMuY2xpcFBhdGhIZWlnaHQpICogcGFnZTtcbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSAndHJhbnNsYXRlKDAsLScgKyBzaXplICsgJyknO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2hhcnRDb250cm9sICYmIHRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgIHZhciBwYWdlTGVuZ3RoID0gcGFnZSAqIHRoaXMubWF4Q29sdW1ucztcbiAgICAgICAgICAgICAgICBzaXplID0gdGhpcy5wYWdlWENvbGxlY3Rpb25zW3BhZ2UgKiB0aGlzLm1heENvbHVtbnNdIC0gdGhpcy5sZWdlbmRCb3VuZHMueDtcbiAgICAgICAgICAgICAgICBzaXplID0gc2l6ZSA8IDAgPyAwIDogc2l6ZTtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGUgPSAndHJhbnNsYXRlKC0nICsgc2l6ZSArICcsMCknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sZWdlbmRUcmFuc2xhdGVHcm91cC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICBwYWdpbmdUZXh0LnRleHRDb250ZW50ID0gKHBhZ2VOdW1iZXIpICsgJy8nICsgdGhpcy50b3RhbFBhZ2VzO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHBhZ2VOdW1iZXI7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLmNoYW5nZVBhZ2UgPSBmdW5jdGlvbiAoZXZlbnQsIHBhZ2VVcCkge1xuICAgICAgICAgICAgdmFyIHBhZ2VUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5sZWdlbmRJRCArICdfcGFnZW51bWJlcicpO1xuICAgICAgICAgICAgdmFyIHBhZ2UgPSBwYXJzZUludChwYWdlVGV4dC50ZXh0Q29udGVudC5zcGxpdCgnLycpWzBdLCAxMCk7XG4gICAgICAgICAgICBpZiAocGFnZVVwICYmIHBhZ2UgPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2xhdGVQYWdlKHBhZ2VUZXh0LCAocGFnZSAtIDIpLCAocGFnZSAtIDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFwYWdlVXAgJiYgcGFnZSA8IHRoaXMudG90YWxQYWdlcykge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNsYXRlUGFnZShwYWdlVGV4dCwgcGFnZSwgKHBhZ2UgKyAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhc2VMZWdlbmQucHJvdG90eXBlLmdlbmVyYXRlSWQgPSBmdW5jdGlvbiAob3B0aW9uLCBwcmVmaXgsIGNvdW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NoYXJ0Q29udHJvbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyBjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyBvcHRpb24ucG9pbnRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmFzZUxlZ2VuZC5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciB4ID0gdGhpcy5jaGFydC5tb3VzZVg7XG4gICAgICAgICAgICB2YXIgeSA9IHRoaXMuY2hhcnQubW91c2VZO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudC5pbmRleE9mKCcuLi4nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KHRoaXMubGVnZW5kSUQgKyAnX3RleHRfJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElkLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwYXJzZUludCh0YXJnZXRJZFsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuY2hhcnQuZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmlzVG91Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMi5yZW1vdmVFbGVtZW50KHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfRUoyX0xlZ2VuZF9Ub29sdGlwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NoYXJ0Q29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8yLnNob3dUb29sdGlwKHRoaXMuY2hhcnQuc2VyaWVzW2luZGV4XS5uYW1lLCB4LCB5LCBlbGVtZW50Lm9mZnNldFdpZHRoLCBlbGVtZW50LmlkICsgJ19FSjJfTGVnZW5kX1Rvb2x0aXAnLCBoZWxwZXJfMi5nZXRFbGVtZW50KHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb25fMSA9IHRoaXMuY2hhcnQucmVtb3ZlU3ZnT2Zmc2V0KHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8yLnNob3dUb29sdGlwKHRoaXMuY2hhcnQudmlzaWJsZVNlcmllc1swXS5wb2ludHNbaW5kZXhdLngudG9TdHJpbmcoKSwgbG9jYXRpb25fMS54ICsgMTAsIGxvY2F0aW9uXzEueSArIDEwLCBlbGVtZW50Lm9mZnNldFdpZHRoLCBlbGVtZW50LmlkICsgJ19FSjJfTGVnZW5kX1Rvb2x0aXAnLCBoZWxwZXJfMi5nZXRFbGVtZW50KHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5yZW1vdmVFbGVtZW50KHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfRUoyX0xlZ2VuZF9Ub29sdGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xlYXJUb29sdGlwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVG9vbHRpcCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBoZWxwZXJfMi5yZW1vdmVFbGVtZW50KF90aGlzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX0VKMl9MZWdlbmRfVG9vbHRpcCcpOyB9LCAxMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhc2VMZWdlbmQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkJhc2VMZWdlbmQgPSBCYXNlTGVnZW5kO1xuICAgIHZhciBMZWdlbmRPcHRpb25zID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gTGVnZW5kT3B0aW9ucyh0ZXh0LCBmaWxsLCBzaGFwZSwgdmlzaWJsZSwgdHlwZSwgbWFya2VyU2hhcGUsIG1hcmtlclZpc2liaWxpdHksIHBvaW50SW5kZXgsIHNlcmllc0luZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0geyB4OiAwLCB5OiAwIH07XG4gICAgICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICAgICAgdGhpcy5maWxsID0gZmlsbDtcbiAgICAgICAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJWaXNpYmlsaXR5ID0gbWFya2VyVmlzaWJpbGl0eTtcbiAgICAgICAgICAgIHRoaXMubWFya2VyU2hhcGUgPSBtYXJrZXJTaGFwZTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRJbmRleCA9IHBvaW50SW5kZXg7XG4gICAgICAgICAgICB0aGlzLnNlcmllc0luZGV4ID0gc2VyaWVzSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIExlZ2VuZE9wdGlvbnM7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkxlZ2VuZE9wdGlvbnMgPSBMZWdlbmRPcHRpb25zO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21tb24vbGVnZW5kL2xlZ2VuZC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9iYXNlXCIsIFwiLi4vc2VyaWVzL2NoYXJ0LXNlcmllc1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBiYXNlXzEsIGNoYXJ0X3Nlcmllc18xLCBoZWxwZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVGVjaG5pY2FsSW5kaWNhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRlY2huaWNhbEluZGljYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGVjaG5pY2FsSW5kaWNhdG9yKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jbGlwUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUuc2V0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChzZXJpZXMsIGNoYXJ0KSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy54RGF0YSA9IHNlcmllcy54RGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLnlEYXRhID0gc2VyaWVzLnlEYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRzID0gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0eXBlID0gaGVscGVyXzEuZmlyc3RUb0xvd2VyQ2FzZSh0aGlzLnR5cGUpO1xuICAgICAgICAgICAgY2hhcnRbdHlwZSArICdJbmRpY2F0b3JNb2R1bGUnXS5pbml0RGF0YVNvdXJjZSh0aGlzLCBjaGFydCk7XG4gICAgICAgICAgICBjaGFydC52aXNpYmxlU2VyaWVzQ291bnQgKz0gdGhpcy50YXJnZXRTZXJpZXMubGVuZ3RoO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVGVjaG5pY2FsSW5kaWNhdG9yO1xuICAgIH0oY2hhcnRfc2VyaWVzXzEuU2VyaWVzQmFzZSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTbWEnKVxuICAgIF0sIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDE0KVxuICAgIF0sIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUsIFwicGVyaW9kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTQpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJrUGVyaW9kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMylcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcImRQZXJpb2RcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg4MClcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcIm92ZXJCb3VnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgyMClcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcIm92ZXJTb2xkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMilcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcInN0YW5kYXJkRGV2aWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0Nsb3NlJylcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcImZpZWxkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMTIpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJzbG93UGVyaW9kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoMjYpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJmYXN0UGVyaW9kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkodHJ1ZSlcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcInNob3dab25lc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJyNmZjk5MzMnLCB3aWR0aDogMiB9LCBiYXNlXzEuQ29ubmVjdG9yKVxuICAgIF0sIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUsIFwibWFjZExpbmVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQm90aCcpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJtYWNkVHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcjMmVjZDcxJylcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcIm1hY2RQb3NpdGl2ZUNvbG9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJyNlNzRjM2QnKVxuICAgIF0sIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUsIFwibWFjZE5lZ2F0aXZlQ29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgncmdiYSgyMTEsMjExLDIxMSwwLjI1KScpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJiYW5kQ29sb3JcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgY29sb3I6ICcjZmZiNzM1Jywgd2lkdGg6IDEgfSwgYmFzZV8xLkNvbm5lY3RvcilcbiAgICBdLCBUZWNobmljYWxJbmRpY2F0b3IucHJvdG90eXBlLCBcInVwcGVyTGluZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJyNmMmVjMmYnLCB3aWR0aDogMSB9LCBiYXNlXzEuQ29ubmVjdG9yKVxuICAgIF0sIFRlY2huaWNhbEluZGljYXRvci5wcm90b3R5cGUsIFwibG93ZXJMaW5lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IGNvbG9yOiAnI2YyZWMyZicsIHdpZHRoOiAxIH0sIGJhc2VfMS5Db25uZWN0b3IpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJwZXJpb2RMaW5lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgVGVjaG5pY2FsSW5kaWNhdG9yLnByb3RvdHlwZSwgXCJzZXJpZXNOYW1lXCIsIHZvaWQgMCk7XG4gICAgZXhwb3J0cy5UZWNobmljYWxJbmRpY2F0b3IgPSBUZWNobmljYWxJbmRpY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL3RlY2huaWNhbC1pbmRpY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vdXRpbHMvaGVscGVyXCIsIFwiLi4vbW9kZWwvY29uc3RhbnRzXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaGVscGVyXzEsIGNvbnN0YW50c18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBFeHBvcnRVdGlscyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEV4cG9ydFV0aWxzKGNvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbCA9IGNvbnRyb2w7XG4gICAgICAgIH1cbiAgICAgICAgRXhwb3J0VXRpbHMucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnByaW50V2luZG93ID0gd2luZG93Lm9wZW4oJycsICdwcmludCcsICdoZWlnaHQ9JyArIHdpbmRvdy5vdXRlckhlaWdodCArICcsd2lkdGg9JyArIHdpbmRvdy5vdXRlcldpZHRoICsgJyx0YWJiYXI9bm8nKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRXaW5kb3cubW92ZVRvKDAsIDApO1xuICAgICAgICAgICAgdGhpcy5wcmludFdpbmRvdy5yZXNpemVUbyhzY3JlZW4uYXZhaWxXaWR0aCwgc2NyZWVuLmF2YWlsSGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBodG1sQ29udGVudDogdGhpcy5nZXRIVE1MQ29udGVudChlbGVtZW50cyksIG5hbWU6IGNvbnN0YW50c18xLmJlZm9yZVByaW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb250cm9sLnRyaWdnZXIoY29uc3RhbnRzXzEuYmVmb3JlUHJpbnQsIGFyZ3NEYXRhKTtcbiAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgZWoyX2Jhc2VfMS5wcmludChhcmdzRGF0YS5odG1sQ29udGVudCwgdGhpcy5wcmludFdpbmRvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydFV0aWxzLnByb3RvdHlwZS5nZXRIVE1MQ29udGVudCA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgdmFyIGRpdiA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGhlbHBlcl8xLmdldEVsZW1lbnQodmFsdWUpLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGVsZW1lbnRzLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoaGVscGVyXzEuZ2V0RWxlbWVudChlbGVtZW50cykuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQodGhpcy5jb250cm9sLmVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaXY7XG4gICAgICAgIH07XG4gICAgICAgIEV4cG9ydFV0aWxzLnByb3RvdHlwZS5leHBvcnQgPSBmdW5jdGlvbiAodHlwZSwgZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdjYW52YXMnLCB7XG4gICAgICAgICAgICAgICAgaWQ6ICdlajItY2FudmFzJyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiB0aGlzLmNvbnRyb2wuYXZhaWxhYmxlU2l6ZS53aWR0aC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogdGhpcy5jb250cm9sLmF2YWlsYWJsZVNpemUuaGVpZ2h0LnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHRoaXMuY29udHJvbC5zdmdPYmplY3QpXSwgeyB0eXBlOiAnaW1hZ2Uvc3ZnK3htbCcgfSkpO1xuICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB2YXIgY3R4ID0gZWxlbWVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGVsZW1lbnQubXNUb0Jsb2IoKSwgZmlsZU5hbWUgKyAnLicgKyB0eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1VSSSA9IGVsZW1lbnQudG9EYXRhVVJMKCdpbWFnZS9wbmcnKS5yZXBsYWNlKCdpbWFnZS9wbmcnLCAnaW1hZ2Uvb2N0ZXQtc3RyZWFtJyk7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Rvd25sb2FkJzogZmlsZU5hbWUgKyAnLicgKyB0eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hyZWYnOiBpbWdVUklcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkuZGlzcGF0Y2hFdmVudChuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3OiB3aW5kb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGVzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW1hZ2Uuc3JjID0gdXJsO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gRXhwb3J0VXRpbHM7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkV4cG9ydFV0aWxzID0gRXhwb3J0VXRpbHM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi91dGlscy9leHBvcnQuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vYXhpcy9kb3VibGUtYXhpc1wiLCBcIi4uL3V0aWxzL2RvdWJsZS1yYW5nZVwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBkb3VibGVfYXhpc18xLCBkb3VibGVfcmFuZ2VfMSwgaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIERhdGVUaW1lID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKERhdGVUaW1lLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBEYXRlVGltZShjaGFydCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNoYXJ0KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5jYWxjdWxhdGVSYW5nZUFuZEludGVydmFsID0gZnVuY3Rpb24gKHNpemUsIGF4aXMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUmFuZ2UoYXhpcywgc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmdldEFjdHVhbFJhbmdlKGF4aXMsIHNpemUpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVJhbmdlUGFkZGluZyhheGlzLCBzaXplKTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVmlzaWJsZUxhYmVscyhheGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVRpbWUucHJvdG90eXBlLmdldEFjdHVhbFJhbmdlID0gZnVuY3Rpb24gKGF4aXMsIHNpemUpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgc2tlbGV0b246ICdmdWxsJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGF0ZVRpbWUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGRhdGVQYXJzZXIgPSB0aGlzLmNoYXJ0LmludGwuZ2V0RGF0ZVBhcnNlcihvcHRpb24pO1xuICAgICAgICAgICAgdmFyIGRhdGVGb3JtYXR0ZXIgPSB0aGlzLmNoYXJ0LmludGwuZ2V0RGF0ZUZvcm1hdChvcHRpb24pO1xuICAgICAgICAgICAgaWYgKChheGlzLm1pbmltdW0pICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSBEYXRlLnBhcnNlKGRhdGVQYXJzZXIoZGF0ZUZvcm1hdHRlcihheGlzLm1pbmltdW0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm1pbiA9PT0gbnVsbCB8fCB0aGlzLm1pbiA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSBEYXRlLnBhcnNlKGRhdGVQYXJzZXIoZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZSgxOTcwLCAxLCAxKSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoYXhpcy5tYXhpbXVtKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4ID0gRGF0ZS5wYXJzZShkYXRlUGFyc2VyKGRhdGVGb3JtYXR0ZXIoYXhpcy5tYXhpbXVtKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5tYXggPT09IG51bGwgfHwgdGhpcy5tYXggPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4ID0gRGF0ZS5wYXJzZShkYXRlUGFyc2VyKGRhdGVGb3JtYXR0ZXIobmV3IERhdGUoMTk3MCwgNSwgMSkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5taW4gPT09IHRoaXMubWF4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXggPSB0aGlzLm1heCArIDI1OTIwMDAwMDA7XG4gICAgICAgICAgICAgICAgdGhpcy5taW4gPSB0aGlzLm1pbiAtIDI1OTIwMDAwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlID0ge307XG4gICAgICAgICAgICBheGlzLmRvdWJsZVJhbmdlID0gbmV3IGRvdWJsZV9yYW5nZV8xLkRvdWJsZVJhbmdlKHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgICAgICAgICB2YXIgZGF0ZXRpbWVJbnRlcnZhbCA9IHRoaXMuY2FsY3VsYXRlRGF0ZVRpbWVOaWNlSW50ZXJ2YWwoYXhpcywgc2l6ZSwgYXhpcy5kb3VibGVSYW5nZS5zdGFydCwgYXhpcy5kb3VibGVSYW5nZS5lbmQpO1xuICAgICAgICAgICAgaWYgKCFheGlzLmludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5pbnRlcnZhbCA9IGRhdGV0aW1lSW50ZXJ2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLmludGVydmFsID0gYXhpcy5pbnRlcnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWluID0gYXhpcy5kb3VibGVSYW5nZS5zdGFydDtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWF4ID0gYXhpcy5kb3VibGVSYW5nZS5lbmQ7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5hcHBseVJhbmdlUGFkZGluZyA9IGZ1bmN0aW9uIChheGlzLCBzaXplKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gKGF4aXMuYWN0dWFsUmFuZ2UubWluKTtcbiAgICAgICAgICAgIHRoaXMuZW5kID0gKGF4aXMuYWN0dWFsUmFuZ2UubWF4KTtcbiAgICAgICAgICAgIHZhciBtaW5pbXVtO1xuICAgICAgICAgICAgdmFyIG1heGltdW07XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBheGlzLmFjdHVhbFJhbmdlLmludGVydmFsO1xuICAgICAgICAgICAgaWYgKCFheGlzLnNldFJhbmdlKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VQYWRkaW5nID0gYXhpcy5nZXRSYW5nZVBhZGRpbmcodGhpcy5jaGFydCk7XG4gICAgICAgICAgICAgICAgbWluaW11bSA9IG5ldyBEYXRlKHRoaXMuc3RhcnQpO1xuICAgICAgICAgICAgICAgIG1heGltdW0gPSBuZXcgRGF0ZSh0aGlzLmVuZCk7XG4gICAgICAgICAgICAgICAgdmFyIGludGVydmFsVHlwZSA9IGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZVBhZGRpbmcgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gbWluaW11bS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gbWF4aW11bS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJhbmdlUGFkZGluZyA9PT0gJ0FkZGl0aW9uYWwnIHx8IHJhbmdlUGFkZGluZyA9PT0gJ1JvdW5kJykge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGludGVydmFsVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWWVhcnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0WWVhcihtaW5pbXVtLCBtYXhpbXVtLCByYW5nZVBhZGRpbmcsIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ01vbnRocyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNb250aChtaW5pbXVtLCBtYXhpbXVtLCByYW5nZVBhZGRpbmcsIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0RheXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF5KG1pbmltdW0sIG1heGltdW0sIHJhbmdlUGFkZGluZywgaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnSG91cnMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SG91cihtaW5pbXVtLCBtYXhpbXVtLCByYW5nZVBhZGRpbmcsIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ01pbnV0ZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW51dGUgPSAobWluaW11bS5nZXRNaW51dGVzKCkgLyBpbnRlcnZhbCkgKiBpbnRlcnZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kTWludXRlID0gbWF4aW11bS5nZXRNaW51dGVzKCkgKyAobWluaW11bS5nZXRNaW51dGVzKCkgLSBtaW51dGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZVBhZGRpbmcgPT09ICdSb3VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IChuZXcgRGF0ZShtaW5pbXVtLmdldEZ1bGxZZWFyKCksIG1pbmltdW0uZ2V0TW9udGgoKSwgbWluaW11bS5nZXREYXRlKCksIG1pbmltdW0uZ2V0SG91cnMoKSwgbWludXRlLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IChuZXcgRGF0ZShtYXhpbXVtLmdldEZ1bGxZZWFyKCksIG1heGltdW0uZ2V0TW9udGgoKSwgbWF4aW11bS5nZXREYXRlKCksIG1heGltdW0uZ2V0SG91cnMoKSwgZW5kTWludXRlLCA1OSkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAobmV3IERhdGUobWluaW11bS5nZXRGdWxsWWVhcigpLCBtYXhpbXVtLmdldE1vbnRoKCksIG1pbmltdW0uZ2V0RGF0ZSgpLCBtaW5pbXVtLmdldEhvdXJzKCksIG1pbnV0ZSArICgtaW50ZXJ2YWwpLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IChuZXcgRGF0ZShtYXhpbXVtLmdldEZ1bGxZZWFyKCksIG1heGltdW0uZ2V0TW9udGgoKSwgbWF4aW11bS5nZXREYXRlKCksIG1heGltdW0uZ2V0SG91cnMoKSwgZW5kTWludXRlICsgKGludGVydmFsKSwgMCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTZWNvbmRzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gKG1pbmltdW0uZ2V0U2Vjb25kcygpIC8gaW50ZXJ2YWwpICogaW50ZXJ2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZFNlY29uZCA9IG1heGltdW0uZ2V0U2Vjb25kcygpICsgKG1pbmltdW0uZ2V0U2Vjb25kcygpIC0gc2Vjb25kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VQYWRkaW5nID09PSAnUm91bmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAobmV3IERhdGUobWluaW11bS5nZXRGdWxsWWVhcigpLCBtaW5pbXVtLmdldE1vbnRoKCksIG1pbmltdW0uZ2V0RGF0ZSgpLCBtaW5pbXVtLmdldEhvdXJzKCksIG1pbmltdW0uZ2V0TWludXRlcygpLCBzZWNvbmQsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gKG5ldyBEYXRlKG1heGltdW0uZ2V0RnVsbFllYXIoKSwgbWF4aW11bS5nZXRNb250aCgpLCBtYXhpbXVtLmdldERhdGUoKSwgbWF4aW11bS5nZXRIb3VycygpLCBtYXhpbXVtLmdldE1pbnV0ZXMoKSwgZW5kU2Vjb25kLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IChuZXcgRGF0ZShtaW5pbXVtLmdldEZ1bGxZZWFyKCksIG1pbmltdW0uZ2V0TW9udGgoKSwgbWluaW11bS5nZXREYXRlKCksIG1pbmltdW0uZ2V0SG91cnMoKSwgbWluaW11bS5nZXRNaW51dGVzKCksIHNlY29uZCArICgtaW50ZXJ2YWwpLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IChuZXcgRGF0ZShtYXhpbXVtLmdldEZ1bGxZZWFyKCksIG1heGltdW0uZ2V0TW9udGgoKSwgbWF4aW11bS5nZXREYXRlKCksIG1heGltdW0uZ2V0SG91cnMoKSwgbWF4aW11bS5nZXRNaW51dGVzKCksIGVuZFNlY29uZCArIChpbnRlcnZhbCksIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5taW4gPSAoYXhpcy5taW5pbXVtICE9IG51bGwpID8gdGhpcy5taW4gOiB0aGlzLnN0YXJ0O1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5tYXggPSAoYXhpcy5tYXhpbXVtICE9IG51bGwpID8gdGhpcy5tYXggOiB0aGlzLmVuZDtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UuZGVsdGEgPSAoYXhpcy5hY3R1YWxSYW5nZS5tYXggLSBheGlzLmFjdHVhbFJhbmdlLm1pbik7XG4gICAgICAgICAgICBheGlzLmRvdWJsZVJhbmdlID0gbmV3IGRvdWJsZV9yYW5nZV8xLkRvdWJsZVJhbmdlKGF4aXMuYWN0dWFsUmFuZ2UubWluLCBheGlzLmFjdHVhbFJhbmdlLm1heCk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVZpc2libGVSYW5nZShzaXplLCBheGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVRpbWUucHJvdG90eXBlLmdldFllYXIgPSBmdW5jdGlvbiAobWluaW11bSwgbWF4aW11bSwgcmFuZ2VQYWRkaW5nLCBpbnRlcnZhbCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0WWVhciA9IG1pbmltdW0uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHZhciBlbmRZZWFyID0gbWF4aW11bS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgaWYgKHJhbmdlUGFkZGluZyA9PT0gJ0FkZGl0aW9uYWwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IChuZXcgRGF0ZShzdGFydFllYXIgLSBpbnRlcnZhbCwgMSwgMSwgMCwgMCwgMCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IChuZXcgRGF0ZShlbmRZZWFyICsgaW50ZXJ2YWwsIDEsIDEsIDAsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gbmV3IERhdGUoc3RhcnRZZWFyLCAwLCAwLCAwLCAwLCAwKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSBuZXcgRGF0ZShlbmRZZWFyLCAxMSwgMzAsIDIzLCA1OSwgNTkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgRGF0ZVRpbWUucHJvdG90eXBlLmdldE1vbnRoID0gZnVuY3Rpb24gKG1pbmltdW0sIG1heGltdW0sIHJhbmdlUGFkZGluZywgaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IG1pbmltdW0uZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciBlbmRNb250aCA9IG1heGltdW0uZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIGlmIChyYW5nZVBhZGRpbmcgPT09ICdSb3VuZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gKG5ldyBEYXRlKG1pbmltdW0uZ2V0RnVsbFllYXIoKSwgbW9udGgsIDAsIDAsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAobmV3IERhdGUobWF4aW11bS5nZXRGdWxsWWVhcigpLCBlbmRNb250aCwgbmV3IERhdGUobWF4aW11bS5nZXRGdWxsWWVhcigpLCBtYXhpbXVtLmdldE1vbnRoKCksIDApLmdldERhdGUoKSwgMjMsIDU5LCA1OSkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAobmV3IERhdGUobWluaW11bS5nZXRGdWxsWWVhcigpLCBtb250aCArICgtaW50ZXJ2YWwpLCAxLCAwLCAwLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gKG5ldyBEYXRlKG1heGltdW0uZ2V0RnVsbFllYXIoKSwgZW5kTW9udGggKyAoaW50ZXJ2YWwpLCBlbmRNb250aCA9PT0gMiA/IDI4IDogMzAsIDAsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5nZXREYXkgPSBmdW5jdGlvbiAobWluaW11bSwgbWF4aW11bSwgcmFuZ2VQYWRkaW5nLCBpbnRlcnZhbCkge1xuICAgICAgICAgICAgdmFyIGRheSA9IG1pbmltdW0uZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgdmFyIGVuZERheSA9IG1heGltdW0uZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHJhbmdlUGFkZGluZyA9PT0gJ1JvdW5kJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAobmV3IERhdGUobWluaW11bS5nZXRGdWxsWWVhcigpLCBtaW5pbXVtLmdldE1vbnRoKCksIGRheSwgMCwgMCwgMCkpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IChuZXcgRGF0ZShtYXhpbXVtLmdldEZ1bGxZZWFyKCksIG1heGltdW0uZ2V0TW9udGgoKSwgZW5kRGF5LCAyMywgNTksIDU5KSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IChuZXcgRGF0ZShtaW5pbXVtLmdldEZ1bGxZZWFyKCksIG1pbmltdW0uZ2V0TW9udGgoKSwgZGF5ICsgKC1pbnRlcnZhbCksIDAsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAobmV3IERhdGUobWF4aW11bS5nZXRGdWxsWWVhcigpLCBtYXhpbXVtLmdldE1vbnRoKCksIGVuZERheSArIChpbnRlcnZhbCksIDAsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5nZXRIb3VyID0gZnVuY3Rpb24gKG1pbmltdW0sIG1heGltdW0sIHJhbmdlUGFkZGluZywgaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHZhciBob3VyID0gKG1pbmltdW0uZ2V0SG91cnMoKSAvIGludGVydmFsKSAqIGludGVydmFsO1xuICAgICAgICAgICAgdmFyIGVuZEhvdXIgPSBtYXhpbXVtLmdldEhvdXJzKCkgKyAobWluaW11bS5nZXRIb3VycygpIC0gaG91cik7XG4gICAgICAgICAgICBpZiAocmFuZ2VQYWRkaW5nID09PSAnUm91bmQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IChuZXcgRGF0ZShtaW5pbXVtLmdldEZ1bGxZZWFyKCksIG1pbmltdW0uZ2V0TW9udGgoKSwgbWluaW11bS5nZXREYXRlKCksIGhvdXIsIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAobmV3IERhdGUobWF4aW11bS5nZXRGdWxsWWVhcigpLCBtYXhpbXVtLmdldE1vbnRoKCksIG1heGltdW0uZ2V0RGF0ZSgpLCBlbmRIb3VyLCA1OSwgNTkpKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gKG5ldyBEYXRlKG1pbmltdW0uZ2V0RnVsbFllYXIoKSwgbWluaW11bS5nZXRNb250aCgpLCBtaW5pbXVtLmdldERhdGUoKSwgaG91ciArICgtaW50ZXJ2YWwpLCAwLCAwKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gKG5ldyBEYXRlKG1heGltdW0uZ2V0RnVsbFllYXIoKSwgbWF4aW11bS5nZXRNb250aCgpLCBtYXhpbXVtLmdldERhdGUoKSwgZW5kSG91ciArIChpbnRlcnZhbCksIDAsIDApKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5jYWxjdWxhdGVWaXNpYmxlUmFuZ2UgPSBmdW5jdGlvbiAoc2l6ZSwgYXhpcykge1xuICAgICAgICAgICAgYXhpcy52aXNpYmxlUmFuZ2UgPSBheGlzLmFjdHVhbFJhbmdlO1xuICAgICAgICAgICAgaWYgKGF4aXMuem9vbUZhY3RvciA8IDEgfHwgYXhpcy56b29tUG9zaXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgYXhpcy5jYWxjdWxhdGVWaXNpYmxlUmFuZ2Uoc2l6ZSk7XG4gICAgICAgICAgICAgICAgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwgPSAoYXhpcy5lbmFibGVBdXRvSW50ZXJ2YWxPblpvb21pbmcpID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEYXRlVGltZU5pY2VJbnRlcnZhbChheGlzLCBzaXplLCBheGlzLnZpc2libGVSYW5nZS5taW4sIGF4aXMudmlzaWJsZVJhbmdlLm1heClcbiAgICAgICAgICAgICAgICAgICAgOiBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXMuZGF0ZVRpbWVJbnRlcnZhbCA9IHRoaXMuaW5jcmVhc2VEYXRlVGltZUludGVydmFsKGF4aXMsIGF4aXMudmlzaWJsZVJhbmdlLm1pbiwgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwpLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgIC0gYXhpcy52aXNpYmxlUmFuZ2UubWluO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZS5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZUxhYmVscyA9IGZ1bmN0aW9uIChheGlzKSB7XG4gICAgICAgICAgICBheGlzLnZpc2libGVMYWJlbHMgPSBbXTtcbiAgICAgICAgICAgIHZhciB0ZW1wSW50ZXJ2YWwgPSBheGlzLnZpc2libGVSYW5nZS5taW47XG4gICAgICAgICAgICBpZiAoIWF4aXMuc2V0UmFuZ2UoKSkge1xuICAgICAgICAgICAgICAgIHRlbXBJbnRlcnZhbCA9IHRoaXMuYWxpZ25SYW5nZVN0YXJ0KGF4aXMsIHRlbXBJbnRlcnZhbCwgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwsIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmZvcm1hdCA9IHRoaXMuY2hhcnQuaW50bC5nZXREYXRlRm9ybWF0KHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGF4aXMubGFiZWxGb3JtYXQsIHR5cGU6IGhlbHBlcl8xLmZpcnN0VG9Mb3dlckNhc2UoYXhpcy5za2VsZXRvblR5cGUpLCBza2VsZXRvbjogdGhpcy5nZXRTa2VsZXRvbihheGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBheGlzLnN0YXJ0TGFiZWwgPSBheGlzLmZvcm1hdChuZXcgRGF0ZShheGlzLnZpc2libGVSYW5nZS5taW4pKTtcbiAgICAgICAgICAgIGF4aXMuZW5kTGFiZWwgPSBheGlzLmZvcm1hdChuZXcgRGF0ZShheGlzLnZpc2libGVSYW5nZS5tYXgpKTtcbiAgICAgICAgICAgIHdoaWxlICh0ZW1wSW50ZXJ2YWwgPD0gYXhpcy52aXNpYmxlUmFuZ2UubWF4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLndpdGhJbih0ZW1wSW50ZXJ2YWwsIGF4aXMudmlzaWJsZVJhbmdlKSkge1xuICAgICAgICAgICAgICAgICAgICBheGlzLnRyaWdnZXJMYWJlbFJlbmRlcih0aGlzLmNoYXJ0LCB0ZW1wSW50ZXJ2YWwsIGF4aXMuZm9ybWF0KG5ldyBEYXRlKHRlbXBJbnRlcnZhbCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVtcEludGVydmFsID0gdGhpcy5pbmNyZWFzZURhdGVUaW1lSW50ZXJ2YWwoYXhpcywgdGVtcEludGVydmFsLCBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXhpcy5nZXRNYXhMYWJlbFdpZHRoKHRoaXMuY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZS5wcm90b3R5cGUuaW5jcmVhc2VEYXRlVGltZUludGVydmFsID0gZnVuY3Rpb24gKGF4aXMsIHZhbHVlLCBpbnRlcnZhbCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIGludGVydmFsID0gTWF0aC5jZWlsKGludGVydmFsKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYXhpcy5hY3R1YWxJbnRlcnZhbFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdZZWFycyc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRGdWxsWWVhcihyZXN1bHQuZ2V0RnVsbFllYXIoKSArIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICBjYXNlICdNb250aHMnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0TW9udGgocmVzdWx0LmdldE1vbnRoKCkgKyBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGF5cyc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXREYXRlKHJlc3VsdC5nZXREYXRlKCkgKyBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnSG91cnMnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0SG91cnMocmVzdWx0LmdldEhvdXJzKCkgKyBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnTWludXRlcyc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRNaW51dGVzKHJlc3VsdC5nZXRNaW51dGVzKCkgKyBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnU2Vjb25kcyc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXRTZWNvbmRzKHJlc3VsdC5nZXRTZWNvbmRzKCkgKyBpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZS5wcm90b3R5cGUuYWxpZ25SYW5nZVN0YXJ0ID0gZnVuY3Rpb24gKGF4aXMsIHNEYXRlLCBpbnRlcnZhbFNpemUsIGludGVydmFsVHlwZSkge1xuICAgICAgICAgICAgdmFyIHNSZXN1bHQgPSBuZXcgRGF0ZShzRGF0ZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnWWVhcnMnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhciA9IE1hdGguZmxvb3IoTWF0aC5mbG9vcihzUmVzdWx0LmdldEZ1bGxZZWFyKCkgLyBpbnRlcnZhbFNpemUpICogaW50ZXJ2YWxTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jlc3VsdCA9IG5ldyBEYXRlKHllYXIsIHNSZXN1bHQuZ2V0TW9udGgoKSwgc1Jlc3VsdC5nZXREYXRlKCksIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc1Jlc3VsdDtcbiAgICAgICAgICAgICAgICBjYXNlICdNb250aHMnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBNYXRoLmZsb29yKE1hdGguZmxvb3IoKHNSZXN1bHQuZ2V0TW9udGgoKSkgLyBpbnRlcnZhbFNpemUpICogaW50ZXJ2YWxTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jlc3VsdCA9IG5ldyBEYXRlKHNSZXN1bHQuZ2V0RnVsbFllYXIoKSwgbW9udGgsIHNSZXN1bHQuZ2V0RGF0ZSgpLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNSZXN1bHQ7XG4gICAgICAgICAgICAgICAgY2FzZSAnRGF5cyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXkgPSBNYXRoLmZsb29yKE1hdGguZmxvb3IoKHNSZXN1bHQuZ2V0RGF0ZSgpKSAvIGludGVydmFsU2l6ZSkgKiBpbnRlcnZhbFNpemUpO1xuICAgICAgICAgICAgICAgICAgICBzUmVzdWx0ID0gbmV3IERhdGUoc1Jlc3VsdC5nZXRGdWxsWWVhcigpLCBzUmVzdWx0LmdldE1vbnRoKCksIGRheSwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzUmVzdWx0O1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hvdXJzJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBNYXRoLmZsb29yKE1hdGguZmxvb3IoKHNSZXN1bHQuZ2V0SG91cnMoKSkgLyBpbnRlcnZhbFNpemUpICogaW50ZXJ2YWxTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgc1Jlc3VsdCA9IG5ldyBEYXRlKHNSZXN1bHQuZ2V0RnVsbFllYXIoKSwgc1Jlc3VsdC5nZXRNb250aCgpLCBzUmVzdWx0LmdldERhdGUoKSwgaG91ciwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzUmVzdWx0O1xuICAgICAgICAgICAgICAgIGNhc2UgJ01pbnV0ZXMnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IoTWF0aC5mbG9vcigoc1Jlc3VsdC5nZXRNaW51dGVzKCkpIC8gaW50ZXJ2YWxTaXplKSAqIGludGVydmFsU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNSZXN1bHQgPSBuZXcgRGF0ZShzUmVzdWx0LmdldEZ1bGxZZWFyKCksIHNSZXN1bHQuZ2V0TW9udGgoKSwgc1Jlc3VsdC5nZXREYXRlKCksIHNSZXN1bHQuZ2V0SG91cnMoKSwgbWludXRlcywgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzUmVzdWx0O1xuICAgICAgICAgICAgICAgIGNhc2UgJ1NlY29uZHMnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IoTWF0aC5mbG9vcigoc1Jlc3VsdC5nZXRTZWNvbmRzKCkpIC8gaW50ZXJ2YWxTaXplKSAqIGludGVydmFsU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNSZXN1bHQgPSBuZXcgRGF0ZShzUmVzdWx0LmdldEZ1bGxZZWFyKCksIHNSZXN1bHQuZ2V0TW9udGgoKSwgc1Jlc3VsdC5nZXREYXRlKCksIHNSZXN1bHQuZ2V0SG91cnMoKSwgc1Jlc3VsdC5nZXRNaW51dGVzKCksIHNlY29uZHMsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc1Jlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzUmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZS5wcm90b3R5cGUuZ2V0U2tlbGV0b24gPSBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgdmFyIHNrZWxldG9uO1xuICAgICAgICAgICAgaWYgKGF4aXMuc2tlbGV0b24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpcy5za2VsZXRvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLmFjdHVhbEludGVydmFsVHlwZSA9PT0gJ1llYXJzJykge1xuICAgICAgICAgICAgICAgIHNrZWxldG9uID0gJ3lNTU0nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXhpcy5hY3R1YWxJbnRlcnZhbFR5cGUgPT09ICdNb250aHMnKSB7XG4gICAgICAgICAgICAgICAgc2tlbGV0b24gPSAnTU1NZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChheGlzLmFjdHVhbEludGVydmFsVHlwZSA9PT0gJ0RheXMnKSB7XG4gICAgICAgICAgICAgICAgc2tlbGV0b24gPSAneU1kJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID09PSAnSG91cnMnKSB7XG4gICAgICAgICAgICAgICAgc2tlbGV0b24gPSAnRUhtJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID09PSAnTWludXRlcycgfHwgYXhpcy5hY3R1YWxJbnRlcnZhbFR5cGUgPT09ICdTZWNvbmRzJykge1xuICAgICAgICAgICAgICAgIHNrZWxldG9uID0gJ0htcyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBza2VsZXRvbiA9ICdIbXMnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNrZWxldG9uO1xuICAgICAgICB9O1xuICAgICAgICBEYXRlVGltZS5wcm90b3R5cGUuY2FsY3VsYXRlRGF0ZVRpbWVOaWNlSW50ZXJ2YWwgPSBmdW5jdGlvbiAoYXhpcywgc2l6ZSwgc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgdmFyIG9uZURheSA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICAgICAgICB2YXIgc3RhcnREYXRlID0gbmV3IERhdGUoc3RhcnQpO1xuICAgICAgICAgICAgdmFyIGVuZERhdGUgPSBuZXcgRGF0ZShlbmQpO1xuICAgICAgICAgICAgdmFyIHRvdGFsRGF5cyA9IChNYXRoLmFicygoc3RhcnREYXRlLmdldFRpbWUoKSAtIGVuZERhdGUuZ2V0VGltZSgpKSAvIChvbmVEYXkpKSk7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWw7XG4gICAgICAgICAgICBheGlzLmFjdHVhbEludGVydmFsVHlwZSA9IGF4aXMuaW50ZXJ2YWxUeXBlO1xuICAgICAgICAgICAgc3dpdGNoIChheGlzLmludGVydmFsVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1llYXJzJzpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSB0aGlzLmNhbGN1bGF0ZU51bWVyaWNOaWNlSW50ZXJ2YWwoYXhpcywgdG90YWxEYXlzIC8gMzY1LCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnTW9udGhzJzpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSB0aGlzLmNhbGN1bGF0ZU51bWVyaWNOaWNlSW50ZXJ2YWwoYXhpcywgdG90YWxEYXlzIC8gMzAsIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdEYXlzJzpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSB0aGlzLmNhbGN1bGF0ZU51bWVyaWNOaWNlSW50ZXJ2YWwoYXhpcywgdG90YWxEYXlzLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSG91cnMnOlxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCB0b3RhbERheXMgKiAyNCwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ01pbnV0ZXMnOlxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCB0b3RhbERheXMgKiAyNCAqIDYwLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnU2Vjb25kcyc6XG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gdGhpcy5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsKGF4aXMsIHRvdGFsRGF5cyAqIDI0ICogNjAgKiA2MCwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0F1dG8nOlxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCB0b3RhbERheXMgLyAzNjUsIHNpemUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpcy5hY3R1YWxJbnRlcnZhbFR5cGUgPSAnWWVhcnMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gdGhpcy5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsKGF4aXMsIHRvdGFsRGF5cyAvIDMwLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID0gJ01vbnRocyc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSB0aGlzLmNhbGN1bGF0ZU51bWVyaWNOaWNlSW50ZXJ2YWwoYXhpcywgdG90YWxEYXlzLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID0gJ0RheXMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gdGhpcy5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsKGF4aXMsIHRvdGFsRGF5cyAqIDI0LCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID0gJ0hvdXJzJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHRoaXMuY2FsY3VsYXRlTnVtZXJpY05pY2VJbnRlcnZhbChheGlzLCB0b3RhbERheXMgKiAyNCAqIDYwLCBzaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID0gJ01pbnV0ZXMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gdGhpcy5jYWxjdWxhdGVOdW1lcmljTmljZUludGVydmFsKGF4aXMsIHRvdGFsRGF5cyAqIDI0ICogNjAgKiA2MCwgc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlID0gJ1NlY29uZHMnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdEYXRlVGltZSc7XG4gICAgICAgIH07XG4gICAgICAgIERhdGVUaW1lLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBEYXRlVGltZTtcbiAgICB9KGRvdWJsZV9heGlzXzEuRG91YmxlKSk7XG4gICAgZXhwb3J0cy5EYXRlVGltZSA9IERhdGVUaW1lO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9heGlzL2RhdGUtdGltZS1heGlzLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2F4aXMvZG91YmxlLWF4aXNcIiwgXCIuLi91dGlscy9kb3VibGUtcmFuZ2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZG91YmxlX2F4aXNfMSwgZG91YmxlX3JhbmdlXzEsIGhlbHBlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBDYXRlZ29yeSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhDYXRlZ29yeSwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ2F0ZWdvcnkoY2hhcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBjaGFydCkgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDYXRlZ29yeS5wcm90b3R5cGUuY2FsY3VsYXRlUmFuZ2VBbmRJbnRlcnZhbCA9IGZ1bmN0aW9uIChzaXplLCBheGlzKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVJhbmdlKGF4aXMsIHNpemUpO1xuICAgICAgICAgICAgdGhpcy5nZXRBY3R1YWxSYW5nZShheGlzLCBzaXplKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSYW5nZVBhZGRpbmcoYXhpcywgc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVZpc2libGVMYWJlbHMoYXhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENhdGVnb3J5LnByb3RvdHlwZS5nZXRBY3R1YWxSYW5nZSA9IGZ1bmN0aW9uIChheGlzLCBzaXplKSB7XG4gICAgICAgICAgICBheGlzLmRvdWJsZVJhbmdlID0gbmV3IGRvdWJsZV9yYW5nZV8xLkRvdWJsZVJhbmdlKHRoaXMubWluLCB0aGlzLm1heCk7XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlID0ge307XG4gICAgICAgICAgICBpZiAoIWF4aXMuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLmludGVydmFsID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihheGlzLmRvdWJsZVJhbmdlLmRlbHRhIC8gYXhpcy5nZXRBY3R1YWxEZXNpcmVkSW50ZXJ2YWxzQ291bnQoc2l6ZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UuaW50ZXJ2YWwgPSBNYXRoLmNlaWwoYXhpcy5pbnRlcnZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1pbiA9IGF4aXMuZG91YmxlUmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1heCA9IGF4aXMuZG91YmxlUmFuZ2UuZW5kO1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5kZWx0YSA9IGF4aXMuZG91YmxlUmFuZ2UuZGVsdGE7XG4gICAgICAgIH07XG4gICAgICAgIENhdGVnb3J5LnByb3RvdHlwZS5hcHBseVJhbmdlUGFkZGluZyA9IGZ1bmN0aW9uIChheGlzLCBzaXplKSB7XG4gICAgICAgICAgICB2YXIgdGlja3MgPSAoYXhpcy5sYWJlbFBsYWNlbWVudCA9PT0gJ0JldHdlZW5UaWNrcycgJiYgdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlICE9PSAnUG9sYXJSYWRhcicpID8gMC41IDogMDtcbiAgICAgICAgICAgIGlmICh0aWNrcyA+IDApIHtcbiAgICAgICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1pbiAtPSB0aWNrcztcbiAgICAgICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1heCArPSB0aWNrcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UubWF4ICs9IGF4aXMuYWN0dWFsUmFuZ2UubWF4ID8gMCA6IDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXMuZG91YmxlUmFuZ2UgPSBuZXcgZG91YmxlX3JhbmdlXzEuRG91YmxlUmFuZ2UoYXhpcy5hY3R1YWxSYW5nZS5taW4sIGF4aXMuYWN0dWFsUmFuZ2UubWF4KTtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UuZGVsdGEgPSBheGlzLmRvdWJsZVJhbmdlLmRlbHRhO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWaXNpYmxlUmFuZ2Uoc2l6ZSwgYXhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIENhdGVnb3J5LnByb3RvdHlwZS5jYWxjdWxhdGVWaXNpYmxlTGFiZWxzID0gZnVuY3Rpb24gKGF4aXMpIHtcbiAgICAgICAgICAgIGF4aXMudmlzaWJsZUxhYmVscyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRlbXBJbnRlcnZhbCA9IGF4aXMudmlzaWJsZVJhbmdlLm1pbiAtIChheGlzLnZpc2libGVSYW5nZS5taW4gJSBheGlzLnZpc2libGVSYW5nZS5pbnRlcnZhbCk7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb247XG4gICAgICAgICAgICBheGlzLnN0YXJ0TGFiZWwgPSBheGlzLmxhYmVsc1tNYXRoLnJvdW5kKGF4aXMudmlzaWJsZVJhbmdlLm1pbildO1xuICAgICAgICAgICAgYXhpcy5lbmRMYWJlbCA9IGF4aXMubGFiZWxzW01hdGguZmxvb3IoYXhpcy52aXNpYmxlUmFuZ2UubWF4KV07XG4gICAgICAgICAgICBmb3IgKDsgdGVtcEludGVydmFsIDw9IGF4aXMudmlzaWJsZVJhbmdlLm1heDsgdGVtcEludGVydmFsICs9IGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLndpdGhJbih0ZW1wSW50ZXJ2YWwsIGF4aXMudmlzaWJsZVJhbmdlKSAmJiBheGlzLmxhYmVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gTWF0aC5yb3VuZCh0ZW1wSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICBheGlzLnRyaWdnZXJMYWJlbFJlbmRlcih0aGlzLmNoYXJ0LCBwb3NpdGlvbiwgYXhpcy5sYWJlbHNbcG9zaXRpb25dID8gYXhpcy5sYWJlbHNbcG9zaXRpb25dIDogcG9zaXRpb24udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXhpcy5nZXRNYXhMYWJlbFdpZHRoKHRoaXMuY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBDYXRlZ29yeS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ2F0ZWdvcnknO1xuICAgICAgICB9O1xuICAgICAgICBDYXRlZ29yeS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ2F0ZWdvcnk7XG4gICAgfShkb3VibGVfYXhpc18xLkRvdWJsZSkpO1xuICAgIGV4cG9ydHMuQ2F0ZWdvcnkgPSBDYXRlZ29yeTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvYXhpcy9jYXRlZ29yeS1heGlzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL2F4aXMvZG91YmxlLWF4aXNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZG91YmxlX2F4aXNfMSwgaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIExvZ2FyaXRobWljID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKExvZ2FyaXRobWljLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBMb2dhcml0aG1pYyhjaGFydCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIGNoYXJ0KSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIExvZ2FyaXRobWljLnByb3RvdHlwZS5jYWxjdWxhdGVSYW5nZUFuZEludGVydmFsID0gZnVuY3Rpb24gKHNpemUsIGF4aXMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUmFuZ2UoYXhpcywgc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLmdldEFjdHVhbFJhbmdlKGF4aXMsIHNpemUpO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVWaXNpYmxlUmFuZ2Uoc2l6ZSwgYXhpcyk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVZpc2libGVMYWJlbHMoYXhpcywgdGhpcy5jaGFydCk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2FyaXRobWljLnByb3RvdHlwZS5nZXRBY3R1YWxSYW5nZSA9IGZ1bmN0aW9uIChheGlzLCBzaXplKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVEb3VibGVSYW5nZShheGlzKTtcbiAgICAgICAgICAgIHRoaXMubWluID0gdGhpcy5taW4gPCAwID8gMCA6IHRoaXMubWluO1xuICAgICAgICAgICAgdmFyIGxvZ1N0YXJ0ID0gaGVscGVyXzEubG9nQmFzZSh0aGlzLm1pbiwgYXhpcy5sb2dCYXNlKTtcbiAgICAgICAgICAgIGxvZ1N0YXJ0ID0gaXNGaW5pdGUobG9nU3RhcnQpID8gbG9nU3RhcnQgOiB0aGlzLm1pbjtcbiAgICAgICAgICAgIHZhciBsb2dFbmQgPSBoZWxwZXJfMS5sb2dCYXNlKHRoaXMubWF4LCBheGlzLmxvZ0Jhc2UpO1xuICAgICAgICAgICAgbG9nRW5kID0gaXNGaW5pdGUobG9nU3RhcnQpID8gbG9nRW5kIDogdGhpcy5tYXg7XG4gICAgICAgICAgICB0aGlzLm1pbiA9IE1hdGguZmxvb3IobG9nU3RhcnQgLyAxKTtcbiAgICAgICAgICAgIHRoaXMubWF4ID0gTWF0aC5jZWlsKGxvZ0VuZCAvIDEpO1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5pbnRlcnZhbCA9IGF4aXMuaW50ZXJ2YWwgfHwgdGhpcy5jYWxjdWxhdGVMb2dOaWNlSW50ZXJ2YWwodGhpcy5tYXggLSB0aGlzLm1pbiwgc2l6ZSwgYXhpcyk7XG4gICAgICAgICAgICBheGlzLmFjdHVhbFJhbmdlLm1pbiA9IHRoaXMubWluO1xuICAgICAgICAgICAgYXhpcy5hY3R1YWxSYW5nZS5tYXggPSB0aGlzLm1heDtcbiAgICAgICAgICAgIGF4aXMuYWN0dWFsUmFuZ2UuZGVsdGEgPSB0aGlzLm1heCAtIHRoaXMubWluO1xuICAgICAgICB9O1xuICAgICAgICBMb2dhcml0aG1pYy5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZVJhbmdlID0gZnVuY3Rpb24gKHNpemUsIGF4aXMpIHtcbiAgICAgICAgICAgIGF4aXMudmlzaWJsZVJhbmdlID0gYXhpcy5hY3R1YWxSYW5nZTtcbiAgICAgICAgICAgIGlmIChheGlzLnpvb21GYWN0b3IgPCAxIHx8IGF4aXMuem9vbVBvc2l0aW9uID4gMCkge1xuICAgICAgICAgICAgICAgIGF4aXMuY2FsY3VsYXRlVmlzaWJsZVJhbmdlKHNpemUpO1xuICAgICAgICAgICAgICAgIGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsID0gKGF4aXMuZW5hYmxlQXV0b0ludGVydmFsT25ab29taW5nKSA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlTG9nTmljZUludGVydmFsKGF4aXMuZG91YmxlUmFuZ2UuZGVsdGEsIHNpemUsIGF4aXMpXG4gICAgICAgICAgICAgICAgICAgIDogYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWw7XG4gICAgICAgICAgICAgICAgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwgPSBNYXRoLmZsb29yKGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsKSA9PT0gMCA/IDEgOiBNYXRoLmZsb29yKGF4aXMudmlzaWJsZVJhbmdlLmludGVydmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTG9nYXJpdGhtaWMucHJvdG90eXBlLmNhbGN1bGF0ZUxvZ05pY2VJbnRlcnZhbCA9IGZ1bmN0aW9uIChkZWx0YSwgc2l6ZSwgYXhpcykge1xuICAgICAgICAgICAgdmFyIGFjdHVhbERlc2lyZWRJbnRlcnZhbHNDb3VudCA9IGF4aXMuZ2V0QWN0dWFsRGVzaXJlZEludGVydmFsc0NvdW50KHNpemUpO1xuICAgICAgICAgICAgdmFyIG5pY2VJbnRlcnZhbCA9IGRlbHRhO1xuICAgICAgICAgICAgdmFyIG1pbkludGVydmFsID0gTWF0aC5wb3coMTAsIE1hdGguZmxvb3IoaGVscGVyXzEubG9nQmFzZShuaWNlSW50ZXJ2YWwsIDEwKSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbiA9IGF4aXMuaW50ZXJ2YWxEaXZzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbnRlcnZhbCA9IG1pbkludGVydmFsICogYXhpcy5pbnRlcnZhbERpdnNbal07XG4gICAgICAgICAgICAgICAgaWYgKGFjdHVhbERlc2lyZWRJbnRlcnZhbHNDb3VudCA8IChkZWx0YSAvIGN1cnJlbnRJbnRlcnZhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5pY2VJbnRlcnZhbCA9IGN1cnJlbnRJbnRlcnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuaWNlSW50ZXJ2YWw7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2FyaXRobWljLnByb3RvdHlwZS5jYWxjdWxhdGVWaXNpYmxlTGFiZWxzID0gZnVuY3Rpb24gKGF4aXMsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgdGVtcEludGVydmFsID0gYXhpcy52aXNpYmxlUmFuZ2UubWluO1xuICAgICAgICAgICAgYXhpcy52aXNpYmxlTGFiZWxzID0gW107XG4gICAgICAgICAgICBpZiAoYXhpcy56b29tRmFjdG9yIDwgMSB8fCBheGlzLnpvb21Qb3NpdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICB0ZW1wSW50ZXJ2YWwgPSBheGlzLnZpc2libGVSYW5nZS5taW4gLSAoYXhpcy52aXNpYmxlUmFuZ2UubWluICUgYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF4aXNGb3JtYXQgPSB0aGlzLmdldEZvcm1hdChheGlzKTtcbiAgICAgICAgICAgIHZhciBpc0N1c3RvbUZvcm1hdCA9IGF4aXNGb3JtYXQubWF0Y2goJ3t2YWx1ZX0nKSAhPT0gbnVsbDtcbiAgICAgICAgICAgIGF4aXMuZm9ybWF0ID0gY2hhcnQuaW50bC5nZXROdW1iZXJGb3JtYXQoeyBmb3JtYXQ6IGlzQ3VzdG9tRm9ybWF0ID8gJycgOiBheGlzRm9ybWF0LFxuICAgICAgICAgICAgICAgIHVzZUdyb3VwaW5nOiBjaGFydC51c2VHcm91cGluZ1NlcGFyYXRvciB9KTtcbiAgICAgICAgICAgIGF4aXMuc3RhcnRMYWJlbCA9IGF4aXMuZm9ybWF0KE1hdGgucG93KGF4aXMubG9nQmFzZSwgYXhpcy52aXNpYmxlUmFuZ2UubWluKSk7XG4gICAgICAgICAgICBheGlzLmVuZExhYmVsID0gYXhpcy5mb3JtYXQoTWF0aC5wb3coYXhpcy5sb2dCYXNlLCBheGlzLnZpc2libGVSYW5nZS5tYXgpKTtcbiAgICAgICAgICAgIGZvciAoOyB0ZW1wSW50ZXJ2YWwgPD0gYXhpcy52aXNpYmxlUmFuZ2UubWF4OyB0ZW1wSW50ZXJ2YWwgKz0gYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVscGVyXzEud2l0aEluKHRlbXBJbnRlcnZhbCwgYXhpcy5hY3R1YWxSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy50cmlnZ2VyTGFiZWxSZW5kZXIodGhpcy5jaGFydCwgdGVtcEludGVydmFsLCB0aGlzLmZvcm1hdFZhbHVlKGF4aXMsIGlzQ3VzdG9tRm9ybWF0LCBheGlzRm9ybWF0LCBNYXRoLnBvdyhheGlzLmxvZ0Jhc2UsIHRlbXBJbnRlcnZhbCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBheGlzLmdldE1heExhYmVsV2lkdGgodGhpcy5jaGFydCk7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2FyaXRobWljLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdMb2dhcml0aG1pYyc7XG4gICAgICAgIH07XG4gICAgICAgIExvZ2FyaXRobWljLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMb2dhcml0aG1pYztcbiAgICB9KGRvdWJsZV9heGlzXzEuRG91YmxlKSk7XG4gICAgZXhwb3J0cy5Mb2dhcml0aG1pYyA9IExvZ2FyaXRobWljO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9heGlzL2xvZ2FyaXRobWljLWF4aXMuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGhlbHBlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdHJpcExpbmUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBTdHJpcExpbmUoKSB7XG4gICAgICAgIH1cbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5tZWFzdXJlU3RyaXBMaW5lID0gZnVuY3Rpb24gKGF4aXMsIHN0cmlwbGluZSwgc2VyaWVzQ2xpcFJlY3QpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5nZXRGcm9tVG92YWx1ZShzdHJpcGxpbmUuc3RhcnQsIHN0cmlwbGluZS5lbmQsIHN0cmlwbGluZS5zaXplLCBzdHJpcGxpbmUuc3RhcnRGcm9tQXhpcywgYXhpcyk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gKGF4aXMub3JpZW50YXRpb24gPT09ICdWZXJ0aWNhbCcpID8gKHJlY3QudG8gLSByZWN0LmZyb20pICogYXhpcy5yZWN0LmhlaWdodCA6IHNlcmllc0NsaXBSZWN0LmhlaWdodDtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpID8gKHJlY3QudG8gLSByZWN0LmZyb20pICogYXhpcy5yZWN0LndpZHRoIDogc2VyaWVzQ2xpcFJlY3Qud2lkdGg7XG4gICAgICAgICAgICB2YXIgeCA9IChheGlzLm9yaWVudGF0aW9uID09PSAnVmVydGljYWwnKSA/IHNlcmllc0NsaXBSZWN0LnggOiAoKHJlY3QuZnJvbSAqIGF4aXMucmVjdC53aWR0aCkgKyBheGlzLnJlY3QueCk7XG4gICAgICAgICAgICB2YXIgeSA9IChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpID8gc2VyaWVzQ2xpcFJlY3QueSA6IChheGlzLnJlY3QueSArIGF4aXMucmVjdC5oZWlnaHQgLVxuICAgICAgICAgICAgICAgIChyZWN0LnRvICogYXhpcy5yZWN0LmhlaWdodCkpO1xuICAgICAgICAgICAgaWYgKGhlaWdodCAhPT0gMCAmJiB3aWR0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaGVscGVyXzEuUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgaGVscGVyXzEuUmVjdCgwLCAwLCAwLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5nZXRGcm9tVG92YWx1ZSA9IGZ1bmN0aW9uIChzdGFydCwgZW5kLCBzaXplLCBzdGFydEZyb21BeGlzLCBheGlzKSB7XG4gICAgICAgICAgICB2YXIgZnJvbSA9IHN0YXJ0RnJvbUF4aXMgPyBheGlzLnZpc2libGVSYW5nZS5taW4gOiB0aGlzLmZpbmRWYWx1ZShNYXRoLm1pbihzdGFydCwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlbmQpID8gc3RhcnQgOiBlbmQpLCBheGlzKTtcbiAgICAgICAgICAgIHZhciB0byA9IHRoaXMuZmluZFZhbHVlKHRoaXMuZ2V0VG9WYWx1ZShNYXRoLm1heChzdGFydCwgZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlbmQpID8gc3RhcnQgOiBlbmQpLCBmcm9tLCBzaXplLCBheGlzLCBlbmQpLCBheGlzKTtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGhlbHBlcl8xLnZhbHVlVG9Db2VmZmljaWVudChheGlzLmlzSW52ZXJzZWQgPyB0byA6IGZyb20sIGF4aXMpLCB0bzogaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KGF4aXMuaXNJbnZlcnNlZCA/IGZyb20gOiB0bywgYXhpcykgfTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5nZXRUb1ZhbHVlID0gZnVuY3Rpb24gKHRvLCBmcm9tLCBzaXplLCBheGlzLCBlbmQpIHtcbiAgICAgICAgICAgIGlmIChheGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlbmQpID8gbmV3IERhdGUobmV3IERhdGUoZnJvbSkuZ2V0VGltZSgpICsgc2l6ZSkgOiB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChlbmQpID8gKGF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnID8gTWF0aC5wb3coYXhpcy5sb2dCYXNlLCBmcm9tKSA6IGZyb20pICsgc2l6ZSA6IHRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTdHJpcExpbmUucHJvdG90eXBlLmZpbmRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgYXhpcykge1xuICAgICAgICAgICAgaWYgKGF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBoZWxwZXJfMS5sb2dCYXNlKHZhbHVlLCBheGlzLmxvZ0Jhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlIDwgYXhpcy52aXNpYmxlUmFuZ2UubWluKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBheGlzLnZpc2libGVSYW5nZS5taW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IGF4aXMudmlzaWJsZVJhbmdlLm1heCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gYXhpcy52aXNpYmxlUmFuZ2UubWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpcExpbmUucHJvdG90eXBlLnJlbmRlclN0cmlwTGluZSA9IGZ1bmN0aW9uIChjaGFydCwgcG9zaXRpb24sIGF4ZXMpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGNoYXJ0LmVsZW1lbnQuaWQgKyAnX3N0cmlwbGluZV8nICsgcG9zaXRpb24gKyAnXyc7XG4gICAgICAgICAgICB2YXIgc3RyaXBsaW5lR3JvdXAgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiBpZCArICdjb2xsZWN0aW9ucycgfSk7XG4gICAgICAgICAgICB2YXIgc2VyaWVzQ2xpcFJlY3QgPSBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgICAgIHZhciByZWN0O1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgYXhlc18xID0gYXhlczsgX2kgPCBheGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF4aXMgPSBheGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBheGlzLnN0cmlwTGluZXM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJpcGxpbmUgPSBfYltfYV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHJpcGxpbmUudmlzaWJsZSAmJiBzdHJpcGxpbmUuekluZGV4ID09PSBwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHRoaXMubWVhc3VyZVN0cmlwTGluZShheGlzLCBzdHJpcGxpbmUsIHNlcmllc0NsaXBSZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUmVjdGFuZ2xlKHN0cmlwbGluZSwgcmVjdCwgaWQgKyAncmVjdF8nICsgY291bnQsIHN0cmlwbGluZUdyb3VwLCBjaGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRleHQoc3RyaXBsaW5lLCByZWN0LCBpZCArICd0ZXh0XycgKyBjb3VudCwgc3RyaXBsaW5lR3JvdXAsIGNoYXJ0LCBheGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFydC5zdmdPYmplY3QuYXBwZW5kQ2hpbGQoc3RyaXBsaW5lR3JvdXApO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpcExpbmUucHJvdG90eXBlLnJlbmRlclJlY3RhbmdsZSA9IGZ1bmN0aW9uIChzdHJpcGxpbmUsIHJlY3QsIGlkLCBwYXJlbnQsIGNoYXJ0KSB7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbihpZCwgc3RyaXBsaW5lLmNvbG9yLCBzdHJpcGxpbmUuYm9yZGVyLCBzdHJpcGxpbmUub3BhY2l0eSwgcmVjdCwgMCwgMCwgJycsICcnKSkpO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpcExpbmUucHJvdG90eXBlLnJlbmRlclRleHQgPSBmdW5jdGlvbiAoc3RyaXBsaW5lLCByZWN0LCBpZCwgcGFyZW50LCBjaGFydCwgYXhpcykge1xuICAgICAgICAgICAgdmFyIHRleHRTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQoc3RyaXBsaW5lLnRleHQsIHN0cmlwbGluZS50ZXh0U3R5bGUpO1xuICAgICAgICAgICAgdmFyIHRleHRNaWQgPSAzICogKHRleHRTaXplLmhlaWdodCAvIDgpO1xuICAgICAgICAgICAgdmFyIHR5ID0gcmVjdC55ICsgKHJlY3QuaGVpZ2h0IC8gMikgKyB0ZXh0TWlkO1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gKHN0cmlwbGluZS5yb3RhdGlvbiA9PT0gbnVsbCkgPyAoKGF4aXMub3JpZW50YXRpb24gPT09ICdWZXJ0aWNhbCcpID8gMCA6IC05MCkgOiBzdHJpcGxpbmUucm90YXRpb247XG4gICAgICAgICAgICB2YXIgdHggPSByZWN0LnggKyAocmVjdC53aWR0aCAvIDIpO1xuICAgICAgICAgICAgdmFyIGFsaWdubWVudDtcbiAgICAgICAgICAgIHZhciBhbmNob3I7XG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IDU7XG4gICAgICAgICAgICBpZiAoYXhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnKSB7XG4gICAgICAgICAgICAgICAgdHggPSB0aGlzLmdldFRleHRTdGFydCh0eCArICh0ZXh0TWlkICogdGhpcy5mYWN0b3Ioc3RyaXBsaW5lLmhvcml6b250YWxBbGlnbm1lbnQpKSwgcmVjdC53aWR0aCwgc3RyaXBsaW5lLmhvcml6b250YWxBbGlnbm1lbnQpO1xuICAgICAgICAgICAgICAgIHR5ID0gdGhpcy5nZXRUZXh0U3RhcnQodHkgLSB0ZXh0TWlkLCByZWN0LmhlaWdodCwgc3RyaXBsaW5lLnZlcnRpY2FsQWxpZ25tZW50KTtcbiAgICAgICAgICAgICAgICBhbGlnbm1lbnQgPSB0aGlzLmludmVydEFsaWdubWVudChzdHJpcGxpbmUudmVydGljYWxBbGlnbm1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHggPSB0aGlzLmdldFRleHRTdGFydCh0eCwgcmVjdC53aWR0aCwgc3RyaXBsaW5lLmhvcml6b250YWxBbGlnbm1lbnQpO1xuICAgICAgICAgICAgICAgIHR5ID0gdGhpcy5nZXRUZXh0U3RhcnQodHkgKyAodGV4dE1pZCAqIHRoaXMuZmFjdG9yKHN0cmlwbGluZS52ZXJ0aWNhbEFsaWdubWVudCkpIC0gcGFkZGluZywgcmVjdC5oZWlnaHQsIHN0cmlwbGluZS52ZXJ0aWNhbEFsaWdubWVudCk7XG4gICAgICAgICAgICAgICAgYWxpZ25tZW50ID0gc3RyaXBsaW5lLmhvcml6b250YWxBbGlnbm1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbmNob3IgPSBhbGlnbm1lbnQ7XG4gICAgICAgICAgICBoZWxwZXJfMS50ZXh0RWxlbWVudChuZXcgaGVscGVyXzEuVGV4dE9wdGlvbihpZCwgdHgsIHR5LCBhbmNob3IsIHN0cmlwbGluZS50ZXh0LCAncm90YXRlKCcgKyByb3RhdGlvbiArICcgJyArIHR4ICsgJywnICsgdHkgKyAnKScsICdtaWRkbGUnKSwgc3RyaXBsaW5lLnRleHRTdHlsZSwgc3RyaXBsaW5lLnRleHRTdHlsZS5jb2xvciwgcGFyZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5pbnZlcnRBbGlnbm1lbnQgPSBmdW5jdGlvbiAoYW5jaG9yKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGFuY2hvcikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1N0YXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gJ0VuZCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9ICdTdGFydCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFuY2hvcjtcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5mYWN0b3IgPSBmdW5jdGlvbiAoYW5jaG9yKSB7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gMDtcbiAgICAgICAgICAgIHN3aXRjaCAoYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdFbmQnOlxuICAgICAgICAgICAgICAgICAgICBmYWN0b3IgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yO1xuICAgICAgICB9O1xuICAgICAgICBTdHJpcExpbmUucHJvdG90eXBlLmdldFRleHRTdGFydCA9IGZ1bmN0aW9uICh4eSwgc2l6ZSwgdGV4dEFsaWdubWVudCkge1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgc3dpdGNoICh0ZXh0QWxpZ25tZW50KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnU3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICB4eSA9IHh5IC0gKHNpemUgLyAyKSArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgICAgICAgICAgICAgIHh5ID0geHkgKyAoc2l6ZSAvIDIpIC0gcGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geHk7XG4gICAgICAgIH07XG4gICAgICAgIFN0cmlwTGluZS5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnU3RyaXBMaW5lJztcbiAgICAgICAgfTtcbiAgICAgICAgU3RyaXBMaW5lLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RyaXBMaW5lO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TdHJpcExpbmUgPSBTdHJpcExpbmU7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L2F4aXMvc3RyaXAtbGluZS5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi9saW5lLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgbGluZV9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIExpbmVTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoTGluZVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTGluZVNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBMaW5lU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpIHtcbiAgICAgICAgICAgIHZhciBwb2ludDE7XG4gICAgICAgICAgICB2YXIgcG9pbnQyO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIHByZXZQb2ludCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgc3RhcnRQb2ludCA9ICdNJztcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgdmFyIGdldENvb3JkaW5hdGUgPSBzZXJpZXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInID8gaGVscGVyXzEuVHJhbnNmb3JtVG9WaXNpYmxlIDogaGVscGVyXzEuZ2V0UG9pbnQ7XG4gICAgICAgICAgICB2YXIgdmlzaWJsZVBvaW50cyA9IHRoaXMuaW1wcm92ZUNoYXJ0UGVyZm9ybWFuY2Uoc2VyaWVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlzaWJsZVBvaW50c18xID0gdmlzaWJsZVBvaW50czsgX2kgPCB2aXNpYmxlUG9pbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gdmlzaWJsZVBvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2UodmlzaWJsZVBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgdmlzaWJsZVBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2UG9pbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQxID0gZ2V0Q29vcmRpbmF0ZShwcmV2UG9pbnQueFZhbHVlLCBwcmV2UG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludDIgPSBnZXRDb29yZGluYXRlKHBvaW50LnhWYWx1ZSwgcG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KHN0YXJ0UG9pbnQgKyAnICcgKyAocG9pbnQxLngpICsgJyAnICsgKHBvaW50MS55KSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKHBvaW50Mi54KSArICcgJyArIChwb2ludDIueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9ICdMJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goZ2V0Q29vcmRpbmF0ZShwb2ludC54VmFsdWUsIHBvaW50LnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKG5ldyBoZWxwZXJfMS5SZWN0KHBvaW50LnN5bWJvbExvY2F0aW9uc1swXS54IC0gc2VyaWVzLm1hcmtlci53aWR0aCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkgLSBzZXJpZXMubWFya2VyLmhlaWdodCwgMiAqIHNlcmllcy5tYXJrZXIud2lkdGgsIDIgKiBzZXJpZXMubWFya2VyLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlBvaW50ID0gKHNlcmllcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSA9PT0gJ0Ryb3AnKSA/IHByZXZQb2ludCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQgPSAoc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlID09PSAnRHJvcCcpID8gc3RhcnRQb2ludCA6ICdNJztcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50MiA9IGdldENvb3JkaW5hdGUodmlzaWJsZVBvaW50c1t2aXNpYmxlUG9pbnRzLmxlbmd0aCAtIDFdLnhWYWx1ZSwgdmlzaWJsZVBvaW50c1t2aXNpYmxlUG9pbnRzLmxlbmd0aCAtIDFdLnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludDEgPSBnZXRDb29yZGluYXRlKHZpc2libGVQb2ludHNbMF0ueFZhbHVlLCB2aXNpYmxlUG9pbnRzWzBdLnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KHN0YXJ0UG9pbnQgKyAnICcgKyBwb2ludDIueCArICcgJyArIHBvaW50Mi55ICsgJyAnICsgJ0wnICsgJyAnICsgcG9pbnQxLnggKyAnICcgKyBwb2ludDEueSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5hbWUgPSBzZXJpZXMuY2F0ZWdvcnkgPT09ICdJbmRpY2F0b3InID8gc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX0luZGljYXRvcl8nICsgc2VyaWVzLmluZGV4ICsgJ18nICsgc2VyaWVzLm5hbWUgOlxuICAgICAgICAgICAgICAgIHNlcmllcy5jYXRlZ29yeSA9PT0gJ1RyZW5kTGluZScgPyBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuc291cmNlSW5kZXggKyAnX1RyZW5kTGluZV8nICsgc2VyaWVzLmluZGV4IDpcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzLmluZGV4O1xuICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKG5hbWUsICdub25lJywgc2VyaWVzLndpZHRoLCBzZXJpZXMuaW50ZXJpb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRMaW5lUGF0aChvcHRpb25zLCBzZXJpZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNYXJrZXIoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgTGluZVNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VyaWVzLmFuaW1hdGlvbjtcbiAgICAgICAgICAgIHRoaXMuZG9Qcm9ncmVzc2l2ZUFuaW1hdGlvbihzZXJpZXMsIG9wdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIExpbmVTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0xpbmVTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBMaW5lU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBMaW5lU2VyaWVzO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLkxpbmVTZXJpZXMgPSBMaW5lU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvbGluZS1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBlajJfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBMaW5lQmFzZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIExpbmVCYXNlKGNoYXJ0TW9kdWxlKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0ID0gY2hhcnRNb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmcgPSA1O1xuICAgICAgICB9XG4gICAgICAgIExpbmVCYXNlLnByb3RvdHlwZS5pbXByb3ZlQ2hhcnRQZXJmb3JtYW5jZSA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wUG9pbnRzID0gW107XG4gICAgICAgICAgICB2YXIgeFZpc2libGVSYW5nZSA9IHNlcmllcy54QXhpcy52aXNpYmxlUmFuZ2U7XG4gICAgICAgICAgICB2YXIgeVZpc2libGVSYW5nZSA9IHNlcmllcy55QXhpcy52aXNpYmxlUmFuZ2U7XG4gICAgICAgICAgICB2YXIgc2VyaWVzUG9pbnRzID0gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgIHZhciBhcmVhQm91bmRzID0gc2VyaWVzLmNsaXBSZWN0O1xuICAgICAgICAgICAgdmFyIHhUb2xlcmFuY2UgPSBNYXRoLmFicyh4VmlzaWJsZVJhbmdlLmRlbHRhIC8gYXJlYUJvdW5kcy53aWR0aCk7XG4gICAgICAgICAgICB2YXIgeVRvbGVyYW5jZSA9IE1hdGguYWJzKHlWaXNpYmxlUmFuZ2UuZGVsdGEgLyBhcmVhQm91bmRzLmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgcHJldlhWYWx1ZSA9IChzZXJpZXNQb2ludHNbMF0gJiYgc2VyaWVzUG9pbnRzWzBdLnggPiB4VG9sZXJhbmNlKSA/IDAgOiB4VG9sZXJhbmNlO1xuICAgICAgICAgICAgdmFyIHByZXZZVmFsdWUgPSAoc2VyaWVzUG9pbnRzWzBdICYmIHNlcmllc1BvaW50c1swXS55ID4geVRvbGVyYW5jZSkgPyAwIDogeVRvbGVyYW5jZTtcbiAgICAgICAgICAgIHZhciB4VmFsID0gMDtcbiAgICAgICAgICAgIHZhciB5VmFsID0gMDtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UG9pbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNlcmllc1BvaW50c18xID0gc2VyaWVzUG9pbnRzOyBfaSA8IHNlcmllc1BvaW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UG9pbnRfMSA9IHNlcmllc1BvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9pbnRfMS5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB4VmFsID0gY3VycmVudFBvaW50XzEueFZhbHVlID8gY3VycmVudFBvaW50XzEueFZhbHVlIDogeFZpc2libGVSYW5nZS5taW47XG4gICAgICAgICAgICAgICAgeVZhbCA9IGN1cnJlbnRQb2ludF8xLnlWYWx1ZSA/IGN1cnJlbnRQb2ludF8xLnlWYWx1ZSA6IHlWaXNpYmxlUmFuZ2UubWluO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhwcmV2WFZhbHVlIC0geFZhbCkgPj0geFRvbGVyYW5jZSB8fCBNYXRoLmFicyhwcmV2WVZhbHVlIC0geVZhbCkgPj0geVRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wUG9pbnRzLnB1c2goY3VycmVudFBvaW50XzEpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2WFZhbHVlID0geFZhbDtcbiAgICAgICAgICAgICAgICAgICAgcHJldllWYWx1ZSA9IHlWYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRlbXBQb2ludHM7XG4gICAgICAgIH07XG4gICAgICAgIExpbmVCYXNlLnByb3RvdHlwZS5hcHBlbmRMaW5lUGF0aCA9IGZ1bmN0aW9uIChvcHRpb25zLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBodG1sT2JqZWN0ID0gc2VyaWVzLmNoYXJ0LnJlbmRlcmVyLmRyYXdQYXRoKG9wdGlvbnMpO1xuICAgICAgICAgICAgc2VyaWVzLnBhdGhFbGVtZW50ID0gaHRtbE9iamVjdDtcbiAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKGh0bWxPYmplY3QpO1xuICAgICAgICAgICAgc2VyaWVzLmlzUmVjdFNlcmllcyA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBMaW5lQmFzZS5wcm90b3R5cGUucmVuZGVyTWFya2VyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgaWYgKHNlcmllcy5tYXJrZXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydC5tYXJrZXJSZW5kZXIucmVuZGVyKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExpbmVCYXNlLnByb3RvdHlwZS5kb1Byb2dyZXNzaXZlQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcywgb3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gbmV3IGVqMl9iYXNlXzEuQW5pbWF0aW9uKHt9KTtcbiAgICAgICAgICAgIHZhciBwYXRoID0gc2VyaWVzLnBhdGhFbGVtZW50O1xuICAgICAgICAgICAgdmFyIHN0cm9rZURhc2hBcnJheSA9IHBhdGguZ2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5Jyk7XG4gICAgICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHNlcmllcy5wYXRoRWxlbWVudC5nZXRUb3RhbExlbmd0aCgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgcGF0aC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBhbmltYXRpb24uYW5pbWF0ZShwYXRoLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbi5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICBkZWxheTogb3B0aW9uLmRlbGF5LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy50aW1lU3RhbXAgPj0gYXJncy5kZWxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBNYXRoLmFicyhNYXRoLnJvdW5kKCgoYXJncy50aW1lU3RhbXAgLSBhcmdzLmRlbGF5KSAqIHBhdGhMZW5ndGgpIC8gYXJncy5kdXJhdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBjdXJyZW50VGltZSArICcsJyArIHBhdGhMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIHN0cm9rZURhc2hBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydC50cmlnZ2VyKCdhbmltYXRpb25Db21wbGV0ZScsIHsgc2VyaWVzOiBzZXJpZXMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIExpbmVCYXNlLnByb3RvdHlwZS5kb0xpbmVhckFuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMsIGFuaW1hdGlvbikge1xuICAgICAgICAgICAgdmFyIGNsaXBSZWN0ID0gc2VyaWVzLmNsaXBSZWN0RWxlbWVudC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF07XG4gICAgICAgICAgICB2YXIgZWZmZWN0ID0gaGVscGVyXzEuZ2V0QW5pbWF0aW9uRnVuY3Rpb24oJ0xpbmVhcicpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRIZWlnaHQgPSArY2xpcFJlY3QuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50V2lkdGggPSArY2xpcFJlY3QuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xuICAgICAgICAgICAgdmFyIHhDZW50ZXIgPSArY2xpcFJlY3QuZ2V0QXR0cmlidXRlKCd4Jyk7XG4gICAgICAgICAgICB2YXIgeUNlbnRlciA9IHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gK2NsaXBSZWN0LmdldEF0dHJpYnV0ZSgnaGVpZ2h0JykgKyArY2xpcFJlY3QuZ2V0QXR0cmlidXRlKCd5JykgOlxuICAgICAgICAgICAgICAgICtjbGlwUmVjdC5nZXRBdHRyaWJ1dGUoJ3knKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIGNsaXBSZWN0LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV8xLkFuaW1hdGlvbih7fSkuYW5pbWF0ZShjbGlwUmVjdCwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBhbmltYXRpb24uZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZGVsYXk6IGFuaW1hdGlvbi5kZWxheSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3MudGltZVN0YW1wID49IGFyZ3MuZGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBSZWN0LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVmZmVjdChhcmdzLnRpbWVTdGFtcCAtIGFyZ3MuZGVsYXksIDAsIGVsZW1lbnRIZWlnaHQsIGFyZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBSZWN0LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeENlbnRlciArICcgJyArIHlDZW50ZXIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKSBzY2FsZSgxLCcgKyAodmFsdWUgLyBlbGVtZW50SGVpZ2h0KSArICcpIHRyYW5zbGF0ZSgnICsgKC14Q2VudGVyKSArICcgJyArICgteUNlbnRlcikgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlZmZlY3QoYXJncy50aW1lU3RhbXAgLSBhcmdzLmRlbGF5LCAwLCBlbGVtZW50V2lkdGgsIGFyZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBSZWN0LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgeENlbnRlciArICcgJyArIHlDZW50ZXIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKSBzY2FsZSgnICsgKHZhbHVlIC8gZWxlbWVudFdpZHRoKSArICcsIDEpIHRyYW5zbGF0ZSgnICsgKC14Q2VudGVyKSArICcgJyArICgteUNlbnRlcikgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICBjbGlwUmVjdC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwwKScpO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMuY2hhcnQudHJpZ2dlcignYW5pbWF0aW9uQ29tcGxldGUnLCB7IHNlcmllczogc2VyaWVzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gTGluZUJhc2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkxpbmVCYXNlID0gTGluZUJhc2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9saW5lLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vY29sdW1uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgY29sdW1uX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENvbHVtblNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ29sdW1uU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIENvbHVtblNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgICAgICB2YXIgc2lkZUJ5U2lkZUluZm8gPSB0aGlzLmdldFNpZGVCeVNpZGVJbmZvKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gTWF0aC5tYXgoc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4sIDApO1xuICAgICAgICAgICAgdmFyIGFyZ3NEYXRhO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50Q29sdW1uID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHBvaW50Q29sdW1uLnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50Q29sdW1uLnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRDb2x1bW4udmlzaWJsZSAmJiBoZWxwZXJfMS53aXRoSW5SYW5nZShzZXJpZXMucG9pbnRzW3BvaW50Q29sdW1uLmluZGV4IC0gMV0sIHBvaW50Q29sdW1uLCBzZXJpZXMucG9pbnRzW3BvaW50Q29sdW1uLmluZGV4ICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHRoaXMuZ2V0UmVjdGFuZ2xlKHBvaW50Q29sdW1uLnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLnN0YXJ0LCBwb2ludENvbHVtbi55VmFsdWUsIHBvaW50Q29sdW1uLnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLmVuZCwgb3JpZ2luLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBzZXJpZXMuY2F0ZWdvcnkgPT09ICdJbmRpY2F0b3InID8gcG9pbnRDb2x1bW4uY29sb3IgOiBzZXJpZXMuaW50ZXJpb3I7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhID0gdGhpcy50cmlnZ2VyRXZlbnQoc2VyaWVzLCBwb2ludENvbHVtbiwgY29sb3IsIHsgd2lkdGg6IHNlcmllcy5ib3JkZXIud2lkdGgsIGNvbG9yOiBzZXJpZXMuYm9yZGVyLmNvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTeW1ib2xMb2NhdGlvbihwb2ludENvbHVtbiwgcmVjdCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShzZXJpZXMsIHBvaW50Q29sdW1uLCByZWN0LCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtblNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGUoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uU2VyaWVzLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdDb2x1bW5TZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5TZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENvbHVtblNlcmllcztcbiAgICB9KGNvbHVtbl9iYXNlXzEuQ29sdW1uQmFzZSkpO1xuICAgIGV4cG9ydHMuQ29sdW1uU2VyaWVzID0gQ29sdW1uU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvY29sdW1uLXNlcmllcy5qc1xuLy8gbW9kdWxlIGlkID0gMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi91dGlscy9kb3VibGUtcmFuZ2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBkb3VibGVfcmFuZ2VfMSwgaGVscGVyXzEsIGhlbHBlcl8yLCBjb25zdGFudHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ29sdW1uQmFzZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIENvbHVtbkJhc2UoKSB7XG4gICAgICAgIH1cbiAgICAgICAgQ29sdW1uQmFzZS5wcm90b3R5cGUuZ2V0U2lkZUJ5U2lkZUluZm8gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LmVuYWJsZVNpZGVCeVNpZGVQbGFjZW1lbnQgJiYgIXNlcmllcy5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2lkZUJ5U2lkZVBvc2l0aW9ucyhzZXJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gIXNlcmllcy5jaGFydC5lbmFibGVTaWRlQnlTaWRlUGxhY2VtZW50ID8gMCA6IHNlcmllcy5wb3NpdGlvbjtcbiAgICAgICAgICAgIHZhciByZWN0Q291bnQgPSAhc2VyaWVzLmNoYXJ0LmVuYWJsZVNpZGVCeVNpZGVQbGFjZW1lbnQgPyAxIDogc2VyaWVzLnJlY3RDb3VudDtcbiAgICAgICAgICAgIHNlcmllcy5pc1JlY3RTZXJpZXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHZpc2libGVTZXJpZXMgPSBzZXJpZXMuY2hhcnQudmlzaWJsZVNlcmllcztcbiAgICAgICAgICAgIHZhciBzZXJpZXNTcGFjaW5nID0gc2VyaWVzLmNoYXJ0LmVuYWJsZVNpZGVCeVNpZGVQbGFjZW1lbnQgPyBzZXJpZXMuY29sdW1uU3BhY2luZyA6IDA7XG4gICAgICAgICAgICB2YXIgcG9pbnRTcGFjaW5nID0gc2VyaWVzLmNvbHVtbldpZHRoO1xuICAgICAgICAgICAgdmFyIG1pbmltdW1Qb2ludERlbHRhID0gaGVscGVyXzEuZ2V0TWluUG9pbnRzRGVsdGEoc2VyaWVzLnhBeGlzLCB2aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IG1pbmltdW1Qb2ludERlbHRhICogcG9pbnRTcGFjaW5nO1xuICAgICAgICAgICAgdmFyIHJhZGl1cztcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IChwb3NpdGlvbikgLyByZWN0Q291bnQgLSAwLjU7XG4gICAgICAgICAgICB2YXIgZG91YmxlUmFuZ2UgPSBuZXcgZG91YmxlX3JhbmdlXzEuRG91YmxlUmFuZ2UobG9jYXRpb24sIGxvY2F0aW9uICsgKDEgLyByZWN0Q291bnQpKTtcbiAgICAgICAgICAgIGlmICghKGlzTmFOKGRvdWJsZVJhbmdlLnN0YXJ0KSB8fCBpc05hTihkb3VibGVSYW5nZS5lbmQpKSkge1xuICAgICAgICAgICAgICAgIGRvdWJsZVJhbmdlID0gbmV3IGRvdWJsZV9yYW5nZV8xLkRvdWJsZVJhbmdlKGRvdWJsZVJhbmdlLnN0YXJ0ICogd2lkdGgsIGRvdWJsZVJhbmdlLmVuZCAqIHdpZHRoKTtcbiAgICAgICAgICAgICAgICByYWRpdXMgPSBzZXJpZXNTcGFjaW5nICogZG91YmxlUmFuZ2UuZGVsdGE7XG4gICAgICAgICAgICAgICAgZG91YmxlUmFuZ2UgPSBuZXcgZG91YmxlX3JhbmdlXzEuRG91YmxlUmFuZ2UoZG91YmxlUmFuZ2Uuc3RhcnQgKyByYWRpdXMgLyAyLCBkb3VibGVSYW5nZS5lbmQgLSByYWRpdXMgLyAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb3VibGVSYW5nZTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQmFzZS5wcm90b3R5cGUuZ2V0UmVjdGFuZ2xlID0gZnVuY3Rpb24gKHgxLCB5MSwgeDIsIHkyLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBwb2ludDEgPSBoZWxwZXJfMi5nZXRQb2ludCh4MSwgeTEsIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyk7XG4gICAgICAgICAgICB2YXIgcG9pbnQyID0gaGVscGVyXzIuZ2V0UG9pbnQoeDIsIHkyLCBzZXJpZXMueEF4aXMsIHNlcmllcy55QXhpcywgc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5SZWN0KE1hdGgubWluKHBvaW50MS54LCBwb2ludDIueCksIE1hdGgubWluKHBvaW50MS55LCBwb2ludDIueSksIE1hdGguYWJzKHBvaW50Mi54IC0gcG9pbnQxLngpLCBNYXRoLmFicyhwb2ludDIueSAtIHBvaW50MS55KSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkJhc2UucHJvdG90eXBlLmdldFNpZGVCeVNpZGVQb3NpdGlvbnMgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSBzZXJpZXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgc2VyaWVzQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGNoYXJ0LmNvbHVtbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbkl0ZW0gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IGNoYXJ0LnJvd3M7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRSZWN0UG9zaXRpb24oc2VyaWVzLmZpbmRTZXJpZXNDb2xsZWN0aW9uKGNvbHVtbkl0ZW0sIGl0ZW0sIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5CYXNlLnByb3RvdHlwZS5maW5kUmVjdFBvc2l0aW9uID0gZnVuY3Rpb24gKHNlcmllc0NvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBzdGFja2luZ0dyb3VwID0gW107XG4gICAgICAgICAgICB2YXIgdlNlcmllcyA9IHsgcmVjdENvdW50OiAwLCBwb3NpdGlvbjogbnVsbCB9O1xuICAgICAgICAgICAgc2VyaWVzQ29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlLmluZGV4T2YoJ1N0YWNraW5nJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFja2luZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2tpbmdHcm91cFt2YWx1ZS5zdGFja2luZ0dyb3VwXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucG9zaXRpb24gPSB2U2VyaWVzLnJlY3RDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja2luZ0dyb3VwW3ZhbHVlLnN0YWNraW5nR3JvdXBdID0gdlNlcmllcy5yZWN0Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnBvc2l0aW9uID0gc3RhY2tpbmdHcm91cFt2YWx1ZS5zdGFja2luZ0dyb3VwXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2U2VyaWVzLnBvc2l0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucG9zaXRpb24gPSB2U2VyaWVzLnJlY3RDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2U2VyaWVzLnBvc2l0aW9uID0gdlNlcmllcy5yZWN0Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnBvc2l0aW9uID0gdlNlcmllcy5wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUucG9zaXRpb24gPSB2U2VyaWVzLnJlY3RDb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VyaWVzQ29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlLnJlY3RDb3VudCA9IHZTZXJpZXMucmVjdENvdW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkJhc2UucHJvdG90eXBlLnVwZGF0ZVN5bWJvbExvY2F0aW9uID0gZnVuY3Rpb24gKHBvaW50LCByZWN0LCBzZXJpZXMpIHtcbiAgICAgICAgICAgIGlmICghc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVhSZWdpb24ocG9pbnQsIHJlY3QsIHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVlSZWdpb24ocG9pbnQsIHJlY3QsIHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkJhc2UucHJvdG90eXBlLnVwZGF0ZVhSZWdpb24gPSBmdW5jdGlvbiAocG9pbnQsIHJlY3QsIHNlcmllcykge1xuICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKHJlY3QpO1xuICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IHJlY3QueCArIChyZWN0LndpZHRoKSAvIDIsXG4gICAgICAgICAgICAgICAgeTogKHNlcmllcy5zZXJpZXNUeXBlID09PSAnQm94UGxvdCcgfHwgc2VyaWVzLnNlcmllc1R5cGUuaW5kZXhPZignSGlnaExvdycpICE9PSAtMSB8fFxuICAgICAgICAgICAgICAgICAgICAocG9pbnQueVZhbHVlID49IDAgPT09ICFzZXJpZXMueUF4aXMuaXNJbnZlcnNlZCkpID8gcmVjdC55IDogKHJlY3QueSArIHJlY3QuaGVpZ2h0KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkJhc2UucHJvdG90eXBlLnVwZGF0ZVlSZWdpb24gPSBmdW5jdGlvbiAocG9pbnQsIHJlY3QsIHNlcmllcykge1xuICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKHJlY3QpO1xuICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHg6IChzZXJpZXMuc2VyaWVzVHlwZSA9PT0gJ0JveFBsb3QnIHx8IHNlcmllcy5zZXJpZXNUeXBlLmluZGV4T2YoJ0hpZ2hMb3cnKSAhPT0gLTEgfHxcbiAgICAgICAgICAgICAgICAgICAgKHBvaW50LnlWYWx1ZSA+PSAwID09PSAhc2VyaWVzLnlBeGlzLmlzSW52ZXJzZWQpKSA/IHJlY3QueCArIHJlY3Qud2lkdGggOiByZWN0LngsXG4gICAgICAgICAgICAgICAgeTogcmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQmFzZS5wcm90b3R5cGUudHJpZ2dlckV2ZW50ID0gZnVuY3Rpb24gKHNlcmllcywgcG9pbnQsIGZpbGwsIGJvcmRlcikge1xuICAgICAgICAgICAgdmFyIGFyZ3NEYXRhID0ge1xuICAgICAgICAgICAgICAgIGNhbmNlbDogZmFsc2UsIG5hbWU6IGNvbnN0YW50c18xLnBvaW50UmVuZGVyLCBzZXJpZXM6IHNlcmllcywgcG9pbnQ6IHBvaW50LFxuICAgICAgICAgICAgICAgIGZpbGw6IHNlcmllcy5zZXRQb2ludENvbG9yKHBvaW50LCBmaWxsKSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IHNlcmllcy5zZXRCb3JkZXJDb2xvcihwb2ludCwgYm9yZGVyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNlcmllcy5jaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnBvaW50UmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBwb2ludC5jb2xvciA9IGFyZ3NEYXRhLmZpbGw7XG4gICAgICAgICAgICByZXR1cm4gYXJnc0RhdGE7XG4gICAgICAgIH07XG4gICAgICAgIENvbHVtbkJhc2UucHJvdG90eXBlLmRyYXdSZWN0YW5nbGUgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCwgcmVjdCwgYXJnc0RhdGEpIHtcbiAgICAgICAgICAgIHZhciBjaGVjayA9IHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gcmVjdC5oZWlnaHQgOiByZWN0LndpZHRoO1xuICAgICAgICAgICAgaWYgKGNoZWNrIDw9IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmNhbGN1bGF0ZVJvdW5kZWRSZWN0UGF0aChyZWN0LCBzZXJpZXMuY29ybmVyUmFkaXVzLnRvcExlZnQsIHNlcmllcy5jb3JuZXJSYWRpdXMudG9wUmlnaHQsIHNlcmllcy5jb3JuZXJSYWRpdXMuYm90dG9tTGVmdCwgc2VyaWVzLmNvcm5lclJhZGl1cy5ib3R0b21SaWdodCk7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IHNlcmllcy5jYXRlZ29yeSA9PT0gJ0luZGljYXRvcicgPyBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfSW5kaWNhdG9yXycgKyBzZXJpZXMuaW5kZXggKyAnXycgKyBzZXJpZXMubmFtZSArXG4gICAgICAgICAgICAgICAgJ19Qb2ludF8nICsgcG9pbnQuaW5kZXggOiBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXggKyAnX1BvaW50XycgKyBwb2ludC5pbmRleDtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24obmFtZSwgYXJnc0RhdGEuZmlsbCwgYXJnc0RhdGEuYm9yZGVyLndpZHRoLCBhcmdzRGF0YS5ib3JkZXIuY29sb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZXJpZXMuY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucyk7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlcmllcy5zZXJpZXNUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnWFknOlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBvaW50LngudG9TdHJpbmcoKSArICc6JyArIHBvaW50LnlWYWx1ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSGlnaExvdyc6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcG9pbnQueC50b1N0cmluZygpICsgJzonICsgcG9pbnQuaGlnaC50b1N0cmluZygpICsgJzonICsgcG9pbnQubG93LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5CYXNlLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHJlY3RFbGVtZW50cyA9IHNlcmllcy5zZXJpZXNFbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICB2YXIgY291bnQgPSBzZXJpZXMuY2F0ZWdvcnkgPT09ICdJbmRpY2F0b3InID8gMCA6IDE7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFwb2ludC5zeW1ib2xMb2NhdGlvbnMubGVuZ3RoICYmICEoc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJyAmJiBwb2ludC5yZWdpb25zLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVJlY3QocmVjdEVsZW1lbnRzW2NvdW50XSwgc2VyaWVzLCBwb2ludCk7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ29sdW1uQmFzZS5wcm90b3R5cGUuYW5pbWF0ZVJlY3QgPSBmdW5jdGlvbiAoZWxlbWVudCwgc2VyaWVzLCBwb2ludCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHNlcmllcy5hbmltYXRpb247XG4gICAgICAgICAgICB2YXIgZWZmZWN0ID0gaGVscGVyXzIuZ2V0QW5pbWF0aW9uRnVuY3Rpb24oJ0xpbmVhcicpO1xuICAgICAgICAgICAgdmFyIGlzUGxvdCA9IHBvaW50LnlWYWx1ZSA8IDA7XG4gICAgICAgICAgICB2YXIgeDtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRIZWlnaHQgPSArcG9pbnQucmVnaW9uc1swXS5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFdpZHRoID0gK3BvaW50LnJlZ2lvbnNbMF0ud2lkdGg7XG4gICAgICAgICAgICB2YXIgY2VudGVyWDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJZO1xuICAgICAgICAgICAgaWYgKCFzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgIHggPSArcG9pbnQucmVnaW9uc1swXS54O1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZS5pbmRleE9mKCdTdGFja2luZycpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9ICgxIC0gaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KDAsIHNlcmllcy55QXhpcykpICogKHNlcmllcy55QXhpcy5yZWN0LmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlclggPSB4O1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJZID0geTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHkgPSArcG9pbnQucmVnaW9uc1swXS55O1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJZID0gKHNlcmllcy5zZXJpZXNUeXBlLmluZGV4T2YoJ0hpZ2hMb3cnKSAhPT0gLTEgfHwgc2VyaWVzLnR5cGUuaW5kZXhPZignV2F0ZXJmYWxsJykgIT09IC0xKSA/IHkgKyBlbGVtZW50SGVpZ2h0IC8gMiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAoaXNQbG90ICE9PSBzZXJpZXMueUF4aXMuaXNJbnZlcnNlZCkgPyB5IDogeSArIGVsZW1lbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlclggPSBpc1Bsb3QgPyB4IDogeCArIGVsZW1lbnRXaWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB5ID0gK3BvaW50LnJlZ2lvbnNbMF0ueTtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnR5cGUuaW5kZXhPZignU3RhY2tpbmcnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSAoaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KDAsIHNlcmllcy55QXhpcykpICogc2VyaWVzLnlBeGlzLnJlY3Qud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlclggPSB4O1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJZID0geTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHggPSArcG9pbnQucmVnaW9uc1swXS54O1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJZID0gaXNQbG90ID8geSA6IHkgKyBlbGVtZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJYID0gKHNlcmllcy5zZXJpZXNUeXBlLmluZGV4T2YoJ0hpZ2hMb3cnKSAhPT0gLTEgfHwgc2VyaWVzLnR5cGUuaW5kZXhPZignV2F0ZXJmYWxsJykgIT09IC0xKSA/IHggKyBlbGVtZW50V2lkdGggLyAyIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIChpc1Bsb3QgIT09IHNlcmllcy55QXhpcy5pc0ludmVyc2VkKSA/IHggKyBlbGVtZW50V2lkdGggOiB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzEuQW5pbWF0aW9uKHt9KS5hbmltYXRlKGVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9uLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBvcHRpb24uZGVsYXksXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnRpbWVTdGFtcCA+PSBhcmdzLmRlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudEhlaWdodCA9IGVsZW1lbnRIZWlnaHQgPyBlbGVtZW50SGVpZ2h0IDogMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVmZmVjdChhcmdzLnRpbWVTdGFtcCAtIGFyZ3MuZGVsYXksIDAsIGVsZW1lbnRIZWlnaHQsIGFyZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjZW50ZXJYICsgJyAnICsgY2VudGVyWSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpIHNjYWxlKDEsJyArICh2YWx1ZSAvIGVsZW1lbnRIZWlnaHQpICsgJykgdHJhbnNsYXRlKCcgKyAoLWNlbnRlclgpICsgJyAnICsgKC1jZW50ZXJZKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50V2lkdGggPSBlbGVtZW50V2lkdGggPyBlbGVtZW50V2lkdGggOiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZWZmZWN0KGFyZ3MudGltZVN0YW1wIC0gYXJncy5kZWxheSwgMCwgZWxlbWVudFdpZHRoLCBhcmdzLmR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgY2VudGVyWCArICcgJyArIGNlbnRlclkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKSBzY2FsZSgnICsgKHZhbHVlIC8gZWxlbWVudFdpZHRoKSArICcsIDEpIHRyYW5zbGF0ZSgnICsgKC1jZW50ZXJYKSArICcgJyArICgtY2VudGVyWSkgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLDApJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJpZXNFbGVtZW50ID0gc2VyaWVzLnNlcmllc0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSBzZXJpZXNFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGQgfHwgcG9pbnQuaW5kZXggPT09IHNlcmllcy5wb2ludHMubGVuZ3RoIC0gMSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcmllcy50eXBlID09PSAnV2F0ZXJmYWxsJyAmJiBlbGVtZW50ID09PSBzZXJpZXNFbGVtZW50LmNoaWxkcmVuW3Nlcmllc0VsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQgLSAyXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydC50cmlnZ2VyKCdhbmltYXRpb25Db21wbGV0ZScsIHsgc2VyaWVzOiBzZXJpZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnR5cGUgPT09ICdXYXRlcmZhbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3RFbGVtZW50cyA9IHNlcmllc0VsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdEVsZW1lbnRzW2ldLmlkLmluZGV4T2YoJ0Nvbm5lY3RvcicpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdEVsZW1lbnRzW2ldLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN0RWxlbWVudHNbaV0uc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsMCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBDb2x1bW5CYXNlLnByb3RvdHlwZS5jYWxjdWxhdGVSb3VuZGVkUmVjdFBhdGggPSBmdW5jdGlvbiAocmVjdCwgdG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbUxlZnQsIGJvdHRvbVJpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gJ00nICsgJyAnICsgcmVjdC54ICsgJyAnICsgKHRvcExlZnQgKyByZWN0LnkpICtcbiAgICAgICAgICAgICAgICAnIFEgJyArIHJlY3QueCArICcgJyArIHJlY3QueSArICcgJyArIChyZWN0LnggKyB0b3BMZWZ0KSArICcgJyArXG4gICAgICAgICAgICAgICAgcmVjdC55ICsgJyAnICsgJ0wnICsgJyAnICsgKHJlY3QueCArIHJlY3Qud2lkdGggLSB0b3BSaWdodCkgKyAnICcgKyByZWN0LnkgK1xuICAgICAgICAgICAgICAgICcgUSAnICsgKHJlY3QueCArIHJlY3Qud2lkdGgpICsgJyAnICsgcmVjdC55ICsgJyAnICtcbiAgICAgICAgICAgICAgICAocmVjdC54ICsgcmVjdC53aWR0aCkgKyAnICcgKyAocmVjdC55ICsgdG9wUmlnaHQpICsgJyAnICsgJ0wgJyArXG4gICAgICAgICAgICAgICAgKHJlY3QueCArIHJlY3Qud2lkdGgpICsgJyAnICsgKHJlY3QueSArIHJlY3QuaGVpZ2h0IC0gYm90dG9tUmlnaHQpXG4gICAgICAgICAgICAgICAgKyAnIFEgJyArIChyZWN0LnggKyByZWN0LndpZHRoKSArICcgJyArIChyZWN0LnkgKyByZWN0LmhlaWdodCkgKyAnICcgKyAocmVjdC54ICsgcmVjdC53aWR0aCAtIGJvdHRvbVJpZ2h0KSArICcgJyArXG4gICAgICAgICAgICAgICAgKHJlY3QueSArIHJlY3QuaGVpZ2h0KSArICcgJyArICdMICcgKyAocmVjdC54ICsgYm90dG9tTGVmdCkgKyAnICcgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQpICsgJyBRICcgKyByZWN0LnggKyAnICcgK1xuICAgICAgICAgICAgICAgIChyZWN0LnkgKyByZWN0LmhlaWdodCkgKyAnICcgKyByZWN0LnggKyAnICcgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQgLSBib3R0b21MZWZ0KSArICcgJyArICdMJyArICcgJyArIHJlY3QueCArICcgJyArXG4gICAgICAgICAgICAgICAgKHRvcExlZnQgKyByZWN0LnkpICsgJyAnICsgJ1onO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29sdW1uQmFzZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ29sdW1uQmFzZSA9IENvbHVtbkJhc2U7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9jb2x1bW4tYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi9saW5lLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgbGluZV9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFyZWFTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQXJlYVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQXJlYVNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBBcmVhU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFBvaW50O1xuICAgICAgICAgICAgdmFyIGVuZFBvaW50O1xuICAgICAgICAgICAgdmFyIHN0YXJ0UG9pbnQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIHBvaW50c0xlbmd0aCA9IHNlcmllcy5wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9IHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyBzZXJpZXMucG9pbnRzWzBdLnlWYWx1ZSA6XG4gICAgICAgICAgICAgICAgTWF0aC5tYXgoc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4sIDApO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgcG9pbnQ7XG4gICAgICAgICAgICB2YXIgY3VycmVudFhWYWx1ZTtcbiAgICAgICAgICAgIHZhciBzeW1ib2xMb2NhdGlvbjtcbiAgICAgICAgICAgIHZhciBnZXRDb29yZGluYXRlID0gc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyA/IGhlbHBlcl8xLlRyYW5zZm9ybVRvVmlzaWJsZSA6IGhlbHBlcl8xLmdldFBvaW50O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvaW50ID0gc2VyaWVzLnBvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBjdXJyZW50WFZhbHVlID0gcG9pbnQueFZhbHVlO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSAmJiBoZWxwZXJfMS53aXRoSW5SYW5nZShzZXJpZXMucG9pbnRzW2kgLSAxXSwgcG9pbnQsIHNlcmllcy5wb2ludHNbaSArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFBvaW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oY3VycmVudFhWYWx1ZSwgb3JpZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UG9pbnQgPSBnZXRDb29yZGluYXRlKGN1cnJlbnRYVmFsdWUsIG9yaWdpbiwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTScgKyAnICcgKyAoZmlyc3RQb2ludC54KSArICcgJyArIChmaXJzdFBvaW50LnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaXJzdFBvaW50ID0gZ2V0Q29vcmRpbmF0ZShjdXJyZW50WFZhbHVlLCBwb2ludC55VmFsdWUsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTCcgKyAnICcgKyAoZmlyc3RQb2ludC54KSArICcgJyArIChmaXJzdFBvaW50LnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllcy5wb2ludHNbaSArIDFdICYmICFzZXJpZXMucG9pbnRzW2kgKyAxXS52aXNpYmxlICYmIHNlcmllcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSAhPT0gJ0Ryb3AnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFBvaW50ID0gZ2V0Q29vcmRpbmF0ZShjdXJyZW50WFZhbHVlLCBvcmlnaW4sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFBvaW50ID0gZ2V0Q29vcmRpbmF0ZShzdGFydFBvaW50LngsIHN0YXJ0UG9pbnQueSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTCcgKyAnICcgKyAoZmlyc3RQb2ludC54KSArICcgJyArIChmaXJzdFBvaW50LnkpICsgJyAnICsgJ0wnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICcgKyAoZW5kUG9pbnQueCkgKyAnICcgKyAoZW5kUG9pbnQueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sTG9jYXRpb24gPSBnZXRDb29yZGluYXRlKGN1cnJlbnRYVmFsdWUsIHBvaW50LnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMucHVzaChzeW1ib2xMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMucHVzaChuZXcgaGVscGVyXzEuUmVjdChzeW1ib2xMb2NhdGlvbi54IC0gc2VyaWVzLm1hcmtlci53aWR0aCwgc3ltYm9sTG9jYXRpb24ueSAtIHNlcmllcy5tYXJrZXIuaGVpZ2h0LCAyICogc2VyaWVzLm1hcmtlci53aWR0aCwgMiAqIHNlcmllcy5tYXJrZXIuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvaW50c0xlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAneCc6IHNlcmllcy5wb2ludHNbcG9pbnRzTGVuZ3RoIC0gMV0ueFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAneSc6IHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyBzZXJpZXMucG9pbnRzW3BvaW50c0xlbmd0aCAtIDFdLnlWYWx1ZSA6IG9yaWdpblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZW5kUG9pbnQgPSBnZXRDb29yZGluYXRlKHN0YXJ0UG9pbnQueCwgc3RhcnRQb2ludC55LCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTCcgKyAnICcgKyAoZW5kUG9pbnQueCkgKyAnICcgKyAoZW5kUG9pbnQueSkgKyAnICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24oc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzLmluZGV4LCBzZXJpZXMuaW50ZXJpb3IsIHNlcmllcy5ib3JkZXIud2lkdGgsIHNlcmllcy5ib3JkZXIuY29sb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRMaW5lUGF0aChvcHRpb25zLCBzZXJpZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNYXJrZXIoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXJlYVNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBBcmVhU2VyaWVzLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdBcmVhU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgQXJlYVNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VyaWVzLmFuaW1hdGlvbjtcbiAgICAgICAgICAgIHRoaXMuZG9MaW5lYXJBbmltYXRpb24oc2VyaWVzLCBvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQXJlYVNlcmllcztcbiAgICB9KGxpbmVfYmFzZV8xLkxpbmVCYXNlKSk7XG4gICAgZXhwb3J0cy5BcmVhU2VyaWVzID0gQXJlYVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2FyZWEtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2NvbHVtbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGNvbHVtbl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhclNlcmllcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhCYXJTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEJhclNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBCYXJTZXJpZXMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW4gPSBNYXRoLm1heChzZXJpZXMueUF4aXMudmlzaWJsZVJhbmdlLm1pbiwgMCk7XG4gICAgICAgICAgICB2YXIgc2lkZUJ5U2lkZUluZm8gPSB0aGlzLmdldFNpZGVCeVNpZGVJbmZvKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgcmVjdDtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludEJhciA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludEJhci5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludEJhci5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50QmFyLnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1twb2ludEJhci5pbmRleCAtIDFdLCBwb2ludEJhciwgc2VyaWVzLnBvaW50c1twb2ludEJhci5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShwb2ludEJhci54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5zdGFydCwgcG9pbnRCYXIueVZhbHVlLCBwb2ludEJhci54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5lbmQsIG9yaWdpbiwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB0aGlzLnRyaWdnZXJFdmVudChzZXJpZXMsIHBvaW50QmFyLCBzZXJpZXMuaW50ZXJpb3IsIHsgd2lkdGg6IHNlcmllcy5ib3JkZXIud2lkdGgsIGNvbG9yOiBzZXJpZXMuYm9yZGVyLmNvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTeW1ib2xMb2NhdGlvbihwb2ludEJhciwgcmVjdCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShzZXJpZXMsIHBvaW50QmFyLCByZWN0LCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJhclNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGUoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFyU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIEJhclNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQmFyU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhclNlcmllcztcbiAgICB9KGNvbHVtbl9iYXNlXzEuQ29sdW1uQmFzZSkpO1xuICAgIGV4cG9ydHMuQmFyU2VyaWVzID0gQmFyU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvYmFyLXNlcmllcy5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vYXhpcy9wb2xhci1yYWRhci1wYW5lbFwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBwb2xhcl9yYWRhcl9wYW5lbF8xLCBjb25zdGFudHNfMSwgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUG9sYXJTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUG9sYXJTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBvbGFyU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFBvbGFyU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzVHlwZSA9IGhlbHBlcl8xLmZpcnN0VG9Mb3dlckNhc2Uoc2VyaWVzLmRyYXdUeXBlKTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignQ29sdW1uJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uRHJhd1R5cGVSZW5kZXIoc2VyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydFtzZXJpZXNUeXBlICsgJ1Nlcmllc01vZHVsZSddLnJlbmRlcihzZXJpZXMsIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBvbGFyU2VyaWVzLnByb3RvdHlwZS5jb2x1bW5EcmF3VHlwZVJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlUG9pbnRzID0gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgIHZhciByZWN0O1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICB2YXIgc3RhcnRBbmdsZTtcbiAgICAgICAgICAgIHZhciBlbmRBbmdsZTtcbiAgICAgICAgICAgIHZhciBpdGVtQ3VycmVudFhQb3M7XG4gICAgICAgICAgICB2YXIgcmFkaXVzO1xuICAgICAgICAgICAgdmFyIHBvaW50U3RhcnRBbmdsZTtcbiAgICAgICAgICAgIHZhciBwb2ludEVuZEFuZ2xlO1xuICAgICAgICAgICAgdmFyIHgxO1xuICAgICAgICAgICAgdmFyIHgyO1xuICAgICAgICAgICAgdmFyIHkxO1xuICAgICAgICAgICAgdmFyIHkyO1xuICAgICAgICAgICAgdmFyIHN0YXJ0VmFsdWU7XG4gICAgICAgICAgICB2YXIgZW5kVmFsdWU7XG4gICAgICAgICAgICB2YXIgaW5uZXJSYWRpdXM7XG4gICAgICAgICAgICB2YXIgY2VudGVyWCA9IChzZXJpZXMuY2xpcFJlY3Qud2lkdGggLyAyKSArIHNlcmllcy5jbGlwUmVjdC54O1xuICAgICAgICAgICAgdmFyIGRTdGFydFg7XG4gICAgICAgICAgICB2YXIgZFN0YXJ0WTtcbiAgICAgICAgICAgIHZhciBjZW50ZXJZID0gKHNlcmllcy5jbGlwUmVjdC5oZWlnaHQgLyAyKSArIHNlcmllcy5jbGlwUmVjdC55O1xuICAgICAgICAgICAgdmFyIGRFbmRYO1xuICAgICAgICAgICAgdmFyIGRFbmRZO1xuICAgICAgICAgICAgdmFyIGF4aXNJbnZlcnNlZCA9IHNlcmllcy54QXhpcy5pc0ludmVyc2VkID8gMSA6IDA7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB2YXIgc3Vtb2ZZVmFsdWVzID0gMDtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IChzZXJpZXMucG9pbnRzWzFdID8gc2VyaWVzLnBvaW50c1sxXS54VmFsdWUgOiAyICogc2VyaWVzLnBvaW50c1swXS54VmFsdWUpIC0gc2VyaWVzLnBvaW50c1swXS54VmFsdWU7XG4gICAgICAgICAgICB2YXIgdGlja3MgPSBzZXJpZXMueEF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknICYmIHNlcmllcy54QXhpcy5sYWJlbFBsYWNlbWVudCA9PT0gJ0JldHdlZW5UaWNrcycgPyAwIDogaW50ZXJ2YWwgLyAyO1xuICAgICAgICAgICAgdmFyIHJhbmdlSW50ZXJ2YWwgPSBzZXJpZXMueEF4aXMudmFsdWVUeXBlID09PSAnRGF0ZVRpbWUnID8gc2VyaWVzLnhBeGlzLmRhdGVUaW1lSW50ZXJ2YWwgOiAxO1xuICAgICAgICAgICAgdmFyIG1pbiA9IHNlcmllcy54QXhpcy5hY3R1YWxSYW5nZS5taW47XG4gICAgICAgICAgICB2YXIgaW52ZXJzZWRWYWx1ZTtcbiAgICAgICAgICAgIHZhciB2ZWN0b3I7XG4gICAgICAgICAgICB0aGlzLmdldFNlcmllc1Bvc2l0aW9uKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBzZXJpZXMueEF4aXMuaXNJbnZlcnNlZCA/IChzZXJpZXMucmVjdENvdW50IC0gMSAtIHNlcmllcy5wb3NpdGlvbikgOiBzZXJpZXMucG9zaXRpb247XG4gICAgICAgICAgICB2YXIgdGlja3Nid3RMYWJlbCA9IHNlcmllcy54QXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgc2VyaWVzLnhBeGlzLmxhYmVsUGxhY2VtZW50ID09PSAnQmV0d2VlblRpY2tzJyA/IDAuNVxuICAgICAgICAgICAgICAgIDogMC41IC0gKHNlcmllcy5yZWN0Q291bnQgLyAyKTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBzdW1vZllWYWx1ZXMgKz0gcmFuZ2VJbnRlcnZhbDtcbiAgICAgICAgICAgICAgICBtaW4gKz0gcmFuZ2VJbnRlcnZhbDtcbiAgICAgICAgICAgIH0gd2hpbGUgKG1pbiA8PSBzZXJpZXMueEF4aXMuYWN0dWFsUmFuZ2UubWF4IC0gKHNlcmllcy54QXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgPyAwIDogMSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSAmJiBoZWxwZXJfMS53aXRoSW5SYW5nZShzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4IC0gMV0sIHBvaW50LCBzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4ICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52ZXJzZWRWYWx1ZSA9IHNlcmllcy54QXhpcy5pc0ludmVyc2VkID8gKHNlcmllcy54QXhpcy52aXNpYmxlUmFuZ2UubWF4IC0gcG9pbnQueFZhbHVlKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC54VmFsdWUgLSBzZXJpZXMueEF4aXMudmlzaWJsZVJhbmdlLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUN1cnJlbnRYUG9zID0gKGludmVyc2VkVmFsdWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgoaW50ZXJ2YWwgLyBzZXJpZXMucmVjdENvdW50KSAqIHBvc2l0aW9uIC0gdGlja3MpICsgKHN1bW9mWVZhbHVlcyAvIDM2MCAqIHNlcmllcy54QXhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUN1cnJlbnRYUG9zID0gKCgoaXRlbUN1cnJlbnRYUG9zKSAvIChzdW1vZllWYWx1ZXMpKSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0QW5nbGUgPSAyICogTWF0aC5QSSAqIChpdGVtQ3VycmVudFhQb3MgKyBzZXJpZXMueEF4aXMuc3RhcnRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgIGVuZEFuZ2xlID0gMiAqIE1hdGguUEkgKiAoKGl0ZW1DdXJyZW50WFBvcyArIHNlcmllcy54QXhpcy5zdGFydEFuZ2xlKSArIChpbnRlcnZhbCAvIHNlcmllcy5yZWN0Q291bnQpIC8gKHN1bW9mWVZhbHVlcykpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludFN0YXJ0QW5nbGUgPSBzdGFydEFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICBwb2ludEVuZEFuZ2xlID0gZW5kQW5nbGU7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0QW5nbGUgPSAoc3RhcnRBbmdsZSAtIDAuNSAqIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICBlbmRBbmdsZSA9IChlbmRBbmdsZSAtIDAuNSAqIE1hdGguUEkpIC0gMC4wMDAwMDE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUgPT09ICdTdGFja2luZ0NvbHVtbicgfHwgc2VyaWVzLmRyYXdUeXBlID09PSAnUmFuZ2VDb2x1bW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gc2VyaWVzLmRyYXdUeXBlID09PSAnUmFuZ2VDb2x1bW4nID8gcG9pbnQubG93IDogc2VyaWVzLnN0YWNrZWRWYWx1ZXMuc3RhcnRWYWx1ZXNbcG9pbnQuaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSBzZXJpZXMuZHJhd1R5cGUgPT09ICdSYW5nZUNvbHVtbicgPyBwb2ludC5oaWdoIDogc2VyaWVzLnN0YWNrZWRWYWx1ZXMuZW5kVmFsdWVzW3BvaW50LmluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gKHNlcmllcy55QXhpcy52YWx1ZVR5cGUgPT09ICdMb2dhcml0aG1pYycgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8xLmxvZ0Jhc2UoZW5kVmFsdWUgPT09IDAgPyAxIDogZW5kVmFsdWUsIHNlcmllcy55QXhpcy5sb2dCYXNlKSA6IGVuZFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gZW5kVmFsdWUgPiBzZXJpZXMueUF4aXMuYWN0dWFsUmFuZ2UubWF4ID8gc2VyaWVzLnlBeGlzLmFjdHVhbFJhbmdlLm1heCA6IGVuZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzID0gc3RhcnRWYWx1ZSA9PT0gZW5kVmFsdWUgPyAwIDogc2VyaWVzLmNoYXJ0LnJhZGl1cyAqIGhlbHBlcl8xLnZhbHVlVG9Db2VmZmljaWVudChlbmRWYWx1ZSwgc2VyaWVzLnlBeGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gY2VudGVyWCArIHJhZGl1cyAqIE1hdGguY29zKHN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSBjZW50ZXJYICsgcmFkaXVzICogTWF0aC5jb3MoZW5kQW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSBjZW50ZXJZICsgcmFkaXVzICogTWF0aC5zaW4oc3RhcnRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MiA9IGNlbnRlclkgKyByYWRpdXMgKiBNYXRoLnNpbihlbmRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lclJhZGl1cyA9IHNlcmllcy5jaGFydC5yYWRpdXMgKiBoZWxwZXJfMS52YWx1ZVRvQ29lZmZpY2llbnQoKHN0YXJ0VmFsdWUgPT09IDAgJiYgc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4gIT09IDApID8gc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4gOiBzdGFydFZhbHVlLCBzZXJpZXMueUF4aXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZFN0YXJ0WCA9IGNlbnRlclggKyBpbm5lclJhZGl1cyAqIE1hdGguY29zKHN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZFN0YXJ0WSA9IGNlbnRlclkgKyBpbm5lclJhZGl1cyAqIE1hdGguc2luKHN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZEVuZFggPSBjZW50ZXJYICsgaW5uZXJSYWRpdXMgKiBNYXRoLmNvcyhlbmRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkRW5kWSA9IGNlbnRlclkgKyBpbm5lclJhZGl1cyAqIE1hdGguc2luKGVuZEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ1BvbGFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICgnTScgKyAnICcgKyB4MSArICcgJyArIHkxICsgJyAnICsgJ0EnICsgJyAnICsgcmFkaXVzICsgJyAnICsgcmFkaXVzICsgJyAnICsgJzAnICsgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJzAnICsgJyAnICsgMSArICcgJyArIHgyICsgJyAnICsgeTIgKyAnICcgKyAnTCcgKyAnICcgKyBkRW5kWCArICcgJyArIGRFbmRZICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0EnICsgJyAnICsgaW5uZXJSYWRpdXMgKyAnICcgKyBpbm5lclJhZGl1cyArICcgJyArICcxJyArICcgJyArICcwJyArICcgJyArICcwJyArICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGRTdGFydFggKyAnICcgKyBkU3RhcnRZICsgJyAnICsgJ3onKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICgnTScgKyAnICcgKyB4MSArICcgJyArIHkxICsgJyAnICsgJ0wnICsgJyAnICsgeDIgKyAnICcgKyB5MiArICcgJyArICdMJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGRFbmRYICsgJyAnICsgZEVuZFkgKyAnICcgKyAnTCcgKyAnICcgKyBkU3RhcnRYICsgJyAnICsgZFN0YXJ0WSArICcgJyArICd6Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25EYXRhID0gbmV3IGhlbHBlcl8xLlBvbGFyQXJjKHBvaW50U3RhcnRBbmdsZSwgcG9pbnRFbmRBbmdsZSwgaW5uZXJSYWRpdXMsIHJhZGl1cywgaXRlbUN1cnJlbnRYUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFZhbHVlID0gcG9pbnQueVZhbHVlID4gc2VyaWVzLnlBeGlzLmFjdHVhbFJhbmdlLm1heCA/IHNlcmllcy55QXhpcy5hY3R1YWxSYW5nZS5tYXggOiBwb2ludC55VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBzZXJpZXMuY2hhcnQucmFkaXVzICogaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KChzZXJpZXMueUF4aXMudmFsdWVUeXBlID09PSAnTG9nYXJpdGhtaWMnID8gaGVscGVyXzEubG9nQmFzZShlbmRWYWx1ZSwgc2VyaWVzLnlBeGlzLmxvZ0Jhc2UpIDogZW5kVmFsdWUpLCBzZXJpZXMueUF4aXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeDEgPSBjZW50ZXJYICsgcmFkaXVzICogTWF0aC5jb3Moc3RhcnRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB4MiA9IGNlbnRlclggKyByYWRpdXMgKiBNYXRoLmNvcyhlbmRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5MSA9IGNlbnRlclkgKyByYWRpdXMgKiBNYXRoLnNpbihzdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkyID0gY2VudGVyWSArIHJhZGl1cyAqIE1hdGguc2luKGVuZEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ1BvbGFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICgnTScgKyAnICcgKyB4MSArICcgJyArIHkxICsgJyAnICsgJ0EnICsgJyAnICsgcmFkaXVzICsgJyAnICsgcmFkaXVzICsgJyAnICsgJzAnICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzAnICsgJyAnICsgMSArICcgJyArIHgyICsgJyAnICsgeTIgKyAnICcgKyAnTCcgKyAnICcgKyBjZW50ZXJYICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyWSArICcgJyArICd6Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAoJ00nICsgJyAnICsgeDEgKyAnICcgKyB5MSArICcgJyArICdMJyArICcgJyArIHgyICsgJyAnICsgeTIgKyAnICcgKyAnTCcgKyAnICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBjZW50ZXJYICsgJyAnICsgY2VudGVyWSArICcgJyArICd6Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25EYXRhID0gbmV3IGhlbHBlcl8xLlBvbGFyQXJjKHBvaW50U3RhcnRBbmdsZSwgcG9pbnRFbmRBbmdsZSwgMCwgcmFkaXVzLCBpdGVtQ3VycmVudFhQb3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhID0gdGhpcy50cmlnZ2VyRXZlbnQoc2VyaWVzLmNoYXJ0LCBzZXJpZXMsIHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHNlcmllcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfUG9pbnRfJyArIHBvaW50LmluZGV4LCBhcmdzRGF0YS5maWxsLCBhcmdzRGF0YS5ib3JkZXIud2lkdGgsIGFyZ3NEYXRhLmJvcmRlci5jb2xvciwgc2VyaWVzLm9wYWNpdHksIHNlcmllcy5kYXNoQXJyYXksIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZExpbmVQYXRoKG9wdGlvbnMsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnR5cGUgPT09ICdQb2xhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWN0b3IgPSBoZWxwZXJfMS5Db2VmZmljaWVudFRvVmVjdG9yKGhlbHBlcl8xLnZhbHVlVG9Qb2xhckNvZWZmaWNpZW50KChwb2ludC54VmFsdWUgKyB0aWNrc2J3dExhYmVsIC8gc2VyaWVzLnJlY3RDb3VudCArIHNlcmllcy5wb3NpdGlvbiAvIHNlcmllcy5yZWN0Q291bnQpLCBzZXJpZXMueEF4aXMpLCBzZXJpZXMuY2hhcnQucHJpbWFyeVhBeGlzLnN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogc2VyaWVzLmNsaXBSZWN0LndpZHRoIC8gMiArIHNlcmllcy5jbGlwUmVjdC54ICsgcmFkaXVzICogdmVjdG9yLngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHNlcmllcy5jbGlwUmVjdC5oZWlnaHQgLyAyICsgc2VyaWVzLmNsaXBSZWN0LnkgKyByYWRpdXMgKiB2ZWN0b3IueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goeyB4OiAoeDEgKyB4MikgLyAyLCB5OiAoeTEgKyB5MikgLyAyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLmlzUmVjdFNlcmllcyA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFBvbGFyU2VyaWVzLnByb3RvdHlwZS50cmlnZ2VyRXZlbnQgPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllcywgcG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS5wb2ludFJlbmRlciwgc2VyaWVzOiBzZXJpZXMsIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgICAgICBmaWxsOiBzZXJpZXMuc2V0UG9pbnRDb2xvcihwb2ludCwgc2VyaWVzLmludGVyaW9yKSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IHNlcmllcy5zZXRCb3JkZXJDb2xvcihwb2ludCwgeyB3aWR0aDogc2VyaWVzLmJvcmRlci53aWR0aCwgY29sb3I6IHNlcmllcy5ib3JkZXIuY29sb3IgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnBvaW50UmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBwb2ludC5jb2xvciA9IGFyZ3NEYXRhLmZpbGw7XG4gICAgICAgICAgICByZXR1cm4gYXJnc0RhdGE7XG4gICAgICAgIH07XG4gICAgICAgIFBvbGFyU2VyaWVzLnByb3RvdHlwZS5nZXRTZXJpZXNQb3NpdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHNlcmllcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBzZXJpZXNDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgc3RhY2tpbmdHcm91cCA9IFtdO1xuICAgICAgICAgICAgdmFyIHZTZXJpZXMgPSB7IHJlY3RDb3VudDogMCwgcG9zaXRpb246IG51bGwgfTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjaGFydC52aXNpYmxlU2VyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzZXJpZXNfMSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzXzEudmlzaWJsZSAmJiAoc2VyaWVzXzEudHlwZSA9PT0gJ1BvbGFyJyB8fCBzZXJpZXNfMS50eXBlID09PSAnUmFkYXInKSAmJiBzZXJpZXNfMS5kcmF3VHlwZS5pbmRleE9mKCdDb2x1bW4nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzQ29sbGVjdGlvbi5wdXNoKHNlcmllc18xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXJpZXNDb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignU3RhY2tpbmcnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllcy5zdGFja2luZ0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2tpbmdHcm91cFtzZXJpZXMuc3RhY2tpbmdHcm91cF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb3NpdGlvbiA9IHZTZXJpZXMucmVjdENvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNraW5nR3JvdXBbc2VyaWVzLnN0YWNraW5nR3JvdXBdID0gdlNlcmllcy5yZWN0Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb3NpdGlvbiA9IHN0YWNraW5nR3JvdXBbc2VyaWVzLnN0YWNraW5nR3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZTZXJpZXMucG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMucG9zaXRpb24gPSB2U2VyaWVzLnJlY3RDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2U2VyaWVzLnBvc2l0aW9uID0gdlNlcmllcy5yZWN0Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb3NpdGlvbiA9IHZTZXJpZXMucG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb3NpdGlvbiA9IHZTZXJpZXMucmVjdENvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXJpZXNDb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUucmVjdENvdW50ID0gdlNlcmllcy5yZWN0Q291bnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHNlcmllcy5hbmltYXRpb247XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzZXJpZXMuYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gc2VyaWVzLmFuaW1hdGlvbi5kZWxheTtcbiAgICAgICAgICAgIHZhciByZWN0RWxlbWVudHMgPSBzZXJpZXMuc2VyaWVzRWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gMTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUgPT09ICdTY2F0dGVyJykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9pbnQuc3ltYm9sTG9jYXRpb25zLmxlbmd0aCB8fCAhcmVjdEVsZW1lbnRzW2NvdW50XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaGVscGVyXzEubWFya2VyQW5pbWF0ZShyZWN0RWxlbWVudHNbY291bnRdLCBkZWxheSwgZHVyYXRpb24sIHNlcmllcywgcG9pbnQuaW5kZXgsIHBvaW50LnN5bWJvbExvY2F0aW9uc1swXSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY291bnQgPSAxOyBjb3VudCA8IHJlY3RFbGVtZW50cy5sZW5ndGg7IGNvdW50KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb1BvbGFyUmFkYXJBbmltYXRpb24ocmVjdEVsZW1lbnRzW2NvdW50XSwgZGVsYXksIGR1cmF0aW9uLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJTZXJpZXMucHJvdG90eXBlLmRvUG9sYXJSYWRhckFuaW1hdGlvbiA9IGZ1bmN0aW9uIChhbmltYXRlRWxlbWVudCwgZGVsYXksIGR1cmF0aW9uLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBjaGFydGNlbnRlclggPSBzZXJpZXMuY2xpcFJlY3Qud2lkdGggLyAyICsgc2VyaWVzLmNsaXBSZWN0Lng7XG4gICAgICAgICAgICB2YXIgY2hhcnRjZW50ZXJZID0gc2VyaWVzLmNsaXBSZWN0LmhlaWdodCAvIDIgKyBzZXJpZXMuY2xpcFJlY3QueTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIGFuaW1hdGVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV8xLkFuaW1hdGlvbih7fSkuYW5pbWF0ZShhbmltYXRlRWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBkZWxheTogZGVsYXksXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLnRpbWVTdGFtcCA+IGFyZ3MuZGVsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudEhlaWdodCA9ICgoYXJncy50aW1lU3RhbXAgLSBhcmdzLmRlbGF5KSAvIGFyZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBjaGFydGNlbnRlclhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICcgJyArIGNoYXJ0Y2VudGVyWSArICcpIHNjYWxlKCcgKyBlbGVtZW50SGVpZ2h0ICsgJykgdHJhbnNsYXRlKCcgKyAoLWNoYXJ0Y2VudGVyWCkgKyAnICcgKyAoLWNoYXJ0Y2VudGVyWSkgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRlRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRlRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMuY2hhcnQudHJpZ2dlcignYW5pbWF0aW9uQ29tcGxldGUnLCB7IHNlcmllczogc2VyaWVzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUG9sYXJTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUG9sYXJTZXJpZXM7XG4gICAgfShwb2xhcl9yYWRhcl9wYW5lbF8xLlBvbGFyUmFkYXJQYW5lbCkpO1xuICAgIGV4cG9ydHMuUG9sYXJTZXJpZXMgPSBQb2xhclNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3BvbGFyLXNlcmllcy5qc1xuLy8gbW9kdWxlIGlkID0gMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uL3Nlcmllcy9saW5lLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGhlbHBlcl8yLCBsaW5lX2Jhc2VfMSwgaGVscGVyXzMpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIGF4aXNQYWRkaW5nID0gMTA7XG4gICAgdmFyIFBvbGFyUmFkYXJQYW5lbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhQb2xhclJhZGFyUGFuZWwsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBvbGFyUmFkYXJQYW5lbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLm1lYXN1cmVBeGlzID0gZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxDbGlwUmVjdCA9IHJlY3Q7XG4gICAgICAgICAgICB0aGlzLnNlcmllc0NsaXBSZWN0ID0gbmV3IGhlbHBlcl8yLlJlY3QocmVjdC54LCByZWN0LnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVJvd0F4aXMoY2hhcnQsIHRoaXMuaW5pdGlhbENsaXBSZWN0KTtcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZUNvbHVtbkF4aXMoY2hhcnQsIHRoaXMuaW5pdGlhbENsaXBSZWN0KTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQXhpc1NpemUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5tZWFzdXJlUm93QXhpcyA9IGZ1bmN0aW9uIChjaGFydCwgcmVjdCkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVSb3dTaXplKHJlY3QpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IGNoYXJ0LnJvd3NbMF07XG4gICAgICAgICAgICB0aGlzLm1lYXN1cmVEZWZpbml0aW9uKHJvdywgY2hhcnQsIG5ldyBoZWxwZXJfMi5TaXplKGNoYXJ0LmF2YWlsYWJsZVNpemUud2lkdGgsIHJvdy5jb21wdXRlZEhlaWdodCksIHJlY3QpO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5BeGlzID0gZnVuY3Rpb24gKGNoYXJ0LCByZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNvbHVtblNpemUocmVjdCk7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2hhcnQuY29sdW1uc1swXTtcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZURlZmluaXRpb24oY29sdW1uLCBjaGFydCwgbmV3IGhlbHBlcl8yLlNpemUoY29sdW1uLmNvbXB1dGVkV2lkdGgsIGNoYXJ0LmF2YWlsYWJsZVNpemUuaGVpZ2h0KSwgcmVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIFBvbGFyUmFkYXJQYW5lbC5wcm90b3R5cGUubWVhc3VyZURlZmluaXRpb24gPSBmdW5jdGlvbiAoZGVmaW5pdGlvbiwgY2hhcnQsIHNpemUsIGNsaXBSZWN0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZGVmaW5pdGlvbi5heGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBheGlzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGF4aXMuZ2V0TW9kdWxlKGNoYXJ0KTtcbiAgICAgICAgICAgICAgICBheGlzLmJhc2VNb2R1bGUuY2FsY3VsYXRlUmFuZ2VBbmRJbnRlcnZhbChzaXplLCBheGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5jYWxjdWxhdGVBeGlzU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgYXhpcztcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gNTtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyWCA9IHRoaXMuaW5pdGlhbENsaXBSZWN0LndpZHRoICogMC41ICsgdGhpcy5pbml0aWFsQ2xpcFJlY3QueDtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyWSA9IHRoaXMuaW5pdGlhbENsaXBSZWN0LmhlaWdodCAqIDAuNSArIHRoaXMuaW5pdGlhbENsaXBSZWN0Lnk7XG4gICAgICAgICAgICBjaGFydC5yYWRpdXMgPSBNYXRoLm1pbih0aGlzLmluaXRpYWxDbGlwUmVjdC53aWR0aCwgdGhpcy5pbml0aWFsQ2xpcFJlY3QuaGVpZ2h0KSAvIDIgLSBwYWRkaW5nIC1cbiAgICAgICAgICAgICAgICBjaGFydC5wcmltYXJ5WEF4aXMubWFqb3JUaWNrTGluZXMuaGVpZ2h0IC0gY2hhcnQucHJpbWFyeVhBeGlzLm1heExhYmVsU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICBjaGFydC5yYWRpdXMgPSAoY2hhcnQucHJpbWFyeVhBeGlzLmNvZWZmaWNpZW50ICogY2hhcnQucmFkaXVzKSAvIDEwMDtcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ2xpcFJlY3QueSA9IHRoaXMuY2VudGVyWSAtIGNoYXJ0LnJhZGl1cztcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ2xpcFJlY3QueCA9IHRoaXMuY2VudGVyWCAtIGNoYXJ0LnJhZGl1cztcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ2xpcFJlY3QuaGVpZ2h0ID0gMiAqIGNoYXJ0LnJhZGl1cztcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ2xpcFJlY3Qud2lkdGggPSAyICogY2hhcnQucmFkaXVzO1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVSb3dTaXplKHRoaXMuc2VyaWVzQ2xpcFJlY3QpO1xuICAgICAgICAgICAgYXhpcyA9IGNoYXJ0LnByaW1hcnlZQXhpcztcbiAgICAgICAgICAgIGF4aXMucmVjdCA9IHRoaXMuc2VyaWVzQ2xpcFJlY3Q7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNvbHVtblNpemUodGhpcy5zZXJpZXNDbGlwUmVjdCk7XG4gICAgICAgICAgICBheGlzID0gY2hhcnQucHJpbWFyeVhBeGlzO1xuICAgICAgICAgICAgYXhpcy5yZWN0ID0gdGhpcy5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGNoYXJ0LnZlcnRpY2FsQXhlcy5wdXNoKGNoYXJ0LnByaW1hcnlZQXhpcyk7XG4gICAgICAgICAgICB2YXIgcm93ID0gY2hhcnQucm93c1swXTtcbiAgICAgICAgICAgIHJvdy5heGVzWzBdID0gY2hhcnQucHJpbWFyeVlBeGlzO1xuICAgICAgICAgICAgY2hhcnQucm93c1swXSA9IHJvdztcbiAgICAgICAgICAgIGNoYXJ0Lmhvcml6b250YWxBeGVzLnB1c2goY2hhcnQucHJpbWFyeVhBeGlzKTtcbiAgICAgICAgICAgIHZhciBjb2x1bW4gPSBjaGFydC5jb2x1bW5zWzBdO1xuICAgICAgICAgICAgY29sdW1uLmF4ZXNbMF0gPSBjaGFydC5wcmltYXJ5WEF4aXM7XG4gICAgICAgICAgICBjaGFydC5jb2x1bW5zWzBdID0gY29sdW1uO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLmNhbGN1bGF0ZVJvd1NpemUgPSBmdW5jdGlvbiAocmVjdCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciByb3cgPSBjaGFydC5yb3dzWzBdO1xuICAgICAgICAgICAgcm93LmNvbXB1dGVkSGVpZ2h0ID0gcmVjdC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgcm93LmNvbXB1dGVkVG9wID0gcmVjdC55O1xuICAgICAgICAgICAgY2hhcnQucm93c1swXSA9IHJvdztcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5jYWxjdWxhdGVDb2x1bW5TaXplID0gZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgY29sdW1uID0gY2hhcnQuY29sdW1uc1swXTtcbiAgICAgICAgICAgIGNvbHVtbi5jb21wdXRlZExlZnQgPSByZWN0Lng7XG4gICAgICAgICAgICBjb2x1bW4uY29tcHV0ZWRXaWR0aCA9IHJlY3Qud2lkdGg7XG4gICAgICAgICAgICBjaGFydC5jb2x1bW5zWzBdID0gY29sdW1uO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLnJlbmRlckF4ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXhpcztcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgPSBjaGFydC5wcmltYXJ5WEF4aXMuc3RhcnRBbmdsZTtcbiAgICAgICAgICAgIHZhciBheGlzRWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0NvbGxlY3Rpb24nIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNoYXJ0LmF4aXNDb2xsZWN0aW9ucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0dyb3VwJyArIGkgfSk7XG4gICAgICAgICAgICAgICAgYXhpcyA9IGNoYXJ0LmF4aXNDb2xsZWN0aW9uc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChheGlzLm1ham9yR3JpZExpbmVzLndpZHRoID4gMCB8fCBheGlzLm1ham9yVGlja0xpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WEF4aXNHcmlkTGluZShheGlzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdYQXhpc0xhYmVscyhheGlzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WUF4aXNHcmlkTGluZShheGlzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMubGluZVN0eWxlLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WUF4aXNMaW5lKGF4aXMsIGksIGF4aXMucGxvdE9mZnNldCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3WUF4aXNMYWJlbHMoYXhpcywgaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXhpc0VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF4aXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBjaGFydC5zdmdPYmplY3QuYXBwZW5kQ2hpbGQoYXhpc0VsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLmRyYXdZQXhpc0xpbmUgPSBmdW5jdGlvbiAoYXhpcywgaW5kZXgsIHBsb3RYLCBwbG90WSkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBvcHRpb25zTGluZSA9IHt9O1xuICAgICAgICAgICAgdmFyIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzWzBdLnZhbHVlLCBheGlzKSwgdGhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgIHZhciBheGlzTGluZSA9ICdNICcgKyB0aGlzLmNlbnRlclggKyAnICcgKyB0aGlzLmNlbnRlclkgKyAnTCAnICtcbiAgICAgICAgICAgICAgICAodGhpcy5jZW50ZXJYICsgY2hhcnQucmFkaXVzICogdmVjdG9yLngpICsgJyAnICsgKHRoaXMuY2VudGVyWSArIGNoYXJ0LnJhZGl1cyAqIHZlY3Rvci55KTtcbiAgICAgICAgICAgIG9wdGlvbnNMaW5lID0ge1xuICAgICAgICAgICAgICAgICdpZCc6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnQXhpc0xpbmVfJyArIGluZGV4LFxuICAgICAgICAgICAgICAgICdkJzogYXhpc0xpbmUsXG4gICAgICAgICAgICAgICAgJ3N0cm9rZS1kYXNoYXJyYXknOiBheGlzLmxpbmVTdHlsZS5kYXNoQXJyYXksXG4gICAgICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IGF4aXMubGluZVN0eWxlLndpZHRoLFxuICAgICAgICAgICAgICAgICdzdHJva2UnOiBheGlzLmxpbmVTdHlsZS5jb2xvclxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNoYXJ0LnlBeGlzRWxlbWVudHMuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9uc0xpbmUpKTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5kcmF3WUF4aXNMYWJlbHMgPSBmdW5jdGlvbiAoYXhpcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFNpemU7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucztcbiAgICAgICAgICAgIHZhciBwb2ludFggPSAwO1xuICAgICAgICAgICAgdmFyIHBvaW50WSA9IDA7XG4gICAgICAgICAgICB2YXIgdmVjdG9yO1xuICAgICAgICAgICAgdmFyIGFuZ2xlID0gdGhpcy5zdGFydEFuZ2xlIDwgMCA/IHRoaXMuc3RhcnRBbmdsZSArIDM2MCA6IHRoaXMuc3RhcnRBbmdsZTtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSAnbWlkZGxlJztcbiAgICAgICAgICAgIHZhciByYWRpdXM7XG4gICAgICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogY2hhcnQuZWxlbWVudC5pZCArICdBeGlzTGFiZWxzJyArIGluZGV4IH0pO1xuICAgICAgICAgICAgdmVjdG9yID0gaGVscGVyXzMuQ29lZmZpY2llbnRUb1ZlY3RvcihoZWxwZXJfMy52YWx1ZVRvUG9sYXJDb2VmZmljaWVudChheGlzLnZpc2libGVMYWJlbHNbMF0udmFsdWUsIGF4aXMpLCB0aGlzLnN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJhZGl1cyA9IGNoYXJ0LnJhZGl1cyAqIGhlbHBlcl8xLnZhbHVlVG9Db2VmZmljaWVudChheGlzLnZpc2libGVMYWJlbHNbaV0udmFsdWUsIGF4aXMpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRTaXplID0gYXhpcy52aXNpYmxlTGFiZWxzW2ldLnNpemU7XG4gICAgICAgICAgICAgICAgcmFkaXVzID0gY2hhcnQucmFkaXVzICogaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KGF4aXMudmlzaWJsZUxhYmVsc1tpXS52YWx1ZSwgYXhpcyk7XG4gICAgICAgICAgICAgICAgcG9pbnRYID0gKHRoaXMuY2VudGVyWCArIHJhZGl1cyAqIHZlY3Rvci54KSAtXG4gICAgICAgICAgICAgICAgICAgIChheGlzLm1ham9yVGlja0xpbmVzLmhlaWdodCArIGVsZW1lbnRTaXplLndpZHRoIC8gMikgKiAoTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSk7XG4gICAgICAgICAgICAgICAgcG9pbnRZID0gKHRoaXMuY2VudGVyWSArIHJhZGl1cyAqIHZlY3Rvci55KSAtXG4gICAgICAgICAgICAgICAgICAgIChheGlzLm1ham9yVGlja0xpbmVzLmhlaWdodCArIGVsZW1lbnRTaXplLmhlaWdodCAvIDIpICogKE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCkpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuVGV4dE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgaW5kZXggKyAnX0F4aXNMYWJlbF8nICsgaSwgcG9pbnRYLCBwb2ludFkgKyAoZWxlbWVudFNpemUuaGVpZ2h0IC8gNCksIGFuY2hvciwgYXhpcy52aXNpYmxlTGFiZWxzW2ldLnRleHQpO1xuICAgICAgICAgICAgICAgIGhlbHBlcl8zLnRleHRFbGVtZW50KG9wdGlvbnMsIGF4aXMubGFiZWxTdHlsZSwgYXhpcy5sYWJlbFN0eWxlLmNvbG9yLCBsYWJlbEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhcnQueUF4aXNFbGVtZW50cy5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLmRyYXdZQXhpc0dyaWRMaW5lID0gZnVuY3Rpb24gKGF4aXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgcmFkaXVzO1xuICAgICAgICAgICAgdmFyIG1ham9yVGljayA9ICcnO1xuICAgICAgICAgICAgdmFyIG1ham9yR3JpZCA9ICcnO1xuICAgICAgICAgICAgdmFyIHZlY3RvcjtcbiAgICAgICAgICAgIHZhciB2ZWN0b3IyO1xuICAgICAgICAgICAgdmFyIGFuZ2xlID0gdGhpcy5zdGFydEFuZ2xlIDwgMCA/IHRoaXMuc3RhcnRBbmdsZSArIDM2MCA6IHRoaXMuc3RhcnRBbmdsZTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgdmFyIHgxO1xuICAgICAgICAgICAgdmFyIHkxO1xuICAgICAgICAgICAgdmFyIHgyO1xuICAgICAgICAgICAgdmFyIHkyO1xuICAgICAgICAgICAgaWYgKGF4aXMubWFqb3JHcmlkTGluZXMud2lkdGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJ0LnZpc2libGVTZXJpZXNbMF0udHlwZSA9PT0gJ1BvbGFyJykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzID0gY2hhcnQucmFkaXVzICogaGVscGVyXzEudmFsdWVUb0NvZWZmaWNpZW50KGF4aXMudmlzaWJsZUxhYmVsc1tqXS52YWx1ZSwgYXhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8yLkNpcmNsZU9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgJ19NYWpvckdyaWRMaW5lXycgKyBpbmRleCwgJ3RyYW5zcGFyZW50JywgYXhpcy5tYWpvckdyaWRMaW5lcywgYXhpcy5tYWpvckdyaWRMaW5lcy53aWR0aCwgdGhpcy5jZW50ZXJYLCB0aGlzLmNlbnRlclksIHJhZGl1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd0NpcmNsZShvcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXhpcy52aXNpYmxlTGFiZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBjaGFydC5yYWRpdXMgKiBoZWxwZXJfMS52YWx1ZVRvQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzW2pdLnZhbHVlLCBheGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjaGFydC5wcmltYXJ5WEF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQoY2hhcnQucHJpbWFyeVhBeGlzLnZpc2libGVMYWJlbHNbaV0udmFsdWUsIGNoYXJ0LnByaW1hcnlYQXhpcyksIHRoaXMuc3RhcnRBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvcjIgPSBoZWxwZXJfMy5Db2VmZmljaWVudFRvVmVjdG9yKGhlbHBlcl8zLnZhbHVlVG9Qb2xhckNvZWZmaWNpZW50KGNoYXJ0LnByaW1hcnlYQXhpcy52aXNpYmxlTGFiZWxzW2kgKyAxXS52YWx1ZSwgY2hhcnQucHJpbWFyeVhBeGlzKSwgdGhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvcjIgPSBoZWxwZXJfMy5Db2VmZmljaWVudFRvVmVjdG9yKGhlbHBlcl8zLnZhbHVlVG9Qb2xhckNvZWZmaWNpZW50KGNoYXJ0LnByaW1hcnlYQXhpcy52aXNpYmxlTGFiZWxzWzBdLnZhbHVlLCBjaGFydC5wcmltYXJ5WEF4aXMpLCB0aGlzLnN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MSA9IHRoaXMuY2VudGVyWCArIHJhZGl1cyAqIHZlY3Rvci54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkxID0gdGhpcy5jZW50ZXJZICsgcmFkaXVzICogdmVjdG9yLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDIgPSB0aGlzLmNlbnRlclggKyByYWRpdXMgKiB2ZWN0b3IyLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTIgPSB0aGlzLmNlbnRlclkgKyByYWRpdXMgKiB2ZWN0b3IyLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFqb3JHcmlkID0gbWFqb3JHcmlkLmNvbmNhdCgnTScgKyAnICcgKyB4MSArICcgJyArIHkxICsgJyAnICsgJ0wnICsgJyAnICsgeDIgKyAnICcgKyB5MiArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMi5QYXRoT3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX01ham9yR3JpZExpbmVfJyArIGluZGV4LCAndHJhbnNwYXJlbnQnLCBheGlzLm1ham9yR3JpZExpbmVzLndpZHRoLCBheGlzLm1ham9yR3JpZExpbmVzLmNvbG9yLCBudWxsLCBudWxsLCBtYWpvckdyaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm1ham9yVGlja0xpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzWzBdLnZhbHVlLCBheGlzKSwgdGhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBjaGFydC5yYWRpdXMgKiBoZWxwZXJfMS52YWx1ZVRvQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlLCBheGlzKTtcbiAgICAgICAgICAgICAgICAgICAgeDEgPSB0aGlzLmNlbnRlclggKyByYWRpdXMgKiB2ZWN0b3IueDtcbiAgICAgICAgICAgICAgICAgICAgeTEgPSB0aGlzLmNlbnRlclkgKyByYWRpdXMgKiB2ZWN0b3IueTtcbiAgICAgICAgICAgICAgICAgICAgeDIgPSB4MSAtIGF4aXMubWFqb3JUaWNrTGluZXMuaGVpZ2h0ICogKE1hdGguY29zKGFuZ2xlICogTWF0aC5QSSAvIDE4MCkpO1xuICAgICAgICAgICAgICAgICAgICB5MiA9IHkxIC0gYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKiAoTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSk7XG4gICAgICAgICAgICAgICAgICAgIG1ham9yVGljayA9IG1ham9yVGljay5jb25jYXQoJ00gJyArIHgxICsgJyAnICsgeTEgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBMICcgKyB4MiArICcgJyArIHkyICsgJyAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpY2tMaW5lKGF4aXMsIGluZGV4LCBtYWpvclRpY2ssICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5kcmF3WEF4aXNHcmlkTGluZSA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciB0ZW1wSW50ZXJ2YWw7XG4gICAgICAgICAgICB2YXIgdmVjdG9yO1xuICAgICAgICAgICAgdmFyIG1ham9yR3JpZCA9ICcnO1xuICAgICAgICAgICAgdmFyIG1ham9yVGljayA9ICcnO1xuICAgICAgICAgICAgdmFyIG1pbm9yR2lyZExpbmUgPSAnJztcbiAgICAgICAgICAgIHZhciBtaW5vclRpY2tMaW5lID0gJyc7XG4gICAgICAgICAgICB2YXIgeDEgPSB0aGlzLmNlbnRlclg7XG4gICAgICAgICAgICB2YXIgeDI7XG4gICAgICAgICAgICB2YXIgeTEgPSB0aGlzLmNlbnRlclk7XG4gICAgICAgICAgICB2YXIgeTI7XG4gICAgICAgICAgICB2YXIgbWlub3JEaXJlY3Rpb247XG4gICAgICAgICAgICB2YXIgdGlja1NpemUgPSBheGlzLm1ham9yVGlja0xpbmVzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGVtcEludGVydmFsID0gYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlO1xuICAgICAgICAgICAgICAgIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlLCBheGlzKSwgdGhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgICAgICB4MiA9IHRoaXMuY2VudGVyWCArIGNoYXJ0LnJhZGl1cyAqIHZlY3Rvci54O1xuICAgICAgICAgICAgICAgIHkyID0gdGhpcy5jZW50ZXJZICsgY2hhcnQucmFkaXVzICogdmVjdG9yLnk7XG4gICAgICAgICAgICAgICAgbWFqb3JHcmlkID0gbWFqb3JHcmlkLmNvbmNhdCgnTSAnICsgeDEgKyAnICcgKyB5MSArICcgJyArICdMJyArIHgyICsgJyAnICsgeTIpO1xuICAgICAgICAgICAgICAgIG1ham9yVGljayA9IG1ham9yVGljay5jb25jYXQoJ00gJyArIHgyICsgJyAnICsgeTIgK1xuICAgICAgICAgICAgICAgICAgICAnIEwgJyArICh4MiArIGF4aXMubWFqb3JUaWNrTGluZXMuaGVpZ2h0ICogdmVjdG9yLngpICsgJyAnICsgKHkyICsgYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKiB2ZWN0b3IueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgIGlmIChheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbCA+IDAgJiYgKGF4aXMubWlub3JHcmlkTGluZXMud2lkdGggPiAwIHx8IGF4aXMubWlub3JUaWNrTGluZXMud2lkdGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAmJiBheGlzLnZhbHVlVHlwZSAhPT0gJ0NhdGVnb3J5JyAmJiBjaGFydC52aXNpYmxlU2VyaWVzWzBdLnR5cGUgIT09ICdSYWRhcicpIHtcbiAgICAgICAgICAgICAgICAgICAgbWlub3JEaXJlY3Rpb24gPSB0aGlzLmRyYXdBeGlzTWlub3JMaW5lKGF4aXMsIHRlbXBJbnRlcnZhbCwgbWlub3JHaXJkTGluZSwgbWlub3JUaWNrTGluZSk7XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yR2lyZExpbmUgPSBtaW5vckRpcmVjdGlvblswXTtcbiAgICAgICAgICAgICAgICAgICAgbWlub3JUaWNrTGluZSA9IG1pbm9yRGlyZWN0aW9uWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGlja0xpbmUoYXhpcywgaW5kZXgsIG1ham9yVGljaywgbWlub3JUaWNrTGluZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyaWRMaW5lKGF4aXMsIGluZGV4LCBtYWpvckdyaWQsIG1pbm9yR2lyZExpbmUpO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLmRyYXdBeGlzTWlub3JMaW5lID0gZnVuY3Rpb24gKGF4aXMsIHRlbXBJbnRlcnZhbCwgbWlub3JHaXJkLCBtaW5vclRpY2spIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRlbXBJbnRlcnZhbDtcbiAgICAgICAgICAgIHZhciB4O1xuICAgICAgICAgICAgdmFyIHk7XG4gICAgICAgICAgICB2YXIgdmVjdG9yO1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gYXhpcy52aXNpYmxlUmFuZ2U7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgdGlja1NpemUgPSBheGlzLm1pbm9yVGlja0xpbmVzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciByZWN0ID0gYXhpcy5yZWN0O1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBheGlzLm1pbm9yVGlja3NQZXJJbnRlcnZhbDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gKGF4aXMudmFsdWVUeXBlID09PSAnRGF0ZVRpbWUnID8gYXhpcy5kYXRlVGltZUludGVydmFsIDogYXhpcy52aXNpYmxlUmFuZ2UuaW50ZXJ2YWwpIC9cbiAgICAgICAgICAgICAgICAgICAgKGF4aXMubWlub3JUaWNrc1BlckludGVydmFsICsgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGhlbHBlcl8xLmluc2lkZSh2YWx1ZSwgcmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQodmFsdWUsIGF4aXMpLCB0aGlzLnN0YXJ0QW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICB4ID0gdGhpcy5jZW50ZXJYICsgdGhpcy5jaGFydC5yYWRpdXMgKiB2ZWN0b3IueDtcbiAgICAgICAgICAgICAgICAgICAgeSA9IHRoaXMuY2VudGVyWSArIHRoaXMuY2hhcnQucmFkaXVzICogdmVjdG9yLnk7XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yR2lyZCA9IG1pbm9yR2lyZC5jb25jYXQoJ00nICsgJyAnICsgdGhpcy5jZW50ZXJYICsgJyAnICsgdGhpcy5jZW50ZXJZXG4gICAgICAgICAgICAgICAgICAgICAgICArICdMICcgKyB4ICsgJyAnICsgeSk7XG4gICAgICAgICAgICAgICAgICAgIG1pbm9yVGljayA9IG1pbm9yVGljay5jb25jYXQoJ00nICsgJyAnICsgeCArICcgJyArIHkgKyAnTCcgKyAnICcgKyAoeCArIGF4aXMubWlub3JUaWNrTGluZXMuaGVpZ2h0ICogdmVjdG9yLngpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICh5ICsgKGF4aXMubWlub3JUaWNrTGluZXMuaGVpZ2h0ICogdmVjdG9yLnkpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlyZWN0aW9uLnB1c2gobWlub3JHaXJkKTtcbiAgICAgICAgICAgIGRpcmVjdGlvbi5wdXNoKG1pbm9yVGljayk7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBQb2xhclJhZGFyUGFuZWwucHJvdG90eXBlLmRyYXdYQXhpc0xhYmVscyA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciBwb2ludFggPSAwO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRTaXplO1xuICAgICAgICAgICAgdmFyIHBvaW50WSA9IDA7XG4gICAgICAgICAgICB2YXIgbGFiZWxFbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogY2hhcnQuZWxlbWVudC5pZCArICdBeGlzTGFiZWxzJyArIGluZGV4IH0pO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgdmVjdG9yO1xuICAgICAgICAgICAgdmFyIGxhYmVsVGV4dDtcbiAgICAgICAgICAgIHZhciBmaXJzdExhYmVsWDtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gNTtcbiAgICAgICAgICAgIHZhciBsYXN0TGFiZWxYO1xuICAgICAgICAgICAgdmFyIHRleHRBbmNob3IgPSAnJztcbiAgICAgICAgICAgIHZhciB0aWNrc2J3dExhYmVsID0gYXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgYXhpcy5sYWJlbFBsYWNlbWVudCA9PT0gJ0JldHdlZW5UaWNrcydcbiAgICAgICAgICAgICAgICAmJiBjaGFydC52aXNpYmxlU2VyaWVzWzBdLnR5cGUgIT09ICdSYWRhcicgPyAwLjUgOiAwO1xuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IGNoYXJ0LnJhZGl1cyArIGF4aXMubWFqb3JUaWNrTGluZXMuaGVpZ2h0O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGF4aXMudmlzaWJsZUxhYmVscy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHZlY3RvciA9IGhlbHBlcl8zLkNvZWZmaWNpZW50VG9WZWN0b3IoaGVscGVyXzMudmFsdWVUb1BvbGFyQ29lZmZpY2llbnQoYXhpcy52aXNpYmxlTGFiZWxzW2ldLnZhbHVlICsgdGlja3Nid3RMYWJlbCwgYXhpcyksIHRoaXMuc3RhcnRBbmdsZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTih2ZWN0b3IueCkgJiYgIWlzTmFOKHZlY3Rvci55KSkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludFggPSB0aGlzLmNlbnRlclggKyAocmFkaXVzICsgYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyBwYWRkaW5nKSAqIHZlY3Rvci54O1xuICAgICAgICAgICAgICAgICAgICBwb2ludFkgPSB0aGlzLmNlbnRlclkgKyAocmFkaXVzICsgYXhpcy5tYWpvclRpY2tMaW5lcy5oZWlnaHQgKyBwYWRkaW5nKSAqIHZlY3Rvci55O1xuICAgICAgICAgICAgICAgICAgICB0ZXh0QW5jaG9yID0gcGFyc2VGbG9hdChwb2ludFgudG9GaXhlZCgxKSkgPT09IHBhcnNlRmxvYXQodGhpcy5jZW50ZXJYLnRvRml4ZWQoMSkpID8gJ21pZGRsZScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKHBvaW50WCA8IHRoaXMuY2VudGVyWCkgPyAnZW5kJyA6ICdzdGFydCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhYmVsVGV4dCA9IGF4aXMudmlzaWJsZUxhYmVsc1tpXS50ZXh0O1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0TGFiZWxYID0gcG9pbnRYO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09PSBheGlzLnZpc2libGVMYWJlbHMubGVuZ3RoIC0gMSAmJiBheGlzLnZhbHVlVHlwZSAhPT0gJ0NhdGVnb3J5Jykge1xuICAgICAgICAgICAgICAgICAgICBsYXN0TGFiZWxYID0gaGVscGVyXzEubWVhc3VyZVRleHQobGFiZWxUZXh0LCBheGlzLmxhYmVsU3R5bGUpLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdExhYmVsWCArPSBwb2ludFg7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dCA9IChsYXN0TGFiZWxYID4gZmlyc3RMYWJlbFgpID8gJycgOiBsYWJlbFRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuVGV4dE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgaW5kZXggKyAnX0F4aXNMYWJlbF8nICsgaSwgcG9pbnRYLCBwb2ludFksIHRleHRBbmNob3IsIGxhYmVsVGV4dCwgJycsICdjZW50cmFsJyk7XG4gICAgICAgICAgICAgICAgaGVscGVyXzMudGV4dEVsZW1lbnQob3B0aW9ucywgYXhpcy5sYWJlbFN0eWxlLCBheGlzLmxhYmVsU3R5bGUuY29sb3IsIGxhYmVsRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobGFiZWxFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5yZW5kZXJUaWNrTGluZSA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCwgbWFqb3JUaWNrTGluZSwgbWlub3JUaWNrTGluZSkge1xuICAgICAgICAgICAgdmFyIHRpY2tPcHRpb25zO1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChheGlzLm1ham9yVGlja0xpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIHRpY2tPcHRpb25zID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArICdfTWFqb3JUaWNrTGluZV8nICsgaW5kZXgsICd0cmFuc3BhcmVudCcsIGF4aXMubWFqb3JUaWNrTGluZXMud2lkdGgsIGF4aXMubWFqb3JUaWNrTGluZXMuY29sb3IsIG51bGwsIG51bGwsIG1ham9yVGlja0xpbmUpO1xuICAgICAgICAgICAgICAgIGNoYXJ0LnlBeGlzRWxlbWVudHMuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgodGlja09wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm1pbm9yVGlja0xpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIHRpY2tPcHRpb25zID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArICdfTWlub3JUaWNrTGluZV8nICsgaW5kZXgsICd0cmFuc3BhcmVudCcsIGF4aXMubWlub3JUaWNrTGluZXMud2lkdGgsIGF4aXMubWlub3JUaWNrTGluZXMuY29sb3IsIG51bGwsIG51bGwsIG1pbm9yVGlja0xpbmUpO1xuICAgICAgICAgICAgICAgIGNoYXJ0LnlBeGlzRWxlbWVudHMuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgodGlja09wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUG9sYXJSYWRhclBhbmVsLnByb3RvdHlwZS5yZW5kZXJHcmlkTGluZSA9IGZ1bmN0aW9uIChheGlzLCBpbmRleCwgbWFqb3JHcmlkLCBtaW5vckdpcmQpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgZ3JpZE9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoYXhpcy5tYWpvckdyaWRMaW5lcy53aWR0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBncmlkT3B0aW9ucyA9IG5ldyBoZWxwZXJfMi5QYXRoT3B0aW9uKGNoYXJ0LmVsZW1lbnQuaWQgKyAnX01ham9yR3JpZExpbmVfJyArIGluZGV4LCAndHJhbnNwYXJlbnQnLCBheGlzLm1ham9yR3JpZExpbmVzLndpZHRoLCBheGlzLm1ham9yR3JpZExpbmVzLmNvbG9yLCBudWxsLCBheGlzLm1ham9yR3JpZExpbmVzLmRhc2hBcnJheSwgbWFqb3JHcmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgoZ3JpZE9wdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLm1pbm9yR3JpZExpbmVzLndpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIGdyaWRPcHRpb25zID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24oY2hhcnQuZWxlbWVudC5pZCArICdfTWlub3JHcmlkTGluZV8nICsgaW5kZXgsICd0cmFuc3BhcmVudCcsIGF4aXMubWlub3JHcmlkTGluZXMud2lkdGgsIGF4aXMubWlub3JHcmlkTGluZXMuY29sb3IsIG51bGwsIGF4aXMubWlub3JHcmlkTGluZXMuZGFzaEFycmF5LCBtaW5vckdpcmQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjaGFydC5yZW5kZXJlci5kcmF3UGF0aChncmlkT3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUG9sYXJSYWRhclBhbmVsO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLlBvbGFyUmFkYXJQYW5lbCA9IFBvbGFyUmFkYXJQYW5lbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvYXhpcy9wb2xhci1yYWRhci1wYW5lbC5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vc2VyaWVzL3BvbGFyLXNlcmllc1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBwb2xhcl9zZXJpZXNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgUmFkYXJTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUmFkYXJTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFJhZGFyU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFJhZGFyU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzVHlwZSA9IGhlbHBlcl8xLmZpcnN0VG9Mb3dlckNhc2Uoc2VyaWVzLmRyYXdUeXBlKTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignQ29sdW1uJykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmNoYXJ0W3Nlcmllc1R5cGUgKyAnU2VyaWVzTW9kdWxlJ10ucmVuZGVyKHNlcmllcywgc2VyaWVzLnhBeGlzLCBzZXJpZXMueUF4aXMsIHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sdW1uRHJhd1R5cGVSZW5kZXIoc2VyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUmFkYXJTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1JhZGFyU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgUmFkYXJTZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJhZGFyU2VyaWVzO1xuICAgIH0ocG9sYXJfc2VyaWVzXzEuUG9sYXJTZXJpZXMpKTtcbiAgICBleHBvcnRzLlJhZGFyU2VyaWVzID0gUmFkYXJTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9yYWRhci1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vY29sdW1uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgY29sdW1uX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tpbmdCYXJTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RhY2tpbmdCYXJTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN0YWNraW5nQmFyU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNraW5nQmFyU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gTWF0aC5tYXgoc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4sIDApO1xuICAgICAgICAgICAgdmFyIHNpZGVCeVNpZGVJbmZvID0gdGhpcy5nZXRTaWRlQnlTaWRlSW5mbyhzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIHN0YWNrZWRWYWx1ZSA9IHNlcmllcy5zdGFja2VkVmFsdWVzO1xuICAgICAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRTdGFjayA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludFN0YWNrLnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50U3RhY2sucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludFN0YWNrLnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1twb2ludFN0YWNrLmluZGV4IC0gMV0sIHBvaW50U3RhY2ssIHNlcmllcy5wb2ludHNbcG9pbnRTdGFjay5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShwb2ludFN0YWNrLnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLnN0YXJ0LCBzdGFja2VkVmFsdWUuZW5kVmFsdWVzW3BvaW50U3RhY2suaW5kZXhdLCBwb2ludFN0YWNrLnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLmVuZCwgc3RhY2tlZFZhbHVlLnN0YXJ0VmFsdWVzW3BvaW50U3RhY2suaW5kZXhdLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YSA9IHRoaXMudHJpZ2dlckV2ZW50KHNlcmllcywgcG9pbnRTdGFjaywgc2VyaWVzLmludGVyaW9yLCB7IHdpZHRoOiBzZXJpZXMuYm9yZGVyLndpZHRoLCBjb2xvcjogc2VyaWVzLmJvcmRlci5jb2xvciB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzRGF0YS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShzZXJpZXMsIHBvaW50U3RhY2ssIHJlY3QsIGFyZ3NEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3ltYm9sTG9jYXRpb24ocG9pbnRTdGFjaywgcmVjdCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU3RhY2tpbmdCYXJTZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgU3RhY2tpbmdCYXJTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1N0YWNraW5nQmFyU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgU3RhY2tpbmdCYXJTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlKHNlcmllcyk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTdGFja2luZ0JhclNlcmllcztcbiAgICB9KGNvbHVtbl9iYXNlXzEuQ29sdW1uQmFzZSkpO1xuICAgIGV4cG9ydHMuU3RhY2tpbmdCYXJTZXJpZXMgPSBTdGFja2luZ0JhclNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3N0YWNraW5nLWJhci1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vY29sdW1uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgY29sdW1uX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2FuZGxlU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENhbmRsZVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ2FuZGxlU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIENhbmRsZVNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHNpZGVCeVNpZGVJbmZvID0gdGhpcy5nZXRTaWRlQnlTaWRlSW5mbyhzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIGFyZ3NEYXRhO1xuICAgICAgICAgICAgdmFyIGJvcmRlcldpZHRoID0gTWF0aC5tYXgoc2VyaWVzLmJvcmRlci53aWR0aCwgMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJSZWdpb24gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHRpY2tSZWdpb24gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIG1pZFBvaW50ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIG1pZFBvaW50ID0gKHNpZGVCeVNpZGVJbmZvLnN0YXJ0ICsgc2lkZUJ5U2lkZUluZm8uZW5kKSAvIDI7XG4gICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC52aXNpYmxlICYmIGhlbHBlcl8xLndpdGhJblJhbmdlKHNlcmllcy5wb2ludHNbcG9pbnQuaW5kZXggLSAxXSwgcG9pbnQsIHNlcmllcy5wb2ludHNbcG9pbnQuaW5kZXggKyAxXSwgc2VyaWVzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrUmVnaW9uID0gdGhpcy5nZXRSZWN0YW5nbGUoKHBvaW50LnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLm1lZGlhbiksIE1hdGgubWF4KHBvaW50LmhpZ2gsIHBvaW50LmxvdyksIChwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4pLCBNYXRoLm1pbihwb2ludC5oaWdoLCBwb2ludC5sb3cpLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrUmVnaW9uLnggLT0gYm9yZGVyV2lkdGggLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlja1JlZ2lvbi53aWR0aCA9IGJvcmRlcldpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlja1JlZ2lvbi55IC09IGJvcmRlcldpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tSZWdpb24uaGVpZ2h0ID0gYm9yZGVyV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VudGVyUmVnaW9uID0gdGhpcy5nZXRSZWN0YW5nbGUoKHBvaW50LnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLnN0YXJ0KSwgTWF0aC5tYXgocG9pbnQub3BlbiwgcG9pbnQuY2xvc2UpLCAocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uZW5kKSwgTWF0aC5taW4ocG9pbnQub3BlbiwgcG9pbnQuY2xvc2UpLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmdldFBhdGhTdHJpbmcodGlja1JlZ2lvbiwgY2VudGVyUmVnaW9uLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YSA9IHRoaXMudHJpZ2dlclBvaW50UmVuZGVyRXZlbnQoc2VyaWVzLCBwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdDYW5kbGUoc2VyaWVzLCBwb2ludCwgY2VudGVyUmVnaW9uLCBhcmdzRGF0YSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3ltYm9sTG9jYXRpb24ocG9pbnQsIHRpY2tSZWdpb24sIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bWJvbExvY2F0aW9uKHBvaW50LCBjZW50ZXJSZWdpb24sIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENhbmRsZVNlcmllcy5wcm90b3R5cGUudHJpZ2dlclBvaW50UmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCkge1xuICAgICAgICAgICAgdmFyIGZpbGw7XG4gICAgICAgICAgICBmaWxsID0gdGhpcy5nZXRDYW5kbGVDb2xvcihwb2ludCwgc2VyaWVzKTtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSB7IGNvbG9yOiBzZXJpZXMuYm9yZGVyLmNvbG9yLCB3aWR0aDogTWF0aC5tYXgoc2VyaWVzLmJvcmRlci53aWR0aCwgMSkgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJFdmVudChzZXJpZXMsIHBvaW50LCBmaWxsLCBib3JkZXIpO1xuICAgICAgICB9O1xuICAgICAgICBDYW5kbGVTZXJpZXMucHJvdG90eXBlLmdldENhbmRsZUNvbG9yID0gZnVuY3Rpb24gKHBvaW50LCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UG9pbnQgPSBwb2ludDtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1BvaW50ID0gc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCAtIDFdO1xuICAgICAgICAgICAgaWYgKHNlcmllcy5lbmFibGVTb2xpZENhbmRsZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmV2aW91c1BvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJpZXMuYmVhckZpbGxDb2xvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1BvaW50LmNsb3NlID4gcG9pbnQuY2xvc2UgPyBzZXJpZXMuYnVsbEZpbGxDb2xvciA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMuYmVhckZpbGxDb2xvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQub3BlbiA+IHBvaW50LmNsb3NlID8gc2VyaWVzLmJ1bGxGaWxsQ29sb3IgOlxuICAgICAgICAgICAgICAgICAgICBzZXJpZXMuYmVhckZpbGxDb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ2FuZGxlU2VyaWVzLnByb3RvdHlwZS5nZXRQYXRoU3RyaW5nID0gZnVuY3Rpb24gKHRvcFJlY3QsIG1pZFJlY3QsIHNlcmllcykge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMgPyB0b3BSZWN0LmhlaWdodCA6IHRvcFJlY3Qud2lkdGg7XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMgPyB0b3BSZWN0LnkgKyB0b3BSZWN0LmhlaWdodCAvIDIgOlxuICAgICAgICAgICAgICAgIHRvcFJlY3QueCArIHRvcFJlY3Qud2lkdGggLyAyO1xuICAgICAgICAgICAgZGlyZWN0aW9uICs9ICFzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyA/XG4gICAgICAgICAgICAgICAgJ00nICsgJyAnICsgKGNlbnRlcikgKyAnICcgKyAodG9wUmVjdC55KSArICcgJyArICdMJyArICcgJyArIChjZW50ZXIpICsgJyAnICsgbWlkUmVjdC55IDpcbiAgICAgICAgICAgICAgICAnTScgKyAnICcgKyAodG9wUmVjdC54KSArICcgJyArIChjZW50ZXIpICsgJyAnICsgJ0wnICsgJyAnICsgKG1pZFJlY3QueCkgKyAnICcgKyBjZW50ZXI7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCcgTScgKyAnICcgKyAobWlkUmVjdC54KSArICcgJyArIChtaWRSZWN0LnkpICsgJyAnICtcbiAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAobWlkUmVjdC54ICsgbWlkUmVjdC53aWR0aCkgKyAnICcgKyAobWlkUmVjdC55KSArICcgJyArXG4gICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKG1pZFJlY3QueCArIG1pZFJlY3Qud2lkdGgpICsgJyAnICtcbiAgICAgICAgICAgICAgICAobWlkUmVjdC55ICsgbWlkUmVjdC5oZWlnaHQpICsgJyAnICtcbiAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAobWlkUmVjdC54KSArICcgJyArIChtaWRSZWN0LnkgKyBtaWRSZWN0LmhlaWdodCkgK1xuICAgICAgICAgICAgICAgICcgJyArICdaJyk7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID9cbiAgICAgICAgICAgICAgICAnIE0nICsgJyAnICsgKGNlbnRlcikgKyAnICcgKyAobWlkUmVjdC55ICsgbWlkUmVjdC5oZWlnaHQpICsgJyAnICsgJ0wnICsgJyAnICsgKGNlbnRlcikgKyAnICcgKyAodG9wUmVjdC55ICtcbiAgICAgICAgICAgICAgICAgICAgdG9wUmVjdC5oZWlnaHQpIDpcbiAgICAgICAgICAgICAgICAnIE0nICsgJyAnICsgKG1pZFJlY3QueCArIG1pZFJlY3Qud2lkdGgpICsgJyAnICsgKGNlbnRlcikgKyAnICcgKyAnTCcgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAodG9wUmVjdC54ICsgdG9wUmVjdC53aWR0aCkgKyAnICcgKyBjZW50ZXI7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBDYW5kbGVTZXJpZXMucHJvdG90eXBlLmRyYXdDYW5kbGUgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCwgcmVjdCwgYXJnc0RhdGEsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGNoZWNrID0gc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMgPyByZWN0LmhlaWdodCA6IHJlY3Qud2lkdGg7XG4gICAgICAgICAgICBpZiAoY2hlY2sgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZpbGwgPSAhc2VyaWVzLmVuYWJsZVNvbGlkQ2FuZGxlcyA/XG4gICAgICAgICAgICAgICAgKHBvaW50Lm9wZW4gPiBwb2ludC5jbG9zZSA/IGFyZ3NEYXRhLmZpbGwgOiAndHJhbnNwYXJlbnQnKSA6IGFyZ3NEYXRhLmZpbGw7XG4gICAgICAgICAgICBhcmdzRGF0YS5ib3JkZXIuY29sb3IgPSBhcmdzRGF0YS5maWxsO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXggKyAnX1BvaW50XycgKyBwb2ludC5pbmRleCwgZmlsbCwgYXJnc0RhdGEuYm9yZGVyLndpZHRoLCBhcmdzRGF0YS5ib3JkZXIuY29sb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGNhbmRsZUVsZW1lbnQgPSBzZXJpZXMuY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucyk7XG4gICAgICAgICAgICBjYW5kbGVFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHBvaW50LngudG9TdHJpbmcoKSArICc6JyArIHBvaW50LmhpZ2gudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICsgJzonICsgcG9pbnQubG93LnRvU3RyaW5nKCkgKyAnOicgKyBwb2ludC5jbG9zZS50b1N0cmluZygpICsgJzonICsgcG9pbnQub3Blbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKGNhbmRsZUVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBDYW5kbGVTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlKHNlcmllcyk7XG4gICAgICAgIH07XG4gICAgICAgIENhbmRsZVNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ2FuZGxlU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgQ2FuZGxlU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDYW5kbGVTZXJpZXM7XG4gICAgfShjb2x1bW5fYmFzZV8xLkNvbHVtbkJhc2UpKTtcbiAgICBleHBvcnRzLkNhbmRsZVNlcmllcyA9IENhbmRsZVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2NhbmRsZS1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vY29sdW1uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgY29sdW1uX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tpbmdDb2x1bW5TZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RhY2tpbmdDb2x1bW5TZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN0YWNraW5nQ29sdW1uU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNraW5nQ29sdW1uU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICBzZXJpZXMuaXNSZWN0U2VyaWVzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvcmlnaW4gPSBNYXRoLm1heChzZXJpZXMueUF4aXMudmlzaWJsZVJhbmdlLm1pbiwgMCk7XG4gICAgICAgICAgICB2YXIgc2lkZUJ5U2lkZUluZm8gPSB0aGlzLmdldFNpZGVCeVNpZGVJbmZvKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgcmVjdDtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBzdGFja2VkVmFsdWUgPSBzZXJpZXMuc3RhY2tlZFZhbHVlcztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5zdGFydCwgc3RhY2tlZFZhbHVlLmVuZFZhbHVlc1twb2ludC5pbmRleF0sIHBvaW50LnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLmVuZCwgc3RhY2tlZFZhbHVlLnN0YXJ0VmFsdWVzW3BvaW50LmluZGV4XSwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB0aGlzLnRyaWdnZXJFdmVudChzZXJpZXMsIHBvaW50LCBzZXJpZXMuaW50ZXJpb3IsIHsgd2lkdGg6IHNlcmllcy5ib3JkZXIud2lkdGgsIGNvbG9yOiBzZXJpZXMuYm9yZGVyLmNvbG9yIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3UmVjdGFuZ2xlKHNlcmllcywgcG9pbnQsIHJlY3QsIGFyZ3NEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3ltYm9sTG9jYXRpb24ocG9pbnQsIHJlY3QsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFN0YWNraW5nQ29sdW1uU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBTdGFja2luZ0NvbHVtblNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBTdGFja2luZ0NvbHVtblNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnU3RhY2tpbmdDb2x1bW5TZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RhY2tpbmdDb2x1bW5TZXJpZXM7XG4gICAgfShjb2x1bW5fYmFzZV8xLkNvbHVtbkJhc2UpKTtcbiAgICBleHBvcnRzLlN0YWNraW5nQ29sdW1uU2VyaWVzID0gU3RhY2tpbmdDb2x1bW5TZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9zdGFja2luZy1jb2x1bW4tc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2xpbmUtYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBsaW5lX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RlcExpbmVTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RlcExpbmVTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFN0ZXBMaW5lU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0ZXBMaW5lU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpIHtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnJztcbiAgICAgICAgICAgIHZhciBzdGFydFBvaW50ID0gJ00nO1xuICAgICAgICAgICAgdmFyIHByZXZQb2ludCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcGF0aE9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgbGluZUxlbmd0aDtcbiAgICAgICAgICAgIHZhciBwb2ludDE7XG4gICAgICAgICAgICB2YXIgcG9pbnQyO1xuICAgICAgICAgICAgdmFyIHZpc2libGVQb2ludHMgPSB0aGlzLmltcHJvdmVDaGFydFBlcmZvcm1hbmNlKHNlcmllcyk7XG4gICAgICAgICAgICBpZiAoeEF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknICYmIHhBeGlzLmxhYmVsUGxhY2VtZW50ID09PSAnQmV0d2VlblRpY2tzJykge1xuICAgICAgICAgICAgICAgIGxpbmVMZW5ndGggPSAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5lTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlzaWJsZVBvaW50c18xID0gdmlzaWJsZVBvaW50czsgX2kgPCB2aXNpYmxlUG9pbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gdmlzaWJsZVBvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2UodmlzaWJsZVBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgdmlzaWJsZVBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2UG9pbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQyID0gaGVscGVyXzEuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC55VmFsdWUsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludDEgPSBoZWxwZXJfMS5nZXRQb2ludChwcmV2UG9pbnQueFZhbHVlLCBwcmV2UG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdChzdGFydFBvaW50ICsgJyAnICsgKHBvaW50MS54KSArICcgJyArIChwb2ludDEueSkgKyAnICcgKyAnTCcgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb2ludDIueCkgKyAnICcgKyAocG9pbnQxLnkpICsgJ0wnICsgJyAnICsgKHBvaW50Mi54KSArICcgJyArIChwb2ludDIueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9ICdMJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50MSA9IGhlbHBlcl8xLmdldFBvaW50KHBvaW50LnhWYWx1ZSAtIGxpbmVMZW5ndGgsIHBvaW50LnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoc3RhcnRQb2ludCArICcgJyArIChwb2ludDEueCkgKyAnICcgKyAocG9pbnQxLnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQgPSAnTCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goaGVscGVyXzEuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC55VmFsdWUsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCkpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKG5ldyBoZWxwZXJfMS5SZWN0KHBvaW50LnN5bWJvbExvY2F0aW9uc1swXS54IC0gc2VyaWVzLm1hcmtlci53aWR0aCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkgLSBzZXJpZXMubWFya2VyLmhlaWdodCwgMiAqIHNlcmllcy5tYXJrZXIud2lkdGgsIDIgKiBzZXJpZXMubWFya2VyLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldlBvaW50ID0gc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlID09PSAnRHJvcCcgPyBwcmV2UG9pbnQgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0gc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlID09PSAnRHJvcCcgPyBzdGFydFBvaW50IDogJ00nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50MSA9IGhlbHBlcl8xLmdldFBvaW50KHZpc2libGVQb2ludHNbdmlzaWJsZVBvaW50cy5sZW5ndGggLSAxXS54VmFsdWUgKyBsaW5lTGVuZ3RoLCB2aXNpYmxlUG9pbnRzW3Zpc2libGVQb2ludHMubGVuZ3RoIC0gMV0ueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyZWN0aW9uLmNvbmNhdChzdGFydFBvaW50ICsgJyAnICsgKHBvaW50MS54KSArICcgJyArIChwb2ludDEueSkgKyAnICcpO1xuICAgICAgICAgICAgcGF0aE9wdGlvbnMgPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXgsICd0cmFuc3BhcmVudCcsIHNlcmllcy53aWR0aCwgc2VyaWVzLmludGVyaW9yLCBzZXJpZXMub3BhY2l0eSwgc2VyaWVzLmRhc2hBcnJheSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTGluZVBhdGgocGF0aE9wdGlvbnMsIHNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1hcmtlcihzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBTdGVwTGluZVNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VyaWVzLmFuaW1hdGlvbjtcbiAgICAgICAgICAgIHRoaXMuZG9MaW5lYXJBbmltYXRpb24oc2VyaWVzLCBvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBTdGVwTGluZVNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBTdGVwTGluZVNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnU3RlcExpbmVTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RlcExpbmVTZXJpZXM7XG4gICAgfShsaW5lX2Jhc2VfMS5MaW5lQmFzZSkpO1xuICAgIGV4cG9ydHMuU3RlcExpbmVTZXJpZXMgPSBTdGVwTGluZVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3N0ZXAtbGluZS1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vbGluZS1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGxpbmVfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTdGVwQXJlYVNlcmllcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTdGVwQXJlYVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RlcEFyZWFTZXJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgU3RlcEFyZWFTZXJpZXMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXMsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludDtcbiAgICAgICAgICAgIHZhciBzZWNvbmRQb2ludDtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB2YXIgcG9pbnRzTGVuZ3RoID0gc2VyaWVzLnBvaW50cy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gTWF0aC5tYXgoc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4sIDApO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgcG9pbnQ7XG4gICAgICAgICAgICB2YXIgeFZhbHVlO1xuICAgICAgICAgICAgdmFyIGxpbmVMZW5ndGg7XG4gICAgICAgICAgICB2YXIgcHJldlBvaW50ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh4QXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgeEF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnKSB7XG4gICAgICAgICAgICAgICAgbGluZUxlbmd0aCA9IDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmVMZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvaW50ID0gc2VyaWVzLnBvaW50c1tpXTtcbiAgICAgICAgICAgICAgICB4VmFsdWUgPSBwb2ludC54VmFsdWU7XG4gICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zID0gW107XG4gICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC52aXNpYmxlICYmIGhlbHBlcl8xLndpdGhJblJhbmdlKHNlcmllcy5wb2ludHNbaSAtIDFdLCBwb2ludCwgc2VyaWVzLnBvaW50c1tpICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKHhWYWx1ZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9pbnQgPSBoZWxwZXJfMS5nZXRQb2ludCh4VmFsdWUgLSBsaW5lTGVuZ3RoLCBvcmlnaW4sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdNJyArICcgJyArIChjdXJyZW50UG9pbnQueCkgKyAnICcgKyAoY3VycmVudFBvaW50LnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb2ludCA9IGhlbHBlcl8xLmdldFBvaW50KHhWYWx1ZSAtIGxpbmVMZW5ndGgsIHBvaW50LnlWYWx1ZSAtIGxpbmVMZW5ndGgsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdMJyArICcgJyArIChjdXJyZW50UG9pbnQueCkgKyAnICcgKyAoY3VycmVudFBvaW50LnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldlBvaW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb2ludCA9IGhlbHBlcl8xLmdldFBvaW50KHBvaW50LnhWYWx1ZSwgcG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kUG9pbnQgPSBoZWxwZXJfMS5nZXRQb2ludChwcmV2UG9pbnQueFZhbHVlLCBwcmV2UG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTCcgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjdXJyZW50UG9pbnQueCkgKyAnICcgKyAoc2Vjb25kUG9pbnQueSkgKyAnTCcgKyAnICcgKyAoY3VycmVudFBvaW50LngpICsgJyAnICsgKGN1cnJlbnRQb2ludC55KSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlID09PSAnR2FwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvaW50ID0gaGVscGVyXzEuZ2V0UG9pbnQocG9pbnQueFZhbHVlICsgbGluZUxlbmd0aCwgcG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICdMJyArICcgJyArIChjdXJyZW50UG9pbnQueCkgKyAnICcgKyAoY3VycmVudFBvaW50LnkpICsgJyAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucy5wdXNoKGhlbHBlcl8xLmdldFBvaW50KHhWYWx1ZSwgcG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKG5ldyBoZWxwZXJfMS5SZWN0KHBvaW50LnN5bWJvbExvY2F0aW9uc1swXS54IC0gc2VyaWVzLm1hcmtlci53aWR0aCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkgLSBzZXJpZXMubWFya2VyLmhlaWdodCwgMiAqIHNlcmllcy5tYXJrZXIud2lkdGgsIDIgKiBzZXJpZXMubWFya2VyLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlcmllcy5wb2ludHNbaSArIDFdICYmICFzZXJpZXMucG9pbnRzW2kgKyAxXS52aXNpYmxlICYmIHNlcmllcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSAhPT0gJ0Ryb3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb2ludCA9IGhlbHBlcl8xLmdldFBvaW50KHhWYWx1ZSArIGxpbmVMZW5ndGgsIG9yaWdpbiwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTCcgKyAnICcgKyAoY3VycmVudFBvaW50LngpICsgJyAnICsgKGN1cnJlbnRQb2ludC55KSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcHJldlBvaW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9pbnRzTGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0geyAneCc6IHNlcmllcy5wb2ludHNbcG9pbnRzTGVuZ3RoIC0gMV0ueFZhbHVlICsgbGluZUxlbmd0aCwgJ3knOiBzZXJpZXMucG9pbnRzW3BvaW50c0xlbmd0aCAtIDFdLnlWYWx1ZSB9O1xuICAgICAgICAgICAgICAgIHNlY29uZFBvaW50ID0gaGVscGVyXzEuZ2V0UG9pbnQoc3RhcnQueCwgc3RhcnQueSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdMJyArICcgJyArIChzZWNvbmRQb2ludC54KSArICcgJyArIChzZWNvbmRQb2ludC55KSArICcgJyk7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSB7ICd4Jzogc2VyaWVzLnBvaW50c1twb2ludHNMZW5ndGggLSAxXS54VmFsdWUgKyBsaW5lTGVuZ3RoLCAneSc6IG9yaWdpbiB9O1xuICAgICAgICAgICAgICAgIHNlY29uZFBvaW50ID0gaGVscGVyXzEuZ2V0UG9pbnQoc3RhcnQueCwgc3RhcnQueSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdMJyArICcgJyArIChzZWNvbmRQb2ludC54KSArICcgJyArIChzZWNvbmRQb2ludC55KSArICcgJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24oc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzLmluZGV4LCBzZXJpZXMuaW50ZXJpb3IsIHNlcmllcy5ib3JkZXIud2lkdGgsIHNlcmllcy5ib3JkZXIuY29sb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRMaW5lUGF0aChvcHRpb25zLCBzZXJpZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNYXJrZXIoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RlcEFyZWFTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHNlcmllcy5hbmltYXRpb247XG4gICAgICAgICAgICB0aGlzLmRvTGluZWFyQW5pbWF0aW9uKHNlcmllcywgb3B0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RlcEFyZWFTZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgU3RlcEFyZWFTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1N0ZXBBcmVhU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0ZXBBcmVhU2VyaWVzO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLlN0ZXBBcmVhU2VyaWVzID0gU3RlcEFyZWFTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9zdGVwLWFyZWEtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2xpbmUtYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBsaW5lX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU3RhY2tpbmdBcmVhU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFN0YWNraW5nQXJlYVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RhY2tpbmdBcmVhU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFN0YWNraW5nQXJlYVNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcywgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgZ2V0Q29vcmRpbmF0ZSA9IHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyBoZWxwZXJfMS5UcmFuc2Zvcm1Ub1Zpc2libGUgOiBoZWxwZXJfMS5nZXRQb2ludDtcbiAgICAgICAgICAgIHZhciBsaW5lRGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB2YXIgdmlzaWJsZVBvaW50cyA9IHNlcmllcy5wb2ludHM7XG4gICAgICAgICAgICB2YXIgcG9pbnRzTGVuZ3RoID0gdmlzaWJsZVBvaW50cy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgc3RhY2tlZHZhbHVlID0gc2VyaWVzLnN0YWNrZWRWYWx1ZXM7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyA/XG4gICAgICAgICAgICAgICAgTWF0aC5tYXgoc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZS5taW4sIHN0YWNrZWR2YWx1ZS5lbmRWYWx1ZXNbMF0pIDpcbiAgICAgICAgICAgICAgICBNYXRoLm1heChzZXJpZXMueUF4aXMudmlzaWJsZVJhbmdlLm1pbiwgc3RhY2tlZHZhbHVlLnN0YXJ0VmFsdWVzWzBdKTtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBzZXJpZXMuYm9yZGVyO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgc3RhcnRQb2ludCA9IDA7XG4gICAgICAgICAgICB2YXIgcG9pbnQxID0gZ2V0Q29vcmRpbmF0ZSh2aXNpYmxlUG9pbnRzWzBdLnhWYWx1ZSwgb3JpZ2luLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgcG9pbnQyO1xuICAgICAgICAgICAgbGluZURpcmVjdGlvbiA9IGxpbmVEaXJlY3Rpb24uY29uY2F0KCdNJyArICcgJyArIChwb2ludDEueCkgKyAnICcgKyAocG9pbnQxLnkpICsgJyAnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2aXNpYmxlUG9pbnRzW2ldLnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHZpc2libGVQb2ludHNbaV0ucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlUG9pbnRzW2ldLnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2UodmlzaWJsZVBvaW50c1tpIC0gMV0sIHZpc2libGVQb2ludHNbaV0sIHZpc2libGVQb2ludHNbaSArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50MSA9IGdldENvb3JkaW5hdGUodmlzaWJsZVBvaW50c1tpXS54VmFsdWUsIHN0YWNrZWR2YWx1ZS5lbmRWYWx1ZXNbaV0sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZURpcmVjdGlvbiA9IGxpbmVEaXJlY3Rpb24uY29uY2F0KCdMJyArICcgJyArIChwb2ludDEueCkgKyAnICcgKyAocG9pbnQxLnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVBvaW50c1tpXS5zeW1ib2xMb2NhdGlvbnMucHVzaChnZXRDb29yZGluYXRlKHZpc2libGVQb2ludHNbaV0ueFZhbHVlLCBzdGFja2VkdmFsdWUuZW5kVmFsdWVzW2ldLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcykpO1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlUG9pbnRzW2ldLnJlZ2lvbnMucHVzaChuZXcgaGVscGVyXzEuUmVjdCh2aXNpYmxlUG9pbnRzW2ldLnN5bWJvbExvY2F0aW9uc1swXS54IC0gc2VyaWVzLm1hcmtlci53aWR0aCwgdmlzaWJsZVBvaW50c1tpXS5zeW1ib2xMb2NhdGlvbnNbMF0ueSAtIHNlcmllcy5tYXJrZXIuaGVpZ2h0LCAyICogc2VyaWVzLm1hcmtlci53aWR0aCwgMiAqIHNlcmllcy5tYXJrZXIuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlICE9PSAnRHJvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpIC0gMTsgaiA+PSBzdGFydFBvaW50OyBqLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludDIgPSBnZXRDb29yZGluYXRlKHZpc2libGVQb2ludHNbal0ueFZhbHVlLCBzdGFja2VkdmFsdWUuc3RhcnRWYWx1ZXNbal0sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lRGlyZWN0aW9uID0gbGluZURpcmVjdGlvbi5jb25jYXQoJ0wnICsgJyAnICsgKHBvaW50Mi54KSArICcgJyArIChwb2ludDIueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2libGVQb2ludHNbaSArIDFdICYmIHZpc2libGVQb2ludHNbaSArIDFdLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludDEgPSBnZXRDb29yZGluYXRlKHZpc2libGVQb2ludHNbaSArIDFdLnhWYWx1ZSwgc3RhY2tlZHZhbHVlLnN0YXJ0VmFsdWVzW2kgKyAxXSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVEaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLmNvbmNhdCgnTScgKyAnICcgKyAocG9pbnQxLngpICsgJyAnICsgKHBvaW50MS55KSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyAmJiB2aXNpYmxlUG9pbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBwb2ludDEgPSB7ICd4Jzogc2VyaWVzLnBvaW50c1swXS54VmFsdWUsICd5Jzogc3RhY2tlZHZhbHVlLmVuZFZhbHVlc1swXSB9O1xuICAgICAgICAgICAgICAgIHBvaW50MiA9IGdldENvb3JkaW5hdGUocG9pbnQxLngsIHBvaW50MS55LCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgbGluZURpcmVjdGlvbiArPSAoJ0wnICsgJyAnICsgKHBvaW50Mi54KSArICcgJyArIChwb2ludDIueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgIHBvaW50MSA9IHsgJ3gnOiBzZXJpZXMucG9pbnRzWzBdLnhWYWx1ZSwgJ3knOiBzdGFja2VkdmFsdWUuc3RhcnRWYWx1ZXNbMF0gfTtcbiAgICAgICAgICAgICAgICBwb2ludDIgPSBnZXRDb29yZGluYXRlKHBvaW50MS54LCBwb2ludDEueSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgIGxpbmVEaXJlY3Rpb24gKz0gKCdMJyArICcgJyArIChwb2ludDIueCkgKyAnICcgKyAocG9pbnQyLnkpICsgJyAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGogPSBwb2ludHNMZW5ndGggLSAxOyBqID49IHN0YXJ0UG9pbnQ7IGotLSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c1NlcmllcyA9IHRoaXMuZ2V0UHJldmlvdXNTZXJpZXMoc2VyaWVzKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNTZXJpZXMuZW1wdHlQb2ludFNldHRpbmdzLm1vZGUgIT09ICdEcm9wJyB8fCAhcHJldmlvdXNTZXJpZXMucG9pbnRzW2pdLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQyID0gZ2V0Q29vcmRpbmF0ZSh2aXNpYmxlUG9pbnRzW2pdLnhWYWx1ZSwgc3RhY2tlZHZhbHVlLnN0YXJ0VmFsdWVzW2pdLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVEaXJlY3Rpb24gPSBsaW5lRGlyZWN0aW9uLmNvbmNhdCgnTCcgKyAnICcgKyAocG9pbnQyLngpICsgJyAnICsgKHBvaW50Mi55KSArICcgJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHNlcmllcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCwgc2VyaWVzLmludGVyaW9yLCBzZXJpZXMuYm9yZGVyLndpZHRoLCBzZXJpZXMuYm9yZGVyLmNvbG9yLCBzZXJpZXMub3BhY2l0eSwgc2VyaWVzLmRhc2hBcnJheSwgbGluZURpcmVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZExpbmVQYXRoKG9wdGlvbnMsIHNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1hcmtlcihzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBTdGFja2luZ0FyZWFTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHNlcmllcy5hbmltYXRpb247XG4gICAgICAgICAgICB0aGlzLmRvTGluZWFyQW5pbWF0aW9uKHNlcmllcywgb3B0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RhY2tpbmdBcmVhU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIFN0YWNraW5nQXJlYVNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnU3RhY2tpbmdBcmVhU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgU3RhY2tpbmdBcmVhU2VyaWVzLnByb3RvdHlwZS5nZXRQcmV2aW91c1NlcmllcyA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXNDb2xsZWN0aW9uID0gc2VyaWVzLmNoYXJ0LnZpc2libGVTZXJpZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBzZXJpZXNDb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLmluZGV4ID09PSBzZXJpZXNDb2xsZWN0aW9uW2ldLmluZGV4ICYmIGkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcmllc0NvbGxlY3Rpb25baSAtIDFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXJpZXNDb2xsZWN0aW9uWzBdO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gU3RhY2tpbmdBcmVhU2VyaWVzO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLlN0YWNraW5nQXJlYVNlcmllcyA9IFN0YWNraW5nQXJlYVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3N0YWNraW5nLWFyZWEtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBjb25zdGFudHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgU2NhdHRlclNlcmllcyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFNjYXR0ZXJTZXJpZXMoKSB7XG4gICAgICAgIH1cbiAgICAgICAgU2NhdHRlclNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcywgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzSW5kZXggPSBzZXJpZXMuaW5kZXg7XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gc2VyaWVzLm1hcmtlcjtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSBzZXJpZXMuYm9yZGVyO1xuICAgICAgICAgICAgdmFyIHNoYXBlID0gbWFya2VyLnNoYXBlO1xuICAgICAgICAgICAgdmFyIHZpc2libGVQb2ludHMgPSBzZXJpZXMucG9pbnRzO1xuICAgICAgICAgICAgdmFyIHBvaW50SW5kZXg7XG4gICAgICAgICAgICB2YXIgc3ltYm9sSWQ7XG4gICAgICAgICAgICB2YXIgc2hhcGVPcHRpb247XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICB2YXIgZ2V0Q29vcmRpbmF0ZSA9IHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyBoZWxwZXJfMS5UcmFuc2Zvcm1Ub1Zpc2libGUgOiBoZWxwZXJfMS5nZXRQb2ludDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlzaWJsZVBvaW50c18xID0gdmlzaWJsZVBvaW50czsgX2kgPCB2aXNpYmxlUG9pbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gdmlzaWJsZVBvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2UodmlzaWJsZVBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgdmlzaWJsZVBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucy5wdXNoKGdldENvb3JkaW5hdGUocG9pbnQueFZhbHVlLCBwb2ludC55VmFsdWUsIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKSk7XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbElkID0gc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzSW5kZXggKyAnX1BvaW50XycgKyBwb2ludC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS5wb2ludFJlbmRlciwgc2VyaWVzOiBzZXJpZXMsIHBvaW50OiBwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHNlcmllcy5zZXRQb2ludENvbG9yKHBvaW50LCBzZXJpZXMuaW50ZXJpb3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBzZXJpZXMuc2V0Qm9yZGVyQ29sb3IocG9pbnQsIHsgd2lkdGg6IHNlcmllcy5ib3JkZXIud2lkdGgsIGNvbG9yOiBzZXJpZXMuYm9yZGVyLmNvbG9yIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBtYXJrZXIuaGVpZ2h0LCB3aWR0aDogbWFya2VyLndpZHRoXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnBvaW50UmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC5jb2xvciA9IGFyZ3NEYXRhLmZpbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFwZU9wdGlvbiA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHN5bWJvbElkLCBhcmdzRGF0YS5maWxsLCBhcmdzRGF0YS5ib3JkZXIud2lkdGgsIGFyZ3NEYXRhLmJvcmRlci5jb2xvciwgc2VyaWVzLm9wYWNpdHksIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzLnNlcmllc0VsZW1lbnQuYXBwZW5kQ2hpbGQoaGVscGVyXzEuZHJhd1N5bWJvbChwb2ludC5zeW1ib2xMb2NhdGlvbnNbMF0sIHNoYXBlLCBuZXcgaGVscGVyXzEuU2l6ZShhcmdzRGF0YS53aWR0aCwgYXJnc0RhdGEuaGVpZ2h0KSwgbWFya2VyLmltYWdlVXJsLCBzaGFwZU9wdGlvbiwgcG9pbnQueC50b1N0cmluZygpICsgJzonICsgcG9pbnQueVZhbHVlLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMucHVzaChuZXcgaGVscGVyXzEuUmVjdChwb2ludC5zeW1ib2xMb2NhdGlvbnNbMF0ueCAtIG1hcmtlci53aWR0aCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkgLSBtYXJrZXIuaGVpZ2h0LCAyICogbWFya2VyLndpZHRoLCAyICogbWFya2VyLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTY2F0dGVyU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHNlcmllcy5hbmltYXRpb24uZHVyYXRpb247XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSBzZXJpZXMuYW5pbWF0aW9uLmRlbGF5O1xuICAgICAgICAgICAgdmFyIHJlY3RFbGVtZW50cyA9IHNlcmllcy5zZXJpZXNFbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAxO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghcG9pbnQuc3ltYm9sTG9jYXRpb25zLmxlbmd0aCB8fCAhcmVjdEVsZW1lbnRzW2NvdW50XSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaGVscGVyXzEubWFya2VyQW5pbWF0ZShyZWN0RWxlbWVudHNbY291bnRdLCBkZWxheSwgZHVyYXRpb24sIHNlcmllcywgcG9pbnQuaW5kZXgsIHBvaW50LnN5bWJvbExvY2F0aW9uc1swXSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNjYXR0ZXJTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NjYXR0ZXJTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBTY2F0dGVyU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTY2F0dGVyU2VyaWVzO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5TY2F0dGVyU2VyaWVzID0gU2NhdHRlclNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3NjYXR0ZXItc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2NvbHVtbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGNvbHVtbl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFJhbmdlQ29sdW1uU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFJhbmdlQ29sdW1uU2VyaWVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSYW5nZUNvbHVtblNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBSYW5nZUNvbHVtblNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgICAgICB2YXIgc2lkZUJ5U2lkZUluZm8gPSB0aGlzLmdldFNpZGVCeVNpZGVJbmZvKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VyaWVzLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VQb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICByYW5nZVBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHJhbmdlUG9pbnQucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZVBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1tyYW5nZVBvaW50LmluZGV4IC0gMV0sIHJhbmdlUG9pbnQsIHNlcmllcy5wb2ludHNbcmFuZ2VQb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShyYW5nZVBvaW50LnhWYWx1ZSArIHNpZGVCeVNpZGVJbmZvLnN0YXJ0LCByYW5nZVBvaW50LmhpZ2gsIHJhbmdlUG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uZW5kLCByYW5nZVBvaW50Lmxvdywgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB0aGlzLnRyaWdnZXJFdmVudChzZXJpZXMsIHJhbmdlUG9pbnQsIHNlcmllcy5pbnRlcmlvciwgeyB3aWR0aDogc2VyaWVzLmJvcmRlci53aWR0aCwgY29sb3I6IHNlcmllcy5ib3JkZXIuY29sb3IgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bWJvbExvY2F0aW9uKHJhbmdlUG9pbnQsIHJlY3QsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdSZWN0YW5nbGUoc2VyaWVzLCByYW5nZVBvaW50LCByZWN0LCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJhbmdlQ29sdW1uU2VyaWVzLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdSYW5nZUNvbHVtblNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIFJhbmdlQ29sdW1uU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBSYW5nZUNvbHVtblNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmFuZ2VDb2x1bW5TZXJpZXM7XG4gICAgfShjb2x1bW5fYmFzZV8xLkNvbHVtbkJhc2UpKTtcbiAgICBleHBvcnRzLlJhbmdlQ29sdW1uU2VyaWVzID0gUmFuZ2VDb2x1bW5TZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9yYW5nZS1jb2x1bW4tc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2NvbHVtbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGNvbHVtbl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFdhdGVyZmFsbFNlcmllcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhXYXRlcmZhbGxTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFdhdGVyZmFsbFNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBXYXRlcmZhbGxTZXJpZXMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciByZWN0O1xuICAgICAgICAgICAgdmFyIHNpZGVCeVNpZGVJbmZvID0gdGhpcy5nZXRTaWRlQnlTaWRlSW5mbyhzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9IE1hdGgubWF4KHNlcmllcy55QXhpcy52aXNpYmxlUmFuZ2UubWluLCAwKTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBwcmV2RW5kVmFsdWUgPSAwO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRFbmRWYWx1ZSA9IDA7XG4gICAgICAgICAgICB2YXIgb3JpZ2luVmFsdWU7XG4gICAgICAgICAgICB2YXIgcHJldlJlZ2lvbiA9IG51bGw7XG4gICAgICAgICAgICB2YXIgeTtcbiAgICAgICAgICAgIHZhciBpc0ludmVyc2VkID0gc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXM7XG4gICAgICAgICAgICB2YXIgaW50ZXJtZWRpYXRlT3JpZ2luID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1N1bSA9IHRoaXMuaXNJbnRlcm1lZGlhdGVTdW0oc2VyaWVzLCBwb2ludC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3RhbFN1bSA9IHRoaXMuaXNTdW1JbmRleChzZXJpZXMsIHBvaW50LmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEVuZFZhbHVlICs9IGlzU3VtIHx8IHRvdGFsU3VtID09PSB0cnVlID8gMCA6IHBvaW50LnlWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luVmFsdWUgPSAoaXNTdW0gPT09IHRydWUgPyBpbnRlcm1lZGlhdGVPcmlnaW4gOiAoKHByZXZFbmRWYWx1ZSAhPT0gbnVsbCAmJiAhdG90YWxTdW0pID8gcHJldkVuZFZhbHVlIDogb3JpZ2luKSk7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5zdGFydCwgY3VycmVudEVuZFZhbHVlLCBwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5lbmQsIG9yaWdpblZhbHVlLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YSA9IHRoaXMudHJpZ2dlclBvaW50UmVuZGVyRXZlbnQoc2VyaWVzLCBwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N1bSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJtZWRpYXRlT3JpZ2luID0gY3VycmVudEVuZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByZXZFbmRWYWx1ZSA9IGN1cnJlbnRFbmRWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzRGF0YS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3ltYm9sTG9jYXRpb24ocG9pbnQsIHJlY3QsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdSZWN0YW5nbGUoc2VyaWVzLCBwb2ludCwgcmVjdCwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UmVnaW9uID0gcG9pbnQucmVnaW9uc1swXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZSZWdpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2TGVmdCA9IGlzSW52ZXJzZWQgPyBwcmV2UmVnaW9uLnggOiBwcmV2UmVnaW9uLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudExlZnQgPSBpc0ludmVyc2VkID8gY3VycmVudFJlZ2lvbi54IDogY3VycmVudFJlZ2lvbi55O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZCb3R0b20gPSBpc0ludmVyc2VkID8gcHJldlJlZ2lvbi54ICsgcHJldlJlZ2lvbi53aWR0aCA6IHByZXZSZWdpb24ueSArIHByZXZSZWdpb24uaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRCb3R0b20gPSBpc0ludmVyc2VkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVnaW9uLnggKyBjdXJyZW50UmVnaW9uLndpZHRoIDogY3VycmVudFJlZ2lvbi55ICsgY3VycmVudFJlZ2lvbi5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yb3VuZChwcmV2TGVmdCkgPT09IE1hdGgucm91bmQoY3VycmVudExlZnQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yb3VuZChwcmV2Qm90dG9tKSA9PT0gTWF0aC5yb3VuZChjdXJyZW50TGVmdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gaXNJbnZlcnNlZCA/IGN1cnJlbnRSZWdpb24ueCA6IGN1cnJlbnRSZWdpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBjdXJyZW50Qm90dG9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW52ZXJzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCdNJyArICcgJyArIHkgKyAnICcgKyAocHJldlJlZ2lvbi55ICsgcHJldlJlZ2lvbi5oZWlnaHQpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgeSArICcgJyArIGN1cnJlbnRSZWdpb24ueSArICcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KCdNJyArICcgJyArIHByZXZSZWdpb24ueCArICcgJyArIHkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAoY3VycmVudFJlZ2lvbi54ICsgY3VycmVudFJlZ2lvbi53aWR0aCkgKyAnICcgKyB5ICsgJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcmV2UmVnaW9uID0gcG9pbnQucmVnaW9uc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHNlcmllcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfQ29ubmVjdG9yXycsICdub25lJywgc2VyaWVzLmNvbm5lY3Rvci53aWR0aCwgc2VyaWVzLmNvbm5lY3Rvci5jb2xvciwgc2VyaWVzLm9wYWNpdHksIHNlcmllcy5jb25uZWN0b3IuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZXJpZXMuY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LmFuaW1hdGVTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBXYXRlcmZhbGxTZXJpZXMucHJvdG90eXBlLmlzSW50ZXJtZWRpYXRlU3VtID0gZnVuY3Rpb24gKHNlcmllcywgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuaW50ZXJtZWRpYXRlU3VtSW5kZXhlcyAhPT0gdW5kZWZpbmVkICYmIHNlcmllcy5pbnRlcm1lZGlhdGVTdW1JbmRleGVzLmluZGV4T2YoaW5kZXgpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBXYXRlcmZhbGxTZXJpZXMucHJvdG90eXBlLmlzU3VtSW5kZXggPSBmdW5jdGlvbiAoc2VyaWVzLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKHNlcmllcy5zdW1JbmRleGVzICE9PSB1bmRlZmluZWQgJiYgc2VyaWVzLnN1bUluZGV4ZXMuaW5kZXhPZihpbmRleCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFdhdGVyZmFsbFNlcmllcy5wcm90b3R5cGUudHJpZ2dlclBvaW50UmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yO1xuICAgICAgICAgICAgdmFyIGlzU3VtID0gdGhpcy5pc0ludGVybWVkaWF0ZVN1bShzZXJpZXMsIHBvaW50LmluZGV4KTtcbiAgICAgICAgICAgIHZhciB0b3RhbFN1bSA9IHRoaXMuaXNTdW1JbmRleChzZXJpZXMsIHBvaW50LmluZGV4KTtcbiAgICAgICAgICAgIGlmIChpc1N1bSB8fCB0b3RhbFN1bSkge1xuICAgICAgICAgICAgICAgIGNvbG9yID0gc2VyaWVzLnN1bW1hcnlGaWxsQ29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwb2ludC55IDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbG9yID0gc2VyaWVzLm5lZ2F0aXZlRmlsbENvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sb3IgPSBzZXJpZXMuaW50ZXJpb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoc2VyaWVzLCBwb2ludCwgY29sb3IsIHsgY29sb3I6IHNlcmllcy5ib3JkZXIuY29sb3IsIHdpZHRoOiBzZXJpZXMuYm9yZGVyLndpZHRoIH0pO1xuICAgICAgICB9O1xuICAgICAgICBXYXRlcmZhbGxTZXJpZXMucHJvdG90eXBlLnByb2Nlc3NXYXRlcmZhbGxEYXRhID0gZnVuY3Rpb24gKGpzb24sIHNlcmllcykge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSBqc29uO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IGpzb24ubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIGludGVybWVkaWF0ZVN1bSA9IHNlcmllcy5pbnRlcm1lZGlhdGVTdW1JbmRleGVzO1xuICAgICAgICAgICAgdmFyIHN1bUluZGV4ID0gc2VyaWVzLnN1bUluZGV4ZXM7XG4gICAgICAgICAgICBpZiAoaW50ZXJtZWRpYXRlU3VtICE9PSB1bmRlZmluZWQgJiYgaW50ZXJtZWRpYXRlU3VtLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGVybWVkaWF0ZVN1bS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBpbnRlcm1lZGlhdGVTdW1baV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGhlbHBlcl8xLnN1YkFycmF5U3VtKGRhdGEsIC0xLCBpbnRlcm1lZGlhdGVTdW1baV0sIG51bGwsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGhlbHBlcl8xLnN1YkFycmF5U3VtKGRhdGEsIGludGVybWVkaWF0ZVN1bVtpIC0gMV0sIGludGVybWVkaWF0ZVN1bVtpXSwgbnVsbCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtqXVtzZXJpZXMueU5hbWVdID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3VtSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzdW1JbmRleC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzdW1JbmRleC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBzdW1JbmRleFtrXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcm1lZGlhdGVTdW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGhlbHBlcl8xLnN1YkFycmF5U3VtKGRhdGEsIC0xLCBzdW1JbmRleFtrXSwgc3VtSW5kZXgsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGhlbHBlcl8xLnN1YkFycmF5U3VtKGRhdGEsIC0xLCBzdW1JbmRleFtrXSwgbnVsbCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtqXVtzZXJpZXMueU5hbWVdID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgV2F0ZXJmYWxsU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBXYXRlcmZhbGxTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1dhdGVyZmFsbFNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIFdhdGVyZmFsbFNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gV2F0ZXJmYWxsU2VyaWVzO1xuICAgIH0oY29sdW1uX2Jhc2VfMS5Db2x1bW5CYXNlKSk7XG4gICAgZXhwb3J0cy5XYXRlcmZhbGxTZXJpZXMgPSBXYXRlcmZhbGxTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy93YXRlcmZhbGwtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2NvbHVtbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGNvbHVtbl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhpbG9TZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGlsb1NlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGlsb1NlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIaWxvU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgcmVnaW9uO1xuICAgICAgICAgICAgdmFyIHNpZGVCeVNpZGVJbmZvID0gdGhpcy5nZXRTaWRlQnlTaWRlSW5mbyhzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIGFyZ3NEYXRhO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMS53aXRoSW5SYW5nZShzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4IC0gMV0sIHBvaW50LCBzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4ICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uID0gdGhpcy5nZXRSZWN0YW5nbGUocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8ubWVkaWFuLCBwb2ludC5oaWdoLCBwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4sIHBvaW50Lmxvdywgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB0aGlzLnRyaWdnZXJQb2ludFJlbmRlckV2ZW50KHNlcmllcywgcG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbi53aWR0aCA9IGFyZ3NEYXRhLmJvcmRlci53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb24ueCA9IHJlZ2lvbi54IC0gKHJlZ2lvbi53aWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uLmhlaWdodCA9IGFyZ3NEYXRhLmJvcmRlci53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb24ueSA9IHJlZ2lvbi55IC0gKHJlZ2lvbi5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhLmJvcmRlci53aWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bWJvbExvY2F0aW9uKHBvaW50LCByZWdpb24sIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdSZWN0YW5nbGUoc2VyaWVzLCBwb2ludCwgcmVnaW9uLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhpbG9TZXJpZXMucHJvdG90eXBlLnRyaWdnZXJQb2ludFJlbmRlckV2ZW50ID0gZnVuY3Rpb24gKHNlcmllcywgcG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBib3JkZXIgPSB7IGNvbG9yOiBzZXJpZXMuZmlsbCwgd2lkdGg6IE1hdGgubWF4KHNlcmllcy5ib3JkZXIud2lkdGgsIDIpIH07XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS50cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLCBzZXJpZXMsIHBvaW50LCBzZXJpZXMuaW50ZXJpb3IsIGJvcmRlcik7XG4gICAgICAgIH07XG4gICAgICAgIEhpbG9TZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0hpbG9TZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBIaWxvU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBIaWxvU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIaWxvU2VyaWVzO1xuICAgIH0oY29sdW1uX2Jhc2VfMS5Db2x1bW5CYXNlKSk7XG4gICAgZXhwb3J0cy5IaWxvU2VyaWVzID0gSGlsb1Nlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2hpbG8tc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2NvbHVtbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGNvbHVtbl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEhpbG9PcGVuQ2xvc2VTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoSGlsb09wZW5DbG9zZVNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gSGlsb09wZW5DbG9zZVNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBIaWxvT3BlbkNsb3NlU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgaGlnaExvd1JlY3Q7XG4gICAgICAgICAgICB2YXIgb3BlbjtcbiAgICAgICAgICAgIHZhciBjbG9zZTtcbiAgICAgICAgICAgIHZhciBzaWRlQnlTaWRlSW5mbyA9IHRoaXMuZ2V0U2lkZUJ5U2lkZUluZm8oc2VyaWVzKTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IE1hdGgubWF4KHNlcmllcy5ib3JkZXIud2lkdGgsIDIpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSAmJlxuICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMS53aXRoSW5SYW5nZShzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4IC0gMV0sIHBvaW50LCBzZXJpZXMucG9pbnRzW3BvaW50LmluZGV4ICsgMV0sIHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlnaExvd1JlY3QgPSB0aGlzLmdldFJlY3RhbmdsZShwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5zdGFydCwgTWF0aC5tYXgocG9pbnQuaGlnaCwgcG9pbnQubG93KSwgcG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uZW5kLCBNYXRoLm1pbihwb2ludC5oaWdoLCBwb2ludC5sb3cpLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zLnB1c2godGhpcy5nZXRSZWN0YW5nbGUocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8ubWVkaWFuLCBNYXRoLm1heChwb2ludC5oaWdoLCBwb2ludC5sb3cpLCBwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4sIE1hdGgubWluKHBvaW50LmhpZ2gsIHBvaW50LmxvdyksIHNlcmllcykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpY2tSZWdpb24oIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzLCBwb2ludC5yZWdpb25zWzBdLCBib3JkZXJXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMucHVzaCh0aGlzLmdldFJlY3RhbmdsZShwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5zdGFydCwgTWF0aC5tYXgocG9pbnQub3BlbiwgcG9pbnQuY2xvc2UpLCBwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4sIE1hdGgubWF4KHBvaW50Lm9wZW4sIHBvaW50LmNsb3NlKSwgc2VyaWVzKSk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMucHVzaCh0aGlzLmdldFJlY3RhbmdsZShwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4sIE1hdGgubWluKHBvaW50Lm9wZW4sIHBvaW50LmNsb3NlKSwgcG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uZW5kLCBNYXRoLm1pbihwb2ludC5vcGVuLCBwb2ludC5jbG9zZSksIHNlcmllcykpO1xuICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YSA9IHRoaXMudHJpZ2dlclBvaW50UmVuZGVyRXZlbnQoc2VyaWVzLCBwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN5bWJvbExvY2F0aW9uKHBvaW50LCBwb2ludC5yZWdpb25zWzBdLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5fMSA9IHsgeDogcG9pbnQucmVnaW9uc1sxXS54LCB5OiBwb2ludC5yZWdpb25zWzFdLnkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZV8xID0geyB4OiBwb2ludC5yZWdpb25zWzJdLngsIHk6IHBvaW50LnJlZ2lvbnNbMl0ueSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3SGlsb09wZW5DbG9zZVBhdGgoc2VyaWVzLCBwb2ludCwgb3Blbl8xLCBjbG9zZV8xLCBoaWdoTG93UmVjdCwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGlja1JlZ2lvbihzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcywgcG9pbnQucmVnaW9uc1sxXSwgYm9yZGVyV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpY2tSZWdpb24oc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMsIHBvaW50LnJlZ2lvbnNbMl0sIGJvcmRlcldpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEhpbG9PcGVuQ2xvc2VTZXJpZXMucHJvdG90eXBlLnVwZGF0ZVRpY2tSZWdpb24gPSBmdW5jdGlvbiAoaG9yaXpvbnRhbCwgcmVnaW9uLCBib3JkZXJXaWR0aCkge1xuICAgICAgICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgICAgICAgICByZWdpb24ueCAtPSBib3JkZXJXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgcmVnaW9uLndpZHRoID0gYm9yZGVyV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWdpb24ueSAtPSBib3JkZXJXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgcmVnaW9uLmhlaWdodCA9IGJvcmRlcldpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBIaWxvT3BlbkNsb3NlU2VyaWVzLnByb3RvdHlwZS50cmlnZ2VyUG9pbnRSZW5kZXJFdmVudCA9IGZ1bmN0aW9uIChzZXJpZXMsIHBvaW50KSB7XG4gICAgICAgICAgICB2YXIgZmlsbCA9IChwb2ludC5vcGVuIDw9IHBvaW50LmNsb3NlKSA/IHNlcmllcy5iZWFyRmlsbENvbG9yIDogc2VyaWVzLmJ1bGxGaWxsQ29sb3I7XG4gICAgICAgICAgICB2YXIgYm9yZGVyID0geyBjb2xvcjogc2VyaWVzLmJvcmRlci5jb2xvciwgd2lkdGg6IE1hdGgubWF4KHNlcmllcy5ib3JkZXIud2lkdGgsIDEpIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoc2VyaWVzLCBwb2ludCwgZmlsbCwgYm9yZGVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgSGlsb09wZW5DbG9zZVNlcmllcy5wcm90b3R5cGUuZHJhd0hpbG9PcGVuQ2xvc2VQYXRoID0gZnVuY3Rpb24gKHNlcmllcywgcG9pbnQsIG9wZW4sIGNsb3NlLCByZWN0LCBhcmdzRGF0YSkge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgaWYgKHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKCdNJyArICcgJyArIChyZWN0LngpICsgJyAnICsgKHJlY3QueSArIHJlY3QuaGVpZ2h0IC8gMikgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAocmVjdC54ICsgcmVjdC53aWR0aCkgKyAnICcgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyKSArICcgJyk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICgnTScgKyAnICcgKyAob3Blbi54KSArICcgJyArIChyZWN0LnkgKyByZWN0LmhlaWdodCAvIDIpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKG9wZW4ueCkgKyAnICcgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQpICsgJyAnKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdNJyArICcgJyArIChjbG9zZS54KSArICcgJyArIChyZWN0LnkgKyByZWN0LmhlaWdodCAvIDIpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKGNsb3NlLngpICsgJyAnICsgKHJlY3QueSkgKyAnICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKCdNJyArICcgJyArIChyZWN0LnggKyByZWN0LndpZHRoIC8gMikgKyAnICcgKyAocmVjdC55ICsgcmVjdC5oZWlnaHQpICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0wnICsgJyAnICsgKHJlY3QueCArIHJlY3Qud2lkdGggLyAyKSArICcgJyArIChyZWN0LnkpICsgJyAnKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gKCdNJyArICcgJyArIChyZWN0LngpICsgJyAnICsgKG9wZW4ueSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAnTCcgKyAnICcgKyAocmVjdC54ICsgcmVjdC53aWR0aCAvIDIpICsgJyAnICsgKG9wZW4ueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAoJ00nICsgJyAnICsgKHJlY3QueCArIHJlY3Qud2lkdGggLyAyKSArICcgJyArIChjbG9zZS55KSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICdMJyArICcgJyArIChyZWN0LnggKyByZWN0LndpZHRoKSArICcgJyArIChjbG9zZS55KSArICcgJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24oc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzLmluZGV4ICsgJ19Qb2ludF8nICsgcG9pbnQuaW5kZXgsIGFyZ3NEYXRhLmZpbGwsIGFyZ3NEYXRhLmJvcmRlci53aWR0aCwgYXJnc0RhdGEuZmlsbCwgc2VyaWVzLm9wYWNpdHksIHNlcmllcy5kYXNoQXJyYXksIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNlcmllcy5jaGFydC5yZW5kZXJlci5kcmF3UGF0aChvcHRpb25zKTtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcG9pbnQueC50b1N0cmluZygpICsgJzonICsgcG9pbnQuaGlnaC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgKyAnOicgKyBwb2ludC5sb3cudG9TdHJpbmcoKSArICc6JyArIHBvaW50LmNsb3NlLnRvU3RyaW5nKCkgKyAnOicgKyBwb2ludC5vcGVuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgc2VyaWVzLnNlcmllc0VsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEhpbG9PcGVuQ2xvc2VTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0hpbG9PcGVuQ2xvc2VTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBIaWxvT3BlbkNsb3NlU2VyaWVzLnByb3RvdHlwZS5kb0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZShzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBIaWxvT3BlbkNsb3NlU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBIaWxvT3BlbkNsb3NlU2VyaWVzO1xuICAgIH0oY29sdW1uX2Jhc2VfMS5Db2x1bW5CYXNlKSk7XG4gICAgZXhwb3J0cy5IaWxvT3BlbkNsb3NlU2VyaWVzID0gSGlsb09wZW5DbG9zZVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2hpbG8tb3Blbi1jbG9zZS1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vbGluZS1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGxpbmVfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSYW5nZUFyZWFTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUmFuZ2VBcmVhU2VyaWVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSYW5nZUFyZWFTZXJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUmFuZ2VBcmVhU2VyaWVzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQ7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB2YXIgY29tbWFuZCA9ICdNJztcbiAgICAgICAgICAgIHZhciBjbG9zZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgdmlzaWJsZVBvaW50cyA9IHRoaXMuaW1wcm92ZUNoYXJ0UGVyZm9ybWFuY2Uoc2VyaWVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IHZpc2libGVQb2ludHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvaW50ID0gdmlzaWJsZVBvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGxvdyA9IE1hdGgubWluKHBvaW50LmxvdywgcG9pbnQuaGlnaCk7XG4gICAgICAgICAgICAgICAgdmFyIGhpZ2ggPSBNYXRoLm1heChwb2ludC5sb3csIHBvaW50LmhpZ2gpO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMueUF4aXMuaXNJbnZlcnNlZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGxvdztcbiAgICAgICAgICAgICAgICAgICAgbG93ID0gaGlnaDtcbiAgICAgICAgICAgICAgICAgICAgaGlnaCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsb3dQb2ludCA9IGhlbHBlcl8xLmdldFBvaW50KHBvaW50LnhWYWx1ZSwgbG93LCBzZXJpZXMueEF4aXMsIHNlcmllcy55QXhpcywgc2VyaWVzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMpO1xuICAgICAgICAgICAgICAgIHZhciBoaWdoUG9pbnQgPSBoZWxwZXJfMS5nZXRQb2ludChwb2ludC54VmFsdWUsIGhpZ2gsIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyk7XG4gICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zLnB1c2goaGlnaFBvaW50KTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMucHVzaChsb3dQb2ludCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBuZXcgaGVscGVyXzEuUmVjdChNYXRoLm1pbihsb3dQb2ludC54LCBoaWdoUG9pbnQueCksIE1hdGgubWluKGxvd1BvaW50LnksIGhpZ2hQb2ludC55KSwgTWF0aC5tYXgoTWF0aC5hYnMoaGlnaFBvaW50LnggLSBsb3dQb2ludC54KSwgc2VyaWVzLm1hcmtlci53aWR0aCksIE1hdGgubWF4KE1hdGguYWJzKGhpZ2hQb2ludC55IC0gbG93UG9pbnQueSksIHNlcmllcy5tYXJrZXIud2lkdGgpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueCAtPSBzZXJpZXMubWFya2VyLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QueSAtPSBzZXJpZXMubWFya2VyLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKHJlY3QpO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC52aXNpYmxlICYmIGhlbHBlcl8xLndpdGhJblJhbmdlKHZpc2libGVQb2ludHNbcG9pbnQuaW5kZXggLSAxXSwgcG9pbnQsIHZpc2libGVQb2ludHNbcG9pbnQuaW5kZXggKyAxXSwgc2VyaWVzKSkge1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KGNvbW1hbmQgKyAnICcgKyAobG93UG9pbnQueCkgKyAnICcgKyAobG93UG9pbnQueSkgKyAnICcpO1xuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpICsgMSA8IHZpc2libGVQb2ludHMubGVuZ3RoICYmICF2aXNpYmxlUG9pbnRzW2kgKyAxXS52aXNpYmxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgaSA9PT0gdmlzaWJsZVBvaW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmNsb3NlUmFuZ2VBcmVhUGF0aCh2aXNpYmxlUG9pbnRzLCBwb2ludCwgc2VyaWVzLCBkaXJlY3Rpb24sIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9ICdNJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5jb25jYXQoJyAnICsgJ1onKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZCA9ICdMJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWQgPT09IGZhbHNlICYmIGkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuY2xvc2VSYW5nZUFyZWFQYXRoKHZpc2libGVQb2ludHMsIHBvaW50LCBzZXJpZXMsIGRpcmVjdGlvbiwgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgPSAnTSc7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuYW1lID0gc2VyaWVzLmNhdGVnb3J5ID09PSAnSW5kaWNhdG9yJyA/IHNlcmllcy5jaGFydC5lbGVtZW50LmlkICsgJ19JbmRpY2F0b3JfJyArIHNlcmllcy5pbmRleCArICdfJyArIHNlcmllcy5uYW1lIDpcbiAgICAgICAgICAgICAgICBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXg7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKG5hbWUsIHNlcmllcy5pbnRlcmlvciwgc2VyaWVzLmJvcmRlci53aWR0aCwgc2VyaWVzLmJvcmRlci5jb2xvciwgc2VyaWVzLm9wYWNpdHksIHNlcmllcy5kYXNoQXJyYXksIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZExpbmVQYXRoKG9wdGlvbnMsIHNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1hcmtlcihzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBSYW5nZUFyZWFTZXJpZXMucHJvdG90eXBlLmNsb3NlUmFuZ2VBcmVhUGF0aCA9IGZ1bmN0aW9uICh2aXNpYmxlUG9pbnRzLCBwb2ludCwgc2VyaWVzLCBkaXJlY3Rpb24sIGkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlUG9pbnRzW2pdLnZpc2libGUgJiYgdmlzaWJsZVBvaW50c1tqXS5zeW1ib2xMb2NhdGlvbnNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSB2aXNpYmxlUG9pbnRzW2pdO1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gJ0wnICsgJyAnICsgKHBvaW50LnN5bWJvbExvY2F0aW9uc1swXS54KSArICcgJyArICgocG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkpKSArICcgJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaXJlY3Rpb247XG4gICAgICAgIH07XG4gICAgICAgIFJhbmdlQXJlYVNlcmllcy5wcm90b3R5cGUuZG9BbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gc2VyaWVzLmFuaW1hdGlvbjtcbiAgICAgICAgICAgIHRoaXMuZG9MaW5lYXJBbmltYXRpb24oc2VyaWVzLCBvcHRpb24pO1xuICAgICAgICB9O1xuICAgICAgICBSYW5nZUFyZWFTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1JhbmdlQXJlYVNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIFJhbmdlQXJlYVNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUmFuZ2VBcmVhU2VyaWVzO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLlJhbmdlQXJlYVNlcmllcyA9IFJhbmdlQXJlYVNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL3JhbmdlLWFyZWEtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vbGluZS1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaGVscGVyXzEsIGxpbmVfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBTcGxpbmVTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3BsaW5lU2VyaWVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBTcGxpbmVTZXJpZXMoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLnNwbGluZVBvaW50cyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFNwbGluZVNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcywgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSBzZXJpZXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gc2VyaWVzLm1hcmtlcjtcbiAgICAgICAgICAgIHZhciB5U3BsaW5lO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgZmlyc3RQb2ludCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgc2Vjb25kUG9pbnQgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICcnO1xuICAgICAgICAgICAgdmFyIHB0MTtcbiAgICAgICAgICAgIHZhciBwdDI7XG4gICAgICAgICAgICB2YXIgYnB0MTtcbiAgICAgICAgICAgIHZhciBicHQyO1xuICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICB2YXIgY29udHJvbFBvaW50Q291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2xQb2ludDE7XG4gICAgICAgICAgICB2YXIgY29udHJvbFBvaW50MjtcbiAgICAgICAgICAgIHZhciBzdGFydFBvaW50ID0gJ00nO1xuICAgICAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMuZmlsdGVyRW1wdHlQb2ludHMoc2VyaWVzKTtcbiAgICAgICAgICAgIHZhciBwcmV2aW91cztcbiAgICAgICAgICAgIHZhciBnZXRDb29yZGluYXRlID0gc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyA/IGhlbHBlcl8xLlRyYW5zZm9ybVRvVmlzaWJsZSA6IGhlbHBlcl8xLmdldFBvaW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwb2ludHNfMSA9IHBvaW50czsgX2kgPCBwb2ludHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNfMVtfaV07XG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSB0aGlzLmdldFByZXZpb3VzSW5kZXgocG9pbnRzLCBwb2ludC5pbmRleCAtIDEsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb25zID0gW107XG4gICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC52aXNpYmxlICYmIGhlbHBlcl8xLndpdGhJblJhbmdlKHBvaW50c1twcmV2aW91c10sIHBvaW50LCBwb2ludHNbdGhpcy5nZXROZXh0SW5kZXgocG9pbnRzLCBwb2ludC5pbmRleCAtIDEsIHNlcmllcyldLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFBvaW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWVzLmRyYXdQb2ludHNbcHJldmlvdXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50MSA9IGRhdGEuY29udHJvbFBvaW50MTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludDIgPSBkYXRhLmNvbnRyb2xQb2ludDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwdDEgPSBnZXRDb29yZGluYXRlKGZpcnN0UG9pbnQueFZhbHVlLCBmaXJzdFBvaW50LnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHQyID0gZ2V0Q29vcmRpbmF0ZShwb2ludC54VmFsdWUsIHBvaW50LnlWYWx1ZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnB0MSA9IGdldENvb3JkaW5hdGUoY29udHJvbFBvaW50MS54LCBjb250cm9sUG9pbnQxLnksIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJwdDIgPSBnZXRDb29yZGluYXRlKGNvbnRyb2xQb2ludDIueCwgY29udHJvbFBvaW50Mi55LCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uY29uY2F0KChzdGFydFBvaW50ICsgJyAnICsgKHB0MS54KSArICcgJyArIChwdDEueSkgKyAnICcgKyAnQycgKyAnICcgKyAoYnB0MS54KSArICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGJwdDEueSkgKyAnICcgKyAoYnB0Mi54KSArICcgJyArIChicHQyLnkpICsgJyAnICsgKHB0Mi54KSArICcgJyArIChwdDIueSkgKyAnICcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQgPSAnTCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmlyc3RQb2ludCA9IHBvaW50O1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMucHVzaChnZXRDb29yZGluYXRlKHBvaW50LnhWYWx1ZSwgcG9pbnQueVZhbHVlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQsIHNlcmllcykpO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5yZWdpb25zLnB1c2gobmV3IGhlbHBlcl8xLlJlY3QocG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnggLSBtYXJrZXIud2lkdGgsIHBvaW50LnN5bWJvbExvY2F0aW9uc1swXS55IC0gbWFya2VyLmhlaWdodCwgMiAqIG1hcmtlci53aWR0aCwgMiAqIG1hcmtlci5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQgPSAnTSc7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0UG9pbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmFtZSA9IHNlcmllcy5jYXRlZ29yeSA9PT0gJ1RyZW5kTGluZScgPyBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuc291cmNlSW5kZXggKyAnX1RyZW5kTGluZV8nICsgc2VyaWVzLmluZGV4IDpcbiAgICAgICAgICAgICAgICBzZXJpZXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXg7XG4gICAgICAgICAgICBvcHRpb25zID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24obmFtZSwgJ3RyYW5zcGFyZW50Jywgc2VyaWVzLndpZHRoLCBzZXJpZXMuaW50ZXJpb3IsIHNlcmllcy5vcGFjaXR5LCBzZXJpZXMuZGFzaEFycmF5LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRMaW5lUGF0aChvcHRpb25zLCBzZXJpZXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNYXJrZXIoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU3BsaW5lU2VyaWVzLnByb3RvdHlwZS5maW5kU3BsaW5lUG9pbnQgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgc3BsaW5lID0gc2VyaWVzLmNoYXJ0LnNwbGluZVNlcmllc01vZHVsZTtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSB0aGlzLmZpbHRlckVtcHR5UG9pbnRzKHNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLnNwbGluZVBvaW50cyA9IHRoaXMuZmluZFNwbGluZUNvZWZmaWNpZW50cyhwb2ludHMsIHNlcmllcyk7XG4gICAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBzZXJpZXMuZHJhd1BvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcG9pbnRzXzIgPSBwb2ludHM7IF9pIDwgcG9pbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c18yW19pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50LmluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLmdldFByZXZpb3VzSW5kZXgocG9pbnRzLCBwb2ludC5pbmRleCAtIDEsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0Q29udHJvbFBvaW50cyhwb2ludHNbcHJldmlvdXNdLCBwb2ludCwgdGhpcy5zcGxpbmVQb2ludHNbcHJldmlvdXNdLCB0aGlzLnNwbGluZVBvaW50c1twb2ludC5pbmRleF0sIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMuZHJhd1BvaW50cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb2ludC55VmFsdWUgJiYgdmFsdWUuY29udHJvbFBvaW50MS55ICYmIHZhbHVlLmNvbnRyb2xQb2ludDIueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy55TWluID0gTWF0aC5mbG9vcihNYXRoLm1pbihzZXJpZXMueU1pbiwgcG9pbnQueVZhbHVlLCB2YWx1ZS5jb250cm9sUG9pbnQxLnksIHZhbHVlLmNvbnRyb2xQb2ludDIueSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy55TWF4ID0gTWF0aC5jZWlsKE1hdGgubWF4KHNlcmllcy55TWF4LCBwb2ludC55VmFsdWUsIHZhbHVlLmNvbnRyb2xQb2ludDEueSwgdmFsdWUuY29udHJvbFBvaW50Mi55KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNwbGluZVNlcmllcy5wcm90b3R5cGUuZ2V0UHJldmlvdXNJbmRleCA9IGZ1bmN0aW9uIChwb2ludHMsIGksIHNlcmllcykge1xuICAgICAgICAgICAgaWYgKHNlcmllcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSAhPT0gJ0Ryb3AnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwb2ludHNbaV0pICYmIGkgPiAtMSkge1xuICAgICAgICAgICAgICAgIGkgPSBpIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9O1xuICAgICAgICBTcGxpbmVTZXJpZXMucHJvdG90eXBlLmdldE5leHRJbmRleCA9IGZ1bmN0aW9uIChwb2ludHMsIGksIHNlcmllcykge1xuICAgICAgICAgICAgaWYgKHNlcmllcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSAhPT0gJ0Ryb3AnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwb2ludHNbaV0pICYmIGkgPCBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaSA9IGkgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH07XG4gICAgICAgIFNwbGluZVNlcmllcy5wcm90b3R5cGUuZmlsdGVyRW1wdHlQb2ludHMgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmVtcHR5UG9pbnRTZXR0aW5ncy5tb2RlICE9PSAnRHJvcCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBlajJfYmFzZV8xLmV4dGVuZChbXSwgc2VyaWVzLnBvaW50cywgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvaW50c1tpXS5pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpXS5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50c1tpXS5zeW1ib2xMb2NhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2ldLnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgICAgIH07XG4gICAgICAgIFNwbGluZVNlcmllcy5wcm90b3R5cGUuZmluZFNwbGluZUNvZWZmaWNpZW50cyA9IGZ1bmN0aW9uIChwb2ludHMsIHNlcmllcykge1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciB5U3BsaW5lID0gW107XG4gICAgICAgICAgICB2YXIgeVNwbGluZUR1cGxpY2F0ZSA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvZWZmaWNpZW50MTtcbiAgICAgICAgICAgIHZhciBjb2VmZmljaWVudDI7XG4gICAgICAgICAgICB2YXIgY29lZmZpY2llbnQzO1xuICAgICAgICAgICAgdmFyIGR5MTtcbiAgICAgICAgICAgIHZhciBkeTI7XG4gICAgICAgICAgICB2YXIgZHggPSBbXTtcbiAgICAgICAgICAgIHZhciBkeSA9IFtdO1xuICAgICAgICAgICAgdmFyIHNsb3BlID0gW107XG4gICAgICAgICAgICB2YXIgaW50ZXJQb2ludDtcbiAgICAgICAgICAgIHZhciBzbG9wZUxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjYXJkaW5hbFNwbGluZVRlbnNpb24gPSBzZXJpZXMuY2FyZGluYWxTcGxpbmVUZW5zaW9uID8gc2VyaWVzLmNhcmRpbmFsU3BsaW5lVGVuc2lvbiA6IDAuNTtcbiAgICAgICAgICAgIGNhcmRpbmFsU3BsaW5lVGVuc2lvbiA9IGNhcmRpbmFsU3BsaW5lVGVuc2lvbiA8IDAgPyAwIDogY2FyZGluYWxTcGxpbmVUZW5zaW9uID4gMSA/IDEgOiBjYXJkaW5hbFNwbGluZVRlbnNpb247XG4gICAgICAgICAgICBzd2l0Y2ggKHNlcmllcy5zcGxpbmVUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTW9ub3RvbmljJzpcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHhbaV0gPSBwb2ludHNbaSArIDFdLnhWYWx1ZSAtIHBvaW50c1tpXS54VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeVtpXSA9IHBvaW50c1tpICsgMV0ueVZhbHVlIC0gcG9pbnRzW2ldLnlWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3BlW2ldID0gZHlbaV0gLyBkeFtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzbG9wZUxlbmd0aCA9IHNsb3BlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgeVNwbGluZVswXSA9IHNsb3BlWzBdO1xuICAgICAgICAgICAgICAgICAgICB5U3BsaW5lW2NvdW50IC0gMV0gPSBzbG9wZVtzbG9wZUxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGR4Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xvcGVMZW5ndGggPiBqICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbG9wZVtqXSAqIHNsb3BlW2ogKyAxXSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlTcGxpbmVbaiArIDFdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyUG9pbnQgPSBkeFtqXSArIGR4W2ogKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtqICsgMV0gPSAzICogaW50ZXJQb2ludCAvICgoaW50ZXJQb2ludCArIGR4W2ogKyAxXSkgLyBzbG9wZVtqXSArIChpbnRlclBvaW50ICsgZHhbal0pIC8gc2xvcGVbaiArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQ2FyZGluYWwnOlxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtpXSA9IChjb3VudCA+IDIpID8gKGNhcmRpbmFsU3BsaW5lVGVuc2lvbiAqIChwb2ludHNbaSArIDJdLnhWYWx1ZSAtIHBvaW50c1tpXS54VmFsdWUpKSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpID09PSAoY291bnQgLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlTcGxpbmVbaV0gPSAoY291bnQgPiAyKSA/IChjYXJkaW5hbFNwbGluZVRlbnNpb24gKiAocG9pbnRzW2NvdW50IC0gMV0ueFZhbHVlIC0gcG9pbnRzW2NvdW50IC0gM10ueFZhbHVlKSkgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtpXSA9IChjYXJkaW5hbFNwbGluZVRlbnNpb24gKiAocG9pbnRzW2kgKyAxXS54VmFsdWUgLSBwb2ludHNbaSAtIDFdLnhWYWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuc3BsaW5lVHlwZSA9PT0gJ0NsYW1wZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RJbmRleCA9IChwb2ludHNbMV0ueVZhbHVlIC0gcG9pbnRzWzBdLnlWYWx1ZSkgLyAocG9pbnRzWzFdLnhWYWx1ZSAtIHBvaW50c1swXS54VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IChwb2ludHNbY291bnQgLSAxXS54VmFsdWUgLSBwb2ludHNbY291bnQgLSAyXS54VmFsdWUpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocG9pbnRzW2NvdW50IC0gMV0ueVZhbHVlIC0gcG9pbnRzW2NvdW50IC0gMl0ueVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlTcGxpbmVbMF0gPSAoMyAqIChwb2ludHNbMV0ueVZhbHVlIC0gcG9pbnRzWzBdLnlWYWx1ZSkpIC8gKHBvaW50c1sxXS54VmFsdWUgLSBwb2ludHNbMF0ueFZhbHVlKSAtIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lRHVwbGljYXRlWzBdID0gMC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtwb2ludHMubGVuZ3RoIC0gMV0gPSAoMyAqIChwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdLnlWYWx1ZSAtIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl0ueVZhbHVlKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdLnhWYWx1ZSAtIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMl0ueFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlTcGxpbmVbMF0gPSB5U3BsaW5lRHVwbGljYXRlWzBdID0gTWF0aC5hYnMoeVNwbGluZVswXSkgPT09IEluZmluaXR5ID8gMCA6IHlTcGxpbmVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lW3BvaW50cy5sZW5ndGggLSAxXSA9IHlTcGxpbmVEdXBsaWNhdGVbcG9pbnRzLmxlbmd0aCAtIDFdID0gTWF0aC5hYnMoeVNwbGluZVtwb2ludHMubGVuZ3RoIC0gMV0pID09PSBJbmZpbml0eSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA6IHlTcGxpbmVbcG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVswXSA9IHlTcGxpbmVEdXBsaWNhdGVbMF0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtwb2ludHMubGVuZ3RoIC0gMV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY291bnQgLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZWZmaWNpZW50MSA9IHBvaW50c1tpXS54VmFsdWUgLSBwb2ludHNbaSAtIDFdLnhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZWZmaWNpZW50MiA9IHBvaW50c1tpICsgMV0ueFZhbHVlIC0gcG9pbnRzW2kgLSAxXS54VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudDMgPSBwb2ludHNbaSArIDFdLnhWYWx1ZSAtIHBvaW50c1tpXS54VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeTEgPSBwb2ludHNbaSArIDFdLnlWYWx1ZSAtIHBvaW50c1tpXS55VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR5MiA9IHBvaW50c1tpXS55VmFsdWUgLSBwb2ludHNbaSAtIDFdLnlWYWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZWZmaWNpZW50MSA9PT0gMCB8fCBjb2VmZmljaWVudDIgPT09IDAgfHwgY29lZmZpY2llbnQzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZVtpXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZUR1cGxpY2F0ZVtpXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IDEgLyAoY29lZmZpY2llbnQxICogeVNwbGluZVtpIC0gMV0gKyAyICogY29lZmZpY2llbnQyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lW2ldID0gLXAgKiBjb2VmZmljaWVudDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeVNwbGluZUR1cGxpY2F0ZVtpXSA9IHAgKiAoNiAqIChkeTEgLyBjb2VmZmljaWVudDMgLSBkeTIgLyBjb2VmZmljaWVudDEpIC0gY29lZmZpY2llbnQxICogeVNwbGluZUR1cGxpY2F0ZVtpIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSBjb3VudCAtIDI7IGsgPj0gMDsgay0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lW2tdID0geVNwbGluZVtrXSAqIHlTcGxpbmVbayArIDFdICsgeVNwbGluZUR1cGxpY2F0ZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB5U3BsaW5lO1xuICAgICAgICB9O1xuICAgICAgICBTcGxpbmVTZXJpZXMucHJvdG90eXBlLmdldENvbnRyb2xQb2ludHMgPSBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIsIHlTcGxpbmUxLCB5U3BsaW5lMiwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbFBvaW50MTtcbiAgICAgICAgICAgIHZhciBjb250cm9sUG9pbnQyO1xuICAgICAgICAgICAgdmFyIHBvaW50O1xuICAgICAgICAgICAgdmFyIHlTcGxpbmVEdXBsaWNhdGUxID0geVNwbGluZTE7XG4gICAgICAgICAgICB2YXIgeVNwbGluZUR1cGxpY2F0ZTIgPSB5U3BsaW5lMjtcbiAgICAgICAgICAgIHN3aXRjaCAoc2VyaWVzLnNwbGluZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdDYXJkaW5hbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMueEF4aXMudmFsdWVUeXBlID09PSAnRGF0ZVRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lRHVwbGljYXRlMSA9IHlTcGxpbmUxIC8gdGhpcy5kYXRlVGltZUludGVydmFsKHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5U3BsaW5lRHVwbGljYXRlMiA9IHlTcGxpbmUyIC8gdGhpcy5kYXRlVGltZUludGVydmFsKHNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50MSA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKHBvaW50MS54VmFsdWUgKyB5U3BsaW5lMSAvIDMsIHBvaW50MS55VmFsdWUgKyB5U3BsaW5lRHVwbGljYXRlMSAvIDMpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sUG9pbnQyID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24ocG9pbnQyLnhWYWx1ZSAtIHlTcGxpbmUyIC8gMywgcG9pbnQyLnlWYWx1ZSAtIHlTcGxpbmVEdXBsaWNhdGUyIC8gMyk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gbmV3IGhlbHBlcl8xLkNvbnRyb2xQb2ludHMoY29udHJvbFBvaW50MSwgY29udHJvbFBvaW50Mik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ01vbm90b25pYyc6XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IChwb2ludDIueFZhbHVlIC0gcG9pbnQxLnhWYWx1ZSkgLyAzO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sUG9pbnQxID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24ocG9pbnQxLnhWYWx1ZSArIHZhbHVlLCBwb2ludDEueVZhbHVlICsgeVNwbGluZTEgKiB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludDIgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihwb2ludDIueFZhbHVlIC0gdmFsdWUsIHBvaW50Mi55VmFsdWUgLSB5U3BsaW5lMiAqIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSBuZXcgaGVscGVyXzEuQ29udHJvbFBvaW50cyhjb250cm9sUG9pbnQxLCBjb250cm9sUG9pbnQyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9uZTMgPSAxIC8gMy4wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGFYMiA9IChwb2ludDIueFZhbHVlIC0gcG9pbnQxLnhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWDIgPSBkZWx0YVgyICogZGVsdGFYMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gb25lMyAqICgoKDIgKiBwb2ludDEueVZhbHVlKSArIHBvaW50Mi55VmFsdWUpIC0gb25lMyAqIGRlbHRhWDIgKiAoeVNwbGluZTEgKyAwLjUgKiB5U3BsaW5lMikpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTIgPSBvbmUzICogKChwb2ludDEueVZhbHVlICsgKDIgKiBwb2ludDIueVZhbHVlKSkgLSBvbmUzICogZGVsdGFYMiAqICgwLjUgKiB5U3BsaW5lMSArIHlTcGxpbmUyKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludDEgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigoMiAqIChwb2ludDEueFZhbHVlKSArIChwb2ludDIueFZhbHVlKSkgKiBvbmUzLCB5MSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludDIgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigoKHBvaW50MS54VmFsdWUpICsgMiAqIChwb2ludDIueFZhbHVlKSkgKiBvbmUzLCB5Mik7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gbmV3IGhlbHBlcl8xLkNvbnRyb2xQb2ludHMoY29udHJvbFBvaW50MSwgY29udHJvbFBvaW50Mik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICB9O1xuICAgICAgICBTcGxpbmVTZXJpZXMucHJvdG90eXBlLmRhdGVUaW1lSW50ZXJ2YWwgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXJpZXMueEF4aXMuYWN0dWFsSW50ZXJ2YWxUeXBlO1xuICAgICAgICAgICAgdmFyIGludGVydmFsSW5NaWxsaXNlY29uZHM7XG4gICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09ICdZZWFycycpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbEluTWlsbGlzZWNvbmRzID0gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGludGVydmFsID09PSAnTW9udGhzJykge1xuICAgICAgICAgICAgICAgIGludGVydmFsSW5NaWxsaXNlY29uZHMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnRlcnZhbCA9PT0gJ0RheXMnKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxJbk1pbGxpc2Vjb25kcyA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnRlcnZhbCA9PT0gJ0hvdXJzJykge1xuICAgICAgICAgICAgICAgIGludGVydmFsSW5NaWxsaXNlY29uZHMgPSA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGludGVydmFsID09PSAnTWludXRlcycpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbEluTWlsbGlzZWNvbmRzID0gNjAgKiAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW50ZXJ2YWwgPT09ICdTZWNvbmRzJykge1xuICAgICAgICAgICAgICAgIGludGVydmFsSW5NaWxsaXNlY29uZHMgPSAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxJbk1pbGxpc2Vjb25kcyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbEluTWlsbGlzZWNvbmRzO1xuICAgICAgICB9O1xuICAgICAgICBTcGxpbmVTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NwbGluZVNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIFNwbGluZVNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBTcGxpbmVTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHNlcmllcy5hbmltYXRpb247XG4gICAgICAgICAgICB0aGlzLmRvTGluZWFyQW5pbWF0aW9uKHNlcmllcywgb3B0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFNwbGluZVNlcmllcztcbiAgICB9KGxpbmVfYmFzZV8xLkxpbmVCYXNlKSk7XG4gICAgZXhwb3J0cy5TcGxpbmVTZXJpZXMgPSBTcGxpbmVTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3Nlcmllcy9zcGxpbmUtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2luZGljYXRvci1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGluZGljYXRvcl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNtYUluZGljYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTbWFJbmRpY2F0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNtYUluZGljYXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTbWFJbmRpY2F0b3IucHJvdG90eXBlLmluaXREYXRhU291cmNlID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBzbWFQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBpbmRpY2F0b3IucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHBvaW50cyAmJiBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHBvaW50cztcbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBoZWxwZXJfMS5maXJzdFRvTG93ZXJDYXNlKGluZGljYXRvci5maWVsZCk7XG4gICAgICAgICAgICAgICAgdmFyIHhGaWVsZCA9ICd4JztcbiAgICAgICAgICAgICAgICB2YXIgc2lnbmFsU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsaWREYXRhICYmIHZhbGlkRGF0YS5sZW5ndGggJiYgdmFsaWREYXRhLmxlbmd0aCA+PSBpbmRpY2F0b3IucGVyaW9kKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kaWNhdG9yLnBlcmlvZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gKz0gdmFsaWREYXRhW2ldW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdmVyYWdlID0gc3VtIC8gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgc21hUG9pbnRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2luZGljYXRvci5wZXJpb2QgLSAxXVt4RmllbGRdLCBhdmVyYWdlLCB2YWxpZERhdGFbaW5kaWNhdG9yLnBlcmlvZCAtIDFdLCBzaWduYWxTZXJpZXMsIHNtYVBvaW50cy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgdmFsaWREYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtIC09IHZhbGlkRGF0YVtpbmRleCAtIGluZGljYXRvci5wZXJpb2RdW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSB2YWxpZERhdGFbaW5kZXhdW2ZpZWxkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2ZXJhZ2UgPSBzdW0gLyBpbmRpY2F0b3IucGVyaW9kO1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hUG9pbnRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2luZGV4XVt4RmllbGRdLCBhdmVyYWdlLCB2YWxpZERhdGFbaW5kZXhdLCBzaWduYWxTZXJpZXMsIHNtYVBvaW50cy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZShzbWFQb2ludHMsIGluZGljYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNtYUluZGljYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBTbWFJbmRpY2F0b3IucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NtYUluZGljYXRvcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTbWFJbmRpY2F0b3I7XG4gICAgfShpbmRpY2F0b3JfYmFzZV8xLlRlY2huaWNhbEFuYWx5c2lzKSk7XG4gICAgZXhwb3J0cy5TbWFJbmRpY2F0b3IgPSBTbWFJbmRpY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL3NtYS1pbmRpY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vc2VyaWVzL2xpbmUtYmFzZVwiLCBcIi4uL3Nlcmllcy9jaGFydC1zZXJpZXNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGxpbmVfYmFzZV8xLCBjaGFydF9zZXJpZXNfMSwgaGVscGVyXzEsIGhlbHBlcl8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUZWNobmljYWxBbmFseXNpcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhUZWNobmljYWxBbmFseXNpcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gVGVjaG5pY2FsQW5hbHlzaXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVGVjaG5pY2FsQW5hbHlzaXMucHJvdG90eXBlLmluaXRTZXJpZXNDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIGluZGljYXRvci50YXJnZXRTZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzaWduYWxMaW5lID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1Byb3BlcnRpZXMoc2lnbmFsTGluZSwgaW5kaWNhdG9yLCAnU2lnbmFsTGluZScsIGluZGljYXRvci5maWxsLCBpbmRpY2F0b3Iud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgfTtcbiAgICAgICAgVGVjaG5pY2FsQW5hbHlzaXMucHJvdG90eXBlLnNldFNlcmllc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoc2VyaWVzLCBpbmRpY2F0b3IsIG5hbWUsIGZpbGwsIHdpZHRoLCBjaGFydCkge1xuICAgICAgICAgICAgc2VyaWVzLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgc2VyaWVzLnhOYW1lID0gJ3gnO1xuICAgICAgICAgICAgc2VyaWVzLnlOYW1lID0gJ3knO1xuICAgICAgICAgICAgc2VyaWVzLmZpbGwgPSBmaWxsIHx8ICcjNjA2ZWZmJztcbiAgICAgICAgICAgIHNlcmllcy5kYXNoQXJyYXkgPSBpbmRpY2F0b3IuZGFzaEFycmF5O1xuICAgICAgICAgICAgc2VyaWVzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBzZXJpZXMueEF4aXNOYW1lID0gaW5kaWNhdG9yLnhBeGlzTmFtZTtcbiAgICAgICAgICAgIHNlcmllcy5hbmltYXRpb24gPSBpbmRpY2F0b3IuYW5pbWF0aW9uO1xuICAgICAgICAgICAgc2VyaWVzLnlBeGlzTmFtZSA9IGluZGljYXRvci55QXhpc05hbWU7XG4gICAgICAgICAgICBzZXJpZXMuY2xpcFJlY3RFbGVtZW50ID0gaW5kaWNhdG9yLmNsaXBSZWN0RWxlbWVudDtcbiAgICAgICAgICAgIHNlcmllcy5wb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHNlcmllcy5lbmFibGVUb29sdGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlcmllcy5pbnRlcmlvciA9IHNlcmllcy5maWxsO1xuICAgICAgICAgICAgc2VyaWVzLmNhdGVnb3J5ID0gJ0luZGljYXRvcic7XG4gICAgICAgICAgICBzZXJpZXMuaW5kZXggPSBpbmRpY2F0b3IuaW5kZXg7XG4gICAgICAgICAgICBzZXJpZXMuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICAgIHNlcmllcy54TWluID0gSW5maW5pdHk7XG4gICAgICAgICAgICBzZXJpZXMueE1heCA9IC1JbmZpbml0eTtcbiAgICAgICAgICAgIHNlcmllcy55TWluID0gSW5maW5pdHk7XG4gICAgICAgICAgICBzZXJpZXMueU1heCA9IC1JbmZpbml0eTtcbiAgICAgICAgICAgIHNlcmllcy54RGF0YSA9IFtdO1xuICAgICAgICAgICAgc2VyaWVzLnlEYXRhID0gW107XG4gICAgICAgICAgICBzZXJpZXMubWFya2VyLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGluZGljYXRvci50YXJnZXRTZXJpZXMucHVzaChzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBUZWNobmljYWxBbmFseXNpcy5wcm90b3R5cGUuY3JlYXRlSW5kaWNhdG9yRWxlbWVudHMgPSBmdW5jdGlvbiAoY2hhcnQsIGluZGljYXRvciwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChpbmRpY2F0b3Iuc2VyaWVzTmFtZSB8fCBpbmRpY2F0b3IuZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8yLmZpbmRDbGlwUmVjdChpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbGlwUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgaWYgKGluZGljYXRvci5zZXJpZXNOYW1lIHx8IGluZGljYXRvci5kYXRhU291cmNlKSB7XG4gICAgICAgICAgICAgICAgY2xpcFJlY3QgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdLmNsaXBSZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsaXBSZWN0RWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmRyYXdDbGlwUGF0aChuZXcgaGVscGVyXzEuUmVjdE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgJ19DaGFydEluZGljYXRvckNsaXBSZWN0XycgKyBpbmRleCwgJ3RyYW5zcGFyZW50JywgeyB3aWR0aDogMSwgY29sb3I6ICdHcmF5JyB9LCAxLCB7XG4gICAgICAgICAgICAgICAgeDogMCwgeTogMCwgd2lkdGg6IGNsaXBSZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY2xpcFJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaW5kaWNhdG9yLmluZGljYXRvckVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgJ2lkJzogY2hhcnQuZWxlbWVudC5pZCArICdJbmRpY2F0b3JHcm91cCcgKyBpbmRleCxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgnICsgY2xpcFJlY3QueCArICcsJyArIGNsaXBSZWN0LnkgKyAnKScsXG4gICAgICAgICAgICAgICAgJ2NsaXAtcGF0aCc6ICd1cmwoIycgKyBjaGFydC5lbGVtZW50LmlkICsgJ19DaGFydEluZGljYXRvckNsaXBSZWN0XycgKyBpbmRleCArICcpJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbmRpY2F0b3IuaW5kaWNhdG9yRWxlbWVudC5hcHBlbmRDaGlsZChjbGlwUmVjdEVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGluZGljYXRvci50YXJnZXRTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzZXJpZXMuY2xpcFJlY3RFbGVtZW50ID0gY2xpcFJlY3RFbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2VyaWVzLmNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogc2VyaWVzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX0luZGljYXRvcl8nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljYXRvci5pbmRleCArICdfJyArIHNlcmllcy5uYW1lICsgJ19Hcm91cCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbmRpY2F0b3IuaW5kaWNhdG9yRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBzZXJpZXMuc2VyaWVzRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFydC5pbmRpY2F0b3JFbGVtZW50cy5hcHBlbmRDaGlsZChpbmRpY2F0b3IuaW5kaWNhdG9yRWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFRlY2huaWNhbEFuYWx5c2lzLnByb3RvdHlwZS5nZXREYXRhUG9pbnQgPSBmdW5jdGlvbiAoeCwgeSwgc291cmNlUG9pbnQsIHNlcmllcywgaW5kZXgsIGluZGljYXRvcikge1xuICAgICAgICAgICAgaWYgKGluZGljYXRvciA9PT0gdm9pZCAwKSB7IGluZGljYXRvciA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBjaGFydF9zZXJpZXNfMS5Qb2ludHMoKTtcbiAgICAgICAgICAgIHBvaW50LnggPSB4O1xuICAgICAgICAgICAgcG9pbnQueSA9IHk7XG4gICAgICAgICAgICBwb2ludC54VmFsdWUgPSBzb3VyY2VQb2ludC54VmFsdWU7XG4gICAgICAgICAgICBwb2ludC5jb2xvciA9IHNlcmllcy5maWxsO1xuICAgICAgICAgICAgcG9pbnQuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHBvaW50LnlWYWx1ZSA9IHk7XG4gICAgICAgICAgICBwb2ludC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlcmllcy54TWluID0gTWF0aC5taW4oc2VyaWVzLnhNaW4sIHBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueU1pbiA9IE1hdGgubWluKHNlcmllcy55TWluLCBwb2ludC55VmFsdWUpO1xuICAgICAgICAgICAgc2VyaWVzLnhNYXggPSBNYXRoLm1heChzZXJpZXMueE1heCwgcG9pbnQueFZhbHVlKTtcbiAgICAgICAgICAgIHNlcmllcy55TWF4ID0gTWF0aC5tYXgoc2VyaWVzLnlNYXgsIHBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueERhdGEucHVzaChwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgaWYgKGluZGljYXRvciAmJiBpbmRpY2F0b3IudHlwZSA9PT0gJ01hY2QnICYmIHNlcmllcy50eXBlID09PSAnQ29sdW1uJykge1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC55ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQuY29sb3IgPSBpbmRpY2F0b3IubWFjZFBvc2l0aXZlQ29sb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5jb2xvciA9IGluZGljYXRvci5tYWNkTmVnYXRpdmVDb2xvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgIH07XG4gICAgICAgIFRlY2huaWNhbEFuYWx5c2lzLnByb3RvdHlwZS5nZXRSYW5nZVBvaW50ID0gZnVuY3Rpb24gKHgsIGhpZ2gsIGxvdywgc291cmNlUG9pbnQsIHNlcmllcywgaW5kZXgsIGluZGljYXRvcikge1xuICAgICAgICAgICAgaWYgKGluZGljYXRvciA9PT0gdm9pZCAwKSB7IGluZGljYXRvciA9IG51bGw7IH1cbiAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBjaGFydF9zZXJpZXNfMS5Qb2ludHMoKTtcbiAgICAgICAgICAgIHBvaW50LnggPSB4O1xuICAgICAgICAgICAgcG9pbnQuaGlnaCA9IGhpZ2g7XG4gICAgICAgICAgICBwb2ludC5sb3cgPSBsb3c7XG4gICAgICAgICAgICBwb2ludC54VmFsdWUgPSBzb3VyY2VQb2ludC54VmFsdWU7XG4gICAgICAgICAgICBwb2ludC5jb2xvciA9IHNlcmllcy5maWxsO1xuICAgICAgICAgICAgcG9pbnQuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHBvaW50LnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgc2VyaWVzLnhEYXRhLnB1c2gocG9pbnQueFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgICAgfTtcbiAgICAgICAgVGVjaG5pY2FsQW5hbHlzaXMucHJvdG90eXBlLnNldFNlcmllc1JhbmdlID0gZnVuY3Rpb24gKHBvaW50cywgaW5kaWNhdG9yLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIGlmIChzZXJpZXMgPT09IHZvaWQgMCkgeyBzZXJpZXMgPSBudWxsOyB9XG4gICAgICAgICAgICBpZiAoIXNlcmllcykge1xuICAgICAgICAgICAgICAgIGluZGljYXRvci50YXJnZXRTZXJpZXNbMF0ucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLnBvaW50cyA9IHBvaW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRlY2huaWNhbEFuYWx5c2lzO1xuICAgIH0obGluZV9iYXNlXzEuTGluZUJhc2UpKTtcbiAgICBleHBvcnRzLlRlY2huaWNhbEFuYWx5c2lzID0gVGVjaG5pY2FsQW5hbHlzaXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL2luZGljYXRvci1iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuL2luZGljYXRvci1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGluZGljYXRvcl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVtYUluZGljYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhFbWFJbmRpY2F0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEVtYUluZGljYXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBFbWFJbmRpY2F0b3IucHJvdG90eXBlLmluaXREYXRhU291cmNlID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGhlbHBlcl8xLmZpcnN0VG9Mb3dlckNhc2UoaW5kaWNhdG9yLmZpZWxkKTtcbiAgICAgICAgICAgIHZhciB4RmllbGQgPSAneCc7XG4gICAgICAgICAgICB2YXIgZW1hUG9pbnRzID0gW107XG4gICAgICAgICAgICB2YXIgc2lnbmFsU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXTtcbiAgICAgICAgICAgIHZhciB2YWxpZERhdGEgPSBpbmRpY2F0b3IucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSAmJiB2YWxpZERhdGEubGVuZ3RoICYmIHZhbGlkRGF0YS5sZW5ndGggPj0gaW5kaWNhdG9yLnBlcmlvZCkge1xuICAgICAgICAgICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgayA9ICgyIC8gKGluZGljYXRvci5wZXJpb2QgKyAxKSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRpY2F0b3IucGVyaW9kOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IHZhbGlkRGF0YVtpXVtmaWVsZF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF2ZXJhZ2UgPSBzdW0gLyBpbmRpY2F0b3IucGVyaW9kO1xuICAgICAgICAgICAgICAgIGVtYVBvaW50cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpbmRpY2F0b3IucGVyaW9kIC0gMV1beEZpZWxkXSwgYXZlcmFnZSwgdmFsaWREYXRhW2luZGljYXRvci5wZXJpb2QgLSAxXSwgc2lnbmFsU2VyaWVzLCBlbWFQb2ludHMubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPCB2YWxpZERhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2QXZlcmFnZSA9IGVtYVBvaW50c1tpbmRleCAtIGluZGljYXRvci5wZXJpb2RdW3NpZ25hbFNlcmllcy55TmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5VmFsdWUgPSAodmFsaWREYXRhW2luZGV4XVtmaWVsZF0gLSBwcmV2QXZlcmFnZSkgKiBrICsgcHJldkF2ZXJhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGVtYVBvaW50cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpbmRleF1beEZpZWxkXSwgeVZhbHVlLCB2YWxpZERhdGFbaW5kZXhdLCBzaWduYWxTZXJpZXMsIGVtYVBvaW50cy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKGVtYVBvaW50cywgaW5kaWNhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgRW1hSW5kaWNhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIEVtYUluZGljYXRvci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnRW1hSW5kaWNhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEVtYUluZGljYXRvcjtcbiAgICB9KGluZGljYXRvcl9iYXNlXzEuVGVjaG5pY2FsQW5hbHlzaXMpKTtcbiAgICBleHBvcnRzLkVtYUluZGljYXRvciA9IEVtYUluZGljYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvZW1hLWluZGljYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi9pbmRpY2F0b3ItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUbWFJbmRpY2F0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVG1hSW5kaWNhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBUbWFJbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgVG1hSW5kaWNhdG9yLnByb3RvdHlwZS5pbml0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgdG1hUG9pbnRzID0gW107XG4gICAgICAgICAgICB2YXIgZmllbGQgPSBoZWxwZXJfMS5maXJzdFRvTG93ZXJDYXNlKGluZGljYXRvci5maWVsZCk7XG4gICAgICAgICAgICB2YXIgeEZpZWxkID0gJ3gnO1xuICAgICAgICAgICAgdmFyIHNpZ25hbFNlcmllcyA9IGluZGljYXRvci50YXJnZXRTZXJpZXNbMF07XG4gICAgICAgICAgICB2YXIgdmFsaWREYXRhID0gaW5kaWNhdG9yLnBvaW50cztcbiAgICAgICAgICAgIGlmICh2YWxpZERhdGEgJiYgdmFsaWREYXRhLmxlbmd0aCAmJiB2YWxpZERhdGEubGVuZ3RoID49IGluZGljYXRvci5wZXJpb2QpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2lnbmFsU2VyaWVzXzEgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdO1xuICAgICAgICAgICAgICAgIHZhciB2YWxpZERhdGFfMSA9IGluZGljYXRvci5wb2ludHM7XG4gICAgICAgICAgICAgICAgaWYgKHZhbGlkRGF0YV8xLmxlbmd0aCAmJiB2YWxpZERhdGFfMS5sZW5ndGggPj0gaW5kaWNhdG9yLnBlcmlvZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgayA9ICgyIC8gKGluZGljYXRvci5wZXJpb2QgKyAxKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdW1PZlNNQSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlU01BID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNtYVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSB2YWxpZERhdGFfMS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZXJpb2QgPSBpbmRpY2F0b3IucGVyaW9kO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoXzEgPj0gcGVyaW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB2YWxpZERhdGFfMS5sZW5ndGggLSBsZW5ndGhfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpbmRleDsgaiA8IGluZGV4ICsgcGVyaW9kOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyB2YWxpZERhdGFfMVtqXVtmaWVsZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gPSBzdW0gLyBwZXJpb2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFWYWx1ZXMucHVzaChzdW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoXzEtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrXzEgPSAwOyBrXzEgPCBwZXJpb2QgLSAxOyBrXzErKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwga18xICsgMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtICsgdmFsaWREYXRhXzFbal1bZmllbGRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtIC8gKGtfMSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc21hVmFsdWVzLnNwbGljZShrXzEsIDAsIHN1bSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRpY2F0b3IucGVyaW9kO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPD0gc21hVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpbmRleCAtIGluZGljYXRvci5wZXJpb2Q7IGogPCBpbmRleDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtICsgc21hVmFsdWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtIC8gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtYVBvaW50cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YV8xW2luZGV4IC0gMV1beEZpZWxkXSwgc3VtLCB2YWxpZERhdGFfMVtpbmRleCAtIDFdLCBzaWduYWxTZXJpZXNfMSwgdG1hUG9pbnRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UodG1hUG9pbnRzLCBpbmRpY2F0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBUbWFJbmRpY2F0b3IucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgVG1hSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdUbWFJbmRpY2F0b3InO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gVG1hSW5kaWNhdG9yO1xuICAgIH0oaW5kaWNhdG9yX2Jhc2VfMS5UZWNobmljYWxBbmFseXNpcykpO1xuICAgIGV4cG9ydHMuVG1hSW5kaWNhdG9yID0gVG1hSW5kaWNhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC90ZWNobmljYWwtaW5kaWNhdG9ycy90bWEtaW5kaWNhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vaW5kaWNhdG9yLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBY2N1bXVsYXRpb25EaXN0cmlidXRpb25JbmRpY2F0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjdW11bGF0aW9uRGlzdHJpYnV0aW9uSW5kaWNhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2N1bXVsYXRpb25EaXN0cmlidXRpb25JbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjdW11bGF0aW9uRGlzdHJpYnV0aW9uSW5kaWNhdG9yLnByb3RvdHlwZS5pbml0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgc291cmNlU2VyaWVzID0gaW5kaWNhdG9yLnNvdXJjZVNlcmllcztcbiAgICAgICAgICAgIHZhciBhZFBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHZhbGlkRGF0YSA9IGluZGljYXRvci5wb2ludHM7XG4gICAgICAgICAgICBpZiAodmFsaWREYXRhLmxlbmd0aCA+IDAgJiYgdmFsaWREYXRhLmxlbmd0aCA+IGluZGljYXRvci5wZXJpb2QpIHtcbiAgICAgICAgICAgICAgICBhZFBvaW50cyA9IHRoaXMuY2FsY3VsYXRlQURQb2ludHMoaW5kaWNhdG9yLCB2YWxpZERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZShhZFBvaW50cywgaW5kaWNhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGlzdHJpYnV0aW9uSW5kaWNhdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVBRFBvaW50cyA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIHZhbGlkRGF0YSkge1xuICAgICAgICAgICAgdmFyIHRlbXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gMDtcbiAgICAgICAgICAgIHZhciBoaWdoID0gMDtcbiAgICAgICAgICAgIHZhciBsb3cgPSAwO1xuICAgICAgICAgICAgdmFyIGNsb3NlID0gMDtcbiAgICAgICAgICAgIHZhciBzaWduYWxTZXJpZXMgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHZhbGlkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhpZ2ggPSBOdW1iZXIodmFsaWREYXRhW2ldLmhpZ2gpO1xuICAgICAgICAgICAgICAgIGxvdyA9IE51bWJlcih2YWxpZERhdGFbaV0ubG93KTtcbiAgICAgICAgICAgICAgICBjbG9zZSA9IE51bWJlcih2YWxpZERhdGFbaV0uY2xvc2UpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gKChjbG9zZSAtIGxvdykgLSAoaGlnaCAtIGNsb3NlKSkgLyAoaGlnaCAtIGxvdyk7XG4gICAgICAgICAgICAgICAgc3VtID0gc3VtICsgdmFsdWUgKiBOdW1iZXIodmFsaWREYXRhW2ldLnZvbHVtZSk7XG4gICAgICAgICAgICAgICAgdGVtcFtpXSA9IHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCBzdW0sIHZhbGlkRGF0YVtpXSwgc2lnbmFsU2VyaWVzLCB0ZW1wLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGVtcDtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGlzdHJpYnV0aW9uSW5kaWNhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRpc3RyaWJ1dGlvbkluZGljYXRvci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQWNjdW11bGF0aW9uRGlzdHJpYnV0aW9uSW5kaWNhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFjY3VtdWxhdGlvbkRpc3RyaWJ1dGlvbkluZGljYXRvcjtcbiAgICB9KGluZGljYXRvcl9iYXNlXzEuVGVjaG5pY2FsQW5hbHlzaXMpKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkRpc3RyaWJ1dGlvbkluZGljYXRvciA9IEFjY3VtdWxhdGlvbkRpc3RyaWJ1dGlvbkluZGljYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvYWQtaW5kaWNhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vaW5kaWNhdG9yLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBdHJJbmRpY2F0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQXRySW5kaWNhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBdHJJbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQXRySW5kaWNhdG9yLnByb3RvdHlwZS5pbml0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgc291cmNlU2VyaWVzID0gaW5kaWNhdG9yLnNvdXJjZVNlcmllcztcbiAgICAgICAgICAgIHZhciBhdHJQb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHZhciB2YWxpZERhdGEgPSBpbmRpY2F0b3IucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YS5sZW5ndGggPiAwICYmIHZhbGlkRGF0YS5sZW5ndGggPiBpbmRpY2F0b3IucGVyaW9kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVBVFJQb2ludHMoaW5kaWNhdG9yLCB2YWxpZERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBdHJJbmRpY2F0b3IucHJvdG90eXBlLmNhbGN1bGF0ZUFUUlBvaW50cyA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIHZhbGlkRGF0YSkge1xuICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSAwO1xuICAgICAgICAgICAgdmFyIGhpZ2hMb3cgPSAwO1xuICAgICAgICAgICAgdmFyIGhpZ2hDbG9zZSA9IDA7XG4gICAgICAgICAgICB2YXIgbG93Q2xvc2UgPSAwO1xuICAgICAgICAgICAgdmFyIHRydWVSYW5nZSA9IDA7XG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gW107XG4gICAgICAgICAgICB2YXIgdGVtcCA9IFtdO1xuICAgICAgICAgICAgdmFyIHBlcmlvZCA9IGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcbiAgICAgICAgICAgIHZhciB5ID0gJ3knO1xuICAgICAgICAgICAgdmFyIHNpZ25hbFNlcmllcyA9IGluZGljYXRvci50YXJnZXRTZXJpZXNbMF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbGlkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhpZ2hMb3cgPSBOdW1iZXIodmFsaWREYXRhW2ldLmhpZ2gpIC0gTnVtYmVyKHZhbGlkRGF0YVtpXS5sb3cpO1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBoaWdoQ2xvc2UgPSBNYXRoLmFicyhOdW1iZXIodmFsaWREYXRhW2ldLmhpZ2gpIC0gTnVtYmVyKHZhbGlkRGF0YVtpIC0gMV0uY2xvc2UpKTtcbiAgICAgICAgICAgICAgICAgICAgbG93Q2xvc2UgPSBNYXRoLmFicyhOdW1iZXIodmFsaWREYXRhW2ldLmxvdykgLSBOdW1iZXIodmFsaWREYXRhW2kgLSAxXS5jbG9zZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnVlUmFuZ2UgPSBNYXRoLm1heChoaWdoTG93LCBoaWdoQ2xvc2UsIGxvd0Nsb3NlKTtcbiAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyB0cnVlUmFuZ2U7XG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gcGVyaW9kKSB7XG4gICAgICAgICAgICAgICAgICAgIGF2ZXJhZ2UgPSAoTnVtYmVyKHRlbXBbaSAtIDFdW3ldKSAqIChwZXJpb2QgLSAxKSArIHRydWVSYW5nZSkgLyBwZXJpb2Q7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCBhdmVyYWdlLCB2YWxpZERhdGFbaV0sIHNpZ25hbFNlcmllcywgcG9pbnRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IHN1bSAvIHBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHBlcmlvZCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCBhdmVyYWdlLCB2YWxpZERhdGFbaV0sIHNpZ25hbFNlcmllcywgcG9pbnRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB7IHg6IHZhbGlkRGF0YVtpXS54LCB5OiBhdmVyYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKHBvaW50cywgaW5kaWNhdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgQXRySW5kaWNhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIEF0ckluZGljYXRvci5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQXRySW5kaWNhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEF0ckluZGljYXRvcjtcbiAgICB9KGluZGljYXRvcl9iYXNlXzEuVGVjaG5pY2FsQW5hbHlzaXMpKTtcbiAgICBleHBvcnRzLkF0ckluZGljYXRvciA9IEF0ckluZGljYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvYXRyLWluZGljYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9zZXJpZXMvY2hhcnQtc2VyaWVzXCIsIFwiLi9pbmRpY2F0b3ItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNoYXJ0X3Nlcmllc18xLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBNb21lbnR1bUluZGljYXRvciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhNb21lbnR1bUluZGljYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gTW9tZW50dW1JbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgTW9tZW50dW1JbmRpY2F0b3IucHJvdG90eXBlLmluaXRTZXJpZXNDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuaW5pdFNlcmllc0NvbGxlY3Rpb24uY2FsbCh0aGlzLCBpbmRpY2F0b3IsIGNoYXJ0KTtcbiAgICAgICAgICAgIHZhciB1cHBlckxpbmUgPSBuZXcgY2hhcnRfc2VyaWVzXzEuU2VyaWVzKGluZGljYXRvciwgJ3RhcmdldFNlcmllcycsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0U2VyaWVzUHJvcGVydGllcy5jYWxsKHRoaXMsIHVwcGVyTGluZSwgaW5kaWNhdG9yLCAnVXBwZXJMaW5lJywgaW5kaWNhdG9yLnVwcGVyTGluZS5jb2xvciwgaW5kaWNhdG9yLnVwcGVyTGluZS53aWR0aCwgY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBNb21lbnR1bUluZGljYXRvci5wcm90b3R5cGUuaW5pdERhdGFTb3VyY2UgPSBmdW5jdGlvbiAoaW5kaWNhdG9yLCBjaGFydCkge1xuICAgICAgICAgICAgdmFyIHVwcGVyQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHNpZ25hbENvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciB2YWxpZERhdGEgPSBpbmRpY2F0b3IucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YSAmJiB2YWxpZERhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVwcGVyU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1sxXTtcbiAgICAgICAgICAgICAgICB2YXIgc2lnbmFsU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXTtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBpbmRpY2F0b3IucGVyaW9kO1xuICAgICAgICAgICAgICAgIGlmICh2YWxpZERhdGEubGVuZ3RoID49IGluZGljYXRvci5wZXJpb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWxpZERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCAxMDAsIHZhbGlkRGF0YVtpXSwgdXBwZXJTZXJpZXMsIHVwcGVyQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGkgPCBsZW5ndGhfMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWxDb2xsZWN0aW9uLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2ldLngsIChOdW1iZXIodmFsaWREYXRhW2ldLmNsb3NlKSAvIE51bWJlcih2YWxpZERhdGFbaSAtIGxlbmd0aF8xXS5jbG9zZSkgKiAxMDApLCB2YWxpZERhdGFbaV0sIHNpZ25hbFNlcmllcywgc2lnbmFsQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKHNpZ25hbENvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZSh1cHBlckNvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1sxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIE1vbWVudHVtSW5kaWNhdG9yLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIE1vbWVudHVtSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdNb21lbnR1bUluZGljYXRvcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBNb21lbnR1bUluZGljYXRvcjtcbiAgICB9KGluZGljYXRvcl9iYXNlXzEuVGVjaG5pY2FsQW5hbHlzaXMpKTtcbiAgICBleHBvcnRzLk1vbWVudHVtSW5kaWNhdG9yID0gTW9tZW50dW1JbmRpY2F0b3I7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL21vbWVudHVtLWluZGljYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9zZXJpZXMvY2hhcnQtc2VyaWVzXCIsIFwiLi9pbmRpY2F0b3ItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNoYXJ0X3Nlcmllc18xLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBSc2lJbmRpY2F0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUnNpSW5kaWNhdG9yLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBSc2lJbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUnNpSW5kaWNhdG9yLnByb3RvdHlwZS5pbml0U2VyaWVzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRTZXJpZXNDb2xsZWN0aW9uLmNhbGwodGhpcywgaW5kaWNhdG9yLCBjaGFydCk7XG4gICAgICAgICAgICBpZiAoaW5kaWNhdG9yLnNob3dab25lcykge1xuICAgICAgICAgICAgICAgIHZhciBsb3dlckxpbmUgPSBuZXcgY2hhcnRfc2VyaWVzXzEuU2VyaWVzKGluZGljYXRvciwgJ3RhcmdldFNlcmllcycsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldFNlcmllc1Byb3BlcnRpZXMuY2FsbCh0aGlzLCBsb3dlckxpbmUsIGluZGljYXRvciwgJ0xvd2VyTGluZScsIGluZGljYXRvci5sb3dlckxpbmUuY29sb3IsIGluZGljYXRvci5sb3dlckxpbmUud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICB2YXIgdXBwZXJMaW5lID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5zZXRTZXJpZXNQcm9wZXJ0aWVzLmNhbGwodGhpcywgdXBwZXJMaW5lLCBpbmRpY2F0b3IsICdVcHBlckxpbmUnLCBpbmRpY2F0b3IudXBwZXJMaW5lLmNvbG9yLCBpbmRpY2F0b3IudXBwZXJMaW5lLndpZHRoLCBjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFJzaUluZGljYXRvci5wcm90b3R5cGUuaW5pdERhdGFTb3VyY2UgPSBmdW5jdGlvbiAoaW5kaWNhdG9yLCBjaGFydCkge1xuICAgICAgICAgICAgdmFyIHNpZ25hbENvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBsb3dlckNvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciB1cHBlckNvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBzaWduYWxTZXJpZXMgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdO1xuICAgICAgICAgICAgdmFyIHZhbGlkRGF0YSA9IGluZGljYXRvci5wb2ludHM7XG4gICAgICAgICAgICBpZiAodmFsaWREYXRhLmxlbmd0aCAmJiB2YWxpZERhdGEubGVuZ3RoID49IGluZGljYXRvci5wZXJpb2QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNhdG9yLnNob3dab25lcykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbGlkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXJDb2xsZWN0aW9uLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2ldLngsIGluZGljYXRvci5vdmVyQm91Z2h0LCB2YWxpZERhdGFbaV0sIGluZGljYXRvci50YXJnZXRTZXJpZXNbMV0sIHVwcGVyQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvd2VyQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCBpbmRpY2F0b3Iub3ZlclNvbGQsIHZhbGlkRGF0YVtpXSwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1syXSwgbG93ZXJDb2xsZWN0aW9uLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcmV2Q2xvc2UgPSBOdW1iZXIodmFsaWREYXRhWzBdLmNsb3NlKTtcbiAgICAgICAgICAgICAgICB2YXIgZ2FpbiA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGxvc3MgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGluZGljYXRvci5wZXJpb2Q7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VfMSA9IE51bWJlcih2YWxpZERhdGFbaV0uY2xvc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VfMSA+IHByZXZDbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FpbiArPSBjbG9zZV8xIC0gcHJldkNsb3NlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9zcyArPSBwcmV2Q2xvc2UgLSBjbG9zZV8xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByZXZDbG9zZSA9IGNsb3NlXzE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhaW4gPSBnYWluIC8gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICBsb3NzID0gbG9zcyAvIGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICAgICAgc2lnbmFsQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpbmRpY2F0b3IucGVyaW9kXS54LCAxMDAgLSAoMTAwIC8gKDEgKyBnYWluIC8gbG9zcykpLCB2YWxpZERhdGFbaW5kaWNhdG9yLnBlcmlvZF0sIHNpZ25hbFNlcmllcywgc2lnbmFsQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gaW5kaWNhdG9yLnBlcmlvZCArIDE7IGogPCB2YWxpZERhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlXzIgPSBOdW1iZXIodmFsaWREYXRhW2pdLmNsb3NlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlXzIgPiBwcmV2Q2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhaW4gPSAoZ2FpbiAqIChpbmRpY2F0b3IucGVyaW9kIC0gMSkgKyAoY2xvc2VfMiAtIHByZXZDbG9zZSkpIC8gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvc3MgPSAobG9zcyAqIChpbmRpY2F0b3IucGVyaW9kIC0gMSkpIC8gaW5kaWNhdG9yLnBlcmlvZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjbG9zZV8yIDwgcHJldkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3NzID0gKGxvc3MgKiAoaW5kaWNhdG9yLnBlcmlvZCAtIDEpICsgKHByZXZDbG9zZSAtIGNsb3NlXzIpKSAvIGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYWluID0gKGdhaW4gKiAoaW5kaWNhdG9yLnBlcmlvZCAtIDEpKSAvIGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJldkNsb3NlID0gY2xvc2VfMjtcbiAgICAgICAgICAgICAgICAgICAgc2lnbmFsQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtqXS54LCAxMDAgLSAoMTAwIC8gKDEgKyBnYWluIC8gbG9zcykpLCB2YWxpZERhdGFbal0sIHNpZ25hbFNlcmllcywgc2lnbmFsQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKHNpZ25hbENvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXSk7XG4gICAgICAgICAgICBpZiAoaW5kaWNhdG9yLnNob3dab25lcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UodXBwZXJDb2xsZWN0aW9uLCBpbmRpY2F0b3IsIGluZGljYXRvci50YXJnZXRTZXJpZXNbMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UobG93ZXJDb2xsZWN0aW9uLCBpbmRpY2F0b3IsIGluZGljYXRvci50YXJnZXRTZXJpZXNbMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBSc2lJbmRpY2F0b3IucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgUnNpSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdSc2lJbmRpY2F0b3InO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUnNpSW5kaWNhdG9yO1xuICAgIH0oaW5kaWNhdG9yX2Jhc2VfMS5UZWNobmljYWxBbmFseXNpcykpO1xuICAgIGV4cG9ydHMuUnNpSW5kaWNhdG9yID0gUnNpSW5kaWNhdG9yO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC90ZWNobmljYWwtaW5kaWNhdG9ycy9yc2ktaW5kaWNhdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL3Nlcmllcy9jaGFydC1zZXJpZXNcIiwgXCIuL2luZGljYXRvci1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2hhcnRfc2VyaWVzXzEsIGluZGljYXRvcl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFN0b2NoYXN0aWNJbmRpY2F0b3IgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoU3RvY2hhc3RpY0luZGljYXRvciwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gU3RvY2hhc3RpY0luZGljYXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTdG9jaGFzdGljSW5kaWNhdG9yLnByb3RvdHlwZS5pbml0U2VyaWVzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRTZXJpZXNDb2xsZWN0aW9uLmNhbGwodGhpcywgaW5kaWNhdG9yLCBjaGFydCk7XG4gICAgICAgICAgICB2YXIgcGVyaW9kTGluZSA9IG5ldyBjaGFydF9zZXJpZXNfMS5TZXJpZXMoaW5kaWNhdG9yLCAndGFyZ2V0U2VyaWVzJywge30sIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNQcm9wZXJ0aWVzKHBlcmlvZExpbmUsIGluZGljYXRvciwgJ1BlcmlvZExpbmUnLCBpbmRpY2F0b3IucGVyaW9kTGluZS5jb2xvciwgaW5kaWNhdG9yLnBlcmlvZExpbmUud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgICAgIGlmIChpbmRpY2F0b3Iuc2hvd1pvbmVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVwcGVyU2VyaWVzID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNQcm9wZXJ0aWVzKHVwcGVyU2VyaWVzLCBpbmRpY2F0b3IsICdVcHBlckxpbmUnLCBpbmRpY2F0b3IudXBwZXJMaW5lLmNvbG9yLCBpbmRpY2F0b3IudXBwZXJMaW5lLndpZHRoLCBjaGFydCk7XG4gICAgICAgICAgICAgICAgdmFyIGxvd2VyU2VyaWVzID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNQcm9wZXJ0aWVzKGxvd2VyU2VyaWVzLCBpbmRpY2F0b3IsICdMb3dlckxpbmUnLCBpbmRpY2F0b3IubG93ZXJMaW5lLmNvbG9yLCBpbmRpY2F0b3IubG93ZXJMaW5lLndpZHRoLCBjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFN0b2NoYXN0aWNJbmRpY2F0b3IucHJvdG90eXBlLmluaXREYXRhU291cmNlID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBzaWduYWxDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgdXBwZXJDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgbG93ZXJDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgcGVyaW9kQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IFtdO1xuICAgICAgICAgICAgdmFyIHNvdXJjZVNlcmllcyA9IGluZGljYXRvci5zb3VyY2VTZXJpZXM7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSB7fTtcbiAgICAgICAgICAgIHZhciB2YWxpZERhdGEgPSBpbmRpY2F0b3IucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHZhbGlkRGF0YS5sZW5ndGggJiYgdmFsaWREYXRhLmxlbmd0aCA+PSBpbmRpY2F0b3IucGVyaW9kKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGljYXRvci5zaG93Wm9uZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWxpZERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtpXS54LCBpbmRpY2F0b3Iub3ZlckJvdWdodCwgdmFsaWREYXRhW2ldLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzJdLCB1cHBlckNvbGxlY3Rpb24ubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dlckNvbGxlY3Rpb24ucHVzaCh0aGlzLmdldERhdGFQb2ludCh2YWxpZERhdGFbaV0ueCwgaW5kaWNhdG9yLm92ZXJTb2xkLCB2YWxpZERhdGFbaV0sIGluZGljYXRvci50YXJnZXRTZXJpZXNbM10sIGxvd2VyQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzb3VyY2UgPSB0aGlzLmNhbGN1bGF0ZVBlcmlvZChpbmRpY2F0b3IucGVyaW9kLCBpbmRpY2F0b3Iua1BlcmlvZCwgdmFsaWREYXRhLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzFdKTtcbiAgICAgICAgICAgICAgICBwZXJpb2RDb2xsZWN0aW9uID0gdGhpcy5zbWFDYWxjdWxhdGlvbihpbmRpY2F0b3IucGVyaW9kLCBpbmRpY2F0b3Iua1BlcmlvZCwgc291cmNlLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzFdKTtcbiAgICAgICAgICAgICAgICBzaWduYWxDb2xsZWN0aW9uID0gdGhpcy5zbWFDYWxjdWxhdGlvbihpbmRpY2F0b3IucGVyaW9kICsgaW5kaWNhdG9yLmtQZXJpb2QgLSAxLCBpbmRpY2F0b3IuZFBlcmlvZCwgc291cmNlLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2Uoc2lnbmFsQ29sbGVjdGlvbiwgaW5kaWNhdG9yLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UocGVyaW9kQ29sbGVjdGlvbiwgaW5kaWNhdG9yLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzFdKTtcbiAgICAgICAgICAgIGlmIChpbmRpY2F0b3Iuc2hvd1pvbmVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZSh1cHBlckNvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1syXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZShsb3dlckNvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1szXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFN0b2NoYXN0aWNJbmRpY2F0b3IucHJvdG90eXBlLnNtYUNhbGN1bGF0aW9uID0gZnVuY3Rpb24gKHBlcmlvZCwga1BlcmlvZCwgZGF0YSwgc291cmNlU2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnRDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPj0gcGVyaW9kICsga1BlcmlvZCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IHBlcmlvZCArIChrUGVyaW9kIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IE51bWJlcihkYXRhW2ldLnkpO1xuICAgICAgICAgICAgICAgICAgICB0ZW1wLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSB0ZW1wLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobGVuZ3RoXzEgPj0gY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBwZXJpb2QgLSAxOyBpIDwgKHBlcmlvZCArIGtQZXJpb2QgLSAxKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdW0gPSBzdW0gKyB0ZW1wW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN1bSA9IHN1bSAvIGtQZXJpb2Q7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHN1bS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICAgICAgdGVtcC5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aF8xID0gdGVtcC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBjb3VudCAtIDE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGkgPCBsZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludENvbGxlY3Rpb24ucHVzaCh0aGlzLmdldERhdGFQb2ludChkYXRhW2ldLngsIE51bWJlcih2YWx1ZXNbaSAtIGxlbl0pLCBkYXRhW2ldLCBzb3VyY2VTZXJpZXMsIHBvaW50Q29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaV0ueSA9IE51bWJlcigodmFsdWVzW2kgLSBsZW5dKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9pbnRDb2xsZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBTdG9jaGFzdGljSW5kaWNhdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVQZXJpb2QgPSBmdW5jdGlvbiAocGVyaW9kLCBrUGVyaW9kLCBkYXRhLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBsb3dWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBoaWdoVmFsdWVzID0gW107XG4gICAgICAgICAgICB2YXIgY2xvc2VWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtb2RpZmllZFNvdXJjZSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbG93VmFsdWVzW2pdID0gZGF0YVtqXS5sb3c7XG4gICAgICAgICAgICAgICAgaGlnaFZhbHVlc1tqXSA9IGRhdGFbal0uaGlnaDtcbiAgICAgICAgICAgICAgICBjbG9zZVZhbHVlc1tqXSA9IGRhdGFbal0uY2xvc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiBwZXJpb2QpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxQZXJpb2QgPSBwZXJpb2QgKyBrUGVyaW9kO1xuICAgICAgICAgICAgICAgIHZhciBtaW5zID0gW107XG4gICAgICAgICAgICAgICAgdmFyIG1heHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBlcmlvZCAtIDE7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBtYXhzLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgICAgIG1pbnMucHVzaCgwKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRTb3VyY2UucHVzaCh0aGlzLmdldERhdGFQb2ludChkYXRhW2ldLngsIGRhdGFbaV0uY2xvc2UsIGRhdGFbaV0sIHNlcmllcywgbW9kaWZpZWRTb3VyY2UubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBwZXJpb2QgLSAxOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IE51bWJlci5NSU5fVkFMVUU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGVyaW9kOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgbG93VmFsdWVzW2kgLSBqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXggPSBNYXRoLm1heChtYXgsIGhpZ2hWYWx1ZXNbaSAtIGpdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXhzLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgbWlucy5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBwZXJpb2QgLSAxOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wXzEgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYm90dG9tID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdG9wXzEgKz0gY2xvc2VWYWx1ZXNbaV0gLSBtaW5zW2ldO1xuICAgICAgICAgICAgICAgICAgICBib3R0b20gKz0gbWF4c1tpXSAtIG1pbnNbaV07XG4gICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkU291cmNlLnB1c2godGhpcy5nZXREYXRhUG9pbnQoZGF0YVtpXS54LCAodG9wXzEgLyBib3R0b20pICogMTAwLCBkYXRhW2ldLCBzZXJpZXMsIG1vZGlmaWVkU291cmNlLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtb2RpZmllZFNvdXJjZTtcbiAgICAgICAgfTtcbiAgICAgICAgU3RvY2hhc3RpY0luZGljYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBTdG9jaGFzdGljSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdTdG9jaGFzdGljSW5kaWNhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFN0b2NoYXN0aWNJbmRpY2F0b3I7XG4gICAgfShpbmRpY2F0b3JfYmFzZV8xLlRlY2huaWNhbEFuYWx5c2lzKSk7XG4gICAgZXhwb3J0cy5TdG9jaGFzdGljSW5kaWNhdG9yID0gU3RvY2hhc3RpY0luZGljYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvc3RvY2hhc3RpYy1pbmRpY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vc2VyaWVzL2NoYXJ0LXNlcmllc1wiLCBcIi4vaW5kaWNhdG9yLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBjaGFydF9zZXJpZXNfMSwgaW5kaWNhdG9yX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQm9sbGluZ2VyQmFuZHMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQm9sbGluZ2VyQmFuZHMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEJvbGxpbmdlckJhbmRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEJvbGxpbmdlckJhbmRzLnByb3RvdHlwZS5pbml0U2VyaWVzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzID0gW107XG4gICAgICAgICAgICB2YXIgcmFuZ2VBcmVhID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICByYW5nZUFyZWEudHlwZSA9ICdSYW5nZUFyZWEnO1xuICAgICAgICAgICAgaWYgKGluZGljYXRvci5iYW5kQ29sb3IgIT09ICd0cmFuc3BhcmVudCcgJiYgaW5kaWNhdG9yLmJhbmRDb2xvciAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNQcm9wZXJ0aWVzKHJhbmdlQXJlYSwgaW5kaWNhdG9yLCAnQm9sbGluZ2VyQmFuZCcsIGluZGljYXRvci5iYW5kQ29sb3IsIDAsIGNoYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzaWduYWxMaW5lID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1Byb3BlcnRpZXMoc2lnbmFsTGluZSwgaW5kaWNhdG9yLCAnU2lnbmFsTGluZScsIGluZGljYXRvci5maWxsLCBpbmRpY2F0b3Iud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgICAgIHZhciB1cHBlckxpbmUgPSBuZXcgY2hhcnRfc2VyaWVzXzEuU2VyaWVzKGluZGljYXRvciwgJ3RhcmdldFNlcmllcycsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUHJvcGVydGllcyh1cHBlckxpbmUsIGluZGljYXRvciwgJ1VwcGVyTGluZScsIGluZGljYXRvci51cHBlckxpbmUuY29sb3IsIGluZGljYXRvci51cHBlckxpbmUud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgICAgIHZhciBsb3dlckxpbmUgPSBuZXcgY2hhcnRfc2VyaWVzXzEuU2VyaWVzKGluZGljYXRvciwgJ3RhcmdldFNlcmllcycsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUHJvcGVydGllcyhsb3dlckxpbmUsIGluZGljYXRvciwgJ0xvd2VyTGluZScsIGluZGljYXRvci5sb3dlckxpbmUuY29sb3IsIGluZGljYXRvci5sb3dlckxpbmUud2lkdGgsIGNoYXJ0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQm9sbGluZ2VyQmFuZHMucHJvdG90eXBlLmluaXREYXRhU291cmNlID0gZnVuY3Rpb24gKGluZGljYXRvciwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBlbmFibGVCYW5kID0gaW5kaWNhdG9yLmJhbmRDb2xvciAhPT0gJ3RyYW5zcGFyZW50JyAmJiBpbmRpY2F0b3IuYmFuZENvbG9yICE9PSAnbm9uZSc7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBlbmFibGVCYW5kID8gMSA6IDA7XG4gICAgICAgICAgICB2YXIgc2lnbmFsQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHVwcGVyQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIGxvd2VyQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIGJhbmRDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgdXBwZXJTZXJpZXMgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzW3N0YXJ0ICsgMV07XG4gICAgICAgICAgICB2YXIgbG93ZXJTZXJpZXMgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzW3N0YXJ0ICsgMl07XG4gICAgICAgICAgICB2YXIgc2lnbmFsU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1tzdGFydF07XG4gICAgICAgICAgICB2YXIgcmFuZ2VBcmVhU2VyaWVzID0gZW5hYmxlQmFuZCA/IGluZGljYXRvci50YXJnZXRTZXJpZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgdmFyIHZhbGlkRGF0YSA9IGluZGljYXRvci5wb2ludHM7XG4gICAgICAgICAgICBpZiAodmFsaWREYXRhLmxlbmd0aCAmJiB2YWxpZERhdGEubGVuZ3RoID49IGluZGljYXRvci5wZXJpb2QpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgZGV2aWF0aW9uU3VtID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgbXVsdGlwbGllciA9IGluZGljYXRvci5zdGFuZGFyZERldmlhdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSB2YWxpZERhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGhfMSA9IE1hdGgucm91bmQoaW5kaWNhdG9yLnBlcmlvZCk7XG4gICAgICAgICAgICAgICAgdmFyIHNtYVBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBkZXZpYXRpb25zID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGJvbGxpbmdlclBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDA7IGlfMSA8IGxlbmd0aF8xOyBpXzErKykge1xuICAgICAgICAgICAgICAgICAgICBzdW0gKz0gTnVtYmVyKHZhbGlkRGF0YVtpXzFdLmNsb3NlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNtYSA9IHN1bSAvIGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaV8yID0gMDsgaV8yIDwgbGltaXQ7IGlfMisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gTnVtYmVyKHZhbGlkRGF0YVtpXzJdLmNsb3NlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlfMiA+PSBsZW5ndGhfMSAtIDEgJiYgaV8yIDwgbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpXzIgLSBpbmRpY2F0b3IucGVyaW9kID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHkgLSBOdW1iZXIodmFsaWREYXRhW2lfMiAtIGxlbmd0aF8xXS5jbG9zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtID0gc3VtICsgZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWEgPSBzdW0gLyAoaW5kaWNhdG9yLnBlcmlvZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hUG9pbnRzW2lfMl0gPSBzbWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uc1tpXzJdID0gTWF0aC5wb3coeSAtIHNtYSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uU3VtICs9IGRldmlhdGlvbnNbaV8yXSAtIGRldmlhdGlvbnNbaV8yIC0gbGVuZ3RoXzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hUG9pbnRzW2lfMl0gPSBzbWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uc1tpXzJdID0gTWF0aC5wb3coeSAtIHNtYSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uU3VtICs9IGRldmlhdGlvbnNbaV8yXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IE1hdGguc3FydChkZXZpYXRpb25TdW0gLyAoaW5kaWNhdG9yLnBlcmlvZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvd2VyQmFuZCA9IHNtYVBvaW50c1tpXzJdIC0gKG11bHRpcGxpZXIgKiByYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBwZXJCYW5kID0gc21hUG9pbnRzW2lfMl0gKyAobXVsdGlwbGllciAqIHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpXzIgKyAxID09PSBsZW5ndGhfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGpfMSA9IDA7IGpfMSA8IGxlbmd0aF8xIC0gMTsgal8xKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9sbGluZ2VyUG9pbnRzW2pfMV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWCc6IHZhbGlkRGF0YVtqXzFdLngsICdtYic6IHNtYVBvaW50c1tpXzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xiJzogbG93ZXJCYW5kLCAndWInOiB1cHBlckJhbmQsIHZpc2libGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBib2xsaW5nZXJQb2ludHNbaV8yXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWCc6IHZhbGlkRGF0YVtpXzJdLngsICdtYic6IHNtYVBvaW50c1tpXzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYic6IGxvd2VyQmFuZCwgJ3ViJzogdXBwZXJCYW5kLCB2aXNpYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlfMiA8IGluZGljYXRvci5wZXJpb2QgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc21hUG9pbnRzW2lfMl0gPSBzbWE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uc1tpXzJdID0gTWF0aC5wb3coeSAtIHNtYSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWF0aW9uU3VtICs9IGRldmlhdGlvbnNbaV8yXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaSA9IC0xO1xuICAgICAgICAgICAgICAgIHZhciBqID0gLTE7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsaW1pdDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrID49IChsZW5ndGhfMSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWIgPSAndWInO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxiID0gJ2xiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYiA9ICdtYic7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckNvbGxlY3Rpb24ucHVzaCh0aGlzLmdldERhdGFQb2ludCh2YWxpZERhdGFba10ueCwgYm9sbGluZ2VyUG9pbnRzW2tdW3ViXSwgdmFsaWREYXRhW2tdLCB1cHBlclNlcmllcywgdXBwZXJDb2xsZWN0aW9uLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXJDb2xsZWN0aW9uLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2tdLngsIGJvbGxpbmdlclBvaW50c1trXVtsYl0sIHZhbGlkRGF0YVtrXSwgbG93ZXJTZXJpZXMsIGxvd2VyQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbENvbGxlY3Rpb24ucHVzaCh0aGlzLmdldERhdGFQb2ludCh2YWxpZERhdGFba10ueCwgYm9sbGluZ2VyUG9pbnRzW2tdW21iXSwgdmFsaWREYXRhW2tdLCBzaWduYWxTZXJpZXMsIHNpZ25hbENvbGxlY3Rpb24ubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlQmFuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbmRDb2xsZWN0aW9uLnB1c2godGhpcy5nZXRSYW5nZVBvaW50KHZhbGlkRGF0YVtrXS54LCB1cHBlckNvbGxlY3Rpb25bKytpXS55LCBsb3dlckNvbGxlY3Rpb25bKytqXS55LCB2YWxpZERhdGFba10sIHJhbmdlQXJlYVNlcmllcywgYmFuZENvbGxlY3Rpb24ubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5hYmxlQmFuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UoYmFuZENvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKHNpZ25hbENvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1tzdGFydF0pO1xuICAgICAgICAgICAgdGhpcy5zZXRTZXJpZXNSYW5nZSh1cHBlckNvbGxlY3Rpb24sIGluZGljYXRvciwgaW5kaWNhdG9yLnRhcmdldFNlcmllc1tzdGFydCArIDFdKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UobG93ZXJDb2xsZWN0aW9uLCBpbmRpY2F0b3IsIGluZGljYXRvci50YXJnZXRTZXJpZXNbc3RhcnQgKyAyXSk7XG4gICAgICAgIH07XG4gICAgICAgIEJvbGxpbmdlckJhbmRzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIEJvbGxpbmdlckJhbmRzLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdCb2xsaW5nZXJCYW5kc0luZGljYXRvcic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCb2xsaW5nZXJCYW5kcztcbiAgICB9KGluZGljYXRvcl9iYXNlXzEuVGVjaG5pY2FsQW5hbHlzaXMpKTtcbiAgICBleHBvcnRzLkJvbGxpbmdlckJhbmRzID0gQm9sbGluZ2VyQmFuZHM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3RlY2huaWNhbC1pbmRpY2F0b3JzL2JvbGxpbmdlci1iYW5kcy5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi9zZXJpZXMvY2hhcnQtc2VyaWVzXCIsIFwiLi9pbmRpY2F0b3ItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGNoYXJ0X3Nlcmllc18xLCBpbmRpY2F0b3JfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBNYWNkSW5kaWNhdG9yID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1hY2RJbmRpY2F0b3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE1hY2RJbmRpY2F0b3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgTWFjZEluZGljYXRvci5wcm90b3R5cGUuaW5pdFNlcmllc0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAoaW5kaWNhdG9yLCBjaGFydCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5pbml0U2VyaWVzQ29sbGVjdGlvbi5jYWxsKHRoaXMsIGluZGljYXRvciwgY2hhcnQpO1xuICAgICAgICAgICAgaWYgKGluZGljYXRvci5tYWNkVHlwZSA9PT0gJ0xpbmUnIHx8IGluZGljYXRvci5tYWNkVHlwZSA9PT0gJ0JvdGgnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hY2RTZXJpZXMgPSBuZXcgY2hhcnRfc2VyaWVzXzEuU2VyaWVzKGluZGljYXRvciwgJ3RhcmdldFNlcmllcycsIHt9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlcmllc1Byb3BlcnRpZXMobWFjZFNlcmllcywgaW5kaWNhdG9yLCAnTWFjZExpbmUnLCBpbmRpY2F0b3IubWFjZExpbmUuY29sb3IsIGluZGljYXRvci5tYWNkTGluZS53aWR0aCwgY2hhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGljYXRvci5tYWNkVHlwZSA9PT0gJ0hpc3RvZ3JhbScgfHwgaW5kaWNhdG9yLm1hY2RUeXBlID09PSAnQm90aCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGlzdG9ncmFtU2VyaWVzID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyhpbmRpY2F0b3IsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaGlzdG9ncmFtU2VyaWVzLnR5cGUgPSAnQ29sdW1uJztcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlcmllc1Byb3BlcnRpZXMoaGlzdG9ncmFtU2VyaWVzLCBpbmRpY2F0b3IsICdIaXN0b2dyYW0nLCBpbmRpY2F0b3IubWFjZFBvc2l0aXZlQ29sb3IsIGluZGljYXRvci53aWR0aCwgY2hhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYWNkSW5kaWNhdG9yLnByb3RvdHlwZS5pbml0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgc2lnbmFsQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIGZhc3RQZXJpb2QgPSBpbmRpY2F0b3IuZmFzdFBlcmlvZDtcbiAgICAgICAgICAgIHZhciBzbG93UGVyaW9kID0gaW5kaWNhdG9yLnNsb3dQZXJpb2Q7XG4gICAgICAgICAgICB2YXIgdHJpZ2dlciA9IGluZGljYXRvci5wZXJpb2Q7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gZmFzdFBlcmlvZCArIHRyaWdnZXI7XG4gICAgICAgICAgICB2YXIgbWFjZENvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBoaXN0b2dyYW1Db2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB2YXIgdmFsaWREYXRhID0gaW5kaWNhdG9yLnBvaW50cztcbiAgICAgICAgICAgIHZhciBzaWduYWxTZXJpZXMgPSBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdO1xuICAgICAgICAgICAgdmFyIGhpc3RvZ3JhbVNlcmllcztcbiAgICAgICAgICAgIHZhciBtYWNkTGluZVNlcmllcztcbiAgICAgICAgICAgIGlmIChpbmRpY2F0b3IubWFjZFR5cGUgPT09ICdIaXN0b2dyYW0nKSB7XG4gICAgICAgICAgICAgICAgaGlzdG9ncmFtU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1sxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hY2RMaW5lU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1sxXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNhdG9yLm1hY2RUeXBlID09PSAnQm90aCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9ncmFtU2VyaWVzID0gaW5kaWNhdG9yLnRhcmdldFNlcmllc1syXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsaWREYXRhICYmIGxlbmd0aCA8IHZhbGlkRGF0YS5sZW5ndGggJiYgc2xvd1BlcmlvZCA8PSBmYXN0UGVyaW9kICYmXG4gICAgICAgICAgICAgICAgc2xvd1BlcmlvZCA+IDAgJiYgKGxlbmd0aCAtIDIpID49IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hvcnRFTUEgPSB0aGlzLmNhbGN1bGF0ZUVNQVZhbHVlcyhzbG93UGVyaW9kLCB2YWxpZERhdGEsICdjbG9zZScpO1xuICAgICAgICAgICAgICAgIHZhciBsb25nRU1BID0gdGhpcy5jYWxjdWxhdGVFTUFWYWx1ZXMoZmFzdFBlcmlvZCwgdmFsaWREYXRhLCAnY2xvc2UnKTtcbiAgICAgICAgICAgICAgICB2YXIgbWFjZFZhbHVlcyA9IHRoaXMuZ2V0TUFDRFZhbGVzKGluZGljYXRvciwgc2hvcnRFTUEsIGxvbmdFTUEpO1xuICAgICAgICAgICAgICAgIG1hY2RDb2xsZWN0aW9uID0gdGhpcy5nZXRNQUNEUG9pbnRzKGluZGljYXRvciwgbWFjZFZhbHVlcywgdmFsaWREYXRhLCBtYWNkTGluZVNlcmllcyB8fCBzaWduYWxTZXJpZXMpO1xuICAgICAgICAgICAgICAgIHZhciBzaWduYWxFTUEgPSB0aGlzLmNhbGN1bGF0ZUVNQVZhbHVlcyh0cmlnZ2VyLCBtYWNkQ29sbGVjdGlvbiwgJ3knKTtcbiAgICAgICAgICAgICAgICBzaWduYWxDb2xsZWN0aW9uID0gdGhpcy5nZXRTaWduYWxQb2ludHMoaW5kaWNhdG9yLCBzaWduYWxFTUEsIHZhbGlkRGF0YSwgc2lnbmFsU2VyaWVzKTtcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9ncmFtU2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvZ3JhbUNvbGxlY3Rpb24gPSB0aGlzLmdldEhpc3RvZ3JhbVBvaW50cyhpbmRpY2F0b3IsIG1hY2RWYWx1ZXMsIHNpZ25hbEVNQSwgdmFsaWREYXRhLCBoaXN0b2dyYW1TZXJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2Uoc2lnbmFsQ29sbGVjdGlvbiwgaW5kaWNhdG9yLCBpbmRpY2F0b3IudGFyZ2V0U2VyaWVzWzBdKTtcbiAgICAgICAgICAgIGlmIChoaXN0b2dyYW1TZXJpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlcmllc1JhbmdlKGhpc3RvZ3JhbUNvbGxlY3Rpb24sIGluZGljYXRvciwgaGlzdG9ncmFtU2VyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYWNkTGluZVNlcmllcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VyaWVzUmFuZ2UobWFjZENvbGxlY3Rpb24sIGluZGljYXRvciwgbWFjZExpbmVTZXJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBNYWNkSW5kaWNhdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVFTUFWYWx1ZXMgPSBmdW5jdGlvbiAocGVyaW9kLCB2YWxpZERhdGEsIGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgc3VtID0gMDtcbiAgICAgICAgICAgIHZhciBpbml0aWFsRU1BID0gMDtcbiAgICAgICAgICAgIHZhciBlbWFWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBlbWFQZXJjZW50ID0gKDIgLyAocGVyaW9kICsgMSkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZXJpb2Q7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1bSArPSBOdW1iZXIodmFsaWREYXRhW2ldW2ZpZWxkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0aWFsRU1BID0gKHN1bSAvIHBlcmlvZCk7XG4gICAgICAgICAgICBlbWFWYWx1ZXMucHVzaChpbml0aWFsRU1BKTtcbiAgICAgICAgICAgIHZhciBlbWFBdmcgPSBpbml0aWFsRU1BO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IHBlcmlvZDsgaiA8IHZhbGlkRGF0YS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGVtYUF2ZyA9IChOdW1iZXIodmFsaWREYXRhW2pdW2ZpZWxkXSkgLSBlbWFBdmcpICogZW1hUGVyY2VudCArIGVtYUF2ZztcbiAgICAgICAgICAgICAgICBlbWFWYWx1ZXMucHVzaChlbWFBdmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVtYVZhbHVlcztcbiAgICAgICAgfTtcbiAgICAgICAgTWFjZEluZGljYXRvci5wcm90b3R5cGUuZ2V0TUFDRFBvaW50cyA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIG1hY2RQb2ludHMsIHZhbGlkRGF0YSwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgbWFjZENvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBkYXRhTUFDREluZGV4ID0gaW5kaWNhdG9yLmZhc3RQZXJpb2QgLSAxO1xuICAgICAgICAgICAgdmFyIG1hY2RJbmRleCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoZGF0YU1BQ0RJbmRleCA8IHZhbGlkRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBtYWNkQ29sbGVjdGlvbi5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHZhbGlkRGF0YVtkYXRhTUFDREluZGV4XS54LCBtYWNkUG9pbnRzW21hY2RJbmRleF0sIHZhbGlkRGF0YVtkYXRhTUFDREluZGV4XSwgc2VyaWVzLCBtYWNkQ29sbGVjdGlvbi5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICBkYXRhTUFDREluZGV4Kys7XG4gICAgICAgICAgICAgICAgbWFjZEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFjZENvbGxlY3Rpb247XG4gICAgICAgIH07XG4gICAgICAgIE1hY2RJbmRpY2F0b3IucHJvdG90eXBlLmdldFNpZ25hbFBvaW50cyA9IGZ1bmN0aW9uIChpbmRpY2F0b3IsIHNpZ25hbEVtYSwgdmFsaWREYXRhLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhU2lnbmFsSW5kZXggPSBpbmRpY2F0b3IuZmFzdFBlcmlvZCArIGluZGljYXRvci5wZXJpb2QgLSAyO1xuICAgICAgICAgICAgdmFyIHNpZ25hbEluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBzaWduYWxDb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB3aGlsZSAoZGF0YVNpZ25hbEluZGV4IDwgdmFsaWREYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNpZ25hbENvbGxlY3Rpb24ucHVzaCh0aGlzLmdldERhdGFQb2ludCh2YWxpZERhdGFbZGF0YVNpZ25hbEluZGV4XS54LCBzaWduYWxFbWFbc2lnbmFsSW5kZXhdLCB2YWxpZERhdGFbZGF0YVNpZ25hbEluZGV4XSwgc2VyaWVzLCBzaWduYWxDb2xsZWN0aW9uLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIGRhdGFTaWduYWxJbmRleCsrO1xuICAgICAgICAgICAgICAgIHNpZ25hbEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2lnbmFsQ29sbGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgTWFjZEluZGljYXRvci5wcm90b3R5cGUuZ2V0TUFDRFZhbGVzID0gZnVuY3Rpb24gKGluZGljYXRvciwgc2hvcnRFbWEsIGxvbmdFbWEpIHtcbiAgICAgICAgICAgIHZhciBtYWNkUG9pbnRzID0gW107XG4gICAgICAgICAgICB2YXIgZGlmZiA9IGluZGljYXRvci5mYXN0UGVyaW9kIC0gaW5kaWNhdG9yLnNsb3dQZXJpb2Q7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvbmdFbWEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYWNkUG9pbnRzLnB1c2goKHNob3J0RW1hW2kgKyBkaWZmXSAtIGxvbmdFbWFbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYWNkUG9pbnRzO1xuICAgICAgICB9O1xuICAgICAgICBNYWNkSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRIaXN0b2dyYW1Qb2ludHMgPSBmdW5jdGlvbiAoaW5kaWNhdG9yLCBtYWNkUG9pbnRzLCBzaWduYWxFbWEsIHZhbGlkRGF0YSwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YUhpc3RvZ3JhbUluZGV4ID0gaW5kaWNhdG9yLmZhc3RQZXJpb2QgKyBpbmRpY2F0b3IucGVyaW9kIC0gMjtcbiAgICAgICAgICAgIHZhciBoaXN0b2dyYW1JbmRleCA9IDA7XG4gICAgICAgICAgICB2YXIgaGlzdG9ncmFtQ29sbGVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGRhdGFIaXN0b2dyYW1JbmRleCA8IHZhbGlkRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBoaXN0b2dyYW1Db2xsZWN0aW9uLnB1c2godGhpcy5nZXREYXRhUG9pbnQodmFsaWREYXRhW2RhdGFIaXN0b2dyYW1JbmRleF0ueCwgbWFjZFBvaW50c1toaXN0b2dyYW1JbmRleCArIChpbmRpY2F0b3IucGVyaW9kIC0gMSldIC0gc2lnbmFsRW1hW2hpc3RvZ3JhbUluZGV4XSwgdmFsaWREYXRhW2RhdGFIaXN0b2dyYW1JbmRleF0sIHNlcmllcywgaGlzdG9ncmFtQ29sbGVjdGlvbi5sZW5ndGgsIGluZGljYXRvcikpO1xuICAgICAgICAgICAgICAgIGRhdGFIaXN0b2dyYW1JbmRleCsrO1xuICAgICAgICAgICAgICAgIGhpc3RvZ3JhbUluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGlzdG9ncmFtQ29sbGVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgTWFjZEluZGljYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICBNYWNkSW5kaWNhdG9yLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdNYWNkSW5kaWNhdG9yJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIE1hY2RJbmRpY2F0b3I7XG4gICAgfShpbmRpY2F0b3JfYmFzZV8xLlRlY2huaWNhbEFuYWx5c2lzKSk7XG4gICAgZXhwb3J0cy5NYWNkSW5kaWNhdG9yID0gTWFjZEluZGljYXRvcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdGVjaG5pY2FsLWluZGljYXRvcnMvbWFjZC1pbmRpY2F0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uL3Nlcmllcy9jaGFydC1zZXJpZXNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgY2hhcnRfc2VyaWVzXzEsIGhlbHBlcl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUcmVuZGxpbmVzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gVHJlbmRsaW5lcygpIHtcbiAgICAgICAgfVxuICAgICAgICBUcmVuZGxpbmVzLnByb3RvdHlwZS5pbml0U2VyaWVzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uICh0cmVuZGxpbmUsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgdHJlbmRMaW5lU2VyaWVzID0gbmV3IGNoYXJ0X3Nlcmllc18xLlNlcmllcyh0cmVuZGxpbmUsICd0YXJnZXRTZXJpZXMnLCB7fSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAodHJlbmRsaW5lLnR5cGUgPT09ICdMaW5lYXInIHx8IHRyZW5kbGluZS50eXBlID09PSAnTW92aW5nQXZlcmFnZScpIHtcbiAgICAgICAgICAgICAgICB0cmVuZExpbmVTZXJpZXMudHlwZSA9ICdMaW5lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyZW5kTGluZVNlcmllcy50eXBlID0gJ1NwbGluZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNlcmllc1Byb3BlcnRpZXModHJlbmRMaW5lU2VyaWVzLCB0cmVuZGxpbmUsIHRyZW5kbGluZS50eXBlLCB0cmVuZGxpbmUuZmlsbCwgdHJlbmRsaW5lLndpZHRoLCBjaGFydCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLnNldFNlcmllc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoc2VyaWVzLCB0cmVuZGxpbmUsIG5hbWUsIGZpbGwsIHdpZHRoLCBjaGFydCkge1xuICAgICAgICAgICAgc2VyaWVzLm5hbWUgPSB0cmVuZGxpbmUubmFtZTtcbiAgICAgICAgICAgIHNlcmllcy54TmFtZSA9ICd4JztcbiAgICAgICAgICAgIHNlcmllcy55TmFtZSA9ICd5JztcbiAgICAgICAgICAgIHNlcmllcy5maWxsID0gZmlsbCB8fCAnYmx1ZSc7XG4gICAgICAgICAgICBzZXJpZXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIHNlcmllcy5jbGlwUmVjdEVsZW1lbnQgPSB0cmVuZGxpbmUuY2xpcFJlY3RFbGVtZW50O1xuICAgICAgICAgICAgc2VyaWVzLnBvaW50cyA9IFtdO1xuICAgICAgICAgICAgc2VyaWVzLmVuYWJsZVRvb2x0aXAgPSB0cmVuZGxpbmUuZW5hYmxlVG9vbHRpcDtcbiAgICAgICAgICAgIHNlcmllcy5pbmRleCA9IHRyZW5kbGluZS5pbmRleDtcbiAgICAgICAgICAgIHNlcmllcy5zb3VyY2VJbmRleCA9IHRyZW5kbGluZS5zb3VyY2VJbmRleDtcbiAgICAgICAgICAgIHNlcmllcy5pbnRlcmlvciA9IHNlcmllcy5maWxsO1xuICAgICAgICAgICAgc2VyaWVzLmFuaW1hdGlvbiA9IHRyZW5kbGluZS5hbmltYXRpb247XG4gICAgICAgICAgICBzZXJpZXMubGVnZW5kU2hhcGUgPSAnSG9yaXpvbnRhbExpbmUnO1xuICAgICAgICAgICAgc2VyaWVzLm1hcmtlciA9IHRyZW5kbGluZS5tYXJrZXI7XG4gICAgICAgICAgICBzZXJpZXMuY2F0ZWdvcnkgPSAnVHJlbmRMaW5lJztcbiAgICAgICAgICAgIHNlcmllcy5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgICAgc2VyaWVzLnhNaW4gPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHNlcmllcy54TWF4ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgc2VyaWVzLnlNaW4gPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHNlcmllcy55TWF4ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgc2VyaWVzLnhEYXRhID0gW107XG4gICAgICAgICAgICBzZXJpZXMueURhdGEgPSBbXTtcbiAgICAgICAgICAgIHRyZW5kbGluZS50YXJnZXRTZXJpZXMgPSBzZXJpZXM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmNyZWF0ZVRyZW5kTGluZUVsZW1lbnRzID0gZnVuY3Rpb24gKGNoYXJ0LCB0cmVuZGxpbmUsIGluZGV4LCBlbGVtZW50LCBjbGlwUmVjdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRyZW5kbGluZS50cmVuZExpbmVFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIHRyZW5kbGluZS50YXJnZXRTZXJpZXMuY2xpcFJlY3RFbGVtZW50ID0gY2xpcFJlY3RFbGVtZW50O1xuICAgICAgICAgICAgdHJlbmRsaW5lLnRhcmdldFNlcmllcy5zZXJpZXNFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGNoYXJ0LnRyZW5kTGluZUVsZW1lbnRzLmFwcGVuZENoaWxkKHRyZW5kbGluZS50cmVuZExpbmVFbGVtZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0RGF0YVBvaW50ID0gZnVuY3Rpb24gKHgsIHksIHNvdXJjZVBvaW50LCBzZXJpZXMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgdHJlbmRQb2ludCA9IG5ldyBjaGFydF9zZXJpZXNfMS5Qb2ludHMoKTtcbiAgICAgICAgICAgIHRyZW5kUG9pbnQueCA9IHg7XG4gICAgICAgICAgICB0cmVuZFBvaW50LnkgPSB5O1xuICAgICAgICAgICAgdHJlbmRQb2ludC54VmFsdWUgPSBOdW1iZXIoeCk7XG4gICAgICAgICAgICB0cmVuZFBvaW50LmNvbG9yID0gc2VyaWVzLmZpbGw7XG4gICAgICAgICAgICB0cmVuZFBvaW50LmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICB0cmVuZFBvaW50LnlWYWx1ZSA9IE51bWJlcih5KTtcbiAgICAgICAgICAgIHRyZW5kUG9pbnQudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICBzZXJpZXMueE1pbiA9IE1hdGgubWluKHNlcmllcy54TWluLCB0cmVuZFBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueU1pbiA9IE1hdGgubWluKHNlcmllcy55TWluLCB0cmVuZFBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueE1heCA9IE1hdGgubWF4KHNlcmllcy54TWF4LCB0cmVuZFBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueU1heCA9IE1hdGgubWF4KHNlcmllcy55TWF4LCB0cmVuZFBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICBzZXJpZXMueERhdGEucHVzaCh0cmVuZFBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJlbmRQb2ludDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZmluZFNsb3BlSW50ZXJjZXB0ID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMsIHRyZW5kbGluZSwgcG9pbnRzKSB7XG4gICAgICAgICAgICB2YXIgeEF2ZyA9IDA7XG4gICAgICAgICAgICB2YXIgeUF2ZyA9IDA7XG4gICAgICAgICAgICB2YXIgeHlBdmcgPSAwO1xuICAgICAgICAgICAgdmFyIHh4QXZnID0gMDtcbiAgICAgICAgICAgIHZhciB5eUF2ZyA9IDA7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgdmFyIHNsb3BlID0gMDtcbiAgICAgICAgICAgIHZhciBpbnRlcmNlcHQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHhBdmcgKz0geFZhbHVlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgeUF2ZyArPSB5VmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICB4eUF2ZyArPSB4VmFsdWVzW2luZGV4XSAqIHlWYWx1ZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHh4QXZnICs9IHhWYWx1ZXNbaW5kZXhdICogeFZhbHVlc1tpbmRleF07XG4gICAgICAgICAgICAgICAgeXlBdmcgKz0geVZhbHVlc1tpbmRleF0gKiB5VmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0cmVuZGxpbmUudHlwZTtcbiAgICAgICAgICAgIGlmICh0cmVuZGxpbmUuaW50ZXJjZXB0ICYmICh0eXBlID09PSAnTGluZWFyJyB8fCB0eXBlID09PSAnRXhwb25lbnRpYWwnKSkge1xuICAgICAgICAgICAgICAgIGludGVyY2VwdCA9IHRyZW5kbGluZS5pbnRlcmNlcHQ7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xpbmVhcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG9wZSA9ICgoeHlBdmcpIC0gKHRyZW5kbGluZS5pbnRlcmNlcHQgKiB4QXZnKSkgLyB4eEF2ZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFeHBvbmVudGlhbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG9wZSA9ICgoeHlBdmcpIC0gKE1hdGgubG9nKE1hdGguYWJzKHRyZW5kbGluZS5pbnRlcmNlcHQpKSAqIHhBdmcpKSAvIHh4QXZnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2xvcGUgPSAoKHBvaW50cy5sZW5ndGggKiB4eUF2ZykgLSAoeEF2ZyAqIHlBdmcpKSAvICgocG9pbnRzLmxlbmd0aCAqIHh4QXZnKSAtICh4QXZnICogeEF2ZykpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRXhwb25lbnRpYWwnIHx8IHR5cGUgPT09ICdQb3dlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJjZXB0ID0gTWF0aC5leHAoKHlBdmcgLSAoc2xvcGUgKiB4QXZnKSkgLyBwb2ludHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGludGVyY2VwdCA9ICh5QXZnIC0gKHNsb3BlICogeEF2ZykpIC8gcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzbG9wZTogc2xvcGUsIGludGVyY2VwdDogaW50ZXJjZXB0IH07XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmluaXREYXRhU291cmNlID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSB0cmVuZGxpbmUucG9pbnRzO1xuICAgICAgICAgICAgaWYgKHBvaW50cyAmJiBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyZW5kbGluZVNlcmllcyA9IHRyZW5kbGluZS50YXJnZXRTZXJpZXM7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0cmVuZGxpbmUudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMaW5lYXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMaW5lYXJSYW5nZShwb2ludHMsIHRyZW5kbGluZSwgdHJlbmRsaW5lU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFeHBvbmVudGlhbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEV4cG9uZW50aWFsUmFuZ2UocG9pbnRzLCB0cmVuZGxpbmUsIHRyZW5kbGluZVNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTW92aW5nQXZlcmFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vdmluZ0F2ZXJhZ2VSYW5nZShwb2ludHMsIHRyZW5kbGluZSwgdHJlbmRsaW5lU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdQb2x5bm9taWFsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9seW5vbWlhbFJhbmdlKHBvaW50cywgdHJlbmRsaW5lLCB0cmVuZGxpbmVTZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Bvd2VyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG93ZXJSYW5nZShwb2ludHMsIHRyZW5kbGluZSwgdHJlbmRsaW5lU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdMb2dhcml0aG1pYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExvZ2FyaXRobWljUmFuZ2UocG9pbnRzLCB0cmVuZGxpbmUsIHRyZW5kbGluZVNlcmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRyZW5kbGluZS50eXBlICE9PSAnTGluZWFyJyAmJiB0cmVuZGxpbmUudHlwZSAhPT0gJ01vdmluZ0F2ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyZW5kbGluZVNlcmllcy5jaGFydC5zcGxpbmVTZXJpZXNNb2R1bGUuZmluZFNwbGluZVBvaW50KHRyZW5kbGluZVNlcmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUcmVuZGxpbmVzLnByb3RvdHlwZS5zZXRFeHBvbmVudGlhbFJhbmdlID0gZnVuY3Rpb24gKHBvaW50cywgdHJlbmRsaW5lLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB4VmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHZhciB5VmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICB2YXIgc2xvcGVJbnRlcmNlcHQ7XG4gICAgICAgICAgICB3aGlsZSAoaW5kZXggPCBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gcG9pbnRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICB4VmFsdWUucHVzaChwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgICAgIHlWYWx1ZS5wdXNoKE1hdGgubG9nKHBvaW50LnlWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzbG9wZUludGVyY2VwdCA9IHRoaXMuZmluZFNsb3BlSW50ZXJjZXB0KHhWYWx1ZSwgeVZhbHVlLCB0cmVuZGxpbmUsIHBvaW50cyk7XG4gICAgICAgICAgICBzZXJpZXMucG9pbnRzID0gdGhpcy5nZXRFeHBvbmVudGlhbFBvaW50cyh0cmVuZGxpbmUsIHBvaW50cywgeFZhbHVlLCB5VmFsdWUsIHNlcmllcywgc2xvcGVJbnRlcmNlcHQpO1xuICAgICAgICB9O1xuICAgICAgICBUcmVuZGxpbmVzLnByb3RvdHlwZS5zZXRMb2dhcml0aG1pY1JhbmdlID0gZnVuY3Rpb24gKHBvaW50cywgdHJlbmRsaW5lLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB4TG9nVmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHZhciB5TG9nVmFsdWUgPSBbXTtcbiAgICAgICAgICAgIHZhciB4UG9pbnRzTGdyID0gW107XG4gICAgICAgICAgICB2YXIgc2xvcGVJbnRlcmNlcHQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c1tpbmRleF07XG4gICAgICAgICAgICAgICAgeFBvaW50c0xnci5wdXNoKHBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgeExvZ1ZhbHVlLnB1c2goTWF0aC5sb2cocG9pbnQueFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgeUxvZ1ZhbHVlLnB1c2gocG9pbnQueVZhbHVlKTtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2xvcGVJbnRlcmNlcHQgPSB0aGlzLmZpbmRTbG9wZUludGVyY2VwdCh4TG9nVmFsdWUsIHlMb2dWYWx1ZSwgdHJlbmRsaW5lLCBwb2ludHMpO1xuICAgICAgICAgICAgc2VyaWVzLnBvaW50cyA9IHRoaXMuZ2V0TG9nYXJpdGhtaWNQb2ludHModHJlbmRsaW5lLCBwb2ludHMsIHhQb2ludHNMZ3IsIHlMb2dWYWx1ZSwgc2VyaWVzLCBzbG9wZUludGVyY2VwdCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLnNldFBvbHlub21pYWxSYW5nZSA9IGZ1bmN0aW9uIChwb2ludHMsIHRyZW5kbGluZSwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgeFBvbHlWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciB5UG9seVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IHBvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHhQb2x5VmFsdWVzLnB1c2gocG9pbnQueFZhbHVlKTtcbiAgICAgICAgICAgICAgICB5UG9seVZhbHVlcy5wdXNoKHBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5wb2ludHMgPSB0aGlzLmdldFBvbHlub21pYWxQb2ludHModHJlbmRsaW5lLCBwb2ludHMsIHhQb2x5VmFsdWVzLCB5UG9seVZhbHVlcywgc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuc2V0UG93ZXJSYW5nZSA9IGZ1bmN0aW9uIChwb2ludHMsIHRyZW5kbGluZSwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgeFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHlWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBwb3dlclBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNsb3BlSW50ZXJjZXB0O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IHBvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHBvd2VyUG9pbnRzLnB1c2gocG9pbnQueFZhbHVlKTtcbiAgICAgICAgICAgICAgICB4VmFsdWVzLnB1c2goTWF0aC5sb2cocG9pbnQueFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgeVZhbHVlcy5wdXNoKE1hdGgubG9nKHBvaW50LnlWYWx1ZSkpO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzbG9wZUludGVyY2VwdCA9IHRoaXMuZmluZFNsb3BlSW50ZXJjZXB0KHhWYWx1ZXMsIHlWYWx1ZXMsIHRyZW5kbGluZSwgcG9pbnRzKTtcbiAgICAgICAgICAgIHNlcmllcy5wb2ludHMgPSB0aGlzLmdldFBvd2VyUG9pbnRzKHRyZW5kbGluZSwgcG9pbnRzLCBwb3dlclBvaW50cywgeVZhbHVlcywgc2VyaWVzLCBzbG9wZUludGVyY2VwdCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLnNldExpbmVhclJhbmdlID0gZnVuY3Rpb24gKHBvaW50cywgdHJlbmRsaW5lLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciB4VmFsdWVzID0gW107XG4gICAgICAgICAgICB2YXIgeVZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHNsb3BlSW50ZXJjZXB0O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IHBvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHhWYWx1ZXMucHVzaChwb2ludC54VmFsdWUpO1xuICAgICAgICAgICAgICAgIHlWYWx1ZXMucHVzaChwb2ludC55VmFsdWUpO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzbG9wZUludGVyY2VwdCA9IHRoaXMuZmluZFNsb3BlSW50ZXJjZXB0KHhWYWx1ZXMsIHlWYWx1ZXMsIHRyZW5kbGluZSwgcG9pbnRzKTtcbiAgICAgICAgICAgIHNlcmllcy5wb2ludHMgPSB0aGlzLmdldExpbmVhclBvaW50cyh0cmVuZGxpbmUsIHBvaW50cywgeFZhbHVlcywgeVZhbHVlcywgc2VyaWVzLCBzbG9wZUludGVyY2VwdCk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLnNldE1vdmluZ0F2ZXJhZ2VSYW5nZSA9IGZ1bmN0aW9uIChwb2ludHMsIHRyZW5kbGluZSwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgeFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHlWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciB4QXZnVmFsdWVzID0gW107XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c1tpbmRleF07XG4gICAgICAgICAgICAgICAgeEF2Z1ZhbHVlcy5wdXNoKHBvaW50LnhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgeFZhbHVlcy5wdXNoKGluZGV4ICsgMSk7XG4gICAgICAgICAgICAgICAgeVZhbHVlcy5wdXNoKHBvaW50LnlWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5wb2ludHMgPSB0aGlzLmdldE1vdmluZ0F2ZXJhZ2VQb2ludHModHJlbmRsaW5lLCBwb2ludHMsIHhBdmdWYWx1ZXMsIHlWYWx1ZXMsIHNlcmllcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmdldExvZ2FyaXRobWljUG9pbnRzID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgcG9pbnRzLCB4VmFsdWVzLCB5VmFsdWVzLCBzZXJpZXMsIHNsb3BlSW50ZXJjZXB0TG9nKSB7XG4gICAgICAgICAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLnJvdW5kKChwb2ludHMubGVuZ3RoIC8gMikpO1xuICAgICAgICAgICAgdmFyIHB0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHgxTG9nID0geFZhbHVlc1swXSAtIHRyZW5kbGluZS5iYWNrd2FyZEZvcmVjYXN0O1xuICAgICAgICAgICAgdmFyIHkxTG9nID0gc2xvcGVJbnRlcmNlcHRMb2cuaW50ZXJjZXB0ICsgKHNsb3BlSW50ZXJjZXB0TG9nLnNsb3BlICogTWF0aC5sb2coeDFMb2cpKTtcbiAgICAgICAgICAgIHZhciB4MkxvZyA9IHhWYWx1ZXNbbWlkUG9pbnQgLSAxXTtcbiAgICAgICAgICAgIHZhciB5MkxvZyA9IHNsb3BlSW50ZXJjZXB0TG9nLmludGVyY2VwdCArIChzbG9wZUludGVyY2VwdExvZy5zbG9wZSAqIE1hdGgubG9nKHgyTG9nKSk7XG4gICAgICAgICAgICB2YXIgeDNMb2cgPSB4VmFsdWVzW3hWYWx1ZXMubGVuZ3RoIC0gMV0gKyB0cmVuZGxpbmUuZm9yd2FyZEZvcmVjYXN0O1xuICAgICAgICAgICAgdmFyIHkzTG9nID0gc2xvcGVJbnRlcmNlcHRMb2cuaW50ZXJjZXB0ICsgKHNsb3BlSW50ZXJjZXB0TG9nLnNsb3BlICogTWF0aC5sb2coeDNMb2cpKTtcbiAgICAgICAgICAgIHB0cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHgxTG9nLCB5MUxvZywgcG9pbnRzWzBdLCBzZXJpZXMsIHB0cy5sZW5ndGgpKTtcbiAgICAgICAgICAgIHB0cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHgyTG9nLCB5MkxvZywgcG9pbnRzW21pZFBvaW50IC0gMV0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgcHRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeDNMb2csIHkzTG9nLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdLCBzZXJpZXMsIHB0cy5sZW5ndGgpKTtcbiAgICAgICAgICAgIHJldHVybiBwdHM7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmdldFBvd2VyUG9pbnRzID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgcG9pbnRzLCB4VmFsdWVzLCB5VmFsdWVzLCBzZXJpZXMsIHNsb3BlSW50ZXJjZXB0UG93ZXIpIHtcbiAgICAgICAgICAgIHZhciBtaWRQb2ludCA9IE1hdGgucm91bmQoKHBvaW50cy5sZW5ndGggLyAyKSk7XG4gICAgICAgICAgICB2YXIgcHRzID0gW107XG4gICAgICAgICAgICB2YXIgeDEgPSB4VmFsdWVzWzBdIC0gdHJlbmRsaW5lLmJhY2t3YXJkRm9yZWNhc3Q7XG4gICAgICAgICAgICB4MSA9IHgxID4gLTEgPyB4MSA6IDA7XG4gICAgICAgICAgICB2YXIgeTEgPSBzbG9wZUludGVyY2VwdFBvd2VyLmludGVyY2VwdCAqIE1hdGgucG93KHgxLCBzbG9wZUludGVyY2VwdFBvd2VyLnNsb3BlKTtcbiAgICAgICAgICAgIHZhciB4MiA9IHhWYWx1ZXNbbWlkUG9pbnQgLSAxXTtcbiAgICAgICAgICAgIHZhciB5MiA9IHNsb3BlSW50ZXJjZXB0UG93ZXIuaW50ZXJjZXB0ICogTWF0aC5wb3coeDIsIHNsb3BlSW50ZXJjZXB0UG93ZXIuc2xvcGUpO1xuICAgICAgICAgICAgdmFyIHgzID0geFZhbHVlc1t4VmFsdWVzLmxlbmd0aCAtIDFdICsgdHJlbmRsaW5lLmZvcndhcmRGb3JlY2FzdDtcbiAgICAgICAgICAgIHZhciB5MyA9IHNsb3BlSW50ZXJjZXB0UG93ZXIuaW50ZXJjZXB0ICogTWF0aC5wb3coeDMsIHNsb3BlSW50ZXJjZXB0UG93ZXIuc2xvcGUpO1xuICAgICAgICAgICAgcHRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeDEsIHkxLCBwb2ludHNbMF0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgcHRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeDIsIHkyLCBwb2ludHNbbWlkUG9pbnQgLSAxXSwgc2VyaWVzLCBwdHMubGVuZ3RoKSk7XG4gICAgICAgICAgICBwdHMucHVzaCh0aGlzLmdldERhdGFQb2ludCh4MywgeTMsIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgcmV0dXJuIHB0cztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0UG9seW5vbWlhbFBvaW50cyA9IGZ1bmN0aW9uICh0cmVuZGxpbmUsIHBvaW50cywgeFZhbHVlcywgeVZhbHVlcywgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLnJvdW5kKChwb2ludHMubGVuZ3RoIC8gMikpO1xuICAgICAgICAgICAgdmFyIHB0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHBvbHlub21pYWxPcmRlciA9IHBvaW50cy5sZW5ndGggPD0gdHJlbmRsaW5lLnBvbHlub21pYWxPcmRlciA/IHBvaW50cy5sZW5ndGggOiB0cmVuZGxpbmUucG9seW5vbWlhbE9yZGVyO1xuICAgICAgICAgICAgcG9seW5vbWlhbE9yZGVyID0gTWF0aC5tYXgoMiwgcG9seW5vbWlhbE9yZGVyKTtcbiAgICAgICAgICAgIHBvbHlub21pYWxPcmRlciA9IE1hdGgubWluKDYsIHBvbHlub21pYWxPcmRlcik7XG4gICAgICAgICAgICB0cmVuZGxpbmUucG9seW5vbWlhbE9yZGVyID0gcG9seW5vbWlhbE9yZGVyO1xuICAgICAgICAgICAgdHJlbmRsaW5lLnBvbHlub21pYWxTbG9wZXMgPSBbXTtcbiAgICAgICAgICAgIHRyZW5kbGluZS5wb2x5bm9taWFsU2xvcGVzLmxlbmd0aCA9IHRyZW5kbGluZS5wb2x5bm9taWFsT3JkZXIgKyAxO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IHhWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHhWYWwgPSB4VmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgeVZhbCA9IHlWYWx1ZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciBzdWJJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN1YkluZGV4IDw9IHRyZW5kbGluZS5wb2x5bm9taWFsT3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmVuZGxpbmUucG9seW5vbWlhbFNsb3Blc1tzdWJJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyZW5kbGluZS5wb2x5bm9taWFsU2xvcGVzW3N1YkluZGV4XSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJlbmRsaW5lLnBvbHlub21pYWxTbG9wZXNbc3ViSW5kZXhdICs9IE1hdGgucG93KHhWYWwsIHN1YkluZGV4KSAqIHlWYWw7XG4gICAgICAgICAgICAgICAgICAgICsrc3ViSW5kZXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbnVtQXJyYXkgPSBbXTtcbiAgICAgICAgICAgIG51bUFycmF5Lmxlbmd0aCA9IDEgKyAyICogdHJlbmRsaW5lLnBvbHlub21pYWxPcmRlcjtcbiAgICAgICAgICAgIHZhciBtYXRyaXggPSBbXTtcbiAgICAgICAgICAgIG1hdHJpeC5sZW5ndGggPSB0cmVuZGxpbmUucG9seW5vbWlhbE9yZGVyICsgMTtcbiAgICAgICAgICAgIHZhciBuZXdJbmRleCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAobmV3SW5kZXggPCAodHJlbmRsaW5lLnBvbHlub21pYWxPcmRlciArIDEpKSB7XG4gICAgICAgICAgICAgICAgbWF0cml4W25ld0luZGV4XSA9IFtdO1xuICAgICAgICAgICAgICAgIG1hdHJpeFtuZXdJbmRleF0ubGVuZ3RoID0gMztcbiAgICAgICAgICAgICAgICBuZXdJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5JbmRleCA9IDA7XG4gICAgICAgICAgICB2YXIgbnVtMSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAobkluZGV4IDwgeFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHhWYWx1ZXNbbkluZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgbnVtMiA9IDEuMDtcbiAgICAgICAgICAgICAgICB2YXIgbkluZGV4MiA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5JbmRleDIgPCBudW1BcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFudW1BcnJheVtuSW5kZXgyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVtQXJyYXlbbkluZGV4Ml0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG51bUFycmF5W25JbmRleDJdICs9IG51bTI7XG4gICAgICAgICAgICAgICAgICAgIG51bTIgKj0gZDtcbiAgICAgICAgICAgICAgICAgICAgKytudW0xO1xuICAgICAgICAgICAgICAgICAgICArK25JbmRleDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsrbkluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5uSW5kZXggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKG5uSW5kZXggPD0gdHJlbmRsaW5lLnBvbHlub21pYWxPcmRlcikge1xuICAgICAgICAgICAgICAgIHZhciBubkluZGV4MiA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5uSW5kZXgyIDw9IHRyZW5kbGluZS5wb2x5bm9taWFsT3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4W25uSW5kZXhdW25uSW5kZXgyXSA9IG51bUFycmF5W25uSW5kZXggKyBubkluZGV4Ml07XG4gICAgICAgICAgICAgICAgICAgICsrbm5JbmRleDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsrbm5JbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5nYXVzc0pvcmRhbkVsaW1pbmF0aW9uKG1hdHJpeCwgdHJlbmRsaW5lLnBvbHlub21pYWxTbG9wZXMpKSB7XG4gICAgICAgICAgICAgICAgdHJlbmRsaW5lLnBvbHlub21pYWxTbG9wZXMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHRzID0gdGhpcy5nZXRQb2ludHModHJlbmRsaW5lLCBwb2ludHMsIHhWYWx1ZXMsIHlWYWx1ZXMsIHNlcmllcyk7XG4gICAgICAgICAgICByZXR1cm4gcHRzO1xuICAgICAgICB9O1xuICAgICAgICBUcmVuZGxpbmVzLnByb3RvdHlwZS5nZXRNb3ZpbmdBdmVyYWdlUG9pbnRzID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgcG9pbnRzLCB4VmFsdWVzLCB5VmFsdWVzLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBwdHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBwZXJpb2QgPSB0cmVuZGxpbmUucGVyaW9kID49IHBvaW50cy5sZW5ndGggPyBwb2ludHMubGVuZ3RoIC0gMSA6IHRyZW5kbGluZS5wZXJpb2Q7XG4gICAgICAgICAgICBwZXJpb2QgPSBNYXRoLm1heCgyLCBwZXJpb2QpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciB5O1xuICAgICAgICAgICAgdmFyIHg7XG4gICAgICAgICAgICB2YXIgY291bnQ7XG4gICAgICAgICAgICB2YXIgbnVsbENvdW50O1xuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgcG9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB5ID0gY291bnQgPSBudWxsQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpbmRleDsgY291bnQgPCBwZXJpb2Q7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXlWYWx1ZXNbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHkgKz0geVZhbHVlc1tqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeSA9IHBlcmlvZCAtIG51bGxDb3VudCA8PSAwID8gbnVsbCA6IHkgLyAocGVyaW9kIC0gbnVsbENvdW50KTtcbiAgICAgICAgICAgICAgICBpZiAoeSAmJiAhaXNOYU4oeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeCA9IHhWYWx1ZXNbcGVyaW9kIC0gMSArIGluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgcHRzLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeCwgeSwgcG9pbnRzW3BlcmlvZCAtIDEgKyBpbmRleF0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB0cztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0TGluZWFyUG9pbnRzID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgcG9pbnRzLCB4VmFsdWVzLCB5VmFsdWVzLCBzZXJpZXMsIHNsb3BlSW50ZXJjZXB0TGluZWFyKSB7XG4gICAgICAgICAgICB2YXIgcHRzID0gW107XG4gICAgICAgICAgICB2YXIgeDFMaW5lYXIgPSB4VmFsdWVzWzBdIC0gdHJlbmRsaW5lLmJhY2t3YXJkRm9yZWNhc3Q7XG4gICAgICAgICAgICB2YXIgeTFMaW5lYXIgPSBzbG9wZUludGVyY2VwdExpbmVhci5zbG9wZSAqIHgxTGluZWFyICsgc2xvcGVJbnRlcmNlcHRMaW5lYXIuaW50ZXJjZXB0O1xuICAgICAgICAgICAgdmFyIHgyTGluZWFyID0geFZhbHVlc1t4VmFsdWVzLmxlbmd0aCAtIDFdICsgdHJlbmRsaW5lLmZvcndhcmRGb3JlY2FzdDtcbiAgICAgICAgICAgIHZhciB5MkxpbmVhciA9IHNsb3BlSW50ZXJjZXB0TGluZWFyLnNsb3BlICogeDJMaW5lYXIgKyBzbG9wZUludGVyY2VwdExpbmVhci5pbnRlcmNlcHQ7XG4gICAgICAgICAgICBwdHMucHVzaCh0aGlzLmdldERhdGFQb2ludCh4MUxpbmVhciwgeTFMaW5lYXIsIHBvaW50c1swXSwgc2VyaWVzLCBwdHMubGVuZ3RoKSk7XG4gICAgICAgICAgICBwdHMucHVzaCh0aGlzLmdldERhdGFQb2ludCh4MkxpbmVhciwgeTJMaW5lYXIsIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgcmV0dXJuIHB0cztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0RXhwb25lbnRpYWxQb2ludHMgPSBmdW5jdGlvbiAodHJlbmRsaW5lLCBwb2ludHMsIHhWYWx1ZXMsIHlWYWx1ZXMsIHNlcmllcywgc2xvcGVJbnRlcmNlcHRFeHApIHtcbiAgICAgICAgICAgIHZhciBtaWRQb2ludCA9IE1hdGgucm91bmQoKHBvaW50cy5sZW5ndGggLyAyKSk7XG4gICAgICAgICAgICB2YXIgcHRzRXhwID0gW107XG4gICAgICAgICAgICB2YXIgeDEgPSB4VmFsdWVzWzBdIC0gdHJlbmRsaW5lLmJhY2t3YXJkRm9yZWNhc3Q7XG4gICAgICAgICAgICB2YXIgeTEgPSBzbG9wZUludGVyY2VwdEV4cC5pbnRlcmNlcHQgKiBNYXRoLmV4cChzbG9wZUludGVyY2VwdEV4cC5zbG9wZSAqIHgxKTtcbiAgICAgICAgICAgIHZhciB4MiA9IHhWYWx1ZXNbbWlkUG9pbnQgLSAxXTtcbiAgICAgICAgICAgIHZhciB5MiA9IHNsb3BlSW50ZXJjZXB0RXhwLmludGVyY2VwdCAqIE1hdGguZXhwKHNsb3BlSW50ZXJjZXB0RXhwLnNsb3BlICogeDIpO1xuICAgICAgICAgICAgdmFyIHgzID0geFZhbHVlc1t4VmFsdWVzLmxlbmd0aCAtIDFdICsgdHJlbmRsaW5lLmZvcndhcmRGb3JlY2FzdDtcbiAgICAgICAgICAgIHZhciB5MyA9IHNsb3BlSW50ZXJjZXB0RXhwLmludGVyY2VwdCAqIE1hdGguZXhwKHNsb3BlSW50ZXJjZXB0RXhwLnNsb3BlICogeDMpO1xuICAgICAgICAgICAgcHRzRXhwLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeDEsIHkxLCBwb2ludHNbMF0sIHNlcmllcywgcHRzRXhwLmxlbmd0aCkpO1xuICAgICAgICAgICAgcHRzRXhwLnB1c2godGhpcy5nZXREYXRhUG9pbnQoeDIsIHkyLCBwb2ludHNbbWlkUG9pbnQgLSAxXSwgc2VyaWVzLCBwdHNFeHAubGVuZ3RoKSk7XG4gICAgICAgICAgICBwdHNFeHAucHVzaCh0aGlzLmdldERhdGFQb2ludCh4MywgeTMsIHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0sIHNlcmllcywgcHRzRXhwLmxlbmd0aCkpO1xuICAgICAgICAgICAgcmV0dXJuIHB0c0V4cDtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0UG9pbnRzID0gZnVuY3Rpb24gKHRyZW5kbGluZSwgcG9pbnRzLCB4VmFsdWVzLCB5VmFsdWVzLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBtaWRQb2ludCA9IE1hdGgucm91bmQoKHBvaW50cy5sZW5ndGggLyAyKSk7XG4gICAgICAgICAgICB2YXIgcG9seW5vbWlhbFNsb3BlcyA9IHRyZW5kbGluZS5wb2x5bm9taWFsU2xvcGVzO1xuICAgICAgICAgICAgdmFyIHB0cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHgxID0gMTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDE7XG4gICAgICAgICAgICB2YXIgeFZhbHVlO1xuICAgICAgICAgICAgdmFyIHlWYWx1ZTtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8PSBwb2x5bm9taWFsU2xvcGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB4VmFsdWUgPSB4VmFsdWVzWzBdIC0gdHJlbmRsaW5lLmJhY2t3YXJkRm9yZWNhc3Q7XG4gICAgICAgICAgICAgICAgICAgIHlWYWx1ZSA9IHRoaXMuZ2V0UG9seW5vbWlhbFlWYWx1ZShwb2x5bm9taWFsU2xvcGVzLCB4VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwdHMucHVzaCh0aGlzLmdldERhdGFQb2ludCh4VmFsdWUsIHlWYWx1ZSwgcG9pbnRzWzBdLCBzZXJpZXMsIHB0cy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IHBvbHlub21pYWxTbG9wZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9IHhWYWx1ZXNbcG9pbnRzLmxlbmd0aCAtIDFdICsgdHJlbmRsaW5lLmZvcndhcmRGb3JlY2FzdDtcbiAgICAgICAgICAgICAgICAgICAgeVZhbHVlID0gdGhpcy5nZXRQb2x5bm9taWFsWVZhbHVlKHBvbHlub21pYWxTbG9wZXMsIHhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHB0cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHhWYWx1ZSwgeVZhbHVlLCBwb2ludHNbcG9pbnRzLmxlbmd0aCAtIDFdLCBzZXJpZXMsIHB0cy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHgxICs9IChwb2ludHMubGVuZ3RoICsgdHJlbmRsaW5lLmZvcndhcmRGb3JlY2FzdCkgLyBwb2x5bm9taWFsU2xvcGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgeFZhbHVlID0geFZhbHVlc1twYXJzZUludCh4MS50b1N0cmluZygpLCAxMCkgLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgeVZhbHVlID0gdGhpcy5nZXRQb2x5bm9taWFsWVZhbHVlKHBvbHlub21pYWxTbG9wZXMsIHhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHB0cy5wdXNoKHRoaXMuZ2V0RGF0YVBvaW50KHhWYWx1ZSwgeVZhbHVlLCBwb2ludHNbcGFyc2VJbnQoeDEudG9TdHJpbmcoKSwgMTApIC0gMV0sIHNlcmllcywgcHRzLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHB0cztcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0UG9seW5vbWlhbFlWYWx1ZSA9IGZ1bmN0aW9uIChzbG9wZXMsIHgpIHtcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IHNsb3Blcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gc2xvcGVzW2luZGV4XSAqIE1hdGgucG93KHgsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2F1c3NKb3JkYW5FbGltaW5hdGlvbiA9IGZ1bmN0aW9uIChtYXRyaXgsIHBvbHlub21pYWxTbG9wZXMpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBtYXRyaXgubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIG51bUFycmF5MSA9IFtdO1xuICAgICAgICAgICAgdmFyIG51bUFycmF5MiA9IFtdO1xuICAgICAgICAgICAgdmFyIG51bUFycmF5MyA9IFtdO1xuICAgICAgICAgICAgbnVtQXJyYXkxLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgICAgIG51bUFycmF5Mi5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgICAgICBudW1BcnJheTMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG51bUFycmF5M1tpbmRleF0gPSAwO1xuICAgICAgICAgICAgICAgICsraW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5kZXgxID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpbmRleDEgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtMSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4MiA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4MyA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4NCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4NCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtQXJyYXkzW2luZGV4NF0gIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleDUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGluZGV4NSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1BcnJheTNbaW5kZXg1XSA9PT0gMCAmJiBNYXRoLmFicyhtYXRyaXhbaW5kZXg0XVtpbmRleDVdKSA+PSBudW0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bTEgPSBNYXRoLmFicyhtYXRyaXhbaW5kZXg0XVtpbmRleDVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgyID0gaW5kZXg0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDMgPSBpbmRleDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsraW5kZXg1O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsraW5kZXg0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICArK251bUFycmF5M1tpbmRleDNdO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleDIgIT09IGluZGV4Mykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXg0XzEgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXg0XzEgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0yID0gbWF0cml4W2luZGV4Ml1baW5kZXg0XzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W2luZGV4Ml1baW5kZXg0XzFdID0gbWF0cml4W2luZGV4M11baW5kZXg0XzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W2luZGV4M11baW5kZXg0XzFdID0gbnVtMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICsraW5kZXg0XzE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG51bTMgPSBwb2x5bm9taWFsU2xvcGVzW2luZGV4Ml07XG4gICAgICAgICAgICAgICAgICAgIHBvbHlub21pYWxTbG9wZXNbaW5kZXgyXSA9IHBvbHlub21pYWxTbG9wZXNbaW5kZXgzXTtcbiAgICAgICAgICAgICAgICAgICAgcG9seW5vbWlhbFNsb3Blc1tpbmRleDNdID0gbnVtMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbnVtQXJyYXkyW2luZGV4MV0gPSBpbmRleDI7XG4gICAgICAgICAgICAgICAgbnVtQXJyYXkxW2luZGV4MV0gPSBpbmRleDM7XG4gICAgICAgICAgICAgICAgaWYgKG1hdHJpeFtpbmRleDNdW2luZGV4M10gPT09IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBudW00ID0gMS4wIC8gbWF0cml4W2luZGV4M11baW5kZXgzXTtcbiAgICAgICAgICAgICAgICBtYXRyaXhbaW5kZXgzXVtpbmRleDNdID0gMS4wO1xuICAgICAgICAgICAgICAgIHZhciBpaW5kZXg0ID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaWluZGV4NCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXhbaW5kZXgzXVtpaW5kZXg0XSAqPSBudW00O1xuICAgICAgICAgICAgICAgICAgICArK2lpbmRleDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvbHlub21pYWxTbG9wZXNbaW5kZXgzXSAqPSBudW00O1xuICAgICAgICAgICAgICAgIHZhciBpYW5kZXg0ID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaWFuZGV4NCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWFuZGV4NCAhPT0gaW5kZXgzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtMiA9IG1hdHJpeFtpYW5kZXg0XVtpbmRleDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W2lhbmRleDRdW2luZGV4M10gPSAwLjA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXg1ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleDUgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbaWFuZGV4NF1baW5kZXg1XSAtPSBtYXRyaXhbaW5kZXgzXVtpbmRleDVdICogbnVtMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2luZGV4NTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlub21pYWxTbG9wZXNbaWFuZGV4NF0gLT0gcG9seW5vbWlhbFNsb3Blc1tpbmRleDNdICogbnVtMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICArK2lhbmRleDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsraW5kZXgxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlpbmRleDEgPSBsZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGlpbmRleDEgPj0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChudW1BcnJheTJbaWluZGV4MV0gIT09IG51bUFycmF5MVtpaW5kZXgxXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWluZGV4MiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpaW5kZXgyIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gbWF0cml4W2lpbmRleDJdW251bUFycmF5MltpaW5kZXgxXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbaWluZGV4Ml1bbnVtQXJyYXkyW2lpbmRleDFdXSA9IG1hdHJpeFtpaW5kZXgyXVtudW1BcnJheTFbaWluZGV4MV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4W2lpbmRleDJdW251bUFycmF5MVtpaW5kZXgxXV0gPSBudW07XG4gICAgICAgICAgICAgICAgICAgICAgICArK2lpbmRleDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLS1paW5kZXgxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmdldFRyZW5kTGluZUVsZW1lbnRzID0gZnVuY3Rpb24gKHNlcmllcywgY2hhcnQpIHtcbiAgICAgICAgICAgIGhlbHBlcl8xLmZpbmRDbGlwUmVjdChzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIGNsaXBSZWN0ID0gc2VyaWVzLmNsaXBSZWN0O1xuICAgICAgICAgICAgdmFyIGNsaXBSZWN0RWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmRyYXdDbGlwUGF0aChuZXcgaGVscGVyXzEuUmVjdE9wdGlvbihjaGFydC5lbGVtZW50LmlkICsgJ19DaGFydFRyZW5kbGluZUNsaXBSZWN0XycgKyBzZXJpZXMuaW5kZXgsICd0cmFuc3BhcmVudCcsIHsgd2lkdGg6IDEsIGNvbG9yOiAnR3JheScgfSwgMSwge1xuICAgICAgICAgICAgICAgIHg6IDAsIHk6IDAsIHdpZHRoOiBjbGlwUmVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNsaXBSZWN0LmhlaWdodCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgZWxlbWVudCA9IGNoYXJ0LnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHtcbiAgICAgICAgICAgICAgICAnaWQnOiBjaGFydC5lbGVtZW50LmlkICsgJ1RyZW5kbGluZVNlcmllc0dyb3VwJyArIHNlcmllcy5pbmRleCxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgnICsgY2xpcFJlY3QueCArICcsJyArIGNsaXBSZWN0LnkgKyAnKScsXG4gICAgICAgICAgICAgICAgJ2NsaXAtcGF0aCc6ICd1cmwoIycgKyBjaGFydC5lbGVtZW50LmlkICsgJ19DaGFydFRyZW5kbGluZUNsaXBSZWN0XycgKyBzZXJpZXMuaW5kZXggKyAnKSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjbGlwUmVjdEVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy50cmVuZGxpbmVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciB0cmVuZGxpbmUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUcmVuZExpbmVFbGVtZW50cyhjaGFydCwgdHJlbmRsaW5lLCB0cmVuZGxpbmUuaW5kZXgsIGVsZW1lbnQsIGNsaXBSZWN0RWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRyZW5kbGluZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgVHJlbmRsaW5lcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnVHJlbmRMaW5lJztcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRyZW5kbGluZXM7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlRyZW5kbGluZXMgPSBUcmVuZGxpbmVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC90cmVuZC1saW5lcy90cmVuZC1saW5lLmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBoZWxwZXJfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ3Jvc3NoYWlyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQ3Jvc3NoYWlyKGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmFycm93TG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigwLCAwKTtcbiAgICAgICAgICAgIHRoaXMucnggPSAyO1xuICAgICAgICAgICAgdGhpcy5yeSA9IDI7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRJRCA9IHRoaXMuY2hhcnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIENyb3NzaGFpci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbmNlbEV2ZW50ID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzUG9pbnRlciA/ICdwb2ludGVybGVhdmUnIDogJ21vdXNlbGVhdmUnO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oY2FuY2VsRXZlbnQsIHRoaXMubW91c2VMZWF2ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbigndGFwSG9sZCcsIHRoaXMubG9uZ1ByZXNzLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQ3Jvc3NoYWlyLnByb3RvdHlwZS5tb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LnN0YXJ0TW92ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ3Jvc3NoYWlyKDIwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLm1vdXNlTGVhdmVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDcm9zc2hhaXIoMTAwMCk7XG4gICAgICAgIH07XG4gICAgICAgIENyb3NzaGFpci5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2htb3ZlJyAmJiAoZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zIHx8IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvczcpICYmIGNoYXJ0LnN0YXJ0TW92ZSAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNoYXJ0LmRpc2FibGVUcmFja1Rvb2x0aXApIHtcbiAgICAgICAgICAgICAgICBpZiAoaGVscGVyXzEud2l0aEluQm91bmRzKGNoYXJ0Lm1vdXNlWCwgY2hhcnQubW91c2VZLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0LnN0YXJ0TW92ZSB8fCAhY2hhcnQuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcm9zc2hhaXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVDcm9zc2hhaXIoMTAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLmxvbmdQcmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICBpZiAoaGVscGVyXzEud2l0aEluQm91bmRzKGNoYXJ0Lm1vdXNlWCwgY2hhcnQubW91c2VZLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyb3NzaGFpcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLmNyb3NzaGFpciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICB2YXIgaG9yaXpvbnRhbENyb3NzID0gJyc7XG4gICAgICAgICAgICB2YXIgdmVydGljYWxDcm9zcyA9ICcnO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICAgICAgICB2YXIgY3Jvc3NoYWlyID0gY2hhcnQuY3Jvc3NoYWlyO1xuICAgICAgICAgICAgdmFyIGNoYXJ0UmVjdCA9IGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0O1xuICAgICAgICAgICAgdmFyIGNyb3NzR3JvdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnRJRCArICdfVXNlckludGVyYWN0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLmVuYWJsZSAmJiAhaGVscGVyXzEud2l0aEluQm91bmRzKGNoYXJ0LnRvb2x0aXBNb2R1bGUudmFsdWVYLCBjaGFydC50b29sdGlwTW9kdWxlLnZhbHVlWSwgY2hhcnRSZWN0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWx1ZVggPSBjaGFydC50b29sdGlwLmVuYWJsZSA/IGNoYXJ0LnRvb2x0aXBNb2R1bGUudmFsdWVYIDogY2hhcnQubW91c2VYO1xuICAgICAgICAgICAgdGhpcy52YWx1ZVkgPSBjaGFydC50b29sdGlwLmVuYWJsZSA/IGNoYXJ0LnRvb2x0aXBNb2R1bGUudmFsdWVZIDogY2hhcnQubW91c2VZO1xuICAgICAgICAgICAgY3Jvc3NHcm91cC5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCAnMScpO1xuICAgICAgICAgICAgaWYgKGNyb3NzaGFpci5saW5lVHlwZSA9PT0gJ0JvdGgnIHx8IGNyb3NzaGFpci5saW5lVHlwZSA9PT0gJ0hvcml6b250YWwnKSB7XG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbENyb3NzICs9ICdNICcgKyBjaGFydFJlY3QueCArICcgJyArIHRoaXMudmFsdWVZICtcbiAgICAgICAgICAgICAgICAgICAgJyBMICcgKyAoY2hhcnRSZWN0LnggKyBjaGFydFJlY3Qud2lkdGgpICsgJyAnICsgdGhpcy52YWx1ZVk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3Jvc3NoYWlyLmxpbmVUeXBlID09PSAnQm90aCcgfHwgY3Jvc3NoYWlyLmxpbmVUeXBlID09PSAnVmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgdmVydGljYWxDcm9zcyArPSAnTSAnICsgdGhpcy52YWx1ZVggKyAnICcgKyBjaGFydFJlY3QueSArXG4gICAgICAgICAgICAgICAgICAgICcgTCAnICsgdGhpcy52YWx1ZVggKyAnICcgKyAoY2hhcnRSZWN0LnkgKyBjaGFydFJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjcm9zc0dyb3VwLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF4aXNUb29sdGlwR3JvdXAgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7ICdpZCc6IHRoaXMuZWxlbWVudElEICsgJ19jcm9zc2hhaXJfYXhpcycgfSk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHRoaXMuZWxlbWVudElEICsgJ19Ib3Jpem9udGFsTGluZScsICdub25lJywgY3Jvc3NoYWlyLmxpbmUud2lkdGgsIGNyb3NzaGFpci5saW5lLmNvbG9yLCAxLCBudWxsLCBob3Jpem9udGFsQ3Jvc3MpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ3Jvc3NoYWlyTGluZShvcHRpb25zLCBjcm9zc0dyb3VwKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmQgPSB2ZXJ0aWNhbENyb3NzO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuaWQgPSB0aGlzLmVsZW1lbnRJRCArICdfVmVydGljYWxMaW5lJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNyb3NzaGFpckxpbmUob3B0aW9ucywgY3Jvc3NHcm91cCk7XG4gICAgICAgICAgICAgICAgY3Jvc3NHcm91cC5hcHBlbmRDaGlsZChheGlzVG9vbHRpcEdyb3VwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckF4aXNUb29sdGlwKGNoYXJ0LCBjaGFydFJlY3QsIGNyb3NzR3JvdXAubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElEICsgJ19Ib3Jpem9udGFsTGluZScpLnNldEF0dHJpYnV0ZSgnZCcsIGhvcml6b250YWxDcm9zcyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5lbGVtZW50SUQgKyAnX1ZlcnRpY2FsTGluZScpLnNldEF0dHJpYnV0ZSgnZCcsIHZlcnRpY2FsQ3Jvc3MpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQXhpc1Rvb2x0aXAoY2hhcnQsIGNoYXJ0UmVjdCwgY3Jvc3NHcm91cC5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLnJlbmRlckNyb3NzaGFpckxpbmUgPSBmdW5jdGlvbiAob3B0aW9ucywgY3Jvc3NHcm91cCkge1xuICAgICAgICAgICAgdmFyIGh0bWxPYmplY3QgPSB0aGlzLmNoYXJ0LnJlbmRlcmVyLmRyYXdQYXRoKG9wdGlvbnMpO1xuICAgICAgICAgICAgY3Jvc3NHcm91cC5hcHBlbmRDaGlsZChodG1sT2JqZWN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgQ3Jvc3NoYWlyLnByb3RvdHlwZS5yZW5kZXJBeGlzVG9vbHRpcCA9IGZ1bmN0aW9uIChjaGFydCwgY2hhcnRSZWN0LCBheGlzR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBheGlzO1xuICAgICAgICAgICAgdmFyIHRleHQ7XG4gICAgICAgICAgICB2YXIgcmVjdDtcbiAgICAgICAgICAgIHZhciBwYXRoRWxlbWVudDtcbiAgICAgICAgICAgIHZhciB0ZXh0RWxlbTtcbiAgICAgICAgICAgIHZhciBvcHRpb25zO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBsZW5ndGhfMSA9IGNoYXJ0LmF4aXNDb2xsZWN0aW9ucy5sZW5ndGg7IGsgPCBsZW5ndGhfMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgYXhpcyA9IGNoYXJ0LmF4aXNDb2xsZWN0aW9uc1trXTtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5jcm9zc2hhaXJUb29sdGlwLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMudmFsdWVYIDw9IChheGlzLnJlY3QueCArIGF4aXMucmVjdC53aWR0aCkgJiYgYXhpcy5yZWN0LnggPD0gdGhpcy52YWx1ZVgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy52YWx1ZVkgPD0gKGF4aXMucmVjdC55ICsgYXhpcy5yZWN0LmhlaWdodCkgJiYgYXhpcy5yZWN0LnkgPD0gdGhpcy52YWx1ZVkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElEICsgJ19heGlzX3Rvb2x0aXBfJyArIGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnRJRCArICdfYXhpc190b29sdGlwX3RleHRfJyArIGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMuZ2V0QXhpc1RleHQoYXhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QgPSB0aGlzLnRvb2x0aXBMb2NhdGlvbih0ZXh0LCBheGlzLCBjaGFydFJlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGhFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aEVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5kcmF3UGF0aCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuZWxlbWVudElEICsgJ19heGlzX3Rvb2x0aXBfJyArIGssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmaWxsJzogYXhpcy5jcm9zc2hhaXJUb29sdGlwLmZpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzR3JvdXAuYXBwZW5kQ2hpbGQocGF0aEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBuZXcgaGVscGVyXzEuVGV4dE9wdGlvbih0aGlzLmVsZW1lbnRJRCArICdfYXhpc190b29sdGlwX3RleHRfJyArIGssIDAsIDAsICdzdGFydCcsIHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRFbGVtID0gaGVscGVyXzEudGV4dEVsZW1lbnQob3B0aW9ucywgYXhpcy5jcm9zc2hhaXJUb29sdGlwLnRleHRTdHlsZSwgYXhpcy5jcm9zc2hhaXJUb29sdGlwLnRleHRTdHlsZS5jb2xvciwgYXhpc0dyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGhlbHBlcl8xLmZpbmREaXJlY3Rpb24odGhpcy5yeCwgdGhpcy5yeSwgcmVjdCwgdGhpcy5hcnJvd0xvY2F0aW9uLCAxMCwgdGhpcy5pc1RvcCwgdGhpcy5pc0JvdHRvbSwgdGhpcy5pc0xlZnQsIHRoaXMudmFsdWVYLCB0aGlzLnZhbHVlWSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2QnLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW0udGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW0uc2V0QXR0cmlidXRlKCd4JywgKHJlY3QueCArIHBhZGRpbmcpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dEVsZW0uc2V0QXR0cmlidXRlKCd5JywgKHJlY3QueSArIHBhZGRpbmcgKyAzICogdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQgLyA0KS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8xLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50SUQgKyAnX2F4aXNfdG9vbHRpcF8nICsgayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMS5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudElEICsgJ19heGlzX3Rvb2x0aXBfdGV4dF8nICsgayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIENyb3NzaGFpci5wcm90b3R5cGUuZ2V0QXhpc1RleHQgPSBmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5pc0JvdHRvbSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc0xlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGxhYmVsVmFsdWUgPSAoYXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScgJiYgYXhpcy5sYWJlbFBsYWNlbWVudCA9PT0gJ0JldHdlZW5UaWNrcycpXG4gICAgICAgICAgICAgICAgPyAwLjUgOiAwO1xuICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gaGVscGVyXzEuZ2V0VmFsdWVYQnlQb2ludChNYXRoLmFicyh0aGlzLnZhbHVlWCAtIGF4aXMucmVjdC54KSwgYXhpcy5yZWN0LndpZHRoLCBheGlzKSArIGxhYmVsVmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0JvdHRvbSA9ICFheGlzLm9wcG9zZWRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG9wID0gYXhpcy5vcHBvc2VkUG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGhlbHBlcl8xLmdldFZhbHVlWUJ5UG9pbnQoTWF0aC5hYnModGhpcy52YWx1ZVkgLSBheGlzLnJlY3QueSksIGF4aXMucmVjdC5oZWlnaHQsIGF4aXMpICsgbGFiZWxWYWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUmlnaHQgPSBheGlzLm9wcG9zZWRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTGVmdCA9ICFheGlzLm9wcG9zZWRQb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChheGlzLnZhbHVlVHlwZSA9PT0gJ0RhdGVUaW1lJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlzLmZvcm1hdChuZXcgRGF0ZSh2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXhpcy52YWx1ZVR5cGUgPT09ICdDYXRlZ29yeScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpcy5sYWJlbHNbTWF0aC5mbG9vcih2YWx1ZSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYXhpcy52YWx1ZVR5cGUgPT09ICdMb2dhcml0aG1pYycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPSBheGlzLmZvcm1hdChNYXRoLnBvdyhheGlzLmxvZ0Jhc2UsIHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VzdG9tTGFiZWxGb3JtYXQgPSBheGlzLmxhYmVsRm9ybWF0ICYmIGF4aXMubGFiZWxGb3JtYXQubWF0Y2goJ3t2YWx1ZX0nKSAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tTGFiZWxGb3JtYXQgPyBheGlzLmxhYmVsRm9ybWF0LnJlcGxhY2UoJ3t2YWx1ZX0nLCBheGlzLmZvcm1hdCh2YWx1ZSkpIDogYXhpcy5mb3JtYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLnRvb2x0aXBMb2NhdGlvbiA9IGZ1bmN0aW9uICh0ZXh0LCBheGlzLCBib3VuZHMpIHtcbiAgICAgICAgICAgIHZhciBpc0JvdHRvbSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGlzTGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgdmFyIGFycm93UGFkZGluZyA9IDEwO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBSZWN0O1xuICAgICAgICAgICAgdmFyIGJvdW5kc1ggPSBib3VuZHMueDtcbiAgICAgICAgICAgIHZhciBib3VuZHNZID0gYm91bmRzLnk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQodGV4dCwgYXhpcy5jcm9zc2hhaXJUb29sdGlwLnRleHRTdHlsZSk7XG4gICAgICAgICAgICBpZiAoYXhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJvd0xvY2F0aW9uID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24odGhpcy52YWx1ZVgsIGF4aXMucmVjdC55KTtcbiAgICAgICAgICAgICAgICB0b29sdGlwUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KCh0aGlzLnZhbHVlWCAtICh0aGlzLmVsZW1lbnRTaXplLndpZHRoIC8gMikgLSBwYWRkaW5nKSwgYXhpcy5yZWN0LnkgKyBhcnJvd1BhZGRpbmcsIHRoaXMuZWxlbWVudFNpemUud2lkdGggKyBwYWRkaW5nICogMiwgdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQgKyBwYWRkaW5nICogMik7XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMub3Bwb3NlZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0LnkgPSBheGlzLnJlY3QueSAtICh0aGlzLmVsZW1lbnRTaXplLmhlaWdodCArIHBhZGRpbmcgKiAyICsgYXJyb3dQYWRkaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2x0aXBSZWN0LnggPCBib3VuZHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0LnggPSBib3VuZHNYO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG9vbHRpcFJlY3QueCArIHRvb2x0aXBSZWN0LndpZHRoID4gYm91bmRzWCArIGJvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwUmVjdC54IC09ICgodG9vbHRpcFJlY3QueCArIHRvb2x0aXBSZWN0LndpZHRoKSAtIChib3VuZHNYICsgYm91bmRzLndpZHRoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFycm93TG9jYXRpb24ueCArIGFycm93UGFkZGluZyAvIDIgPiB0b29sdGlwUmVjdC54ICsgdG9vbHRpcFJlY3Qud2lkdGggLSB0aGlzLnJ4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dMb2NhdGlvbi54ID0gdG9vbHRpcFJlY3QueCArIHRvb2x0aXBSZWN0LndpZHRoIC0gdGhpcy5yeCAtIGFycm93UGFkZGluZyAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFycm93TG9jYXRpb24ueCAtIGFycm93UGFkZGluZyAvIDIgPCB0b29sdGlwUmVjdC54ICsgdGhpcy5yeCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93TG9jYXRpb24ueCA9IHRvb2x0aXBSZWN0LnggKyB0aGlzLnJ4ICsgYXJyb3dQYWRkaW5nIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93TG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihheGlzLnJlY3QueCwgdGhpcy52YWx1ZVkpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3QoYXhpcy5yZWN0LnggLSAodGhpcy5lbGVtZW50U2l6ZS53aWR0aCkgLSAocGFkZGluZyAqIDIgKyBhcnJvd1BhZGRpbmcpLCB0aGlzLnZhbHVlWSAtICh0aGlzLmVsZW1lbnRTaXplLmhlaWdodCAvIDIpIC0gcGFkZGluZywgdGhpcy5lbGVtZW50U2l6ZS53aWR0aCArIChwYWRkaW5nICogMiksIHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0ICsgcGFkZGluZyAqIDIpO1xuICAgICAgICAgICAgICAgIGlmIChheGlzLm9wcG9zZWRQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwUmVjdC54ID0gYXhpcy5yZWN0LnggKyBhcnJvd1BhZGRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICgodG9vbHRpcFJlY3QueCArIHRvb2x0aXBSZWN0LndpZHRoKSA+IHRoaXMuY2hhcnQuYXZhaWxhYmxlU2l6ZS53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0xvY2F0aW9uLnggLT0gKCh0b29sdGlwUmVjdC54ICsgdG9vbHRpcFJlY3Qud2lkdGgpIC0gdGhpcy5jaGFydC5hdmFpbGFibGVTaXplLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0LnggLT0gKCh0b29sdGlwUmVjdC54ICsgdG9vbHRpcFJlY3Qud2lkdGgpIC0gdGhpcy5jaGFydC5hdmFpbGFibGVTaXplLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2x0aXBSZWN0LnggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFycm93TG9jYXRpb24ueCAtPSB0b29sdGlwUmVjdC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFJlY3QueCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvb2x0aXBSZWN0LnkgPCBib3VuZHNZKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0LnkgPSBib3VuZHNZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG9vbHRpcFJlY3QueSArIHRvb2x0aXBSZWN0LmhlaWdodCA+PSBib3VuZHNZICsgYm91bmRzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwUmVjdC55IC09ICgodG9vbHRpcFJlY3QueSArIHRvb2x0aXBSZWN0LmhlaWdodCkgLSAoYm91bmRzWSArIGJvdW5kcy5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXJyb3dMb2NhdGlvbi55ICsgYXJyb3dQYWRkaW5nIC8gMiA+IHRvb2x0aXBSZWN0LnkgKyB0b29sdGlwUmVjdC5oZWlnaHQgLSB0aGlzLnJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dMb2NhdGlvbi55ID0gdG9vbHRpcFJlY3QueSArIHRvb2x0aXBSZWN0LmhlaWdodCAtIHRoaXMucnkgLSBhcnJvd1BhZGRpbmcgLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcnJvd0xvY2F0aW9uLnkgLSBhcnJvd1BhZGRpbmcgLyAyIDwgdG9vbHRpcFJlY3QueSArIHRoaXMucnkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJvd0xvY2F0aW9uLnkgPSB0b29sdGlwUmVjdC55ICsgdGhpcy5yeSArIGFycm93UGFkZGluZyAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBSZWN0O1xuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLnN0b3BBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBoZWxwZXJfMS5zdG9wVGltZXIodGhpcy5jcm9zc2hhaXJJbnRlcnZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIENyb3NzaGFpci5wcm90b3R5cGUucmVtb3ZlQ3Jvc3NoYWlyID0gZnVuY3Rpb24gKGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIGNyb3NzaGFpciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElEICsgJ19Vc2VySW50ZXJhY3Rpb24nKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICAgICAgaWYgKGNyb3NzaGFpciAmJiBjcm9zc2hhaXIuZ2V0QXR0cmlidXRlKCdvcGFjaXR5JykgIT09ICcwJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Jvc3NoYWlySW50ZXJ2YWwgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IGVqMl9iYXNlXzEuQW5pbWF0aW9uKHt9KS5hbmltYXRlKGNyb3NzaGFpciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyb3NzaGFpci5zdHlsZS5hbmltYXRpb24gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zc2hhaXIuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgKDEgLSAoYXJncy50aW1lU3RhbXAgLyBhcmdzLmR1cmF0aW9uKSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zc2hhaXIuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgJzAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFydC5zdGFydE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQudG9vbHRpcE1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFydC50b29sdGlwTW9kdWxlLnZhbHVlWCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LnRvb2x0aXBNb2R1bGUudmFsdWVZID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQ3Jvc3NoYWlyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdDcm9zc2hhaXInO1xuICAgICAgICB9O1xuICAgICAgICBDcm9zc2hhaXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIENyb3NzaGFpcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQ3Jvc3NoYWlyID0gQ3Jvc3NoYWlyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC91c2VyLWludGVyYWN0aW9uL2Nyb3NzaGFpci5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi8uLi9jaGFydC91dGlscy9nZXQtZGF0YVwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvdGhlbWVcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBoZWxwZXJfMSwgaGVscGVyXzIsIGdldF9kYXRhXzEsIGNvbnN0YW50c18xLCB0aGVtZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBUb29sdGlwID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFRvb2x0aXAsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRvb2x0aXAoY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNoYXJ0KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucGFkZGluZyA9IDU7XG4gICAgICAgICAgICBfdGhpcy5hcnJvd1BhZGRpbmcgPSAxMjtcbiAgICAgICAgICAgIF90aGlzLnJ4ID0gMjtcbiAgICAgICAgICAgIF90aGlzLnJ5ID0gMjtcbiAgICAgICAgICAgIF90aGlzLm1hcmtlclBvaW50ID0gW107XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gX3RoaXMuY2hhcnQuZWxlbWVudDtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIF90aGlzLnRleHRTdHlsZSA9IGNoYXJ0LnRvb2x0aXAudGV4dFN0eWxlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pc1BvaW50ZXIgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oY2FuY2VsRXZlbnQsIHRoaXMubW91c2VMZWF2ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbigndGFwSG9sZCcsIHRoaXMubG9uZ1ByZXNzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwSGFuZGxlciwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChjaGFydC5pc1RvdWNoICYmXG4gICAgICAgICAgICAgICAgKChoZWxwZXJfMi53aXRoSW5Cb3VuZHMoY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVksIGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0KSAmJiBjaGFydC50b29sdGlwLnNoYXJlZClcbiAgICAgICAgICAgICAgICAgICAgfHwgIWNoYXJ0LnRvb2x0aXAuc2hhcmVkKSkge1xuICAgICAgICAgICAgICAgIGlmICghY2hhcnQuY3Jvc3NoYWlyLmVuYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwKDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFydC5zdGFydE1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwKDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUubW91c2VMZWF2ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAoMTAwMCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgaWYgKCFjaGFydC5kaXNhYmxlVHJhY2tUb29sdGlwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydC50b29sdGlwLnNoYXJlZCAmJiAoIWNoYXJ0LmlzVG91Y2ggfHwgKGNoYXJ0LnN0YXJ0TW92ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGVscGVyXzIud2l0aEluQm91bmRzKGNoYXJ0Lm1vdXNlWCwgY2hhcnQubW91c2VZLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0LnRvb2x0aXAuc2hhcmVkICYmICghY2hhcnQuaXNUb3VjaCB8fCAoY2hhcnQuc3RhcnRNb3ZlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQudG9vbHRpcC5zaGFyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVG9vbHRpcCgxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUubG9uZ1ByZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChjaGFydC5jcm9zc2hhaXIuZW5hYmxlICYmIGhlbHBlcl8yLndpdGhJbkJvdW5kcyhjaGFydC5tb3VzZVgsIGNoYXJ0Lm1vdXNlWSwgY2hhcnQuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaXNUb29sdGlwID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcCcpO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBEaXY7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdGhpcy5pbnZlcnRlZCA9IHRoaXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGVtcGxhdGVGbihjaGFydCk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdHRlZFRleHQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gKGNoYXJ0LnRvb2x0aXAuaGVhZGVyID09PSBudWxsKSA/ICgoY2hhcnQudG9vbHRpcC5zaGFyZWQpID8gJzxiPiR7cG9pbnQueH08L2I+JyA6ICc8Yj4ke3Nlcmllcy5uYW1lfTwvYj4nKVxuICAgICAgICAgICAgICAgIDogKGNoYXJ0LnRvb2x0aXAuaGVhZGVyKTtcbiAgICAgICAgICAgIGlmICghaXNUb29sdGlwKSB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcERpdiA9IHRoaXMuY3JlYXRlRWxlbWVudChjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNoYXJ0LnRvb2x0aXAuc2hhcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTZXJpZXNUb29sdGlwKGNoYXJ0LCAhaXNUb29sdGlwLCB0b29sdGlwRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JvdXBlZFRvb2x0aXAoY2hhcnQsICFpc1Rvb2x0aXAsIHRvb2x0aXBEaXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLnRleHRFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRvb2x0aXBEaXYuaWQgPSB0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXAnO1xuICAgICAgICAgICAgdG9vbHRpcERpdi5jbGFzc05hbWUgPSAnZWpUb29sdGlwJyArIHRoaXMuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRvb2x0aXBEaXYuc2V0QXR0cmlidXRlKCdzdHlsZScsICdwb2ludGVyLWV2ZW50czpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OiAxJyk7XG4gICAgICAgICAgICBpZiAoIWNoYXJ0LnRvb2x0aXAudGVtcGxhdGUgfHwgY2hhcnQudG9vbHRpcC5zaGFyZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ZnT2JqZWN0ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlU3ZnKHsgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF9zdmcnIH0pO1xuICAgICAgICAgICAgICAgIHRvb2x0aXBEaXYuYXBwZW5kQ2hpbGQoc3ZnT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBFbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ190b29sdGlwX2dyb3VwJyB9KTtcbiAgICAgICAgICAgICAgICBzdmdPYmplY3QuYXBwZW5kQ2hpbGQoZ3JvdXBFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aEVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5kcmF3UGF0aCh7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF9wYXRoJywgJ3N0cm9rZS13aWR0aCc6IGNoYXJ0LnRvb2x0aXAuYm9yZGVyLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAnZmlsbCc6IGNoYXJ0LnRvb2x0aXAuZmlsbCwgJ29wYWNpdHknOiBjaGFydC50b29sdGlwLm9wYWNpdHksICdzdHJva2UnOiBjaGFydC50b29sdGlwLmJvcmRlci5jb2xvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdyb3VwRWxlbWVudC5hcHBlbmRDaGlsZChwYXRoRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG9vbHRpcERpdjtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucmVuZGVyUG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIGlzRmlyc3QsIGZpbGwsIGZpcnN0VGV4dCkge1xuICAgICAgICAgICAgaWYgKGZpcnN0VGV4dCA9PT0gdm9pZCAwKSB7IGZpcnN0VGV4dCA9IHRydWU7IH1cbiAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS50b29sdGlwUmVuZGVyLCB0ZXh0Q29sbGVjdGlvbnM6IHRoaXMuZ2V0VG9vbHRpcFRleHQocG9pbnQsIGZpcnN0VGV4dCksXG4gICAgICAgICAgICAgICAgcG9pbnQ6IHBvaW50LnBvaW50LCBzZXJpZXM6IHBvaW50LnNlcmllcywgdGV4dFN0eWxlOiB0aGlzLnRleHRTdHlsZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQudHJpZ2dlcihjb25zdGFudHNfMS50b29sdGlwUmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC5zZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWRUZXh0ID0gdGhpcy5mb3JtYXR0ZWRUZXh0LmNvbmNhdChhcmdzRGF0YS50ZXh0Q29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICFhcmdzRGF0YS5jYW5jZWw7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbW92ZVRleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnRleHRFbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ190b29sdGlwX2dyb3VwJyk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZWxlbWVudC5sYXN0Q2hpbGQgJiYgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlclNlcmllc1Rvb2x0aXAgPSBmdW5jdGlvbiAoY2hhcnQsIGlzRmlyc3QsIHRvb2x0aXBEaXYpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICBkYXRhLmxpZXJJbmRleCA9IHRoaXMubGllckluZGV4O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnRzID0gW107XG4gICAgICAgICAgICBpZiAoZGF0YS5wb2ludCAmJiAoKCF0aGlzLnByZXZpb3VzUG9pbnRzWzBdIHx8ICh0aGlzLnByZXZpb3VzUG9pbnRzWzBdLnBvaW50ICE9PSBkYXRhLnBvaW50KSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5wcmV2aW91c1BvaW50c1swXSAmJiB0aGlzLnByZXZpb3VzUG9pbnRzWzBdLmxpZXJJbmRleCA+IDMgJiYgdGhpcy5wcmV2aW91c1BvaW50c1swXS5saWVySW5kZXggIT09IHRoaXMubGllckluZGV4KSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQb2ludHMucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZXJpZXMuZW5hYmxlVG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKS5hcHBlbmRDaGlsZCh0b29sdGlwRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0LnRvb2x0aXAudGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMucGFyc2VUZW1wbGF0ZShkYXRhLnBvaW50LCBkYXRhLnNlcmllcywgdGhpcy5oZWFkZXIsIGRhdGEuc2VyaWVzLnhBeGlzLCBkYXRhLnNlcmllcy55QXhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXR0ZWRUZXh0ID0gdGhpcy5mb3JtYXR0ZWRUZXh0LmNvbmNhdCh0aGlzLmhlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJQb2ludChkYXRhLCBpc0ZpcnN0LCB0aGlzLnRleHRTdHlsZS5jb2xvciB8fCAnIzIxMjEyMScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUZXh0KGlzRmlyc3QsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhpZ2hsaWdodChjaGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRQb2ludHMoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUb29sdGlwKGNoYXJ0LCBkYXRhLCBpc0ZpcnN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSGlnaGxpZ2h0KGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ190b29sdGlwJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhpZ2hsaWdodChjaGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRlbXBsYXRlKGNoYXJ0LCBkYXRhLCB0aGlzLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ190b29sdGlwJyksIGlzRmlyc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9pbnRzID0gZWoyX2Jhc2VfMS5leHRlbmQoW10sIHRoaXMuY3VycmVudFBvaW50cywgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEucG9pbnQgJiYgdGhpcy5pc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAoMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjaGFydC52aXNpYmxlU2VyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmdldENsb3Nlc3RYKGNoYXJ0LCBzZXJpZXMpIHx8IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnBvaW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5kTW91c2VWYWx1ZShkYXRhLCBjaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnVwZGF0ZVRlbXBsYXRlRm4gPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY2hhcnQudG9vbHRpcC50ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjaGFydC50b29sdGlwLnRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRm4gPSBlajJfYmFzZV8yLmNvbXBpbGUoY2hhcnQudG9vbHRpcC50ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5jcmVhdGVUZW1wbGF0ZSA9IGZ1bmN0aW9uIChjaGFydCwgZGF0YSwgcGFyZW50LCBpc0ZpcnN0KSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodFBvaW50cyhkYXRhKTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHsgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEudG9vbHRpcFJlbmRlciwgcG9pbnQ6IGRhdGEucG9pbnQsIHNlcmllczogZGF0YS5zZXJpZXMsIH07XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnRyaWdnZXIoY29uc3RhbnRzXzEudG9vbHRpcFJlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgdmFyIGZpcnN0RWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXAnKS5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKGZpcnN0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb2ludCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCBkYXRhLnBvaW50KTtcbiAgICAgICAgICAgIHBvaW50LnggPSB0aGlzLmZvcm1hdFBvaW50VmFsdWUoZGF0YS5wb2ludCwgZGF0YS5zZXJpZXMueEF4aXMsICd4JywgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKChkYXRhLnNlcmllcy5zZXJpZXNUeXBlID09PSAnWFknKSkge1xuICAgICAgICAgICAgICAgIHBvaW50LnkgPSB0aGlzLmZvcm1hdFBvaW50VmFsdWUoZGF0YS5wb2ludCwgZGF0YS5zZXJpZXMueUF4aXMsICd5JywgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9pbnQubG93ID0gdGhpcy5mb3JtYXRQb2ludFZhbHVlKGRhdGEucG9pbnQsIGRhdGEuc2VyaWVzLnlBeGlzLCAnbG93JywgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIHBvaW50LmhpZ2ggPSB0aGlzLmZvcm1hdFBvaW50VmFsdWUoZGF0YS5wb2ludCwgZGF0YS5zZXJpZXMueUF4aXMsICdoaWdoJywgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhcmdzRGF0YS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVFbGVtZW50ID0gdGhpcy50ZW1wbGF0ZUZuKHBvaW50KTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRlbXBsYXRlRWxlbWVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQodGVtcGxhdGVFbGVtZW50WzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICAgICAgICAgIHZhciByZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFkZGluZyA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG5ldyBoZWxwZXJfMS5TaXplKHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcFJlY3QgPSB0aGlzLnNlcmllc1Rvb2x0aXBMb2NhdGlvbihkYXRhLCBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigwLCAwKSwgbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oMCwgMCkpO1xuICAgICAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLmVuYWJsZUFuaW1hdGlvbiAmJiAhY2hhcnQudG9vbHRpcC5zaGFyZWQgJiYgIWlzRmlyc3QgJiYgIXRoaXMuaXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVUb29sdGlwRGl2KHBhcmVudCwgdG9vbHRpcFJlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEaXYocGFyZW50LCB0b29sdGlwUmVjdC54LCB0b29sdGlwUmVjdC55KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUhpZ2hsaWdodChjaGFydCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5maW5kTW91c2VWYWx1ZSA9IGZ1bmN0aW9uIChkYXRhLCBjaGFydCkge1xuICAgICAgICAgICAgaWYgKCFjaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlWCA9IGhlbHBlcl8yLnZhbHVlVG9Qb2xhckNvZWZmaWNpZW50KGRhdGEucG9pbnQueFZhbHVlLCBkYXRhLnNlcmllcy54QXhpcykgKiBkYXRhLnNlcmllcy54QXhpcy5yZWN0LndpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICArIGRhdGEuc2VyaWVzLnhBeGlzLnJlY3QueDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVYID0gaGVscGVyXzIudmFsdWVUb0NvZWZmaWNpZW50KGRhdGEucG9pbnQueFZhbHVlLCBkYXRhLnNlcmllcy54QXhpcykgKiBkYXRhLnNlcmllcy54QXhpcy5yZWN0LndpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICArIGRhdGEuc2VyaWVzLnhBeGlzLnJlY3QueDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZVkgPSBjaGFydC5tb3VzZVk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlWSA9ICgxIC0gaGVscGVyXzIudmFsdWVUb0NvZWZmaWNpZW50KGRhdGEucG9pbnQueFZhbHVlLCBkYXRhLnNlcmllcy54QXhpcykpICogZGF0YS5zZXJpZXMueEF4aXMucmVjdC5oZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgKyBkYXRhLnNlcmllcy54QXhpcy5yZWN0Lnk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZVggPSBjaGFydC5tb3VzZVg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbmRlckdyb3VwZWRUb29sdGlwID0gZnVuY3Rpb24gKGNoYXJ0LCBpc0ZpcnN0LCB0b29sdGlwRGl2KSB7XG4gICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBwb2ludERhdGEgPSBjaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyB0aGlzLmdldERhdGEoKSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSGlnaGxpZ2h0KGNoYXJ0KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIGV4dHJhUG9pbnRzID0gW107XG4gICAgICAgICAgICBpZiAoaXNGaXJzdCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKS5hcHBlbmRDaGlsZCh0b29sdGlwRGl2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVtb3ZlVGV4dCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGNoYXJ0LnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5lbmFibGVUb29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ0NhcnRlc2lhbicgJiYgc2VyaWVzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZ2V0Q2xvc2VzdFgoY2hhcnQsIHNlcmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyAmJiBzZXJpZXMudmlzaWJsZSAmJiBwb2ludERhdGEucG9pbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBoZWxwZXJfMS5Qb2ludERhdGEoc2VyaWVzLnBvaW50c1twb2ludERhdGEucG9pbnQuaW5kZXhdLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiB0aGlzLmhlYWRlciAhPT0gJycgJiYgdGhpcy5jdXJyZW50UG9pbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMucGFyc2VUZW1wbGF0ZShkYXRhLnBvaW50LCBkYXRhLnNlcmllcywgdGhpcy5oZWFkZXIsIGRhdGEuc2VyaWVzLnhBeGlzLCBkYXRhLnNlcmllcy55QXhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0dGVkVGV4dCA9IHRoaXMuZm9ybWF0dGVkVGV4dC5jb25jYXQodGhpcy5oZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiB0aGlzLnJlbmRlclBvaW50KGRhdGEsIHRydWUsIHRoaXMudGV4dFN0eWxlLmNvbG9yIHx8IGRhdGEucG9pbnQuY29sb3IsIHRoaXMuY3VycmVudFBvaW50cy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuY2F0ZWdvcnkgPT09ICdTZXJpZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodFBvaW50cyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRNb3VzZVZhbHVlKGRhdGEsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UG9pbnRzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhUG9pbnRzLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUZXh0KGlzRmlyc3QsIGNoYXJ0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVG9vbHRpcChjaGFydCwgdGhpcy5jdXJyZW50UG9pbnRzWzBdLCBpc0ZpcnN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXBfcGF0aCcpLnNldEF0dHJpYnV0ZSgnZCcsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50cyA9IHRoaXMuY3VycmVudFBvaW50cy5jb25jYXQoZXh0cmFQb2ludHMpO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BvaW50cyA9IGVqMl9iYXNlXzEuZXh0ZW5kKFtdLCB0aGlzLmN1cnJlbnRQb2ludHMsIG51bGwsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5yZW5kZXJUb29sdGlwID0gZnVuY3Rpb24gKGNoYXJ0LCBwb2ludERhdGEsIGlzRmlyc3QpIHtcbiAgICAgICAgICAgIHZhciB0b29sdGlwRGl2ID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcCcpO1xuICAgICAgICAgICAgdmFyIGFycm93TG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigwLCAwKTtcbiAgICAgICAgICAgIHZhciB0aXBMb2NhdGlvbiA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKDAsIDApO1xuICAgICAgICAgICAgdmFyIHRleHRIZWlnaHRzO1xuICAgICAgICAgICAgdmFyIHN2Z09iamVjdCA9IHRoaXMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXBfc3ZnJyk7XG4gICAgICAgICAgICB2YXIgZ3JvdXBFbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF9ncm91cCcpO1xuICAgICAgICAgICAgdmFyIHBhdGhFbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF9wYXRoJyk7XG4gICAgICAgICAgICB2YXIgcmVjdDtcbiAgICAgICAgICAgIHZhciBpc1RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGlzTGVmdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGlzQm90dG9tID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgeCA9IDA7XG4gICAgICAgICAgICB2YXIgeSA9IDA7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBwb2ludERhdGEuc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJyA/XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRCb3hMb2NhdGlvbihwb2ludERhdGEpIDogcG9pbnREYXRhLnBvaW50LnN5bWJvbExvY2F0aW9uc1swXTtcbiAgICAgICAgICAgIHRoaXMudGlwUmFkaXVzID0gMTtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSBwb2ludERhdGEuc2VyaWVzO1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gcG9pbnREYXRhLnBvaW50O1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVhZGVyICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0ICs9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UG9pbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFycm93UGFkZGluZyA9IDA7XG4gICAgICAgICAgICAgICAgcmVjdCA9IHRoaXMuc2hhcmVkVG9vbHRpcExvY2F0aW9uKGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0LCB0aGlzLnZhbHVlWCwgdGhpcy52YWx1ZVkpO1xuICAgICAgICAgICAgICAgIGlzVG9wID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYXJyb3dQYWRkaW5nID0gMTI7XG4gICAgICAgICAgICAgICAgcmVjdCA9IHRoaXMuc2VyaWVzVG9vbHRpcExvY2F0aW9uKHBvaW50RGF0YSwgYXJyb3dMb2NhdGlvbiwgdGlwTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnZlcnRlZCB8fCAhc2VyaWVzLmlzUmVjdFNlcmllcykge1xuICAgICAgICAgICAgICAgICAgICBpc1RvcCA9IChyZWN0LnkgPCAobG9jYXRpb24ueSArIChjaGFydC5jaGFydEFyZWFUeXBlID09PSAnQ2FydGVzaWFuJyA/IHNlcmllcy5jbGlwUmVjdC55IDogMCkpKTtcbiAgICAgICAgICAgICAgICAgICAgaXNCb3R0b20gPSAhaXNUb3A7XG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaXNUb3AgPyAwIDogdGhpcy5hcnJvd1BhZGRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMZWZ0ID0gKHJlY3QueCA8IChsb2NhdGlvbi54ICsgc2VyaWVzLmNsaXBSZWN0LngpKTtcbiAgICAgICAgICAgICAgICAgICAgeCA9IChpc0xlZnQgPyAwIDogdGhpcy5hcnJvd1BhZGRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWRlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVyU2l6ZSA9IGhlbHBlcl8xLm1lYXN1cmVUZXh0KHRoaXMuaGVhZGVyLCBjaGFydC50b29sdGlwLnRleHRTdHlsZSkuaGVpZ2h0ICsgKHRoaXMucGFkZGluZyAqIDIpICtcbiAgICAgICAgICAgICAgICAgICAgKGlzQm90dG9tID8gdGhpcy5hcnJvd1BhZGRpbmcgOiAwKTtcbiAgICAgICAgICAgICAgICB2YXIgeExlbmd0aCA9ICh0aGlzLnBhZGRpbmcgKiAzKSArICghaXNMZWZ0ICYmICFpc1RvcCAmJiAhaXNCb3R0b20gPyB0aGlzLmFycm93UGFkZGluZyA6IDApO1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnTSAnICsgeExlbmd0aCArICcgJyArIGhlYWRlclNpemUgK1xuICAgICAgICAgICAgICAgICAgICAnTCAnICsgKHJlY3Qud2lkdGggKyAoIWlzTGVmdCAmJiAhaXNUb3AgJiYgIWlzQm90dG9tID8gdGhpcy5hcnJvd1BhZGRpbmcgOiAwKSAtICh0aGlzLnBhZGRpbmcgKiAyKSkgK1xuICAgICAgICAgICAgICAgICAgICAnICcgKyBoZWFkZXJTaXplO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoRWxlbWVudF8xID0gdGhpcy5jaGFydC5yZW5kZXJlci5kcmF3UGF0aCh7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuZWxlbWVudC5pZCArICdfaGVhZGVyX3BhdGgnLCAnc3Ryb2tlLXdpZHRoJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ2ZpbGwnOiBudWxsLCAnb3BhY2l0eSc6IDAuOCwgJ3N0cm9rZSc6ICcjZmZmZmZmJywgJ2QnOiBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBncm91cEVsZW1lbnQuYXBwZW5kQ2hpbGQocGF0aEVsZW1lbnRfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBjaGFydC50b29sdGlwLmJvcmRlci53aWR0aCAvIDI7XG4gICAgICAgICAgICB2YXIgcG9pbnRSZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3Qoc3RhcnQgKyB4LCBzdGFydCArIHksIHJlY3Qud2lkdGggLSBzdGFydCwgcmVjdC5oZWlnaHQgLSBzdGFydCk7XG4gICAgICAgICAgICBncm91cEVsZW1lbnQuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgJzEnKTtcbiAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLmVuYWJsZUFuaW1hdGlvbiAmJiAhY2hhcnQudG9vbHRpcC5zaGFyZWQgJiYgIWlzRmlyc3QgJiYgIXRoaXMuaXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvb2x0aXBEaXYodG9vbHRpcERpdiwgcmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURpdih0b29sdGlwRGl2LCByZWN0LngsIHJlY3QueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHN2Z09iamVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIChyZWN0LmhlaWdodCArIGNoYXJ0LnRvb2x0aXAuYm9yZGVyLndpZHRoICsgKCEoKCF0aGlzLmludmVydGVkKSB8fFxuICAgICAgICAgICAgICAgICghcG9pbnREYXRhLnNlcmllcy5pc1JlY3RTZXJpZXMpKSA/IDAgOiB0aGlzLmFycm93UGFkZGluZykpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgc3ZnT2JqZWN0LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAocmVjdC53aWR0aCArIGNoYXJ0LnRvb2x0aXAuYm9yZGVyLndpZHRoICsgKCgoIXRoaXMuaW52ZXJ0ZWQpIHx8XG4gICAgICAgICAgICAgICAgKCFwb2ludERhdGEuc2VyaWVzLmlzUmVjdFNlcmllcykpID8gMCA6IHRoaXMuYXJyb3dQYWRkaW5nKSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBzdmdPYmplY3Quc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgJzEnKTtcbiAgICAgICAgICAgIHBhdGhFbGVtZW50LnNldEF0dHJpYnV0ZSgnZCcsIGhlbHBlcl8yLmZpbmREaXJlY3Rpb24odGhpcy5yeCwgdGhpcy5yeSwgcG9pbnRSZWN0LCBhcnJvd0xvY2F0aW9uLCB0aGlzLmFycm93UGFkZGluZywgaXNUb3AsIGlzQm90dG9tLCBpc0xlZnQsIHRpcExvY2F0aW9uLngsIHRpcExvY2F0aW9uLnksIHRoaXMudGlwUmFkaXVzKSk7XG4gICAgICAgICAgICBwYXRoRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZpbHRlcicsIGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lFID8gJycgOiAndXJsKCNjaGFydF9zaGFkb3dfdG9vbHRpcCknKTtcbiAgICAgICAgICAgIHZhciBzaGFkb3dFbGVtZW50ID0gJzxmaWx0ZXIgaWQ9XCJjaGFydF9zaGFkb3dfdG9vbHRpcFwiIGhlaWdodD1cIjEzMCVcIj48ZmVHYXVzc2lhbkJsdXIgaW49XCJTb3VyY2VBbHBoYVwiIHN0ZERldmlhdGlvbj1cIjNcIi8+JztcbiAgICAgICAgICAgIHNoYWRvd0VsZW1lbnQgKz0gJzxmZU9mZnNldCBkeD1cIjNcIiBkeT1cIjNcIiByZXN1bHQ9XCJvZmZzZXRibHVyXCIvPjxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNBIHR5cGU9XCJsaW5lYXJcIiBzbG9wZT1cIjAuNVwiLz4nO1xuICAgICAgICAgICAgc2hhZG93RWxlbWVudCArPSAnPC9mZUNvbXBvbmVudFRyYW5zZmVyPjxmZU1lcmdlPjxmZU1lcmdlTm9kZS8+PGZlTWVyZ2VOb2RlIGluPVwiU291cmNlR3JhcGhpY1wiLz48L2ZlTWVyZ2U+PC9maWx0ZXI+JztcbiAgICAgICAgICAgIHZhciBkZWZFbGVtZW50ID0gY2hhcnQucmVuZGVyZXIuY3JlYXRlRGVmcygpO1xuICAgICAgICAgICAgZGVmRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2NoYXJ0X3Rvb2x0aXBfZGVmaW5pdGlvbicpO1xuICAgICAgICAgICAgZ3JvdXBFbGVtZW50LmFwcGVuZENoaWxkKGRlZkVsZW1lbnQpO1xuICAgICAgICAgICAgZGVmRWxlbWVudC5pbm5lckhUTUwgPSBzaGFkb3dFbGVtZW50O1xuICAgICAgICAgICAgcGF0aEVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHJva2UnLCBjaGFydC50b29sdGlwLmJvcmRlci5jb2xvcik7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVRleHQobmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oeCwgeSksIGlzQm90dG9tLCAhaXNMZWZ0ICYmICFpc1RvcCAmJiAhaXNCb3R0b20sIHJlY3QpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5zaGFyZWRUb29sdGlwTG9jYXRpb24gPSBmdW5jdGlvbiAoYm91bmRzLCB4LCB5KSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmVsZW1lbnRTaXplLndpZHRoICsgKDIgKiB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0ICsgKDIgKiB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBSZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3QoeCArIDIgKiB0aGlzLnBhZGRpbmcsIHkgLSBoZWlnaHQgLSB0aGlzLnBhZGRpbmcsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHRvb2x0aXBSZWN0LnkgPCBib3VuZHMueSkge1xuICAgICAgICAgICAgICAgIHRvb2x0aXBSZWN0LnkgKz0gKHRvb2x0aXBSZWN0LmhlaWdodCArIDIgKiB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvb2x0aXBSZWN0LnggKyB0b29sdGlwUmVjdC53aWR0aCA+IGJvdW5kcy54ICsgYm91bmRzLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcFJlY3QueCAtPSAodG9vbHRpcFJlY3Qud2lkdGggKyA0ICogdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b29sdGlwUmVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Qm94TG9jYXRpb24gPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGxvY2F0aW9uO1xuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmxpZXJJbmRleCA+IDMgPyBkYXRhLnBvaW50LnN5bWJvbExvY2F0aW9uc1t0aGlzLmxpZXJJbmRleCAtIDRdIDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHg6IGRhdGEucG9pbnQucmVnaW9uc1swXS54ICsgKGRhdGEucG9pbnQucmVnaW9uc1swXS53aWR0aCAvIDIpLFxuICAgICAgICAgICAgICAgICAgICB5OiBkYXRhLnBvaW50LnJlZ2lvbnNbMF0ueSArIChkYXRhLnBvaW50LnJlZ2lvbnNbMF0uaGVpZ2h0IC8gMilcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5zZXJpZXNUb29sdGlwTG9jYXRpb24gPSBmdW5jdGlvbiAocG9pbnREYXRhLCBhcnJvd0xvY2F0aW9uLCB0aXBMb2NhdGlvbikge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHBvaW50RGF0YS5zZXJpZXM7XG4gICAgICAgICAgICB2YXIgaXNCb3hQbG90ID0gc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJztcbiAgICAgICAgICAgIHZhciBzeW1ib2xMb2NhdGlvbiA9IGlzQm94UGxvdCA/IHRoaXMuZ2V0Qm94TG9jYXRpb24ocG9pbnREYXRhKSA6IHBvaW50RGF0YS5wb2ludC5zeW1ib2xMb2NhdGlvbnNbMF07XG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihzeW1ib2xMb2NhdGlvbi54LCBzeW1ib2xMb2NhdGlvbi55KTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ1JhbmdlQXJlYScgJiYgcG9pbnREYXRhLnBvaW50LnJlZ2lvbnNbMF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnkgPSBwb2ludERhdGEucG9pbnQucmVnaW9uc1swXS55ICsgcG9pbnREYXRhLnBvaW50LnJlZ2lvbnNbMF0uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnggPSBwb2ludERhdGEucG9pbnQucmVnaW9uc1swXS54ICsgcG9pbnREYXRhLnBvaW50LnJlZ2lvbnNbMF0ud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZWxlbWVudFNpemUud2lkdGggKyAoMiAqIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQgKyAoMiAqIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gdGhpcy5jaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgICAgIHZhciBtYXJrZXJIZWlnaHQgPSAwO1xuICAgICAgICAgICAgaWYgKCFzZXJpZXMuaXNSZWN0U2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgbWFya2VySGVpZ2h0ID0gKHRoaXMuY2hhcnQudG9vbHRpcC5zaGFyZWQgfHwgc2VyaWVzLm1hcmtlci52aXNpYmxlIHx8IHNlcmllcy50eXBlID09PSAnU2NhdHRlcidcbiAgICAgICAgICAgICAgICAgICAgfHwgc2VyaWVzLmRyYXdUeXBlID09PSAnU2NhdHRlcicpID8gKChzZXJpZXMubWFya2VyLmhlaWdodCArIDIpIC8gMiArICgyICogc2VyaWVzLm1hcmtlci5ib3JkZXIud2lkdGgpKSA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xpcFggPSB0aGlzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJyA/IDAgOiBzZXJpZXMuY2xpcFJlY3QueDtcbiAgICAgICAgICAgIHZhciBjbGlwWSA9IHRoaXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInID8gMCA6IHNlcmllcy5jbGlwUmVjdC55O1xuICAgICAgICAgICAgdmFyIGJvdW5kc1ggPSBib3VuZHMueDtcbiAgICAgICAgICAgIHZhciBib3VuZHNZID0gYm91bmRzLnk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW52ZXJ0ZWQgfHwgIXNlcmllcy5pc1JlY3RTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi55ID0gKHNlcmllcy50eXBlID09PSAnV2F0ZXJmYWxsJyAmJiBwb2ludERhdGEucG9pbnQueSA8IDApID9cbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ueSAtIHBvaW50RGF0YS5wb2ludC5yZWdpb25zWzBdLmhlaWdodCA6IGxvY2F0aW9uLnk7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihsb2NhdGlvbi54ICsgY2xpcFggLSB0aGlzLmVsZW1lbnRTaXplLndpZHRoIC8gMiAtIHRoaXMucGFkZGluZywgbG9jYXRpb24ueSArIGNsaXBZIC0gdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQgLSAoMiAqIHRoaXMucGFkZGluZykgLSB0aGlzLmFycm93UGFkZGluZyAtIG1hcmtlckhlaWdodCk7XG4gICAgICAgICAgICAgICAgYXJyb3dMb2NhdGlvbi54ID0gdGlwTG9jYXRpb24ueCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24ueSA8IGJvdW5kc1kgfHwgKHNlcmllcy5pc1JlY3RTZXJpZXMgJiYgcG9pbnREYXRhLnBvaW50LnkgPCAwICYmIHNlcmllcy50eXBlICE9PSAnV2F0ZXJmYWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ueSA9IChzeW1ib2xMb2NhdGlvbi55IDwgMCA/IDAgOiBzeW1ib2xMb2NhdGlvbi55KSArIGNsaXBZICsgbWFya2VySGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24ueSArIGhlaWdodCArIHRoaXMuYXJyb3dQYWRkaW5nID4gYm91bmRzWSArIGJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ueSA9IChzeW1ib2xMb2NhdGlvbi55ID4gYm91bmRzLmhlaWdodCA/IGJvdW5kcy5oZWlnaHQgOiBzeW1ib2xMb2NhdGlvbi55KVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBjbGlwWSAtIHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0IC0gKDIgKiB0aGlzLnBhZGRpbmcpIC0gdGhpcy5hcnJvd1BhZGRpbmcgLSBtYXJrZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpcExvY2F0aW9uLnggPSB3aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnggPCBib3VuZHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycm93TG9jYXRpb24ueCAtPSAoYm91bmRzWCAtIGxvY2F0aW9uLngpO1xuICAgICAgICAgICAgICAgICAgICB0aXBMb2NhdGlvbi54IC09IChib3VuZHNYIC0gbG9jYXRpb24ueCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnggPSBib3VuZHNYO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24ueCArIHdpZHRoID4gYm91bmRzWCArIGJvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBhcnJvd0xvY2F0aW9uLnggKz0gKChsb2NhdGlvbi54ICsgd2lkdGgpIC0gKGJvdW5kc1ggKyBib3VuZHMud2lkdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgdGlwTG9jYXRpb24ueCArPSAoKGxvY2F0aW9uLnggKyB3aWR0aCkgLSAoYm91bmRzWCArIGJvdW5kcy53aWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi54IC09ICgobG9jYXRpb24ueCArIHdpZHRoKSAtIChib3VuZHNYICsgYm91bmRzLndpZHRoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcnJvd0xvY2F0aW9uLnggKyB0aGlzLmFycm93UGFkZGluZyAvIDIgPiB3aWR0aCAtIHRoaXMucngpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dMb2NhdGlvbi54ID0gd2lkdGggLSB0aGlzLnJ4IC0gdGhpcy5hcnJvd1BhZGRpbmcgLyAyO1xuICAgICAgICAgICAgICAgICAgICB0aXBMb2NhdGlvbi54ID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlwUmFkaXVzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFycm93TG9jYXRpb24ueCAtIHRoaXMuYXJyb3dQYWRkaW5nIC8gMiA8IHRoaXMucngpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dMb2NhdGlvbi54ID0gdGhpcy5yeCArIHRoaXMuYXJyb3dQYWRkaW5nIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgdGlwTG9jYXRpb24ueCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlwUmFkaXVzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi54ID0gKHNlcmllcy50eXBlID09PSAnV2F0ZXJmYWxsJyAmJiBwb2ludERhdGEucG9pbnQueSA8IDApID9cbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ueCArIHBvaW50RGF0YS5wb2ludC5yZWdpb25zWzBdLndpZHRoIDogbG9jYXRpb24ueDtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKGxvY2F0aW9uLnggKyBjbGlwWCArIG1hcmtlckhlaWdodCwgbG9jYXRpb24ueSArIGNsaXBZIC0gdGhpcy5lbGVtZW50U2l6ZS5oZWlnaHQgLyAyIC0gKHRoaXMucGFkZGluZykpO1xuICAgICAgICAgICAgICAgIGFycm93TG9jYXRpb24ueSA9IHRpcExvY2F0aW9uLnkgPSBoZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgIGlmICgobG9jYXRpb24ueCArIHdpZHRoICsgdGhpcy5hcnJvd1BhZGRpbmcgPiBib3VuZHNYICsgYm91bmRzLndpZHRoKSB8fCAoc2VyaWVzLmlzUmVjdFNlcmllcyAmJlxuICAgICAgICAgICAgICAgICAgICBwb2ludERhdGEucG9pbnQueSA8IDAgJiYgc2VyaWVzLnR5cGUgIT09ICdXYXRlcmZhbGwnKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi54ID0gKHN5bWJvbExvY2F0aW9uLnggPiBib3VuZHMud2lkdGggPyBib3VuZHMud2lkdGggOiBzeW1ib2xMb2NhdGlvbi54KVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBjbGlwWCAtIG1hcmtlckhlaWdodCAtICh3aWR0aCArIHRoaXMuYXJyb3dQYWRkaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnggPCBib3VuZHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnggPSAoc3ltYm9sTG9jYXRpb24ueCA8IDAgPyAwIDogc3ltYm9sTG9jYXRpb24ueCkgKyBjbGlwWCArIG1hcmtlckhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnkgPD0gYm91bmRzWSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJvd0xvY2F0aW9uLnkgLT0gKGJvdW5kc1kgLSBsb2NhdGlvbi55KTtcbiAgICAgICAgICAgICAgICAgICAgdGlwTG9jYXRpb24ueSAtPSAoYm91bmRzWSAtIGxvY2F0aW9uLnkpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi55ID0gYm91bmRzWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnkgKyBoZWlnaHQgPj0gYm91bmRzWSArIGJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dMb2NhdGlvbi55ICs9ICgobG9jYXRpb24ueSArIGhlaWdodCkgLSAoYm91bmRzWSArIGJvdW5kcy5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgdGlwTG9jYXRpb24ueSArPSAoKGxvY2F0aW9uLnkgKyBoZWlnaHQpIC0gKGJvdW5kc1kgKyBib3VuZHMuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnkgLT0gKChsb2NhdGlvbi55ICsgaGVpZ2h0KSAtIChib3VuZHNZICsgYm91bmRzLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJyb3dMb2NhdGlvbi55ICsgdGhpcy5hcnJvd1BhZGRpbmcgLyAyID4gaGVpZ2h0IC0gdGhpcy5yeSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJvd0xvY2F0aW9uLnkgPSBoZWlnaHQgLSB0aGlzLnJ5IC0gdGhpcy5hcnJvd1BhZGRpbmcgLyAyO1xuICAgICAgICAgICAgICAgICAgICB0aXBMb2NhdGlvbi55ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcFJhZGl1cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcnJvd0xvY2F0aW9uLnkgLSB0aGlzLmFycm93UGFkZGluZyAvIDIgPCB0aGlzLnJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGFycm93TG9jYXRpb24ueSA9IHRoaXMucnkgKyB0aGlzLmFycm93UGFkZGluZyAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHRpcExvY2F0aW9uLnkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcFJhZGl1cyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5SZWN0KGxvY2F0aW9uLngsIGxvY2F0aW9uLnksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5yZW1vdmVIaWdobGlnaHQgPSBmdW5jdGlvbiAoY2hhcnQsIHJlbW92ZVJlY3QpIHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVSZWN0ID09PSB2b2lkIDApIHsgcmVtb3ZlUmVjdCA9IGZhbHNlOyB9XG4gICAgICAgICAgICB2YXIgaXRlbTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnByZXZpb3VzUG9pbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IHRoaXMucHJldmlvdXNQb2ludHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uc2VyaWVzLmlzUmVjdFNlcmllcyAmJiBpdGVtLnNlcmllcy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UG9pbnQoaXRlbS5zZXJpZXMsIGl0ZW0ucG9pbnQuaW5kZXgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXRlbS5zZXJpZXMubWFya2VyLnZpc2libGUgJiYgaXRlbS5zZXJpZXMudHlwZSAhPT0gJ1NjYXR0ZXInICYmIGl0ZW0uc2VyaWVzLnR5cGUgIT09ICdCdWJibGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb2ludHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuIC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5oaWdobGlnaHRQb2ludHMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc2VyaWVzLmlzUmVjdFNlcmllcykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UG9pbnQoaXRlbS5zZXJpZXMsIGl0ZW0ucG9pbnQuaW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5oaWdobGlnaHRQb2ludCA9IGZ1bmN0aW9uIChzZXJpZXMsIHBvaW50SW5kZXgsIGhpZ2hsaWdodCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfUG9pbnRfJyArIHBvaW50SW5kZXgpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIChoaWdobGlnaHQgPyBzZXJpZXMub3BhY2l0eSAvIDIgOiBzZXJpZXMub3BhY2l0eSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmdldFRvb2x0aXBUZXh0ID0gZnVuY3Rpb24gKHBvaW50RGF0YSwgaXNGaXJzdCkge1xuICAgICAgICAgICAgaWYgKGlzRmlyc3QgPT09IHZvaWQgMCkgeyBpc0ZpcnN0ID0gdHJ1ZTsgfVxuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHBvaW50RGF0YS5zZXJpZXM7XG4gICAgICAgICAgICB2YXIgdGV4dDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVGVtcGxhdGUocG9pbnREYXRhLnBvaW50LCBzZXJpZXMsIHRoaXMuZ2V0Rm9ybWF0KHRoaXMuY2hhcnQsIHNlcmllcyksIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucmVuZGVyVGV4dCA9IGZ1bmN0aW9uIChpc1JlbmRlciwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgc2l6ZTtcbiAgICAgICAgICAgIHZhciBsaW5lcztcbiAgICAgICAgICAgIHZhciBrZXkgPSAncHJvcGVydGllcyc7XG4gICAgICAgICAgICB2YXIgZm9udCA9IGVqMl9iYXNlXzEuZXh0ZW5kKHt9LCB0aGlzLmNoYXJ0LnRvb2x0aXAudGV4dFN0eWxlLCBudWxsLCB0cnVlKVtrZXldO1xuICAgICAgICAgICAgdmFyIGdyb3VwRWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXBfZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciB0c3BhbkVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdHNwYW5TdHlsZSA9ICcnO1xuICAgICAgICAgICAgdmFyIGxpbmU7XG4gICAgICAgICAgICB2YXIgdHNwYW5PcHRpb247XG4gICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMuaGVhZGVyLnJlcGxhY2UoLzxiPi9nLCAnJykucmVwbGFjZSgvPFxcL2I+L2csICcnKS50cmltKCk7XG4gICAgICAgICAgICB2YXIgaGVhZGVyU3BhY2UgPSAodGhpcy5oZWFkZXIgIT09ICcnICYmIHRoaXMuZm9ybWF0dGVkVGV4dFswXSAhPT0gJycpID8gNSA6IDA7XG4gICAgICAgICAgICB2YXIgaXNSb3cgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGlzQ29sdW1uID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWFya2VyUG9pbnQgPSBbXTtcbiAgICAgICAgICAgIHZhciBtYXJrZXJTaXplID0gMTA7XG4gICAgICAgICAgICB2YXIgc3BhY2VXaWR0aCA9IDQ7XG4gICAgICAgICAgICB2YXIgZHkgPSAoMjIgLyBwYXJzZUZsb2F0KHRoZW1lXzEuVGhlbWUudG9vbHRpcExhYmVsRm9udC5zaXplKSkgKiAocGFyc2VGbG9hdChmb250LnNpemUpKTtcbiAgICAgICAgICAgIGlmICghaXNSZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5yZW1vdmVFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF90ZXh0Jyk7XG4gICAgICAgICAgICAgICAgaGVscGVyXzIucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX2hlYWRlcl9wYXRoJyk7XG4gICAgICAgICAgICAgICAgaGVscGVyXzIucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXBfdHJhY2tiYWxsX2dyb3VwJyk7XG4gICAgICAgICAgICAgICAgaGVscGVyXzIucmVtb3ZlRWxlbWVudCgnY2hhcnRfdG9vbHRpcF9kZWZpbml0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG5ldyBoZWxwZXJfMS5UZXh0T3B0aW9uKHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF90ZXh0JywgdGhpcy5wYWRkaW5nICogMiwgdGhpcy5wYWRkaW5nICogNCwgJ3N0YXJ0JywgJycpO1xuICAgICAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBoZWxwZXJfMS50ZXh0RWxlbWVudChvcHRpb25zLCBmb250LCBudWxsLCBncm91cEVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBwb2ludHNMZW5ndGggPSB0aGlzLmZvcm1hdHRlZFRleHQubGVuZ3RoOyBrIDwgcG9pbnRzTGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dENvbGxlY3Rpb24gPSB0aGlzLmZvcm1hdHRlZFRleHRba10ucmVwbGFjZSgvPChifHN0cm9uZyk+L2csICc8Yj4nKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPFxcLyhifHN0cm9uZyk+L2csICc8L2I+JylcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KC88YnIuKj8+L2cpO1xuICAgICAgICAgICAgICAgIHNpemUgPSBoZWxwZXJfMS5tZWFzdXJlVGV4dCh0aGlzLmZvcm1hdHRlZFRleHRba10sIGZvbnQpO1xuICAgICAgICAgICAgICAgIGlmICgoayAhPT0gMCkgfHwgKHRoaXMuaGVhZGVyID09PSAnJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJQb2ludC5wdXNoKCh0aGlzLmhlYWRlciAhPT0gJycgPyAodGhpcy5wYWRkaW5nKSA6IDApICsgb3B0aW9ucy55ICsgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRleHRDb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzID0gdGV4dENvbGxlY3Rpb25baV0ucmVwbGFjZSgvPGI+L2csICc8YnI+PGI+JykucmVwbGFjZSgvPFxcL2I+L2csICc8L2I+PGJyPicpLnNwbGl0KCc8YnI+Jyk7XG4gICAgICAgICAgICAgICAgICAgIHN1YldpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaXNDb2x1bW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgKz0gZHk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtfMSA9IDAsIGxlbl8xID0gbGluZXMubGVuZ3RoOyBrXzEgPCBsZW5fMTsga18xKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lc1trXzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUucmVwbGFjZSgvPGI+L2csICcnKS5yZXBsYWNlKC88XFwvYj4vZywgJycpLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJXaWR0aCArPSBzcGFjZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0NvbHVtbiAmJiAhaXNSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNwYW5PcHRpb24gPSB7IHg6ICh0aGlzLnBhZGRpbmcgKiAyKSArIChtYXJrZXJTaXplICsgNSksIGR5OiBkeSArICgoaXNDb2x1bW4pID8gaGVhZGVyU3BhY2UgOiAwKSwgZmlsbDogJycgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyU3BhY2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUm93ICYmIGlzQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c3Bhbk9wdGlvbiA9IHsgeDogKHRoaXMuaGVhZGVyID09PSAnJykgPyAoKHRoaXMucGFkZGluZyAqIDIpICsgKG1hcmtlclNpemUgKyA1KSkgOiAodGhpcy5wYWRkaW5nICogMikgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzcGFuT3B0aW9uID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb2x1bW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c3BhbkVsZW1lbnQgPSBjaGFydC5yZW5kZXJlci5jcmVhdGVUU3Bhbih0c3Bhbk9wdGlvbiwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodHNwYW5FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5pbmRleE9mKCc8Yj4nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzcGFuU3R5bGUgPSAnZm9udC13ZWlnaHQ6Ym9sZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRzcGFuRWxlbWVudCkuc2V0QXR0cmlidXRlKCdmaWxsJywgY2hhcnQudG9vbHRpcC50ZXh0U3R5bGUuY29sb3IgfHwgJyNmZmZmZmYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzcGFuU3R5bGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC5mb250V2VpZ2h0ID0gJ05vcm1hbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0c3BhbkVsZW1lbnQpLnNldEF0dHJpYnV0ZSgnZmlsbCcsIGNoYXJ0LnRvb2x0aXAudGV4dFN0eWxlLmNvbG9yIHx8ICcjZGJkYmRiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0c3BhbkVsZW1lbnQpLnRleHRDb250ZW50ID0gbGluZSA9IGxpbmUucmVwbGFjZSgvPFthLXpBLVpcXC9dKC58XFxuKSo/Pi9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViV2lkdGggKz0gaGVscGVyXzEubWVhc3VyZVRleHQobGluZSwgZm9udCkud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRzcGFuU3R5bGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzcGFuRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgdHNwYW5TdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUm93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3ViV2lkdGggLT0gc3BhY2VXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgc3ViV2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlaWdodCAtPSAodGhpcy5oZWFkZXIgPyB0aGlzLnBhZGRpbmcgOiAwKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBuZXcgaGVscGVyXzEuU2l6ZSh3aWR0aCArICh3aWR0aCA+IDAgPyAoMiAqIHRoaXMucGFkZGluZykgOiAwKSwgaGVpZ2h0ICsgKHRoaXMuaGVhZGVyICE9PSAnJyA/IHRoaXMucGFkZGluZyA6IDApKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFNpemUud2lkdGggKz0gKG1hcmtlclNpemUgKyA1KTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gKHBhcmVudEVsZW1lbnQuY2hpbGROb2Rlc1swXSk7XG4gICAgICAgICAgICBpZiAodGhpcy5oZWFkZXIgIT09ICcnICYmIGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmb250LmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoXzEgPSAodGhpcy5lbGVtZW50U2l6ZS53aWR0aCArICgyICogdGhpcy5wYWRkaW5nKSkgLyAyIC0gaGVscGVyXzEubWVhc3VyZVRleHQodGhpcy5oZWFkZXIsIGZvbnQpLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgneCcsIHdpZHRoXzEudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmNoYW5nZVRleHQgPSBmdW5jdGlvbiAocG9pbnQsIGlzQm90dG9tLCBpc1JpZ2h0LCByZWN0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcF90ZXh0Jyk7XG4gICAgICAgICAgICBpZiAoaXNCb3R0b20pIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyB0aGlzLmFycm93UGFkZGluZyArICcpJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSaWdodCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0aGlzLmFycm93UGFkZGluZyArICcgMCknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhd01hcmtlcihpc0JvdHRvbSwgaXNSaWdodCwgMTApO1xuICAgICAgICB9O1xuICAgICAgICBUb29sdGlwLnByb3RvdHlwZS5kcmF3TWFya2VyID0gZnVuY3Rpb24gKGlzQm90dG9tLCBpc1JpZ2h0LCBzaXplKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIHNoYXBlT3B0aW9uO1xuICAgICAgICAgICAgdmFyIGdyb3VwRWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX3Rvb2x0aXBfZ3JvdXAnKTtcbiAgICAgICAgICAgIHZhciBtYXJrZXJHcm91cCA9IHRoaXMuY2hhcnQucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogdGhpcy5lbGVtZW50LmlkICsgJ190b29sdGlwX3RyYWNrYmFsbF9ncm91cCcgfSk7XG4gICAgICAgICAgICB2YXIgeCA9ICh0aGlzLnBhZGRpbmcgKiAyKSArIChzaXplIC8gMikgKyAoaXNSaWdodCA/IHRoaXMuYXJyb3dQYWRkaW5nIDogMCk7XG4gICAgICAgICAgICB2YXIgc2VyaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuY3VycmVudFBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzZXJpZXMgPSBkYXRhLnNlcmllcztcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnZpc2libGUgJiYgc2VyaWVzLmVuYWJsZVRvb2x0aXAgJiYgZGF0YS5wb2ludC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlT3B0aW9uID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24odGhpcy5lbGVtZW50LmlkICsgJ19Ub29sdGlwX1RyYWNrYmFsbF8nICsgc2VyaWVzLmluZGV4LCBzZXJpZXMubWFya2VyLmZpbGwgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICgoZGF0YS5wb2ludCAmJiBkYXRhLnBvaW50LmNvbG9yICYmIGRhdGEucG9pbnQuY29sb3IgIT09ICcjZmZmZmZmJykgPyBkYXRhLnBvaW50LmNvbG9yIDogc2VyaWVzLmludGVyaW9yKSwgMSwgJyNjY2NjY2MnLCBzZXJpZXMub3BhY2l0eSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckdyb3VwLmFwcGVuZENoaWxkKGhlbHBlcl8yLmRyYXdTeW1ib2wobmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oeCwgdGhpcy5tYXJrZXJQb2ludFtjb3VudF0gLSB0aGlzLnBhZGRpbmcgKyAoaXNCb3R0b20gPyB0aGlzLmFycm93UGFkZGluZyA6IDApKSwgc2VyaWVzLm1hcmtlci5zaGFwZSwgbmV3IGhlbHBlcl8xLlNpemUoc2l6ZSwgc2l6ZSksIHNlcmllcy5tYXJrZXIuaW1hZ2VVcmwsIHNoYXBlT3B0aW9uLCBudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JvdXBFbGVtZW50LmFwcGVuZENoaWxkKG1hcmtlckdyb3VwKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucGFyc2VUZW1wbGF0ZSA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBmb3JtYXQsIHhBeGlzLCB5QXhpcykge1xuICAgICAgICAgICAgdmFyIHZhbDtcbiAgICAgICAgICAgIHZhciB0ZXh0VmFsdWU7XG4gICAgICAgICAgICB2YXIgeEZvcm1hdDtcbiAgICAgICAgICAgIHZhciBjdXN0b21MYWJlbEZvcm1hdDtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocG9pbnQpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhVmFsdWUgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgdmFsID0gbmV3IFJlZ0V4cCgnJHtwb2ludCcgKyAnLicgKyBkYXRhVmFsdWUgKyAnfScsICdnbScpO1xuICAgICAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKHZhbC5zb3VyY2UsIHRoaXMuZm9ybWF0UG9pbnRWYWx1ZShwb2ludCwgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQueH0nID8geEF4aXMgOiB5QXhpcywgZGF0YVZhbHVlLCB2YWwuc291cmNlID09PSAnJHtwb2ludC54fScsICh2YWwuc291cmNlID09PSAnJHtwb2ludC5oaWdofScgfHxcbiAgICAgICAgICAgICAgICAgICAgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQub3Blbn0nIHx8XG4gICAgICAgICAgICAgICAgICAgIHZhbC5zb3VyY2UgPT09ICcke3BvaW50LmNsb3NlfScgfHxcbiAgICAgICAgICAgICAgICAgICAgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQubG93fScgfHxcbiAgICAgICAgICAgICAgICAgICAgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQueX0nIHx8XG4gICAgICAgICAgICAgICAgICAgIHZhbC5zb3VyY2UgPT09ICcke3BvaW50Lm1pbmltdW19JyB8fFxuICAgICAgICAgICAgICAgICAgICB2YWwuc291cmNlID09PSAnJHtwb2ludC5tYXhpbXVtfScgfHxcbiAgICAgICAgICAgICAgICAgICAgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQub3V0bGllcnN9JyB8fFxuICAgICAgICAgICAgICAgICAgICB2YWwuc291cmNlID09PSAnJHtwb2ludC51cHBlclF1YXJ0aWxlfScgfHxcbiAgICAgICAgICAgICAgICAgICAgdmFsLnNvdXJjZSA9PT0gJyR7cG9pbnQubG93ZXJRdWFydGlsZX0nIHx8XG4gICAgICAgICAgICAgICAgICAgIHZhbC5zb3VyY2UgPT09ICcke3BvaW50Lm1lZGlhbn0nKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IE9iamVjdC5rZXlzKE9iamVjdC5nZXRQcm90b3R5cGVPZihzZXJpZXMpKTsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVZhbHVlID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgIHZhbCA9IG5ldyBSZWdFeHAoJyR7c2VyaWVzJyArICcuJyArIGRhdGFWYWx1ZSArICd9JywgJ2dtJyk7XG4gICAgICAgICAgICAgICAgdGV4dFZhbHVlID0gc2VyaWVzW2RhdGFWYWx1ZV07XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UodmFsLnNvdXJjZSwgdGV4dFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmZvcm1hdFBvaW50VmFsdWUgPSBmdW5jdGlvbiAocG9pbnQsIGF4aXMsIGRhdGFWYWx1ZSwgaXNYUG9pbnQsIGlzWVBvaW50KSB7XG4gICAgICAgICAgICB2YXIgdGV4dFZhbHVlO1xuICAgICAgICAgICAgdmFyIGN1c3RvbUxhYmVsRm9ybWF0O1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgaWYgKGF4aXMudmFsdWVUeXBlICE9PSAnQ2F0ZWdvcnknICYmIGlzWFBvaW50KSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tTGFiZWxGb3JtYXQgPSBheGlzLmxhYmVsRm9ybWF0ICYmIGF4aXMubGFiZWxGb3JtYXQubWF0Y2goJ3t2YWx1ZX0nKSAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICB0ZXh0VmFsdWUgPSBjdXN0b21MYWJlbEZvcm1hdCA/IGF4aXMubGFiZWxGb3JtYXQucmVwbGFjZSgne3ZhbHVlfScsIGF4aXMuZm9ybWF0KHBvaW50W2RhdGFWYWx1ZV0pKSA6XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuZm9ybWF0KHBvaW50W2RhdGFWYWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNZUG9pbnQpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21MYWJlbEZvcm1hdCA9IGF4aXMubGFiZWxGb3JtYXQgJiYgYXhpcy5sYWJlbEZvcm1hdC5tYXRjaCgne3ZhbHVlfScpICE9PSBudWxsO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZGF0YVZhbHVlID09PSAnb3V0bGllcnMnID8gYXhpcy5mb3JtYXQocG9pbnRbZGF0YVZhbHVlXVt0aGlzLmxpZXJJbmRleCAtIDRdKSA6XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuZm9ybWF0KHBvaW50W2RhdGFWYWx1ZV0pO1xuICAgICAgICAgICAgICAgIHRleHRWYWx1ZSA9IGN1c3RvbUxhYmVsRm9ybWF0ID8gYXhpcy5sYWJlbEZvcm1hdC5yZXBsYWNlKCd7dmFsdWV9JywgdmFsdWUpIDogdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0VmFsdWUgPSBwb2ludFtkYXRhVmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRleHRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0Rm9ybWF0ID0gZnVuY3Rpb24gKGNoYXJ0LCBzZXJpZXMpIHtcbiAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLmZvcm1hdCkge1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuc2VyaWVzVHlwZSA9PT0gJ1hZJyAmJiBzZXJpZXMuY2F0ZWdvcnkgPT09ICdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEluZGljYXRvclRvb2x0aXBGb3JtYXQoc2VyaWVzLCBjaGFydCwgY2hhcnQudG9vbHRpcC5mb3JtYXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQudG9vbHRpcC5mb3JtYXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gIWNoYXJ0LnRvb2x0aXAuc2hhcmVkID8gJyR7cG9pbnQueH0nIDogJyR7c2VyaWVzLm5hbWV9JztcbiAgICAgICAgICAgIHN3aXRjaCAoc2VyaWVzLnNlcmllc1R5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdYWSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuY2F0ZWdvcnkgPT09ICdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluZGljYXRvclRvb2x0aXBGb3JtYXQoc2VyaWVzLCBjaGFydCwgY2hhcnQudG9vbHRpcC5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtYXQgKyAnIDogJyArICgoc2VyaWVzLnR5cGUgPT09ICdCdWJibGUnKSA/ICc8Yj4ke3BvaW50Lnl9PC9iPiAgU2l6ZSA6IDxiPiR7cG9pbnQuc2l6ZX08L2I+J1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnPGI+JHtwb2ludC55fTwvYj4nKTtcbiAgICAgICAgICAgICAgICBjYXNlICdIaWdoTG93JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCArICgnPGJyLz5IaWdoIDogPGI+JHtwb2ludC5oaWdofTwvYj48YnIvPkxvdyA6IDxiPiR7cG9pbnQubG93fTwvYj4nKTtcbiAgICAgICAgICAgICAgICBjYXNlICdIaWdoTG93T3BlbkNsb3NlJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdCArICgnPGJyLz5IaWdoIDogPGI+JHtwb2ludC5oaWdofTwvYj48YnIvPkxvdyA6IDxiPiR7cG9pbnQubG93fTwvYj48YnIvPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ09wZW4gOiA8Yj4ke3BvaW50Lm9wZW59PC9iPjxici8+Q2xvc2UgOiA8Yj4ke3BvaW50LmNsb3NlfTwvYj4nKTtcbiAgICAgICAgICAgICAgICBjYXNlICdCb3hQbG90Jzoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0ICsgJzxici8+JyArICh0aGlzLmxpZXJJbmRleCA+IDMgPyAnT3V0bGllcnMgOiA8Yj4ke3BvaW50Lm91dGxpZXJzfTwvYj4nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICdNYXhpbXVtIDogPGI+JHtwb2ludC5tYXhpbXVtfTwvYj48YnIvPlExIDogPGI+JHtwb2ludC51cHBlclF1YXJ0aWxlfTwvYj48YnIvPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNZWRpYW4gOiA8Yj4ke3BvaW50Lm1lZGlhbn08L2I+PGJyLz5RMyA6IDxiPiR7cG9pbnQubG93ZXJRdWFydGlsZX08L2I+PGJyLz5NaW5pbXVtIDogPGI+JHtwb2ludC5taW5pbXVtfTwvYj4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmdldEluZGljYXRvclRvb2x0aXBGb3JtYXQgPSBmdW5jdGlvbiAoc2VyaWVzLCBjaGFydCwgZm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgdG9vbFRpcDtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBbXTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuc2VyaWVzVHlwZSA9PT0gJ1hZJykge1xuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBzZXJpZXMubmFtZSArICcgOiAke3BvaW50Lnl9JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBmb3JtYXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG9vbFRpcDtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuc3RvcEFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGhlbHBlcl8yLnN0b3BUaW1lcih0aGlzLnRvb2xUaXBJbnRlcnZhbCk7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLnJlbW92ZVRvb2x0aXAgPSBmdW5jdGlvbiAoZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBFbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfdG9vbHRpcCcpO1xuICAgICAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICAgICAgICBpZiAodG9vbHRpcEVsZW1lbnQgJiYgdGhpcy5wcmV2aW91c1BvaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFfMSA9IHRoaXMucHJldmlvdXNQb2ludHM7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sVGlwSW50ZXJ2YWwgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IGRhdGFfMVswXS5zZXJpZXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b29sdGlwR3JvdXAgPSB0b29sdGlwRWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3BhY2l0eSA9IHBhcnNlRmxvYXQodG9vbHRpcEdyb3VwLmdldEF0dHJpYnV0ZSgnb3BhY2l0eScpKSB8fCAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmdldEVsZW1lbnQoY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBkYXRhXzFbMF0uc2VyaWVzLmluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICArICdfUG9pbnRfJyArIGRhdGFfMVswXS5wb2ludC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWN0T3BhY2l0eTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgJiYgc2VyaWVzLmlzUmVjdFNlcmllcyAmJiAhY2hhcnQudG9vbHRpcC5zaGFyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RPcGFjaXR5ID0gcGFyc2VGbG9hdChlbGVtZW50LmdldEF0dHJpYnV0ZSgnb3BhY2l0eScpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXcgZWoyX2Jhc2VfMi5BbmltYXRpb24oe30pLmFuaW1hdGUodG9vbHRpcEdyb3VwLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcEdyb3VwLnN0eWxlLmFuaW1hdGlvbiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBHcm91cC5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCAob3BhY2l0eSAtIChhcmdzLnRpbWVTdGFtcCAvIGFyZ3MuZHVyYXRpb24pKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAmJiBzZXJpZXMuaXNSZWN0U2VyaWVzICYmICFjaGFydC50b29sdGlwLnNoYXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIChyZWN0T3BhY2l0eSArIChyZWN0T3BhY2l0eSAqIChhcmdzLnRpbWVTdGFtcCAvIGFyZ3MuZHVyYXRpb24pKSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudmFsdWVYID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52YWx1ZVkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRQb2ludHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAmJiBzZXJpZXMuaXNSZWN0U2VyaWVzICYmICFjaGFydC50b29sdGlwLnNoYXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHNlcmllcy5vcGFjaXR5LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVIaWdobGlnaHQoY2hhcnQsIGNoYXJ0LnRvb2x0aXAuc2hhcmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVIaWdobGlnaHRlZE1hcmtlcihkYXRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBHcm91cC5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCAnMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFydC50b29sdGlwLnRlbXBsYXRlICYmICFjaGFydC50b29sdGlwLnNoYXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnQudHJpZ2dlcignYW5pbWF0aW9uQ29tcGxldGUnLCB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUucmVtb3ZlSGlnaGxpZ2h0ZWRNYXJrZXIgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhXzIgPSBkYXRhOyBfaSA8IGRhdGFfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGFfMltfaV07XG4gICAgICAgICAgICAgICAgaGVscGVyXzIucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgaXRlbS5zZXJpZXMuaW5kZXggK1xuICAgICAgICAgICAgICAgICAgICAnX1BvaW50XycgKyBpdGVtLnBvaW50LmluZGV4ICsgJ19UcmFja2JhbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0Lm1hcmtlclJlbmRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQubWFya2VyUmVuZGVyLnJlbW92ZUhpZ2hsaWdodGVkTWFya2VyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9pbnRzID0gW107XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmFuaW1hdGVUb29sdGlwRGl2ID0gZnVuY3Rpb24gKHRvb2x0aXBEaXYsIHJlY3QpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodG9vbHRpcERpdi5zdHlsZS5sZWZ0KTtcbiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VGbG9hdCh0b29sdGlwRGl2LnN0eWxlLnRvcCk7XG4gICAgICAgICAgICB2YXIgY3VycmVuRGlmZjtcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV8yLkFuaW1hdGlvbih7fSkuYW5pbWF0ZSh0b29sdGlwRGl2LCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVuRGlmZiA9IChhcmdzLnRpbWVTdGFtcCAvIGFyZ3MuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwRGl2LnN0eWxlLmFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBEaXYuc3R5bGUubGVmdCA9ICh4ICsgY3VycmVuRGlmZiAqIChyZWN0LnggLSB4KSkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB0b29sdGlwRGl2LnN0eWxlLnRvcCA9ICh5ICsgY3VycmVuRGlmZiAqIChyZWN0LnkgLSB5KSkgKyAncHgnO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlRGl2KHRvb2x0aXBEaXYsIHJlY3QueCwgcmVjdC55KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUudXBkYXRlRGl2ID0gZnVuY3Rpb24gKHRvb2x0aXBEaXYsIHgsIHkpIHtcbiAgICAgICAgICAgIHRvb2x0aXBEaXYuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgICAgICAgICAgdG9vbHRpcERpdi5zdHlsZS50b3AgPSB5ICsgJ3B4JztcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnVG9vbHRpcCc7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2x0aXAucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2x0aXA7XG4gICAgfShnZXRfZGF0YV8xLkRhdGEpKTtcbiAgICBleHBvcnRzLlRvb2x0aXAgPSBUb29sdGlwO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXAuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vem9vbWluZy10b29sa2l0XCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL3RoZW1lXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBoZWxwZXJfMSwgem9vbWluZ190b29sa2l0XzEsIHRoZW1lXzEsIGNvbnN0YW50c18xLCBoZWxwZXJfMikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgWm9vbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFpvb20oY2hhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgICAgIHRoaXMuaXNQb2ludGVyID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzUG9pbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYnJvd3Nlck5hbWUgPSBlajJfYmFzZV8xLkJyb3dzZXIuaW5mby5uYW1lO1xuICAgICAgICAgICAgdGhpcy53aGVlbEV2ZW50ID0gdGhpcy5icm93c2VyTmFtZSA9PT0gJ21vemlsbGEnID8gKHRoaXMuaXNQb2ludGVyID8gJ21vdXNld2hlZWwnIDogJ0RPTU1vdXNlU2Nyb2xsJykgOiAnbW91c2V3aGVlbCc7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEV2ZW50ID0gdGhpcy5pc1BvaW50ZXIgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgdGhpcy5pc0RldmljZSA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0RldmljZTtcbiAgICAgICAgICAgIHZhciB6b29taW5nID0gY2hhcnQuem9vbVNldHRpbmdzO1xuICAgICAgICAgICAgdGhpcy50b29sa2l0ID0gbmV3IHpvb21pbmdfdG9vbGtpdF8xLlRvb2xraXQoY2hhcnQpO1xuICAgICAgICAgICAgdGhpcy56b29taW5nID0gem9vbWluZztcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudElkID0gY2hhcnQuZWxlbWVudC5pZDtcbiAgICAgICAgICAgIHRoaXMuem9vbWluZ1JlY3QgPSBuZXcgaGVscGVyXzEuUmVjdCgwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuem9vbUF4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuem9vbWtpdE9wYWNpdHkgPSAwLjM7XG4gICAgICAgICAgICB0aGlzLmlzSU9TID0gZWoyX2Jhc2VfMS5Ccm93c2VyLmlzSW9zIHx8IGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvczc7XG4gICAgICAgIH1cbiAgICAgICAgWm9vbS5wcm90b3R5cGUucmVuZGVyWm9vbWluZyA9IGZ1bmN0aW9uIChlLCBjaGFydCwgaXNUb3VjaCkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVab29tQXhlc1JhbmdlKGNoYXJ0LCBjaGFydC5heGlzQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbWluZy5lbmFibGVTZWxlY3Rpb25ab29taW5nICYmICghaXNUb3VjaFxuICAgICAgICAgICAgICAgIHx8IChjaGFydC5pc0RvdWJsZVRhcCAmJiB0aGlzLnRvdWNoU3RhcnRMaXN0Lmxlbmd0aCA9PT0gMSkpICYmICghdGhpcy5pc1Bhbm5pbmcgfHwgY2hhcnQuaXNEb3VibGVUYXApKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Bhbm5pbmcgPSB0aGlzLmlzRGV2aWNlID8gdHJ1ZSA6IHRoaXMuaXNQYW5uaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1pvb21pbmdSZWN0YW5nbGUoY2hhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1Bhbm5pbmcgJiYgY2hhcnQuaXNDaGFydERyYWcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVG91Y2ggfHwgKGlzVG91Y2ggJiYgdGhpcy50b3VjaFN0YXJ0TGlzdC5sZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGluY2hUYXJnZXQgPSBpc1RvdWNoID8gZS50YXJnZXQgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvUGFuKGNoYXJ0LCBjaGFydC5heGlzQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoYXJ0LnN0YXJ0TW92ZSA9IChjaGFydC5zdGFydE1vdmUpID8gIXRoaXMuaXNQYW5uaW5nIDogY2hhcnQuc3RhcnRNb3ZlO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5kcmF3Wm9vbWluZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdmFyIGFyZWFCb3VuZHMgPSBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgICAgIHZhciBzdGFydExvY2F0aW9uID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oY2hhcnQucHJldmlvdXNNb3VzZU1vdmVYLCBjaGFydC5wcmV2aW91c01vdXNlTW92ZVkpO1xuICAgICAgICAgICAgdmFyIGVuZExvY2F0aW9uID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVkpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSB0aGlzLnpvb21pbmdSZWN0ID0gaGVscGVyXzEuZ2V0UmVjdExvY2F0aW9uKHN0YXJ0TG9jYXRpb24sIGVuZExvY2F0aW9uLCBhcmVhQm91bmRzKTtcbiAgICAgICAgICAgIGlmIChyZWN0LndpZHRoID4gMCAmJiByZWN0LmhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzWm9vbWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFydC5kaXNhYmxlVHJhY2tUb29sdGlwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFydC5zdmdPYmplY3Quc2V0QXR0cmlidXRlKCdjdXJzb3InLCAnY3Jvc3NoYWlyJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuem9vbWluZy5tb2RlID09PSAnWCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC5oZWlnaHQgPSBhcmVhQm91bmRzLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgcmVjdC55ID0gYXJlYUJvdW5kcy55O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnpvb21pbmcubW9kZSA9PT0gJ1knKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Qud2lkdGggPSBhcmVhQm91bmRzLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICByZWN0LnggPSBhcmVhQm91bmRzLng7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYXJ0LnN2Z09iamVjdC5hcHBlbmRDaGlsZChjaGFydC5yZW5kZXJlci5kcmF3UmVjdGFuZ2xlKG5ldyBoZWxwZXJfMS5SZWN0T3B0aW9uKHRoaXMuZWxlbWVudElkICsgJ19ab29tQXJlYScsIHRoZW1lXzEuVGhlbWUuc2VsZWN0aW9uUmVjdEZpbGwsIHsgY29sb3I6IHRoZW1lXzEuVGhlbWUuc2VsZWN0aW9uUmVjdFN0cm9rZSwgd2lkdGg6IDEgfSwgMSwgcmVjdCwgMCwgMCwgJycsICczJykpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUuZG9QYW4gPSBmdW5jdGlvbiAoY2hhcnQsIGF4ZXMpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2NhbGU7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0O1xuICAgICAgICAgICAgdGhpcy5pc1pvb21lZCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlWDtcbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGVZO1xuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSAhY2hhcnQuZGVsYXlSZWRyYXcgPyBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCA6IHRoaXMub2Zmc2V0O1xuICAgICAgICAgICAgY2hhcnQuZGVsYXlSZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgY2hhcnQuZGlzYWJsZVRyYWNrVG9vbHRpcCA9IHRydWU7XG4gICAgICAgICAgICBheGVzLmZvckVhY2goZnVuY3Rpb24gKGF4aXMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50U2NhbGUgPSBNYXRoLm1heCgxIC8gaGVscGVyXzEubWluTWF4KGF4aXMuem9vbUZhY3RvciwgMCwgMSksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGNoYXJ0LnByZXZpb3VzTW91c2VNb3ZlWCAtIGNoYXJ0Lm1vdXNlWCkgLyBheGlzLnJlY3Qud2lkdGggLyBjdXJyZW50U2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuem9vbVBvc2l0aW9uID0gaGVscGVyXzEubWluTWF4KGF4aXMuem9vbVBvc2l0aW9uICsgb2Zmc2V0LCAwLCAoMSAtIGF4aXMuem9vbUZhY3RvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gKGNoYXJ0LnByZXZpb3VzTW91c2VNb3ZlWSAtIGNoYXJ0Lm1vdXNlWSkgLyBheGlzLnJlY3QuaGVpZ2h0IC8gY3VycmVudFNjYWxlO1xuICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21Qb3NpdGlvbiA9IGhlbHBlcl8xLm1pbk1heChheGlzLnpvb21Qb3NpdGlvbiAtIG9mZnNldCwgMCwgKDEgLSBheGlzLnpvb21GYWN0b3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnpvb21pbmcuZW5hYmxlRGVmZXJyZWRab29taW5nKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IGNoYXJ0Lm1vdXNlWCAtIGNoYXJ0Lm1vdXNlRG93blg7XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IGNoYXJ0Lm1vdXNlWSAtIGNoYXJ0Lm1vdXNlRG93blk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnpvb21pbmcubW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdYJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1knOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNsYXRlWCwgdHJhbnNsYXRlWSwgbnVsbCwgbnVsbCwgY2hhcnQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBeGlzKGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLCBjaGFydCwgY2hhcnQuYXhpc0NvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybVpvb21SZWRyYXcoY2hhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhcnQucHJldmlvdXNNb3VzZU1vdmVYID0gY2hhcnQubW91c2VYO1xuICAgICAgICAgICAgY2hhcnQucHJldmlvdXNNb3VzZU1vdmVZID0gY2hhcnQubW91c2VZO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5wZXJmb3JtWm9vbVJlZHJhdyA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSB0aGlzLnpvb21pbmdSZWN0O1xuICAgICAgICAgICAgY2hhcnQuYW5pbWF0ZVNlcmllcyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNab29tZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVjdC53aWR0aCA+IDAgJiYgcmVjdC5oZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LnN2Z09iamVjdC5zZXRBdHRyaWJ1dGUoJ2N1cnNvcicsICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9ab29tKGNoYXJ0LCBjaGFydC5heGlzQ29sbGVjdGlvbnMsIGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuaXNEb3VibGVUYXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhcnQuZGlzYWJsZVRyYWNrVG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFydC5kaXNhYmxlVHJhY2tUb29sdGlwID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LmRlbGF5UmVkcmF3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgICAgICAgICBjaGFydC5yZWZyZXNoQXhpcygpO1xuICAgICAgICAgICAgICAgICAgICBjaGFydC5yZWZyZXNoQm91bmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLnJlZnJlc2hBeGlzID0gZnVuY3Rpb24gKGxheW91dCwgY2hhcnQsIGF4ZXMpIHtcbiAgICAgICAgICAgIHZhciBtb2RlID0gY2hhcnQuem9vbVNldHRpbmdzLm1vZGU7XG4gICAgICAgICAgICBsYXlvdXQubWVhc3VyZUF4aXMobmV3IGhlbHBlcl8xLlJlY3QoY2hhcnQuaW5pdGlhbENsaXBSZWN0LngsIGNoYXJ0LmluaXRpYWxDbGlwUmVjdC55LCBjaGFydC5pbml0aWFsQ2xpcFJlY3Qud2lkdGgsIGNoYXJ0LmluaXRpYWxDbGlwUmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgIGF4ZXMubWFwKGZ1bmN0aW9uIChheGlzLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcgJiYgbW9kZSAhPT0gJ1knKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dC5kcmF3WEF4aXNMYWJlbHMoYXhpcywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXhpcy5vcmllbnRhdGlvbiA9PT0gJ1ZlcnRpY2FsJyAmJiBtb2RlICE9PSAnWCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0LmRyYXdZQXhpc0xhYmVscyhheGlzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLmRvWm9vbSA9IGZ1bmN0aW9uIChjaGFydCwgYXhlcywgYm91bmRzKSB7XG4gICAgICAgICAgICB2YXIgem9vbVJlY3QgPSB0aGlzLnpvb21pbmdSZWN0O1xuICAgICAgICAgICAgdmFyIG1vZGUgPSB0aGlzLnpvb21pbmcubW9kZTtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YTtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1pGO1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzWlA7XG4gICAgICAgICAgICB2YXIgY3VycmVudFpGO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRaUDtcbiAgICAgICAgICAgIGF4ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzWkYgPSBjdXJyZW50WkYgPSBheGlzLnpvb21GYWN0b3I7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNaUCA9IGN1cnJlbnRaUCA9IGF4aXMuem9vbVBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIGFyZ3NEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS56b29tQ29tcGxldGUsIGF4aXM6IGF4aXMsIHByZXZpb3VzWm9vbUZhY3RvcjogcHJldmlvdXNaRiwgcHJldmlvdXNab29tUG9zaXRpb246IHByZXZpb3VzWlAsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRab29tRmFjdG9yOiBjdXJyZW50WkYsIGN1cnJlbnRab29tUG9zaXRpb246IGN1cnJlbnRaUFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSAhPT0gJ1knKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WlAgKz0gTWF0aC5hYnMoKHpvb21SZWN0LnggLSBib3VuZHMueCkgLyAoYm91bmRzLndpZHRoKSkgKiBheGlzLnpvb21GYWN0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WkYgKj0gKHpvb21SZWN0LndpZHRoIC8gYm91bmRzLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhLmN1cnJlbnRab29tUG9zaXRpb24gPSBjdXJyZW50WlA7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YS5jdXJyZW50Wm9vbUZhY3RvciA9IGN1cnJlbnRaRjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LnRyaWdnZXIoY29uc3RhbnRzXzEuem9vbUNvbXBsZXRlLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlICE9PSAnWCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRaUCArPSAoMSAtIE1hdGguYWJzKCh6b29tUmVjdC5oZWlnaHQgKyAoem9vbVJlY3QueSAtIGJvdW5kcy55KSkgLyAoYm91bmRzLmhlaWdodCkpKSAqIGF4aXMuem9vbUZhY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRaRiAqPSAoem9vbVJlY3QuaGVpZ2h0IC8gYm91bmRzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzRGF0YS5jdXJyZW50Wm9vbUZhY3RvciA9IGN1cnJlbnRaRjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NEYXRhLmN1cnJlbnRab29tUG9zaXRpb24gPSBjdXJyZW50WlA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLnpvb21Db21wbGV0ZSwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuem9vbUZhY3RvciA9IGFyZ3NEYXRhLmN1cnJlbnRab29tRmFjdG9yO1xuICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21Qb3NpdGlvbiA9IGFyZ3NEYXRhLmN1cnJlbnRab29tUG9zaXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnpvb21pbmdSZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3QoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1ab29tUmVkcmF3KGNoYXJ0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUucGVyZm9ybU1vdXNlV2hlZWxab29taW5nID0gZnVuY3Rpb24gKGUsIG1vdXNlWCwgbW91c2VZLCBjaGFydCwgYXhlcykge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICh0aGlzLmJyb3dzZXJOYW1lID09PSAnbW96aWxsYScgJiYgIXRoaXMuaXNQb2ludGVyKSA/XG4gICAgICAgICAgICAgICAgLShlLmRldGFpbCkgLyAzID4gMCA/IDEgOiAtMSA6IChlLndoZWVsRGVsdGEgLyAxMjApID4gMCA/IDEgOiAtMTtcbiAgICAgICAgICAgIHZhciBtb2RlID0gdGhpcy56b29taW5nLm1vZGU7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gMC41O1xuICAgICAgICAgICAgdmFyIGN1bXVsYXRpdmU7XG4gICAgICAgICAgICB2YXIgem9vbUZhY3RvcjtcbiAgICAgICAgICAgIHZhciB6b29tUG9zaXRpb247XG4gICAgICAgICAgICB0aGlzLmlzWm9vbWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlWm9vbUF4ZXNSYW5nZShjaGFydCwgY2hhcnQuYXhpc0NvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgIGNoYXJ0LmRpc2FibGVUcmFja1Rvb2x0aXAgPSB0cnVlO1xuICAgICAgICAgICAgYXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChheGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKChheGlzLm9yaWVudGF0aW9uID09PSAnVmVydGljYWwnICYmIG1vZGUgIT09ICdYJykgfHxcbiAgICAgICAgICAgICAgICAgICAgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJyAmJiBtb2RlICE9PSAnWScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmUgPSBNYXRoLm1heChNYXRoLm1heCgxIC8gaGVscGVyXzEubWluTWF4KGF4aXMuem9vbUZhY3RvciwgMCwgMSksIDEpICsgKDAuMjUgKiBkaXJlY3Rpb24pLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1bXVsYXRpdmUgPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luID0gYXhpcy5vcmllbnRhdGlvbiA9PT0gJ0hvcml6b250YWwnID8gbW91c2VYIC8gYXhpcy5yZWN0LndpZHRoIDogMSAtIChtb3VzZVkgLyBheGlzLnJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbiA9IG9yaWdpbiA+IDEgPyAxIDogb3JpZ2luIDwgMCA/IDAgOiBvcmlnaW47XG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gKGN1bXVsYXRpdmUgPT09IDEpID8gMSA6IGhlbHBlcl8xLm1pbk1heCgxIC8gY3VtdWxhdGl2ZSwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tUG9zaXRpb24gPSAoY3VtdWxhdGl2ZSA9PT0gMSkgPyAwIDogYXhpcy56b29tUG9zaXRpb24gKyAoKGF4aXMuem9vbUZhY3RvciAtIHpvb21GYWN0b3IpICogb3JpZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChheGlzLnpvb21Qb3NpdGlvbiAhPT0gem9vbVBvc2l0aW9uIHx8IGF4aXMuem9vbUZhY3RvciAhPT0gem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSAoem9vbVBvc2l0aW9uICsgem9vbUZhY3RvcikgPiAxID8gKDEgLSB6b29tUG9zaXRpb24pIDogem9vbUZhY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21GYWN0b3IgPSB6b29tRmFjdG9yO1xuICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21Qb3NpdGlvbiA9IHpvb21Qb3NpdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybVpvb21SZWRyYXcoY2hhcnQpO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5wZXJmb3JtUGluY2hab29taW5nID0gZnVuY3Rpb24gKGUsIGNoYXJ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29taW5nUmVjdC53aWR0aCA+IDAgJiYgdGhpcy56b29taW5nUmVjdC5oZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVab29tQXhlc1JhbmdlKGNoYXJ0LCBjaGFydC5heGlzQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5pc1pvb21lZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzUGFubmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9ICFjaGFydC5kZWxheVJlZHJhdyA/IGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0IDogdGhpcy5vZmZzZXQ7XG4gICAgICAgICAgICBjaGFydC5kZWxheVJlZHJhdyA9IHRydWU7XG4gICAgICAgICAgICBjaGFydC5kaXNhYmxlVHJhY2tUb29sdGlwID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gY2hhcnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciB0b3VjaERvd24gPSB0aGlzLnRvdWNoU3RhcnRMaXN0O1xuICAgICAgICAgICAgdmFyIHRvdWNoTW92ZSA9IHRoaXMudG91Y2hNb3ZlTGlzdDtcbiAgICAgICAgICAgIHZhciB0b3VjaDBTdGFydFggPSB0b3VjaERvd25bMF0ucGFnZVggLSBlbGVtZW50T2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICB2YXIgdG91Y2gwU3RhcnRZID0gdG91Y2hEb3duWzBdLnBhZ2VZIC0gZWxlbWVudE9mZnNldC50b3A7XG4gICAgICAgICAgICB2YXIgdG91Y2gwRW5kWCA9IHRvdWNoTW92ZVswXS5wYWdlWCAtIGVsZW1lbnRPZmZzZXQubGVmdDtcbiAgICAgICAgICAgIHZhciB0b3VjaDBFbmRZID0gdG91Y2hNb3ZlWzBdLnBhZ2VZIC0gZWxlbWVudE9mZnNldC50b3A7XG4gICAgICAgICAgICB2YXIgdG91Y2gxU3RhcnRYID0gdG91Y2hEb3duWzFdLnBhZ2VYIC0gZWxlbWVudE9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHRvdWNoMVN0YXJ0WSA9IHRvdWNoRG93blsxXS5wYWdlWSAtIGVsZW1lbnRPZmZzZXQudG9wO1xuICAgICAgICAgICAgdmFyIHRvdWNoMUVuZFggPSB0b3VjaE1vdmVbMV0ucGFnZVggLSBlbGVtZW50T2Zmc2V0LmxlZnQ7XG4gICAgICAgICAgICB2YXIgdG91Y2gxRW5kWSA9IHRvdWNoTW92ZVsxXS5wYWdlWSAtIGVsZW1lbnRPZmZzZXQudG9wO1xuICAgICAgICAgICAgdmFyIHNjYWxlWDtcbiAgICAgICAgICAgIHZhciBzY2FsZVk7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlWFZhbHVlO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZVlWYWx1ZTtcbiAgICAgICAgICAgIHZhciBwaW5jaFJlY3Q7XG4gICAgICAgICAgICB2YXIgY2xpcFg7XG4gICAgICAgICAgICB2YXIgY2xpcFk7XG4gICAgICAgICAgICBzY2FsZVggPSBNYXRoLmFicyh0b3VjaDBFbmRYIC0gdG91Y2gxRW5kWCkgLyBNYXRoLmFicyh0b3VjaDBTdGFydFggLSB0b3VjaDFTdGFydFgpO1xuICAgICAgICAgICAgc2NhbGVZID0gTWF0aC5hYnModG91Y2gwRW5kWSAtIHRvdWNoMUVuZFkpIC8gTWF0aC5hYnModG91Y2gwU3RhcnRZIC0gdG91Y2gxU3RhcnRZKTtcbiAgICAgICAgICAgIGNsaXBYID0gKCh0aGlzLm9mZnNldC54IC0gdG91Y2gwRW5kWCkgLyBzY2FsZVgpICsgdG91Y2gwU3RhcnRYO1xuICAgICAgICAgICAgY2xpcFkgPSAoKHRoaXMub2Zmc2V0LnkgLSB0b3VjaDBFbmRZKSAvIHNjYWxlWSkgKyB0b3VjaDBTdGFydFk7XG4gICAgICAgICAgICBwaW5jaFJlY3QgPSBuZXcgaGVscGVyXzEuUmVjdChjbGlwWCwgY2xpcFksIHRoaXMub2Zmc2V0LndpZHRoIC8gc2NhbGVYLCB0aGlzLm9mZnNldC5oZWlnaHQgLyBzY2FsZVkpO1xuICAgICAgICAgICAgdHJhbnNsYXRlWFZhbHVlID0gKHRvdWNoMEVuZFggLSAoc2NhbGVYICogdG91Y2gwU3RhcnRYKSk7XG4gICAgICAgICAgICB0cmFuc2xhdGVZVmFsdWUgPSAodG91Y2gwRW5kWSAtIChzY2FsZVkgKiB0b3VjaDBTdGFydFkpKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oc2NhbGVYIC0gc2NhbGVYKSAmJiAhaXNOYU4oc2NhbGVZIC0gc2NhbGVZKSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy56b29taW5nLm1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWFknOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNsYXRlWFZhbHVlLCB0cmFuc2xhdGVZVmFsdWUsIHNjYWxlWCwgc2NhbGVZLCBjaGFydCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zZm9ybSh0cmFuc2xhdGVYVmFsdWUsIDAsIHNjYWxlWCwgMSwgY2hhcnQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1knOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0oMCwgdHJhbnNsYXRlWVZhbHVlLCAxLCBzY2FsZVksIGNoYXJ0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUGluY2hab29tRmFjdG9yKGNoYXJ0LCBwaW5jaFJlY3QpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXhpcyhjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbCwgY2hhcnQsIGNoYXJ0LmF4aXNDb2xsZWN0aW9ucyk7XG4gICAgICAgICAgICBjaGFydC5zdGFydE1vdmUgPSAoY2hhcnQuc3RhcnRNb3ZlKSA/ICF0aGlzLmlzUGFubmluZyA6IGNoYXJ0LnN0YXJ0TW92ZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5jYWxjdWxhdGVQaW5jaFpvb21GYWN0b3IgPSBmdW5jdGlvbiAoY2hhcnQsIHBpbmNoUmVjdCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtb2RlID0gdGhpcy56b29taW5nLm1vZGU7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uTWluO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbk1heDtcbiAgICAgICAgICAgIHZhciByYW5nZU1pbjtcbiAgICAgICAgICAgIHZhciByYW5nZU1heDtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBheGlzVHJhbnM7XG4gICAgICAgICAgICBjaGFydC5heGlzQ29sbGVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYXhpcywgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJyAmJiBtb2RlICE9PSAnWScpIHx8XG4gICAgICAgICAgICAgICAgICAgIChheGlzLm9yaWVudGF0aW9uID09PSAnVmVydGljYWwnICYmIG1vZGUgIT09ICdYJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMub3JpZW50YXRpb24gPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwaW5jaFJlY3QueCAtIF90aGlzLm9mZnNldC54O1xuICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RyYW5zID0gYXhpcy5yZWN0LndpZHRoIC8gX3RoaXMuem9vbUF4ZXNbaW5kZXhdLmRlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VNaW4gPSB2YWx1ZSAvIGF4aXNUcmFucyArIF90aGlzLnpvb21BeGVzW2luZGV4XS5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBpbmNoUmVjdC54ICsgcGluY2hSZWN0LndpZHRoIC0gX3RoaXMub2Zmc2V0Lng7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZU1heCA9IHZhbHVlIC8gYXhpc1RyYW5zICsgX3RoaXMuem9vbUF4ZXNbaW5kZXhdLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcGluY2hSZWN0LnkgLSBfdGhpcy5vZmZzZXQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNUcmFucyA9IGF4aXMucmVjdC5oZWlnaHQgLyBfdGhpcy56b29tQXhlc1tpbmRleF0uZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZU1pbiA9ICh2YWx1ZSAqIC0xICsgYXhpcy5yZWN0LmhlaWdodCkgLyBheGlzVHJhbnMgKyBfdGhpcy56b29tQXhlc1tpbmRleF0ubWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwaW5jaFJlY3QueSArIHBpbmNoUmVjdC5oZWlnaHQgLSBfdGhpcy5vZmZzZXQueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlTWF4ID0gKHZhbHVlICogLTEgKyBheGlzLnJlY3QuaGVpZ2h0KSAvIGF4aXNUcmFucyArIF90aGlzLnpvb21BeGVzW2luZGV4XS5taW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uTWluID0gTWF0aC5taW4ocmFuZ2VNaW4sIHJhbmdlTWF4KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uTWF4ID0gTWF0aC5tYXgocmFuZ2VNaW4sIHJhbmdlTWF4KTtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy56b29tUG9zaXRpb24gPSAoc2VsZWN0aW9uTWluIC0gX3RoaXMuem9vbUF4ZXNbaW5kZXhdLmFjdHVhbE1pbikgLyBfdGhpcy56b29tQXhlc1tpbmRleF0uYWN0dWFsRGVsdGE7XG4gICAgICAgICAgICAgICAgICAgIGF4aXMuem9vbUZhY3RvciA9IChzZWxlY3Rpb25NYXggLSBzZWxlY3Rpb25NaW4pIC8gX3RoaXMuem9vbUF4ZXNbaW5kZXhdLmFjdHVhbERlbHRhO1xuICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21Qb3NpdGlvbiA9IGF4aXMuem9vbVBvc2l0aW9uIDwgMCA/IDAgOiBheGlzLnpvb21Qb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgYXhpcy56b29tRmFjdG9yID0gYXhpcy56b29tRmFjdG9yID4gMSA/IDEgOiBheGlzLnpvb21GYWN0b3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLnNldFRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc1gsIHRyYW5zWSwgc2NhbGVYLCBzY2FsZVksIGNoYXJ0LCBpc1BpbmNoKSB7XG4gICAgICAgICAgICBjaGFydC5zZXJpZXNFbGVtZW50cy5zZXRBdHRyaWJ1dGUoJ2NsaXAtcGF0aCcsICd1cmwoIycgKyB0aGlzLmVsZW1lbnRJZCArICdfQ2hhcnRBcmVhQ2xpcFJlY3RfKScpO1xuICAgICAgICAgICAgdmFyIHRyYW5zbGF0ZTtcbiAgICAgICAgICAgIHZhciB4QXhpc0xvYztcbiAgICAgICAgICAgIHZhciB5QXhpc0xvYztcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRyYW5zWCAhPT0gbnVsbCAmJiB0cmFuc1kgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjaGFydC52aXNpYmxlU2VyaWVzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHhBeGlzTG9jID0gY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyA/IHZhbHVlLnlBeGlzLnJlY3QueCA6IHZhbHVlLnhBeGlzLnJlY3QueDtcbiAgICAgICAgICAgICAgICAgICAgeUF4aXNMb2MgPSBjaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gdmFsdWUueEF4aXMucmVjdC55IDogdmFsdWUueUF4aXMucmVjdC55O1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGUgPSAndHJhbnNsYXRlKCcgKyAodHJhbnNYICsgKGlzUGluY2ggPyAoc2NhbGVYICogeEF4aXNMb2MpIDogeEF4aXNMb2MpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnLCcgKyAodHJhbnNZICsgKGlzUGluY2ggPyAoc2NhbGVZICogeUF4aXNMb2MpIDogeUF4aXNMb2MpKSArICcpJztcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlID0gKHNjYWxlWCB8fCBzY2FsZVkpID8gdHJhbnNsYXRlICsgJyBzY2FsZSgnICsgc2NhbGVYICsgJyAnICsgc2NhbGVZICsgJyknIDogdHJhbnNsYXRlO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zZXJpZXNFbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGhlbHBlcl8xLmdldEVsZW1lbnQoY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyB2YWx1ZS5pbmRleCArICdfRGF0YUxhYmVsQ29sbGVjdGlvbnMnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmVycm9yQmFyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZXJyb3JCYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgdHJhbnNsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3ltYm9sRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3ltYm9sRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIHRyYW5zbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnRleHRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS50ZXh0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zaGFwZUVsZW1lbnQuc2V0QXR0cmlidXRlKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5jYWxjdWxhdGVab29tQXhlc1JhbmdlID0gZnVuY3Rpb24gKGNoYXJ0LCBheGVzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHJhbmdlO1xuICAgICAgICAgICAgdmFyIGF4aXNSYW5nZTtcbiAgICAgICAgICAgIGNoYXJ0LmF4aXNDb2xsZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChheGlzLCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGF4aXNSYW5nZSA9IGF4aXMuYWN0dWFsUmFuZ2U7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnpvb21BeGVzW2luZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0LmRlbGF5UmVkcmF3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy56b29tQXhlc1tpbmRleF0ubWluID0gYXhpc1JhbmdlLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnpvb21BeGVzW2luZGV4XS5kZWx0YSA9IGF4aXNSYW5nZS5kZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxNaW46IGF4aXNSYW5nZS5taW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxEZWx0YTogYXhpc1JhbmdlLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBheGlzUmFuZ2UubWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGE6IGF4aXNSYW5nZS5kZWx0YVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy56b29tQXhlc1tpbmRleF0gPSByYW5nZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUuc2hvd1pvb21pbmdUb29sa2l0ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgdG9vbGJveEl0ZW1zID0gdGhpcy56b29taW5nLnRvb2xiYXJJdGVtcztcbiAgICAgICAgICAgIHZhciBhcmVhQm91bmRzID0gY2hhcnQuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3Q7XG4gICAgICAgICAgICB2YXIgc3BhY2luZyA9IDU7XG4gICAgICAgICAgICB2YXIgcmVuZGVyID0gY2hhcnQucmVuZGVyZXI7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5pc0RldmljZSA/IDEgOiB0b29sYm94SXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGljb25TaXplID0gdGhpcy5pc0RldmljZSA/IGhlbHBlcl8xLm1lYXN1cmVUZXh0KCdSZXNldCBab29tJywgeyBzaXplOiAnMTJweCcgfSkud2lkdGggOiAxNjtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmlzRGV2aWNlID8gaGVscGVyXzEubWVhc3VyZVRleHQoJ1Jlc2V0IFpvb20nLCB7IHNpemU6ICcxMnB4JyB9KS5oZWlnaHQgOiAyMjtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IChsZW5ndGggKiBpY29uU2l6ZSkgKyAoKGxlbmd0aCArIDEpICogc3BhY2luZykgKyAoKGxlbmd0aCAtIDEpICogc3BhY2luZyk7XG4gICAgICAgICAgICB2YXIgdHJhbnNYID0gYXJlYUJvdW5kcy54ICsgYXJlYUJvdW5kcy53aWR0aCAtIHdpZHRoIC0gc3BhY2luZztcbiAgICAgICAgICAgIHZhciB0cmFuc1kgPSAoYXJlYUJvdW5kcy55ICsgc3BhY2luZyk7XG4gICAgICAgICAgICB2YXIgeFBvc2l0aW9uID0gc3BhY2luZztcbiAgICAgICAgICAgIHZhciBvdXRlckVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgdG9vbGtpdCA9IHRoaXMudG9vbGtpdDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgdmFyIHNoYWRvd0VsZW1lbnQgPSAnPGZpbHRlciBpZD1cImNoYXJ0X3NoYWRvd1wiIGhlaWdodD1cIjEzMCVcIj48ZmVHYXVzc2lhbkJsdXIgaW49XCJTb3VyY2VBbHBoYVwiIHN0ZERldmlhdGlvbj1cIjVcIi8+JztcbiAgICAgICAgICAgIHNoYWRvd0VsZW1lbnQgKz0gJzxmZU9mZnNldCBkeD1cIi0zXCIgZHk9XCI0XCIgcmVzdWx0PVwib2Zmc2V0Ymx1clwiLz48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPVwibGluZWFyXCIgc2xvcGU9XCIxXCIvPic7XG4gICAgICAgICAgICBzaGFkb3dFbGVtZW50ICs9ICc8L2ZlQ29tcG9uZW50VHJhbnNmZXI+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlLz48ZmVNZXJnZU5vZGUgaW49XCJTb3VyY2VHcmFwaGljXCIvPjwvZmVNZXJnZT48L2ZpbHRlcj4nO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCB8fCBoZWxwZXJfMS5nZXRFbGVtZW50KHRoaXMuZWxlbWVudElkICsgJ19ab29taW5nX0tpdENvbGxlY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWZFbGVtZW50ID0gcmVuZGVyLmNyZWF0ZURlZnMoKTtcbiAgICAgICAgICAgIHRvb2xib3hJdGVtcyA9IHRoaXMuaXNEZXZpY2UgPyBbJ1Jlc2V0J10gOiB0b29sYm94SXRlbXM7XG4gICAgICAgICAgICBkZWZFbGVtZW50LmlubmVySFRNTCA9IHNoYWRvd0VsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnRvb2xraXRFbGVtZW50cyA9IHJlbmRlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZWxlbWVudElkICsgJ19ab29taW5nX0tpdENvbGxlY3Rpb24nLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgdHJhbnNYICsgJywnICsgdHJhbnNZICsgJyknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudG9vbGtpdEVsZW1lbnRzLmFwcGVuZENoaWxkKGRlZkVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy50b29sa2l0RWxlbWVudHMuYXBwZW5kQ2hpbGQocmVuZGVyLmRyYXdSZWN0YW5nbGUobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfUmVjdCcsICcjZmFmYWZhJywgeyBjb2xvcjogJ3RyYW5zcGFyZW50Jywgd2lkdGg6IDEgfSwgMSwgbmV3IGhlbHBlcl8xLlJlY3QoMCwgMCwgd2lkdGgsIChoZWlnaHQgKyAoc3BhY2luZyAqIDIpKSksIDAsIDApKSk7XG4gICAgICAgICAgICBvdXRlckVsZW1lbnQgPSByZW5kZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19SZWN0JywgJyNmYWZhZmEnLCB7IGNvbG9yOiAndHJhbnNwYXJlbnQnLCB3aWR0aDogMSB9LCAwLjEsIG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIHdpZHRoLCAoaGVpZ2h0ICsgKHNwYWNpbmcgKiAyKSkpLCAwLCAwKSk7XG4gICAgICAgICAgICBvdXRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdmaWx0ZXInLCAndXJsKCNjaGFydF9zaGFkb3cpJyk7XG4gICAgICAgICAgICB0aGlzLnRvb2xraXRFbGVtZW50cy5hcHBlbmRDaGlsZChvdXRlckVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50SXRlbSA9IHRvb2xib3hJdGVtc1tpIC0gMV07XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHJlbmRlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgeFBvc2l0aW9uICsgJywnICsgKHRoaXMuaXNEZXZpY2UgPyBzcGFjaW5nIDogKHNwYWNpbmcgKyAzKSkgKyAnKSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Bhbic6XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sa2l0LmNyZWF0ZVBhbkJ1dHRvbihlbGVtZW50LCB0aGlzLnRvb2xraXRFbGVtZW50cywgY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1pvb20nOlxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGtpdC5jcmVhdGVab29tQnV0dG9uKGVsZW1lbnQsIHRoaXMudG9vbGtpdEVsZW1lbnRzLCBjaGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWm9vbUluJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xraXQuY3JlYXRlWm9vbUluQnV0dG9uKGVsZW1lbnQsIHRoaXMudG9vbGtpdEVsZW1lbnRzLCBjaGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWm9vbU91dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sa2l0LmNyZWF0ZVpvb21PdXRCdXR0b24oZWxlbWVudCwgdGhpcy50b29sa2l0RWxlbWVudHMsIGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZXNldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sa2l0LmNyZWF0ZVJlc2V0QnV0dG9uKGVsZW1lbnQsIHRoaXMudG9vbGtpdEVsZW1lbnRzLCBjaGFydCwgdGhpcy5pc0RldmljZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeFBvc2l0aW9uICs9IGljb25TaXplICsgKHNwYWNpbmcgKiAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9vbGtpdEVsZW1lbnRzLnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHRoaXMuaXNEZXZpY2UgPyAnMScgOiAnJyArIHRoaXMuem9vbWtpdE9wYWNpdHkpO1xuICAgICAgICAgICAgdGhpcy50b29sa2l0RWxlbWVudHMuc2V0QXR0cmlidXRlKCdjdXJzb3InLCAnYXV0bycpO1xuICAgICAgICAgICAgY2hhcnQuc3ZnT2JqZWN0LmFwcGVuZENoaWxkKHRoaXMudG9vbGtpdEVsZW1lbnRzKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnRvb2xraXRFbGVtZW50cywgJ21vdXNlbW92ZSB0b3VjaHN0YXJ0JywgdGhpcy56b29tVG9vbGtpdE1vdmUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLnRvb2xraXRFbGVtZW50cywgJ21vdXNlbGVhdmUgdG91Y2hlbmQnLCB0aGlzLnpvb21Ub29sa2l0TGVhdmUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUGFubmluZykge1xuICAgICAgICAgICAgICAgICAgICB0b29sa2l0LnBhbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5hcHBseVpvb21Ub29sa2l0ID0gZnVuY3Rpb24gKGNoYXJ0LCBheGVzKSB7XG4gICAgICAgICAgICB2YXIgc2hvd1Rvb2xraXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGF4ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgICAgIHNob3dUb29sa2l0ID0gKHNob3dUb29sa2l0IHx8IChheGlzLnpvb21GYWN0b3IgIT09IDEgfHwgYXhpcy56b29tUG9zaXRpb24gIT09IDApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHNob3dUb29sa2l0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Wm9vbWluZ1Rvb2xraXQoY2hhcnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNab29tZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sa2l0LnJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNab29tZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUuem9vbVRvb2xraXRNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy50b29sa2l0RWxlbWVudHM7XG4gICAgICAgICAgICB2YXIgb3BhY2l0eSA9ICtlbGVtZW50LmdldEF0dHJpYnV0ZSgnb3BhY2l0eScpO1xuICAgICAgICAgICAgdGhpcy56b29ta2l0T3BhY2l0eSA9IDE7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsICcnICsgdGhpcy56b29ta2l0T3BhY2l0eSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLnpvb21Ub29sa2l0TGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnRvb2xraXRFbGVtZW50cztcbiAgICAgICAgICAgIHRoaXMuem9vbWtpdE9wYWNpdHkgPSAwLjM7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsICcnICsgdGhpcy56b29ta2l0T3BhY2l0eSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmNoYXJ0LmVsZW1lbnQsIHRoaXMud2hlZWxFdmVudCwgdGhpcy5jaGFydE1vdXNlV2hlZWwsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24odGhpcy5jYW5jZWxFdmVudCwgdGhpcy5tb3VzZUNhbmNlbEhhbmRsZXIsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5jaGFydC5lbGVtZW50LCB0aGlzLndoZWVsRXZlbnQsIHRoaXMuY2hhcnRNb3VzZVdoZWVsKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub2ZmKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub2ZmKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9mZihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9mZih0aGlzLmNhbmNlbEV2ZW50LCB0aGlzLm1vdXNlQ2FuY2VsSGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLmNoYXJ0TW91c2VXaGVlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGNoYXJ0LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc3ZnUmVjdCA9IGhlbHBlcl8xLmdldEVsZW1lbnQoY2hhcnQuZWxlbWVudC5pZCArICdfc3ZnJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgbW91c2VYID0gKGUuY2xpZW50WCAtIG9mZnNldC5sZWZ0KSAtIE1hdGgubWF4KHN2Z1JlY3QubGVmdCAtIG9mZnNldC5sZWZ0LCAwKTtcbiAgICAgICAgICAgIHZhciBtb3VzZVkgPSAoZS5jbGllbnRZIC0gb2Zmc2V0LnRvcCkgLSBNYXRoLm1heChzdmdSZWN0LnRvcCAtIG9mZnNldC50b3AsIDApO1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbWluZy5lbmFibGVNb3VzZVdoZWVsWm9vbWluZyAmJlxuICAgICAgICAgICAgICAgIGhlbHBlcl8yLndpdGhJbkJvdW5kcyhtb3VzZVgsIG1vdXNlWSwgY2hhcnQuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QpKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybU1vdXNlV2hlZWxab29taW5nKGUsIG1vdXNlWCwgbW91c2VZLCBjaGFydCwgY2hhcnQuYXhpc0NvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHRvdWNoZXMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCAmJiB0aGlzLmlzSU9TICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmlzUGFubmluZyB8fCAoY2hhcnQuaXNEb3VibGVUYXApXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy56b29taW5nLmVuYWJsZVBpbmNoWm9vbWluZyAmJiB0aGlzLnRvdWNoU3RhcnRMaXN0Lmxlbmd0aCA+IDEpKSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvdWNoZXMgPSBlLnRvdWNoZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhcnQuaXNDaGFydERyYWcpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW92ZUxpc3QgPSB0aGlzLmFkZFRvdWNoUG9pbnRlcih0aGlzLnRvdWNoTW92ZUxpc3QsIGUsIHRvdWNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy56b29taW5nLmVuYWJsZVBpbmNoWm9vbWluZyAmJiB0aGlzLnRvdWNoTW92ZUxpc3QubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy50b3VjaFN0YXJ0TGlzdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1QaW5jaFpvb21pbmcoZSwgY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyWm9vbWluZyhlLCBjaGFydCwgY2hhcnQuaXNUb3VjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIHZhciB0b3VjaGVzID0gbnVsbDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQ7XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgICAgICAgICB0b3VjaGVzID0gZS50b3VjaGVzO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmlkLmluZGV4T2YoY2hhcnQuZWxlbWVudC5pZCArICdfWm9vbWluZ18nKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi53aXRoSW5Cb3VuZHMoY2hhcnQucHJldmlvdXNNb3VzZU1vdmVYLCBjaGFydC5wcmV2aW91c01vdXNlTW92ZVksIGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0KSkge1xuICAgICAgICAgICAgICAgIGNoYXJ0LmlzQ2hhcnREcmFnID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFydC5pc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0TGlzdCA9IHRoaXMuYWRkVG91Y2hQb2ludGVyKHRoaXMudG91Y2hTdGFydExpc3QsIGUsIHRvdWNoZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5tb3VzZVVwSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHBlcmZvcm1ab29tUmVkcmF3ID0gZS50YXJnZXQuaWQuaW5kZXhPZihjaGFydC5lbGVtZW50LmlkICsgJ19ab29tT3V0XycpID09PSAtMSB8fFxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmlkLmluZGV4T2YoY2hhcnQuZWxlbWVudC5pZCArICdfWm9vbUluXycpID09PSAtMTtcbiAgICAgICAgICAgIGlmIChjaGFydC5pc0NoYXJ0RHJhZyB8fCBwZXJmb3JtWm9vbVJlZHJhdykge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybVpvb21SZWRyYXcoY2hhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYXJ0LmlzVG91Y2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQuaXNEb3VibGVUYXAgJiYgaGVscGVyXzIud2l0aEluQm91bmRzKGNoYXJ0Lm1vdXNlWCwgY2hhcnQubW91c2VZLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdClcbiAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy50b3VjaFN0YXJ0TGlzdC5sZW5ndGggPT09IDEgJiYgdGhpcy5pc1pvb21lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xraXQucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0TGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGNoYXJ0LmlzRG91YmxlVGFwID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFpvb20ucHJvdG90eXBlLm1vdXNlQ2FuY2VsSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1pvb21lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybVpvb21SZWRyYXcodGhpcy5jaGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBpbmNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydExpc3QgPSBbXTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlTGlzdCA9IFtdO1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5hZGRUb3VjaFBvaW50ZXIgPSBmdW5jdGlvbiAodG91Y2hMaXN0LCBlLCB0b3VjaGVzKSB7XG4gICAgICAgICAgICBpZiAodG91Y2hlcykge1xuICAgICAgICAgICAgICAgIHRvdWNoTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IHRvdWNoZXMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaExpc3QucHVzaCh7IHBhZ2VYOiB0b3VjaGVzW2ldLmNsaWVudFgsIHBhZ2VZOiB0b3VjaGVzW2ldLmNsaWVudFksIHBvaW50ZXJJZDogbnVsbCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3VjaExpc3QgPSB0b3VjaExpc3QgPyB0b3VjaExpc3QgOiBbXTtcbiAgICAgICAgICAgICAgICBpZiAodG91Y2hMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaExpc3QucHVzaCh7IHBhZ2VYOiBlLmNsaWVudFgsIHBhZ2VZOiBlLmNsaWVudFksIHBvaW50ZXJJZDogZS5wb2ludGVySWQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzIgPSB0b3VjaExpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvdWNoTGlzdFtpXS5wb2ludGVySWQgPT09IGUucG9pbnRlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hMaXN0W2ldID0geyBwYWdlWDogZS5jbGllbnRYLCBwYWdlWTogZS5jbGllbnRZLCBwb2ludGVySWQ6IGUucG9pbnRlcklkIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3VjaExpc3QucHVzaCh7IHBhZ2VYOiBlLmNsaWVudFgsIHBhZ2VZOiBlLmNsaWVudFksIHBvaW50ZXJJZDogZS5wb2ludGVySWQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG91Y2hMaXN0O1xuICAgICAgICB9O1xuICAgICAgICBab29tLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdab29tJztcbiAgICAgICAgfTtcbiAgICAgICAgWm9vbS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBab29tO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5ab29tID0gWm9vbTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvdXNlci1pbnRlcmFjdGlvbi96b29taW5nLmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBoZWxwZXJfMSwgaGVscGVyXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFRvb2xraXQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBUb29sa2l0KGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0ID0gY2hhcnQ7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRJZCA9IGNoYXJ0LmVsZW1lbnQuaWQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNvbG9yID0gJyNmZjQwODEnO1xuICAgICAgICAgICAgdGhpcy5maWxsQ29sb3IgPSAnIzczNzM3Myc7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuY3JlYXRlUGFuQnV0dG9uID0gZnVuY3Rpb24gKGNoaWxkRWxlbWVudCwgcGFyZW50RWxlbWVudCwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXIgPSB0aGlzLmNoYXJ0LnJlbmRlcmVyO1xuICAgICAgICAgICAgdmFyIGZpbGxDb2xvciA9IHRoaXMuY2hhcnQuem9vbU1vZHVsZS5pc1Bhbm5pbmcgPyB0aGlzLnNlbGVjdGlvbkNvbG9yIDogdGhpcy5maWxsQ29sb3I7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJ001LDNoMi4zTDcuMjc1LDUuODc1aDEuNEw4LjY1LDNIMTFMOCwwTDUsM3ogTTMsMTFWOC43bDIuODc1LDAuMDI1di0xLjRMMyw3LjM1VjVMMCw4TDMsJztcbiAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnMTF6IE0xMSwxM0g4LjdsMC4wMjUtMi44NzVoLTEuNEw3LjM1LDEzSDVsMywzTDExLDEzeiBNMTMsNXYyLjNsLTIuODc1LTAuMDI1djEuNEwxMyw4LjY1VjExbDMtM0wxMyw1eic7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuaWQgPSB0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19QYW4nO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMuY2hhcnQuZ2V0TG9jYWxpemVkTGFiZWwoJ1BhbicpKTtcbiAgICAgICAgICAgIHRoaXMucGFuRWxlbWVudHMgPSBjaGlsZEVsZW1lbnQ7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuYXBwZW5kQ2hpbGQocmVuZGVyLmRyYXdSZWN0YW5nbGUobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfUGFuXzEnLCAndHJhbnNwYXJlbnQnLCB7fSwgMSwgbmV3IGhlbHBlcl8xLlJlY3QoMCwgMCwgMTYsIDE2KSkpKTtcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1BhdGgobmV3IGhlbHBlcl8xLlBhdGhPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfUGFuXzInLCBmaWxsQ29sb3IsIG51bGwsIG51bGwsIDEsIG51bGwsIGRpcmVjdGlvbikpKTtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cyhjaGlsZEVsZW1lbnQsIHRoaXMucGFuKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuY3JlYXRlWm9vbUJ1dHRvbiA9IGZ1bmN0aW9uIChjaGlsZEVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGNoYXJ0KSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyID0gdGhpcy5jaGFydC5yZW5kZXJlcjtcbiAgICAgICAgICAgIHZhciBmaWxsQ29sb3IgPSB0aGlzLmNoYXJ0Lnpvb21Nb2R1bGUuaXNQYW5uaW5nID8gdGhpcy5maWxsQ29sb3IgOiB0aGlzLnNlbGVjdGlvbkNvbG9yO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdNMC4wMDEsMTQuNjI5TDEuMzcyLDE2bDQuNTcxLTQuNTcxdi0wLjY4NWwwLjIyOC0wLjI3NGMxLjA1MSwwLjg2OCwyLjQyMywxLjQxNywzLjg4NSwxLjQxN2MzLjI5MSwwLCc7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gJzUuOTQzLTIuNjUxLDUuOTQzLTUuOTQzUzEzLjM5NSwwLDEwLjEwMywwUzQuMTYsMi42NTEsNC4xNiw1Ljk0M2MwLDEuNTA4LDAuNTAzLDIuODM0LDEuNDE3LDMuODg1bC0wLjI3NCwwLjIyOEg0LjU3MSc7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gKyAnTDAuMDAxLDE0LjYyOUwwLjAwMSwxNC42Mjl6IE01Ljk0Myw1Ljk0M2MwLTIuMjg1LDEuODI4LTQuMTE0LDQuMTE0LTQuMTE0czQuMTE0LDEuODI4LDQuMTE0LCc7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuaWQgPSB0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tJztcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLmNoYXJ0LmdldExvY2FsaXplZExhYmVsKCdab29tJykpO1xuICAgICAgICAgICAgdGhpcy56b29tRWxlbWVudHMgPSBjaGlsZEVsZW1lbnQ7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuYXBwZW5kQ2hpbGQocmVuZGVyLmRyYXdSZWN0YW5nbGUobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfWm9vbV8xJywgJ3RyYW5zcGFyZW50Jywge30sIDEsIG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIDE2LCAxNikpKSk7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuYXBwZW5kQ2hpbGQocmVuZGVyLmRyYXdQYXRoKG5ldyBoZWxwZXJfMS5QYXRoT3B0aW9uKHRoaXMuZWxlbWVudElkICsgJ19ab29taW5nX1pvb21fMycsIGZpbGxDb2xvciwgbnVsbCwgbnVsbCwgMSwgbnVsbCwgZGlyZWN0aW9uICsgJzQuMTE0cy0xLjgyOCw0LjExNC00LjExNCw0LjExNFM1Ljk0Myw4LjIyOSw1Ljk0Myw1Ljk0M3onKSkpO1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKGNoaWxkRWxlbWVudCwgdGhpcy56b29tKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuY3JlYXRlWm9vbUluQnV0dG9uID0gZnVuY3Rpb24gKGNoaWxkRWxlbWVudCwgcGFyZW50RWxlbWVudCwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXIgPSB0aGlzLmNoYXJ0LnJlbmRlcmVyO1xuICAgICAgICAgICAgdmFyIGZpbGxDb2xvciA9IHRoaXMuZmlsbENvbG9yO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdNMTAuMTAzLDBDNi44MTIsMCw0LjE2LDIuNjUxLDQuMTYsNS45NDNjMCwxLjUwOSwwLjUwMywyLjgzNCwxLjQxNywzLjg4NWwtMC4yNzQsMC4yMjlINC41NzFMMCwnO1xuICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcxNC42MjhsMCwwTDEuMzcyLDE2bDQuNTcxLTQuNTcydi0wLjY4NWwwLjIyOC0wLjI3NWMxLjA1MiwwLjg2OCwyLjQyMywxLjQxNywzLjg4NSwxLjQxN2MzLjI5MSwwLDUuOTQzLTIuNjUxLCc7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gJzUuOTQzLTUuOTQzQzE2LDIuNjUxLDEzLjM5NSwwLDEwLjEwMywweiBNMTAuMDU4LDEwLjA1OGMtMi4yODYsMC00LjExNC0xLjgyOC00LjExNC00LjExNGMwLTIuMjg2LDEuODI4LTQuMTE0LCc7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuaWQgPSB0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tSW4nO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMuY2hhcnQuZ2V0TG9jYWxpemVkTGFiZWwoJ1pvb21JbicpKTtcbiAgICAgICAgICAgIHZhciBwb2x5Z29uRGlyZWN0aW9uID0gJzEyLjc0OSw1LjQ2NiAxMC43NDksNS40NjYgMTAuNzQ5LDMuNDY2IDkuNzQ5LDMuNDY2IDkuNzQ5LDUuNDY2IDcuNzQ5LDUuNDY2IDcuNzQ5LDYuNDY2JztcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tSW5fMScsICd0cmFuc3BhcmVudCcsIHt9LCAxLCBuZXcgaGVscGVyXzEuUmVjdCgwLCAwLCAxNiwgMTYpKSkpO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlci5kcmF3UGF0aChuZXcgaGVscGVyXzEuUGF0aE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tSW5fMicsIGZpbGxDb2xvciwgbnVsbCwgbnVsbCwgMSwgbnVsbCwgZGlyZWN0aW9uICsgJzQuMTE0LTQuMTE0YzIuMjg2LDAsNC4xMTQsMS44MjgsNC4xMTQsNC4xMTRDMTQuMTcyLDguMjI5LDEyLjM0NCwxMC4wNTgsMTAuMDU4LDEwLjA1OHonKSkpO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlci5kcmF3UG9seWdvbihuZXcgaGVscGVyXzEuUG9seWdvbk9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tSW5fMycsIHBvbHlnb25EaXJlY3Rpb24gKyAnIDkuNzQ5LDYuNDY2IDkuNzQ5LDguNDY2IDEwLjc0OSw4LjQ2NiAxMC43NDksNi40NjYgMTIuNzQ5LDYuNDY2JywgZmlsbENvbG9yKSkpO1xuICAgICAgICAgICAgdGhpcy56b29tSW5FbGVtZW50cyA9IGNoaWxkRWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE9wYWNpdHkgPSBjaGFydC56b29tTW9kdWxlLmlzUGFubmluZyA/ICcwLjInIDogJzEnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHRoaXMuZWxlbWVudE9wYWNpdHkpO1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aXJlRXZlbnRzKGNoaWxkRWxlbWVudCwgdGhpcy56b29tSW4pO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS5jcmVhdGVab29tT3V0QnV0dG9uID0gZnVuY3Rpb24gKGNoaWxkRWxlbWVudCwgcGFyZW50RWxlbWVudCwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXIgPSB0aGlzLmNoYXJ0LnJlbmRlcmVyO1xuICAgICAgICAgICAgdmFyIGZpbGxDb2xvciA9IHRoaXMuZmlsbENvbG9yO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdNMCwxNC42MjJMMS4zNzgsMTZsNC41MzMtNC41MzN2LTAuNzExbDAuMjY2LTAuMjY2YzEuMDIyLDAuODg5LDIuNCwxLjQyMiwzLjg2NiwnO1xuICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcxLjQyMmMzLjI4OSwwLDUuOTU1LTIuNjY2LDUuOTU1LTUuOTU1UzEzLjMzMywwLDEwLjA0NCwwUzQuMDg5LDIuNjY3LDQuMTM0LDUuOTExYzAsMS40NjYsMC41MzMsMi44NDQsJztcbiAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnMS40MjIsMy44NjZsLTAuMjY2LDAuMjY2SDQuNTc4TDAsMTQuNjIyTDAsMTQuNjIyeiBNNS45MTEsNS45MTFjMC0yLjMxMSwxLjgyMi00LjEzMyw0LjEzMy00LjEzM3M0LjEzMywxLjgyMiw0LjEzMywnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LmlkID0gdGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfWm9vbU91dCc7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdGhpcy5jaGFydC5nZXRMb2NhbGl6ZWRMYWJlbCgnWm9vbU91dCcpKTtcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19ab29tT3V0XzEnLCAndHJhbnNwYXJlbnQnLCB7fSwgMSwgbmV3IGhlbHBlcl8xLlJlY3QoMCwgMCwgMTYsIDE2KSkpKTtcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1BhdGgobmV3IGhlbHBlcl8xLlBhdGhPcHRpb24odGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfWm9vbU91dF8yJywgZmlsbENvbG9yLCBudWxsLCBudWxsLCAxLCBudWxsLCBkaXJlY3Rpb24gKyAnNC4xMzNzLTEuODY2LDQuMTMzLTQuMTMzLDQuMTMzUzUuOTExLDguMjIyLDUuOTExLDUuOTExeiBNMTIuNTY3LDYuNDY2aC01di0xaDVWNi40NjZ6JykpKTtcbiAgICAgICAgICAgIHRoaXMuem9vbU91dEVsZW1lbnRzID0gY2hpbGRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50T3BhY2l0eSA9IGNoYXJ0Lnpvb21Nb2R1bGUuaXNQYW5uaW5nID8gJzAuMicgOiAnMSc7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgdGhpcy5lbGVtZW50T3BhY2l0eSk7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLndpcmVFdmVudHMoY2hpbGRFbGVtZW50LCB0aGlzLnpvb21PdXQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS5jcmVhdGVSZXNldEJ1dHRvbiA9IGZ1bmN0aW9uIChjaGlsZEVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGNoYXJ0LCBpc0RldmljZSkge1xuICAgICAgICAgICAgdmFyIHJlbmRlciA9IHRoaXMuY2hhcnQucmVuZGVyZXI7XG4gICAgICAgICAgICB2YXIgZmlsbENvbG9yID0gdGhpcy5maWxsQ29sb3I7XG4gICAgICAgICAgICB2YXIgc2l6ZTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnTTEyLjM2NCw4aC0yLjE4MmwyLjkwOSwzLjI1TDE2LDhoLTIuMTgyYzAtMy41NzUtMi42MTgtNi41LTUuODE4LTYuNWMtMS4xMjgsMC0yLjIxOCwwLjM2Ni0zLjA5MSwnO1xuICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcxLjAxNmwxLjA1NSwxLjE3OEM2LjU4MSwzLjMyOCw3LjI3MiwzLjEyNSw4LDMuMTI1QzEwLjQsMy4xMjUsMTIuMzYzLDUuMzE5LDEyLjM2NCw4TDEyLjM2NCw4eiBNMTEuMDkxLCc7XG4gICAgICAgICAgICBkaXJlY3Rpb24gKz0gJzEzLjQ4NGwtMS4wNTUtMS4xNzhDOS40MTksMTIuNjcyLDguNzI4LDEyLjg3NSw4LDEyLjg3NWMtMi40LDAtNC4zNjQtMi4xOTQtNC4zNjQtNC44NzVoMi4xODJMMi45MDksNC43NUwwLDhoMi4xODJjMCwnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LmlkID0gdGhpcy5lbGVtZW50SWQgKyAnX1pvb21pbmdfUmVzZXQnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMuY2hhcnQuZ2V0TG9jYWxpemVkTGFiZWwoJ1Jlc2V0JykpO1xuICAgICAgICAgICAgaWYgKCFpc0RldmljZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19SZXNldF8xJywgJ3RyYW5zcGFyZW50Jywge30sIDEsIG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIDE2LCAxNikpKSk7XG4gICAgICAgICAgICAgICAgY2hpbGRFbGVtZW50LmFwcGVuZENoaWxkKHJlbmRlci5kcmF3UGF0aChuZXcgaGVscGVyXzEuUGF0aE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19SZXNldF8yJywgZmlsbENvbG9yLCBudWxsLCBudWxsLCAxLCBudWxsLCBkaXJlY3Rpb24gKyAnMy41NzUsMi42MTgsNi41LDUuODE4LDYuNUM5LjEyOCwxNC41LDEwLjIxOSwxNC4xMzQsMTEuMDkxLDEzLjQ4NEwxMS4wOTEsMTMuNDg0eicpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQodGhpcy5jaGFydC5nZXRMb2NhbGl6ZWRMYWJlbCgnUmVzZXRab29tJyksIHsgc2l6ZTogJzEycHgnIH0pO1xuICAgICAgICAgICAgICAgIGNoaWxkRWxlbWVudC5hcHBlbmRDaGlsZChyZW5kZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19SZXNldF8xJywgJ3RyYW5zcGFyZW50Jywge30sIDEsIG5ldyBoZWxwZXJfMS5SZWN0KDAsIDAsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KSkpKTtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi50ZXh0RWxlbWVudChuZXcgaGVscGVyXzIuVGV4dE9wdGlvbih0aGlzLmVsZW1lbnRJZCArICdfWm9vbWluZ19SZXNldF8yJywgMCArIHNpemUud2lkdGggLyAyLCAwICsgc2l6ZS5oZWlnaHQgKiAzIC8gNCwgJ21pZGRsZScsIHRoaXMuY2hhcnQuZ2V0TG9jYWxpemVkTGFiZWwoJ1Jlc2V0Wm9vbScpLCAncm90YXRlKDAsJyArICgwKSArICcsJyArICgwKSArICcpJywgJ2F1dG8nKSwgeyBzaXplOiAnMTJweCcgfSwgJ2JsYWNrJywgY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cyhjaGlsZEVsZW1lbnQsIHRoaXMucmVzZXQpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS53aXJlRXZlbnRzID0gZnVuY3Rpb24gKGVsZW1lbnQsIHByb2Nlc3MpIHtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGVtZW50LCAnbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBwcm9jZXNzLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzEuRXZlbnRIYW5kbGVyLmFkZChlbGVtZW50LCAnbW91c2VvdmVyJywgdGhpcy5zaG93VG9vbHRpcCwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8xLkV2ZW50SGFuZGxlci5hZGQoZWxlbWVudCwgJ21vdXNlb3V0JywgdGhpcy5yZW1vdmVUb29sdGlwLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuc2hvd1Rvb2x0aXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZXZlbnQuY3VycmVudFRhcmdldC5pZC5zcGxpdCgnX1pvb21pbmdfJylbMV07XG4gICAgICAgICAgICB2YXIgbGVmdCA9IChldmVudC5wYWdlWCAtIChoZWxwZXJfMS5tZWFzdXJlVGV4dCh0ZXh0LCB7IHNpemU6ICcxMHB4JyB9KS53aWR0aCArIDUpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGFydC5pc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgaGVscGVyXzEuY3JlYXRlVG9vbHRpcCgnRUoyX0NoYXJ0X1pvb21UaXAnLCB0aGlzLmNoYXJ0LmdldExvY2FsaXplZExhYmVsKHRleHQpLCAoZXZlbnQucGFnZVkgKyAxMCksIGxlZnQsICcxMHB4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xraXQucHJvdG90eXBlLnJlbW92ZVRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBoZWxwZXJfMS5yZW1vdmVFbGVtZW50KCdFSjJfQ2hhcnRfWm9vbVRpcCcpO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICBpZiAoIWNoYXJ0Lnpvb21Nb2R1bGUuaXNEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICBlajJfYmFzZV8yLnJlbW92ZShjaGFydC56b29tTW9kdWxlLnRvb2xraXRFbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAoKTtcbiAgICAgICAgICAgIGNoYXJ0LnN2Z09iamVjdC5zZXRBdHRyaWJ1dGUoJ2N1cnNvcicsICdhdXRvJyk7XG4gICAgICAgICAgICBjaGFydC5heGlzQ29sbGVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYXhpcykge1xuICAgICAgICAgICAgICAgIGF4aXMuem9vbUZhY3RvciA9IDE7XG4gICAgICAgICAgICAgICAgYXhpcy56b29tUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGFydC5kaXNhYmxlVHJhY2tUb29sdGlwID0gZmFsc2U7XG4gICAgICAgICAgICBjaGFydC56b29tTW9kdWxlLmlzWm9vbWVkID0gY2hhcnQuem9vbU1vZHVsZS5pc1Bhbm5pbmcgPSBjaGFydC5pc0NoYXJ0RHJhZyA9IGNoYXJ0LmRlbGF5UmVkcmF3ID0gZmFsc2U7XG4gICAgICAgICAgICBjaGFydC56b29tTW9kdWxlLnRvdWNoTW92ZUxpc3QgPSBjaGFydC56b29tTW9kdWxlLnRvdWNoU3RhcnRMaXN0ID0gW107XG4gICAgICAgICAgICBjaGFydC56b29tTW9kdWxlLnBpbmNoVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGNoYXJ0LnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgY2hhcnQucmVmcmVzaEF4aXMoKTtcbiAgICAgICAgICAgIGNoYXJ0LnJlZnJlc2hCb3VuZCgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50T3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuem9vbUluID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUluT3V0Q2FsY3VsYXRpb24oMSwgdGhpcy5jaGFydCwgdGhpcy5jaGFydC5heGlzQ29sbGVjdGlvbnMsIHRoaXMuY2hhcnQuem9vbVNldHRpbmdzLm1vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS56b29tT3V0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUluT3V0Q2FsY3VsYXRpb24oLTEsIHRoaXMuY2hhcnQsIHRoaXMuY2hhcnQuYXhpc0NvbGxlY3Rpb25zLCB0aGlzLmNoYXJ0Lnpvb21TZXR0aW5ncy5tb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgVG9vbGtpdC5wcm90b3R5cGUuem9vbSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lnpvb21Nb2R1bGUuaXNQYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgem9vbU1vZHVsZSA9IHRoaXMuY2hhcnQuem9vbU1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0LnN2Z09iamVjdC5zZXRBdHRyaWJ1dGUoJ2N1cnNvcicsICdhdXRvJyk7XG4gICAgICAgICAgICB0aGlzLnpvb21JbkVsZW1lbnRzLnNldEF0dHJpYnV0ZSgnb3BhY2l0eScsIHRoaXMuZWxlbWVudE9wYWNpdHkpO1xuICAgICAgICAgICAgdGhpcy56b29tT3V0RWxlbWVudHMuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgdGhpcy5lbGVtZW50T3BhY2l0eSk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5U2VsZWN0aW9uKHRoaXMuem9vbUVsZW1lbnRzLmNoaWxkTm9kZXMsIHRoaXMuc2VsZWN0aW9uQ29sb3IpO1xuICAgICAgICAgICAgdGhpcy5hcHBseVNlbGVjdGlvbih0aGlzLnBhbkVsZW1lbnRzLmNoaWxkTm9kZXMsICcjNzM3MzczJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xraXQucHJvdG90eXBlLnBhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB6b29tTW9kdWxlID0gdGhpcy5jaGFydC56b29tTW9kdWxlO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lnpvb21Nb2R1bGUuaXNQYW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQuc3ZnT2JqZWN0LnNldEF0dHJpYnV0ZSgnY3Vyc29yJywgJ3BvaW50ZXInKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE9wYWNpdHkgPSAnMC4yJztcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLnpvb21JbkVsZW1lbnRzID8gdGhpcy56b29tSW5FbGVtZW50cy5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCB0aGlzLmVsZW1lbnRPcGFjaXR5KSA6IG51bGw7XG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy56b29tT3V0RWxlbWVudHMgPyB0aGlzLnpvb21PdXRFbGVtZW50cy5zZXRBdHRyaWJ1dGUoJ29wYWNpdHknLCB0aGlzLmVsZW1lbnRPcGFjaXR5KSA6IG51bGw7XG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5wYW5FbGVtZW50cyA/IHRoaXMuYXBwbHlTZWxlY3Rpb24odGhpcy5wYW5FbGVtZW50cy5jaGlsZE5vZGVzLCB0aGlzLnNlbGVjdGlvbkNvbG9yKSA6IG51bGw7XG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy56b29tRWxlbWVudHMgPyB0aGlzLmFwcGx5U2VsZWN0aW9uKHRoaXMuem9vbUVsZW1lbnRzLmNoaWxkTm9kZXMsICcjNzM3MzczJykgOiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBUb29sa2l0LnByb3RvdHlwZS56b29tSW5PdXRDYWxjdWxhdGlvbiA9IGZ1bmN0aW9uIChzY2FsZSwgY2hhcnQsIGF4ZXMsIG1vZGUpIHtcbiAgICAgICAgICAgIGlmICghY2hhcnQuem9vbU1vZHVsZS5pc1Bhbm5pbmcgJiYgdGhpcy5lbGVtZW50T3BhY2l0eSAhPT0gJzAuMicpIHtcbiAgICAgICAgICAgICAgICB2YXIgem9vbUZhY3Rvcl8xO1xuICAgICAgICAgICAgICAgIHZhciB6b29tUG9zaXRpb25fMTtcbiAgICAgICAgICAgICAgICB2YXIgY3VtdWxhdGl2ZV8xO1xuICAgICAgICAgICAgICAgIGNoYXJ0LmRpc2FibGVUcmFja1Rvb2x0aXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNoYXJ0LmRlbGF5UmVkcmF3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBheGVzLmZvckVhY2goZnVuY3Rpb24gKGF4aXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChheGlzLm9yaWVudGF0aW9uID09PSAnSG9yaXpvbnRhbCcgJiYgbW9kZSAhPT0gJ1knKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGF4aXMub3JpZW50YXRpb24gPT09ICdWZXJ0aWNhbCcgJiYgbW9kZSAhPT0gJ1gnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VtdWxhdGl2ZV8xID0gTWF0aC5tYXgoTWF0aC5tYXgoMSAvIGhlbHBlcl8xLm1pbk1heChheGlzLnpvb21GYWN0b3IsIDAsIDEpLCAxKSArICgwLjI1ICogc2NhbGUpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3JfMSA9IChjdW11bGF0aXZlXzEgPT09IDEpID8gMSA6IGhlbHBlcl8xLm1pbk1heCgxIC8gY3VtdWxhdGl2ZV8xLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21Qb3NpdGlvbl8xID0gKGN1bXVsYXRpdmVfMSA9PT0gMSkgPyAwIDogYXhpcy56b29tUG9zaXRpb24gKyAoKGF4aXMuem9vbUZhY3RvciAtIHpvb21GYWN0b3JfMSkgKiAwLjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMuem9vbVBvc2l0aW9uICE9PSB6b29tUG9zaXRpb25fMSB8fCBheGlzLnpvb21GYWN0b3IgIT09IHpvb21GYWN0b3JfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3JfMSA9ICh6b29tUG9zaXRpb25fMSArIHpvb21GYWN0b3JfMSkgPiAxID8gKDEgLSB6b29tUG9zaXRpb25fMSkgOiB6b29tRmFjdG9yXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21GYWN0b3IgPSB6b29tRmFjdG9yXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICBheGlzLnpvb21Qb3NpdGlvbiA9IHpvb21Qb3NpdGlvbl8xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFRvb2xraXQucHJvdG90eXBlLmFwcGx5U2VsZWN0aW9uID0gZnVuY3Rpb24gKGVsZW1lbnRzLCBjb2xvcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDEsIGxlbmd0aF8xID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnNldEF0dHJpYnV0ZSgnZmlsbCcsIGNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRvb2xraXQ7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLlRvb2xraXQgPSBUb29sa2l0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC91c2VyLWludGVyYWN0aW9uL3pvb21pbmctdG9vbGtpdC5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2Jhc2VcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvdGhlbWVcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvY29uc3RhbnRzXCIsIFwiLi4vLi4vY29tbW9uL3NlbGVjdGlvbi9zZWxlY3Rpb25cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBoZWxwZXJfMSwgYmFzZV8xLCB0aGVtZV8xLCBjb25zdGFudHNfMSwgc2VsZWN0aW9uXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFNlbGVjdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhTZWxlY3Rpb24sIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFNlbGVjdGlvbihjaGFydCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY2hhcnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBjaGFydC5yZW5kZXJlcjtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYW5jZWxFdmVudCA9IGVqMl9iYXNlXzEuQnJvd3Nlci5pc1BvaW50ZXIgPyAncG9pbnRlcmxlYXZlJyA6ICdtb3VzZWxlYXZlJztcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLm1vdXNlTW92ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGNhbmNlbEV2ZW50LCB0aGlzLmNvbXBsZXRlU2VsZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oJ2NsaWNrJywgdGhpcy5jYWxjdWxhdGVTZWxlY3RlZEVsZW1lbnRzLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoU3RhcnRFdmVudCwgdGhpcy5tb3VzZWRvd24sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5jb21wbGV0ZVNlbGVjdGlvbiwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUubW91c2Vkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY2hhcnQ7XG4gICAgICAgICAgICBpZiAoY2hhcnQuc2VsZWN0aW9uTW9kZSA9PT0gJ05vbmUnIHx8IGNoYXJ0LmlzQ2hhcnREcmFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYXJ0LmlzRG91YmxlVGFwIHx8ICFjaGFydC5pc1RvdWNoIHx8IHRoaXMucmVjdFBvaW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1N0YXJ0KGNoYXJ0LCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCwgY2hhcnQubW91c2VEb3duWCwgY2hhcnQubW91c2VEb3duWSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFydC5vZmYoZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoTW92ZUV2ZW50LCB0aGlzLm1vdXNlTW92ZSk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9mZigncG9pbnRlcmxlYXZlJyB8fCAnbW91c2VsZWF2ZScsIHRoaXMuY29tcGxldGVTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vZmYoJ2NsaWNrJywgdGhpcy5jYWxjdWxhdGVTZWxlY3RlZEVsZW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub2ZmKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQsIHRoaXMubW91c2Vkb3duKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub2ZmKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaEVuZEV2ZW50LCB0aGlzLmNvbXBsZXRlU2VsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0UHJpdmF0ZVZhcmlhYmxlcyA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZUlkID0gY2hhcnQuZWxlbWVudC5pZCArICdfZWoyX2NoYXJ0X3NlbGVjdGlvbic7XG4gICAgICAgICAgICB0aGlzLnVuc2VsZWN0ZWQgPSBjaGFydC5lbGVtZW50LmlkICsgJ19lajJfZGVzZWxlY3RlZCc7XG4gICAgICAgICAgICB0aGlzLmNsb3NlSWNvbklkID0gY2hhcnQuZWxlbWVudC5pZCArICdfZWoyX2RyYWdfY2xvc2UnO1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkUmVjdEdyb3VwID0gY2hhcnQuZWxlbWVudC5pZCArICdfZWoyX2RyYWdfZ3JvdXAnO1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2VkUmVjdCA9IGNoYXJ0LmVsZW1lbnQuaWQgKyAnX2VqMl9kcmFnX3JlY3QnO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFJbmRleGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnJlY3RQb2ludHMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5pc1Nlcmllc01vZGUgPSBjaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5pbnZva2VTZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFByaXZhdGVWYXJpYWJsZXMoY2hhcnQpO1xuICAgICAgICAgICAgdGhpcy5zZXJpZXMgPSBlajJfYmFzZV8zLmV4dGVuZCh7fSwgY2hhcnQudmlzaWJsZVNlcmllcywgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNlcmllc1N0eWxlcygpO1xuICAgICAgICAgICAgaWYgKCEoY2hhcnQuc2VsZWN0aW9uTW9kZS5pbmRleE9mKCdEcmFnJykgPiAtMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdERhdGFJbmRleChjaGFydCwgdGhpcy5jb25jYXRJbmRleGVzKGNoYXJ0LnNlbGVjdGVkRGF0YUluZGV4ZXMsIHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdlbmVyYXRlU3R5bGUgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChzZXJpZXMuc2VsZWN0aW9uU3R5bGUgfHwgdGhpcy5zdHlsZUlkICsgJ19zZXJpZXNfJyArIHNlcmllcy5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuc2VsZWN0RGF0YUluZGV4ID0gZnVuY3Rpb24gKGNoYXJ0LCBpbmRleGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGluZGV4ZXNfMSA9IGluZGV4ZXM7IF9pIDwgaW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtU2VsZWN0aW9uKGluZGV4LCBjaGFydCwgdGhpcy5nZXRFbGVtZW50QnlJbmRleChjaGFydCwgaW5kZXgpWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRFbGVtZW50QnlJbmRleCA9IGZ1bmN0aW9uIChjaGFydCwgaW5kZXgsIHN1ZmZpeCkge1xuICAgICAgICAgICAgaWYgKHN1ZmZpeCA9PT0gdm9pZCAwKSB7IHN1ZmZpeCA9ICcnOyB9XG4gICAgICAgICAgICB2YXIgZWxlbWVudElkID0gY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBpbmRleC5zZXJpZXMgKyAnX1BvaW50JyArICdfJyArIGluZGV4LnBvaW50O1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IGNoYXJ0LnNlcmllc1tpbmRleC5zZXJpZXNdO1xuICAgICAgICAgICAgZWxlbWVudElkID0gKCFzZXJpZXMuaXNSZWN0U2VyaWVzICYmIHNlcmllcy50eXBlICE9PSAnU2NhdHRlcicgJiYgc2VyaWVzLnR5cGUgIT09ICdCdWJibGUnICYmXG4gICAgICAgICAgICAgICAgc2VyaWVzLm1hcmtlci52aXNpYmxlKSA/IChlbGVtZW50SWQgKyAnX1N5bWJvbCcgKyBzdWZmaXgpIDogZWxlbWVudElkO1xuICAgICAgICAgICAgcmV0dXJuIFtoZWxwZXJfMS5nZXRFbGVtZW50KGVsZW1lbnRJZCksIChzZXJpZXMudHlwZSA9PT0gJ1JhbmdlQXJlYScgJiYgc2VyaWVzLm1hcmtlci52aXNpYmxlKSA/IGhlbHBlcl8xLmdldEVsZW1lbnQoZWxlbWVudElkICsgJzEnKSA6IG51bGxdO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldENsdXN0ZXJFbGVtZW50cyA9IGZ1bmN0aW9uIChjaGFydCwgaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBjbHVzdGVycyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGNoYXJ0LnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IG5ldyBiYXNlXzEuSW5kZXgoc2VyaWVzLmluZGV4LCBpbmRleC5wb2ludCk7XG4gICAgICAgICAgICAgICAgY2x1c3RlcnMucHVzaCh0aGlzLmdldEVsZW1lbnRCeUluZGV4KGNoYXJ0LCBpbmRleClbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsdXN0ZXJzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmZpbmRFbGVtZW50cyA9IGZ1bmN0aW9uIChjaGFydCwgc2VyaWVzLCBpbmRleCwgc3VmZml4KSB7XG4gICAgICAgICAgICBpZiAoc3VmZml4ID09PSB2b2lkIDApIHsgc3VmZml4ID0gJyc7IH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2VyaWVzTW9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlcmllc0VsZW1lbnRzKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnQ2x1c3RlcicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDbHVzdGVyRWxlbWVudHMoY2hhcnQsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRCeUluZGV4KGNoYXJ0LCBpbmRleCwgc3VmZml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jYWxjdWxhdGVTZWxlY3RlZEVsZW1lbnRzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnTm9uZScgfHwgZXZlbnQudGFyZ2V0LmlkLmluZGV4T2YodGhpcy5jaGFydC5lbGVtZW50LmlkICsgJ18nKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmlkLmluZGV4T2YoJ19TZXJpZXNfJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybVNlbGVjdGlvbih0aGlzLmluZGV4RmluZGVyKGV2ZW50LnRhcmdldC5pZCksIHRoaXMuY2hhcnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucGVyZm9ybVNlbGVjdGlvbiA9IGZ1bmN0aW9uIChpbmRleCwgY2hhcnQsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTZXJpZXNNb2RlID0gY2hhcnQuc2VsZWN0aW9uTW9kZSA9PT0gJ1Nlcmllcyc7XG4gICAgICAgICAgICBpZiAoY2hhcnQuc2VyaWVzW2luZGV4LnNlcmllc10udHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInICYmXG4gICAgICAgICAgICAgICAgZWxlbWVudC5pZCA9PT0gY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBpbmRleC5zZXJpZXMgKyAnX1BvaW50XycgKyBpbmRleC5wb2ludCArICdfQm94UGF0aCcpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChjaGFydC5zZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnU2VyaWVzJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24oY2hhcnQsIGluZGV4LCB0aGlzLmdldFNlcmllc0VsZW1lbnRzKGNoYXJ0LnNlcmllc1tpbmRleC5zZXJpZXNdKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ckVmZmVjdChjaGFydC5lbGVtZW50LmlkLCBjaGFydC52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUG9pbnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGluZGV4LnBvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24oY2hhcnQsIGluZGV4LCBbZWxlbWVudF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibHVyRWZmZWN0KGNoYXJ0LmVsZW1lbnQuaWQsIGNoYXJ0LnZpc2libGVTZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0NsdXN0ZXInOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGluZGV4LnBvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbHVzdGVyU2VsZWN0aW9uKGNoYXJ0LCBjaGFydC5zZXJpZXMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ckVmZmVjdChjaGFydC5lbGVtZW50LmlkLCBjaGFydC52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2hhcnQsIGluZGV4LCBzZWxlY3RlZEVsZW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoIWNoYXJ0LmlzTXVsdGlTZWxlY3QgJiYgKGNoYXJ0LnNlbGVjdGlvbk1vZGUuaW5kZXhPZignRHJhZycpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU11bHRpU2VsZWN0RWVsbWVudHMoY2hhcnQsIHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcywgaW5kZXgsIGNoYXJ0LnNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gc2VsZWN0ZWRFbGVtZW50c1swXSAmJiAoc2VsZWN0ZWRFbGVtZW50c1swXS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudHNbMF0gJiYgY2xhc3NOYW1lLmluZGV4T2YodGhpcy5nZXRTZWxlY3Rpb25DbGFzcyhzZWxlY3RlZEVsZW1lbnRzWzBdLmlkKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3R5bGVzKHNlbGVjdGVkRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVJbmRleCh0aGlzLnNlbGVjdGVkRGF0YUluZGV4ZXMsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZXMoc2VsZWN0ZWRFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUluZGV4KHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcywgaW5kZXgsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNsdXN0ZXJTZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllcywgaW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uKGNoYXJ0LCBpbmRleCwgdGhpcy5nZXRDbHVzdGVyRWxlbWVudHMoY2hhcnQsIG5ldyBiYXNlXzEuSW5kZXgoaW5kZXguc2VyaWVzLCBpbmRleC5wb2ludCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVNdWx0aVNlbGVjdEVlbG1lbnRzID0gZnVuY3Rpb24gKGNoYXJ0LCBpbmRleCwgY3VycmVudEluZGV4LCBzZXJpZXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHNlcmllcyA9IHNlcmllc0NvbGxlY3Rpb25baW5kZXhbaV0uc2VyaWVzXTtcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuaXNTZXJpZXNNb2RlICYmICF0aGlzLnRvRXF1YWxzKGluZGV4W2ldLCBjdXJyZW50SW5kZXgsIHRoaXMuaXNTZXJpZXNNb2RlKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuY29udHJvbC5zZWxlY3Rpb25Nb2RlID09PSAnQ2x1c3RlcicgJiYgIXRoaXMudG9FcXVhbHMoaW5kZXhbaV0sIGN1cnJlbnRJbmRleCwgZmFsc2UpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoIXRoaXMuaXNTZXJpZXNNb2RlICYmIHRoaXMudG9FcXVhbHMoaW5kZXhbaV0sIGN1cnJlbnRJbmRleCwgdHJ1ZSkgJiYgIXRoaXMudG9FcXVhbHMoaW5kZXhbaV0sIGN1cnJlbnRJbmRleCwgZmFsc2UpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0eWxlcyh0aGlzLmZpbmRFbGVtZW50cyhjaGFydCwgc2VyaWVzLCBpbmRleFtpXSkpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuYmx1ckVmZmVjdCA9IGZ1bmN0aW9uIChjaGFydElkLCB2aXNpYmxlU2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgdmlzaWJpbGl0eSA9IHRoaXMuY2hlY2tWaXNpYmlsaXR5KHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZpc2libGVTZXJpZXNfMSA9IHZpc2libGVTZXJpZXM7IF9pIDwgdmlzaWJsZVNlcmllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzZXJpZXMgPSB2aXNpYmxlU2VyaWVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0aW9uRWxlbWVudHMoaGVscGVyXzEuZ2V0RWxlbWVudChjaGFydElkICsgJ1Nlcmllc0dyb3VwJyArIHNlcmllcy5pbmRleCksIHRoaXMuZ2VuZXJhdGVTdHlsZShzZXJpZXMpLCB2aXNpYmlsaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8zLmlzTnVsbE9yVW5kZWZpbmVkKGhlbHBlcl8xLmdldEVsZW1lbnQoY2hhcnRJZCArICdTeW1ib2xHcm91cCcgKyBzZXJpZXMuaW5kZXgpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdGlvbkVsZW1lbnRzKGhlbHBlcl8xLmdldEVsZW1lbnQoY2hhcnRJZCArICdTeW1ib2xHcm91cCcgKyBzZXJpZXMuaW5kZXgpLCB0aGlzLmdlbmVyYXRlU3R5bGUoc2VyaWVzKSwgdmlzaWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tTZWxlY3Rpb25FbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUsIHZpc2liaWxpdHkpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9ICh0aGlzLmlzU2VyaWVzTW9kZSA/IFtlbGVtZW50XSA6IGVsZW1lbnQuY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBwYXJlbnRDbGFzc05hbWU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudENsYXNzTmFtZSA9IGNoaWxkcmVuW2ldLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJztcbiAgICAgICAgICAgICAgICBwYXJlbnRDbGFzc05hbWUgPSBjaGlsZHJlbltpXS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJztcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudENsYXNzTmFtZS5pbmRleE9mKGNsYXNzTmFtZSkgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENsYXNzTmFtZS5pbmRleE9mKGNsYXNzTmFtZSkgPT09IC0xICYmIHZpc2liaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTdmdDbGFzcyhjaGlsZHJlbltpXSwgdGhpcy51bnNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MoY2hpbGRyZW5baV0sIHRoaXMudW5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmFwcGx5U3R5bGVzID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdmdDbGFzcyhlbGVtZW50LnBhcmVudE5vZGUsIHRoaXMudW5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MoZWxlbWVudCwgdGhpcy51bnNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTdmdDbGFzcyhlbGVtZW50LCB0aGlzLmdldFNlbGVjdGlvbkNsYXNzKGVsZW1lbnQuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uQ2xhc3MgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlU3R5bGUodGhpcy5jb250cm9sLnNlcmllc1t0aGlzLmluZGV4RmluZGVyKGlkKS5zZXJpZXNdKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHlsZXMgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZWxlbWVudHNfMiA9IGVsZW1lbnRzOyBfaSA8IGVsZW1lbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c18yW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN2Z0NsYXNzKGVsZW1lbnQsIHRoaXMuZ2V0U2VsZWN0aW9uQ2xhc3MoZWxlbWVudC5pZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5hZGRPclJlbW92ZUluZGV4ID0gZnVuY3Rpb24gKGluZGV4ZXMsIGluZGV4LCBhZGQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvRXF1YWxzKGluZGV4ZXNbaV0sIGluZGV4LCB0aGlzLmlzU2VyaWVzTW9kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWRkKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS50b0VxdWFscyA9IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kLCBjaGVja1Nlcmllc09ubHkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGZpcnN0LnNlcmllcyA9PT0gc2Vjb25kLnNlcmllcyB8fCAodGhpcy5jb250cm9sLnNlbGVjdGlvbk1vZGUgPT09ICdDbHVzdGVyJyAmJiAhY2hlY2tTZXJpZXNPbmx5KSlcbiAgICAgICAgICAgICAgICAmJiAoY2hlY2tTZXJpZXNPbmx5IHx8IChmaXJzdC5wb2ludCA9PT0gc2Vjb25kLnBvaW50KSkpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlZHJhd1NlbGVjdGlvbiA9IGZ1bmN0aW9uIChjaGFydCwgb2xkTW9kZSkge1xuICAgICAgICAgICAgdGhpcy5pc1Nlcmllc01vZGUgPSBvbGRNb2RlID09PSAnU2VyaWVzJztcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGFJbmRleGVzID0gZWoyX2Jhc2VfMy5leHRlbmQoW10sIHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcywgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkRWxlbWVudHMoY2hhcnQsIHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcywgY2hhcnQuc2VyaWVzKTtcbiAgICAgICAgICAgIHRoaXMuYmx1ckVmZmVjdChjaGFydC5lbGVtZW50LmlkLCBjaGFydC52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUluZGV4KGNoYXJ0LCBzZWxlY3RlZERhdGFJbmRleGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5sZWdlbmRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHNlcmllc1N0eWxlID0gdGhpcy5nZW5lcmF0ZVN0eWxlKGNoYXJ0LnZpc2libGVTZXJpZXNbc2VyaWVzXSk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoc2VyaWVzU3R5bGUpO1xuICAgICAgICAgICAgdGhpcy5pc1Nlcmllc01vZGUgPSBjaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnU2VyaWVzJztcbiAgICAgICAgICAgIHZhciBpc0JsdXJFZmZlY3ROZWVkZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKHNlbGVjdGVkRWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN0eWxlcyhlbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nlcmllc01vZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3JSZW1vdmVJbmRleCh0aGlzLnNlbGVjdGVkRGF0YUluZGV4ZXMsIG5ldyBiYXNlXzEuSW5kZXgoc2VyaWVzLCBOYU4pKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gY2hhcnQudmlzaWJsZVNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllc18xID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXNTdHlsZSA9IHRoaXMuZ2VuZXJhdGVTdHlsZShzZXJpZXNfMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlcmllc1N0eWxlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIGVsZW1lbnRzXzMgPSBlbGVtZW50czsgX2IgPCBlbGVtZW50c18zLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfM1tfYl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbGVjdGlvbkVsZW1lbnRzKGVsZW1lbnQsIHNlcmllc1N0eWxlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmx1ckVmZmVjdE5lZWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzQmx1ckVmZmVjdE5lZWRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU2VyaWVzTW9kZSA9IGNoYXJ0LnNlbGVjdGlvbk1vZGUgPT09ICdTZXJpZXMnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJsdXJFZmZlY3QoY2hhcnQuZWxlbWVudC5pZCwgY2hhcnQudmlzaWJsZVNlcmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllc0VsZW1lbnRzID0gdGhpcy5nZXRTZXJpZXNFbGVtZW50cyhjaGFydC52aXNpYmxlU2VyaWVzW3Nlcmllc10pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9jID0gMCwgc2VyaWVzRWxlbWVudHNfMSA9IHNlcmllc0VsZW1lbnRzOyBfYyA8IHNlcmllc0VsZW1lbnRzXzEubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJpZXNFbGVtZW50ID0gc2VyaWVzRWxlbWVudHNfMVtfY107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tTZWxlY3Rpb25FbGVtZW50cyhzZXJpZXNFbGVtZW50LCBzZXJpZXNTdHlsZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VyaWVzTW9kZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24oY2hhcnQsIG5ldyBiYXNlXzEuSW5kZXgoc2VyaWVzLCBOYU4pLCBzZXJpZXNFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nlcmllc01vZGUgPSBjaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnU2VyaWVzJztcbiAgICAgICAgICAgICAgICB0aGlzLmJsdXJFZmZlY3QoY2hhcnQuZWxlbWVudC5pZCwgY2hhcnQudmlzaWJsZVNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VyaWVzRWxlbWVudHMgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzRWxlbWVudHMgPSBbc2VyaWVzLnNlcmllc0VsZW1lbnRdO1xuICAgICAgICAgICAgaWYgKHNlcmllcy5tYXJrZXIudmlzaWJsZSAmJiAhc2VyaWVzLmlzUmVjdFNlcmllcykge1xuICAgICAgICAgICAgICAgIHNlcmllc0VsZW1lbnRzLnB1c2goc2VyaWVzLnN5bWJvbEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlcmllc0VsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmluZGV4RmluZGVyID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgaWRzID0gWydOYU4nLCAnTmFOJ107XG4gICAgICAgICAgICBpZiAoaWQuaW5kZXhPZignU2VyaWVzR3JvdXAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaWRzID0gaWQuc3BsaXQoJ1Nlcmllc0dyb3VwJyk7XG4gICAgICAgICAgICAgICAgaWRzWzBdID0gaWRzWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWQuaW5kZXhPZignU3ltYm9sR3JvdXAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaWRzID0gaWQuc3BsaXQoJ1N5bWJvbEdyb3VwJyk7XG4gICAgICAgICAgICAgICAgaWRzWzBdID0gaWRzWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWQuaW5kZXhPZignX1BvaW50XycpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBpZHMgPSBpZC5zcGxpdCgnX1Nlcmllc18nKVsxXS5zcGxpdCgnX1BvaW50XycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWQuaW5kZXhPZignX1Nlcmllc18nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaWRzWzBdID0gaWQuc3BsaXQoJ19TZXJpZXNfJylbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IGJhc2VfMS5JbmRleChwYXJzZUludChpZHNbMF0sIDEwKSwgcGFyc2VJbnQoaWRzWzFdLCAxMCkpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNhbGN1bGF0ZURyYWdTZWxlY3RlZEVsZW1lbnRzID0gZnVuY3Rpb24gKGNoYXJ0LCBkcmFnUmVjdCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZEVsZW1lbnRzKGNoYXJ0LCB0aGlzLnNlbGVjdGVkRGF0YUluZGV4ZXMsIGNoYXJ0LnNlcmllcyk7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KGRyYWdSZWN0LngsIGRyYWdSZWN0LnksIGRyYWdSZWN0LndpZHRoLCBkcmFnUmVjdC5oZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGF4aXNPZmZzZXQgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdC54LCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdC55KTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlT2Zmc2V0KHJlY3QsIGF4aXNPZmZzZXQpO1xuICAgICAgICAgICAgdmFyIHBvaW50cztcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFBvaW50VmFsdWVzID0gW107XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRTZXJpZXNWYWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuaXNTZXJpZXNNb2RlID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgc3ltYm9sTG9jYXRpb247XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzID0gc2VyaWVzLnBvaW50cztcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQb2ludFZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeEF4aXNPZmZzZXRfMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHlBeGlzT2Zmc2V0XzE7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2hhcnQuaXNUcmFuc3Bvc2VkIHx8IHNlcmllcy50eXBlLmluZGV4T2YoJ0JhcicpICE9PSAtMSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEoY2hhcnQuaXNUcmFuc3Bvc2VkICYmIHNlcmllcy50eXBlLmluZGV4T2YoJ0JhcicpICE9PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhBeGlzT2Zmc2V0XzEgPSBzZXJpZXMueEF4aXMucmVjdC55IC0gYXhpc09mZnNldC55O1xuICAgICAgICAgICAgICAgICAgICAgICAgeUF4aXNPZmZzZXRfMSA9IHNlcmllcy55QXhpcy5yZWN0LnggLSBheGlzT2Zmc2V0Lng7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4QXhpc09mZnNldF8xID0gc2VyaWVzLnhBeGlzLnJlY3QueCAtIGF4aXNPZmZzZXQueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlBeGlzT2Zmc2V0XzEgPSBzZXJpZXMueUF4aXMucmVjdC55IC0gYXhpc09mZnNldC55O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeVZhbHVlID0gc2VyaWVzLnR5cGUgIT09ICdSYW5nZUFyZWEnID8gcG9pbnRzW2pdLnlWYWx1ZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2pdLnJlZ2lvbnNbMF0ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0N1cnJlbnRQb2ludCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDdXJyZW50UG9pbnQgPSBwb2ludHNbal0ucmVnaW9ucy5zb21lKGZ1bmN0aW9uIChyZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlcl8xLndpdGhJbkJvdW5kcyhyZWdpb24ueCArIHhBeGlzT2Zmc2V0XzEsIHJlZ2lvbi55ICsgeUF4aXNPZmZzZXRfMSwgcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnRQb2ludCA9IHBvaW50c1tqXS5zeW1ib2xMb2NhdGlvbnMuc29tZShmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uICYmIGhlbHBlcl8xLndpdGhJbkJvdW5kcyhsb2NhdGlvbi54ICsgeEF4aXNPZmZzZXRfMSwgbG9jYXRpb24ueSArIHlBeGlzT2Zmc2V0XzEsIHJlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ3VycmVudFBvaW50ICYmIHNlcmllcy5jYXRlZ29yeSAhPT0gJ0luZGljYXRvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG5ldyBiYXNlXzEuSW5kZXgoc2VyaWVzLmluZGV4LCBwb2ludHNbal0uaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5zZWxlY3Rpb24oY2hhcnQsIGluZGV4LCB0aGlzXzEuZmluZEVsZW1lbnRzKGNoYXJ0LCBzZXJpZXMsIGluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQb2ludFZhbHVlcy5wdXNoKHsgeDogcG9pbnRzW2pdLnhWYWx1ZS50b1N0cmluZygpLCB5OiB5VmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDdXJyZW50UG9pbnQgJiYgc2VyaWVzLnR5cGUgPT09ICdSYW5nZUFyZWEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQb2ludFZhbHVlcy5wdXNoKHsgeDogcG9pbnRzW2pdLnhWYWx1ZS50b1N0cmluZygpLCB5OiBwb2ludHNbal0ucmVnaW9uc1swXS55IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2VyaWVzVmFsdWVzLnB1c2goc2VsZWN0ZWRQb2ludFZhbHVlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0aGlzXzEgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGNoYXJ0LnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBfbG9vcF8xKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJsdXJFZmZlY3QoY2hhcnQuZWxlbWVudC5pZCwgY2hhcnQudmlzaWJsZVNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLnJlY3RQb2ludHMgPSBuZXcgaGVscGVyXzEuUmVjdChkcmFnUmVjdC54LCBkcmFnUmVjdC55LCBkcmFnUmVjdC53aWR0aCwgZHJhZ1JlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2xvc2VCdXR0b24oKGRyYWdSZWN0LnggKyBkcmFnUmVjdC53aWR0aCksIGRyYWdSZWN0LnkpO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY29uc3RhbnRzXzEuZHJhZ0NvbXBsZXRlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0YVZhbHVlczogc2VsZWN0ZWRTZXJpZXNWYWx1ZXMsXG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNoYXJ0LnRyaWdnZXIoY29uc3RhbnRzXzEuZHJhZ0NvbXBsZXRlLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVPZmZzZXQgPSBmdW5jdGlvbiAocmVjdCwgY2xpcCkge1xuICAgICAgICAgICAgcmVjdC54IC09IGNsaXAueDtcbiAgICAgICAgICAgIHJlY3QueSAtPSBjbGlwLnk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZHJhd0RyYWdnaW5nUmVjdCA9IGZ1bmN0aW9uIChjaGFydCwgZHJhZ1JlY3QpIHtcbiAgICAgICAgICAgIHZhciBjYXJ0ZXNpYW5MYXlvdXQgPSBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdDtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhcnQuc2VsZWN0aW9uTW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0RyYWdYJzpcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1JlY3QueSA9IGNhcnRlc2lhbkxheW91dC55O1xuICAgICAgICAgICAgICAgICAgICBkcmFnUmVjdC5oZWlnaHQgPSBjYXJ0ZXNpYW5MYXlvdXQuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdEcmFnWSc6XG4gICAgICAgICAgICAgICAgICAgIGRyYWdSZWN0LnggPSBjYXJ0ZXNpYW5MYXlvdXQueDtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1JlY3Qud2lkdGggPSBjYXJ0ZXNpYW5MYXlvdXQud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRyYWdSZWN0LndpZHRoIDwgNSB8fCBkcmFnUmVjdC5oZWlnaHQgPCA1KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGhlbHBlcl8xLmdldEVsZW1lbnQodGhpcy5kcmFnZ2VkUmVjdCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jbG9zZUljb24pIHtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMS5yZW1vdmVFbGVtZW50KHRoaXMuY2xvc2VJY29uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgZHJhZ1JlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyYWdHcm91cCA9IHRoaXMucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogdGhpcy5kcmFnZ2VkUmVjdEdyb3VwIH0pO1xuICAgICAgICAgICAgICAgIGNoYXJ0LnN2Z09iamVjdC5hcHBlbmRDaGlsZChkcmFnR3JvdXApO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmRyYXdSZWN0YW5nbGUobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24odGhpcy5kcmFnZ2VkUmVjdCwgdGhlbWVfMS5UaGVtZS5zZWxlY3Rpb25SZWN0RmlsbCwgeyBjb2xvcjogdGhlbWVfMS5UaGVtZS5zZWxlY3Rpb25SZWN0U3Ryb2tlLCB3aWR0aDogMSB9LCAxLCBkcmFnUmVjdCkpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdjdXJzb3I6bW92ZTsnKTtcbiAgICAgICAgICAgICAgICBkcmFnR3JvdXAuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQ2xvc2VCdXR0b24gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgdmFyIGNsb3NlSWNvbiA9IHRoaXMucmVuZGVyZXIuY3JlYXRlR3JvdXAoe1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmNsb3NlSWNvbklkLFxuICAgICAgICAgICAgICAgIHN0eWxlOiAnY3Vyc29yOnBvaW50ZXI7IHZpc2liaWxpdHk6IHZpc2libGU7J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjbG9zZUljb24uYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kcmF3Q2lyY2xlKG5ldyBoZWxwZXJfMS5DaXJjbGVPcHRpb24odGhpcy5jbG9zZUljb25JZCArICdfY2lyY2xlJywgJyNGRkZGRkYnLCB7IGNvbG9yOiB0aGVtZV8xLlRoZW1lLnNlbGVjdGlvblJlY3RTdHJva2UsIHdpZHRoOiAxIH0sIDEsIHgsIHksIDEwKSkpO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdNICcgKyAoeCAtIDQpICsgJyAnICsgKHkgLSA0KSArICcgTCAnICsgKHggKyA0KSArICcgJyArICh5ICsgNCkgKyAnIE0gJyArICh4IC0gNCkgKyAnICcgKyAoeSArIDQpICtcbiAgICAgICAgICAgICAgICAnIEwgJyArICh4ICsgNCkgKyAnICcgKyAoeSAtIDQpO1xuICAgICAgICAgICAgY2xvc2VJY29uLmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZHJhd1BhdGgoe1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmNsb3NlSWNvbklkICsgJ19jcm9zcycsIGQ6IGRpcmVjdGlvbiwgc3Ryb2tlOiB0aGVtZV8xLlRoZW1lLnNlbGVjdGlvblJlY3RTdHJva2UsXG4gICAgICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDIsIGZpbGw6IHRoZW1lXzEuVGhlbWUuc2VsZWN0aW9uUmVjdFN0cm9rZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUljb24gPSBjbG9zZUljb247XG4gICAgICAgICAgICBoZWxwZXJfMS5nZXRFbGVtZW50KHRoaXMuZHJhZ2dlZFJlY3RHcm91cCkuYXBwZW5kQ2hpbGQoY2xvc2VJY29uKTtcbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVEcmFnZ2VkRWxlbWVudHMgPSBmdW5jdGlvbiAoY2hhcnQsIGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoKGV2ZW50LnRhcmdldC5pZC5pbmRleE9mKHRoaXMuY2xvc2VJY29uSWQpID4gLTEpICYmIChldmVudC50eXBlLmluZGV4T2YoJ21vdmUnKSA9PT0gLTEpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZEVsZW1lbnRzKGNoYXJ0LCB0aGlzLnNlbGVjdGVkRGF0YUluZGV4ZXMsIGNoYXJ0LnNlcmllcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5ibHVyRWZmZWN0KGNoYXJ0LmVsZW1lbnQuaWQsIGNoYXJ0LnZpc2libGVTZXJpZXMpO1xuICAgICAgICAgICAgICAgIGVqMl9iYXNlXzIucmVtb3ZlKGhlbHBlcl8xLmdldEVsZW1lbnQodGhpcy5kcmFnZ2VkUmVjdEdyb3VwKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJzb3JTdHlsZShmYWxzZSwgY2hhcnQuc3ZnT2JqZWN0LCAnYXV0bycpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjdFBvaW50cyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUucmVzaXppbmdTZWxlY3Rpb25SZWN0ID0gZnVuY3Rpb24gKGNoYXJ0LCBsb2NhdGlvbiwgdGFwcGVkKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KHRoaXMucmVjdFBvaW50cy54LCB0aGlzLnJlY3RQb2ludHMueSwgdGhpcy5yZWN0UG9pbnRzLndpZHRoLCB0aGlzLnJlY3RQb2ludHMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciByZXNpemUgPSB0aGlzLmZpbmRSZXNpemVNb2RlKGNoYXJ0LnN2Z09iamVjdCwgcmVjdCwgbG9jYXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICByZWN0ID0gaGVscGVyXzEuZ2V0RHJhZ2dlZFJlY3RMb2NhdGlvbihyZWN0LngsIHJlY3QueSwgKHJlY3QueCArIHJlY3Qud2lkdGgpLCAocmVjdC55ICsgcmVjdC5oZWlnaHQpLCBjaGFydC5jaGFydEF4aXNMYXlvdXRQYW5lbC5zZXJpZXNDbGlwUmVjdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3RHJhZ2dpbmdSZWN0KGNoYXJ0LCByZWN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdSZWN0ID0gcmVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXBwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6aW5nID0gcmVzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmZpbmRSZXNpemVNb2RlID0gZnVuY3Rpb24gKGNoYXJ0U3ZnT2JqZWN0LCByZWN0LCBsb2NhdGlvbikge1xuICAgICAgICAgICAgdmFyIGN1cnNvclN0eWxlID0gJ3NlLXJlc2l6ZSc7XG4gICAgICAgICAgICB2YXIgcmVzaXplID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzaXplRWRnZXMgPSBbbmV3IGhlbHBlcl8xLlJlY3QocmVjdC54LCAocmVjdC55IC0gMTApLCByZWN0LndpZHRoIC0gNSwgMjApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgaGVscGVyXzEuUmVjdCgocmVjdC54IC0gMTApLCByZWN0LnksIDIwLCByZWN0LmhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBoZWxwZXJfMS5SZWN0KHJlY3QueCwgKHJlY3QueSArIHJlY3QuaGVpZ2h0IC0gMTApLCByZWN0LndpZHRoIC0gMTAsIDIwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IGhlbHBlcl8xLlJlY3QoKHJlY3QueCArIHJlY3Qud2lkdGggLSAxMCksIHJlY3QueSArIDUsIDIwLCByZWN0LmhlaWdodCAtIDE1KSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IGhlbHBlcl8xLlJlY3QoKHJlY3QueCArIHJlY3Qud2lkdGggLSAxMCksIChyZWN0LnkgKyByZWN0LmhlaWdodCAtIDEwKSwgMjAsIDIwKV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNpemVFZGdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGVscGVyXzEud2l0aEluQm91bmRzKGxvY2F0aW9uLngsIGxvY2F0aW9uLnksIHJlc2l6ZUVkZ2VzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yU3R5bGUgPSAoaSA9PT0gNCkgPyBjdXJzb3JTdHlsZSA6IChpICUgMiA9PT0gMCkgPyAnbnMtcmVzaXplJyA6ICdldy1yZXNpemUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplTW9kZSA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gcmVjdC54O1xuICAgICAgICAgICAgICAgIHZhciB5ID0gcmVjdC55O1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IChsb2NhdGlvbi54IC0geCk7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IChsb2NhdGlvbi55IC0geSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnJlc2l6ZU1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5hYnMoKHJlY3QuaGVpZ2h0ICsgcmVjdC55KSAtIGxvY2F0aW9uLnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC55ID0gTWF0aC5taW4oKHJlY3QuaGVpZ2h0ICsgcmVjdC55KSwgbG9jYXRpb24ueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IE1hdGguYWJzKChyZWN0LndpZHRoICsgcmVjdC54KSAtIGxvY2F0aW9uLngpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC54ID0gTWF0aC5taW4oKHJlY3Qud2lkdGggKyByZWN0LngpLCBsb2NhdGlvbi54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Qud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LmhlaWdodCA9IE1hdGguYWJzKGhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LnkgPSBNYXRoLm1pbihsb2NhdGlvbi55LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LndpZHRoID0gTWF0aC5hYnMod2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC54ID0gTWF0aC5taW4obG9jYXRpb24ueCwgeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC53aWR0aCA9IE1hdGguYWJzKHdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QuaGVpZ2h0ID0gTWF0aC5hYnMoaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3QueCA9IE1hdGgubWluKGxvY2F0aW9uLngsIHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC55ID0gTWF0aC5taW4obG9jYXRpb24ueSwgeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUN1cnNvclN0eWxlKHJlc2l6ZSwgaGVscGVyXzEuZ2V0RWxlbWVudCh0aGlzLmRyYWdnZWRSZWN0KSwgY3Vyc29yU3R5bGUpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDdXJzb3JTdHlsZShyZXNpemUsIGNoYXJ0U3ZnT2JqZWN0LCBjdXJzb3JTdHlsZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzaXplO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmNoYW5nZUN1cnNvclN0eWxlID0gZnVuY3Rpb24gKGlzUmVzaXplLCByZWN0ZWxlbWVudCwgY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgICAgIGN1cnNvclN0eWxlID0gaXNSZXNpemUgPyBjdXJzb3JTdHlsZSA6ICh0aGlzLmNvbnRyb2wuc3ZnT2JqZWN0ID09PSByZWN0ZWxlbWVudCkgPyAnYXV0bycgOiAnbW92ZSc7XG4gICAgICAgICAgICByZWN0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2N1cnNvcjonICsgY3Vyc29yU3R5bGUgKyAnOycpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZVNlbGVjdGVkRWxlbWVudHMgPSBmdW5jdGlvbiAoY2hhcnQsIGluZGV4LCBzZXJpZXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICBpbmRleC5zcGxpY2UoMCwgaW5kZXgubGVuZ3RoKTtcbiAgICAgICAgICAgIHZhciBzZXJpZXNFbGVtZW50cztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc2VyaWVzQ29sbGVjdGlvbl8xID0gc2VyaWVzQ29sbGVjdGlvbjsgX2kgPCBzZXJpZXNDb2xsZWN0aW9uXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IHNlcmllc0NvbGxlY3Rpb25fMVtfaV07XG4gICAgICAgICAgICAgICAgc2VyaWVzRWxlbWVudHMgPSB0aGlzLmdldFNlcmllc0VsZW1lbnRzKHNlcmllcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdHlsZXMoc2VyaWVzRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgc2VyaWVzRWxlbWVudHNfMiA9IHNlcmllc0VsZW1lbnRzOyBfYSA8IHNlcmllc0VsZW1lbnRzXzIubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJpZXNFbGVtZW50ID0gc2VyaWVzRWxlbWVudHNfMltfYV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3R5bGVzKHRoaXMuZ2V0Q2hpbGRyZW4oc2VyaWVzRWxlbWVudCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKGVsZSwgb2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMSA9IGtleXM7IF9pIDwga2V5c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoa2V5LCBvYmplY3Rba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZHJhZ2dlZFJlY3RNb3ZlZCA9IGZ1bmN0aW9uIChjaGFydCwgZ3JhYmJlZFBvaW50LCBkb0RyYXdpbmcpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3QodGhpcy5yZWN0UG9pbnRzLngsIHRoaXMucmVjdFBvaW50cy55LCB0aGlzLnJlY3RQb2ludHMud2lkdGgsIHRoaXMucmVjdFBvaW50cy5oZWlnaHQpO1xuICAgICAgICAgICAgcmVjdC54IC09IChncmFiYmVkUG9pbnQueCAtIGNoYXJ0Lm1vdXNlWCk7XG4gICAgICAgICAgICByZWN0LnkgLT0gKGdyYWJiZWRQb2ludC55IC0gY2hhcnQubW91c2VZKTtcbiAgICAgICAgICAgIHJlY3QgPSBoZWxwZXJfMS5nZXREcmFnZ2VkUmVjdExvY2F0aW9uKHJlY3QueCwgcmVjdC55LCByZWN0LnggKyByZWN0LndpZHRoLCByZWN0LmhlaWdodCArIHJlY3QueSwgY2hhcnQuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QpO1xuICAgICAgICAgICAgaWYgKGRvRHJhd2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0RyYWdnaW5nUmVjdChjaGFydCwgcmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZURyYWdTZWxlY3RlZEVsZW1lbnRzKGNoYXJ0LCByZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgU2VsZWN0aW9uLnByb3RvdHlwZS5jb21wbGV0ZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgaWYgKGNoYXJ0LnNlbGVjdGlvbk1vZGUgPT09ICdOb25lJykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodGhpcy5kcmFnZ2luZyB8fCB0aGlzLnJlc2l6aW5nKSAmJiB0aGlzLmRyYWdSZWN0LndpZHRoID4gNSAmJiB0aGlzLmRyYWdSZWN0LmhlaWdodCA+IDUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZURyYWdTZWxlY3RlZEVsZW1lbnRzKGNoYXJ0LCB0aGlzLmRyYWdSZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmVjdEdyYWJiaW5nICYmIHRoaXMucmVjdFBvaW50cy53aWR0aCAmJiB0aGlzLnJlY3RQb2ludHMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkUmVjdE1vdmVkKGNoYXJ0LCB0aGlzLmRyYWdSZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmVjdEdyYWJiaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZURyYWdnZWRFbGVtZW50cyhjaGFydCwgZSk7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0RHJhZ1JlY3QgPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllc0NsaXBSZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gaGVscGVyXzEuZ2V0RHJhZ2dlZFJlY3RMb2NhdGlvbihjaGFydC5tb3VzZURvd25YLCBjaGFydC5tb3VzZURvd25ZLCBjaGFydC5tb3VzZVgsIGNoYXJ0Lm1vdXNlWSwgc2VyaWVzQ2xpcFJlY3QpO1xuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmRyYWdTdGFydCA9IGZ1bmN0aW9uIChjaGFydCwgc2VyaWVzQ2xpcFJlY3QsIG1vdXNlRG93blgsIG1vdXNlRG93blksIGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gKGNoYXJ0LnNlbGVjdGlvbk1vZGUuaW5kZXhPZignRHJhZycpID4gLTEpICYmIChjaGFydC5pc0RvdWJsZVRhcCB8fCAhY2hhcnQuaXNUb3VjaCkgJiZcbiAgICAgICAgICAgICAgICBjaGFydC5jaGFydEFyZWFUeXBlICE9PSAnUG9sYXJSYWRhcic7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1JlY3QgPSBuZXcgaGVscGVyXzEuUmVjdChjaGFydC5tb3VzZURvd25YLCBjaGFydC5tb3VzZURvd25ZLCAwLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQubW91c2VEb3duWCA8IHNlcmllc0NsaXBSZWN0LnggfHwgY2hhcnQubW91c2VEb3duWCA+IChzZXJpZXNDbGlwUmVjdC54ICsgc2VyaWVzQ2xpcFJlY3Qud2lkdGgpIHx8XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0Lm1vdXNlRG93blkgPCBzZXJpZXNDbGlwUmVjdC55IHx8IGNoYXJ0Lm1vdXNlRG93blkgPiAoc2VyaWVzQ2xpcFJlY3QueSArIHNlcmllc0NsaXBSZWN0LmhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnJlY3RQb2ludHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdSZWN0ID0gbmV3IGhlbHBlcl8xLlJlY3QoY2hhcnQubW91c2VEb3duWCwgY2hhcnQubW91c2VEb3duWSwgMCwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemluZ1NlbGVjdGlvblJlY3QoY2hhcnQsIG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKG1vdXNlRG93blgsIG1vdXNlRG93blkpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY3RHcmFiYmluZyA9IGhlbHBlcl8xLndpdGhJbkJvdW5kcyhtb3VzZURvd25YLCBtb3VzZURvd25ZLCB0aGlzLnJlY3RQb2ludHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLm1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGNoYXJ0ID0gdGhpcy5jaGFydDtcbiAgICAgICAgICAgIGlmIChjaGFydC5zZWxlY3Rpb25Nb2RlID09PSAnTm9uZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNobW92ZScgJiYgKGVqMl9iYXNlXzEuQnJvd3Nlci5pc0lvcyB8fCBlajJfYmFzZV8xLkJyb3dzZXIuaXNJb3M3KSAmJiB0aGlzLmRyYWdnaW5nICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbnNpZGVNb3ZpbmcgPSBoZWxwZXJfMS53aXRoSW5Cb3VuZHMoY2hhcnQubW91c2VYLCBjaGFydC5tb3VzZVksIGNoYXJ0LmNoYXJ0QXhpc0xheW91dFBhbmVsLnNlcmllc0NsaXBSZWN0KTtcbiAgICAgICAgICAgIGlmIChpbnNpZGVNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWN0R3JhYmJpbmcgJiYgIXRoaXMucmVzaXppbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2VkUmVjdE1vdmVkKGNoYXJ0LCB0aGlzLmRyYWdSZWN0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kcmFnZ2luZyAmJiAhdGhpcy5yZXNpemluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdSZWN0ID0gdGhpcy5nZXREcmFnUmVjdChjaGFydCwgY2hhcnQuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdEcmFnZ2luZ1JlY3QoY2hhcnQsIHRoaXMuZHJhZ1JlY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWN0UG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXppbmdTZWxlY3Rpb25SZWN0KGNoYXJ0LCBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihjaGFydC5tb3VzZVgsIGNoYXJ0Lm1vdXNlWSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcGxldGVTZWxlY3Rpb24oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZWxlY3Rpb24ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1NlbGVjdGlvbic7XG4gICAgICAgIH07XG4gICAgICAgIFNlbGVjdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb247XG4gICAgfShzZWxlY3Rpb25fMS5CYXNlU2VsZWN0aW9uKSk7XG4gICAgZXhwb3J0cy5TZWxlY3Rpb24gPSBTZWxlY3Rpb247XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NoYXJ0L3VzZXItaW50ZXJhY3Rpb24vc2VsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEJhc2VTZWxlY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBCYXNlU2VsZWN0aW9uKGNvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbCA9IGNvbnRyb2w7XG4gICAgICAgIH1cbiAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuc2VyaWVzU3R5bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlcmllc2NsYXNzO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdHlsZUlkKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHN0eWxlKSkge1xuICAgICAgICAgICAgICAgIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5zdHlsZUlkKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5jb250cm9sLnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXJpZXMgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc2NsYXNzID0gc2VyaWVzLnNlbGVjdGlvblN0eWxlIHx8IHRoaXMuc3R5bGVJZCArICdfc2VyaWVzXycgKyBzZXJpZXMuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmlubmVySFRNTCArPSBzZXJpZXMuc2VsZWN0aW9uU3R5bGUgPyAnJyA6ICcuJyArIHNlcmllc2NsYXNzICsgJyB7IH0gJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3R5bGUuaW5uZXJIVE1MICs9ICcuJyArIHRoaXMudW5zZWxlY3RlZCArICcgeyBvcGFjaXR5OicgKyAoMC4zKSArICc7fSAnO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5jb25jYXRJbmRleGVzID0gZnVuY3Rpb24gKHVzZXJJbmRleGVzLCBsb2NhbEluZGV4ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VySW5kZXhlcy5jb25jYXQobG9jYWxJbmRleGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKHNlbGVjdGVkSW5kZXhlcykge1xuICAgICAgICAgICAgdmFyIHZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciB1bmlxdWVTZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgc2VsZWN0ZWRJbmRleGVzXzEgPSBzZWxlY3RlZEluZGV4ZXM7IF9pIDwgc2VsZWN0ZWRJbmRleGVzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gc2VsZWN0ZWRJbmRleGVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh1bmlxdWVTZXJpZXMuaW5kZXhPZihpbmRleC5zZXJpZXMpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWVTZXJpZXMucHVzaChpbmRleC5zZXJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgdW5pcXVlU2VyaWVzXzEgPSB1bmlxdWVTZXJpZXM7IF9hIDwgdW5pcXVlU2VyaWVzXzEubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdW5pcXVlU2VyaWVzXzFbX2FdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2wuc2VyaWVzW2luZGV4XS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmlzaWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuYWRkU3ZnQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsYXNzTmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuICAgICAgICAgICAgZWxlbWVudENsYXNzTmFtZSArPSAoKGVsZW1lbnRDbGFzc05hbWUgIT09ICcnKSA/ICcgJyA6ICcnKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Q2xhc3NOYW1lLmluZGV4T2YoY2xhc3NOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBlbGVtZW50Q2xhc3NOYW1lICsgY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3ZnQ2xhc3MgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsYXNzTmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRDbGFzc05hbWUuaW5kZXhPZihjbGFzc05hbWUpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBlbGVtZW50Q2xhc3NOYW1lLnJlcGxhY2UoY2xhc3NOYW1lLCAnJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRDaGlsZHJlbiA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuY2hpbGROb2Rlc1tpXS50YWdOYW1lICE9PSAnZGVmcycpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChwYXJlbnQuY2hpbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQmFzZVNlbGVjdGlvbjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQmFzZVNlbGVjdGlvbiA9IEJhc2VTZWxlY3Rpb247XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbW1vbi9zZWxlY3Rpb24vc2VsZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgaGVscGVyXzEsIGhlbHBlcl8yLCBjb25zdGFudHNfMSwgaGVscGVyXzMsIGVqMl9iYXNlXzEsIGhlbHBlcl80KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBEYXRhTGFiZWwgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBEYXRhTGFiZWwoY2hhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JIZWlnaHQgPSAwO1xuICAgICAgICAgICAgdGhpcy5jaGFydCA9IGNoYXJ0O1xuICAgICAgICB9XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuaW5pdFByaXZhdGVWYXJpYWJsZXMgPSBmdW5jdGlvbiAoc2VyaWVzLCBtYXJrZXIpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm07XG4gICAgICAgICAgICB2YXIgcmVuZGVyID0gc2VyaWVzLmNoYXJ0LnJlbmRlcmVyO1xuICAgICAgICAgICAgdHJhbnNmb3JtID0gc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nID8gJ3RyYW5zbGF0ZSgnICsgc2VyaWVzLmNsaXBSZWN0LnggKyAnLCcgKyAoc2VyaWVzLmNsaXBSZWN0LnkpICsgJyknIDogJyc7XG4gICAgICAgICAgICBpZiAobWFya2VyLmRhdGFMYWJlbC52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLnNoYXBlRWxlbWVudCA9IHJlbmRlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdTaGFwZUdyb3VwJyArIHNlcmllcy5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHRyYW5zZm9ybSxcbiAgICAgICAgICAgICAgICAgICAgJ2NsaXAtcGF0aCc6ICd1cmwoIycgKyB0aGlzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX0NoYXJ0U2VyaWVzQ2xpcFJlY3RfJyArIHNlcmllcy5pbmRleCArICcpJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlcmllcy50ZXh0RWxlbWVudCA9IHJlbmRlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6IHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdUZXh0R3JvdXAnICsgc2VyaWVzLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogdHJhbnNmb3JtLFxuICAgICAgICAgICAgICAgICAgICAnY2xpcC1wYXRoJzogJ3VybCgjJyArIHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfQ2hhcnRTZXJpZXNDbGlwUmVjdF8nICsgc2VyaWVzLmluZGV4ICsgJyknXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcmtlckhlaWdodCA9ICgoc2VyaWVzLnR5cGUgPT09ICdTY2F0dGVyJyB8fCBtYXJrZXIudmlzaWJsZSkgJiYgIXRoaXMuaXNSZWN0U2VyaWVzKHNlcmllcykpID8gKG1hcmtlci5oZWlnaHQgLyAyKSA6IDA7XG4gICAgICAgICAgICB0aGlzLmNvbW1vbklkID0gdGhpcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfUG9pbnRfJztcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRXJyb3JIZWlnaHQoc2VyaWVzLCBzZXJpZXMubWFya2VyLmRhdGFMYWJlbC5wb3NpdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuY2FsY3VsYXRlRXJyb3JIZWlnaHQgPSBmdW5jdGlvbiAoc2VyaWVzLCBwb3NpdGlvbikge1xuICAgICAgICAgICAgaWYgKCFzZXJpZXMuZXJyb3JCYXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLmVycm9yQmFyLnZpc2libGUgJiYgdGhpcy5jaGFydC5jaGFydEFyZWFUeXBlICE9PSAnUG9sYXJSYWRhcicpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gc2VyaWVzLmVycm9yQmFyLmRpcmVjdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpdmVIZWlnaHQgPSB0aGlzLmNoYXJ0LmVycm9yQmFyTW9kdWxlLnBvc2l0aXZlSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciBuZWdhdGl2ZUhlaWdodCA9IHRoaXMuY2hhcnQuZXJyb3JCYXJNb2R1bGUubmVnYXRpdmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNSZWN0U2VyaWVzKHNlcmllcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnVG9wJyB8fCBwb3NpdGlvbiA9PT0gJ0F1dG8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnQm90aCcgfHwgZGlyZWN0aW9uID09PSAnTWludXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckhlaWdodCA9IG5lZ2F0aXZlSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnT3V0ZXInIHx8IHBvc2l0aW9uID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdCb3RoJyB8fCBkaXJlY3Rpb24gPT09ICdQbHVzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JIZWlnaHQgPSBwb3NpdGl2ZUhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JIZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdUb3AnIHx8IHBvc2l0aW9uID09PSAnT3V0ZXInIHx8IHBvc2l0aW9uID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZGlyZWN0aW9uID09PSAnQm90aCcgfHwgZGlyZWN0aW9uID09PSAnUGx1cycpICYmICghc2VyaWVzLmNoYXJ0LmlzVHJhbnNwb3NlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGVpZ2h0ID0gcG9zaXRpdmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdCb3R0b20nIHx8IHBvc2l0aW9uID09PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdCb3RoJyB8fCBkaXJlY3Rpb24gPT09ICdNaW51cycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGVpZ2h0ID0gbmVnYXRpdmVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JIZWlnaHQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmlzUmVjdFNlcmllcyA9IGZ1bmN0aW9uIChzZXJpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXJpZXMuaXNSZWN0U2VyaWVzIHx8IHNlcmllcy50eXBlID09PSAnUmFuZ2VBcmVhJztcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUxhYmVsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoc2VyaWVzLCBjaGFydCwgZGF0YUxhYmVsKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5pbml0UHJpdmF0ZVZhcmlhYmxlcyhzZXJpZXMsIHNlcmllcy5tYXJrZXIpO1xuICAgICAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgICAgICB2YXIgcmdiVmFsdWU7XG4gICAgICAgICAgICB2YXIgY29udHJhc3Q7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICB2YXIgYm9yZGVyO1xuICAgICAgICAgICAgdmFyIHRleHRTaXplO1xuICAgICAgICAgICAgdGhpcy5pbnZlcnRlZCA9IGNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXM7XG4gICAgICAgICAgICB0aGlzLnlBeGlzSW52ZXJzZWQgPSBzZXJpZXMueUF4aXMuaXNJbnZlcnNlZDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IGNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgc2VyaWVzLmluZGV4ICsgJ19EYXRhTGFiZWxDb2xsZWN0aW9ucydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2VyaWVzLnBvaW50cy5tYXAoZnVuY3Rpb24gKHBvaW50LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIF90aGlzLm1hcmdpbiA9IGRhdGFMYWJlbC5tYXJnaW47XG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsVGV4dCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBsYWJlbExlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IHNlcmllcy5jbGlwUmVjdDtcbiAgICAgICAgICAgICAgICBib3JkZXIgPSB7IHdpZHRoOiBkYXRhTGFiZWwuYm9yZGVyLndpZHRoLCBjb2xvcjogZGF0YUxhYmVsLmJvcmRlci5jb2xvciB9O1xuICAgICAgICAgICAgICAgIGlmICgocG9pbnQuc3ltYm9sTG9jYXRpb25zLmxlbmd0aCAmJiBwb2ludC5zeW1ib2xMb2NhdGlvbnNbMF0pIHx8XG4gICAgICAgICAgICAgICAgICAgIChzZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInICYmIHBvaW50LnJlZ2lvbnMubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQgPSBoZWxwZXJfMi5nZXRMYWJlbFRleHQocG9pbnQsIHNlcmllcywgY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgICBsYWJlbExlbmd0aCA9IGxhYmVsVGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFiZWxMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEudGV4dFJlbmRlciwgc2VyaWVzOiBzZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQ6IHBvaW50LCB0ZXh0OiBsYWJlbFRleHRbaV0sIGJvcmRlcjogYm9yZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBkYXRhTGFiZWwuZmlsbCwgdGVtcGxhdGU6IGRhdGFMYWJlbC50ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LnRyaWdnZXIoY29uc3RhbnRzXzEudGV4dFJlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzRGF0YS5jYW5jZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mb250QmFja2dyb3VuZCA9IGFyZ3NEYXRhLmNvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzRGF0YUxhYmVsU2hhcGUoYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm1hcmtlckhlaWdodCA9IHNlcmllcy50eXBlID09PSAnQnViYmxlJyA/IChwb2ludC5yZWdpb25zWzBdLmhlaWdodCAvIDIpIDogX3RoaXMubWFya2VySGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzRGF0YS50ZW1wbGF0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jcmVhdGVEYXRhTGFiZWxUZW1wbGF0ZShlbGVtZW50LCBzZXJpZXMsIGRhdGFMYWJlbCwgcG9pbnQsIGFyZ3NEYXRhLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTaXplID0gaGVscGVyXzIubWVhc3VyZVRleHQoYXJnc0RhdGEudGV4dCwgZGF0YUxhYmVsLmZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN0ID0gX3RoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uKHBvaW50LCBzZXJpZXMsIHRleHRTaXplLCBkYXRhTGFiZWwsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlbHBlcl8xLmlzQ29sbGlkZShyZWN0LCBjaGFydC5kYXRhTGFiZWxDb2xsZWN0aW9ucywgY2xpcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LmRhdGFMYWJlbENvbGxlY3Rpb25zLnB1c2gobmV3IGhlbHBlcl8xLlJlY3QocmVjdC54ICsgY2xpcC54LCByZWN0LnkgKyBjbGlwLnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNTaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5zaGFwZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhcnQucmVuZGVyZXIuZHJhd1JlY3RhbmdsZShuZXcgaGVscGVyXzEuUmVjdE9wdGlvbihfdGhpcy5jb21tb25JZCArIGluZGV4ICsgJ19UZXh0U2hhcGVfJyArIGksIGFyZ3NEYXRhLmNvbG9yLCBhcmdzRGF0YS5ib3JkZXIsIGRhdGFMYWJlbC5vcGFjaXR5LCByZWN0LCBkYXRhTGFiZWwucngsIGRhdGFMYWJlbC5yeSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJnYlZhbHVlID0gaGVscGVyXzIuY29udmVydEhleFRvQ29sb3IoaGVscGVyXzIuY29sb3JOYW1lVG9IZXgoX3RoaXMuZm9udEJhY2tncm91bmQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyYXN0ID0gTWF0aC5yb3VuZCgocmdiVmFsdWUuciAqIDI5OSArIHJnYlZhbHVlLmcgKiA1ODcgKyByZ2JWYWx1ZS5iICogMTE0KSAvIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscGVyXzIudGV4dEVsZW1lbnQobmV3IGhlbHBlcl8xLlRleHRPcHRpb24oX3RoaXMuY29tbW9uSWQgKyBpbmRleCArICdfVGV4dF8nICsgaSwgcmVjdC54ICsgX3RoaXMubWFyZ2luLmxlZnQgKyB0ZXh0U2l6ZS53aWR0aCAvIDIsIHJlY3QueSArIF90aGlzLm1hcmdpbi50b3AgKyB0ZXh0U2l6ZS5oZWlnaHQgKiAzIC8gNCwgJ21pZGRsZScsIGFyZ3NEYXRhLnRleHQsICdyb3RhdGUoMCwnICsgKHJlY3QueCkgKyAnLCcgKyAocmVjdC55KSArICcpJywgJ2F1dG8nKSwgZGF0YUxhYmVsLmZvbnQsIGRhdGFMYWJlbC5mb250LmNvbG9yIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChjb250cmFzdCA+PSAxMjggfHwgc2VyaWVzLnR5cGUgPT09ICdIaWxvJykgPyAnYmxhY2snIDogJ3doaXRlJyksIHNlcmllcy50ZXh0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNoaWxkRWxlbWVudENvdW50KSB7XG4gICAgICAgICAgICAgICAgaGVscGVyXzMuZ2V0RWxlbWVudChjaGFydC5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmNyZWF0ZURhdGFMYWJlbFRlbXBsYXRlID0gZnVuY3Rpb24gKHBhcmVudEVsZW1lbnQsIHNlcmllcywgZGF0YUxhYmVsLCBwb2ludCwgZGF0YSwgbGFiZWxJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIHRvcDogMCB9O1xuICAgICAgICAgICAgdmFyIGNsaXAgPSBzZXJpZXMuY2xpcFJlY3Q7XG4gICAgICAgICAgICB2YXIgY2hpbGRFbGVtZW50ID0gaGVscGVyXzMuY3JlYXRlVGVtcGxhdGUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuY2hhcnQuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBzZXJpZXMuaW5kZXggKyAnX0RhdGFMYWJlbF8nXG4gICAgICAgICAgICAgICAgICAgICsgcG9pbnQuaW5kZXggKyAobGFiZWxJbmRleCA/ICgnXycgKyBsYWJlbEluZGV4KSA6ICcnKSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6ICdwb3NpdGlvbjogYWJzb2x1dGU7YmFja2dyb3VuZC1jb2xvcjonICsgZGF0YS5jb2xvciArICc7JyArXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlcl8zLmdldEZvbnRTdHlsZShkYXRhTGFiZWwuZm9udCkgKyAnO2JvcmRlcjonICsgZGF0YS5ib3JkZXIud2lkdGggKyAncHggc29saWQgJyArIGRhdGEuYm9yZGVyLmNvbG9yICsgJzsnXG4gICAgICAgICAgICB9KSwgcG9pbnQuaW5kZXgsIGRhdGEudGVtcGxhdGUsIHRoaXMuY2hhcnQsIHBvaW50LCBzZXJpZXMpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRSZWN0ID0gaGVscGVyXzMubWVhc3VyZUVsZW1lbnRSZWN0KGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IHRoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uKHBvaW50LCBzZXJpZXMsIHsgd2lkdGg6IGVsZW1lbnRSZWN0LndpZHRoLCBoZWlnaHQ6IGVsZW1lbnRSZWN0LmhlaWdodCB9LCBkYXRhTGFiZWwsIGxhYmVsSW5kZXgpO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnN0eWxlLmxlZnQgPSAoKHRoaXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInID8gMCA6IHNlcmllcy5jbGlwUmVjdC54KSArIHJlY3QueCkgKyAncHgnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnN0eWxlLnRvcCA9ICgodGhpcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnUG9sYXJSYWRhcicgPyAwIDogc2VyaWVzLmNsaXBSZWN0LnkpICsgcmVjdC55KSArICdweCc7XG4gICAgICAgICAgICB2YXIgcmdiVmFsdWUgPSBoZWxwZXJfMi5jb252ZXJ0SGV4VG9Db2xvcihoZWxwZXJfMi5jb2xvck5hbWVUb0hleCh0aGlzLmZvbnRCYWNrZ3JvdW5kKSk7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnQuc3R5bGUuY29sb3IgPSBkYXRhTGFiZWwuZm9udC5jb2xvciB8fFxuICAgICAgICAgICAgICAgICgoTWF0aC5yb3VuZCgocmdiVmFsdWUuciAqIDI5OSArIHJnYlZhbHVlLmcgKiA1ODcgKyByZ2JWYWx1ZS5iICogMTE0KSAvIDEwMDApKSA+PSAxMjggPyAnYmxhY2snIDogJ3doaXRlJyk7XG4gICAgICAgICAgICBpZiAoY2hpbGRFbGVtZW50LmNoaWxkRWxlbWVudENvdW50ICYmICFoZWxwZXJfMS5pc0NvbGxpZGUocmVjdCwgdGhpcy5jaGFydC5kYXRhTGFiZWxDb2xsZWN0aW9ucywgY2xpcClcbiAgICAgICAgICAgICAgICAmJiAoc2VyaWVzLnNlcmllc1R5cGUgIT09ICdYWScgfHwgcG9pbnQueVZhbHVlID09PSB1bmRlZmluZWQgfHwgaGVscGVyXzMud2l0aEluKHBvaW50LnlWYWx1ZSwgc2VyaWVzLnlBeGlzLnZpc2libGVSYW5nZSkpXG4gICAgICAgICAgICAgICAgJiYgaGVscGVyXzMud2l0aEluKHBvaW50LnhWYWx1ZSwgc2VyaWVzLnhBeGlzLnZpc2libGVSYW5nZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LmRhdGFMYWJlbENvbGxlY3Rpb25zLnB1c2gobmV3IGhlbHBlcl8xLlJlY3QocmVjdC54ICsgY2xpcC54LCByZWN0LnkgKyBjbGlwLnksIHJlY3Qud2lkdGgsIHJlY3QuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuYW5pbWF0aW9uLmVuYWJsZSAmJiB0aGlzLmNoYXJ0LmFuaW1hdGVTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0RhdGFMYWJlbEFuaW1hdGlvbihzZXJpZXMsIGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmNhbGN1bGF0ZVRleHRQb3NpdGlvbiA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCB0ZXh0U2l6ZSwgZGF0YUxhYmVsLCBsYWJlbEluZGV4KSB7XG4gICAgICAgICAgICB2YXIgbGFiZWxSZWdpb24gPSBsYWJlbEluZGV4ID4gMSA/IChzZXJpZXMudHlwZSA9PT0gJ0NhbmRsZScpID8gcG9pbnQucmVnaW9uc1sxXSA6IHBvaW50LnJlZ2lvbnNbMF0gOiBwb2ludC5yZWdpb25zWzBdO1xuICAgICAgICAgICAgaWYgKGxhYmVsSW5kZXggPiAxICYmIHNlcmllcy50eXBlID09PSAnSGlsb09wZW5DbG9zZScpIHtcbiAgICAgICAgICAgICAgICBsYWJlbFJlZ2lvbiA9IChsYWJlbEluZGV4ID09PSAyKSA/IHBvaW50LnJlZ2lvbnNbMV0gOiBwb2ludC5yZWdpb25zWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uO1xuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmdldExhYmVsTG9jYXRpb24ocG9pbnQsIHNlcmllcywgdGV4dFNpemUsIGxhYmVsSW5kZXgpO1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgdmFyIGNsaXBSZWN0ID0gc2VyaWVzLmNsaXBSZWN0O1xuICAgICAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyB8fCAhdGhpcy5pc1JlY3RTZXJpZXMoc2VyaWVzKSB8fCBzZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvblggPSBsb2NhdGlvbi54O1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbm1lbnRWYWx1ZSA9IHRleHRTaXplLmhlaWdodCArICh0aGlzLmJvcmRlcldpZHRoICogMikgKyB0aGlzLm1hcmtlckhlaWdodCArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFyZ2luLmJvdHRvbSArIHRoaXMubWFyZ2luLnRvcCArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ueSA9IChkYXRhTGFiZWwucG9zaXRpb24gPT09ICdBdXRvJykgPyBsb2NhdGlvbi55IDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVBbGlnbm1lbnQoYWxpZ25tZW50VmFsdWUsIGxvY2F0aW9uLnksIGRhdGFMYWJlbC5hbGlnbm1lbnQsIHRoaXMuaXNSZWN0U2VyaWVzKHNlcmllcykgPyBwb2ludC55VmFsdWUgPCAwIDogZmFsc2UpO1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnkgPSAoIXRoaXMuaXNSZWN0U2VyaWVzKHNlcmllcykgfHwgc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJykgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVBhdGhQb3NpdGlvbihsb2NhdGlvbi55LCBkYXRhTGFiZWwucG9zaXRpb24sIHNlcmllcywgcG9pbnQsIHRleHRTaXplLCBsYWJlbEluZGV4KSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlUmVjdFBvc2l0aW9uKGxvY2F0aW9uLnksIGxhYmVsUmVnaW9uLCBwb2ludC55VmFsdWUgPCAwICE9PSB0aGlzLnlBeGlzSW52ZXJzZWQsIGRhdGFMYWJlbC5wb3NpdGlvbiwgc2VyaWVzLCB0ZXh0U2l6ZSwgbGFiZWxJbmRleCwgcG9pbnQpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmVjdFNlcmllcyhzZXJpZXMpICYmIHRoaXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gdGhpcy5jYWxjdWxhdGVQb2xhclJlY3RQb3NpdGlvbihsb2NhdGlvbiwgZGF0YUxhYmVsLnBvc2l0aW9uLCBzZXJpZXMsIHBvaW50LCB0ZXh0U2l6ZSwgbGFiZWxJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvblkgPSBsb2NhdGlvbi55O1xuICAgICAgICAgICAgICAgIHZhciBhbGlnbm1lbnRWYWx1ZSA9IHRleHRTaXplLndpZHRoICsgdGhpcy5ib3JkZXJXaWR0aCArIHRoaXMubWFyZ2luLmxlZnQgKyB0aGlzLm1hcmdpbi5yaWdodCAtIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ueCA9IGRhdGFMYWJlbC5wb3NpdGlvbiA9PT0gJ0F1dG8nID8gbG9jYXRpb24ueCA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQWxpZ25tZW50KGFsaWdubWVudFZhbHVlLCBsb2NhdGlvbi54LCBkYXRhTGFiZWwuYWxpZ25tZW50LCBwb2ludC55VmFsdWUgPCAwKTtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi54ID0gdGhpcy5jYWxjdWxhdGVSZWN0UG9zaXRpb24obG9jYXRpb24ueCwgbGFiZWxSZWdpb24sIHBvaW50LnlWYWx1ZSA8IDAgIT09IHRoaXMueUF4aXNJbnZlcnNlZCwgZGF0YUxhYmVsLnBvc2l0aW9uLCBzZXJpZXMsIHRleHRTaXplLCBsYWJlbEluZGV4LCBwb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWN0ID0gaGVscGVyXzIuY2FsY3VsYXRlUmVjdChsb2NhdGlvbiwgdGV4dFNpemUsIHRoaXMubWFyZ2luKTtcbiAgICAgICAgICAgIGlmICghKChyZWN0LnkgPiBjbGlwUmVjdC5oZWlnaHQpIHx8IChyZWN0LnggPiBjbGlwUmVjdC53aWR0aCkgfHxcbiAgICAgICAgICAgICAgICAocmVjdC54ICsgcmVjdC53aWR0aCA8IDApIHx8IChyZWN0LnkgKyByZWN0LmhlaWdodCA8IDApKSkge1xuICAgICAgICAgICAgICAgIHJlY3QueCA9IHJlY3QueCA8IDAgPyBwYWRkaW5nIDogcmVjdC54O1xuICAgICAgICAgICAgICAgIHJlY3QueSA9IHJlY3QueSA8IDAgPyBwYWRkaW5nIDogcmVjdC55O1xuICAgICAgICAgICAgICAgIHJlY3QueCAtPSAocmVjdC54ICsgcmVjdC53aWR0aCkgPiBjbGlwUmVjdC53aWR0aCA/IChyZWN0LnggKyByZWN0LndpZHRoKSAtIGNsaXBSZWN0LndpZHRoICsgcGFkZGluZyA6IDA7XG4gICAgICAgICAgICAgICAgcmVjdC55IC09IChyZWN0LnkgKyByZWN0LmhlaWdodCkgPiBjbGlwUmVjdC5oZWlnaHQgPyAocmVjdC55ICsgcmVjdC5oZWlnaHQpIC0gY2xpcFJlY3QuaGVpZ2h0ICsgcGFkZGluZyA6IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mb250QmFja2dyb3VuZCA9IHRoaXMuZm9udEJhY2tncm91bmQgPT09ICd0cmFuc3BhcmVudCcgPyB0aGlzLmNoYXJ0LmNoYXJ0QXJlYS5iYWNrZ3JvdW5kIDogdGhpcy5mb250QmFja2dyb3VuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmNhbGN1bGF0ZVBvbGFyUmVjdFBvc2l0aW9uID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBwb3NpdGlvbiwgc2VyaWVzLCBwb2ludCwgc2l6ZSwgbGFiZWxJbmRleCkge1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgdmFyIGNvbHVtblJhZGl1cztcbiAgICAgICAgICAgIGlmIChsYWJlbEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uUmFkaXVzID0gcG9pbnQucmVnaW9uRGF0YS5yYWRpdXMgPCBwb2ludC5yZWdpb25EYXRhLmlubmVyUmFkaXVzID8gcG9pbnQucmVnaW9uRGF0YS5pbm5lclJhZGl1c1xuICAgICAgICAgICAgICAgICAgICA6IHBvaW50LnJlZ2lvbkRhdGEucmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sdW1uUmFkaXVzID0gcG9pbnQucmVnaW9uRGF0YS5yYWRpdXMgPiBwb2ludC5yZWdpb25EYXRhLmlubmVyUmFkaXVzID8gcG9pbnQucmVnaW9uRGF0YS5pbm5lclJhZGl1c1xuICAgICAgICAgICAgICAgICAgICA6IHBvaW50LnJlZ2lvbkRhdGEucmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZlY3RvcjtcbiAgICAgICAgICAgIHZhciB0aWNrc2J3dExhYmVsID0gc2VyaWVzLnhBeGlzLnZhbHVlVHlwZSA9PT0gJ0NhdGVnb3J5JyAmJiBzZXJpZXMueEF4aXMubGFiZWxQbGFjZW1lbnQgPT09ICdCZXR3ZWVuVGlja3MnID8gMC41XG4gICAgICAgICAgICAgICAgOiAwLjUgLSAoc2VyaWVzLnJlY3RDb3VudCAvIDIpO1xuICAgICAgICAgICAgdGhpcy5mb250QmFja2dyb3VuZCA9IHRoaXMuZm9udEJhY2tncm91bmQgPT09ICd0cmFuc3BhcmVudCcgPyB0aGlzLmNoYXJ0LmNoYXJ0QXJlYS5iYWNrZ3JvdW5kIDogdGhpcy5mb250QmFja2dyb3VuZDtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignU3RhY2tpbmcnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gJ091dGVyJyA/ICdUb3AnIDogcG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZXJpZXMuZHJhd1R5cGUuaW5kZXhPZignUmFuZ2UnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAocG9zaXRpb24gPT09ICdPdXRlcicgfHwgcG9zaXRpb24gPT09ICdUb3AnKSA/IHBvc2l0aW9uIDogJ0F1dG8nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAnT3V0ZXInKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uUmFkaXVzID0gbGFiZWxJbmRleCA9PT0gMCA/IGNvbHVtblJhZGl1cyArIDIgKiBwYWRkaW5nIDogY29sdW1uUmFkaXVzIC0gMiAqIHBhZGRpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ01pZGRsZScpIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5SYWRpdXMgPSBjb2x1bW5SYWRpdXMgLyAyICsgcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAnVG9wJykge1xuICAgICAgICAgICAgICAgIGNvbHVtblJhZGl1cyA9IGxhYmVsSW5kZXggPT09IDAgPyBjb2x1bW5SYWRpdXMgLSAyICogcGFkZGluZyA6IGNvbHVtblJhZGl1cyArIDIgKiBwYWRkaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24gPT09ICdCb3R0b20nKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uUmFkaXVzID0gcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbHVtblJhZGl1cyA9IGNvbHVtblJhZGl1cyA+PSBzZXJpZXMuY2hhcnQucmFkaXVzID8gY29sdW1uUmFkaXVzIC0gcGFkZGluZyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMuZHJhd1R5cGUgPT09ICdTdGFja2luZ0NvbHVtbicgPyBjb2x1bW5SYWRpdXMgLSAyICogcGFkZGluZyA6IGNvbHVtblJhZGl1cyArIDIgKiBwYWRkaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uUmFkaXVzID0gY29sdW1uUmFkaXVzID49IHNlcmllcy5jaGFydC5yYWRpdXMgPyBjb2x1bW5SYWRpdXMgKyBwYWRkaW5nIDogY29sdW1uUmFkaXVzIC0gMiAqIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVjdG9yID0gaGVscGVyXzMuQ29lZmZpY2llbnRUb1ZlY3RvcihoZWxwZXJfMy52YWx1ZVRvUG9sYXJDb2VmZmljaWVudCgocG9pbnQueFZhbHVlICsgdGlja3Nid3RMYWJlbCAvIHNlcmllcy5yZWN0Q291bnQgKyBzZXJpZXMucG9zaXRpb24gLyBzZXJpZXMucmVjdENvdW50KSwgc2VyaWVzLnhBeGlzKSwgc2VyaWVzLmNoYXJ0LnByaW1hcnlYQXhpcy5zdGFydEFuZ2xlKTtcbiAgICAgICAgICAgIGxvY2F0aW9uLnggPSBzZXJpZXMuY2xpcFJlY3Qud2lkdGggLyAyICsgc2VyaWVzLmNsaXBSZWN0LnggKyBjb2x1bW5SYWRpdXMgKiB2ZWN0b3IueDtcbiAgICAgICAgICAgIGxvY2F0aW9uLnkgPSBzZXJpZXMuY2xpcFJlY3QuaGVpZ2h0IC8gMiArIHNlcmllcy5jbGlwUmVjdC55ICsgY29sdW1uUmFkaXVzICogdmVjdG9yLnk7XG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuZ2V0TGFiZWxMb2NhdGlvbiA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCB0ZXh0U2l6ZSwgbGFiZWxJbmRleCkge1xuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oMCwgMCk7XG4gICAgICAgICAgICB2YXIgbGFiZWxSZWdpb24gPSAoc2VyaWVzLnR5cGUgPT09ICdDYW5kbGUnICYmIGxhYmVsSW5kZXggPiAxKSA/IHBvaW50LnJlZ2lvbnNbMV0gOiBwb2ludC5yZWdpb25zWzBdO1xuICAgICAgICAgICAgaWYgKHNlcmllcy50eXBlID09PSAnSGlsb09wZW5DbG9zZScpIHtcbiAgICAgICAgICAgICAgICBsYWJlbFJlZ2lvbiA9IChsYWJlbEluZGV4ID09PSAyKSA/IHBvaW50LnJlZ2lvbnNbMV0gOiBwb2ludC5yZWdpb25zWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHhBeGlzID0gc2VyaWVzLnhBeGlzO1xuICAgICAgICAgICAgdmFyIHlBeGlzID0gc2VyaWVzLnlBeGlzO1xuICAgICAgICAgICAgdmFyIGlzSW52ZXJ0ZWQgPSBzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcztcbiAgICAgICAgICAgIGlmIChzZXJpZXMudHlwZSA9PT0gJ0JveEFuZFdoaXNrZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJIZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobGFiZWxJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IGhlbHBlcl80LmdldFBvaW50KHBvaW50LnhWYWx1ZSwgcG9pbnQubWVkaWFuLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gaGVscGVyXzQuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC5tYXhpbXVtLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gaGVscGVyXzQuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC5taW5pbXVtLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gaGVscGVyXzQuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC51cHBlclF1YXJ0aWxlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gaGVscGVyXzQuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC5sb3dlclF1YXJ0aWxlLCB4QXhpcywgeUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gaGVscGVyXzQuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC5vdXRsaWVyc1tsYWJlbEluZGV4IC0gNV0sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtlckhlaWdodCA9IHNlcmllcy5tYXJrZXIuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGFiZWxJbmRleCA9PT0gMCB8fCBsYWJlbEluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihwb2ludC5zeW1ib2xMb2NhdGlvbnNbMF0ueCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKGxhYmVsSW5kZXggPT09IDIgfHwgbGFiZWxJbmRleCA9PT0gMykgJiYgc2VyaWVzLnR5cGUgPT09ICdDYW5kbGUnKSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihwb2ludC5zeW1ib2xMb2NhdGlvbnNbMV0ueCwgcG9pbnQuc3ltYm9sTG9jYXRpb25zWzFdLnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnZlcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0geyB4OiBsYWJlbFJlZ2lvbi54ICsgKGxhYmVsUmVnaW9uLndpZHRoKSAvIDIsIHk6IGxhYmVsUmVnaW9uLnkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0geyB4OiBsYWJlbFJlZ2lvbi54ICsgbGFiZWxSZWdpb24ud2lkdGgsIHk6IGxhYmVsUmVnaW9uLnkgKyAobGFiZWxSZWdpb24uaGVpZ2h0KSAvIDIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYWJlbEluZGV4ID4gMSAmJiBzZXJpZXMudHlwZSA9PT0gJ0hpbG9PcGVuQ2xvc2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBsYWJlbFJlZ2lvbi5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnkgPSBsYWJlbFJlZ2lvbi55ICsgaGVpZ2h0IC8gMiArIDIgKiAobGFiZWxJbmRleCA9PT0gMiA/IDEgOiAtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBsYWJlbFJlZ2lvbi53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ueCA9IGxhYmVsUmVnaW9uLnggKyB3aWR0aCAvIDIgKyAyICogKGxhYmVsSW5kZXggPT09IDIgPyAxIDogLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUxhYmVsLnByb3RvdHlwZS5jYWxjdWxhdGVSZWN0UG9zaXRpb24gPSBmdW5jdGlvbiAobGFiZWxMb2NhdGlvbiwgcmVjdCwgaXNNaW51cywgcG9zaXRpb24sIHNlcmllcywgdGV4dFNpemUsIGxhYmVsSW5kZXgsIHBvaW50KSB7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdQb2xhclJhZGFyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgdmFyIG1hcmdpbiA9IHRoaXMubWFyZ2luO1xuICAgICAgICAgICAgdmFyIHRleHRMZW5ndGggPSAhdGhpcy5pbnZlcnRlZCA/IHRleHRTaXplLmhlaWdodCA6IHRleHRTaXplLndpZHRoO1xuICAgICAgICAgICAgdmFyIGV4dHJhU3BhY2UgPSB0aGlzLmJvcmRlcldpZHRoICsgdGV4dExlbmd0aCAvIDIgKyBwYWRkaW5nO1xuICAgICAgICAgICAgaWYgKHNlcmllcy50eXBlLmluZGV4T2YoJ1N0YWNraW5nJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gPT09ICdPdXRlcicgPyAnVG9wJyA6IHBvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLnR5cGUuaW5kZXhPZignUmFuZ2UnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAocG9zaXRpb24gPT09ICdPdXRlcicgfHwgcG9zaXRpb24gPT09ICdUb3AnKSA/IHBvc2l0aW9uIDogJ0F1dG8nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLnR5cGUgPT09ICdXYXRlcmZhbGwnKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gJ0F1dG8nID8gJ01pZGRsZScgOiBwb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdCb3R0b20nOlxuICAgICAgICAgICAgICAgICAgICBsYWJlbExvY2F0aW9uID0gIXRoaXMuaW52ZXJ0ZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNNaW51cyA/IChsYWJlbExvY2F0aW9uIC0gcmVjdC5oZWlnaHQgKyBleHRyYVNwYWNlICsgbWFyZ2luLnRvcCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsYWJlbExvY2F0aW9uICsgcmVjdC5oZWlnaHQgLSBleHRyYVNwYWNlIC0gbWFyZ2luLmJvdHRvbSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNaW51cyA/IChsYWJlbExvY2F0aW9uICsgcmVjdC53aWR0aCAtIGV4dHJhU3BhY2UgLSBtYXJnaW4ubGVmdCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsYWJlbExvY2F0aW9uIC0gcmVjdC53aWR0aCArIGV4dHJhU3BhY2UgKyBtYXJnaW4ucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdNaWRkbGUnOlxuICAgICAgICAgICAgICAgICAgICBsYWJlbExvY2F0aW9uID0gbGFiZWxMb2NhdGlvbiA9ICF0aGlzLmludmVydGVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIChpc01pbnVzID8gbGFiZWxMb2NhdGlvbiAtIChyZWN0LmhlaWdodCAvIDIpIDogbGFiZWxMb2NhdGlvbiArIChyZWN0LmhlaWdodCAvIDIpKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAoaXNNaW51cyA/IGxhYmVsTG9jYXRpb24gKyAocmVjdC53aWR0aCAvIDIpIDogbGFiZWxMb2NhdGlvbiAtIChyZWN0LndpZHRoIC8gMikpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdBdXRvJzpcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxMb2NhdGlvbiA9IHRoaXMuY2FsY3VsYXRlUmVjdEFjdHVhbFBvc2l0aW9uKGxhYmVsTG9jYXRpb24sIHJlY3QsIGlzTWludXMsIHNlcmllcywgdGV4dFNpemUsIGxhYmVsSW5kZXgsIHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFTcGFjZSArPSB0aGlzLmVycm9ySGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBsYWJlbExvY2F0aW9uID0gdGhpcy5jYWxjdWxhdGVUb3BBbmRPdXRlclBvc2l0aW9uKGxhYmVsTG9jYXRpb24sIHJlY3QsIHBvc2l0aW9uLCBzZXJpZXMsIGxhYmVsSW5kZXgsIGV4dHJhU3BhY2UsIGlzTWludXMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVjayA9ICF0aGlzLmludmVydGVkID8gKGxhYmVsTG9jYXRpb24gPCByZWN0LnkgfHwgbGFiZWxMb2NhdGlvbiA+IHJlY3QueSArIHJlY3QuaGVpZ2h0KSA6XG4gICAgICAgICAgICAgICAgKGxhYmVsTG9jYXRpb24gPCByZWN0LnggfHwgbGFiZWxMb2NhdGlvbiA+IHJlY3QueCArIHJlY3Qud2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5mb250QmFja2dyb3VuZCA9IGNoZWNrID9cbiAgICAgICAgICAgICAgICAodGhpcy5mb250QmFja2dyb3VuZCA9PT0gJ3RyYW5zcGFyZW50JyA/IHRoaXMuY2hhcnQuY2hhcnRBcmVhLmJhY2tncm91bmQgOiB0aGlzLmZvbnRCYWNrZ3JvdW5kKVxuICAgICAgICAgICAgICAgIDogdGhpcy5mb250QmFja2dyb3VuZCA9PT0gJ3RyYW5zcGFyZW50JyA/IChwb2ludC5jb2xvciB8fCBzZXJpZXMuaW50ZXJpb3IpIDogdGhpcy5mb250QmFja2dyb3VuZDtcbiAgICAgICAgICAgIHJldHVybiBsYWJlbExvY2F0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmNhbGN1bGF0ZVBhdGhQb3NpdGlvbiA9IGZ1bmN0aW9uIChsYWJlbExvY2F0aW9uLCBwb3NpdGlvbiwgc2VyaWVzLCBwb2ludCwgc2l6ZSwgbGFiZWxJbmRleCkge1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSA1O1xuICAgICAgICAgICAgaWYgKChzZXJpZXMudHlwZS5pbmRleE9mKCdBcmVhJykgPiAtMSAmJiBzZXJpZXMudHlwZSAhPT0gJ1JhbmdlQXJlYScpXG4gICAgICAgICAgICAgICAgJiYgdGhpcy55QXhpc0ludmVyc2VkICYmIHNlcmllcy5tYXJrZXIuZGF0YUxhYmVsLnBvc2l0aW9uICE9PSAnQXV0bycpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uID09PSAnVG9wJyA/ICdCb3R0b20nIDogcG9zaXRpb24gPT09ICdCb3R0b20nID8gJ1RvcCcgOiBwb3NpdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9udEJhY2tncm91bmQgPSB0aGlzLmZvbnRCYWNrZ3JvdW5kID09PSAndHJhbnNwYXJlbnQnID8gdGhpcy5jaGFydC5jaGFydEFyZWEuYmFja2dyb3VuZCA6IHRoaXMuZm9udEJhY2tncm91bmQ7XG4gICAgICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnVG9wJzpcbiAgICAgICAgICAgICAgICBjYXNlICdPdXRlcic6XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsTG9jYXRpb24gPSBsYWJlbExvY2F0aW9uIC0gdGhpcy5tYXJrZXJIZWlnaHQgLSB0aGlzLmJvcmRlcldpZHRoIC0gc2l6ZS5oZWlnaHQgLyAyIC0gdGhpcy5tYXJnaW4uYm90dG9tIC0gcGFkZGluZyAtXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9ySGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb3R0b20nOlxuICAgICAgICAgICAgICAgICAgICBsYWJlbExvY2F0aW9uID0gbGFiZWxMb2NhdGlvbiArIHRoaXMubWFya2VySGVpZ2h0ICsgdGhpcy5ib3JkZXJXaWR0aCArIHNpemUuaGVpZ2h0IC8gMiArIHRoaXMubWFyZ2luLnRvcCArIHBhZGRpbmcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXV0byc6XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsTG9jYXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBhdGhBY3R1YWxQb3NpdGlvbihsYWJlbExvY2F0aW9uLCB0aGlzLm1hcmtlckhlaWdodCwgc2VyaWVzLCBwb2ludCwgc2l6ZSwgbGFiZWxJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsTG9jYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuaXNEYXRhTGFiZWxTaGFwZSA9IGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgICAgICAgdGhpcy5pc1NoYXBlID0gKHN0eWxlLmNvbG9yICE9PSAndHJhbnNwYXJlbnQnIHx8IHN0eWxlLmJvcmRlci53aWR0aCA+IDApO1xuICAgICAgICAgICAgdGhpcy5ib3JkZXJXaWR0aCA9IHN0eWxlLmJvcmRlci53aWR0aDtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1NoYXBlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIHRvcDogMCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmNhbGN1bGF0ZVJlY3RBY3R1YWxQb3NpdGlvbiA9IGZ1bmN0aW9uIChsYWJlbExvY2F0aW9uLCByZWN0LCBpc01pbnVzLCBzZXJpZXMsIHNpemUsIGxhYmVsSW5kZXgsIHBvaW50KSB7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb247XG4gICAgICAgICAgICB2YXIgbGFiZWxSZWN0O1xuICAgICAgICAgICAgdmFyIGlzT3ZlckxhcCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLmNoYXJ0LmRhdGFMYWJlbENvbGxlY3Rpb25zO1xuICAgICAgICAgICAgdmFyIGZpbmFsUG9zaXRpb24gPSBzZXJpZXMudHlwZS5pbmRleE9mKCdSYW5nZScpICE9PSAtMSB8fCBzZXJpZXMudHlwZSA9PT0gJ0hpbG8nID8gMiA6IDQ7XG4gICAgICAgICAgICB3aGlsZSAoaXNPdmVyTGFwICYmIHBvc2l0aW9uIDwgZmluYWxQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gdGhpcy5jYWxjdWxhdGVSZWN0UG9zaXRpb24obGFiZWxMb2NhdGlvbiwgcmVjdCwgaXNNaW51cywgdGhpcy5nZXRQb3NpdGlvbihwb3NpdGlvbiksIHNlcmllcywgc2l6ZSwgbGFiZWxJbmRleCwgcG9pbnQpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnZlcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbFJlY3QgPSBoZWxwZXJfMi5jYWxjdWxhdGVSZWN0KG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKHRoaXMubG9jYXRpb25YLCBsb2NhdGlvbiksIHNpemUsIHRoaXMubWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgaXNPdmVyTGFwID0gbGFiZWxSZWN0LnkgPCAwIHx8IGhlbHBlcl8xLmlzQ29sbGlkZShsYWJlbFJlY3QsIGNvbGxlY3Rpb24sIHNlcmllcy5jbGlwUmVjdCkgfHwgbGFiZWxSZWN0LnkgPiBzZXJpZXMuY2xpcFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxSZWN0ID0gaGVscGVyXzIuY2FsY3VsYXRlUmVjdChuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihsb2NhdGlvbiwgdGhpcy5sb2NhdGlvblkpLCBzaXplLCB0aGlzLm1hcmdpbik7XG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlckxhcCA9IGxhYmVsUmVjdC54IDwgMCB8fCBoZWxwZXJfMS5pc0NvbGxpZGUobGFiZWxSZWN0LCBjb2xsZWN0aW9uLCBzZXJpZXMuY2xpcFJlY3QpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFJlY3QueCArIGxhYmVsUmVjdC53aWR0aCA+IHNlcmllcy5jbGlwUmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zaXRpb24rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUxhYmVsLnByb3RvdHlwZS5jYWxjdWxhdGVBbGlnbm1lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGxhYmVsTG9jYXRpb24sIGFsaWdubWVudCwgaXNNaW51cykge1xuICAgICAgICAgICAgc3dpdGNoIChhbGlnbm1lbnQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdGYXInOlxuICAgICAgICAgICAgICAgICAgICBsYWJlbExvY2F0aW9uID0gIXRoaXMuaW52ZXJ0ZWQgPyAoaXNNaW51cyA/IGxhYmVsTG9jYXRpb24gKyB2YWx1ZSA6IGxhYmVsTG9jYXRpb24gLSB2YWx1ZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGlzTWludXMgPyBsYWJlbExvY2F0aW9uIC0gdmFsdWUgOiBsYWJlbExvY2F0aW9uICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdOZWFyJzpcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxMb2NhdGlvbiA9ICF0aGlzLmludmVydGVkID8gKGlzTWludXMgPyBsYWJlbExvY2F0aW9uIC0gdmFsdWUgOiBsYWJlbExvY2F0aW9uICsgdmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIChpc01pbnVzID8gbGFiZWxMb2NhdGlvbiArIHZhbHVlIDogbGFiZWxMb2NhdGlvbiAtIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxMb2NhdGlvbiA9IGxhYmVsTG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsTG9jYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuY2FsY3VsYXRlVG9wQW5kT3V0ZXJQb3NpdGlvbiA9IGZ1bmN0aW9uIChsb2NhdGlvbiwgcmVjdCwgcG9zaXRpb24sIHNlcmllcywgaW5kZXgsIGV4dHJhU3BhY2UsIGlzTWludXMpIHtcbiAgICAgICAgICAgIHZhciBtYXJnaW4gPSB0aGlzLm1hcmdpbjtcbiAgICAgICAgICAgIHZhciB0b3A7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlcmllcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnUmFuZ2VDb2x1bW4nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1JhbmdlQXJlYSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnSGlsbyc6XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IChpbmRleCA9PT0gMCAmJiAhdGhpcy55QXhpc0ludmVyc2VkKSB8fCAoaW5kZXggPT09IDEgJiYgdGhpcy55QXhpc0ludmVyc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLnVwZGF0ZUxhYmVsTG9jYXRpb24ocG9zaXRpb24sIGxvY2F0aW9uLCBleHRyYVNwYWNlLCBtYXJnaW4sIHJlY3QsIHRvcCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0NhbmRsZSc6XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IChpbmRleCA9PT0gMCB8fCBpbmRleCA9PT0gMikgJiYgIXRoaXMueUF4aXNJbnZlcnNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKGluZGV4ID09PSAxIHx8IGluZGV4ID09PSAzKSAmJiB0aGlzLnlBeGlzSW52ZXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gdGhpcy51cGRhdGVMYWJlbExvY2F0aW9uKHBvc2l0aW9uLCBsb2NhdGlvbiwgZXh0cmFTcGFjZSwgbWFyZ2luLCByZWN0LCB0b3AsIGluZGV4ID4gMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hpbG9PcGVuQ2xvc2UnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPD0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gKGluZGV4ID09PSAwICYmICF0aGlzLnlBeGlzSW52ZXJzZWQpIHx8IChpbmRleCA9PT0gMSAmJiB0aGlzLnlBeGlzSW52ZXJzZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLnVwZGF0ZUxhYmVsTG9jYXRpb24ocG9zaXRpb24sIGxvY2F0aW9uLCBleHRyYVNwYWNlLCBtYXJnaW4sIHJlY3QsIHRvcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy55QXhpc0ludmVyc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAhdGhpcy5pbnZlcnRlZCA/IGxvY2F0aW9uICsgZXh0cmFTcGFjZSArIG1hcmdpbi50b3AgOiBsb2NhdGlvbiAtIGV4dHJhU3BhY2UgLSBtYXJnaW4ucmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9ICF0aGlzLmludmVydGVkID8gbG9jYXRpb24gLSBleHRyYVNwYWNlIC0gbWFyZ2luLmJvdHRvbSA6IGxvY2F0aW9uICsgZXh0cmFTcGFjZSArIG1hcmdpbi5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaXNNaW51cyAmJiBwb3NpdGlvbiA9PT0gJ1RvcCcpIHx8ICghaXNNaW51cyAmJiBwb3NpdGlvbiA9PT0gJ091dGVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gIXRoaXMuaW52ZXJ0ZWQgPyBsb2NhdGlvbiAtIGV4dHJhU3BhY2UgLSBtYXJnaW4uYm90dG9tIDogbG9jYXRpb24gKyBleHRyYVNwYWNlICsgbWFyZ2luLmxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9ICF0aGlzLmludmVydGVkID8gbG9jYXRpb24gKyBleHRyYVNwYWNlICsgbWFyZ2luLnRvcCA6IGxvY2F0aW9uIC0gZXh0cmFTcGFjZSAtIG1hcmdpbi5yaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUxhYmVsLnByb3RvdHlwZS51cGRhdGVMYWJlbExvY2F0aW9uID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBsb2NhdGlvbiwgZXh0cmFTcGFjZSwgbWFyZ2luLCByZWN0LCB0b3AsIGluc2lkZSkge1xuICAgICAgICAgICAgaWYgKGluc2lkZSA9PT0gdm9pZCAwKSB7IGluc2lkZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW52ZXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gKHBvc2l0aW9uID09PSAnT3V0ZXInICYmICFpbnNpZGUpID8gbG9jYXRpb24gLSBleHRyYVNwYWNlIC0gbWFyZ2luLmJvdHRvbSA6IGxvY2F0aW9uICsgZXh0cmFTcGFjZSArIG1hcmdpbi50b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IChwb3NpdGlvbiA9PT0gJ091dGVyJyAmJiAhaW5zaWRlKSA/IGxvY2F0aW9uICsgcmVjdC5oZWlnaHQgKyBleHRyYVNwYWNlICsgbWFyZ2luLnRvcCA6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiArIHJlY3QuaGVpZ2h0IC0gZXh0cmFTcGFjZSAtIG1hcmdpbi5ib3R0b207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRvcCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IChwb3NpdGlvbiA9PT0gJ091dGVyJyAmJiAhaW5zaWRlKSA/IGxvY2F0aW9uICsgZXh0cmFTcGFjZSArIG1hcmdpbi5sZWZ0IDogbG9jYXRpb24gLSBleHRyYVNwYWNlIC0gbWFyZ2luLnJpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSAocG9zaXRpb24gPT09ICdPdXRlcicgJiYgIWluc2lkZSkgPyBsb2NhdGlvbiAtIHJlY3Qud2lkdGggLSBleHRyYVNwYWNlIC0gbWFyZ2luLnJpZ2h0IDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uIC0gcmVjdC53aWR0aCArIGV4dHJhU3BhY2UgKyBtYXJnaW4ubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuY2FsY3VsYXRlUGF0aEFjdHVhbFBvc2l0aW9uID0gZnVuY3Rpb24gKHksIG1hcmtlclNpemUsIHNlcmllcywgcG9pbnQsIHNpemUsIGxhYmVsSW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBzZXJpZXMucG9pbnRzO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcG9pbnQuaW5kZXg7XG4gICAgICAgICAgICB2YXIgeVZhbHVlID0gcG9pbnRzW2luZGV4XS55VmFsdWU7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb247XG4gICAgICAgICAgICB2YXIgbmV4dFBvaW50ID0gcG9pbnRzLmxlbmd0aCAtIDEgPiBpbmRleCA/IHBvaW50c1tpbmRleCArIDFdIDogbnVsbDtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1BvaW50ID0gaW5kZXggPiAwID8gcG9pbnRzW2luZGV4IC0gMV0gOiBudWxsO1xuICAgICAgICAgICAgdmFyIHlMb2NhdGlvbjtcbiAgICAgICAgICAgIHZhciBpc092ZXJMYXAgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGxhYmVsUmVjdDtcbiAgICAgICAgICAgIHZhciBpc0JvdHRvbTtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbkluZGV4O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLmNoYXJ0LmRhdGFMYWJlbENvbGxlY3Rpb25zO1xuICAgICAgICAgICAgaWYgKHNlcmllcy50eXBlID09PSAnQnViYmxlJykge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ1RvcCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZXJpZXMudHlwZS5pbmRleE9mKCdTdGVwJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ1RvcCc7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gKCFwcmV2aW91c1BvaW50IHx8ICFwcmV2aW91c1BvaW50LnZpc2libGUgfHwgKHlWYWx1ZSA+IHByZXZpb3VzUG9pbnQueVZhbHVlICE9PSB0aGlzLnlBeGlzSW52ZXJzZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB5VmFsdWUgPT09IHByZXZpb3VzUG9pbnQueVZhbHVlKSA/ICdUb3AnIDogJ0JvdHRvbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VyaWVzLnR5cGUgPT09ICdCb3hBbmRXaGlza2VyJykge1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbEluZGV4ID09PSAxIHx8IGxhYmVsSW5kZXggPT09IDMgfHwgbGFiZWxJbmRleCA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBzZXJpZXMueUF4aXMuaXNJbnZlcnNlZCA/ICdCb3R0b20nIDogJ1RvcCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxhYmVsSW5kZXggPT09IDIgfHwgbGFiZWxJbmRleCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNlcmllcy55QXhpcy5pc0ludmVyc2VkID8gJ1RvcCcgOiAnQm90dG9tJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlzT3ZlckxhcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICdNaWRkbGUnO1xuICAgICAgICAgICAgICAgICAgICB5TG9jYXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBhdGhQb3NpdGlvbih5LCBwb3NpdGlvbiwgc2VyaWVzLCBwb2ludCwgc2l6ZSwgbGFiZWxJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gKCFuZXh0UG9pbnQgfHwgIW5leHRQb2ludC52aXNpYmxlIHx8IHlWYWx1ZSA+IG5leHRQb2ludC55VmFsdWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICh5VmFsdWUgPCBuZXh0UG9pbnQueVZhbHVlICYmIHRoaXMueUF4aXNJbnZlcnNlZCkpID8gJ1RvcCcgOiAnQm90dG9tJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXggPT09IHBvaW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gKCFwcmV2aW91c1BvaW50IHx8ICFwcmV2aW91c1BvaW50LnZpc2libGUgfHwgeVZhbHVlID4gcHJldmlvdXNQb2ludC55VmFsdWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICh5VmFsdWUgPCBwcmV2aW91c1BvaW50LnlWYWx1ZSAmJiB0aGlzLnlBeGlzSW52ZXJzZWQpKSA/ICdUb3AnIDogJ0JvdHRvbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHRQb2ludC52aXNpYmxlICYmICEocHJldmlvdXNQb2ludCAmJiBwcmV2aW91c1BvaW50LnZpc2libGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICdUb3AnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFuZXh0UG9pbnQudmlzaWJsZSB8fCAhcHJldmlvdXNQb2ludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSAobmV4dFBvaW50LnlWYWx1ZSA+IHlWYWx1ZSB8fCAocHJldmlvdXNQb2ludCAmJiBwcmV2aW91c1BvaW50LnlWYWx1ZSA+IHlWYWx1ZSkpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQm90dG9tJyA6ICdUb3AnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsb3BlID0gKG5leHRQb2ludC55VmFsdWUgLSBwcmV2aW91c1BvaW50LnlWYWx1ZSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdFkgPSAoc2xvcGUgKiBpbmRleCkgKyAobmV4dFBvaW50LnlWYWx1ZSAtIChzbG9wZSAqIChpbmRleCArIDEpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICF0aGlzLnlBeGlzSW52ZXJzZWQgPyBpbnRlcnNlY3RZIDwgeVZhbHVlID8gJ1RvcCcgOiAnQm90dG9tJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0WSA8IHlWYWx1ZSA/ICdCb3R0b20nIDogJ1RvcCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc0JvdHRvbSA9IHBvc2l0aW9uID09PSAnQm90dG9tJztcbiAgICAgICAgICAgIHBvc2l0aW9uSW5kZXggPSBbJ091dGVyJywgJ1RvcCcsICdCb3R0b20nLCAnTWlkZGxlJywgJ0F1dG8nXS5pbmRleE9mKHBvc2l0aW9uKTtcbiAgICAgICAgICAgIHdoaWxlIChpc092ZXJMYXAgJiYgcG9zaXRpb25JbmRleCA8IDQpIHtcbiAgICAgICAgICAgICAgICB5TG9jYXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBhdGhQb3NpdGlvbih5LCB0aGlzLmdldFBvc2l0aW9uKHBvc2l0aW9uSW5kZXgpLCBzZXJpZXMsIHBvaW50LCBzaXplLCBsYWJlbEluZGV4KTtcbiAgICAgICAgICAgICAgICBsYWJlbFJlY3QgPSBoZWxwZXJfMi5jYWxjdWxhdGVSZWN0KG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKHRoaXMubG9jYXRpb25YLCB5TG9jYXRpb24pLCBzaXplLCB0aGlzLm1hcmdpbik7XG4gICAgICAgICAgICAgICAgaXNPdmVyTGFwID0gbGFiZWxSZWN0LnkgPCAwIHx8IGhlbHBlcl8xLmlzQ29sbGlkZShsYWJlbFJlY3QsIGNvbGxlY3Rpb24sIHNlcmllcy5jbGlwUmVjdClcbiAgICAgICAgICAgICAgICAgICAgfHwgKGxhYmVsUmVjdC55ICsgbGFiZWxSZWN0LmhlaWdodCkgPiBzZXJpZXMuY2xpcFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uSW5kZXggPSBpc0JvdHRvbSA/IHBvc2l0aW9uSW5kZXggLSAxIDogcG9zaXRpb25JbmRleCArIDE7XG4gICAgICAgICAgICAgICAgaXNCb3R0b20gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB5TG9jYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuZG9EYXRhTGFiZWxBbmltYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc2hhcGVFbGVtZW50cyA9IHNlcmllcy5zaGFwZUVsZW1lbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgIHZhciB0ZXh0Tm9kZSA9IHNlcmllcy50ZXh0RWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gc2VyaWVzLmFuaW1hdGlvbi5kZWxheSArIHNlcmllcy5hbmltYXRpb24uZHVyYXRpb247XG4gICAgICAgICAgICB2YXIgbG9jYXRpb247XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gZWxlbWVudCA/IDEgOiB0ZXh0Tm9kZS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgICAgIGhlbHBlcl8zLnRlbXBsYXRlQW5pbWF0ZShlbGVtZW50LCBkZWxheSwgMjAwLCAnWm9vbUluJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKCgrdGV4dE5vZGVbaV0uZ2V0QXR0cmlidXRlKCd4JykpICsgKCgrdGV4dE5vZGVbaV0uZ2V0QXR0cmlidXRlKCd3aWR0aCcpKSAvIDIpLCAoK3RleHROb2RlW2ldLmdldEF0dHJpYnV0ZSgneScpKSArICgoK3RleHROb2RlW2ldLmdldEF0dHJpYnV0ZSgnaGVpZ2h0JykpIC8gMikpO1xuICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMS5tYXJrZXJBbmltYXRlKHRleHROb2RlW2ldLCBkZWxheSwgMjAwLCBzZXJpZXMsIG51bGwsIGxvY2F0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoYXBlRWxlbWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oKCtzaGFwZUVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZSgneCcpKSArICgoK3NoYXBlRWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCd3aWR0aCcpKSAvIDIpLCAoK3NoYXBlRWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCd5JykpICsgKCgrc2hhcGVFbGVtZW50c1tpXS5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpKSAvIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8xLm1hcmtlckFuaW1hdGUoc2hhcGVFbGVtZW50c1tpXSwgZGVsYXksIDIwMCwgc2VyaWVzLCBudWxsLCBsb2NhdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIERhdGFMYWJlbC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiAoWydPdXRlcicsICdUb3AnLCAnQm90dG9tJywgJ01pZGRsZScsICdBdXRvJ11baW5kZXhdKTtcbiAgICAgICAgfTtcbiAgICAgICAgRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdEYXRhTGFiZWwnO1xuICAgICAgICB9O1xuICAgICAgICBEYXRhTGFiZWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY2hhcnQpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIERhdGFMYWJlbDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRGF0YUxhYmVsID0gRGF0YUxhYmVsO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jaGFydC9zZXJpZXMvZGF0YS1sYWJlbC5qc1xuLy8gbW9kdWxlIGlkID0gNjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgaGVscGVyXzIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEVycm9yQmFyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gRXJyb3JCYXIoY2hhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQgPSBjaGFydDtcbiAgICAgICAgfVxuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUVsZW1lbnQoc2VyaWVzKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRXJyb3JCYXIoc2VyaWVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXJyb3JCYXIucHJvdG90eXBlLnJlbmRlckVycm9yQmFyID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHNlcmllc0luZGV4ID0gc2VyaWVzLmluZGV4O1xuICAgICAgICAgICAgdmFyIHBvaW50O1xuICAgICAgICAgICAgdmFyIHN5bWJvbElkO1xuICAgICAgICAgICAgdmFyIGNhcElkO1xuICAgICAgICAgICAgdmFyIGVycm9yYmFyID0gc2VyaWVzLmVycm9yQmFyO1xuICAgICAgICAgICAgdmFyIGVycm9yQmFyQ2FwID0gc2VyaWVzLmVycm9yQmFyLmVycm9yQmFyQ2FwO1xuICAgICAgICAgICAgdmFyIGJvcmRlciA9IHNlcmllcy5ib3JkZXI7XG4gICAgICAgICAgICB2YXIgc3RhcnQ7XG4gICAgICAgICAgICB2YXIgbWlkO1xuICAgICAgICAgICAgdmFyIGVuZDtcbiAgICAgICAgICAgIHZhciBpc0ludmVydGVkO1xuICAgICAgICAgICAgdmFyIGlzVmVydDtcbiAgICAgICAgICAgIHZhciBlcnJvckRpcmVjdGlvbiA9IFsnJywgJyddO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50XzEgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50XzEudmlzaWJsZSAmJiBwb2ludF8xLnN5bWJvbExvY2F0aW9uc1swXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JYID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yWSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZXJyb3JiYXIubW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yWSA9IGVycm9yYmFyLnZlcnRpY2FsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdIb3Jpem9udGFsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclggPSBlcnJvcmJhci5ob3Jpem9udGFsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdCb3RoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclggPSBlcnJvcmJhci5ob3Jpem9udGFsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JZID0gZXJyb3JiYXIudmVydGljYWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlcnJvckRpcmVjdGlvbiA9IHRoaXNbJ2NhbGN1bGF0ZScgKyBlcnJvcmJhci50eXBlICsgJ1ZhbHVlJ10ocG9pbnRfMSwgc2VyaWVzLCB0aGlzLmNoYXJ0LnJlcXVpcmVJbnZlcnRlZEF4aXMsIGVycm9yWCwgZXJyb3JZKTtcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sSWQgPSB0aGlzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgJ19FcnJvckJhckdyb3VwXycgKyBzZXJpZXNJbmRleCArICdfUG9pbnRfJyArIHBvaW50XzEuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGNhcElkID0gdGhpcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArICdfRXJyb3JCYXJDYXBfJyArIHNlcmllc0luZGV4ICsgJ19Qb2ludF8nICsgcG9pbnRfMS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXBlT3B0aW9uID0gbmV3IGhlbHBlcl8yLlBhdGhPcHRpb24oc3ltYm9sSWQsICcnLCBlcnJvcmJhci53aWR0aCwgZXJyb3JiYXIuY29sb3IsIG51bGwsICcnLCBlcnJvckRpcmVjdGlvblswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5jaGFydC5yZW5kZXJlci5kcmF3UGF0aChzaGFwZU9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5lcnJvckJhckVsZW1lbnQuYXBwZW5kQ2hpbGQocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXBPcHRpb24gPSBuZXcgaGVscGVyXzIuUGF0aE9wdGlvbihjYXBJZCwgJycsIGVycm9yQmFyQ2FwLndpZHRoLCBlcnJvckJhckNhcC5jb2xvciwgbnVsbCwgJycsIGVycm9yRGlyZWN0aW9uWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcFBhdGggPSB0aGlzLmNoYXJ0LnJlbmRlcmVyLmRyYXdQYXRoKGNhcE9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5lcnJvckJhckVsZW1lbnQuYXBwZW5kQ2hpbGQoY2FwUGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuZmluZExvY2F0aW9uID0gZnVuY3Rpb24gKHBvaW50LCBzZXJpZXMsIGlzSW52ZXJ0ZWQsIHgxLCB5MSkge1xuICAgICAgICAgICAgdmFyIGVycm9yYmFyID0gc2VyaWVzLmVycm9yQmFyO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGVycm9yYmFyLmRpcmVjdGlvbjtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IFtdO1xuICAgICAgICAgICAgdmFyIHN0YWNrZWRWYWx1ZSA9IHNlcmllcy5zdGFja2VkVmFsdWVzO1xuICAgICAgICAgICAgdmFyIHlWYWx1ZSA9IHNlcmllcy50eXBlLmluZGV4T2YoJ1N0YWNraW5nJykgPiAtMSA/IHNlcmllcy5zdGFja2VkVmFsdWVzLmVuZFZhbHVlc1twb2ludC5pbmRleF0gOlxuICAgICAgICAgICAgICAgIChzZXJpZXMuc2VyaWVzVHlwZSA9PT0gJ0hpZ2hMb3cnIHx8IHNlcmllcy5zZXJpZXNUeXBlID09PSAnSGlnaExvd09wZW5DbG9zZScpID8gKHNlcmllcy5wb2ludHNbcG9pbnQuaW5kZXhdLmhpZ2gpIDpcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQueVZhbHVlO1xuICAgICAgICAgICAgdmFyIHN0YXJ0UG9pbnQgPSBoZWxwZXJfMi5nZXRQb2ludChwb2ludC54VmFsdWUgKyAoKGRpcmVjdGlvbiA9PT0gJ1BsdXMnIHx8IGRpcmVjdGlvbiA9PT0gJ0JvdGgnKSA/IChlcnJvcmJhci50eXBlID09PSAnQ3VzdG9tJyAmJlxuICAgICAgICAgICAgICAgIChlcnJvcmJhci5tb2RlID09PSAnSG9yaXpvbnRhbCcgfHwgZXJyb3JiYXIubW9kZSA9PT0gJ0JvdGgnKSkgPyB4MSA9IGVycm9yYmFyLmhvcml6b250YWxQb3NpdGl2ZUVycm9yIDogeDEgOiAwKSwgeVZhbHVlICsgKChkaXJlY3Rpb24gPT09ICdQbHVzJyB8fCBkaXJlY3Rpb24gPT09ICdCb3RoJykgPyAoZXJyb3JiYXIudHlwZSA9PT0gJ0N1c3RvbScgJiZcbiAgICAgICAgICAgICAgICAoZXJyb3JiYXIubW9kZSA9PT0gJ1ZlcnRpY2FsJyB8fCBlcnJvcmJhci5tb2RlID09PSAnQm90aCcpKSA/IHkxID0gZXJyb3JiYXIudmVydGljYWxQb3NpdGl2ZUVycm9yIDogeTEgOiAwKSwgc2VyaWVzLnhBeGlzLCBzZXJpZXMueUF4aXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICAgICAgbG9jYXRpb24ucHVzaChzdGFydFBvaW50KTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuaXNSZWN0U2VyaWVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pZFBvaW50ID0gcG9pbnQuc3ltYm9sTG9jYXRpb25zWzBdO1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnB1c2gobWlkUG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pZFBvaW50ID0gaGVscGVyXzIuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC55VmFsdWUsIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5wdXNoKG1pZFBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlbmRQb2ludCA9IGhlbHBlcl8yLmdldFBvaW50KHBvaW50LnhWYWx1ZSAtICgoZGlyZWN0aW9uID09PSAnTWludXMnIHx8IGRpcmVjdGlvbiA9PT0gJ0JvdGgnKSA/IChlcnJvcmJhci50eXBlID09PSAnQ3VzdG9tJyAmJlxuICAgICAgICAgICAgICAgIChlcnJvcmJhci5tb2RlID09PSAnSG9yaXpvbnRhbCcgfHwgZXJyb3JiYXIubW9kZSA9PT0gJ0JvdGgnKSkgPyB4MSA9IGVycm9yYmFyLmhvcml6b250YWxOZWdhdGl2ZUVycm9yIDogeDEgOiAwKSwgeVZhbHVlIC0gKChkaXJlY3Rpb24gPT09ICdNaW51cycgfHwgZGlyZWN0aW9uID09PSAnQm90aCcpID8gKGVycm9yYmFyLnR5cGUgPT09ICdDdXN0b20nICYmXG4gICAgICAgICAgICAgICAgKGVycm9yYmFyLm1vZGUgPT09ICdWZXJ0aWNhbCcgfHwgZXJyb3JiYXIubW9kZSA9PT0gJ0JvdGgnKSkgPyB5MSA9IGVycm9yYmFyLnZlcnRpY2FsTmVnYXRpdmVFcnJvciA6IHkxIDogMCksIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBpc0ludmVydGVkKTtcbiAgICAgICAgICAgIGxvY2F0aW9uLnB1c2goZW5kUG9pbnQpO1xuICAgICAgICAgICAgcG9pbnQuZXJyb3IgPSAoZXJyb3JiYXIubW9kZSA9PT0gJ1ZlcnRpY2FsJykgPyBlcnJvcmJhci52ZXJ0aWNhbEVycm9yIDogZXJyb3JiYXIuaG9yaXpvbnRhbEVycm9yO1xuICAgICAgICAgICAgdGhpcy5uZWdhdGl2ZUhlaWdodCA9IChlcnJvcmJhci5tb2RlID09PSAnVmVydGljYWwnIHx8IGVycm9yYmFyLm1vZGUgPT09ICdCb3RoJykgPyAoaXNJbnZlcnRlZCA/IChsb2NhdGlvblsxXS54IC0gbG9jYXRpb25bMl0ueCkgOlxuICAgICAgICAgICAgICAgIChsb2NhdGlvblsyXS55IC0gbG9jYXRpb25bMV0ueSkpIDogMDtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpdmVIZWlnaHQgPSAoZXJyb3JiYXIubW9kZSA9PT0gJ1ZlcnRpY2FsJyB8fCBlcnJvcmJhci5tb2RlID09PSAnQm90aCcpID8gKGlzSW52ZXJ0ZWQgPyAobG9jYXRpb25bMF0ueCAtIGxvY2F0aW9uWzFdLngpIDpcbiAgICAgICAgICAgICAgICAobG9jYXRpb25bMV0ueSAtIGxvY2F0aW9uWzBdLnkpKSA6IDA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFcnJvckRpcmVjdGlvbihsb2NhdGlvblswXSwgbG9jYXRpb25bMV0sIGxvY2F0aW9uWzJdLCBzZXJpZXMsIGlzSW52ZXJ0ZWQpO1xuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuY2FsY3VsYXRlRml4ZWRWYWx1ZSA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBpc0ludmVydGVkLCBlcnJvclgsIGVycm9yWSwgeEF4aXMsIHlBeGlzKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JiYXIgPSBzZXJpZXMuZXJyb3JCYXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTG9jYXRpb24ocG9pbnQsIHNlcmllcywgaXNJbnZlcnRlZCwgZXJyb3JYLCBlcnJvclkpO1xuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuY2FsY3VsYXRlUGVyY2VudGFnZVZhbHVlID0gZnVuY3Rpb24gKHBvaW50LCBzZXJpZXMsIGlzSW52ZXJ0ZWQsIGVycm9yWCwgZXJyb3JZLCB4QXhpcywgeUF4aXMpIHtcbiAgICAgICAgICAgIGVycm9yWCA9IChlcnJvclggLyAxMDApICogcG9pbnQueFZhbHVlO1xuICAgICAgICAgICAgZXJyb3JZID0gKGVycm9yWSAvIDEwMCkgKiBwb2ludC55VmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTG9jYXRpb24ocG9pbnQsIHNlcmllcywgaXNJbnZlcnRlZCwgZXJyb3JYLCBlcnJvclkpO1xuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuY2FsY3VsYXRlU3RhbmRhcmREZXZpYXRpb25WYWx1ZSA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBpc0ludmVydGVkLCBlcnJvclgsIGVycm9yWSwgeEF4aXMsIHlBeGlzKSB7XG4gICAgICAgICAgICB2YXIgZ2V0TWVhbiA9IHRoaXMubWVhbkNhbGN1bGF0aW9uKHNlcmllcywgc2VyaWVzLmVycm9yQmFyLm1vZGUpO1xuICAgICAgICAgICAgZXJyb3JYID0gZXJyb3JYICogKGdldE1lYW4uaG9yaXpvbnRhbFNxdWFyZVJvb3QgKyBnZXRNZWFuLmhvcml6b250YWxNZWFuKTtcbiAgICAgICAgICAgIGVycm9yWSA9IGVycm9yWSAqIChnZXRNZWFuLnZlcnRpY2FsU3F1YXJlUm9vdCArIGdldE1lYW4udmVydGljYWxNZWFuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRMb2NhdGlvbihwb2ludCwgc2VyaWVzLCBpc0ludmVydGVkLCBlcnJvclgsIGVycm9yWSk7XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5jYWxjdWxhdGVTdGFuZGFyZEVycm9yVmFsdWUgPSBmdW5jdGlvbiAocG9pbnQsIHNlcmllcywgaXNJbnZlcnRlZCwgZXJyb3JYLCBlcnJvclksIHhBeGlzLCB5QXhpcykge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHNlcmllcy5wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGdldE1lYW4gPSB0aGlzLm1lYW5DYWxjdWxhdGlvbihzZXJpZXMsIHNlcmllcy5lcnJvckJhci5tb2RlKTtcbiAgICAgICAgICAgIGVycm9yWCA9ICgoZXJyb3JYICogZ2V0TWVhbi5ob3Jpem9udGFsU3F1YXJlUm9vdCkgLyBNYXRoLnNxcnQobGVuZ3RoKSk7XG4gICAgICAgICAgICBlcnJvclkgPSAoKGVycm9yWSAqIGdldE1lYW4udmVydGljYWxTcXVhcmVSb290KSAvIE1hdGguc3FydChsZW5ndGgpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRMb2NhdGlvbihwb2ludCwgc2VyaWVzLCBpc0ludmVydGVkLCBlcnJvclgsIGVycm9yWSk7XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5jYWxjdWxhdGVDdXN0b21WYWx1ZSA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBpc0ludmVydGVkLCBlcnJvclgsIGVycm9yWSwgeEF4aXMsIHlBeGlzKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JiYXIgPSBzZXJpZXMuZXJyb3JCYXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTG9jYXRpb24ocG9pbnQsIHNlcmllcywgaXNJbnZlcnRlZCwgZXJyb3JYLCBlcnJvclkpO1xuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuZ2V0SG9yaXpvbnRhbERpcmVjdGlvbiA9IGZ1bmN0aW9uIChzdGFydCwgbWlkLCBlbmQsIGRpcmVjdGlvbiwgZXJyb3JNb2RlLCBjYXBMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gJyc7XG4gICAgICAgICAgICB2YXIgY2FwRGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICBwYXRoICs9ICcgTSAnICsgc3RhcnQueCArICcgJyArIG1pZC55ICsgJyBMICcgKyBlbmQueCArICcgJyArIG1pZC55O1xuICAgICAgICAgICAgY2FwRGlyZWN0aW9uICs9IChkaXJlY3Rpb24gPT09ICdQbHVzJyB8fCBkaXJlY3Rpb24gPT09ICdCb3RoJykgPyAnIE0gJyArIChzdGFydC54KSArICcgJyArIChtaWQueSAtIGNhcExlbmd0aCkgKyAnIEwgJ1xuICAgICAgICAgICAgICAgICsgKHN0YXJ0LngpICsgJyAnICsgKG1pZC55ICsgY2FwTGVuZ3RoKSA6ICcnO1xuICAgICAgICAgICAgY2FwRGlyZWN0aW9uICs9IChkaXJlY3Rpb24gPT09ICdNaW51cycgfHwgZGlyZWN0aW9uID09PSAnQm90aCcpID8gJyBNICcgKyAoZW5kLngpICsgJyAnICsgKG1pZC55IC0gY2FwTGVuZ3RoKSArICcgTCAnXG4gICAgICAgICAgICAgICAgKyAoZW5kLngpICsgJyAnICsgKG1pZC55ICsgY2FwTGVuZ3RoKSA6ICcgJztcbiAgICAgICAgICAgIHJldHVybiBbcGF0aCwgY2FwRGlyZWN0aW9uXTtcbiAgICAgICAgfTtcbiAgICAgICAgRXJyb3JCYXIucHJvdG90eXBlLmdldFZlcnRpY2FsRGlyZWN0aW9uID0gZnVuY3Rpb24gKHN0YXJ0LCBtaWQsIGVuZCwgZGlyZWN0aW9uLCBlcnJvck1vZGUsIGNhcExlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHBhdGggPSAnJztcbiAgICAgICAgICAgIHZhciBjYXBEaXJlY3Rpb24gPSAnJztcbiAgICAgICAgICAgIHBhdGggKz0gJyBNICcgKyBtaWQueCArICcgJyArIHN0YXJ0LnkgKyAnIEwgJyArIG1pZC54ICsgJyAnICsgZW5kLnk7XG4gICAgICAgICAgICBjYXBEaXJlY3Rpb24gKz0gKGRpcmVjdGlvbiA9PT0gJ1BsdXMnIHx8IGRpcmVjdGlvbiA9PT0gJ0JvdGgnKSA/ICcgTSAnICsgKG1pZC54IC0gY2FwTGVuZ3RoKSArICcgJyArIHN0YXJ0LnkgKyAnIEwgJ1xuICAgICAgICAgICAgICAgICsgKG1pZC54ICsgY2FwTGVuZ3RoKSArICcgJyArIHN0YXJ0LnkgOiAnJztcbiAgICAgICAgICAgIGNhcERpcmVjdGlvbiArPSAoZGlyZWN0aW9uID09PSAnTWludXMnIHx8IGRpcmVjdGlvbiA9PT0gJ0JvdGgnKSA/ICcgTSAnICsgKG1pZC54IC0gY2FwTGVuZ3RoKSArICcgJyArIGVuZC55ICsgJyBMICdcbiAgICAgICAgICAgICAgICArIChtaWQueCArIGNhcExlbmd0aCkgKyAnICcgKyBlbmQueSA6ICcnO1xuICAgICAgICAgICAgcmV0dXJuIFtwYXRoLCBjYXBEaXJlY3Rpb25dO1xuICAgICAgICB9O1xuICAgICAgICBFcnJvckJhci5wcm90b3R5cGUuZ2V0Qm90aERpcmVjdGlvbiA9IGZ1bmN0aW9uIChzdGFydCwgbWlkLCBlbmQsIGRpcmVjdGlvbiwgZXJyb3JNb2RlLCBjYXBMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjYXBEaXJlY3Rpb24gPSAnJztcbiAgICAgICAgICAgIHZhciBwYXRoID0gJyc7XG4gICAgICAgICAgICB2YXIgcGF0aEggPSB0aGlzLmdldEhvcml6b250YWxEaXJlY3Rpb24oc3RhcnQsIG1pZCwgZW5kLCBkaXJlY3Rpb24sIGVycm9yTW9kZSwgY2FwTGVuZ3RoKTtcbiAgICAgICAgICAgIHZhciBwYXRoViA9IHRoaXMuZ2V0VmVydGljYWxEaXJlY3Rpb24oc3RhcnQsIG1pZCwgZW5kLCBkaXJlY3Rpb24sIGVycm9yTW9kZSwgY2FwTGVuZ3RoKTtcbiAgICAgICAgICAgIHBhdGggPSBwYXRoSFswXS5jb25jYXQocGF0aFZbMF0pO1xuICAgICAgICAgICAgY2FwRGlyZWN0aW9uID0gcGF0aEhbMV0uY29uY2F0KHBhdGhWWzFdKTtcbiAgICAgICAgICAgIHJldHVybiBbcGF0aCwgY2FwRGlyZWN0aW9uXTtcbiAgICAgICAgfTtcbiAgICAgICAgRXJyb3JCYXIucHJvdG90eXBlLmdldEVycm9yRGlyZWN0aW9uID0gZnVuY3Rpb24gKHN0YXJ0LCBtaWQsIGVuZCwgc2VyaWVzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gc2VyaWVzLmVycm9yQmFyLmRpcmVjdGlvbjtcbiAgICAgICAgICAgIHZhciBtb2RlID0gc2VyaWVzLmVycm9yQmFyLm1vZGU7XG4gICAgICAgICAgICB2YXIgY2FwTGVuZ3RoID0gc2VyaWVzLmVycm9yQmFyLmVycm9yQmFyQ2FwLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBwYXRoID0gJyc7XG4gICAgICAgICAgICB2YXIgcGF0aHM7XG4gICAgICAgICAgICB2YXIgY2FwRGlyZWN0aW9uID0gJyc7XG4gICAgICAgICAgICB2YXIgZXJyb3JNb2RlID0gbW9kZTtcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0JvdGgnOlxuICAgICAgICAgICAgICAgICAgICBlcnJvck1vZGUgPSBtb2RlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdIb3Jpem9udGFsJzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNb2RlID0gKGlzSW52ZXJ0ZWQpID8gJ1ZlcnRpY2FsJyA6IG1vZGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNb2RlID0gKGlzSW52ZXJ0ZWQpID8gJ0hvcml6b250YWwnIDogbW9kZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yTW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICBwYXRocyA9IHRoaXMuZ2V0SG9yaXpvbnRhbERpcmVjdGlvbihzdGFydCwgbWlkLCBlbmQsIGRpcmVjdGlvbiwgZXJyb3JNb2RlLCBjYXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdWZXJ0aWNhbCc6XG4gICAgICAgICAgICAgICAgICAgIHBhdGhzID0gdGhpcy5nZXRWZXJ0aWNhbERpcmVjdGlvbihzdGFydCwgbWlkLCBlbmQsIGRpcmVjdGlvbiwgZXJyb3JNb2RlLCBjYXBMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb3RoJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aHMgPSB0aGlzLmdldEJvdGhEaXJlY3Rpb24oc3RhcnQsIG1pZCwgZW5kLCBkaXJlY3Rpb24sIGVycm9yTW9kZSwgY2FwTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3BhdGhzWzBdLCBwYXRoc1sxXV07XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5tZWFuQ2FsY3VsYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzLCBtb2RlKSB7XG4gICAgICAgICAgICB2YXIgc3VtT2ZYID0gMDtcbiAgICAgICAgICAgIHZhciBzdW1PZlkgPSAwO1xuICAgICAgICAgICAgdmFyIHZlcnRpY2FsTWVhbiA9IDA7XG4gICAgICAgICAgICB2YXIgaG9yaXpvbnRhbE1lYW4gPSAwO1xuICAgICAgICAgICAgdmFyIGhvclNxdWFyZURldjtcbiAgICAgICAgICAgIHZhciB2ZXJTdGFuZGFyZE1lYW47XG4gICAgICAgICAgICB2YXIgaG9yU3RhbmRhcmRNZWFuO1xuICAgICAgICAgICAgdmFyIHZlclNxdWFyZVRvdGFsO1xuICAgICAgICAgICAgdmFyIGhvclNxdWFyZVRvdGFsO1xuICAgICAgICAgICAgdmFyIHZlclNxdWFyZVJvb3Q7XG4gICAgICAgICAgICB2YXIgaG9yU3F1YXJlUm9vdDtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBzZXJpZXMucG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICAgICAgc3VtT2ZZID0gaGVscGVyXzIuc3VtKHNlcmllcy55RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsTWVhbiA9IHN1bU9mWSAvIGxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSG9yaXpvbnRhbCc6XG4gICAgICAgICAgICAgICAgICAgIHN1bU9mWCA9IGhlbHBlcl8yLnN1bShzZXJpZXMueERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsTWVhbiA9IHN1bU9mWCAvIGxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQm90aCc6XG4gICAgICAgICAgICAgICAgICAgIHN1bU9mWSA9IGhlbHBlcl8yLnN1bShzZXJpZXMueURhdGEpO1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbE1lYW4gPSBzdW1PZlkgLyBsZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHN1bU9mWCA9IGhlbHBlcl8yLnN1bShzZXJpZXMueERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsTWVhbiA9IHN1bU9mWCAvIGxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ1ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICBzdW1PZlkgPSBzdW1PZlkgKyBNYXRoLnBvdygocG9pbnQueVZhbHVlIC0gdmVydGljYWxNZWFuKSwgMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdIb3Jpem9udGFsJykge1xuICAgICAgICAgICAgICAgICAgICBzdW1PZlggPSBzdW1PZlggKyBNYXRoLnBvdygocG9pbnQueFZhbHVlIC0gaG9yaXpvbnRhbE1lYW4pLCAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN1bU9mWSA9IHN1bU9mWSArIE1hdGgucG93KChwb2ludC55VmFsdWUgLSB2ZXJ0aWNhbE1lYW4pLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgc3VtT2ZYID0gc3VtT2ZYICsgTWF0aC5wb3coKHBvaW50LnhWYWx1ZSAtIGhvcml6b250YWxNZWFuKSwgMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVyU3RhbmRhcmRNZWFuID0gc3VtT2ZZIC8gKGxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgdmVyU3F1YXJlUm9vdCA9IE1hdGguc3FydChzdW1PZlkgLyAobGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgaG9yU3RhbmRhcmRNZWFuID0gc3VtT2ZYIC8gKGxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgaG9yU3F1YXJlUm9vdCA9IE1hdGguc3FydChzdW1PZlggLyAobGVuZ3RoIC0gMSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5NZWFuKHZlclN0YW5kYXJkTWVhbiwgdmVyU3F1YXJlUm9vdCwgaG9yU3RhbmRhcmRNZWFuLCBob3JTcXVhcmVSb290LCB2ZXJ0aWNhbE1lYW4sIGhvcml6b250YWxNZWFuKTtcbiAgICAgICAgfTtcbiAgICAgICAgRXJyb3JCYXIucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgZXhwbG9kZVZhbHVlID0gNTtcbiAgICAgICAgICAgIHZhciByZW5kZXIgPSBzZXJpZXMuY2hhcnQucmVuZGVyZXI7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtO1xuICAgICAgICAgICAgdHJhbnNmb3JtID0gc2VyaWVzLmNoYXJ0LmNoYXJ0QXJlYVR5cGUgPT09ICdDYXJ0ZXNpYW4nID8gJ3RyYW5zbGF0ZSgnICsgc2VyaWVzLmNsaXBSZWN0LnggKyAnLCcgKyAoc2VyaWVzLmNsaXBSZWN0LnkpICsgJyknIDogJyc7XG4gICAgICAgICAgICB2YXIgbWFya2VySGVpZ2h0ID0gKHNlcmllcy5tYXJrZXIuaGVpZ2h0ICsgZXhwbG9kZVZhbHVlKSAvIDI7XG4gICAgICAgICAgICB2YXIgbWFya2VyV2lkdGggPSAoc2VyaWVzLm1hcmtlci53aWR0aCArIGV4cGxvZGVWYWx1ZSkgLyAyO1xuICAgICAgICAgICAgaWYgKHNlcmllcy5jaGFydC5jaGFydEFyZWFUeXBlID09PSAnQ2FydGVzaWFuJykge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvckJhckNsaXBSZWN0ID0gcmVuZGVyLmRyYXdDbGlwUGF0aChuZXcgaGVscGVyXzEuUmVjdE9wdGlvbih0aGlzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnX0NoYXJ0RXJyb3JCYXJDbGlwUmVjdF8nICsgc2VyaWVzLmluZGV4LCAndHJhbnNwYXJlbnQnLCB7IHdpZHRoOiAxLCBjb2xvcjogJ0dyYXknIH0sIDEsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogLW1hcmtlcldpZHRoLCB5OiAtbWFya2VySGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2VyaWVzLmNsaXBSZWN0LndpZHRoICsgbWFya2VyV2lkdGggKiAyLCBoZWlnaHQ6IHNlcmllcy5jbGlwUmVjdC5oZWlnaHQgKyBtYXJrZXJIZWlnaHQgKiAyXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHNlcmllcy5lcnJvckJhckVsZW1lbnQgPSByZW5kZXIuY3JlYXRlR3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAnaWQnOiB0aGlzLmNoYXJ0LmVsZW1lbnQuaWQgKyAnRXJyb3JCYXJHcm91cCcgKyBzZXJpZXMuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiB0cmFuc2Zvcm0sXG4gICAgICAgICAgICAgICAgICAgICdjbGlwLXBhdGgnOiAndXJsKCMnICsgdGhpcy5jaGFydC5lbGVtZW50LmlkICsgJ19DaGFydEVycm9yQmFyQ2xpcFJlY3RfJyArIHNlcmllcy5pbmRleCArICcpJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlcmllcy5lcnJvckJhckVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyb3JCYXJDbGlwUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5kb0Vycm9yQmFyQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdmFyIGVycm9yQmFyRWxlbWVudHMgPSBzZXJpZXMuZXJyb3JCYXJFbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoIWVycm9yQmFyRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZWxheSA9IHNlcmllcy5hbmltYXRpb24uZGVsYXkgKyBzZXJpZXMuYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgdmFyIGogPSAxO1xuICAgICAgICAgICAgd2hpbGUgKGogPCBlcnJvckJhckVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VyaWVzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcmllcy5wb2ludHNbaV0uc3ltYm9sTG9jYXRpb25zWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlcnJvckJhckVsZW1lbnRzW2pdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyXzIudGVtcGxhdGVBbmltYXRlKGVycm9yQmFyRWxlbWVudHNbal0sIGRlbGF5LCAzNTAsIHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gJ1NsaWRlTGVmdEluJyA6ICdTbGlkZUJvdHRvbUluJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdFcnJvckJhcic7XG4gICAgICAgIH07XG4gICAgICAgIEVycm9yQmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBFcnJvckJhcjtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuRXJyb3JCYXIgPSBFcnJvckJhcjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2Vycm9yLWJhci5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL2xlZ2VuZC9sZWdlbmRcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGVqMl9iYXNlXzIsIGxlZ2VuZF8xLCBoZWxwZXJfMSwgY29uc3RhbnRzXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIExlZ2VuZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhMZWdlbmQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIExlZ2VuZChjaGFydCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY2hhcnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5saWJyYXJ5ID0gX3RoaXM7XG4gICAgICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9uKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5tb3VzZU1vdmUsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vbignY2xpY2snLCB0aGlzLmNsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQub24oZWoyX2Jhc2VfMS5Ccm93c2VyLnRvdWNoRW5kRXZlbnQsIHRoaXMubW91c2VFbmQsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBMZWdlbmQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hhcnQub2ZmKGVqMl9iYXNlXzEuQnJvd3Nlci50b3VjaE1vdmVFdmVudCwgdGhpcy5tb3VzZU1vdmUpO1xuICAgICAgICAgICAgdGhpcy5jaGFydC5vZmYoJ2NsaWNrJywgdGhpcy5jbGljayk7XG4gICAgICAgICAgICB0aGlzLmNoYXJ0Lm9mZihlajJfYmFzZV8xLkJyb3dzZXIudG91Y2hFbmRFdmVudCwgdGhpcy5tb3VzZUVuZCk7XG4gICAgICAgIH07XG4gICAgICAgIExlZ2VuZC5wcm90b3R5cGUubW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJ0LmxlZ2VuZFNldHRpbmdzLnZpc2libGUgJiYgIXRoaXMuY2hhcnQuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5tb3VzZUVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFydC5sZWdlbmRTZXR0aW5ncy52aXNpYmxlICYmIHRoaXMuY2hhcnQuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5nZXRMZWdlbmRPcHRpb25zID0gZnVuY3Rpb24gKHZpc2libGVTZXJpZXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxlZ2VuZENvbGxlY3Rpb25zID0gW107XG4gICAgICAgICAgICB2YXIgc2VyaWVzVHlwZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlzaWJsZVNlcmllc0NvbGxlY3Rpb25fMSA9IHZpc2libGVTZXJpZXNDb2xsZWN0aW9uOyBfaSA8IHZpc2libGVTZXJpZXNDb2xsZWN0aW9uXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IHZpc2libGVTZXJpZXNDb2xsZWN0aW9uXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuY2F0ZWdvcnkgIT09ICdJbmRpY2F0b3InKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc1R5cGUgPSAodmlzaWJsZVNlcmllc0NvbGxlY3Rpb25bMF0uY2hhcnQuY2hhcnRBcmVhVHlwZSA9PT0gJ1BvbGFyUmFkYXInKSA/IHNlcmllcy5kcmF3VHlwZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWdlbmRDb2xsZWN0aW9ucy5wdXNoKG5ldyBsZWdlbmRfMS5MZWdlbmRPcHRpb25zKHNlcmllcy5uYW1lLCBzZXJpZXMuaW50ZXJpb3IsIHNlcmllcy5sZWdlbmRTaGFwZSwgc2VyaWVzLnZpc2libGUsIHNlcmllc1R5cGUsIHNlcmllcy5tYXJrZXIuc2hhcGUsIHNlcmllcy5tYXJrZXIudmlzaWJsZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5nZXRMZWdlbmRCb3VuZHMgPSBmdW5jdGlvbiAoYXZhaWxhYmxlU2l6ZSwgbGVnZW5kQm91bmRzLCBsZWdlbmQpIHtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gbGVnZW5kLnBhZGRpbmc7XG4gICAgICAgICAgICB2YXIgZXh0cmFIZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIGV4dHJhV2lkdGggPSAwO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICBleHRyYUhlaWdodCA9ICFsZWdlbmQuaGVpZ2h0ID8gKChhdmFpbGFibGVTaXplLmhlaWdodCAvIDEwMCkgKiA1KSA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBleHRyYVdpZHRoID0gIWxlZ2VuZC53aWR0aCA/ICgoYXZhaWxhYmxlU2l6ZS53aWR0aCAvIDEwMCkgKiA1KSA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZWdlbmRCb3VuZHMuaGVpZ2h0ICs9IGV4dHJhSGVpZ2h0O1xuICAgICAgICAgICAgbGVnZW5kQm91bmRzLndpZHRoICs9IGV4dHJhV2lkdGg7XG4gICAgICAgICAgICB2YXIgc2hhcGVIZWlnaHQgPSBsZWdlbmQuc2hhcGVIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgc2hhcGVXaWR0aCA9IGxlZ2VuZC5zaGFwZVdpZHRoO1xuICAgICAgICAgICAgdmFyIHNoYXBlUGFkZGluZyA9IGxlZ2VuZC5zaGFwZVBhZGRpbmc7XG4gICAgICAgICAgICB2YXIgbWF4aW11bVdpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciByb3dXaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVnZW5kV2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIGNvbHVtbkhlaWdodCA9IDA7XG4gICAgICAgICAgICB2YXIgcm93Q291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZEV2ZW50QXJncztcbiAgICAgICAgICAgIHRoaXMubWF4SXRlbUhlaWdodCA9IE1hdGgubWF4KGhlbHBlcl8xLm1lYXN1cmVUZXh0KCdNZWFzdXJlVGV4dCcsIGxlZ2VuZC50ZXh0U3R5bGUpLmhlaWdodCwgbGVnZW5kLnNoYXBlSGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciByZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmxlZ2VuZENvbGxlY3Rpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBsZWdlbmRPcHRpb24gPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgbGVnZW5kRXZlbnRBcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICBmaWxsOiBsZWdlbmRPcHRpb24uZmlsbCwgdGV4dDogbGVnZW5kT3B0aW9uLnRleHQsIHNoYXBlOiBsZWdlbmRPcHRpb24uc2hhcGUsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlclNoYXBlOiBsZWdlbmRPcHRpb24ubWFya2VyU2hhcGUsIG5hbWU6IGNvbnN0YW50c18xLmxlZ2VuZFJlbmRlciwgY2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC50cmlnZ2VyKGNvbnN0YW50c18xLmxlZ2VuZFJlbmRlciwgbGVnZW5kRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ucmVuZGVyID0gIWxlZ2VuZEV2ZW50QXJncy5jYW5jZWw7XG4gICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLnRleHQgPSBsZWdlbmRFdmVudEFyZ3MudGV4dDtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24uZmlsbCA9IGxlZ2VuZEV2ZW50QXJncy5maWxsO1xuICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5zaGFwZSA9IGxlZ2VuZEV2ZW50QXJncy5zaGFwZTtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ubWFya2VyU2hhcGUgPSBsZWdlbmRFdmVudEFyZ3MubWFya2VyU2hhcGU7XG4gICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLnRleHRTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQobGVnZW5kT3B0aW9uLnRleHQsIGxlZ2VuZC50ZXh0U3R5bGUpO1xuICAgICAgICAgICAgICAgIGlmIChsZWdlbmRPcHRpb24ucmVuZGVyICYmIGxlZ2VuZE9wdGlvbi50ZXh0ICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRXaWR0aCA9IHNoYXBlV2lkdGggKyBzaGFwZVBhZGRpbmcgKyBsZWdlbmRPcHRpb24udGV4dFNpemUud2lkdGggKyBwYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICByb3dXaWR0aCA9IHJvd1dpZHRoICsgbGVnZW5kV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWdlbmRCb3VuZHMud2lkdGggPCAocGFkZGluZyArIHJvd1dpZHRoKSB8fCB0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1XaWR0aCA9IE1hdGgubWF4KG1heGltdW1XaWR0aCwgKHJvd1dpZHRoICsgcGFkZGluZyAtICh0aGlzLmlzVmVydGljYWwgPyAwIDogbGVnZW5kV2lkdGgpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93Q291bnQgPT09IDAgJiYgKGxlZ2VuZFdpZHRoICE9PSByb3dXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dXaWR0aCA9IHRoaXMuaXNWZXJ0aWNhbCA/IDAgOiBsZWdlbmRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5IZWlnaHQgPSAocm93Q291bnQgKiAodGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZykpICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbHVtbkhlaWdodCA9IE1hdGgubWF4KGNvbHVtbkhlaWdodCwgKHRoaXMubWF4SXRlbUhlaWdodCArIHBhZGRpbmcpICsgcGFkZGluZyk7XG4gICAgICAgICAgICB0aGlzLmlzUGFnaW5nID0gbGVnZW5kQm91bmRzLmhlaWdodCA8IGNvbHVtbkhlaWdodDtcbiAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IHJvd0NvdW50O1xuICAgICAgICAgICAgaWYgKHJlbmRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Qm91bmRzKE1hdGgubWF4KChyb3dXaWR0aCArIHBhZGRpbmcpLCBtYXhpbXVtV2lkdGgpLCBjb2x1bW5IZWlnaHQsIGxlZ2VuZCwgbGVnZW5kQm91bmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Qm91bmRzKDAsIDAsIGxlZ2VuZCwgbGVnZW5kQm91bmRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5nZXRSZW5kZXJQb2ludCA9IGZ1bmN0aW9uIChsZWdlbmRPcHRpb24sIHN0YXJ0LCB0ZXh0UGFkZGluZywgcHJldkxlZ2VuZCwgcmVjdCwgY291bnQsIGZpcnN0TGVnZW5kKSB7XG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMubGVnZW5kLnBhZGRpbmc7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNCb3VuZCA9IChwcmV2TGVnZW5kLmxvY2F0aW9uLnggKyB0ZXh0UGFkZGluZyArIHByZXZMZWdlbmQudGV4dFNpemUud2lkdGgpO1xuICAgICAgICAgICAgaWYgKChwcmV2aW91c0JvdW5kICsgKGxlZ2VuZE9wdGlvbi50ZXh0U2l6ZS53aWR0aCArIHRleHRQYWRkaW5nKSkgPiAocmVjdC54ICsgcmVjdC53aWR0aCArIHRoaXMubGVnZW5kLnNoYXBlV2lkdGggLyAyKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54ID0gc3RhcnQueDtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ubG9jYXRpb24ueSA9IChjb3VudCA9PT0gZmlyc3RMZWdlbmQpID8gcHJldkxlZ2VuZC5sb2NhdGlvbi55IDpcbiAgICAgICAgICAgICAgICAgICAgcHJldkxlZ2VuZC5sb2NhdGlvbi55ICsgdGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54ID0gKGNvdW50ID09PSBmaXJzdExlZ2VuZCkgPyBwcmV2TGVnZW5kLmxvY2F0aW9uLnggOiBwcmV2aW91c0JvdW5kO1xuICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi55ID0gcHJldkxlZ2VuZC5sb2NhdGlvbi55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF2YWlsd2lkdGggPSAodGhpcy5sZWdlbmRCb3VuZHMueCArIHRoaXMubGVnZW5kQm91bmRzLndpZHRoKSAtIChsZWdlbmRPcHRpb24ubG9jYXRpb24ueCArXG4gICAgICAgICAgICAgICAgdGV4dFBhZGRpbmcgLSB0aGlzLmxlZ2VuZC5zaGFwZVdpZHRoIC8gMik7XG4gICAgICAgICAgICBsZWdlbmRPcHRpb24udGV4dCA9IGhlbHBlcl8xLnRleHRUcmltKCthdmFpbHdpZHRoLnRvRml4ZWQoNCksIGxlZ2VuZE9wdGlvbi50ZXh0LCB0aGlzLmxlZ2VuZC50ZXh0U3R5bGUpO1xuICAgICAgICB9O1xuICAgICAgICBMZWdlbmQucHJvdG90eXBlLkxlZ2VuZENsaWNrID0gZnVuY3Rpb24gKHNlcmllc0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSB0aGlzLmNoYXJ0O1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IGNoYXJ0LnZpc2libGVTZXJpZXNbc2VyaWVzSW5kZXhdO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZCA9IHRoaXMubGVnZW5kQ29sbGVjdGlvbnNbc2VyaWVzSW5kZXhdO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YUluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChjaGFydC5zZWxlY3Rpb25Nb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGFJbmRleGVzID0gZWoyX2Jhc2VfMi5leHRlbmQoW10sIGNoYXJ0LnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFydC5sZWdlbmRTZXR0aW5ncy50b2dnbGVWaXNpYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXJpZXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZWdlbmQudmlzaWJsZSA9IChzZXJpZXMudmlzaWJsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJ0LnN2Z09iamVjdC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNoYXJ0LnN2Z09iamVjdC5sYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LnN2Z09iamVjdC5yZW1vdmVDaGlsZChjaGFydC5zdmdPYmplY3QubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlajJfYmFzZV8xLnJlbW92ZShjaGFydC5zdmdPYmplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGFydC5hbmltYXRlU2VyaWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY2hhcnQucmVtb3ZlU3ZnKCk7XG4gICAgICAgICAgICAgICAgY2hhcnQucmVmcmVzaEF4aXMoKTtcbiAgICAgICAgICAgICAgICBzZXJpZXMucmVmcmVzaEF4aXNMYWJlbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFNlcmllcyhjaGFydC52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgICAgICBjaGFydC5yZWZyZXNoQm91bmQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRhSW5kZXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0LnNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzID0gc2VsZWN0ZWREYXRhSW5kZXhlcztcbiAgICAgICAgICAgICAgICAgICAgY2hhcnQuc2VsZWN0aW9uTW9kdWxlLnJlZHJhd1NlbGVjdGlvbihjaGFydCwgY2hhcnQuc2VsZWN0aW9uTW9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhcnQuc2VsZWN0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgY2hhcnQuc2VsZWN0aW9uTW9kdWxlLmxlZ2VuZFNlbGVjdGlvbihjaGFydCwgc2VyaWVzSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBMZWdlbmQucHJvdG90eXBlLnJlZnJlc2hTZXJpZXMgPSBmdW5jdGlvbiAoc2VyaWVzQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBzZXJpZXNDb2xsZWN0aW9uXzEgPSBzZXJpZXNDb2xsZWN0aW9uOyBfaSA8IHNlcmllc0NvbGxlY3Rpb25fMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gc2VyaWVzQ29sbGVjdGlvbl8xW19pXTtcbiAgICAgICAgICAgICAgICBzZXJpZXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExlZ2VuZC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGFydC5sZWdlbmRTZXR0aW5ncy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZEl0ZW1zSWQgPSBbdGhpcy5sZWdlbmRJRCArICdfdGV4dF8nLCB0aGlzLmxlZ2VuZElEICsgJ19zaGFwZV9tYXJrZXJfJyxcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZElEICsgJ19zaGFwZV8nXTtcbiAgICAgICAgICAgIHZhciBzZXJpZXNJbmRleDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGVnZW5kSXRlbXNJZF8xID0gbGVnZW5kSXRlbXNJZDsgX2kgPCBsZWdlbmRJdGVtc0lkXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbGVnZW5kSXRlbXNJZF8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SWQuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXNJbmRleCA9IHBhcnNlSW50KHRhcmdldElkLnNwbGl0KGlkKVsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkxlZ2VuZENsaWNrKHNlcmllc0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQuaW5kZXhPZih0aGlzLmxlZ2VuZElEICsgJ19wYWdldXAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYWdlKGV2ZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldElkLmluZGV4T2YodGhpcy5sZWdlbmRJRCArICdfcGFnZWRvd24nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYWdlKGV2ZW50LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIExlZ2VuZC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnTGVnZW5kJztcbiAgICAgICAgfTtcbiAgICAgICAgTGVnZW5kLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIExlZ2VuZDtcbiAgICB9KGxlZ2VuZF8xLkJhc2VMZWdlbmQpKTtcbiAgICBleHBvcnRzLkxlZ2VuZCA9IExlZ2VuZDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvbGVnZW5kL2xlZ2VuZC5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vYW5ub3RhdGlvbi9hbm5vdGF0aW9uXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgYW5ub3RhdGlvbl8xLCBoZWxwZXJfMSwgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQ2hhcnRBbm5vdGF0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKENoYXJ0QW5ub3RhdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQ2hhcnRBbm5vdGF0aW9uKGNvbnRyb2wsIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250cm9sKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuY2hhcnQgPSBjb250cm9sO1xuICAgICAgICAgICAgX3RoaXMuYW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBDaGFydEFubm90YXRpb24ucHJvdG90eXBlLnJlbmRlckFubm90YXRpb25zID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbkVsZW1lbnQ7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb247XG4gICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5jaGFydC5lbGVtZW50LmlkICsgJ19Bbm5vdGF0aW9uX0NvbGxlY3Rpb25zJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmFubm90YXRpb25zLm1hcChmdW5jdGlvbiAoYW5ub3RhdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uRWxlbWVudCA9IF90aGlzLnJlbmRlcihhbm5vdGF0aW9uLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbigwLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXNbJ3NldEFubm90YXRpb24nICsgYW5ub3RhdGlvbi5jb29yZGluYXRlVW5pdHMgKyAnVmFsdWUnXShsb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0RWxlbWVudFN0eWxlKGxvY2F0aW9uLCBhbm5vdGF0aW9uRWxlbWVudCwgX3RoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXJfMS5hcHBlbmRFbGVtZW50KHRoaXMucGFyZW50RWxlbWVudCwgZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0QW5ub3RhdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgIH07XG4gICAgICAgIENoYXJ0QW5ub3RhdGlvbi5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQW5ub3RhdGlvbic7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBDaGFydEFubm90YXRpb247XG4gICAgfShhbm5vdGF0aW9uXzEuQW5ub3RhdGlvbkJhc2UpKTtcbiAgICBleHBvcnRzLkNoYXJ0QW5ub3RhdGlvbiA9IENoYXJ0QW5ub3RhdGlvbjtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi91dGlscy9oZWxwZXJcIiwgXCIuLi91dGlscy9oZWxwZXJcIiwgXCIuLi91dGlscy9oZWxwZXJcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uL21vZGVsL2NvbnN0YW50c1wiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBoZWxwZXJfMiwgaGVscGVyXzMsIGVqMl9iYXNlXzEsIGNvbnN0YW50c18xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBbm5vdGF0aW9uQmFzZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFubm90YXRpb25CYXNlKGNvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbCA9IGNvbnRyb2w7XG4gICAgICAgIH1cbiAgICAgICAgQW5ub3RhdGlvbkJhc2UucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChhbm5vdGF0aW9uLCBpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5pc0NoYXJ0ID0gdGhpcy5jb250cm9sLmdldE1vZHVsZU5hbWUoKSA9PT0gJ2NoYXJ0JztcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvbiA9IGFubm90YXRpb247XG4gICAgICAgICAgICB2YXIgY2hpbGRFbGVtZW50ID0gaGVscGVyXzEuY3JlYXRlVGVtcGxhdGUoZWoyX2Jhc2VfMS5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuY29udHJvbC5lbGVtZW50LmlkICsgJ19Bbm5vdGF0aW9uXycgKyBpbmRleCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6ICdwb3NpdGlvbjogYWJzb2x1dGU7J1xuICAgICAgICAgICAgfSksIGluZGV4LCBhbm5vdGF0aW9uLmNvbnRlbnQsIHRoaXMuY29udHJvbCk7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRFbGVtZW50O1xuICAgICAgICB9O1xuICAgICAgICBBbm5vdGF0aW9uQmFzZS5wcm90b3R5cGUuc2V0QW5ub3RhdGlvblBpeGVsVmFsdWUgPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgIHZhciByZWN0O1xuICAgICAgICAgICAgcmVjdCA9IHRoaXMuYW5ub3RhdGlvbi5yZWdpb24gPT09ICdDaGFydCcgP1xuICAgICAgICAgICAgICAgIG5ldyBoZWxwZXJfMi5SZWN0KDAsIDAsIHRoaXMuY29udHJvbC5hdmFpbGFibGVTaXplLndpZHRoLCB0aGlzLmNvbnRyb2wuYXZhaWxhYmxlU2l6ZS5oZWlnaHQpIDpcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhcnQgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuY2hhcnRBeGlzTGF5b3V0UGFuZWwuc2VyaWVzQ2xpcFJlY3QgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2wuc2VyaWVzWzBdLmFjY3VtdWxhdGlvbkJvdW5kO1xuICAgICAgICAgICAgbG9jYXRpb24ueCA9ICgodHlwZW9mIHRoaXMuYW5ub3RhdGlvbi54ICE9PSAnc3RyaW5nJykgP1xuICAgICAgICAgICAgICAgICgodHlwZW9mIHRoaXMuYW5ub3RhdGlvbi54ID09PSAnbnVtYmVyJykgPyB0aGlzLmFubm90YXRpb24ueCA6IDApIDpcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5zdHJpbmdUb051bWJlcih0aGlzLmFubm90YXRpb24ueCwgcmVjdC53aWR0aCkpICsgcmVjdC54O1xuICAgICAgICAgICAgbG9jYXRpb24ueSA9ICgodHlwZW9mIHRoaXMuYW5ub3RhdGlvbi55ID09PSAnbnVtYmVyJykgPyB0aGlzLmFubm90YXRpb24ueSA6XG4gICAgICAgICAgICAgICAgaGVscGVyXzIuc3RyaW5nVG9OdW1iZXIodGhpcy5hbm5vdGF0aW9uLnksIHJlY3QuaGVpZ2h0KSkgKyByZWN0Lnk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkJhc2UucHJvdG90eXBlLnNldEFubm90YXRpb25Qb2ludFZhbHVlID0gZnVuY3Rpb24gKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc3ltYm9sTG9jYXRpb24gPSBuZXcgaGVscGVyXzIuQ2hhcnRMb2NhdGlvbigwLCAwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hhcnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgeEF4aXMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdmFyIHlBeGlzID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBjaGFydCA9IHRoaXMuY29udHJvbDtcbiAgICAgICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IHRoaXMuYW5ub3RhdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgeFZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBpc0xvZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciB4QXhpc05hbWUgPSBhbm5vdGF0aW9uLnhBeGlzTmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgeUF4aXNOYW1lID0gYW5ub3RhdGlvbi55QXhpc05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIGlzSW52ZXJ0ZWQgPSBjaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBjaGFydC5heGlzQ29sbGVjdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBheGlzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoeEF4aXNOYW1lID09PSBheGlzLm5hbWUgfHwgKHhBeGlzTmFtZSA9PSBudWxsICYmIGF4aXMubmFtZSA9PT0gJ3ByaW1hcnlYQXhpcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4QXhpcyA9IGF4aXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeEF4aXMudmFsdWVUeXBlID09PSAnQ2F0ZWdvcnknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhBeGlzLmxhYmVscy5pbmRleE9mKGFubm90YXRpb24ueCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9IHhBeGlzLmxhYmVscy5pbmRleE9mKGFubm90YXRpb24ueCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeEF4aXMudmFsdWVUeXBlID09PSAnRGF0ZVRpbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsgc2tlbGV0b246ICdmdWxsJywgdHlwZTogJ2RhdGVUaW1lJyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9ICh0eXBlb2YgdGhpcy5hbm5vdGF0aW9uLnggPT09ICdvYmplY3QnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGUucGFyc2UoY2hhcnQuaW50bC5nZXREYXRlUGFyc2VyKG9wdGlvbikoY2hhcnQuaW50bC5nZXREYXRlRm9ybWF0KG9wdGlvbikoYW5ub3RhdGlvbi54KSkpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9ICthbm5vdGF0aW9uLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeUF4aXNOYW1lID09PSBheGlzLm5hbWUgfHwgKHlBeGlzTmFtZSA9PSBudWxsICYmIGF4aXMubmFtZSA9PT0gJ3ByaW1hcnlZQXhpcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5QXhpcyA9IGF4aXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xvZyA9IHlBeGlzLnZhbHVlVHlwZSA9PT0gJ0xvZ2FyaXRobWljJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeEF4aXMgJiYgeUF4aXMgJiYgaGVscGVyXzIud2l0aEluKHhBeGlzLnZhbHVlVHlwZSA9PT0gJ0xvZ2FyaXRobWljJyA/IGhlbHBlcl8xLmxvZ0Jhc2UoeFZhbHVlLCB4QXhpcy5sb2dCYXNlKSA6IHhWYWx1ZSwgeEF4aXMudmlzaWJsZVJhbmdlKSkge1xuICAgICAgICAgICAgICAgICAgICBzeW1ib2xMb2NhdGlvbiA9IGhlbHBlcl8zLmdldFBvaW50KHhWYWx1ZSwgaGVscGVyXzIud2l0aEluKChpc0xvZyA/IGhlbHBlcl8xLmxvZ0Jhc2UoK3RoaXMuYW5ub3RhdGlvbi55LCB5QXhpcy5sb2dCYXNlKSA6ICt0aGlzLmFubm90YXRpb24ueSksIHlBeGlzLnZpc2libGVSYW5nZSkgPyArYW5ub3RhdGlvbi55IDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9nID8gTWF0aC5wb3coeUF4aXMubG9nQmFzZSwgeUF4aXMudmlzaWJsZVJhbmdlLm1heCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICthbm5vdGF0aW9uLnkgPiB5QXhpcy52aXNpYmxlUmFuZ2UubWF4ID8geUF4aXMudmlzaWJsZVJhbmdlLm1heCA6IHlBeGlzLnZpc2libGVSYW5nZS5taW4sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnggPSBzeW1ib2xMb2NhdGlvbi54ICsgKGlzSW52ZXJ0ZWQgPyB5QXhpcy5yZWN0LnggOiB4QXhpcy5yZWN0LngpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi55ID0gc3ltYm9sTG9jYXRpb24ueSArIChpc0ludmVydGVkID8geEF4aXMucmVjdC55IDogeUF4aXMucmVjdC55KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBY2N1bXVsYXRpb25Qb2ludFZhbHVlKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQW5ub3RhdGlvbkJhc2UucHJvdG90eXBlLnNldEFjY3VtdWxhdGlvblBvaW50VmFsdWUgPSBmdW5jdGlvbiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBhY2N1bXVsYXRpb24gPSB0aGlzLmNvbnRyb2w7XG4gICAgICAgICAgICB2YXIgcG9pbnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0ucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBhY2NQb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjY1BvaW50LnggPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRlLnBhcnNlKGFjY1BvaW50LngpID09PSBEYXRlLnBhcnNlKHRoaXMuYW5ub3RhdGlvbi54KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjUG9pbnQueSA9PT0gdGhpcy5hbm5vdGF0aW9uLnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ID0gYWNjUG9pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY1BvaW50LnggPT09IHRoaXMuYW5ub3RhdGlvbi54ICYmIGFjY1BvaW50LnkgPT09IHRoaXMuYW5ub3RhdGlvbi55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludCA9IGFjY1BvaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9pbnQgJiYgcG9pbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnggPSBwb2ludC5zeW1ib2xMb2NhdGlvbi54O1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnkgPSBwb2ludC5zeW1ib2xMb2NhdGlvbi55O1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBbm5vdGF0aW9uQmFzZS5wcm90b3R5cGUuc2V0RWxlbWVudFN0eWxlID0gZnVuY3Rpb24gKGxvY2F0aW9uLCBlbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFJlY3QgPSBoZWxwZXJfMS5tZWFzdXJlRWxlbWVudFJlY3QoZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEuYW5ub3RhdGlvblJlbmRlciwgY29udGVudDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2wudHJpZ2dlcihjb25zdGFudHNfMS5hbm5vdGF0aW9uUmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBpZiAoIWFyZ3NEYXRhLmNhbmNlbCkge1xuICAgICAgICAgICAgICAgIGFyZ3NEYXRhLmNvbnRlbnQuc3R5bGUubGVmdCA9IHRoaXMuc2V0QWxpZ25tZW50VmFsdWUodGhpcy5hbm5vdGF0aW9uLmhvcml6b250YWxBbGlnbm1lbnQsIGVsZW1lbnRSZWN0LndpZHRoLCBhcmdzRGF0YS5sb2NhdGlvbi54KSArICdweCc7XG4gICAgICAgICAgICAgICAgYXJnc0RhdGEuY29udGVudC5zdHlsZS50b3AgPSB0aGlzLnNldEFsaWdubWVudFZhbHVlKHRoaXMuYW5ub3RhdGlvbi52ZXJ0aWNhbEFsaWdubWVudCwgZWxlbWVudFJlY3QuaGVpZ2h0LCBhcmdzRGF0YS5sb2NhdGlvbi55KSArICdweCc7XG4gICAgICAgICAgICAgICAgYXJnc0RhdGEuY29udGVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzLmFubm90YXRpb24uZGVzY3JpcHRpb24gfHwgJ0Fubm90YXRpb24nKTtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5hcHBlbmRFbGVtZW50KGFyZ3NEYXRhLmNvbnRlbnQsIHBhcmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBbm5vdGF0aW9uQmFzZS5wcm90b3R5cGUuc2V0QWxpZ25tZW50VmFsdWUgPSBmdW5jdGlvbiAoYWxpZ25tZW50LCBzaXplLCB2YWx1ZSkge1xuICAgICAgICAgICAgc3dpdGNoIChhbGlnbm1lbnQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdUb3AnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ05lYXInOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSAtPSBzaXplO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb3R0b20nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0Zhcic6XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ01pZGRsZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQ2VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgLT0gKHNpemUgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBbm5vdGF0aW9uQmFzZTtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQW5ub3RhdGlvbkJhc2UgPSBBbm5vdGF0aW9uQmFzZTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL2Fubm90YXRpb24vYW5ub3RhdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi9jb2x1bW4tYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgaGVscGVyXzIsIGVqMl9iYXNlXzEsIGNvbHVtbl9iYXNlXzEsIGhlbHBlcl8zKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBCb3hBbmRXaGlza2VyU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEJveEFuZFdoaXNrZXJTZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEJveEFuZFdoaXNrZXJTZXJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQm94QW5kV2hpc2tlclNlcmllcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKHNlcmllcywgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSB7XG4gICAgICAgICAgICB2YXIgc2lkZUJ5U2lkZUluZm8gPSB0aGlzLmdldFNpZGVCeVNpZGVJbmZvKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGE7XG4gICAgICAgICAgICB2YXIgY2VudGVyUmVnaW9uO1xuICAgICAgICAgICAgdmFyIGJvcmRlcldpZHRoID0gc2VyaWVzLmJvcmRlci53aWR0aCB8fCAxO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNlcmllcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHBvaW50LnN5bWJvbExvY2F0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHBvaW50LnJlZ2lvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyUmVnaW9uXzEgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUgJiYgaGVscGVyXzEud2l0aEluUmFuZ2Uoc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCAtIDFdLCBwb2ludCwgc2VyaWVzLnBvaW50c1twb2ludC5pbmRleCArIDFdLCBzZXJpZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZEJveFBsb3RWYWx1ZXMocG9pbnQueSwgcG9pbnQsIHNlcmllcy5ib3hQbG90TW9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGlwUmVnaW9uKHNlcmllcywgcG9pbnQsIHNpZGVCeVNpZGVJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyUmVnaW9uXzEgPSB0aGlzLmdldFJlY3RhbmdsZSgocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uc3RhcnQpLCBwb2ludC51cHBlclF1YXJ0aWxlLCAocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8uZW5kKSwgcG9pbnQubG93ZXJRdWFydGlsZSwgc2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQucmVnaW9ucy5wdXNoKGNlbnRlclJlZ2lvbl8xKTtcbiAgICAgICAgICAgICAgICAgICAgYXJnc0RhdGEgPSB0aGlzLnRyaWdnZXJFdmVudChzZXJpZXMsIHBvaW50LCBzZXJpZXMuaW50ZXJpb3IsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAoIWVqMl9iYXNlXzEuaXNOdWxsT3JVbmRlZmluZWQoc2VyaWVzLmJvcmRlci5jb2xvcikgJiYgc2VyaWVzLmJvcmRlci5jb2xvciAhPT0gJ3RyYW5zcGFyZW50JykgPyBzZXJpZXMuYm9yZGVyLmNvbG9yIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMi5nZXRTYXR1cmF0aW9uQ29sb3Ioc2VyaWVzLmludGVyaW9yLCAtMC42KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzZXJpZXMuYm9yZGVyLndpZHRoID8gc2VyaWVzLmJvcmRlci53aWR0aCA6IDFcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJnc0RhdGEuY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckJveEFuZFdoaXNrZXIoc2VyaWVzLCBwb2ludCwgY2VudGVyUmVnaW9uXzEsIGFyZ3NEYXRhLCB0aGlzLmdldFBhdGhTdHJpbmcocG9pbnQsIHNlcmllcywgaGVscGVyXzIuZ2V0UG9pbnQocG9pbnQueFZhbHVlLCBwb2ludC5tZWRpYW4sIHhBeGlzLCB5QXhpcywgaXNJbnZlcnRlZCksIGhlbHBlcl8yLmdldFBvaW50KHBvaW50LnhWYWx1ZSwgcG9pbnQuYXZlcmFnZSwgeEF4aXMsIHlBeGlzLCBpc0ludmVydGVkKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmllcy5tYXJrZXIudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHNlcmllcy5jaGFydC5tYXJrZXJSZW5kZXIucmVuZGVyKHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJveEFuZFdoaXNrZXJTZXJpZXMucHJvdG90eXBlLnVwZGF0ZVRpcFJlZ2lvbiA9IGZ1bmN0aW9uIChzZXJpZXMsIHBvaW50LCBzaWRlQnlTaWRlSW5mbykge1xuICAgICAgICAgICAgdmFyIHRpcFJlZ2lvbiA9IHRoaXMuZ2V0UmVjdGFuZ2xlKChwb2ludC54VmFsdWUgKyBzaWRlQnlTaWRlSW5mby5tZWRpYW4pLCBwb2ludC5tYXhpbXVtLCAocG9pbnQueFZhbHVlICsgc2lkZUJ5U2lkZUluZm8ubWVkaWFuKSwgcG9pbnQubWluaW11bSwgc2VyaWVzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGlwU2l6ZShzZXJpZXMsIHBvaW50LCB0aXBSZWdpb24sIHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgQm94QW5kV2hpc2tlclNlcmllcy5wcm90b3R5cGUudXBkYXRlVGlwU2l6ZSA9IGZ1bmN0aW9uIChzZXJpZXMsIHBvaW50LCByZWdpb24sIGlzSW52ZXJ0ZWQpIHtcbiAgICAgICAgICAgIHZhciBib3JkZXJXaWR0aCA9IHNlcmllcy5ib3JkZXIud2lkdGggfHwgMTtcbiAgICAgICAgICAgIGlmICghaXNJbnZlcnRlZCkge1xuICAgICAgICAgICAgICAgIHJlZ2lvbi54IC09IGJvcmRlcldpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICByZWdpb24ud2lkdGggPSByZWdpb24ud2lkdGggfHwgYm9yZGVyV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWdpb24ueSAtPSBib3JkZXJXaWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgcmVnaW9uLmhlaWdodCA9IHJlZ2lvbi5oZWlnaHQgfHwgYm9yZGVyV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludC5yZWdpb25zLnB1c2gocmVnaW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgQm94QW5kV2hpc2tlclNlcmllcy5wcm90b3R5cGUuZ2V0UGF0aFN0cmluZyA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBtZWRpYW4sIGF2ZXJhZ2UpIHtcbiAgICAgICAgICAgIHZhciB0b3BSZWN0ID0gcG9pbnQucmVnaW9uc1swXTtcbiAgICAgICAgICAgIHZhciBtaWRSZWN0ID0gcG9pbnQucmVnaW9uc1sxXTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAnJztcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gdG9wUmVjdC5oZWlnaHQgOiB0b3BSZWN0LndpZHRoO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHNlcmllcy5jaGFydC5yZXF1aXJlSW52ZXJ0ZWRBeGlzID8gdG9wUmVjdC55ICsgdG9wUmVjdC5oZWlnaHQgLyAyIDpcbiAgICAgICAgICAgICAgICB0b3BSZWN0LnggKyB0b3BSZWN0LndpZHRoIC8gMjtcbiAgICAgICAgICAgIHZhciBtaWRXaWR0aCA9IG1pZFJlY3QueCArIG1pZFJlY3Qud2lkdGg7XG4gICAgICAgICAgICB2YXIgbWlkSGVpZ2h0ID0gbWlkUmVjdC55ICsgbWlkUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgdG9wV2lkdGggPSB0b3BSZWN0LnggKyB0b3BSZWN0LndpZHRoO1xuICAgICAgICAgICAgdmFyIHRvcEhlaWdodCA9IHRvcFJlY3QueSArIHRvcFJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKCFzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGlwU2l6ZShzZXJpZXMsIHBvaW50LCB7IHg6IG1pZFJlY3QueCwgeTogdG9wUmVjdC55LCB3aWR0aDogbWlkV2lkdGggLSBtaWRSZWN0LngsIGhlaWdodDogMCB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpcFNpemUoc2VyaWVzLCBwb2ludCwgeyB4OiBtaWRSZWN0LngsIHk6IHRvcEhlaWdodCwgd2lkdGg6IG1pZFdpZHRoIC0gbWlkUmVjdC54LCBoZWlnaHQ6IDAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICdNICcgKyBtaWRSZWN0LnggKyAnICcgKyB0b3BSZWN0LnkgKyAnICcgKyAnIEwgJyArIG1pZFdpZHRoICsgJyAnICsgdG9wUmVjdC55O1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnIE0gJyArIGNlbnRlciArICcgJyArIHRvcFJlY3QueSArICcgJyArICcgTCAnICsgY2VudGVyICsgJyAnICsgbWlkUmVjdC55O1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnIE0gJyArIG1pZFJlY3QueCArICcgJyArIG1pZFJlY3QueSArICcgJyArICcgTCAnICsgbWlkV2lkdGggKyAnICcgKyBtaWRSZWN0LnkgK1xuICAgICAgICAgICAgICAgICAgICAnIEwgJyArIG1pZFdpZHRoICsgJyAnICsgbWlkSGVpZ2h0ICsgJyBMICcgKyBtaWRSZWN0LnggKyAnICcgKyBtaWRIZWlnaHQgKyAnIFonO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnIE0gJyArIGNlbnRlciArICcgJyArIG1pZEhlaWdodCArICcgTCAnICsgY2VudGVyICsgJyAnICsgdG9wSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnIE0gJyArIG1pZFJlY3QueCArICcgJyArIHRvcEhlaWdodCArICcgTCAnICsgbWlkV2lkdGggKyAnICcgKyB0b3BIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcgTSAnICsgbWlkUmVjdC54ICsgJyAnICsgbWVkaWFuLnkgKyAnIEwgJyArIG1pZFdpZHRoICsgJyAnICsgbWVkaWFuLnk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9IHNlcmllcy5zaG93TWVhbiA/XG4gICAgICAgICAgICAgICAgICAgICcgTSAnICsgKGF2ZXJhZ2UueCAtIDUpICsgJyAnICsgKGF2ZXJhZ2UueSAtIDUpICsgJyBMICcgKyAoYXZlcmFnZS54ICsgNSkgKyAnICcgKyAoYXZlcmFnZS55ICsgNSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJyBNICcgKyAoYXZlcmFnZS54ICsgNSkgKyAnICcgKyAoYXZlcmFnZS55IC0gNSkgKyAnIEwgJyArIChhdmVyYWdlLnggLSA1KSArICcgJyArIChhdmVyYWdlLnkgKyA1KSA6ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUaXBTaXplKHNlcmllcywgcG9pbnQsIHsgeDogdG9wUmVjdC54LCB5OiBtaWRSZWN0LnksIHdpZHRoOiAwLCBoZWlnaHQ6IG1pZEhlaWdodCAtIG1pZFJlY3QueSB9LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUaXBTaXplKHNlcmllcywgcG9pbnQsIHsgeDogdG9wV2lkdGgsIHk6IG1pZFJlY3QueSwgd2lkdGg6IDAsIGhlaWdodDogbWlkSGVpZ2h0IC0gbWlkUmVjdC55IH0sIHRydWUpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnTSAnICsgdG9wUmVjdC54ICsgJyAnICsgbWlkUmVjdC55ICsgJyBMICcgKyB0b3BSZWN0LnggKyAnICcgKyBtaWRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICdNICcgKyB0b3BSZWN0LnggKyAnICcgKyBjZW50ZXIgKyAnICcgKyAnIEwgJyArIG1pZFJlY3QueCArICcgJyArIGNlbnRlcjtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gJyBNICcgKyBtaWRSZWN0LnggKyAnICcgKyBtaWRSZWN0LnkgKyAnICcgKyAnIEwgJyArIG1pZFdpZHRoICsgJyAnICsgbWlkUmVjdC55ICtcbiAgICAgICAgICAgICAgICAgICAgJyBMICcgKyBtaWRXaWR0aCArICcgJyArIG1pZEhlaWdodCArICcgTCAnICsgbWlkUmVjdC54ICsgJyAnICsgbWlkSGVpZ2h0ICsgJyBaJztcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gJyBNICcgKyBtaWRXaWR0aCArICcgJyArIGNlbnRlciArICcgTCAnICsgdG9wV2lkdGggKyAnICcgKyBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICcgTSAnICsgdG9wV2lkdGggKyAnICcgKyBtaWRSZWN0LnkgKyAnIEwgJyArIHRvcFdpZHRoICsgJyAnICsgbWlkSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiArPSAnIE0gJyArIG1lZGlhbi54ICsgJyAnICsgbWlkUmVjdC55ICsgJyAnICsgJyBMICcgKyBtZWRpYW4ueCArICcgJyArIG1pZEhlaWdodDtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gc2VyaWVzLnNob3dNZWFuID9cbiAgICAgICAgICAgICAgICAgICAgJ00gJyArIChhdmVyYWdlLnggKyA1KSArICcgJyArIChhdmVyYWdlLnkgLSA1KSArICcgTCAnICsgKGF2ZXJhZ2UueCAtIDUpICsgJyAnICsgKGF2ZXJhZ2UueSArIDUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdNICcgKyAoYXZlcmFnZS54IC0gNSkgKyAnICcgKyAoYXZlcmFnZS55IC0gNSkgKyAnIEwgJyArIChhdmVyYWdlLnggKyA1KSArICcgJyArIChhdmVyYWdlLnkgKyA1KSA6ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgQm94QW5kV2hpc2tlclNlcmllcy5wcm90b3R5cGUucmVuZGVyQm94QW5kV2hpc2tlciA9IGZ1bmN0aW9uIChzZXJpZXMsIHBvaW50LCByZWN0LCBhcmdzRGF0YSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb247XG4gICAgICAgICAgICB2YXIgc2l6ZTtcbiAgICAgICAgICAgIHZhciBzeW1ib2xJZCA9IHNlcmllcy5jaGFydC5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHNlcmllcy5pbmRleCArICdfUG9pbnRfJyArIHBvaW50LmluZGV4O1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZXJpZXMuY2hhcnQucmVuZGVyZXIuZHJhd1BhdGgobmV3IGhlbHBlcl8xLlBhdGhPcHRpb24oc3ltYm9sSWQgKyAnX0JveFBhdGgnLCBhcmdzRGF0YS5maWxsLCBhcmdzRGF0YS5ib3JkZXIud2lkdGgsIGFyZ3NEYXRhLmJvcmRlci5jb2xvciwgc2VyaWVzLm9wYWNpdHksIHNlcmllcy5kYXNoQXJyYXksIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwb2ludC54LnRvU3RyaW5nKCkgKyAnOicgKyBwb2ludC5tYXhpbXVtLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICArICc6JyArIHBvaW50Lm1pbmltdW0udG9TdHJpbmcoKSArICc6JyArIHBvaW50Lmxvd2VyUXVhcnRpbGUudG9TdHJpbmcoKSArICc6JyArIHBvaW50LnVwcGVyUXVhcnRpbGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB2YXIgcGFyZW50RWxlbWVudCA9IHNlcmllcy5jaGFydC5yZW5kZXJlci5jcmVhdGVHcm91cCh7XG4gICAgICAgICAgICAgICAgJ2lkJzogc3ltYm9sSWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnQub3V0bGllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IGhlbHBlcl8yLmdldFBvaW50KHBvaW50LnhWYWx1ZSwgcG9pbnQub3V0bGllcnNbaV0sIHNlcmllcy54QXhpcywgc2VyaWVzLnlBeGlzLCBzZXJpZXMuY2hhcnQucmVxdWlyZUludmVydGVkQXhpcyk7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IG5ldyBoZWxwZXJfMi5TaXplKHNlcmllcy5tYXJrZXIud2lkdGgsIHNlcmllcy5tYXJrZXIuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbnMucHVzaChsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUaXBTaXplKHNlcmllcywgcG9pbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogbG9jYXRpb24ueCAtIChzaXplLndpZHRoIC8gMiksIHk6IGxvY2F0aW9uLnkgLSAoc2l6ZS5oZWlnaHQgLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNpemUud2lkdGgsIGhlaWdodDogc2l6ZS5oZWlnaHRcbiAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5zZXJpZXNFbGVtZW50LmFwcGVuZENoaWxkKHBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBCb3hBbmRXaGlza2VyU2VyaWVzLnByb3RvdHlwZS5maW5kQm94UGxvdFZhbHVlcyA9IGZ1bmN0aW9uICh5VmFsdWVzLCBwb2ludCwgbW9kZSkge1xuICAgICAgICAgICAgdmFyIHlDb3VudCA9IHlWYWx1ZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHF1YXJ0aWxlID0ge1xuICAgICAgICAgICAgICAgIGF2ZXJhZ2U6IGhlbHBlcl8xLnN1bSh5VmFsdWVzKSAvIHlDb3VudCxcbiAgICAgICAgICAgICAgICBsb3dlclF1YXJ0aWxlOiAwLCB1cHBlclF1YXJ0aWxlOiAwLFxuICAgICAgICAgICAgICAgIG1heGltdW06IDAsIG1pbmltdW06IDAsXG4gICAgICAgICAgICAgICAgbWVkaWFuOiAwLCBvdXRsaWVyczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ0V4Y2x1c2l2ZScpIHtcbiAgICAgICAgICAgICAgICBxdWFydGlsZS5sb3dlclF1YXJ0aWxlID0gdGhpcy5nZXRFeGNsdXNpdmVRdWFydGlsZVZhbHVlKHlWYWx1ZXMsIHlDb3VudCwgMC4yNSk7XG4gICAgICAgICAgICAgICAgcXVhcnRpbGUudXBwZXJRdWFydGlsZSA9IHRoaXMuZ2V0RXhjbHVzaXZlUXVhcnRpbGVWYWx1ZSh5VmFsdWVzLCB5Q291bnQsIDAuNzUpO1xuICAgICAgICAgICAgICAgIHF1YXJ0aWxlLm1lZGlhbiA9IHRoaXMuZ2V0RXhjbHVzaXZlUXVhcnRpbGVWYWx1ZSh5VmFsdWVzLCB5Q291bnQsIDAuNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnSW5jbHVzaXZlJykge1xuICAgICAgICAgICAgICAgIHF1YXJ0aWxlLmxvd2VyUXVhcnRpbGUgPSB0aGlzLmdldEluY2x1c2l2ZVF1YXJ0aWxlVmFsdWUoeVZhbHVlcywgeUNvdW50LCAwLjI1KTtcbiAgICAgICAgICAgICAgICBxdWFydGlsZS51cHBlclF1YXJ0aWxlID0gdGhpcy5nZXRJbmNsdXNpdmVRdWFydGlsZVZhbHVlKHlWYWx1ZXMsIHlDb3VudCwgMC43NSk7XG4gICAgICAgICAgICAgICAgcXVhcnRpbGUubWVkaWFuID0gdGhpcy5nZXRJbmNsdXNpdmVRdWFydGlsZVZhbHVlKHlWYWx1ZXMsIHlDb3VudCwgMC41KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1YXJ0aWxlLm1lZGlhbiA9IGhlbHBlcl8zLmdldE1lZGlhbih5VmFsdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFF1YXJ0aWxlVmFsdWVzKHlWYWx1ZXMsIHlDb3VudCwgcXVhcnRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5nZXRNaW5NYXhPdXRsaWVyKHlWYWx1ZXMsIHlDb3VudCwgcXVhcnRpbGUpO1xuICAgICAgICAgICAgcG9pbnQubWluaW11bSA9IHF1YXJ0aWxlLm1pbmltdW07XG4gICAgICAgICAgICBwb2ludC5tYXhpbXVtID0gcXVhcnRpbGUubWF4aW11bTtcbiAgICAgICAgICAgIHBvaW50Lmxvd2VyUXVhcnRpbGUgPSBxdWFydGlsZS5sb3dlclF1YXJ0aWxlO1xuICAgICAgICAgICAgcG9pbnQudXBwZXJRdWFydGlsZSA9IHF1YXJ0aWxlLnVwcGVyUXVhcnRpbGU7XG4gICAgICAgICAgICBwb2ludC5tZWRpYW4gPSBxdWFydGlsZS5tZWRpYW47XG4gICAgICAgICAgICBwb2ludC5vdXRsaWVycyA9IHF1YXJ0aWxlLm91dGxpZXJzO1xuICAgICAgICAgICAgcG9pbnQuYXZlcmFnZSA9IHF1YXJ0aWxlLmF2ZXJhZ2U7XG4gICAgICAgIH07XG4gICAgICAgIEJveEFuZFdoaXNrZXJTZXJpZXMucHJvdG90eXBlLmdldEV4Y2x1c2l2ZVF1YXJ0aWxlVmFsdWUgPSBmdW5jdGlvbiAoeVZhbHVlcywgY291bnQsIHBlcmNlbnRpbGUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geVZhbHVlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgICAgICB2YXIgcmFuayA9IHBlcmNlbnRpbGUgKiAoY291bnQgKyAxKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ2VyUmFuayA9IE1hdGguZmxvb3IoTWF0aC5hYnMocmFuaykpO1xuICAgICAgICAgICAgdmFyIGZyYWN0aW9uUmFuayA9IHJhbmsgLSBpbnRlZ2VyUmFuaztcbiAgICAgICAgICAgIGlmIChpbnRlZ2VyUmFuayA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0geVZhbHVlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGludGVnZXJSYW5rID4gY291bnQgLSAxKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB5VmFsdWVzW2NvdW50IC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZyYWN0aW9uUmFuayAqICh5VmFsdWVzW2ludGVnZXJSYW5rXSAtIHlWYWx1ZXNbaW50ZWdlclJhbmsgLSAxXSkgKyB5VmFsdWVzW2ludGVnZXJSYW5rIC0gMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIEJveEFuZFdoaXNrZXJTZXJpZXMucHJvdG90eXBlLmdldEluY2x1c2l2ZVF1YXJ0aWxlVmFsdWUgPSBmdW5jdGlvbiAoeVZhbHVlcywgY291bnQsIHBlcmNlbnRpbGUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geVZhbHVlc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgICAgICB2YXIgcmFuayA9IHBlcmNlbnRpbGUgKiAoY291bnQgLSAxKTtcbiAgICAgICAgICAgIHZhciBpbnRlZ2VyUmFuayA9IE1hdGguZmxvb3IoTWF0aC5hYnMocmFuaykpO1xuICAgICAgICAgICAgdmFyIGZyYWN0aW9uUmFuayA9IHJhbmsgLSBpbnRlZ2VyUmFuaztcbiAgICAgICAgICAgIHZhbHVlID0gZnJhY3Rpb25SYW5rICogKHlWYWx1ZXNbaW50ZWdlclJhbmsgKyAxXSAtIHlWYWx1ZXNbaW50ZWdlclJhbmtdKSArIHlWYWx1ZXNbaW50ZWdlclJhbmtdO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBCb3hBbmRXaGlza2VyU2VyaWVzLnByb3RvdHlwZS5nZXRRdWFydGlsZVZhbHVlcyA9IGZ1bmN0aW9uICh5VmFsdWVzLCBjb3VudCwgcXVhcnRpbGUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHF1YXJ0aWxlLmxvd2VyUXVhcnRpbGUgPSB5VmFsdWVzWzBdO1xuICAgICAgICAgICAgICAgIHF1YXJ0aWxlLnVwcGVyUXVhcnRpbGUgPSB5VmFsdWVzWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzRXZlbkxpc3QgPSBjb3VudCAlIDIgPT09IDA7XG4gICAgICAgICAgICB2YXIgaGFsZkxlbmd0aCA9IGNvdW50IC8gMjtcbiAgICAgICAgICAgIHZhciBsb3dlclF1YXJ0aWxlQXJyYXkgPSB5VmFsdWVzLnNsaWNlKDAsIGhhbGZMZW5ndGgpO1xuICAgICAgICAgICAgdmFyIHVwcGVyUXVhcnRpbGVBcnJheSA9IHlWYWx1ZXMuc2xpY2UoaXNFdmVuTGlzdCA/IGhhbGZMZW5ndGggOiBoYWxmTGVuZ3RoICsgMSwgY291bnQpO1xuICAgICAgICAgICAgcXVhcnRpbGUubG93ZXJRdWFydGlsZSA9IGhlbHBlcl8zLmdldE1lZGlhbihsb3dlclF1YXJ0aWxlQXJyYXkpO1xuICAgICAgICAgICAgcXVhcnRpbGUudXBwZXJRdWFydGlsZSA9IGhlbHBlcl8zLmdldE1lZGlhbih1cHBlclF1YXJ0aWxlQXJyYXkpO1xuICAgICAgICB9O1xuICAgICAgICBCb3hBbmRXaGlza2VyU2VyaWVzLnByb3RvdHlwZS5nZXRNaW5NYXhPdXRsaWVyID0gZnVuY3Rpb24gKHlWYWx1ZXMsIGNvdW50LCBxdWFydGlsZSkge1xuICAgICAgICAgICAgdmFyIGludGVycXVhcnRpbGUgPSBxdWFydGlsZS51cHBlclF1YXJ0aWxlIC0gcXVhcnRpbGUubG93ZXJRdWFydGlsZTtcbiAgICAgICAgICAgIHZhciByYW5nZUlRUiA9IDEuNSAqIGludGVycXVhcnRpbGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoeVZhbHVlc1tpXSA8IHF1YXJ0aWxlLmxvd2VyUXVhcnRpbGUgLSByYW5nZUlRUikge1xuICAgICAgICAgICAgICAgICAgICBxdWFydGlsZS5vdXRsaWVycy5wdXNoKHlWYWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVhcnRpbGUubWluaW11bSA9IHlWYWx1ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKHlWYWx1ZXNbaV0gPiBxdWFydGlsZS51cHBlclF1YXJ0aWxlICsgcmFuZ2VJUVIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVhcnRpbGUub3V0bGllcnMucHVzaCh5VmFsdWVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHF1YXJ0aWxlLm1heGltdW0gPSB5VmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEJveEFuZFdoaXNrZXJTZXJpZXMucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlKHNlcmllcyk7XG4gICAgICAgIH07XG4gICAgICAgIEJveEFuZFdoaXNrZXJTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0JveEFuZFdoaXNrZXJTZXJpZXMnO1xuICAgICAgICB9O1xuICAgICAgICBCb3hBbmRXaGlza2VyU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBCb3hBbmRXaGlza2VyU2VyaWVzO1xuICAgIH0oY29sdW1uX2Jhc2VfMS5Db2x1bW5CYXNlKSk7XG4gICAgZXhwb3J0cy5Cb3hBbmRXaGlza2VyU2VyaWVzID0gQm94QW5kV2hpc2tlclNlcmllcztcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY2hhcnQvc2VyaWVzL2JveC1hbmQtd2hpc2tlci1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vYWNjdW11bGF0aW9uXCIsIFwiLi9tb2RlbC9hY2MtYmFzZVwiLCBcIi4vcmVuZGVyZXIvcGllLXNlcmllc1wiLCBcIi4vcmVuZGVyZXIvZnVubmVsLXNlcmllc1wiLCBcIi4vcmVuZGVyZXIvcHlyYW1pZC1zZXJpZXNcIiwgXCIuL3JlbmRlcmVyL2xlZ2VuZFwiLCBcIi4vcmVuZGVyZXIvZGF0YUxhYmVsXCIsIFwiLi91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXBcIiwgXCIuL3VzZXItaW50ZXJhY3Rpb24vc2VsZWN0aW9uXCIsIFwiLi9hbm5vdGF0aW9uL2Fubm90YXRpb25cIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBhY2N1bXVsYXRpb25fMSwgYWNjX2Jhc2VfMSwgcGllX3Nlcmllc18xLCBmdW5uZWxfc2VyaWVzXzEsIHB5cmFtaWRfc2VyaWVzXzEsIGxlZ2VuZF8xLCBkYXRhTGFiZWxfMSwgdG9vbHRpcF8xLCBzZWxlY3Rpb25fMSwgYW5ub3RhdGlvbl8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChhY2N1bXVsYXRpb25fMSk7XG4gICAgX19leHBvcnQoYWNjX2Jhc2VfMSk7XG4gICAgX19leHBvcnQocGllX3Nlcmllc18xKTtcbiAgICBfX2V4cG9ydChmdW5uZWxfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KHB5cmFtaWRfc2VyaWVzXzEpO1xuICAgIF9fZXhwb3J0KGxlZ2VuZF8xKTtcbiAgICBfX2V4cG9ydChkYXRhTGFiZWxfMSk7XG4gICAgX19leHBvcnQodG9vbHRpcF8xKTtcbiAgICBfX2V4cG9ydChzZWxlY3Rpb25fMSk7XG4gICAgX19leHBvcnQoYW5ub3RhdGlvbl8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4vdHJpYW5ndWxhci1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgdHJpYW5ndWxhcl9iYXNlXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIFB5cmFtaWRTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUHlyYW1pZFNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUHlyYW1pZFNlcmllcygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICBQeXJhbWlkU2VyaWVzLnByb3RvdHlwZS5nZXRTZWdtZW50RGF0YSA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBjaGFydCkge1xuICAgICAgICAgICAgdmFyIGFyZWEgPSBzZXJpZXMudHJpYW5nbGVTaXplO1xuICAgICAgICAgICAgdmFyIHNlcmllc1RvcCA9IGNoYXJ0LmluaXRpYWxDbGlwUmVjdC55ICsgKGNoYXJ0LmluaXRpYWxDbGlwUmVjdC5oZWlnaHQgLSBhcmVhLmhlaWdodCkgLyAyO1xuICAgICAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgZXh0cmFTcGFjZSA9IChjaGFydC5pbml0aWFsQ2xpcFJlY3Qud2lkdGggLSBzZXJpZXMudHJpYW5nbGVTaXplLndpZHRoKSAvIDI7XG4gICAgICAgICAgICB2YXIgZW1wdHlTcGFjZUF0TGVmdCA9IGV4dHJhU3BhY2UgKyBjaGFydC5pbml0aWFsQ2xpcFJlY3QueDtcbiAgICAgICAgICAgIHZhciB0b3AgPSBwb2ludC55UmF0aW87XG4gICAgICAgICAgICB2YXIgYm90dG9tID0gcG9pbnQueVJhdGlvICsgcG9pbnQuaGVpZ2h0UmF0aW87XG4gICAgICAgICAgICB2YXIgdG9wUmFkaXVzID0gMC41ICogKDEgLSBwb2ludC55UmF0aW8pO1xuICAgICAgICAgICAgdmFyIGJvdHRvbVJhZGl1cyA9IDAuNSAqICgxIC0gYm90dG9tKTtcbiAgICAgICAgICAgIHRvcCArPSBzZXJpZXNUb3AgLyBhcmVhLmhlaWdodDtcbiAgICAgICAgICAgIGJvdHRvbSArPSBzZXJpZXNUb3AgLyBhcmVhLmhlaWdodDtcbiAgICAgICAgICAgIHZhciBsaW5lMSA9IHtcbiAgICAgICAgICAgICAgICB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgdG9wUmFkaXVzICogYXJlYS53aWR0aCxcbiAgICAgICAgICAgICAgICB5OiB0b3AgKiBhcmVhLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5lMiA9IHtcbiAgICAgICAgICAgICAgICB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgKDEgLSB0b3BSYWRpdXMpICogYXJlYS53aWR0aCxcbiAgICAgICAgICAgICAgICB5OiB0b3AgKiBhcmVhLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5lMyA9IHtcbiAgICAgICAgICAgICAgICB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgKDEgLSBib3R0b21SYWRpdXMpICogYXJlYS53aWR0aCxcbiAgICAgICAgICAgICAgICB5OiBib3R0b20gKiBhcmVhLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBsaW5lNCA9IHtcbiAgICAgICAgICAgICAgICB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgYm90dG9tUmFkaXVzICogYXJlYS53aWR0aCxcbiAgICAgICAgICAgICAgICB5OiBib3R0b20gKiBhcmVhLmhlaWdodFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBwb2x5Z29uID0gW2xpbmUxLCBsaW5lMiwgbGluZTMsIGxpbmU0XTtcbiAgICAgICAgICAgIHRoaXMuc2V0TGFiZWxMb2NhdGlvbihzZXJpZXMsIHBvaW50LCBwb2x5Z29uKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmZpbmRQYXRoKHBvbHlnb24pO1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgUHlyYW1pZFNlcmllcy5wcm90b3R5cGUuaW5pdGlhbGl6ZVNpemVSYXRpbyA9IGZ1bmN0aW9uIChwb2ludHMsIHNlcmllcykge1xuICAgICAgICAgICAgaWYgKHNlcmllcy5weXJhbWlkTW9kZSA9PT0gJ0xpbmVhcicpIHtcbiAgICAgICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmluaXRpYWxpemVTaXplUmF0aW8uY2FsbCh0aGlzLCBwb2ludHMsIHNlcmllcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVN1cmZhY2VTZWdtZW50cyhzZXJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQeXJhbWlkU2VyaWVzLnByb3RvdHlwZS5jYWxjdWxhdGVTdXJmYWNlU2VnbWVudHMgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSBzZXJpZXMucG9pbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBzdW1PZlZhbHVlcyA9IHNlcmllcy5zdW1PZlBvaW50cztcbiAgICAgICAgICAgIHZhciB5UmF0aW8gPSAwO1xuICAgICAgICAgICAgdmFyIHkgPSBbXTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBbXTtcbiAgICAgICAgICAgIHZhciBnYXBSYXRpbyA9IE1hdGgubWluKDAsIE1hdGgubWF4KHNlcmllcy5nYXBSYXRpbywgMSkpO1xuICAgICAgICAgICAgdmFyIGdhcEhlaWdodCA9IGdhcFJhdGlvIC8gKGNvdW50IC0gMSk7XG4gICAgICAgICAgICB2YXIgcHJlU3VtID0gdGhpcy5nZXRTdXJmYWNlSGVpZ2h0KDAsIHN1bU9mVmFsdWVzKTtcbiAgICAgICAgICAgIHZhciBjdXJyWSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnBvaW50c1tpXS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHlbaV0gPSBjdXJyWTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0W2ldID0gdGhpcy5nZXRTdXJmYWNlSGVpZ2h0KGN1cnJZLCBNYXRoLmFicyhzZXJpZXMucG9pbnRzW2ldLnkpKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyclkgKz0gaGVpZ2h0W2ldICsgZ2FwSGVpZ2h0ICogcHJlU3VtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb2VmID0gMSAvIChjdXJyWSAtIGdhcEhlaWdodCAqIHByZVN1bSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnBvaW50c1tpXS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb2ludHNbaV0ueVJhdGlvID0gY29lZiAqIHlbaV07XG4gICAgICAgICAgICAgICAgICAgIHNlcmllcy5wb2ludHNbaV0uaGVpZ2h0UmF0aW8gPSBjb2VmICogaGVpZ2h0W2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUHlyYW1pZFNlcmllcy5wcm90b3R5cGUuZ2V0U3VyZmFjZUhlaWdodCA9IGZ1bmN0aW9uICh5LCBzdXJmYWNlKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zb2x2ZVF1YWRyYXRpY0VxdWF0aW9uKDEsIDIgKiB5LCAtc3VyZmFjZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBQeXJhbWlkU2VyaWVzLnByb3RvdHlwZS5zb2x2ZVF1YWRyYXRpY0VxdWF0aW9uID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgICAgIHZhciByb290MTtcbiAgICAgICAgICAgIHZhciByb290MjtcbiAgICAgICAgICAgIHZhciBkID0gYiAqIGIgLSA0ICogYSAqIGM7XG4gICAgICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNkID0gTWF0aC5zcXJ0KGQpO1xuICAgICAgICAgICAgICAgIHJvb3QxID0gKC1iIC0gc2QpIC8gKDIgKiBhKTtcbiAgICAgICAgICAgICAgICByb290MiA9ICgtYiArIHNkKSAvICgyICogYSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHJvb3QxLCByb290Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfTtcbiAgICAgICAgUHlyYW1pZFNlcmllcy5wcm90b3R5cGUucmVuZGVyUG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIHNlcmllcywgY2hhcnQsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmdldFNlZ21lbnREYXRhKHBvaW50LCBzZXJpZXMsIGNoYXJ0KTtcbiAgICAgICAgICAgIHBvaW50Lm1pZEFuZ2xlID0gMDtcbiAgICAgICAgICAgIG9wdGlvbnMuZCA9IGRpcmVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgUHlyYW1pZFNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUHlyYW1pZFNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIFB5cmFtaWRTZXJpZXMucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQeXJhbWlkU2VyaWVzO1xuICAgIH0odHJpYW5ndWxhcl9iYXNlXzEuVHJpYW5ndWxhckJhc2UpKTtcbiAgICBleHBvcnRzLlB5cmFtaWRTZXJpZXMgPSBQeXJhbWlkU2VyaWVzO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvcHlyYW1pZC1zZXJpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vYWNjdW11bGF0aW9uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBoZWxwZXJfMSwgYWNjdW11bGF0aW9uX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgVHJpYW5ndWxhckJhc2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoVHJpYW5ndWxhckJhc2UsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFRyaWFuZ3VsYXJCYXNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFRyaWFuZ3VsYXJCYXNlLnByb3RvdHlwZS5pbml0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChjaGFydCwgc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgYWN0dWFsQ2hhcnRBcmVhID0gY2hhcnQuaW5pdGlhbENsaXBSZWN0O1xuICAgICAgICAgICAgc2VyaWVzLnRyaWFuZ2xlU2l6ZSA9IG5ldyBoZWxwZXJfMS5TaXplKGhlbHBlcl8xLnN0cmluZ1RvTnVtYmVyKHNlcmllcy53aWR0aCwgYWN0dWFsQ2hhcnRBcmVhLndpZHRoKSwgaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLmhlaWdodCwgYWN0dWFsQ2hhcnRBcmVhLmhlaWdodCkpO1xuICAgICAgICAgICAgc2VyaWVzLm5lY2tTaXplID0gbmV3IGhlbHBlcl8xLlNpemUoaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLm5lY2tXaWR0aCwgYWN0dWFsQ2hhcnRBcmVhLndpZHRoKSwgaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLm5lY2tIZWlnaHQsIGFjdHVhbENoYXJ0QXJlYS5oZWlnaHQpKTtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdExhYmVsQm91bmQoc2VyaWVzLCBzZXJpZXMuZGF0YUxhYmVsLnZpc2libGUsIHNlcmllcy5kYXRhTGFiZWwucG9zaXRpb24sIGNoYXJ0KTtcbiAgICAgICAgICAgIGlmIChzZXJpZXMuZXhwbG9kZU9mZnNldCA9PT0gJzMwJScpIHtcbiAgICAgICAgICAgICAgICBzZXJpZXMuZXhwbG9kZU9mZnNldCA9ICcyNXB4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoYXJ0LmV4cGxvZGVEaXN0YW5jZSA9IGhlbHBlcl8xLnN0cmluZ1RvTnVtYmVyKHNlcmllcy5leHBsb2RlT2Zmc2V0LCBhY3R1YWxDaGFydEFyZWEud2lkdGgpO1xuICAgICAgICAgICAgdmFyIHBvaW50cyA9IHNlcmllcy5wb2ludHM7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTaXplUmF0aW8ocG9pbnRzLCBzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBUcmlhbmd1bGFyQmFzZS5wcm90b3R5cGUuaW5pdGlhbGl6ZVNpemVSYXRpbyA9IGZ1bmN0aW9uIChwb2ludHMsIHNlcmllcywgcmV2ZXJzZSkge1xuICAgICAgICAgICAgaWYgKHJldmVyc2UgPT09IHZvaWQgMCkgeyByZXZlcnNlID0gZmFsc2U7IH1cbiAgICAgICAgICAgIHZhciBzdW1PZlBvaW50cyA9IHNlcmllcy5zdW1PZlBvaW50cztcbiAgICAgICAgICAgIHZhciBnYXBSYXRpbyA9IE1hdGgubWluKE1hdGgubWF4KHNlcmllcy5nYXBSYXRpbywgMCksIDEpO1xuICAgICAgICAgICAgdmFyIGNvRWZmID0gMSAvIChzdW1PZlBvaW50cyAqICgxICsgZ2FwUmF0aW8gLyAoMSAtIGdhcFJhdGlvKSkpO1xuICAgICAgICAgICAgdmFyIHNwYWNpbmcgPSBnYXBSYXRpbyAvIChwb2ludHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB2YXIgeSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcmV2ZXJzZSA/IHBvaW50cy5sZW5ndGggLSAxIC0gaSA6IGk7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpbmRleF0udmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gY29FZmYgKiBwb2ludHNbaW5kZXhdLnk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50c1tpbmRleF0ueVJhdGlvID0geTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzW2luZGV4XS5oZWlnaHRSYXRpbyA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgeSArPSBoZWlnaHQgKyBzcGFjaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVHJpYW5ndWxhckJhc2UucHJvdG90eXBlLnNldExhYmVsTG9jYXRpb24gPSBmdW5jdGlvbiAoc2VyaWVzLCBwb2ludCwgcG9pbnRzKSB7XG4gICAgICAgICAgICB2YXIgbGFzdCA9IHBvaW50cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgdmFyIGJvdHRvbSA9IHNlcmllcy50eXBlID09PSAnRnVubmVsJyA/IHBvaW50cy5sZW5ndGggLSAyIDogcG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgeCA9IChwb2ludHNbMF0ueCArIHBvaW50c1tib3R0b21dLngpIC8gMjtcbiAgICAgICAgICAgIHZhciByaWdodCA9IChwb2ludHNbMV0ueCArIHBvaW50c1tib3R0b20gLSAxXS54KSAvIDI7XG4gICAgICAgICAgICBwb2ludC5yZWdpb24gPSBuZXcgaGVscGVyXzEuUmVjdCh4LCBwb2ludHNbMF0ueSwgcmlnaHQgLSB4LCBwb2ludHNbYm90dG9tXS55IC0gcG9pbnRzWzBdLnkpO1xuICAgICAgICAgICAgcG9pbnQuc3ltYm9sTG9jYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgeDogcG9pbnQucmVnaW9uLnggKyBwb2ludC5yZWdpb24ud2lkdGggLyAyLFxuICAgICAgICAgICAgICAgIHk6IHBvaW50LnJlZ2lvbi55ICsgcG9pbnQucmVnaW9uLmhlaWdodCAvIDJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwb2ludC5sYWJlbE9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICB4OiBwb2ludC5zeW1ib2xMb2NhdGlvbi54IC0gKHBvaW50c1swXS54ICsgcG9pbnRzW2xhc3RdLngpIC8gMixcbiAgICAgICAgICAgICAgICB5OiBwb2ludC5zeW1ib2xMb2NhdGlvbi55IC0gKHBvaW50c1swXS55ICsgcG9pbnRzW2xhc3RdLnkpIC8gMlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJpYW5ndWxhckJhc2UucHJvdG90eXBlLmZpbmRQYXRoID0gZnVuY3Rpb24gKGxvY2F0aW9ucykge1xuICAgICAgICAgICAgdmFyIHBhdGggPSAnTSc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhdGggKz0gbG9jYXRpb25zW2ldLnggKyAnICcgKyBsb2NhdGlvbnNbaV0ueTtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gbG9jYXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSAnIEwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICB9O1xuICAgICAgICBUcmlhbmd1bGFyQmFzZS5wcm90b3R5cGUuZGVmYXVsdExhYmVsQm91bmQgPSBmdW5jdGlvbiAoc2VyaWVzLCB2aXNpYmxlLCBwb3NpdGlvbiwgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gKGNoYXJ0LmluaXRpYWxDbGlwUmVjdC53aWR0aCAtIHNlcmllcy50cmlhbmdsZVNpemUud2lkdGgpIC8gMjtcbiAgICAgICAgICAgIHZhciB5ID0gKGNoYXJ0LmluaXRpYWxDbGlwUmVjdC5oZWlnaHQgLSBzZXJpZXMudHJpYW5nbGVTaXplLmhlaWdodCkgLyAyO1xuICAgICAgICAgICAgdmFyIGFjY3VtdWxhdGlvbkJvdW5kID0gbmV3IGhlbHBlcl8xLlJlY3QoeCwgeSwgc2VyaWVzLnRyaWFuZ2xlU2l6ZS53aWR0aCwgc2VyaWVzLnRyaWFuZ2xlU2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgc2VyaWVzLmxhYmVsQm91bmQgPSBuZXcgaGVscGVyXzEuUmVjdChhY2N1bXVsYXRpb25Cb3VuZC54LCBhY2N1bXVsYXRpb25Cb3VuZC55LCBhY2N1bXVsYXRpb25Cb3VuZC53aWR0aCArIGFjY3VtdWxhdGlvbkJvdW5kLngsIGFjY3VtdWxhdGlvbkJvdW5kLmhlaWdodCArIGFjY3VtdWxhdGlvbkJvdW5kLnkpO1xuICAgICAgICAgICAgc2VyaWVzLmFjY3VtdWxhdGlvbkJvdW5kID0gYWNjdW11bGF0aW9uQm91bmQ7XG4gICAgICAgICAgICBpZiAodmlzaWJsZSAmJiBwb3NpdGlvbiA9PT0gJ091dHNpZGUnKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmxhYmVsQm91bmQgPSBuZXcgaGVscGVyXzEuUmVjdChJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFRyaWFuZ3VsYXJCYXNlO1xuICAgIH0oYWNjdW11bGF0aW9uX2Jhc2VfMS5BY2N1bXVsYXRpb25CYXNlKSk7XG4gICAgZXhwb3J0cy5Ucmlhbmd1bGFyQmFzZSA9IFRyaWFuZ3VsYXJCYXNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvdHJpYW5ndWxhci1iYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi9tb2RlbC9hY2MtYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGVqMl9iYXNlXzEsIGhlbHBlcl8xLCBhY2NfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBY2N1bXVsYXRpb25CYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gQWNjdW11bGF0aW9uQmFzZShhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uID0gYWNjdW11bGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZSwgXCJjZW50ZXJcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGllQ2VudGVyIHx8ICh0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLnR5cGUgPT09ICdQaWUnID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24ucGllU2VyaWVzTW9kdWxlLmNlbnRlciA6IG51bGwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waWVDZW50ZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUsIFwicmFkaXVzXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBpZVJhZGl1cyAhPT0gdW5kZWZpbmVkID8gdGhpcy5waWVSYWRpdXMgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbi5waWVTZXJpZXNNb2R1bGUucmFkaXVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waWVSYWRpdXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUsIFwibGFiZWxSYWRpdXNcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGllTGFiZWxSYWRpdXMgIT09IHVuZGVmaW5lZCA/IHRoaXMucGllTGFiZWxSYWRpdXMgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbi5waWVTZXJpZXNNb2R1bGUubGFiZWxSYWRpdXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpZUxhYmVsUmFkaXVzID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUuaXNDaXJjdWxhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY3VtdWxhdGlvbi50eXBlID09PSAnUGllJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUuZ2V0VG9vbHRpcFBvaW50ID0gZnVuY3Rpb24gKGUsIGFjY3VtdWxhdGlvbiwgeCwgeSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgdGFyZ2V0ID0gYWNjdW11bGF0aW9uLmlzVG91Y2ggPyBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHgsIHkpIDogdGFyZ2V0O1xuICAgICAgICAgICAgdmFyIGlkID0gdGFyZ2V0LmlkLnNwbGl0KGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyk7XG4gICAgICAgICAgICBpZiAoaWRbMV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzSW5kZXggPSBwYXJzZUludChpZFsxXS5zcGxpdCgnX1BvaW50XycpWzBdLCAxMCk7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50SW5kZXggPSBwYXJzZUludChpZFsxXS5zcGxpdCgnX1BvaW50XycpWzFdLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHNlcmllc0luZGV4KSAmJiAhaXNOYU4oc2VyaWVzSW5kZXgpICYmICFlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50SW5kZXgpICYmICFpc05hTihwb2ludEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5nZXRTZXJpZXNGcm9tSW5kZXgoc2VyaWVzSW5kZXgsIGFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllcy5lbmFibGVUb29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uVG9vbHRpcE1vZHVsZS5yZW5kZXJUb29sdGlwKHNlcmllcy5wb2ludHNbcG9pbnRJbmRleF0sIHNlcmllcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uVG9vbHRpcE1vZHVsZSAmJiBhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uVG9vbHRpcE1vZHVsZS50b29sdGlwICYmICF0aGlzLmlzRGF0YUxhYmVsKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uVG9vbHRpcE1vZHVsZS50b29sdGlwLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkJhc2UucHJvdG90eXBlLmlzRGF0YUxhYmVsID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5pZC5pbmRleE9mKHRoaXMuYWNjdW11bGF0aW9uLmVsZW1lbnQuaWQgKyAnX2RhdGFsYWJlbF9TZXJpZXNfJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZS5nZXRTZXJpZXNGcm9tSW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIHZpc2libGVTZXJpZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB2aXNpYmxlU2VyaWVzWzBdO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZS5wcm9jZXNzRXhwbG9kZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5pZC5pbmRleE9mKCdfU2VyaWVzXycpID4gLTEgfHwgZXZlbnQudGFyZ2V0LmlkLmluZGV4T2YoJ19kYXRhbGFiZWxfJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludEluZGV4ID0gYWNjX2Jhc2VfMS5pbmRleEZpbmRlcihldmVudC50YXJnZXQuaWQpLnBvaW50O1xuICAgICAgICAgICAgICAgIGlmIChpc05hTihwb2ludEluZGV4KSB8fCAoZXZlbnQudGFyZ2V0LmlkLmluZGV4T2YoJ19kYXRhbGFiZWxfJykgPiAtMSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLnBvaW50c1twb2ludEluZGV4XS5sYWJlbFBvc2l0aW9uID09PSAnT3V0c2lkZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmV4cGxvZGVQb2ludHMocG9pbnRJbmRleCwgdGhpcy5hY2N1bXVsYXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVFeHBsb2RlQWxsKHBvaW50SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZS5pbnZva2VFeHBsb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0uZXhwbG9kZUFsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLnBvaW50czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGxvZGVQb2ludHMocG9pbnQuaW5kZXgsIHRoaXMuYWNjdW11bGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZCh0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLmV4cGxvZGVJbmRleCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGxvZGVQb2ludHModGhpcy5hY2N1bXVsYXRpb24udmlzaWJsZVNlcmllc1swXS5leHBsb2RlSW5kZXgsIHRoaXMuYWNjdW11bGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvbi5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUgJiYgdGhpcy5hY2N1bXVsYXRpb24uc2VsZWN0aW9uTW9kZSAhPT0gJ05vbmUnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkRGF0YUluZGV4ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMuYWNjdW11bGF0aW9uLmFjY3VtdWxhdGlvblNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfY1tfYl07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwbG9kZVBvaW50cyhpbmRleC5wb2ludCwgdGhpcy5hY2N1bXVsYXRpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlRXhwbG9kZUFsbChpbmRleC5wb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZS5kZUV4cGxvZGVBbGwgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwb2ludElkID0gdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfU2VyaWVzXzBfUG9pbnRfJztcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSB0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLnBvaW50cztcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcG9pbnRzXzEgPSBwb2ludHM7IF9pIDwgcG9pbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludCA9IHBvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IGN1cnJlbnRQb2ludC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlRXhwbG9kZVNsaWNlKGN1cnJlbnRQb2ludC5pbmRleCwgcG9pbnRJZCwgdGhpcy5jZW50ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUuZXhwbG9kZVBvaW50cyA9IGZ1bmN0aW9uIChpbmRleCwgY2hhcnQsIGV4cGxvZGUpIHtcbiAgICAgICAgICAgIGlmIChleHBsb2RlID09PSB2b2lkIDApIHsgZXhwbG9kZSA9IGZhbHNlOyB9XG4gICAgICAgICAgICB2YXIgcG9pbnRJZCA9IHRoaXMuYWNjdW11bGF0aW9uLmVsZW1lbnQuaWQgKyAnX1Nlcmllc18wX1BvaW50Xyc7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlO1xuICAgICAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0ucG9pbnRzO1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gYWNjX2Jhc2VfMS5wb2ludEJ5SW5kZXgoaW5kZXgsIHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0ucG9pbnRzKTtcbiAgICAgICAgICAgIGlmIChlajJfYmFzZV8xLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2lyY3VsYXIoKSkge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IHsgeDogY2hhcnQuZXhwbG9kZURpc3RhbmNlLCB5OiAwIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGUgPSBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKHBvaW50Lm1pZEFuZ2xlLCBjaGFydC5leHBsb2RlRGlzdGFuY2UsIHRoaXMuY2VudGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwbG9kZShwb2ludElkICsgaW5kZXgpIHx8IGV4cGxvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGxvZGVTbGljZShpbmRleCwgdHJhbnNsYXRlLCBwb2ludElkLCB0aGlzLmNlbnRlciB8fCB7IHg6IDAsIHk6IDAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlRXhwbG9kZVNsaWNlKGluZGV4LCBwb2ludElkLCB0aGlzLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkJhc2UucHJvdG90eXBlLmlzRXhwbG9kZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBoZWxwZXJfMS5nZXRFbGVtZW50KGlkKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICYmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykgPT09ICd0cmFuc2xhdGUoMCwgMCknIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nKSA9PT0gJ3RyYW5zbGF0ZSgwKScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkJhc2UucHJvdG90eXBlLmRlRXhwbG9kZVNsaWNlID0gZnVuY3Rpb24gKGluZGV4LCBzbGljZUlkLCBjZW50ZXIpIHtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICd0cmFuc2xhdGUoMCwgMCknO1xuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoaW5kZXgsIHNsaWNlSWQsIHBvc2l0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQmFzZS5wcm90b3R5cGUuc2V0VHJhbnNsYXRlID0gZnVuY3Rpb24gKGluZGV4LCBzbGljZUlkLCBwb3NpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VHJhbnNmb3JtKHNsaWNlSWQgKyBpbmRleCwgcG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0uZGF0YUxhYmVsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBzbGljZUlkID0gdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfZGF0YWxhYmVsX1Nlcmllc18wXyc7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VHJhbnNmb3JtKHNsaWNlSWQgKyAnc2hhcGVfJyArIGluZGV4LCBwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50VHJhbnNmb3JtKHNsaWNlSWQgKyAndGV4dF8nICsgaW5kZXgsIHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRUcmFuc2Zvcm0oc2xpY2VJZCArICdjb25uZWN0b3JfJyArIGluZGV4LCBwb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkJhc2UucHJvdG90eXBlLnNldEVsZW1lbnRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoaWQsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGhlbHBlcl8xLmdldEVsZW1lbnQoaWQpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgcG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25CYXNlLnByb3RvdHlwZS5leHBsb2RlU2xpY2UgPSBmdW5jdGlvbiAoaW5kZXgsIHRyYW5zbGF0ZSwgc2xpY2VJZCwgY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAndHJhbnNsYXRlKCcgKyAodHJhbnNsYXRlLnggLSBjZW50ZXIueCkgKyAnLCAnICsgKHRyYW5zbGF0ZS55IC0gY2VudGVyLnkpICsgJyknO1xuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoaW5kZXgsIHNsaWNlSWQsIHBvc2l0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFjY3VtdWxhdGlvbkJhc2U7XG4gICAgfSgpKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkJhc2UgPSBBY2N1bXVsYXRpb25CYXNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvYWNjdW11bGF0aW9uLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvdGhlbWVcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgYmFzZV8xLCBoZWxwZXJfMSwgY29uc3RhbnRzXzEsIHRoZW1lXzEsIGhlbHBlcl8yKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjdW11bGF0aW9uQW5ub3RhdGlvblNldHRpbmdzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uU2V0dGluZ3MoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQWNjdW11bGF0aW9uQW5ub3RhdGlvblNldHRpbmdzLnByb3RvdHlwZSwgXCJjb250ZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzAnKVxuICAgIF0sIEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwieFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcwJylcbiAgICBdLCBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnUGl4ZWwnKVxuICAgIF0sIEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiY29vcmRpbmF0ZVVuaXRzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0NoYXJ0JylcbiAgICBdLCBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcInJlZ2lvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdNaWRkbGUnKVxuICAgIF0sIEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwidmVydGljYWxBbGlnbm1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnQ2VudGVyJylcbiAgICBdLCBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uU2V0dGluZ3MucHJvdG90eXBlLCBcImhvcml6b250YWxBbGlnbm1lbnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncy5wcm90b3R5cGUsIFwiZGVzY3JpcHRpb25cIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncyA9IEFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncztcbiAgICB2YXIgQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3MgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY3VtdWxhdGlvbkRhdGFMYWJlbFNldHRpbmdzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEFjY3VtdWxhdGlvbkRhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCd0cmFuc3BhcmVudCcpXG4gICAgXSwgQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcImZpbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnSW5zaWRlJylcbiAgICBdLCBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwicG9zaXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSg1KVxuICAgIF0sIEFjY3VtdWxhdGlvbkRhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJyeFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDUpXG4gICAgXSwgQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcInJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29tcGxleCh7IHdpZHRoOiBudWxsLCBjb2xvcjogbnVsbCB9LCBiYXNlXzEuQm9yZGVyKVxuICAgIF0sIEFjY3VtdWxhdGlvbkRhdGFMYWJlbFNldHRpbmdzLnByb3RvdHlwZSwgXCJib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgc2l6ZTogJzExcHgnLCBjb2xvcjogbnVsbCB9LCBiYXNlXzEuRm9udClcbiAgICBdLCBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwiZm9udFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoe30sIGJhc2VfMS5Db25uZWN0b3IpXG4gICAgXSwgQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3MucHJvdG90eXBlLCBcImNvbm5lY3RvclN0eWxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncy5wcm90b3R5cGUsIFwidGVtcGxhdGVcIiwgdm9pZCAwKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkRhdGFMYWJlbFNldHRpbmdzID0gQWNjdW11bGF0aW9uRGF0YUxhYmVsU2V0dGluZ3M7XG4gICAgdmFyIEFjY3VtdWxhdGlvblRvb2x0aXBTZXR0aW5ncyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2N1bXVsYXRpb25Ub29sdGlwU2V0dGluZ3MsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY3VtdWxhdGlvblRvb2x0aXBTZXR0aW5ncygpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWNjdW11bGF0aW9uVG9vbHRpcFNldHRpbmdzO1xuICAgIH0oZWoyX2Jhc2VfMS5DaGlsZFByb3BlcnR5KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQWNjdW11bGF0aW9uVG9vbHRpcFNldHRpbmdzLnByb3RvdHlwZSwgXCJlbmFibGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEFjY3VtdWxhdGlvblRvb2x0aXBTZXR0aW5ncy5wcm90b3R5cGUsIFwiZW5hYmxlQW5pbWF0aW9uXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25Ub29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcImZvcm1hdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcjRkZGRkZGJylcbiAgICBdLCBBY2N1bXVsYXRpb25Ub29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcImZpbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHsgY29sb3I6IG51bGwgfSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBBY2N1bXVsYXRpb25Ub29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KG51bGwpXG4gICAgXSwgQWNjdW11bGF0aW9uVG9vbHRpcFNldHRpbmdzLnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgodGhlbWVfMS5UaGVtZS50b29sdGlwTGFiZWxGb250LCBiYXNlXzEuRm9udClcbiAgICBdLCBBY2N1bXVsYXRpb25Ub29sdGlwU2V0dGluZ3MucHJvdG90eXBlLCBcInRleHRTdHlsZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjdW11bGF0aW9uVG9vbHRpcFNldHRpbmdzID0gQWNjdW11bGF0aW9uVG9vbHRpcFNldHRpbmdzO1xuICAgIHZhciBBY2NQb2ludHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBBY2NQb2ludHMoKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zeW1ib2xMb2NhdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlZ2lvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhYmVsUmVnaW9uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGFiZWxWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQWNjUG9pbnRzO1xuICAgIH0oKSk7XG4gICAgZXhwb3J0cy5BY2NQb2ludHMgPSBBY2NQb2ludHM7XG4gICAgdmFyIEFjY3VtdWxhdGlvblNlcmllcyA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2N1bXVsYXRpb25TZXJpZXMsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY3VtdWxhdGlvblNlcmllcygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucG9pbnRzID0gW107XG4gICAgICAgICAgICBfdGhpcy5zdW1PZlBvaW50cyA9IDA7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5yZWZyZXNoRGF0YU1hbmFnZXIgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5xdWVyeSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFNYW5hZ2VyU3VjY2Vzcyh7IHJlc3VsdDogdGhpcy5kYXRhU291cmNlLCBjb3VudDogdGhpcy5kYXRhU291cmNlLmxlbmd0aCB9LCBhY2N1bXVsYXRpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkYXRhTWFuYWdlciA9IHRoaXMuZGF0YU1vZHVsZS5nZXREYXRhKHRoaXMuZGF0YU1vZHVsZS5nZW5lcmF0ZVF1ZXJ5KCkucmVxdWlyZXNDb3VudCgpKTtcbiAgICAgICAgICAgIGRhdGFNYW5hZ2VyLnRoZW4oZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLmRhdGFNYW5hZ2VyU3VjY2VzcyhlLCBhY2N1bXVsYXRpb24pOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5kYXRhTWFuYWdlclN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSwgYWNjdW11bGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogY29uc3RhbnRzXzEuc2VyaWVzUmVuZGVyLCBzZXJpZXM6IHRoaXMsIGRhdGE6IGUucmVzdWx0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFjY3VtdWxhdGlvbi50cmlnZ2VyKGNvbnN0YW50c18xLnNlcmllc1JlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHREYXRhID0gZS5yZXN1bHQ7XG4gICAgICAgICAgICB0aGlzLmdldFBvaW50cyhlLnJlc3VsdCwgYWNjdW11bGF0aW9uKTtcbiAgICAgICAgICAgIGlmICgrK2FjY3VtdWxhdGlvbi5zZXJpZXNDb3VudHMgPT09IGFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFjY3VtdWxhdGlvbi5yZWZyZXNoQ2hhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAocmVzdWx0LCBhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuc3VtT2ZQb2ludHMgPSAwO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maW5kU3VtT2ZQb2ludHMocmVzdWx0KTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gW107XG4gICAgICAgICAgICB0aGlzLnN1bU9mQ2x1YiA9IDA7XG4gICAgICAgICAgICB2YXIgcG9pbnQ7XG4gICAgICAgICAgICB2YXIgY29sb3JzID0gdGhpcy5wYWxldHRlcy5sZW5ndGggPyB0aGlzLnBhbGV0dGVzIDogdGhlbWVfMS5nZXRTZXJpZXNDb2xvcihhY2N1bXVsYXRpb24udGhlbWUpO1xuICAgICAgICAgICAgdmFyIGNsdWJWYWx1ZSA9IGhlbHBlcl8xLnN0cmluZ1RvTnVtYmVyKHRoaXMuZ3JvdXBUbywgdGhpcy5zdW1PZlBvaW50cyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9pbnQgPSB0aGlzLnNldFBvaW50cyhyZXN1bHQsIGksIGNvbG9ycyk7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRZID0gcG9pbnQueTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNDbHViKHBvaW50LCBjbHViVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHBvaW50LnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoUG9pbnRzKHBvaW50LCBjb2xvcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdEdyb3VwVG8gPSB0aGlzLmdyb3VwVG87XG4gICAgICAgICAgICBpZiAodGhpcy5zdW1PZkNsdWIgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsdWJQb2ludCA9IG5ldyBBY2NQb2ludHMoKTtcbiAgICAgICAgICAgICAgICBjbHViUG9pbnQueCA9ICdPdGhlcnMnO1xuICAgICAgICAgICAgICAgIGNsdWJQb2ludC55ID0gdGhpcy5zdW1PZkNsdWI7XG4gICAgICAgICAgICAgICAgY2x1YlBvaW50LnRleHQgPSBjbHViUG9pbnQub3JpZ2luYWxUZXh0ID0gY2x1YlBvaW50LnggKyAnOiAnICsgdGhpcy5zdW1PZkNsdWI7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoUG9pbnRzKGNsdWJQb2ludCwgY29sb3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5wdXNoUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50LCBjb2xvcnMpIHtcbiAgICAgICAgICAgIHBvaW50LmluZGV4ID0gdGhpcy5wb2ludHMubGVuZ3RoO1xuICAgICAgICAgICAgcG9pbnQuY29sb3IgPSBwb2ludC5jb2xvciB8fCBjb2xvcnNbcG9pbnQuaW5kZXggJSBjb2xvcnMubGVuZ3RoXTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzLnB1c2gocG9pbnQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLmlzQ2x1YiA9IGZ1bmN0aW9uIChwb2ludCwgY2x1YlZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocG9pbnQueSkgPD0gY2x1YlZhbHVlICYmICFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKGNsdWJWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1bU9mQ2x1YiArPSBNYXRoLmFicyhwb2ludC55KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5maW5kU3VtT2ZQb2ludHMgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlajJfYmFzZV8yLmlzTnVsbE9yVW5kZWZpbmVkKHJlc3VsdFtpXVt0aGlzLnlOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdW1PZlBvaW50cyArPSBNYXRoLmFicyhyZXN1bHRbaV1bdGhpcy55TmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZS5zZXRQb2ludHMgPSBmdW5jdGlvbiAoZGF0YSwgaSwgY29sb3JzKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgQWNjUG9pbnRzKCk7XG4gICAgICAgICAgICBwb2ludC54ID0gZGF0YVtpXVt0aGlzLnhOYW1lXTtcbiAgICAgICAgICAgIHBvaW50LnkgPSBkYXRhW2ldW3RoaXMueU5hbWVdO1xuICAgICAgICAgICAgcG9pbnQudGV4dCA9IHBvaW50Lm9yaWdpbmFsVGV4dCA9IGRhdGFbaV1bdGhpcy5kYXRhTGFiZWwubmFtZV07XG4gICAgICAgICAgICB0aGlzLnNldEFjY0VtcHR5UG9pbnQocG9pbnQsIGksIGRhdGEsIGNvbG9ycyk7XG4gICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUucmVuZGVyU2VyaWVzID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbikge1xuICAgICAgICAgICAgdmFyIHNlcmllc0dyb3VwID0gYWNjdW11bGF0aW9uLnJlbmRlcmVyLmNyZWF0ZUdyb3VwKHsgaWQ6IGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19TZXJpZXNfJyArIHRoaXMuaW5kZXggfSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBvaW50cyhhY2N1bXVsYXRpb24sIHNlcmllc0dyb3VwKTtcbiAgICAgICAgICAgIHZhciBkYXRhbGFiZWxHcm91cDtcbiAgICAgICAgICAgIGlmIChhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uRGF0YUxhYmVsTW9kdWxlICYmIHRoaXMuZGF0YUxhYmVsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBkYXRhbGFiZWxHcm91cCA9IGFjY3VtdWxhdGlvbi5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiBhY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfZGF0YWxhYmVsX1Nlcmllc18nICsgdGhpcy5pbmRleCB9KTtcbiAgICAgICAgICAgICAgICBkYXRhbGFiZWxHcm91cC5zdHlsZS52aXNpYmlsaXR5ID1cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYW5pbWF0aW9uLmVuYWJsZSAmJiBhY2N1bXVsYXRpb24uYW5pbWF0ZVNlcmllcyAmJiB0aGlzLnR5cGUgPT09ICdQaWUnKSA/ICdoaWRkZW4nIDogJ3Zpc2libGUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YUxhYmVsKGFjY3VtdWxhdGlvbiwgZGF0YWxhYmVsR3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ1BpZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmRNYXhCb3VuZHModGhpcy5sYWJlbEJvdW5kLCB0aGlzLmFjY3VtdWxhdGlvbkJvdW5kKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24ucGllU2VyaWVzTW9kdWxlLmFuaW1hdGVTZXJpZXMoYWNjdW11bGF0aW9uLCB0aGlzLmFuaW1hdGlvbiwgdGhpcywgc2VyaWVzR3JvdXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjY3VtdWxhdGlvbi5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsQm91bmQueCAtPSBhY2N1bXVsYXRpb24uZXhwbG9kZURpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHRoaXMubGFiZWxCb3VuZC55IC09IGFjY3VtdWxhdGlvbi5leHBsb2RlRGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbEJvdW5kLmhlaWdodCArPSAoYWNjdW11bGF0aW9uLmV4cGxvZGVEaXN0YW5jZSAtIHRoaXMubGFiZWxCb3VuZC55KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsQm91bmQud2lkdGggKz0gKGFjY3VtdWxhdGlvbi5leHBsb2RlRGlzdGFuY2UgLSB0aGlzLmxhYmVsQm91bmQueCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUucmVuZGVyUG9pbnRzID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbiwgc2VyaWVzR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBwb2ludElkID0gYWNjdW11bGF0aW9uLmVsZW1lbnQuaWQgKyAnX1Nlcmllc18nICsgdGhpcy5pbmRleCArICdfUG9pbnRfJztcbiAgICAgICAgICAgIHZhciBvcHRpb247XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5wb2ludHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEucG9pbnRSZW5kZXIsIHNlcmllczogdGhpcywgcG9pbnQ6IHBvaW50LCBmaWxsOiBwb2ludC5jb2xvcixcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiB0aGlzLmlzRW1wdHkocG9pbnQpID8geyB3aWR0aDogdGhpcy5lbXB0eVBvaW50U2V0dGluZ3MuYm9yZGVyLndpZHRoLCBjb2xvcjogdGhpcy5lbXB0eVBvaW50U2V0dGluZ3MuYm9yZGVyLmNvbG9yIH0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgeyB3aWR0aDogdGhpcy5ib3JkZXIud2lkdGgsIGNvbG9yOiB0aGlzLmJvcmRlci5jb2xvciB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24udHJpZ2dlcihjb25zdGFudHNfMS5wb2ludFJlbmRlciwgYXJnc0RhdGEpO1xuICAgICAgICAgICAgICAgIHBvaW50LmNvbG9yID0gYXJnc0RhdGEuZmlsbDtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24gPSBuZXcgaGVscGVyXzEuUGF0aE9wdGlvbihwb2ludElkICsgcG9pbnQuaW5kZXgsIHBvaW50LmNvbG9yLCBhcmdzRGF0YS5ib3JkZXIud2lkdGggfHwgMSwgYXJnc0RhdGEuYm9yZGVyLmNvbG9yIHx8IHBvaW50LmNvbG9yLCAxLCAnJywgJycpO1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb25bKGhlbHBlcl8yLmZpcnN0VG9Mb3dlckNhc2UodGhpcy50eXBlKSArICdTZXJpZXNNb2R1bGUnKV0uXG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJQb2ludChwb2ludCwgdGhpcywgYWNjdW11bGF0aW9uLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXNHcm91cC5hcHBlbmRDaGlsZChhY2N1bXVsYXRpb24ucmVuZGVyZXIuZHJhd1BhdGgob3B0aW9uKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjdW11bGF0aW9uLmdldFNlcmllc0VsZW1lbnQoKS5hcHBlbmRDaGlsZChzZXJpZXNHcm91cCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUucmVuZGVyRGF0YUxhYmVsID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbiwgZGF0YWxhYmVsR3JvdXApIHtcbiAgICAgICAgICAgIGFjY3VtdWxhdGlvbi5hY2N1bXVsYXRpb25EYXRhTGFiZWxNb2R1bGUuZmluZEFyZWFSZWN0KCk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiBhY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfU2VyaWVzXzAnICsgJ19EYXRhTGFiZWxDb2xsZWN0aW9ucydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24uYWNjdW11bGF0aW9uRGF0YUxhYmVsTW9kdWxlLnJlbmRlckRhdGFMYWJlbChwb2ludCwgdGhpcy5kYXRhTGFiZWwsIGRhdGFsYWJlbEdyb3VwLCB0aGlzLnBvaW50cywgdGhpcy5pbmRleCwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YUxhYmVsLnRlbXBsYXRlICE9PSBudWxsICYmIGVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQpIHtcbiAgICAgICAgICAgICAgICBoZWxwZXJfMi5nZXRFbGVtZW50KGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjdW11bGF0aW9uLmdldFNlcmllc0VsZW1lbnQoKS5hcHBlbmRDaGlsZChkYXRhbGFiZWxHcm91cCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUuZmluZE1heEJvdW5kcyA9IGZ1bmN0aW9uICh0b3RhbGJvdW5kLCBib3VuZCkge1xuICAgICAgICAgICAgdG90YWxib3VuZC54ID0gYm91bmQueCA8IHRvdGFsYm91bmQueCA/IGJvdW5kLnggOiB0b3RhbGJvdW5kLng7XG4gICAgICAgICAgICB0b3RhbGJvdW5kLnkgPSBib3VuZC55IDwgdG90YWxib3VuZC55ID8gYm91bmQueSA6IHRvdGFsYm91bmQueTtcbiAgICAgICAgICAgIHRvdGFsYm91bmQuaGVpZ2h0ID0gKGJvdW5kLnkgKyBib3VuZC5oZWlnaHQpID4gdG90YWxib3VuZC5oZWlnaHQgPyAoYm91bmQueSArIGJvdW5kLmhlaWdodCkgOiB0b3RhbGJvdW5kLmhlaWdodDtcbiAgICAgICAgICAgIHRvdGFsYm91bmQud2lkdGggPSAoYm91bmQueCArIGJvdW5kLndpZHRoKSA+IHRvdGFsYm91bmQud2lkdGggPyAoYm91bmQueCArIGJvdW5kLndpZHRoKSA6IHRvdGFsYm91bmQud2lkdGg7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUuc2V0QWNjRW1wdHlQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgaSwgZGF0YSwgY29sb3JzKSB7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzIuaXNOdWxsT3JVbmRlZmluZWQocG9pbnQueSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50LmNvbG9yID0gdGhpcy5lbXB0eVBvaW50U2V0dGluZ3MuZmlsbCB8fCBwb2ludC5jb2xvcjtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5lbXB0eVBvaW50U2V0dGluZ3MubW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1plcm8nOlxuICAgICAgICAgICAgICAgICAgICBwb2ludC55ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0F2ZXJhZ2UnOlxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXMgPSBkYXRhW2kgLSAxXSA/IChkYXRhW2kgLSAxXVt0aGlzLnlOYW1lXSB8fCAwKSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZGF0YVtpICsgMV0gPyAoZGF0YVtpICsgMV1bdGhpcy55TmFtZV0gfHwgMCkgOiAwO1xuICAgICAgICAgICAgICAgICAgICBwb2ludC55ID0gKE1hdGguYWJzKHByZXZpb3VzKSArIE1hdGguYWJzKG5leHQpKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VtT2ZQb2ludHMgKz0gcG9pbnQueTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0Ryb3AnOlxuICAgICAgICAgICAgICAgICAgICBwb2ludC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBwb2ludC5jb2xvciA9PT0gdGhpcy5lbXB0eVBvaW50U2V0dGluZ3MuZmlsbDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFjY3VtdWxhdGlvblNlcmllcztcbiAgICB9KGVqMl9iYXNlXzEuQ2hpbGRQcm9wZXJ0eSkpO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwiZGF0YVNvdXJjZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KClcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcInF1ZXJ5XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJycpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJ4TmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwieU5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwidmlzaWJsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogbnVsbCwgd2lkdGg6IDAgfSwgYmFzZV8xLkJvcmRlcilcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImJvcmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgobnVsbCwgYmFzZV8xLkFuaW1hdGlvbilcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImFuaW1hdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdTZXJpZXNUeXBlJylcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImxlZ2VuZFNoYXBlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcInNlbGVjdGlvblN0eWxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImdyb3VwVG9cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBBY2N1bXVsYXRpb25EYXRhTGFiZWxTZXR0aW5ncylcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImRhdGFMYWJlbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KFtdKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwicGFsZXR0ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgwKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwic3RhcnRBbmdsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDM2MClcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImVuZEFuZ2xlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzgwJScpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJyYWRpdXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnMCcpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJpbm5lclJhZGl1c1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdQaWUnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwidHlwZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KHRydWUpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJlbmFibGVUb29sdGlwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJleHBsb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzMwJScpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJleHBsb2RlT2Zmc2V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoZmFsc2UpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJleHBsb2RlQWxsXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImV4cGxvZGVJbmRleFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBtb2RlOiAnRHJvcCcgfSwgYmFzZV8xLkVtcHR5UG9pbnRTZXR0aW5ncylcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImVtcHR5UG9pbnRTZXR0aW5nc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KDApXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJnYXBSYXRpb1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCc4MCUnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnODAlJylcbiAgICBdLCBBY2N1bXVsYXRpb25TZXJpZXMucHJvdG90eXBlLCBcImhlaWdodFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCcyMCUnKVxuICAgIF0sIEFjY3VtdWxhdGlvblNlcmllcy5wcm90b3R5cGUsIFwibmVja1dpZHRoXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJzIwJScpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJuZWNrSGVpZ2h0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkoJ0xpbmVhcicpXG4gICAgXSwgQWNjdW11bGF0aW9uU2VyaWVzLnByb3RvdHlwZSwgXCJweXJhbWlkTW9kZVwiLCB2b2lkIDApO1xuICAgIGV4cG9ydHMuQWNjdW11bGF0aW9uU2VyaWVzID0gQWNjdW11bGF0aW9uU2VyaWVzO1xuICAgIGZ1bmN0aW9uIGdldFNlcmllc0Zyb21JbmRleChpbmRleCwgdmlzaWJsZVNlcmllcykge1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZpc2libGVTZXJpZXNfMSA9IHZpc2libGVTZXJpZXM7IF9pIDwgdmlzaWJsZVNlcmllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHZpc2libGVTZXJpZXNfMVtfaV07XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IHNlcmllcy5pbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXJpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpc2libGVTZXJpZXNbMF07XG4gICAgfVxuICAgIGV4cG9ydHMuZ2V0U2VyaWVzRnJvbUluZGV4ID0gZ2V0U2VyaWVzRnJvbUluZGV4O1xuICAgIGZ1bmN0aW9uIHBvaW50QnlJbmRleChpbmRleCwgcG9pbnRzKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcG9pbnRzXzEgPSBwb2ludHM7IF9pIDwgcG9pbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNfMVtfaV07XG4gICAgICAgICAgICBpZiAocG9pbnQuaW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBleHBvcnRzLnBvaW50QnlJbmRleCA9IHBvaW50QnlJbmRleDtcbiAgICBmdW5jdGlvbiBpbmRleEZpbmRlcihpZCkge1xuICAgICAgICB2YXIgaWRzID0gWydOYU4nLCAnTmFOJ107XG4gICAgICAgIGlmIChpZC5pbmRleE9mKCdfUG9pbnRfJykgPiAtMSkge1xuICAgICAgICAgICAgaWRzID0gaWQuc3BsaXQoJ19TZXJpZXNfJylbMV0uc3BsaXQoJ19Qb2ludF8nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpZC5pbmRleE9mKCdfc2hhcGVfJykgPiAtMSkge1xuICAgICAgICAgICAgaWRzID0gaWQuc3BsaXQoJ19zaGFwZV8nKTtcbiAgICAgICAgICAgIGlkc1swXSA9ICcwJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpZC5pbmRleE9mKCdfdGV4dF8nKSA+IC0xKSB7XG4gICAgICAgICAgICBpZHMgPSBpZC5zcGxpdCgnX3RleHRfJyk7XG4gICAgICAgICAgICBpZHNbMF0gPSAnMCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBiYXNlXzEuSW5kZXgocGFyc2VJbnQoaWRzWzBdLCAxMCksIHBhcnNlSW50KGlkc1sxXSwgMTApKTtcbiAgICB9XG4gICAgZXhwb3J0cy5pbmRleEZpbmRlciA9IGluZGV4RmluZGVyO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvbW9kZWwvYWNjLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vY29tbW9uL21vZGVsL2Jhc2VcIiwgXCIuL21vZGVsL2FjYy1iYXNlXCIsIFwiLi4vY29tbW9uL21vZGVsL3RoZW1lXCIsIFwiLi4vY29tbW9uL21vZGVsL2NvbnN0YW50c1wiLCBcIi4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuLi9jb21tb24vbGVnZW5kL2xlZ2VuZFwiLCBcIi4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uL2NvbW1vbi9tb2RlbC9kYXRhXCIsIFwiLi9yZW5kZXJlci9hY2N1bXVsYXRpb24tYmFzZVwiLCBcIi4vcmVuZGVyZXIvcGllLXNlcmllc1wiLCBcIi4vbW9kZWwvYWNjLWJhc2VcIiwgXCIuLi9jb21tb24vdXRpbHMvZXhwb3J0XCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgZWoyX2Jhc2VfMiwgZWoyX2Jhc2VfMywgYmFzZV8xLCBhY2NfYmFzZV8xLCB0aGVtZV8xLCBjb25zdGFudHNfMSwgY29uc3RhbnRzXzIsIGxlZ2VuZF8xLCBoZWxwZXJfMSwgaGVscGVyXzIsIGhlbHBlcl8zLCBkYXRhXzEsIGFjY3VtdWxhdGlvbl9iYXNlXzEsIHBpZV9zZXJpZXNfMSwgYWNjX2Jhc2VfMiwgZXhwb3J0XzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFjY3VtdWxhdGlvbkNoYXJ0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY3VtdWxhdGlvbkNoYXJ0LCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2N1bXVsYXRpb25DaGFydChvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zLCBlbGVtZW50KSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuZXhwbG9kZURpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcInR5cGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VyaWVzICYmIHRoaXMuc2VyaWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJpZXNbMF0udHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICdQaWUnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5zZXRDdWx0dXJlKCk7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVTZXJpZXMgPSB0cnVlO1xuICAgICAgICAgICAgaGVscGVyXzIuY2FsY3VsYXRlU2l6ZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMud2lyZUV2ZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGNvbnN0YW50c18xLmxvYWQsIHsgYWNjdW11bGF0aW9uOiB0aGlzIH0pO1xuICAgICAgICAgICAgdGhpcy5hY2NCYXNlTW9kdWxlID0gbmV3IGFjY3VtdWxhdGlvbl9iYXNlXzEuQWNjdW11bGF0aW9uQmFzZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGllU2VyaWVzTW9kdWxlID0gbmV3IHBpZV9zZXJpZXNfMS5QaWVTZXJpZXModGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVZpc2libGVTZXJpZXMoKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RhdGEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnVuV2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpc0lFMTFQb2ludGVyID0gZWoyX2Jhc2VfMi5Ccm93c2VyLmlzUG9pbnRlcjtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGVqMl9iYXNlXzIuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQ7XG4gICAgICAgICAgICB2YXIgbW92ZSA9IGVqMl9iYXNlXzIuQnJvd3Nlci50b3VjaE1vdmVFdmVudDtcbiAgICAgICAgICAgIHZhciBzdG9wID0gZWoyX2Jhc2VfMi5Ccm93c2VyLnRvdWNoRW5kRXZlbnQ7XG4gICAgICAgICAgICB2YXIgY2FuY2VsID0gaXNJRTExUG9pbnRlciA/ICdwb2ludGVybGVhdmUnIDogJ21vdXNlbGVhdmUnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgbW92ZSwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIucmVtb3ZlKHRoaXMuZWxlbWVudCwgc3RvcCwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZUVuZCk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBzdGFydCwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZVN0YXJ0KTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuYWNjdW11bGF0aW9uT25Nb3VzZUNsaWNrKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLnJlbW92ZSh0aGlzLmVsZW1lbnQsICdjb250ZXh0bWVudScsIHRoaXMuYWNjdW11bGF0aW9uUmlnaHRDbGljayk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5yZW1vdmUodGhpcy5lbGVtZW50LCBjYW5jZWwsIHRoaXMuYWNjdW11bGF0aW9uTW91c2VMZWF2ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigoZWoyX2Jhc2VfMi5Ccm93c2VyLmlzVG91Y2ggJiYgKCdvcmllbnRhdGlvbicgaW4gd2luZG93ICYmICdvbm9yaWVudGF0aW9uY2hhbmdlJyBpbiB3aW5kb3cpKSA/ICdvcmllbnRhdGlvbmNoYW5nZScgOiAncmVzaXplJywgdGhpcy5hY2N1bXVsYXRpb25SZXNpemUpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUud2lyZUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpc0lFMTFQb2ludGVyID0gZWoyX2Jhc2VfMi5Ccm93c2VyLmlzUG9pbnRlcjtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGVqMl9iYXNlXzIuQnJvd3Nlci50b3VjaFN0YXJ0RXZlbnQ7XG4gICAgICAgICAgICB2YXIgc3RvcCA9IGVqMl9iYXNlXzIuQnJvd3Nlci50b3VjaEVuZEV2ZW50O1xuICAgICAgICAgICAgdmFyIG1vdmUgPSBlajJfYmFzZV8yLkJyb3dzZXIudG91Y2hNb3ZlRXZlbnQ7XG4gICAgICAgICAgICB2YXIgY2FuY2VsID0gaXNJRTExUG9pbnRlciA/ICdwb2ludGVybGVhdmUnIDogJ21vdXNlbGVhdmUnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgbW92ZSwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZU1vdmUsIHRoaXMpO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5FdmVudEhhbmRsZXIuYWRkKHRoaXMuZWxlbWVudCwgc3RvcCwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZUVuZCwgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBzdGFydCwgdGhpcy5hY2N1bXVsYXRpb25Nb3VzZVN0YXJ0LCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMuYWNjdW11bGF0aW9uT25Nb3VzZUNsaWNrLCB0aGlzKTtcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuRXZlbnRIYW5kbGVyLmFkZCh0aGlzLmVsZW1lbnQsICdjb250ZXh0bWVudScsIHRoaXMuYWNjdW11bGF0aW9uUmlnaHRDbGljaywgdGhpcyk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLkV2ZW50SGFuZGxlci5hZGQodGhpcy5lbGVtZW50LCBjYW5jZWwsIHRoaXMuYWNjdW11bGF0aW9uTW91c2VMZWF2ZSwgdGhpcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigoZWoyX2Jhc2VfMi5Ccm93c2VyLmlzVG91Y2ggJiYgKCdvcmllbnRhdGlvbicgaW4gd2luZG93ICYmICdvbm9yaWVudGF0aW9uY2hhbmdlJyBpbiB3aW5kb3cpKSA/ICdvcmllbnRhdGlvbmNoYW5nZScgOiAncmVzaXplJywgdGhpcy5hY2N1bXVsYXRpb25SZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBuZXcgZWoyX2Jhc2VfMi5Ub3VjaCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuc2V0TW91c2VYWSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGFnZVg7XG4gICAgICAgICAgICB2YXIgcGFnZVk7XG4gICAgICAgICAgICBpZiAoZS50eXBlLmluZGV4T2YoJ3RvdWNoJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUb3VjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoQXJnID0gZTtcbiAgICAgICAgICAgICAgICBwYWdlWSA9IHRvdWNoQXJnLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgcGFnZVggPSB0b3VjaEFyZy5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1RvdWNoID0gZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyB8fCBlLnBvaW50ZXJUeXBlID09PSAnMic7XG4gICAgICAgICAgICAgICAgcGFnZVggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgcGFnZVkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1vdXNlWSA9IHBhZ2VZO1xuICAgICAgICAgICAgdGhpcy5tb3VzZVggPSBwYWdlWDtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvbk1vdXNlRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TW91c2VYWShlKTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihjb25zdGFudHNfMi5jaGFydE1vdXNlVXAsIHsgdGFyZ2V0OiBlLnRhcmdldC5pZCwgeDogdGhpcy5tb3VzZVgsIHk6IHRoaXMubW91c2VZIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGl0bGVUb29sdGlwKGUsIHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSwgdGhpcy5pc1RvdWNoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRpb25Ub29sdGlwTW9kdWxlICYmIHRoaXMuYWNjdW11bGF0aW9uVG9vbHRpcE1vZHVsZS50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjQmFzZU1vZHVsZS5nZXRUb29sdGlwUG9pbnQoZSwgdGhpcywgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25Ub29sdGlwTW9kdWxlLmZhZGVPdXRUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvbkRhdGFMYWJlbE1vZHVsZSAmJiB0aGlzLnZpc2libGVTZXJpZXNbMF0uZGF0YUxhYmVsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25EYXRhTGFiZWxNb2R1bGUubW92ZShlLCB0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVksIHRoaXMuaXNUb3VjaCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZSAmJiB0aGlzLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUubW92ZShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5yZW1vdmVTdmdPZmZzZXQgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgc3ZnUmVjdCA9IGhlbHBlcl8zLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19zdmcnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHJldHVybiB7IHg6ICh4IC0gcmVjdC5sZWZ0KSAtIE1hdGgubWF4KHN2Z1JlY3QubGVmdCAtIHJlY3QubGVmdCwgMCksIHk6ICh5IC0gcmVjdC50b3ApIC0gTWF0aC5tYXgoc3ZnUmVjdC50b3AgLSByZWN0LnRvcCwgMCkgfTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvbk1vdXNlU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRNb3VzZVhZKGUpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGNvbnN0YW50c18xLmNoYXJ0TW91c2VEb3duLCB7IHRhcmdldDogZS50YXJnZXQuaWQsIHg6IHRoaXMubW91c2VYLCB5OiB0aGlzLm1vdXNlWSB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvblJlc2l6ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0aW9uOiB0aGlzLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2l6ZTogbmV3IGhlbHBlcl8xLlNpemUodGhpcy5hdmFpbGFibGVTaXplLndpZHRoLCB0aGlzLmF2YWlsYWJsZVNpemUuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjb25zdGFudHNfMi5yZXNpemVkLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTaXplOiBuZXcgaGVscGVyXzEuU2l6ZSgwLCAwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc2l6ZVRvKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNpemVUbyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMucmVzaXplVG8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhlbHBlcl8yLmNhbGN1bGF0ZVNpemUoX3RoaXMpO1xuICAgICAgICAgICAgICAgIGFyZ3MuY3VycmVudFNpemUgPSBfdGhpcy5hdmFpbGFibGVTaXplO1xuICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXIoY29uc3RhbnRzXzIucmVzaXplZCwgYXJncyk7XG4gICAgICAgICAgICAgICAgX3RoaXMucmVmcmVzaFNlcmllcygpO1xuICAgICAgICAgICAgICAgIF90aGlzLnJlZnJlc2hDaGFydCgpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmV4cG9ydCA9IGZ1bmN0aW9uICh0eXBlLCBmaWxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIGV4cG9ydENoYXJ0ID0gbmV3IGV4cG9ydF8xLkV4cG9ydFV0aWxzKHRoaXMpO1xuICAgICAgICAgICAgZXhwb3J0Q2hhcnQuZXhwb3J0KHR5cGUsIGZpbGVOYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgZXhwb3J0Q2hhcnQgPSBuZXcgZXhwb3J0XzEuRXhwb3J0VXRpbHModGhpcyk7XG4gICAgICAgICAgICBleHBvcnRDaGFydC5wcmludChpZCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRvdWNoQWN0aW9uID0gJ2VsZW1lbnQnO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tc1RvdWNoQWN0aW9uID0gJ2VsZW1lbnQnO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tc0NvbnRlbnRab29taW5nID0gJ25vbmUnO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tc1VzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnNldE1vdXNlWFkoZSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoY29uc3RhbnRzXzIuY2hhcnRNb3VzZU1vdmUsIHsgdGFyZ2V0OiBlLnRhcmdldC5pZCwgeDogdGhpcy5tb3VzZVgsIHk6IHRoaXMubW91c2VZIH0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uTGVnZW5kTW9kdWxlICYmIHRoaXMubGVnZW5kU2V0dGluZ3MudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uTGVnZW5kTW9kdWxlLm1vdmUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRpb25EYXRhTGFiZWxNb2R1bGUgJiYgdGhpcy52aXNpYmxlU2VyaWVzWzBdICYmIHRoaXMudmlzaWJsZVNlcmllc1swXS5kYXRhTGFiZWwudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uRGF0YUxhYmVsTW9kdWxlLm1vdmUoZSwgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvblRvb2x0aXBNb2R1bGUgJiYgdGhpcy5hY2NCYXNlTW9kdWxlICYmIHRoaXMudG9vbHRpcC5lbmFibGUgJiYgIXRoaXMuaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjQmFzZU1vZHVsZS5nZXRUb29sdGlwUG9pbnQoZSwgdGhpcywgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZVRvb2x0aXAoZSwgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnRpdGxlVG9vbHRpcCA9IGZ1bmN0aW9uIChldmVudCwgeCwgeSwgaXNUb3VjaCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgICAgICAgICAgaWYgKChldmVudC50YXJnZXQudGV4dENvbnRlbnQuaW5kZXhPZignLi4uJykgPiAtMSkgJiYgKHRhcmdldElkID09PSAodGhpcy5lbGVtZW50LmlkICsgJ190aXRsZScpKSkge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLnNob3dUb29sdGlwKHRoaXMudGl0bGUsIHgsIHksIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCwgdGhpcy5lbGVtZW50LmlkICsgJ19FSjJfVGl0bGVfVG9vbHRpcCcsIGhlbHBlcl8zLmdldEVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpLCBpc1RvdWNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8yLnJlbW92ZUVsZW1lbnQodGhpcy5lbGVtZW50LmlkICsgJ19FSjJfVGl0bGVfVG9vbHRpcCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuYWNjdW11bGF0aW9uT25Nb3VzZUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TW91c2VYWShlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZSAmJiB0aGlzLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5jbGljayhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgIT09ICdOb25lJyAmJiB0aGlzLmFjY3VtdWxhdGlvblNlbGVjdGlvbk1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlLmNhbGN1bGF0ZVNlbGVjdGVkRWxlbWVudHModGhpcywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlU2VyaWVzWzBdLmV4cGxvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjY0Jhc2VNb2R1bGUucHJvY2Vzc0V4cGxvZGUoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoY29uc3RhbnRzXzEuY2hhcnRNb3VzZUNsaWNrLCB7IHRhcmdldDogZS50YXJnZXQuaWQsIHg6IHRoaXMubW91c2VYLCB5OiB0aGlzLm1vdXNlWSB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvblJpZ2h0Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5idXR0b25zID09PSAyIHx8IGV2ZW50LnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmFjY3VtdWxhdGlvbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRNb3VzZVhZKGUpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKGNvbnN0YW50c18yLmNoYXJ0TW91c2VMZWF2ZSwgeyB0YXJnZXQ6IGUudGFyZ2V0LmlkLCB4OiB0aGlzLm1vdXNlWCwgeTogdGhpcy5tb3VzZVkgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRpb25Ub29sdGlwTW9kdWxlICYmIHRoaXMudG9vbHRpcC5lbmFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvblRvb2x0aXBNb2R1bGUudG9vbHRpcC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuc2V0Q3VsdHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaW50bCA9IG5ldyBlajJfYmFzZV8yLkludGVybmF0aW9uYWxpemF0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5jcmVhdGVQaWVTdmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgaGVscGVyXzIuY3JlYXRlU3ZnKHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVtb3ZlU3ZnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaGVscGVyXzIucmVtb3ZlRWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX1NlY29uZGFyeV9FbGVtZW50Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdmdPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5zdmdPYmplY3QuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqZWN0LnJlbW92ZUNoaWxkKHRoaXMuc3ZnT2JqZWN0LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3ZnT2JqZWN0Lmhhc0NoaWxkTm9kZXMoKSAmJiB0aGlzLnN2Z09iamVjdC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVqMl9iYXNlXzMucmVtb3ZlKHRoaXMuc3ZnT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJfMi5yZW1vdmVFbGVtZW50KCdFSjJfbGVnZW5kX3Rvb2x0aXAnKTtcbiAgICAgICAgICAgIGhlbHBlcl8yLnJlbW92ZUVsZW1lbnQoJ0VKMl9kYXRhbGFiZWxfdG9vbHRpcCcpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuY3JlYXRlU2Vjb25kYXJ5RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChlajJfYmFzZV8zLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiAncG9zaXRpb246IHJlbGF0aXZlJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlVmlzaWJsZVNlcmllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVNlcmllcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdGhpcy5zZXJpZXMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VyaWVzW2ldLmluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXJpZXNbaV0udHlwZSA9PT0gdGhpcy50eXBlICYmIHRoaXMudmlzaWJsZVNlcmllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlU2VyaWVzLnB1c2godGhpcy5zZXJpZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5wcm9jZXNzRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VyaWVzQ291bnRzID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBzZXJpZXMuZGF0YU1vZHVsZSA9IG5ldyBkYXRhXzEuRGF0YShzZXJpZXMuZGF0YVNvdXJjZSwgc2VyaWVzLnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICBzZXJpZXMucmVmcmVzaERhdGFNYW5hZ2VyKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVmcmVzaENoYXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5kb0dyb3VwcGluZ1Byb2Nlc3MoKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUGllU3ZnKCk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbGVtZW50cygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuZG9Hcm91cHBpbmdQcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMudmlzaWJsZVNlcmllc1swXTtcbiAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChzZXJpZXMucmVzdWx0RGF0YSkgJiYgKCghZWoyX2Jhc2VfMy5pc051bGxPclVuZGVmaW5lZChzZXJpZXMubGFzdEdyb3VwVG8pICYmXG4gICAgICAgICAgICAgICAgc2VyaWVzLmxhc3RHcm91cFRvICE9PSBzZXJpZXMuZ3JvdXBUbykpKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmdldFBvaW50cyhzZXJpZXMucmVzdWx0RGF0YSwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5jYWxjdWxhdGVCb3VuZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxDbGlwUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KHRoaXMubWFyZ2luLmxlZnQsIHRoaXMubWFyZ2luLnRvcCwgdGhpcy5hdmFpbGFibGVTaXplLndpZHRoLCB0aGlzLmF2YWlsYWJsZVNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgIGhlbHBlcl8xLnN1YnRyYWN0UmVjdCh0aGlzLmluaXRpYWxDbGlwUmVjdCwgbmV3IGhlbHBlcl8xLlJlY3QoMCwgaGVscGVyXzEubWVhc3VyZVRleHQodGhpcy50aXRsZSwgdGhpcy50aXRsZVN0eWxlKS5oZWlnaHQsIHRoaXMubWFyZ2luLnJpZ2h0ICsgdGhpcy5tYXJnaW4ubGVmdCwgdGhpcy5tYXJnaW4uYm90dG9tICsgdGhpcy5tYXJnaW4udG9wKSk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUxlZ2VuZEJvdW5kcygpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuY2FsY3VsYXRlTGVnZW5kQm91bmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZSB8fCAhdGhpcy5sZWdlbmRTZXR0aW5ncy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5nZXRMZWdlbmRPcHRpb25zKHRoaXMsIHRoaXMudmlzaWJsZVNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5jYWxjdWxhdGVMZWdlbmRCb3VuZHModGhpcy5pbml0aWFsQ2xpcFJlY3QsIHRoaXMuYXZhaWxhYmxlU2l6ZSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5yZW5kZXJFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQm9yZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpdGxlKCk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNlY29uZGFyeUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2VyaWVzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckxlZ2VuZCgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3ZnT2JqZWN0KTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXhwbG9kZSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJBbm5vdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNldFNlY29uZGFyeUVsZW1lbnRQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdsb2FkZWQnLCB7IGFjY3VtdWxhdGlvbjogdGhpcyB9KTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVNlcmllcyA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuc2V0U2Vjb25kYXJ5RWxlbWVudFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBQYXJlbnQgPSBoZWxwZXJfMy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKTtcbiAgICAgICAgICAgIGlmICghdG9vbHRpcFBhcmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZWoyX2Jhc2VfMy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuZWxlbWVudC5pZCArICdfcGllX3Rvb2x0aXAnLFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ3Bvc2l0aW9uOiBhYnNvbHV0ZTtiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtoZWlnaHQ6IDJweDt3aWR0aDogMnB4OydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG9vbHRpcFBhcmVudC5hcHBlbmRDaGlsZCh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgdmFyIHN2Z1JlY3QgPSBoZWxwZXJfMy5nZXRFbGVtZW50KHRoaXMuZWxlbWVudC5pZCArICdfc3ZnJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB0b29sdGlwUGFyZW50LnN0eWxlLmxlZnQgPSBNYXRoLm1heChzdmdSZWN0LmxlZnQgLSByZWN0LmxlZnQsIDApICsgJ3B4JztcbiAgICAgICAgICAgIHRvb2x0aXBQYXJlbnQuc3R5bGUudG9wID0gTWF0aC5tYXgoc3ZnUmVjdC50b3AgLSByZWN0LnRvcCwgMCkgKyAncHgnO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVuZGVyQW5ub3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFubm90YXRpb25Nb2R1bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFubm90YXRpb25Nb2R1bGUucmVuZGVyQW5ub3RhdGlvbnMoaGVscGVyXzMuZ2V0RWxlbWVudCh0aGlzLmVsZW1lbnQuaWQgKyAnX1NlY29uZGFyeV9FbGVtZW50JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucHJvY2Vzc0V4cGxvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlzaWJsZVNlcmllc1swXS5leHBsb2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjY0Jhc2VNb2R1bGUuaW52b2tlRXhwbG9kZSgpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVuZGVyU2VyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zdmdPYmplY3QuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5jcmVhdGVHcm91cCh7IGlkOiB0aGlzLmVsZW1lbnQuaWQgKyAnX1Nlcmllc0NvbGxlY3Rpb24nIH0pKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnZpc2libGVTZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzLnZpc2libGUgJiYgdGhpc1soaGVscGVyXzIuZmlyc3RUb0xvd2VyQ2FzZShzZXJpZXMudHlwZSkgKyAnU2VyaWVzTW9kdWxlJyldKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbKGhlbHBlcl8yLmZpcnN0VG9Mb3dlckNhc2Uoc2VyaWVzLnR5cGUpICsgJ1Nlcmllc01vZHVsZScpXS5pbml0UHJvcGVydGllcyh0aGlzLCBzZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXMucmVuZGVyU2VyaWVzKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnJlbmRlckJvcmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5ib3JkZXIud2lkdGg7XG4gICAgICAgICAgICB0aGlzLnN2Z09iamVjdC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRyYXdSZWN0YW5nbGUobmV3IGhlbHBlcl8xLlJlY3RPcHRpb24odGhpcy5lbGVtZW50LmlkICsgJ19ib3JkZXInLCB0aGlzLmJhY2tncm91bmQsIHRoaXMuYm9yZGVyLCAxLCBuZXcgaGVscGVyXzEuUmVjdChwYWRkaW5nIC8gMiwgcGFkZGluZyAvIDIsIHRoaXMuYXZhaWxhYmxlU2l6ZS53aWR0aCAtIHBhZGRpbmcsIHRoaXMuYXZhaWxhYmxlU2l6ZS5oZWlnaHQgLSBwYWRkaW5nKSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnJlbmRlckxlZ2VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUgfHwgIXRoaXMubGVnZW5kU2V0dGluZ3MudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uTGVnZW5kTW9kdWxlLmxlZ2VuZENvbGxlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGVTZXJpZXNbMF0udHlwZSA9PT0gJ1BpZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUuZ2V0U21hcnRMZWdlbmRMb2NhdGlvbih0aGlzLnZpc2libGVTZXJpZXNbMF0ubGFiZWxCb3VuZCwgdGhpcy5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUubGVnZW5kQm91bmRzLCB0aGlzLm1hcmdpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uTGVnZW5kTW9kdWxlLnJlbmRlckxlZ2VuZCh0aGlzLCB0aGlzLmxlZ2VuZFNldHRpbmdzLCB0aGlzLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5sZWdlbmRCb3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucHJvY2Vzc1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUgfHwgdGhpcy5zZWxlY3Rpb25Nb2RlID09PSAnTm9uZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGFJbmRleGVzID0gZWoyX2Jhc2VfMy5leHRlbmQoW10sIHRoaXMuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkRGF0YUluZGV4ZXMsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUuaW52b2tlU2VsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRGF0YUluZGV4ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlLnNlbGVjdGVkRGF0YUluZGV4ZXMgPSBzZWxlY3RlZERhdGFJbmRleGVzO1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlLnJlZHJhd1NlbGVjdGlvbih0aGlzLCB0aGlzLnNlbGVjdGlvbk1vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVuZGVyVGl0bGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGl0bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXhUaXRsZVNpemUgPSB0aGlzLmF2YWlsYWJsZVNpemUud2lkdGggLSB0aGlzLm1hcmdpbi5sZWZ0IC0gdGhpcy5tYXJnaW4ucmlnaHQ7XG4gICAgICAgICAgICB2YXIgdHJpbW1lZFRpdGxlID0gaGVscGVyXzEudGV4dFRyaW0obWF4VGl0bGVTaXplLCB0aGlzLnRpdGxlLCB0aGlzLnRpdGxlU3R5bGUpO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQodHJpbW1lZFRpdGxlLCB0aGlzLnRpdGxlU3R5bGUpO1xuICAgICAgICAgICAgaGVscGVyXzIudGV4dEVsZW1lbnQobmV3IGhlbHBlcl8yLlRleHRPcHRpb24odGhpcy5lbGVtZW50LmlkICsgJ190aXRsZScsIGhlbHBlcl8zLnRpdGxlUG9zaXRpb25YKHRoaXMuYXZhaWxhYmxlU2l6ZSwgdGhpcy5tYXJnaW4ubGVmdCwgdGhpcy5tYXJnaW4ubGVmdCwgdGhpcy50aXRsZVN0eWxlLCBlbGVtZW50U2l6ZSksIHRoaXMubWFyZ2luLnRvcCArIChlbGVtZW50U2l6ZS5oZWlnaHQgKiAzIC8gNCksICdzdGFydCcsIHRyaW1tZWRUaXRsZSwgJycsICdhdXRvJyksIHRoaXMudGl0bGVTdHlsZSwgdGhpcy50aXRsZVN0eWxlLmNvbG9yLCB0aGlzLnN2Z09iamVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5nZXRTZXJpZXNFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqZWN0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdnJylbMF07XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5yZWZyZXNoU2VyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudmlzaWJsZVNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFBvaW50cyhzZXJpZXMucG9pbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLnJlZnJlc2hQb2ludHMgPSBmdW5jdGlvbiAocG9pbnRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHBvaW50c18xID0gcG9pbnRzOyBfaSA8IHBvaW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c18xW19pXTtcbiAgICAgICAgICAgICAgICBwb2ludC5sYWJlbFBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBwb2ludC5sYWJlbFJlZ2lvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgcG9pbnQubGFiZWxWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FjY3VtdWxhdGlvbmNoYXJ0JztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVuV2lyZUV2ZW50cygpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZS1hY2N1bXVsYXRpb25jaGFydCcpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUucmVxdWlyZWRNb2R1bGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1vZHVsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBlbmFibGVBbm5vdGF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1lbWJlcjogdGhpcy50eXBlICsgJ1NlcmllcycsXG4gICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdBY2N1bXVsYXRpb25MZWdlbmQnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbmREYXRhbGFiZWxWaXNpYmlsaXR5KCkpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXI6ICdBY2N1bXVsYXRpb25EYXRhTGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBbdGhpc11cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnRvb2x0aXAuZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnQWNjdW11bGF0aW9uVG9vbHRpcCcsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSAhPT0gJ05vbmUnKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnQWNjdW11bGF0aW9uU2VsZWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogW3RoaXNdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVBbm5vdGF0aW9uID0gdGhpcy5hbm5vdGF0aW9ucy5zb21lKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAodmFsdWUuY29udGVudCAhPT0gbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChlbmFibGVBbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyOiAnQW5ub3RhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IFt0aGlzLCB0aGlzLmFubm90YXRpb25zXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZXM7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5maW5kRGF0YWxhYmVsVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnNlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMuZGF0YUxhYmVsLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUuZ2V0UGVyc2lzdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZS5vblByb3BlcnR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdQcm9wLCBvbGRQcm9wKSB7XG4gICAgICAgICAgICB2YXIgdXBkYXRlID0ge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hFbGVtZW50czogZmFsc2UsIHJlZnJlc2hCb3VuZHM6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG5ld1Byb3ApOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0aGVtZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVTZXJpZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLnRpdGxlID09PSAnJyB8fCBvbGRQcm9wLnRpdGxlID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5yZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5yZWZyZXNoRWxlbWVudHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hlaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWFyZ2luJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZS5yZWZyZXNoQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0aXRsZVN0eWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQcm9wLnRpdGxlU3R5bGUgJiYgbmV3UHJvcC50aXRsZVN0eWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucmVmcmVzaEJvdW5kcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucmVmcmVzaEVsZW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdsZWdlbmRTZXR0aW5ncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucmVmcmVzaEJvdW5kcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucmVmcmVzaEVsZW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdiYWNrZ3JvdW5kJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYm9yZGVyJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYW5ub3RhdGlvbnMnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVTbWFydExhYmVscyc6XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUucmVmcmVzaEVsZW1lbnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpc011bHRpU2VsZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0ZWREYXRhSW5kZXhlcyc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdGlvbk1vZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodGhpcy5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUuc2VsZWN0ZWREYXRhSW5kZXhlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUuaW52b2tlU2VsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb25TZWxlY3Rpb25Nb2R1bGUucmVkcmF3U2VsZWN0aW9uKHRoaXMsIG9sZFByb3Auc2VsZWN0aW9uTW9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF1cGRhdGUucmVmcmVzaEJvdW5kcyAmJiB1cGRhdGUucmVmcmVzaEVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQaWVTdmcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1cGRhdGUucmVmcmVzaEJvdW5kcykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFNlcmllcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUGllU3ZnKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnRzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2N1bXVsYXRpb25DaGFydDtcbiAgICB9KGVqMl9iYXNlXzEuQ29tcG9uZW50KSk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuUHJvcGVydHkobnVsbClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwid2lkdGhcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJoZWlnaHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eShudWxsKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJ0aXRsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgodGhlbWVfMS5UaGVtZS5jaGFydFRpdGxlRm9udCwgYmFzZV8xLkZvbnQpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcInRpdGxlU3R5bGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBsZWdlbmRfMS5MZWdlbmRTZXR0aW5ncylcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwibGVnZW5kU2V0dGluZ3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBhY2NfYmFzZV8xLkFjY3VtdWxhdGlvblRvb2x0aXBTZXR0aW5ncylcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwidG9vbHRpcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KCdOb25lJylcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwic2VsZWN0aW9uTW9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLlByb3BlcnR5KGZhbHNlKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJpc011bHRpU2VsZWN0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29sbGVjdGlvbihbXSwgYmFzZV8xLkluZGV4ZXMpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcInNlbGVjdGVkRGF0YUluZGV4ZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Db21wbGV4KHt9LCBiYXNlXzEuTWFyZ2luKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJtYXJnaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0cnVlKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJlbmFibGVTbWFydExhYmVsc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8xLkNvbXBsZXgoeyBjb2xvcjogJyNEREREREQnLCB3aWR0aDogMCB9LCBiYXNlXzEuQm9yZGVyKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJib3JkZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSh0aGVtZV8xLlRoZW1lLmNoYXJ0QmFja2dyb3VuZENvbG9yKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJiYWNrZ3JvdW5kXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29sbGVjdGlvbihbe31dLCBhY2NfYmFzZV8xLkFjY3VtdWxhdGlvblNlcmllcylcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwic2VyaWVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzEuQ29sbGVjdGlvbihbe31dLCBhY2NfYmFzZV8yLkFjY3VtdWxhdGlvbkFubm90YXRpb25TZXR0aW5ncylcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwiYW5ub3RhdGlvbnNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Qcm9wZXJ0eSgnTWF0ZXJpYWwnKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJ0aGVtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwibG9hZGVkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJsb2FkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJzZXJpZXNSZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcImxlZ2VuZFJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwidGV4dFJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwidG9vbHRpcFJlbmRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwicG9pbnRSZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcImFubm90YXRpb25SZW5kZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcImJlZm9yZVByaW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJjaGFydE1vdXNlTW92ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwiY2hhcnRNb3VzZUNsaWNrXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJhbmltYXRpb25Db21wbGV0ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwiY2hhcnRNb3VzZURvd25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMi5FdmVudCgpXG4gICAgXSwgQWNjdW11bGF0aW9uQ2hhcnQucHJvdG90eXBlLCBcImNoYXJ0TW91c2VMZWF2ZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBlajJfYmFzZV8yLkV2ZW50KClcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydC5wcm90b3R5cGUsIFwiY2hhcnRNb3VzZVVwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGVqMl9iYXNlXzIuRXZlbnQoKVxuICAgIF0sIEFjY3VtdWxhdGlvbkNoYXJ0LnByb3RvdHlwZSwgXCJyZXNpemVkXCIsIHZvaWQgMCk7XG4gICAgQWNjdW11bGF0aW9uQ2hhcnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgZWoyX2Jhc2VfMS5Ob3RpZnlQcm9wZXJ0eUNoYW5nZXNcbiAgICBdLCBBY2N1bXVsYXRpb25DaGFydCk7XG4gICAgZXhwb3J0cy5BY2N1bXVsYXRpb25DaGFydCA9IEFjY3VtdWxhdGlvbkNoYXJ0O1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvYWNjdW11bGF0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi9yZW5kZXJlci9waWUtYmFzZVwiXSwgZnVuY3Rpb24gKHJlcXVpcmUsIGV4cG9ydHMsIGhlbHBlcl8xLCBwaWVfYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQaWVTZXJpZXMgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUGllU2VyaWVzLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBQaWVTZXJpZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUGllU2VyaWVzLnByb3RvdHlwZS5yZW5kZXJQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBjaGFydCwgb3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc3VtID0gc2VyaWVzLnN1bU9mUG9pbnRzO1xuICAgICAgICAgICAgdmFyIGRlZ3JlZSA9ICgoTWF0aC5hYnMocG9pbnQueSkgLyBzdW0pICogKHRoaXMudG90YWxBbmdsZSkpO1xuICAgICAgICAgICAgb3B0aW9uLmQgPSB0aGlzLmdldFBhdGhPcHRpb24ocG9pbnQsIGRlZ3JlZSk7XG4gICAgICAgICAgICBwb2ludC5taWRBbmdsZSA9ICh0aGlzLnN0YXJ0QW5nbGUgLSAoZGVncmVlIC8gMikpICUgMzYwO1xuICAgICAgICAgICAgcG9pbnQuZW5kQW5nbGUgPSB0aGlzLnN0YXJ0QW5nbGUgJSAzNjA7XG4gICAgICAgICAgICBwb2ludC5zeW1ib2xMb2NhdGlvbiA9IGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24ocG9pbnQubWlkQW5nbGUsICh0aGlzLnJhZGl1cyArIHRoaXMuaW5uZXJSYWRpdXMpIC8gMiwgdGhpcy5jZW50ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgUGllU2VyaWVzLnByb3RvdHlwZS5nZXRQYXRoT3B0aW9uID0gZnVuY3Rpb24gKHBvaW50LCBkZWdyZWUpIHtcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5nZXRQYXRoQXJjKHRoaXMuY2VudGVyLCB0aGlzLnN0YXJ0QW5nbGUgJSAzNjAsICh0aGlzLnN0YXJ0QW5nbGUgKyBkZWdyZWUpICUgMzYwLCB0aGlzLnJhZGl1cywgdGhpcy5pbm5lclJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgKz0gZGVncmVlO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH07XG4gICAgICAgIFBpZVNlcmllcy5wcm90b3R5cGUuYW5pbWF0ZVNlcmllcyA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24sIG9wdGlvbiwgc2VyaWVzLCBzbGljZSkge1xuICAgICAgICAgICAgdmFyIGdyb3VwSWQgPSBhY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdTZXJpZXNHcm91cCcgKyBzZXJpZXMuaW5kZXg7XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmFuaW1hdGlvbi5lbmFibGUgJiYgYWNjdW11bGF0aW9uLmFuaW1hdGVTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xpcHBhdGggPSBhY2N1bXVsYXRpb24ucmVuZGVyZXIuY3JlYXRlQ2xpcFBhdGgoeyBpZDogZ3JvdXBJZCArICdfY2xpcFBhdGgnIH0pO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbmV3IGhlbHBlcl8xLlBhdGhPcHRpb24oZ3JvdXBJZCArICdfc2xpY2UnLCAndHJhbnNwYXJlbnQnLCAxLCAndHJhbnNwYXJlbnQnLCAxLCAnJywgJycpO1xuICAgICAgICAgICAgICAgIHZhciBjbGlwc2xpY2UgPSBhY2N1bXVsYXRpb24ucmVuZGVyZXIuZHJhd1BhdGgocGF0aCk7XG4gICAgICAgICAgICAgICAgY2xpcHBhdGguYXBwZW5kQ2hpbGQoY2xpcHNsaWNlKTtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpb24uc3ZnT2JqZWN0LmFwcGVuZENoaWxkKGNsaXBwYXRoKTtcbiAgICAgICAgICAgICAgICBzbGljZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2NsaXAtcGF0aDp1cmwoIycgKyBjbGlwcGF0aC5pZCArICcpJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0FuaW1hdGlvbihjbGlwc2xpY2UsIHNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFBpZVNlcmllcy5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnUGllU2VyaWVzJztcbiAgICAgICAgfTtcbiAgICAgICAgUGllU2VyaWVzLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbikge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gUGllU2VyaWVzO1xuICAgIH0ocGllX2Jhc2VfMS5QaWVCYXNlKSk7XG4gICAgZXhwb3J0cy5QaWVTZXJpZXMgPSBQaWVTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9waWUtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIiwgXCIuL2FjY3VtdWxhdGlvbi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgaGVscGVyXzEsIGNvbnN0YW50c18xLCBhY2N1bXVsYXRpb25fYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBQaWVCYXNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKFBpZUJhc2UsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIFBpZUJhc2UoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUGllQmFzZS5wcm90b3R5cGUuaW5pdFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24gPSBjaGFydDtcbiAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5taW4oY2hhcnQuaW5pdGlhbENsaXBSZWN0LndpZHRoLCBjaGFydC5pbml0aWFsQ2xpcFJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuaW5pdEFuZ2xlcyhzZXJpZXMpO1xuICAgICAgICAgICAgdGhpcy5yYWRpdXMgPSBoZWxwZXJfMS5zdHJpbmdUb051bWJlcihzZXJpZXMucmFkaXVzLCBzaXplIC8gMik7XG4gICAgICAgICAgICB0aGlzLmlubmVyUmFkaXVzID0gaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLmlubmVyUmFkaXVzLCB0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLmxhYmVsUmFkaXVzID0gc2VyaWVzLmRhdGFMYWJlbC5wb3NpdGlvbiA9PT0gJ0luc2lkZScgPyAoKCh0aGlzLnJhZGl1cyAtIHRoaXMuaW5uZXJSYWRpdXMpIC8gMikgKyB0aGlzLmlubmVyUmFkaXVzKSA6XG4gICAgICAgICAgICAgICAgKHRoaXMucmFkaXVzICsgaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLmRhdGFMYWJlbC5jb25uZWN0b3JTdHlsZS5sZW5ndGggfHwgJzQlJywgc2l6ZSAvIDIpKTtcbiAgICAgICAgICAgIGNoYXJ0LmV4cGxvZGVEaXN0YW5jZSA9IHNlcmllcy5leHBsb2RlID8gaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoc2VyaWVzLmV4cGxvZGVPZmZzZXQsIHRoaXMucmFkaXVzKSA6IDA7XG4gICAgICAgICAgICB0aGlzLmZpbmRDZW50ZXIoY2hhcnQsIHNlcmllcyk7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRMYWJlbEJvdW5kKHNlcmllcywgc2VyaWVzLmRhdGFMYWJlbC52aXNpYmxlLCBzZXJpZXMuZGF0YUxhYmVsLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRoaXMudG90YWxBbmdsZSAtPSAwLjAwMTtcbiAgICAgICAgfTtcbiAgICAgICAgUGllQmFzZS5wcm90b3R5cGUuZmluZENlbnRlciA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24sIHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24gPSBhY2N1bXVsYXRpb247XG4gICAgICAgICAgICB0aGlzLmNlbnRlciA9IHtcbiAgICAgICAgICAgICAgICB4OiBoZWxwZXJfMS5zdHJpbmdUb051bWJlcignNTAlJywgYWNjdW11bGF0aW9uLmluaXRpYWxDbGlwUmVjdC53aWR0aCkgKyAoYWNjdW11bGF0aW9uLmluaXRpYWxDbGlwUmVjdC54KSxcbiAgICAgICAgICAgICAgICB5OiBoZWxwZXJfMS5zdHJpbmdUb051bWJlcignNTAlJywgYWNjdW11bGF0aW9uLmluaXRpYWxDbGlwUmVjdC5oZWlnaHQpICsgKGFjY3VtdWxhdGlvbi5pbml0aWFsQ2xpcFJlY3QueSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgYWNjdW11bGF0aW9uUmVjdCA9IHRoaXMuZ2V0U2VyaWVzQm91bmQoc2VyaWVzKTtcbiAgICAgICAgICAgIHZhciBhY2N1bXVsYXRpb25SZWN0Q2VudGVyID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oYWNjdW11bGF0aW9uUmVjdC54ICsgYWNjdW11bGF0aW9uUmVjdC53aWR0aCAvIDIsIGFjY3VtdWxhdGlvblJlY3QueSArIGFjY3VtdWxhdGlvblJlY3QuaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICB0aGlzLmNlbnRlci54ICs9ICh0aGlzLmNlbnRlci54IC0gYWNjdW11bGF0aW9uUmVjdENlbnRlci54KTtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgKz0gKHRoaXMuY2VudGVyLnkgLSBhY2N1bXVsYXRpb25SZWN0Q2VudGVyLnkpO1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24uY2VudGVyID0gdGhpcy5jZW50ZXI7XG4gICAgICAgIH07XG4gICAgICAgIFBpZUJhc2UucHJvdG90eXBlLmluaXRBbmdsZXMgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsQW5nbGUgPSAoc2VyaWVzLmVuZEFuZ2xlIC0gc2VyaWVzLnN0YXJ0QW5nbGUpICUgMzYwO1xuICAgICAgICAgICAgdGhpcy5zdGFydEFuZ2xlID0gc2VyaWVzLnN0YXJ0QW5nbGUgLSA5MDtcbiAgICAgICAgICAgIHRoaXMudG90YWxBbmdsZSA9IHRoaXMudG90YWxBbmdsZSA8PSAwID8gKDM2MCArIHRoaXMudG90YWxBbmdsZSkgOiB0aGlzLnRvdGFsQW5nbGU7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0QW5nbGUgPSAodGhpcy5zdGFydEFuZ2xlIDwgMCA/ICh0aGlzLnN0YXJ0QW5nbGUgKyAzNjApIDogdGhpcy5zdGFydEFuZ2xlKSAlIDM2MDtcbiAgICAgICAgfTtcbiAgICAgICAgUGllQmFzZS5wcm90b3R5cGUuZGVmYXVsdExhYmVsQm91bmQgPSBmdW5jdGlvbiAoc2VyaWVzLCB2aXNpYmxlLCBwb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGFjY3VtdWxhdGlvbkJvdW5kID0gdGhpcy5nZXRTZXJpZXNCb3VuZChzZXJpZXMpO1xuICAgICAgICAgICAgc2VyaWVzLmFjY3VtdWxhdGlvbkJvdW5kID0gYWNjdW11bGF0aW9uQm91bmQ7XG4gICAgICAgICAgICBzZXJpZXMubGFiZWxCb3VuZCA9IG5ldyBoZWxwZXJfMS5SZWN0KGFjY3VtdWxhdGlvbkJvdW5kLngsIGFjY3VtdWxhdGlvbkJvdW5kLnksIGFjY3VtdWxhdGlvbkJvdW5kLndpZHRoICsgYWNjdW11bGF0aW9uQm91bmQueCwgYWNjdW11bGF0aW9uQm91bmQuaGVpZ2h0ICsgYWNjdW11bGF0aW9uQm91bmQueSk7XG4gICAgICAgICAgICBpZiAodmlzaWJsZSAmJiBwb3NpdGlvbiA9PT0gJ091dHNpZGUnKSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmxhYmVsQm91bmQgPSBuZXcgaGVscGVyXzEuUmVjdChJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgUGllQmFzZS5wcm90b3R5cGUuZ2V0U2VyaWVzQm91bmQgPSBmdW5jdGlvbiAoc2VyaWVzKSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KEluZmluaXR5LCBJbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHkpO1xuICAgICAgICAgICAgdGhpcy5pbml0QW5nbGVzKHNlcmllcyk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0QW5nbGU7XG4gICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLnRvdGFsQW5nbGU7XG4gICAgICAgICAgICB2YXIgZW5kID0gKHRoaXMuc3RhcnRBbmdsZSArIHRvdGFsKSAlIDM2MDtcbiAgICAgICAgICAgIGVuZCA9IChlbmQgPT09IDApID8gMzYwIDogZW5kO1xuICAgICAgICAgICAgc2VyaWVzLmZpbmRNYXhCb3VuZHMocmVjdCwgdGhpcy5nZXRSZWN0RnJvbUFuZ2xlKHN0YXJ0KSk7XG4gICAgICAgICAgICBzZXJpZXMuZmluZE1heEJvdW5kcyhyZWN0LCB0aGlzLmdldFJlY3RGcm9tQW5nbGUoZW5kKSk7XG4gICAgICAgICAgICBzZXJpZXMuZmluZE1heEJvdW5kcyhyZWN0LCBuZXcgaGVscGVyXzEuUmVjdCh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCAwLCAwKSk7XG4gICAgICAgICAgICB2YXIgbmV4dFF1YW5kcmFudCA9IChNYXRoLmZsb29yKHN0YXJ0IC8gOTApICogOTAgKyA5MCkgJSAzNjA7XG4gICAgICAgICAgICB2YXIgbGFzdFF1YWRyYW50ID0gKE1hdGguZmxvb3IoZW5kIC8gOTApICogOTApICUgMzYwO1xuICAgICAgICAgICAgbGFzdFF1YWRyYW50ID0gKGxhc3RRdWFkcmFudCA9PT0gMCkgPyAzNjAgOiBsYXN0UXVhZHJhbnQ7XG4gICAgICAgICAgICBpZiAodG90YWwgPj0gOTAgfHwgbGFzdFF1YWRyYW50ID09PSBuZXh0UXVhbmRyYW50KSB7XG4gICAgICAgICAgICAgICAgc2VyaWVzLmZpbmRNYXhCb3VuZHMocmVjdCwgdGhpcy5nZXRSZWN0RnJvbUFuZ2xlKG5leHRRdWFuZHJhbnQpKTtcbiAgICAgICAgICAgICAgICBzZXJpZXMuZmluZE1heEJvdW5kcyhyZWN0LCB0aGlzLmdldFJlY3RGcm9tQW5nbGUobGFzdFF1YWRyYW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IDAgfHwgKHN0YXJ0ICsgdG90YWwgPj0gMzYwKSkge1xuICAgICAgICAgICAgICAgIHNlcmllcy5maW5kTWF4Qm91bmRzKHJlY3QsIHRoaXMuZ2V0UmVjdEZyb21BbmdsZSgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gbmV4dFF1YW5kcmFudCA9PT0gbGFzdFF1YWRyYW50ID8gMCA6IE1hdGguZmxvb3IodG90YWwgLyA5MCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmV4dFF1YW5kcmFudCA9IG5leHRRdWFuZHJhbnQgKyA5MDtcbiAgICAgICAgICAgICAgICBpZiAoKG5leHRRdWFuZHJhbnQgPCBsYXN0UXVhZHJhbnQgfHwgZW5kIDwgc3RhcnQpIHx8IHRvdGFsID09PSAzNjApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzLmZpbmRNYXhCb3VuZHMocmVjdCwgdGhpcy5nZXRSZWN0RnJvbUFuZ2xlKG5leHRRdWFuZHJhbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWN0LndpZHRoIC09IHJlY3QueDtcbiAgICAgICAgICAgIHJlY3QuaGVpZ2h0IC09IHJlY3QueTtcbiAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICB9O1xuICAgICAgICBQaWVCYXNlLnByb3RvdHlwZS5nZXRSZWN0RnJvbUFuZ2xlID0gZnVuY3Rpb24gKGFuZ2xlKSB7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKGFuZ2xlLCB0aGlzLnJhZGl1cywgdGhpcy5jZW50ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBoZWxwZXJfMS5SZWN0KGxvY2F0aW9uLngsIGxvY2F0aW9uLnksIDAsIDApO1xuICAgICAgICB9O1xuICAgICAgICBQaWVCYXNlLnByb3RvdHlwZS5nZXRQYXRoQXJjID0gZnVuY3Rpb24gKGNlbnRlciwgc3RhcnQsIGVuZCwgcmFkaXVzLCBpbm5lclJhZGl1cykge1xuICAgICAgICAgICAgdmFyIGRlZ3JlZSA9IGVuZCAtIHN0YXJ0O1xuICAgICAgICAgICAgZGVncmVlID0gZGVncmVlIDwgMCA/IChkZWdyZWUgKyAzNjApIDogZGVncmVlO1xuICAgICAgICAgICAgdmFyIGZsYWcgPSAoZGVncmVlIDwgMTgwKSA/IDAgOiAxO1xuICAgICAgICAgICAgaWYgKCFpbm5lclJhZGl1cyAmJiBpbm5lclJhZGl1cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBpZVBhdGgoY2VudGVyLCBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKHN0YXJ0LCByYWRpdXMsIGNlbnRlciksIGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24oZW5kLCByYWRpdXMsIGNlbnRlciksIHJhZGl1cywgZmxhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb3VnaG51dFBhdGgoY2VudGVyLCBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKHN0YXJ0LCByYWRpdXMsIGNlbnRlciksIGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24oZW5kLCByYWRpdXMsIGNlbnRlciksIHJhZGl1cywgaGVscGVyXzEuZGVncmVlVG9Mb2NhdGlvbihzdGFydCwgaW5uZXJSYWRpdXMsIGNlbnRlciksIGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24oZW5kLCBpbm5lclJhZGl1cywgY2VudGVyKSwgaW5uZXJSYWRpdXMsIGZsYWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBQaWVCYXNlLnByb3RvdHlwZS5nZXRQaWVQYXRoID0gZnVuY3Rpb24gKGNlbnRlciwgc3RhcnQsIGVuZCwgcmFkaXVzLCBjbG9ja1dpc2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnTSAnICsgY2VudGVyLnggKyAnICcgKyBjZW50ZXIueSArICcgTCAnICsgc3RhcnQueCArICcgJyArIHN0YXJ0LnkgKyAnIEEgJyArIHJhZGl1cyArICcgJyArXG4gICAgICAgICAgICAgICAgcmFkaXVzICsgJyAwICcgKyBjbG9ja1dpc2UgKyAnIDEgJyArIGVuZC54ICsgJyAnICsgZW5kLnkgKyAnIFonO1xuICAgICAgICB9O1xuICAgICAgICBQaWVCYXNlLnByb3RvdHlwZS5nZXREb3VnaG51dFBhdGggPSBmdW5jdGlvbiAoY2VudGVyLCBzdGFydCwgZW5kLCByYWRpdXMsIGlubmVyU3RhcnQsIGlubmVyRW5kLCBpbm5lclJhZGl1cywgY2xvY2tXaXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gJ00gJyArIHN0YXJ0LnggKyAnICcgKyBzdGFydC55ICsgJyBBICcgKyByYWRpdXMgKyAnICcgKyByYWRpdXMgKyAnIDAgJyArIGNsb2NrV2lzZSArXG4gICAgICAgICAgICAgICAgJyAxICcgKyBlbmQueCArICcgJyArIGVuZC55ICsgJyBMICcgKyBpbm5lckVuZC54ICsgJyAnICsgaW5uZXJFbmQueSArICcgQSAnICsgaW5uZXJSYWRpdXMgK1xuICAgICAgICAgICAgICAgICcgJyArIGlubmVyUmFkaXVzICsgJyAwICcgKyBjbG9ja1dpc2UgKyAnLDAgJyArIGlubmVyU3RhcnQueCArICcgJyArIGlubmVyU3RhcnQueSArICcgWic7XG4gICAgICAgIH07XG4gICAgICAgIFBpZUJhc2UucHJvdG90eXBlLmRvQW5pbWF0aW9uID0gZnVuY3Rpb24gKHNsaWNlLCBzZXJpZXMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc3RhcnRBbmdsZSA9IHNlcmllcy5zdGFydEFuZ2xlIC0gODU7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5tYXgodGhpcy5hY2N1bXVsYXRpb24uYXZhaWxhYmxlU2l6ZS5oZWlnaHQsIHRoaXMuYWNjdW11bGF0aW9uLmF2YWlsYWJsZVNpemUud2lkdGgpICogMC43NTtcbiAgICAgICAgICAgIHJhZGl1cyArPSByYWRpdXMgKiAoMC40MTQpO1xuICAgICAgICAgICAgdmFyIGVmZmVjdCA9IGhlbHBlcl8xLmdldEFuaW1hdGlvbkZ1bmN0aW9uKCdMaW5lYXInKTtcbiAgICAgICAgICAgIG5ldyBlajJfYmFzZV8xLkFuaW1hdGlvbih7fSkuYW5pbWF0ZShzbGljZSwge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzZXJpZXMuYW5pbWF0aW9uLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBzZXJpZXMuYW5pbWF0aW9uLmRlbGF5LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVmZmVjdChhcmdzLnRpbWVTdGFtcCwgc3RhcnRBbmdsZSwgX3RoaXMudG90YWxBbmdsZSwgYXJncy5kdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHNsaWNlLnNldEF0dHJpYnV0ZSgnZCcsIF90aGlzLmdldFBhdGhBcmMoX3RoaXMuY2VudGVyLCBzdGFydEFuZ2xlLCB2YWx1ZSwgcmFkaXVzLCAwKSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbmQ6IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWNlLnNldEF0dHJpYnV0ZSgnZCcsIF90aGlzLmdldFBhdGhBcmMoX3RoaXMuY2VudGVyLCAwLCAzNTkuOTk5OTksIHJhZGl1cywgMCkpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hY2N1bXVsYXRpb24udHJpZ2dlcihjb25zdGFudHNfMS5hbmltYXRpb25Db21wbGV0ZSwgeyBzZXJpZXM6IHNlcmllcywgYWNjdW11bGF0aW9uOiBfdGhpcy5hY2N1bXVsYXRpb24gfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhbGFiZWxHcm91cCA9IGhlbHBlcl8xLmdldEVsZW1lbnQoX3RoaXMuYWNjdW11bGF0aW9uLmVsZW1lbnQuaWQgKyAnX2RhdGFsYWJlbF9TZXJpZXNfJyArIHNlcmllcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFsYWJlbEdyb3VwLnN0eWxlLnZpc2liaWxpdHkgPSBfdGhpcy5hY2N1bXVsYXRpb24uaXNEZXN0cm95ZWQgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFBpZUJhc2U7XG4gICAgfShhY2N1bXVsYXRpb25fYmFzZV8xLkFjY3VtdWxhdGlvbkJhc2UpKTtcbiAgICBleHBvcnRzLlBpZUJhc2UgPSBQaWVCYXNlO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvcmVuZGVyZXIvcGllLWJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiLi90cmlhbmd1bGFyLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCB0cmlhbmd1bGFyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgRnVubmVsU2VyaWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEZ1bm5lbFNlcmllcywgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gRnVubmVsU2VyaWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIEZ1bm5lbFNlcmllcy5wcm90b3R5cGUuZ2V0U2VnbWVudERhdGEgPSBmdW5jdGlvbiAocG9pbnQsIHNlcmllcywgY2hhcnQpIHtcbiAgICAgICAgICAgIHZhciBsaW5lV2lkdGg7XG4gICAgICAgICAgICB2YXIgdG9wUmFkaXVzO1xuICAgICAgICAgICAgdmFyIGJvdHRvbVJhZGl1cztcbiAgICAgICAgICAgIHZhciBlbmRUb3A7XG4gICAgICAgICAgICB2YXIgZW5kQm90dG9tO1xuICAgICAgICAgICAgdmFyIG1pblJhZGl1cztcbiAgICAgICAgICAgIHZhciBlbmRNaW47XG4gICAgICAgICAgICB2YXIgYm90dG9tWTtcbiAgICAgICAgICAgIHZhciBhcmVhID0gc2VyaWVzLnRyaWFuZ2xlU2l6ZTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgdmFyIGV4dHJhU3BhY2UgPSAoY2hhcnQuaW5pdGlhbENsaXBSZWN0LndpZHRoIC0gc2VyaWVzLnRyaWFuZ2xlU2l6ZS53aWR0aCkgLyAyO1xuICAgICAgICAgICAgdmFyIGVtcHR5U3BhY2VBdExlZnQgPSBleHRyYVNwYWNlICsgY2hhcnQuaW5pdGlhbENsaXBSZWN0Lng7XG4gICAgICAgICAgICB2YXIgc2VyaWVzVG9wID0gY2hhcnQuaW5pdGlhbENsaXBSZWN0LnkgKyAoY2hhcnQuaW5pdGlhbENsaXBSZWN0LmhlaWdodCAtIGFyZWEuaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICB2YXIgdG9wID0gcG9pbnQueVJhdGlvICogYXJlYS5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgYm90dG9tID0gdG9wICsgcG9pbnQuaGVpZ2h0UmF0aW8gKiBhcmVhLmhlaWdodDtcbiAgICAgICAgICAgIHZhciBuZWNrU2l6ZSA9IHNlcmllcy5uZWNrU2l6ZTtcbiAgICAgICAgICAgIGxpbmVXaWR0aCA9IG5lY2tTaXplLndpZHRoICsgKGFyZWEud2lkdGggLSBuZWNrU2l6ZS53aWR0aCkgKiAoKGFyZWEuaGVpZ2h0IC0gbmVja1NpemUuaGVpZ2h0IC0gdG9wKSAvXG4gICAgICAgICAgICAgICAgKGFyZWEuaGVpZ2h0IC0gbmVja1NpemUuaGVpZ2h0KSk7XG4gICAgICAgICAgICB0b3BSYWRpdXMgPSAoYXJlYS53aWR0aCAvIDIpIC0gbGluZVdpZHRoIC8gMjtcbiAgICAgICAgICAgIGVuZFRvcCA9IHRvcFJhZGl1cyArIGxpbmVXaWR0aDtcbiAgICAgICAgICAgIGlmIChib3R0b20gPiBhcmVhLmhlaWdodCAtIG5lY2tTaXplLmhlaWdodCB8fCBhcmVhLmhlaWdodCA9PT0gbmVja1NpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgbGluZVdpZHRoID0gbmVja1NpemUud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGggPSBuZWNrU2l6ZS53aWR0aCArIChhcmVhLndpZHRoIC0gbmVja1NpemUud2lkdGgpICpcbiAgICAgICAgICAgICAgICAgICAgKChhcmVhLmhlaWdodCAtIG5lY2tTaXplLmhlaWdodCAtIGJvdHRvbSkgLyAoYXJlYS5oZWlnaHQgLSBuZWNrU2l6ZS5oZWlnaHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdHRvbVJhZGl1cyA9IChhcmVhLndpZHRoIC8gMikgLSAobGluZVdpZHRoIC8gMik7XG4gICAgICAgICAgICBlbmRCb3R0b20gPSBib3R0b21SYWRpdXMgKyBsaW5lV2lkdGg7XG4gICAgICAgICAgICBpZiAodG9wID49IGFyZWEuaGVpZ2h0IC0gbmVja1NpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdG9wUmFkaXVzID0gYm90dG9tUmFkaXVzID0gbWluUmFkaXVzID0gKGFyZWEud2lkdGggLyAyKSAtIG5lY2tTaXplLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICBlbmRUb3AgPSBlbmRCb3R0b20gPSBlbmRNaW4gPSAoYXJlYS53aWR0aCAvIDIpICsgbmVja1NpemUud2lkdGggLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYm90dG9tID4gKGFyZWEuaGVpZ2h0IC0gbmVja1NpemUuaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIG1pblJhZGl1cyA9IGJvdHRvbVJhZGl1cyA9IChhcmVhLndpZHRoIC8gMikgLSBsaW5lV2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIGVuZE1pbiA9IGVuZEJvdHRvbSA9IG1pblJhZGl1cyArIGxpbmVXaWR0aDtcbiAgICAgICAgICAgICAgICBib3R0b21ZID0gYXJlYS5oZWlnaHQgLSBuZWNrU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9pbnRzID0gW107XG4gICAgICAgICAgICB0b3AgKz0gc2VyaWVzVG9wO1xuICAgICAgICAgICAgYm90dG9tICs9IHNlcmllc1RvcDtcbiAgICAgICAgICAgIGJvdHRvbVkgKz0gc2VyaWVzVG9wO1xuICAgICAgICAgICAgdmFyIGxpbmUxID0geyB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgdG9wUmFkaXVzLCB5OiB0b3AgfTtcbiAgICAgICAgICAgIHZhciBsaW5lMiA9IHsgeDogZW1wdHlTcGFjZUF0TGVmdCArIG9mZnNldCArIGVuZFRvcCwgeTogdG9wIH07XG4gICAgICAgICAgICB2YXIgbGluZTQgPSB7IHg6IGVtcHR5U3BhY2VBdExlZnQgKyBvZmZzZXQgKyBlbmRCb3R0b20sIHk6IGJvdHRvbSB9O1xuICAgICAgICAgICAgdmFyIGxpbmU1ID0geyB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgYm90dG9tUmFkaXVzLCB5OiBib3R0b20gfTtcbiAgICAgICAgICAgIHZhciBsaW5lMyA9IHsgeDogZW1wdHlTcGFjZUF0TGVmdCArIG9mZnNldCArIGVuZEJvdHRvbSwgeTogYm90dG9tIH07XG4gICAgICAgICAgICB2YXIgbGluZTYgPSB7IHg6IGVtcHR5U3BhY2VBdExlZnQgKyBvZmZzZXQgKyBib3R0b21SYWRpdXMsIHk6IGJvdHRvbSB9O1xuICAgICAgICAgICAgaWYgKGJvdHRvbVkpIHtcbiAgICAgICAgICAgICAgICBsaW5lMyA9IHsgeDogZW1wdHlTcGFjZUF0TGVmdCArIG9mZnNldCArIGVuZE1pbiwgeTogYm90dG9tWSB9O1xuICAgICAgICAgICAgICAgIGxpbmU2ID0geyB4OiBlbXB0eVNwYWNlQXRMZWZ0ICsgb2Zmc2V0ICsgbWluUmFkaXVzLCB5OiBib3R0b21ZIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcG9seWdvbiA9IFtsaW5lMSwgbGluZTIsIGxpbmUzLCBsaW5lNCwgbGluZTUsIGxpbmU2XTtcbiAgICAgICAgICAgIHRoaXMuc2V0TGFiZWxMb2NhdGlvbihzZXJpZXMsIHBvaW50LCBwb2x5Z29uKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmZpbmRQYXRoKHBvbHlnb24pO1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgRnVubmVsU2VyaWVzLnByb3RvdHlwZS5yZW5kZXJQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgc2VyaWVzLCBjaGFydCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMuZ2V0U2VnbWVudERhdGEocG9pbnQsIHNlcmllcywgY2hhcnQpO1xuICAgICAgICAgICAgcG9pbnQubWlkQW5nbGUgPSAwO1xuICAgICAgICAgICAgb3B0aW9ucy5kID0gZGlyZWN0aW9uO1xuICAgICAgICB9O1xuICAgICAgICBGdW5uZWxTZXJpZXMucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Z1bm5lbFNlcmllcyc7XG4gICAgICAgIH07XG4gICAgICAgIEZ1bm5lbFNlcmllcy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEZ1bm5lbFNlcmllcztcbiAgICB9KHRyaWFuZ3VsYXJfYmFzZV8xLlRyaWFuZ3VsYXJCYXNlKSk7XG4gICAgZXhwb3J0cy5GdW5uZWxTZXJpZXMgPSBGdW5uZWxTZXJpZXM7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9mdW5uZWwtc2VyaWVzLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vbW9kZWwvYWNjLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vbGVnZW5kL2xlZ2VuZFwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBhY2NfYmFzZV8xLCBsZWdlbmRfMSwgaGVscGVyXzEpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4gICAgdmFyIEFjY3VtdWxhdGlvbkxlZ2VuZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2N1bXVsYXRpb25MZWdlbmQsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIEFjY3VtdWxhdGlvbkxlZ2VuZChjaGFydCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY2hhcnQpIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5saWJyYXJ5ID0gX3RoaXM7XG4gICAgICAgICAgICBfdGhpcy50aXRsZVJlY3QgPSBuZXcgaGVscGVyXzEuUmVjdCgwLCBjaGFydC5tYXJnaW4udG9wLCAwLCAwKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldExlZ2VuZE9wdGlvbnMgPSBmdW5jdGlvbiAoY2hhcnQsIHNlcmllcykge1xuICAgICAgICAgICAgdGhpcy5sZWdlbmRDb2xsZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzVHlwZSA9IHNlcmllc1tpXS50eXBlO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXNUeXBlID09PSAnUGllJyB8fCBzZXJpZXNUeXBlID09PSAnRG91Z2hudXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc1R5cGUgPSAoc2VyaWVzW2ldLmlubmVyUmFkaXVzICE9PSAnMCcgJiYgc2VyaWVzW2ldLmlubmVyUmFkaXVzICE9PSAnMCUnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAnRG91Z2hudXQnIDogJ1BpZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBzZXJpZXNbaV0ucG9pbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwb2ludC54KSAmJiAhZWoyX2Jhc2VfMS5pc051bGxPclVuZGVmaW5lZChwb2ludC55KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWdlbmRDb2xsZWN0aW9ucy5wdXNoKG5ldyBsZWdlbmRfMS5MZWdlbmRPcHRpb25zKHBvaW50LngudG9TdHJpbmcoKSwgcG9pbnQuY29sb3IsIHNlcmllc1tpXS5sZWdlbmRTaGFwZSwgcG9pbnQudmlzaWJsZSwgc2VyaWVzVHlwZSwgbnVsbCwgbnVsbCwgcG9pbnQuaW5kZXgsIHNlcmllc1tpXS5pbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldExlZ2VuZEJvdW5kcyA9IGZ1bmN0aW9uIChhdmFpbGFibGVTaXplLCBsZWdlbmRCb3VuZHMsIGxlZ2VuZCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhV2lkdGggPSAwO1xuICAgICAgICAgICAgdmFyIGV4dHJhSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gbGVnZW5kLnBhZGRpbmc7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICAgIGV4dHJhSGVpZ2h0ID0gIWxlZ2VuZC5oZWlnaHQgPyAoKGF2YWlsYWJsZVNpemUuaGVpZ2h0IC8gMTAwKSAqIDUpIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dHJhV2lkdGggPSAhbGVnZW5kLndpZHRoID8gKChhdmFpbGFibGVTaXplLndpZHRoIC8gMTAwKSAqIDUpIDogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlZ2VuZEJvdW5kcy53aWR0aCArPSBleHRyYVdpZHRoO1xuICAgICAgICAgICAgbGVnZW5kQm91bmRzLmhlaWdodCArPSBleHRyYUhlaWdodDtcbiAgICAgICAgICAgIHZhciBzaGFwZVBhZGRpbmcgPSBsZWdlbmQuc2hhcGVQYWRkaW5nO1xuICAgICAgICAgICAgdmFyIG1heGltdW1XaWR0aCA9IDA7XG4gICAgICAgICAgICB2YXIgc2hhcGVXaWR0aCA9IGxlZ2VuZC5zaGFwZVdpZHRoO1xuICAgICAgICAgICAgdmFyIHJvd1dpZHRoID0gMDtcbiAgICAgICAgICAgIHZhciByb3dDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgY29sdW1uV2lkdGggPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2x1bW5IZWlnaHQgPSAwO1xuICAgICAgICAgICAgdmFyIGxlZ2VuZFdpZHRoID0gMDtcbiAgICAgICAgICAgIHRoaXMubWF4SXRlbUhlaWdodCA9IE1hdGgubWF4KGhlbHBlcl8xLm1lYXN1cmVUZXh0KCdNZWFzdXJlVGV4dCcsIGxlZ2VuZC50ZXh0U3R5bGUpLmhlaWdodCwgbGVnZW5kLnNoYXBlSGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBsZWdlbmRFdmVudEFyZ3M7XG4gICAgICAgICAgICB2YXIgcmVuZGVyID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5sZWdlbmRDb2xsZWN0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVnZW5kT3B0aW9uID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGxlZ2VuZEV2ZW50QXJncyA9IHsgZmlsbDogbGVnZW5kT3B0aW9uLmZpbGwsIHRleHQ6IGxlZ2VuZE9wdGlvbi50ZXh0LCBzaGFwZTogbGVnZW5kT3B0aW9uLnNoYXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGVnZW5kUmVuZGVyJywgY2FuY2VsOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQudHJpZ2dlcignbGVnZW5kUmVuZGVyJywgbGVnZW5kRXZlbnRBcmdzKTtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ucmVuZGVyID0gIWxlZ2VuZEV2ZW50QXJncy5jYW5jZWw7XG4gICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLnRleHQgPSBsZWdlbmRFdmVudEFyZ3MudGV4dDtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24uZmlsbCA9IGxlZ2VuZEV2ZW50QXJncy5maWxsO1xuICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5zaGFwZSA9IGxlZ2VuZEV2ZW50QXJncy5zaGFwZTtcbiAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24udGV4dFNpemUgPSBoZWxwZXJfMS5tZWFzdXJlVGV4dChsZWdlbmRPcHRpb24udGV4dCwgbGVnZW5kLnRleHRTdHlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGxlZ2VuZE9wdGlvbi5yZW5kZXIgJiYgbGVnZW5kT3B0aW9uLnRleHQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZFdpZHRoID0gc2hhcGVXaWR0aCArIHNoYXBlUGFkZGluZyArIGxlZ2VuZE9wdGlvbi50ZXh0U2l6ZS53aWR0aCArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcm93Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5IZWlnaHQgPSAocm93Q291bnQgKiAodGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZykpICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocm93Q291bnQgKiAodGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZykpICsgcGFkZGluZyA+IGxlZ2VuZEJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5IZWlnaHQgPSBNYXRoLm1heChjb2x1bW5IZWlnaHQsIChyb3dDb3VudCAqICh0aGlzLm1heEl0ZW1IZWlnaHQgKyBwYWRkaW5nKSkgKyBwYWRkaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dXaWR0aCA9IHJvd1dpZHRoICsgbWF4aW11bVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoLnB1c2gobWF4aW11bVdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSBNYXRoLm1heChyb3dDb3VudCwgdGhpcy50b3RhbFBhZ2VzIHx8IDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1XaWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Q291bnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bVdpZHRoID0gTWF0aC5tYXgobGVnZW5kV2lkdGgsIG1heGltdW1XaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3dXaWR0aCA9IHJvd1dpZHRoICsgbGVnZW5kV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVnZW5kQm91bmRzLndpZHRoIDwgKHBhZGRpbmcgKyByb3dXaWR0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtV2lkdGggPSBNYXRoLm1heChtYXhpbXVtV2lkdGgsIChyb3dXaWR0aCArIHBhZGRpbmcgLSBsZWdlbmRXaWR0aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA9PT0gMCAmJiAobGVnZW5kV2lkdGggIT09IHJvd1dpZHRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1dpZHRoID0gbGVnZW5kV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Q291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5IZWlnaHQgPSAocm93Q291bnQgKiAodGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZykpICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICByb3dXaWR0aCA9IHJvd1dpZHRoICsgbWF4aW11bVdpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdpbmcgPSBsZWdlbmRCb3VuZHMud2lkdGggPCAocm93V2lkdGggKyBwYWRkaW5nKTtcbiAgICAgICAgICAgICAgICBjb2x1bW5IZWlnaHQgPSBNYXRoLm1heChjb2x1bW5IZWlnaHQsICgodGhpcy50b3RhbFBhZ2VzIHx8IDEpICogKHRoaXMubWF4SXRlbUhlaWdodCArIHBhZGRpbmcpKSArIHBhZGRpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNQYWdpbmcgPSB0aGlzLmlzUGFnaW5nICYmICh0aGlzLnRvdGFsUGFnZXMgPiAxKTtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uV2lkdGhbY29sdW1uV2lkdGgubGVuZ3RoIC0gMV0gIT09IG1heGltdW1XaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5XaWR0aC5wdXNoKG1heGltdW1XaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1BhZ2luZyA9IGxlZ2VuZEJvdW5kcy5oZWlnaHQgPCBjb2x1bW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFBhZ2VzID0gdGhpcy50b3RhbFJvd0NvdW50ID0gcm93Q291bnQ7XG4gICAgICAgICAgICAgICAgY29sdW1uSGVpZ2h0ID0gTWF0aC5tYXgoY29sdW1uSGVpZ2h0LCAodGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZykgKyBwYWRkaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF4Q29sdW1ucyA9IDA7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmlzVmVydGljYWwgPyB0aGlzLmdldE1heENvbHVtbihjb2x1bW5XaWR0aCwgbGVnZW5kQm91bmRzLndpZHRoLCBwYWRkaW5nLCByb3dXaWR0aCArIHBhZGRpbmcpIDpcbiAgICAgICAgICAgICAgICBNYXRoLm1heChyb3dXaWR0aCArIHBhZGRpbmcsIG1heGltdW1XaWR0aCk7XG4gICAgICAgICAgICBpZiAocmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3VuZHMod2lkdGgsIGNvbHVtbkhlaWdodCwgbGVnZW5kLCBsZWdlbmRCb3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3VuZHMoMCwgMCwgbGVnZW5kLCBsZWdlbmRCb3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldE1heENvbHVtbiA9IGZ1bmN0aW9uIChjb2x1bW5zLCB3aWR0aCwgcGFkZGluZywgcm93V2lkdGgpIHtcbiAgICAgICAgICAgIHZhciBtYXhQYWdlQ29sdW1uID0gcGFkZGluZztcbiAgICAgICAgICAgIHRoaXMubWF4Q29sdW1uV2lkdGggPSBNYXRoLm1heC5hcHBseShudWxsLCBjb2x1bW5zKTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgY29sdW1uc18xID0gY29sdW1uczsgX2kgPCBjb2x1bW5zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGNvbHVtbnNfMVtfaV07XG4gICAgICAgICAgICAgICAgbWF4UGFnZUNvbHVtbiArPSB0aGlzLm1heENvbHVtbldpZHRoO1xuICAgICAgICAgICAgICAgIHRoaXMubWF4Q29sdW1ucysrO1xuICAgICAgICAgICAgICAgIGlmIChtYXhQYWdlQ29sdW1uICsgcGFkZGluZyA+IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFBhZ2VDb2x1bW4gLT0gdGhpcy5tYXhDb2x1bW5XaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhDb2x1bW5zLS07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaXNQYWdpbmcgPSAobWF4UGFnZUNvbHVtbiA8IHJvd1dpZHRoKSAmJiAodGhpcy50b3RhbFBhZ2VzID4gMSk7XG4gICAgICAgICAgICBpZiAobWF4UGFnZUNvbHVtbiA9PT0gcGFkZGluZykge1xuICAgICAgICAgICAgICAgIG1heFBhZ2VDb2x1bW4gPSB3aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF4Q29sdW1ucyA9IE1hdGgubWF4KDEsIHRoaXMubWF4Q29sdW1ucyk7XG4gICAgICAgICAgICB0aGlzLm1heFdpZHRoID0gbWF4UGFnZUNvbHVtbjtcbiAgICAgICAgICAgIHJldHVybiBtYXhQYWdlQ29sdW1uO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldEF2YWlsV2lkdGggPSBmdW5jdGlvbiAodHgsIHdpZHRoLCBsZWdlbmRYKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aGlzLm1heFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdpZHRoIC0gKCh0aGlzLmxlZ2VuZC5wYWRkaW5nICogMikgKyB0aGlzLmxlZ2VuZC5zaGFwZVdpZHRoICsgdGhpcy5sZWdlbmQuc2hhcGVQYWRkaW5nKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uTGVnZW5kLnByb3RvdHlwZS5nZXRSZW5kZXJQb2ludCA9IGZ1bmN0aW9uIChsZWdlbmRPcHRpb24sIHN0YXJ0LCB0ZXh0UGFkZGluZywgcHJldkxlZ2VuZCwgcmVjdCwgY291bnQsIGZpcnN0TGVnZW5kKSB7XG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMubGVnZW5kLnBhZGRpbmc7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSBmaXJzdExlZ2VuZCB8fCAocHJldkxlZ2VuZC5sb2NhdGlvbi55ICsgKHRoaXMubWF4SXRlbUhlaWdodCAqIDEuNSkgKyAocGFkZGluZyAqIDIpID4gcmVjdC55ICsgcmVjdC5oZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54ID0gcHJldkxlZ2VuZC5sb2NhdGlvbi54ICsgKChjb3VudCA9PT0gZmlyc3RMZWdlbmQpID8gMCA6IHRoaXMubWF4Q29sdW1uV2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ubG9jYXRpb24ueSA9IHN0YXJ0Lnk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVhDb2xsZWN0aW9ucy5wdXNoKGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54IC0gKHRoaXMubGVnZW5kLnNoYXBlV2lkdGggLyAyKSAtIHBhZGRpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54ID0gcHJldkxlZ2VuZC5sb2NhdGlvbi54O1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24ubG9jYXRpb24ueSA9IHByZXZMZWdlbmQubG9jYXRpb24ueSArIHRoaXMubWF4SXRlbUhlaWdodCArIHBhZGRpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzQm91bmQgPSAocHJldkxlZ2VuZC5sb2NhdGlvbi54ICsgdGV4dFBhZGRpbmcgKyBwcmV2TGVnZW5kLnRleHRTaXplLndpZHRoKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByZXZpb3VzQm91bmQgKyAobGVnZW5kT3B0aW9uLnRleHRTaXplLndpZHRoICsgdGV4dFBhZGRpbmcpKSA+IChyZWN0LnggKyByZWN0LndpZHRoICsgdGhpcy5sZWdlbmQuc2hhcGVXaWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi55ID0gKGNvdW50ID09PSBmaXJzdExlZ2VuZCkgPyBwcmV2TGVnZW5kLmxvY2F0aW9uLnkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkxlZ2VuZC5sb2NhdGlvbi55ICsgdGhpcy5tYXhJdGVtSGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLmxvY2F0aW9uLnggPSBzdGFydC54O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kT3B0aW9uLmxvY2F0aW9uLnkgPSBwcmV2TGVnZW5kLmxvY2F0aW9uLnk7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi5sb2NhdGlvbi54ID0gKGNvdW50ID09PSBmaXJzdExlZ2VuZCkgPyBwcmV2TGVnZW5kLmxvY2F0aW9uLnggOiBwcmV2aW91c0JvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSB0aGlzLnRvdGFsUm93Q291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXZhaWxhYmxld2lkdGggPSB0aGlzLmdldEF2YWlsV2lkdGgobGVnZW5kT3B0aW9uLmxvY2F0aW9uLngsIHRoaXMubGVnZW5kQm91bmRzLndpZHRoLCB0aGlzLmxlZ2VuZEJvdW5kcy54KTtcbiAgICAgICAgICAgIGxlZ2VuZE9wdGlvbi50ZXh0ID0gaGVscGVyXzEudGV4dFRyaW0oK2F2YWlsYWJsZXdpZHRoLnRvRml4ZWQoNCksIGxlZ2VuZE9wdGlvbi50ZXh0LCB0aGlzLmxlZ2VuZC50ZXh0U3R5bGUpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldFNtYXJ0TGVnZW5kTG9jYXRpb24gPSBmdW5jdGlvbiAobGFiZWxCb3VuZCwgbGVnZW5kQm91bmQsIG1hcmdpbikge1xuICAgICAgICAgICAgdmFyIHNwYWNlO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHNwYWNlID0gKChsYWJlbEJvdW5kLnggLSBsZWdlbmRCb3VuZC53aWR0aCkgLSBtYXJnaW4ubGVmdCkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZC54ID0gKGxhYmVsQm91bmQueCAtIGxlZ2VuZEJvdW5kLndpZHRoKSA8IG1hcmdpbi5sZWZ0ID8gbGVnZW5kQm91bmQueCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAobGFiZWxCb3VuZC54IC0gbGVnZW5kQm91bmQud2lkdGgpIC0gc3BhY2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgc3BhY2UgPSAoKHRoaXMuY2hhcnQuYXZhaWxhYmxlU2l6ZS53aWR0aCAtIG1hcmdpbi5yaWdodCkgLSAobGFiZWxCb3VuZC54ICsgbGFiZWxCb3VuZC53aWR0aCArIGxlZ2VuZEJvdW5kLndpZHRoKSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZC54ID0gKGxhYmVsQm91bmQueCArIGxhYmVsQm91bmQud2lkdGggKyBsZWdlbmRCb3VuZC53aWR0aCkgPiAodGhpcy5jaGFydC5hdmFpbGFibGVTaXplLndpZHRoIC0gbWFyZ2luLnJpZ2h0KSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZC54IDogKGxhYmVsQm91bmQueCArIGxhYmVsQm91bmQud2lkdGggKyBzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1RvcCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGl0bGVSZWN0KHRoaXMuY2hhcnQpO1xuICAgICAgICAgICAgICAgICAgICBzcGFjZSA9ICgobGFiZWxCb3VuZC55IC0gbGVnZW5kQm91bmQuaGVpZ2h0KSAtICh0aGlzLnRpdGxlUmVjdC55ICsgdGhpcy50aXRsZVJlY3QuaGVpZ2h0KSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZC55ID0gKGxhYmVsQm91bmQueSAtIGxlZ2VuZEJvdW5kLmhlaWdodCkgPCBtYXJnaW4udG9wID8gbGVnZW5kQm91bmQueSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAobGFiZWxCb3VuZC55IC0gbGVnZW5kQm91bmQuaGVpZ2h0KSAtIHNwYWNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdCb3R0b20nOlxuICAgICAgICAgICAgICAgICAgICBzcGFjZSA9ICgodGhpcy5jaGFydC5hdmFpbGFibGVTaXplLmhlaWdodCAtIG1hcmdpbi5ib3R0b20pIC0gKGxhYmVsQm91bmQueSArIGxhYmVsQm91bmQuaGVpZ2h0ICsgbGVnZW5kQm91bmQuaGVpZ2h0KSkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBsZWdlbmRCb3VuZC55ID0gbGFiZWxCb3VuZC55ICsgbGFiZWxCb3VuZC5oZWlnaHQgKyBsZWdlbmRCb3VuZC5oZWlnaHQgPiAodGhpcy5jaGFydC5hdmFpbGFibGVTaXplLmhlaWdodCAtIG1hcmdpbi5ib3R0b20pID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZEJvdW5kLnkgOiAobGFiZWxCb3VuZC55ICsgbGFiZWxCb3VuZC5oZWlnaHQpICsgc3BhY2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmdldFRpdGxlUmVjdCA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgICAgIGlmICghYWNjdW11bGF0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGl0bGVTaXplID0gaGVscGVyXzEubWVhc3VyZVRleHQoYWNjdW11bGF0aW9uLnRpdGxlLCBhY2N1bXVsYXRpb24udGl0bGVTdHlsZSk7XG4gICAgICAgICAgICB0aGlzLnRpdGxlUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KGFjY3VtdWxhdGlvbi5hdmFpbGFibGVTaXplLndpZHRoIC8gMiAtIHRpdGxlU2l6ZS53aWR0aCAvIDIsIGFjY3VtdWxhdGlvbi5tYXJnaW4udG9wLCB0aXRsZVNpemUud2lkdGgsIHRpdGxlU2l6ZS5oZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25MZWdlbmQucHJvdG90eXBlLmxlZ2VuZEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgsIGxlZ2VuZENvbGxlY3Rpb25zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxlZ2VuZENvbGxlY3Rpb25zXzEgPSBsZWdlbmRDb2xsZWN0aW9uczsgX2kgPCBsZWdlbmRDb2xsZWN0aW9uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBsZWdlbmQgPSBsZWdlbmRDb2xsZWN0aW9uc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAobGVnZW5kLnBvaW50SW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsZWdlbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkxlZ2VuZC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICAgICAgICAgIHZhciBsZWdlbmRJdGVtc0lkID0gW3RoaXMubGVnZW5kSUQgKyAnX3RleHRfJywgdGhpcy5sZWdlbmRJRCArICdfc2hhcGVfJyxcbiAgICAgICAgICAgICAgICB0aGlzLmxlZ2VuZElEICsgJ19zaGFwZV9tYXJrZXJfJ107XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRhSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREYXRhSW5kZXhlcyA9IGVqMl9iYXNlXzEuZXh0ZW5kKFtdLCB0aGlzLmNoYXJ0LmFjY3VtdWxhdGlvblNlbGVjdGlvbk1vZHVsZS5zZWxlY3RlZERhdGFJbmRleGVzLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbGVnZW5kSXRlbXNJZF8xID0gbGVnZW5kSXRlbXNJZDsgX2kgPCBsZWdlbmRJdGVtc0lkXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbGVnZW5kSXRlbXNJZF8xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SWQuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRJbmRleCA9IHBhcnNlSW50KHRhcmdldElkLnNwbGl0KGlkKVsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFNlcmllcyA9IHRoaXMuY2hhcnQudmlzaWJsZVNlcmllc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50ID0gYWNjX2Jhc2VfMS5wb2ludEJ5SW5kZXgocG9pbnRJbmRleCwgY3VycmVudFNlcmllcy5wb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVnZW5kT3B0aW9uID0gdGhpcy5sZWdlbmRCeUluZGV4KHBvaW50SW5kZXgsIHRoaXMubGVnZW5kQ29sbGVjdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFydC5sZWdlbmRTZXR0aW5ncy50b2dnbGVWaXNpYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludC52aXNpYmxlID0gIXBvaW50LnZpc2libGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmRPcHRpb24udmlzaWJsZSA9IHBvaW50LnZpc2libGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LnJlbW92ZVN2ZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvaW50LnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VyaWVzLnN1bU9mUG9pbnRzICs9IHBvaW50Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VyaWVzLnN1bU9mUG9pbnRzIC09IHBvaW50Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LnJlZnJlc2hQb2ludHMoY3VycmVudFNlcmllcy5wb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFydC5yZW5kZXJFbGVtZW50cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2hhcnQuYWNjdW11bGF0aW9uU2VsZWN0aW9uTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LmFjY3VtdWxhdGlvblNlbGVjdGlvbk1vZHVsZS5sZWdlbmRTZWxlY3Rpb24odGhpcy5jaGFydCwgMCwgcG9pbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQuaW5kZXhPZih0aGlzLmxlZ2VuZElEICsgJ19wYWdldXAnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYWdlKGV2ZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldElkLmluZGV4T2YodGhpcy5sZWdlbmRJRCArICdfcGFnZWRvd24nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYWdlKGV2ZW50LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkxlZ2VuZC5wcm90b3R5cGUuZ2V0TW9kdWxlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnQWNjdW11bGF0aW9uTGVnZW5kJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uTGVnZW5kLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNoYXJ0KSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2N1bXVsYXRpb25MZWdlbmQ7XG4gICAgfShsZWdlbmRfMS5CYXNlTGVnZW5kKSk7XG4gICAgZXhwb3J0cy5BY2N1bXVsYXRpb25MZWdlbmQgPSBBY2N1bXVsYXRpb25MZWdlbmQ7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC9yZW5kZXJlci9sZWdlbmQuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi91dGlscy9oZWxwZXJcIiwgXCIuLi8uLi9jb21tb24vdXRpbHMvaGVscGVyXCIsIFwiLi4vbW9kZWwvYWNjLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvY29uc3RhbnRzXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4vYWNjdW11bGF0aW9uLWJhc2VcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBoZWxwZXJfMSwgaGVscGVyXzIsIGhlbHBlcl8zLCBoZWxwZXJfNCwgYWNjX2Jhc2VfMSwgY29uc3RhbnRzXzEsIGhlbHBlcl81LCBhY2N1bXVsYXRpb25fYmFzZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuICAgIHZhciBBY2N1bXVsYXRpb25EYXRhTGFiZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoQWNjdW11bGF0aW9uRGF0YUxhYmVsLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2N1bXVsYXRpb25EYXRhTGFiZWwoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBhY2N1bXVsYXRpb24pIHx8IHRoaXM7XG4gICAgICAgICAgICBfdGhpcy5pZCA9IGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19kYXRhbGFiZWxfU2VyaWVzXyc7XG4gICAgICAgICAgICBpZiAoYWNjdW11bGF0aW9uLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlU2l6ZSA9IGhlbHBlcl8zLm1lYXN1cmVUZXh0KGFjY3VtdWxhdGlvbi50aXRsZSwgYWNjdW11bGF0aW9uLnRpdGxlU3R5bGUpO1xuICAgICAgICAgICAgICAgIF90aGlzLnRpdGxlUmVjdCA9IG5ldyBoZWxwZXJfMS5SZWN0KGFjY3VtdWxhdGlvbi5hdmFpbGFibGVTaXplLndpZHRoIC8gMiAtIHRpdGxlU2l6ZS53aWR0aCAvIDIsIGFjY3VtdWxhdGlvbi5tYXJnaW4udG9wLCB0aXRsZVNpemUud2lkdGgsIHRpdGxlU2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuZ2V0RGF0YUxhYmVsUG9zaXRpb24gPSBmdW5jdGlvbiAocG9pbnQsIGRhdGFMYWJlbCwgdGV4dFNpemUsIHBvaW50cywgcGFyZW50LCBpZCkge1xuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMuaXNDaXJjdWxhcigpID8gdGhpcy5sYWJlbFJhZGl1cyA6IHRoaXMuZ2V0TGFiZWxEaXN0YW5jZShwb2ludCwgZGF0YUxhYmVsKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TGFiZWxSZWdpb24ocG9pbnQsIGRhdGFMYWJlbC5wb3NpdGlvbiwgdGV4dFNpemUsIHJhZGl1cywgdGhpcy5tYXJnaW5WYWx1ZSk7XG4gICAgICAgICAgICBwb2ludC5sYWJlbEFuZ2xlID0gcG9pbnQubWlkQW5nbGU7XG4gICAgICAgICAgICBwb2ludC5sYWJlbFBvc2l0aW9uID0gZGF0YUxhYmVsLnBvc2l0aW9uO1xuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uLmVuYWJsZVNtYXJ0TGFiZWxzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTbWFydExhYmVsKHBvaW50LCBkYXRhTGFiZWwsIHRleHRTaXplLCBwb2ludHMsIHBhcmVudCwgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmdldExhYmVsUmVnaW9uID0gZnVuY3Rpb24gKHBvaW50LCBwb3NpdGlvbiwgdGV4dFNpemUsIGxhYmVsUmFkaXVzLCBtYXJnaW4sIGVuZEFuZ2xlKSB7XG4gICAgICAgICAgICBpZiAoZW5kQW5nbGUgPT09IHZvaWQgMCkgeyBlbmRBbmdsZSA9IDA7IH1cbiAgICAgICAgICAgIHZhciBsYWJlbEFuZ2xlID0gZW5kQW5nbGUgfHwgcG9pbnQubWlkQW5nbGU7XG4gICAgICAgICAgICB2YXIgc3BhY2UgPSAxMDtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24obGFiZWxBbmdsZSwgbGFiZWxSYWRpdXMsIHRoaXMuaXNDaXJjdWxhcigpID8gdGhpcy5jZW50ZXIgOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGFiZWxMb2NhdGlvbihwb2ludCwgcG9zaXRpb24pKTtcbiAgICAgICAgICAgIGxvY2F0aW9uLnkgPSAocG9zaXRpb24gPT09ICdJbnNpZGUnKSA/IChsb2NhdGlvbi55IC0gdGV4dFNpemUuaGVpZ2h0IC8gMikgOiBsb2NhdGlvbi55O1xuICAgICAgICAgICAgbG9jYXRpb24ueCA9IChwb3NpdGlvbiA9PT0gJ0luc2lkZScpID8gKGxvY2F0aW9uLnggLSB0ZXh0U2l6ZS53aWR0aCAvIDIpIDogbG9jYXRpb24ueDtcbiAgICAgICAgICAgIHBvaW50LmxhYmVsUmVnaW9uID0gbmV3IGhlbHBlcl8xLlJlY3QobG9jYXRpb24ueCwgbG9jYXRpb24ueSwgdGV4dFNpemUud2lkdGggKyAobWFyZ2luICogMiksIHRleHRTaXplLmhlaWdodCArIChtYXJnaW4gKiAyKSk7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdPdXRzaWRlJykge1xuICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsUmVnaW9uLnkgLT0gcG9pbnQubGFiZWxSZWdpb24uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxBbmdsZSA+PSA5MCAmJiBsYWJlbEFuZ2xlIDw9IDI3MCkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5sYWJlbFJlZ2lvbi54IC09IChwb2ludC5sYWJlbFJlZ2lvbi53aWR0aCArIHNwYWNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsUmVnaW9uLnggKz0gc3BhY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmdldFNtYXJ0TGFiZWwgPSBmdW5jdGlvbiAocG9pbnQsIGRhdGFMYWJlbCwgdGV4dFNpemUsIHBvaW50cywgcGFyZW50LCBpZCkge1xuICAgICAgICAgICAgdmFyIGNpcmN1bGFyID0gdGhpcy5pc0NpcmN1bGFyKCk7XG4gICAgICAgICAgICB2YXIgbGFiZWxSYWRpdXMgPSBjaXJjdWxhciA/IHRoaXMucmFkaXVzIDogdGhpcy5nZXRMYWJlbERpc3RhbmNlKHBvaW50LCBkYXRhTGFiZWwpO1xuICAgICAgICAgICAgdmFyIGNvbm5lY3Rvckxlbmd0aCA9IGNpcmN1bGFyID8gKGRhdGFMYWJlbC5jb25uZWN0b3JTdHlsZS5sZW5ndGggfHwgJzQlJykgOlxuICAgICAgICAgICAgICAgICcwcHgnO1xuICAgICAgICAgICAgbGFiZWxSYWRpdXMgKz0gaGVscGVyXzEuc3RyaW5nVG9OdW1iZXIoY29ubmVjdG9yTGVuZ3RoLCBsYWJlbFJhZGl1cyk7XG4gICAgICAgICAgICB2YXIgcHJldmlvdXNQb2ludCA9IHRoaXMuZmluZFByZXZpb3VzUG9pbnQocG9pbnRzLCBwb2ludC5pbmRleCwgcG9pbnQubGFiZWxQb3NpdGlvbik7XG4gICAgICAgICAgICBpZiAoZGF0YUxhYmVsLnBvc2l0aW9uID09PSAnSW5zaWRlJykge1xuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1BvaW50ICYmIHByZXZpb3VzUG9pbnQubGFiZWxSZWdpb24gJiYgKGhlbHBlcl8xLmlzT3ZlcmxhcChwb2ludC5sYWJlbFJlZ2lvbiwgcHJldmlvdXNQb2ludC5sYWJlbFJlZ2lvbilcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5pc092ZXJsYXBwaW5nKHBvaW50LCBwb2ludHMpKSB8fCAhY2lyY3VsYXIgJiYgIWhlbHBlcl80LmNvbnRhaW5zUmVjdChwb2ludC5yZWdpb24sIHBvaW50LmxhYmVsUmVnaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBwb2ludC5sYWJlbFBvc2l0aW9uID0gJ091dHNpZGUnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNpcmN1bGFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFJhZGl1cyA9IHRoaXMuZ2V0TGFiZWxEaXN0YW5jZShwb2ludCwgZGF0YUxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExhYmVsUmVnaW9uKHBvaW50LCBwb2ludC5sYWJlbFBvc2l0aW9uLCB0ZXh0U2l6ZSwgbGFiZWxSYWRpdXMsIHRoaXMubWFyZ2luVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1BvaW50ID0gdGhpcy5maW5kUHJldmlvdXNQb2ludChwb2ludHMsIHBvaW50LmluZGV4LCBwb2ludC5sYWJlbFBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzUG9pbnQgJiYgKGhlbHBlcl8xLmlzT3ZlcmxhcChwb2ludC5sYWJlbFJlZ2lvbiwgcHJldmlvdXNQb2ludC5sYWJlbFJlZ2lvbikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0b3JMaW5lT3ZlcmxhcHBpbmcocG9pbnQsIHByZXZpb3VzUG9pbnQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPdXRlclNtYXJ0TGFiZWwocHJldmlvdXNQb2ludCwgcG9pbnQsIGRhdGFMYWJlbC5ib3JkZXIud2lkdGgsIGxhYmVsUmFkaXVzLCB0ZXh0U2l6ZSwgdGhpcy5tYXJnaW5WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNQb2ludCAmJiBwcmV2aW91c1BvaW50LmxhYmVsUmVnaW9uICYmIChoZWxwZXJfMS5pc092ZXJsYXAocG9pbnQubGFiZWxSZWdpb24sIHByZXZpb3VzUG9pbnQubGFiZWxSZWdpb24pXG4gICAgICAgICAgICAgICAgICAgIHx8IHRoaXMuaXNPdmVybGFwcGluZyhwb2ludCwgcG9pbnRzKSB8fCB0aGlzLmlzQ29ubmVjdG9yTGluZU92ZXJsYXBwaW5nKHBvaW50LCBwcmV2aW91c1BvaW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPdXRlclNtYXJ0TGFiZWwocHJldmlvdXNQb2ludCwgcG9pbnQsIGRhdGFMYWJlbC5ib3JkZXIud2lkdGgsIGxhYmVsUmFkaXVzLCB0ZXh0U2l6ZSwgdGhpcy5tYXJnaW5WYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNPdmVybGFwcGluZyhwb2ludCwgcG9pbnRzKSB8fCAodGhpcy50aXRsZVJlY3QgJiYgcG9pbnQubGFiZWxSZWdpb24gJiYgaGVscGVyXzEuaXNPdmVybGFwKHBvaW50LmxhYmVsUmVnaW9uLCB0aGlzLnRpdGxlUmVjdCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb2ludFZpc2liaWxlRmFsc2UocG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0aW9uLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZSAmJiBwb2ludC5sYWJlbFZpc2libGUgJiYgcG9pbnQubGFiZWxSZWdpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IHRoaXMuYWNjdW11bGF0aW9uLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5sZWdlbmRCb3VuZHM7XG4gICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLmFjY3VtdWxhdGlvbi5sZWdlbmRTZXR0aW5ncy5ib3JkZXIud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFRyaW1taW5nKHBvaW50LCBuZXcgaGVscGVyXzEuUmVjdChyZWN0LnggLSBwYWRkaW5nLCByZWN0LnkgLSBwYWRkaW5nLCByZWN0LndpZHRoICsgKDIgKiBwYWRkaW5nKSwgcmVjdC5oZWlnaHQgKyAoMiAqIHBhZGRpbmcpKSwgZGF0YUxhYmVsLmZvbnQsIHRoaXMuYWNjdW11bGF0aW9uLmFjY3VtdWxhdGlvbkxlZ2VuZE1vZHVsZS5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9pbnQubGFiZWxWaXNpYmxlICYmIHBvaW50LmxhYmVsUmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5pc0NpcmN1bGFyKCkgPyAocG9pbnQubGFiZWxSZWdpb24ueCA+PSB0aGlzLmNlbnRlci54KSA/ICdJbnNpZGVSaWdodCcgOiAnSW5zaWRlTGVmdCcgOlxuICAgICAgICAgICAgICAgICAgICAnSW5zaWRlUmlnaHQnO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFRyaW1taW5nKHBvaW50LCB0aGlzLmFyZWFSZWN0LCBkYXRhTGFiZWwuZm9udCwgcG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvaW50LmxhYmVsVmlzaWJsZSAmJiBwb2ludC5sYWJlbFJlZ2lvbiAmJiAoKHBvaW50LmxhYmVsUmVnaW9uLnkgKyBwb2ludC5sYWJlbFJlZ2lvbi5oZWlnaHQgPlxuICAgICAgICAgICAgICAgIHRoaXMuYXJlYVJlY3QueSArIHRoaXMuYXJlYVJlY3QuaGVpZ2h0IHx8IHBvaW50LmxhYmVsUmVnaW9uLnkgPCB0aGlzLmFyZWFSZWN0LnkpIHx8IChwb2ludC5sYWJlbFJlZ2lvbi54IDwgdGhpcy5hcmVhUmVjdC54IHx8XG4gICAgICAgICAgICAgICAgcG9pbnQubGFiZWxSZWdpb24ueCArIHBvaW50LmxhYmVsUmVnaW9uLndpZHRoID4gdGhpcy5hcmVhUmVjdC54ICsgdGhpcy5hcmVhUmVjdC53aWR0aCkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb2ludFZpc2liaWxlRmFsc2UocG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoZSwgeCwgeSwgaXNUb3VjaCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuYWNjdW11bGF0aW9uLnJlbW92ZVN2Z09mZnNldCh4LCB5KTtcbiAgICAgICAgICAgIGlmIChlLnRhcmdldC50ZXh0Q29udGVudC5pbmRleE9mKCcuLi4nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldElkID0gZS50YXJnZXQuaWQuc3BsaXQodGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldElkLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VyaWVzSW5kZXggPSBwYXJzZUludCh0YXJnZXRJZFsxXS5zcGxpdCgnX3RleHRfJylbMF0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50SW5kZXggPSBwYXJzZUludCh0YXJnZXRJZFsxXS5zcGxpdCgnX3RleHRfJylbMV0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihzZXJpZXNJbmRleCkgJiYgIWlzTmFOKHBvaW50SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHBlcl8zLnJlbW92ZUVsZW1lbnQodGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfRUoyX0RhdGFsYWJlbF9Ub29sdGlwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBhY2NfYmFzZV8xLmdldFNlcmllc0Zyb21JbmRleChzZXJpZXNJbmRleCwgKHRoaXMuYWNjdW11bGF0aW9uKS52aXNpYmxlU2VyaWVzKS5wb2ludHNbcG9pbnRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMy5zaG93VG9vbHRpcChwb2ludC50ZXh0IHx8IHBvaW50LnkudG9TdHJpbmcoKSwgbG9jYXRpb24ueCwgbG9jYXRpb24ueSwgdGhpcy5hcmVhUmVjdC53aWR0aCwgdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfRUoyX0RhdGFsYWJlbF9Ub29sdGlwJywgaGVscGVyXzIuZ2V0RWxlbWVudCh0aGlzLmFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19TZWNvbmRhcnlfRWxlbWVudCcpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlbHBlcl8zLnJlbW92ZUVsZW1lbnQodGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfRUoyX0RhdGFsYWJlbF9Ub29sdGlwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNUb3VjaCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsZWFyVG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclRvb2x0aXAgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgaGVscGVyXzMucmVtb3ZlRWxlbWVudChfdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfRUoyX0RhdGFsYWJlbF9Ub29sdGlwJyk7IH0sIDEwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmZpbmRQcmV2aW91c1BvaW50ID0gZnVuY3Rpb24gKHBvaW50cywgaW5kZXgsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBwb2ludHNbMF07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC52aXNpYmxlICYmIHBvaW50LmxhYmVsVmlzaWJsZSAmJiBwb2ludC5sYWJlbFJlZ2lvbiAmJiBwb2ludC5sYWJlbFBvc2l0aW9uID09PSBwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuaXNPdmVybGFwcGluZyA9IGZ1bmN0aW9uIChjdXJyZW50UG9pbnQsIHBvaW50cykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGN1cnJlbnRQb2ludC5pbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50c1tpXS52aXNpYmxlICYmIHBvaW50c1tpXS5sYWJlbFZpc2libGUgJiYgcG9pbnRzW2ldLmxhYmVsUmVnaW9uICYmIGN1cnJlbnRQb2ludC5sYWJlbFJlZ2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9pbnQubGFiZWxWaXNpYmxlICYmIGhlbHBlcl8xLmlzT3ZlcmxhcChjdXJyZW50UG9pbnQubGFiZWxSZWdpb24sIHBvaW50c1tpXS5sYWJlbFJlZ2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLnRleHRUcmltbWluZyA9IGZ1bmN0aW9uIChwb2ludCwgcmVjdCwgZm9udCwgcG9zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChoZWxwZXJfMS5pc092ZXJsYXAocG9pbnQubGFiZWxSZWdpb24sIHJlY3QpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBwb2ludC5sYWJlbFJlZ2lvbi53aWR0aDtcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdSaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHJlY3QueCAtIHBvaW50LmxhYmVsUmVnaW9uLng7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHBvaW50LmxhYmVsUmVnaW9uLnggLSAocmVjdC54ICsgcmVjdC53aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaXplIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSArPSBwb2ludC5sYWJlbFJlZ2lvbi53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsUmVnaW9uLnggPSByZWN0LnggKyByZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBvc2l0aW9uID09PSAnSW5zaWRlUmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSAocmVjdC54ICsgcmVjdC53aWR0aCkgLSBwb2ludC5sYWJlbFJlZ2lvbi54O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwb3NpdGlvbiA9PT0gJ0luc2lkZUxlZnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSAocG9pbnQubGFiZWxSZWdpb24ueCArIHBvaW50LmxhYmVsUmVnaW9uLndpZHRoKSAtIHJlY3QueDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpemUgPCBwb2ludC5sYWJlbFJlZ2lvbi53aWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQubGFiZWxSZWdpb24ueCA9IHJlY3QueDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQb2ludFZpc2liaWxlRmFsc2UocG9pbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9pbnQubGFiZWxWaXNpYmxlICYmIHBvaW50LmxhYmVsUmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaXplIDwgcG9pbnQubGFiZWxSZWdpb24ud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsID0gaGVscGVyXzIudGV4dFRyaW0oc2l6ZSAtICh0aGlzLm1hcmdpblZhbHVlICogMiksIHBvaW50LmxhYmVsLCBmb250KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsUmVnaW9uLndpZHRoID0gc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9pbnQubGFiZWwubGVuZ3RoID09PSAzICYmIHBvaW50LmxhYmVsLmluZGV4T2YoJy4uLicpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRWaXNpYmlsZUZhbHNlKHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5zZXRQb2ludFZpc2liaWxlRmFsc2UgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIHBvaW50LmxhYmVsVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgcG9pbnQubGFiZWxSZWdpb24gPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLnNldE91dGVyU21hcnRMYWJlbCA9IGZ1bmN0aW9uIChwcmV2aW91c1BvaW50LCBwb2ludCwgYm9yZGVyLCBsYWJlbFJhZGl1cywgdGV4dHNpemUsIG1hcmdpbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ2lyY3VsYXIoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U21hcnRMYWJlbEZvclNlZ21lbnRzKHBvaW50LCBwcmV2aW91c1BvaW50LCBsYWJlbFJhZGl1cywgdGV4dHNpemUsIG1hcmdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWxBbmdsZSA9IHRoaXMuZ2V0T3ZlcmxhcHBlZEFuZ2xlKHByZXZpb3VzUG9pbnQubGFiZWxSZWdpb24sIHBvaW50LmxhYmVsUmVnaW9uLCBwb2ludC5taWRBbmdsZSwgYm9yZGVyICogMik7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMYWJlbFJlZ2lvbihwb2ludCwgJ091dHNpZGUnLCB0ZXh0c2l6ZSwgbGFiZWxSYWRpdXMsIG1hcmdpbiwgbGFiZWxBbmdsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsQW5nbGUgPiBwb2ludC5lbmRBbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvaW50VmlzaWJpbGVGYWxzZShwb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsQW5nbGUgPSBsYWJlbEFuZ2xlO1xuICAgICAgICAgICAgICAgIHdoaWxlIChwb2ludC5sYWJlbFZpc2libGUgJiYgKGhlbHBlcl8xLmlzT3ZlcmxhcChwcmV2aW91c1BvaW50LmxhYmVsUmVnaW9uLCBwb2ludC5sYWJlbFJlZ2lvbikgfHwgbGFiZWxBbmdsZSA8PSBwcmV2aW91c1BvaW50LmxhYmVsQW5nbGVcbiAgICAgICAgICAgICAgICAgICAgfHwgdGhpcy5pc0Nvbm5lY3RvckxpbmVPdmVybGFwcGluZyhwb2ludCwgcHJldmlvdXNQb2ludCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbEFuZ2xlID4gcG9pbnQuZW5kQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRWaXNpYmlsZUZhbHNlKHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LmxhYmVsQW5nbGUgPSBsYWJlbEFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExhYmVsUmVnaW9uKHBvaW50LCAnT3V0c2lkZScsIHRleHRzaXplLCBsYWJlbFJhZGl1cywgbWFyZ2luLCBsYWJlbEFuZ2xlKTtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxBbmdsZSArPSAwLjE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLnNldFNtYXJ0TGFiZWxGb3JTZWdtZW50cyA9IGZ1bmN0aW9uIChwb2ludCwgcHJldlBvaW50LCBkaXN0YW5jZSwgdGV4dFNpemUsIG1hcmdpbikge1xuICAgICAgICAgICAgdmFyIHRleHRSZWdpb24gPSBwb2ludC5sYWJlbFJlZ2lvbjtcbiAgICAgICAgICAgIHZhciBvdmVybGFwSGVpZ2h0ID0gdGhpcy5hY2N1bXVsYXRpb24udHlwZSA9PT0gJ0Z1bm5lbCcgP1xuICAgICAgICAgICAgICAgIHByZXZQb2ludC5sYWJlbFJlZ2lvbi55IC0gKHRleHRSZWdpb24ueSArIHRleHRSZWdpb24uaGVpZ2h0KSA6XG4gICAgICAgICAgICAgICAgcG9pbnQubGFiZWxSZWdpb24ueSAtIChwcmV2UG9pbnQubGFiZWxSZWdpb24ueSArIHByZXZQb2ludC5sYWJlbFJlZ2lvbi5oZWlnaHQpO1xuICAgICAgICAgICAgaWYgKG92ZXJsYXBIZWlnaHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgcG9pbnQubGFiZWxSZWdpb24ueSArPSB0aGlzLmFjY3VtdWxhdGlvbi50eXBlID09PSAnRnVubmVsJyA/IG92ZXJsYXBIZWlnaHQgOiAtb3ZlcmxhcEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5pc0Nvbm5lY3RvckxpbmVPdmVybGFwcGluZyA9IGZ1bmN0aW9uIChwb2ludCwgcHJldmlvdXMpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IHRoaXMuZ2V0TGFiZWxMb2NhdGlvbihwb2ludCk7XG4gICAgICAgICAgICB2YXIgZW5kID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmdldEVkZ2VPZkxhYmVsKHBvaW50LmxhYmVsUmVnaW9uLCBwb2ludC5sYWJlbEFuZ2xlLCBlbmQpO1xuICAgICAgICAgICAgdmFyIHByZXZpb3Vzc3RhcnQgPSB0aGlzLmdldExhYmVsTG9jYXRpb24ocHJldmlvdXMpO1xuICAgICAgICAgICAgdmFyIHByZXZpb3VzZW5kID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmdldEVkZ2VPZkxhYmVsKHByZXZpb3VzLmxhYmVsUmVnaW9uLCBwcmV2aW91cy5sYWJlbEFuZ2xlLCBwcmV2aW91c2VuZCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0xpbmVSZWN0YW5nbGVJbnRlcnNlY3Qoc3RhcnQsIGVuZCwgcG9pbnQubGFiZWxSZWdpb24pIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pc0xpbmVSZWN0YW5nbGVJbnRlcnNlY3Qoc3RhcnQsIGVuZCwgcHJldmlvdXMubGFiZWxSZWdpb24pIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pc0xpbmVSZWN0YW5nbGVJbnRlcnNlY3QocHJldmlvdXNzdGFydCwgcHJldmlvdXNlbmQsIHBvaW50LmxhYmVsUmVnaW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5pc0xpbmVSZWN0YW5nbGVJbnRlcnNlY3QgPSBmdW5jdGlvbiAobGluZTEsIGxpbmUyLCByZWN0KSB7XG4gICAgICAgICAgICB2YXIgcmVjdFBvaW50cyA9IFtcbiAgICAgICAgICAgICAgICBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihNYXRoLnJvdW5kKHJlY3QueCksIE1hdGgucm91bmQocmVjdC55KSksXG4gICAgICAgICAgICAgICAgbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oTWF0aC5yb3VuZCgocmVjdC54ICsgcmVjdC53aWR0aCkpLCBNYXRoLnJvdW5kKHJlY3QueSkpLFxuICAgICAgICAgICAgICAgIG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKE1hdGgucm91bmQoKHJlY3QueCArIHJlY3Qud2lkdGgpKSwgTWF0aC5yb3VuZCgocmVjdC55ICsgcmVjdC5oZWlnaHQpKSksXG4gICAgICAgICAgICAgICAgbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oTWF0aC5yb3VuZChyZWN0LngpLCBNYXRoLnJvdW5kKChyZWN0LnkgKyByZWN0LmhlaWdodCkpKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGxpbmUxLnggPSBNYXRoLnJvdW5kKGxpbmUxLngpO1xuICAgICAgICAgICAgbGluZTEueSA9IE1hdGgucm91bmQobGluZTEueSk7XG4gICAgICAgICAgICBsaW5lMi54ID0gTWF0aC5yb3VuZChsaW5lMi54KTtcbiAgICAgICAgICAgIGxpbmUyLnkgPSBNYXRoLnJvdW5kKGxpbmUyLnkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWN0UG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNMaW5lc0ludGVyc2VjdChsaW5lMSwgbGluZTIsIHJlY3RQb2ludHNbaV0sIHJlY3RQb2ludHNbKGkgKyAxKSAlIHJlY3RQb2ludHMubGVuZ3RoXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmlzTGluZXNJbnRlcnNlY3QgPSBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIsIHBvaW50MTEsIHBvaW50MTIpIHtcbiAgICAgICAgICAgIHZhciBhMSA9IHBvaW50Mi55IC0gcG9pbnQxLnk7XG4gICAgICAgICAgICB2YXIgYjEgPSBwb2ludDEueCAtIHBvaW50Mi54O1xuICAgICAgICAgICAgdmFyIGMxID0gYTEgKiBwb2ludDEueCArIGIxICogcG9pbnQxLnk7XG4gICAgICAgICAgICB2YXIgYTIgPSBwb2ludDEyLnkgLSBwb2ludDExLnk7XG4gICAgICAgICAgICB2YXIgYjIgPSBwb2ludDExLnggLSBwb2ludDEyLng7XG4gICAgICAgICAgICB2YXIgYzIgPSBhMiAqIHBvaW50MTEueCArIGIyICogcG9pbnQxMS55O1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gYTEgKiBiMiAtIGEyICogYjE7XG4gICAgICAgICAgICBpZiAoZGVsdGEgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IChiMiAqIGMxIC0gYjEgKiBjMikgLyBkZWx0YTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IChhMSAqIGMyIC0gYTIgKiBjMSkgLyBkZWx0YTtcbiAgICAgICAgICAgICAgICB2YXIgbGllcyA9IE1hdGgubWluKHBvaW50MS54LCBwb2ludDIueCkgPD0geCAmJiB4IDw9IE1hdGgubWF4KHBvaW50MS54LCBwb2ludDIueCk7XG4gICAgICAgICAgICAgICAgbGllcyA9IGxpZXMgJiYgTWF0aC5taW4ocG9pbnQxLnksIHBvaW50Mi55KSA8PSB5ICYmIHkgPD0gTWF0aC5tYXgocG9pbnQxLnksIHBvaW50Mi55KTtcbiAgICAgICAgICAgICAgICBsaWVzID0gbGllcyAmJiBNYXRoLm1pbihwb2ludDExLngsIHBvaW50MTIueCkgPD0geCAmJiB4IDw9IE1hdGgubWF4KHBvaW50MTEueCwgcG9pbnQxMi54KTtcbiAgICAgICAgICAgICAgICBsaWVzID0gbGllcyAmJiBNYXRoLm1pbihwb2ludDExLnksIHBvaW50MTIueSkgPD0geSAmJiB5IDw9IE1hdGgubWF4KHBvaW50MTEueSwgcG9pbnQxMi55KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGllcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRPdmVybGFwcGVkQW5nbGUgPSBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCwgYW5nbGUsIHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHZhciB4ID0gZmlyc3QueDtcbiAgICAgICAgICAgIGlmIChhbmdsZSA+PSA5MCAmJiBhbmdsZSA8PSAyNzApIHtcbiAgICAgICAgICAgICAgICBzZWNvbmQueSA9IGZpcnN0LnkgLSAocGFkZGluZyArIHNlY29uZC5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICB4ID0gZmlyc3QueCArIGZpcnN0LndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2Vjb25kLnkgPSBmaXJzdC55ICsgZmlyc3QuaGVpZ2h0ICsgcGFkZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWxwZXJfMS5nZXRBbmdsZSh0aGlzLmNlbnRlciwgbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oeCwgc2Vjb25kLnkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRDb25uZWN0b3JQYXRoID0gZnVuY3Rpb24gKGxhYmVsLCBwb2ludCwgZGF0YUxhYmVsLCBlbmQpIHtcbiAgICAgICAgICAgIGlmIChlbmQgPT09IHZvaWQgMCkgeyBlbmQgPSAwOyB9XG4gICAgICAgICAgICB2YXIgY29ubmVjdG9yID0gZGF0YUxhYmVsLmNvbm5lY3RvclN0eWxlO1xuICAgICAgICAgICAgdmFyIGxhYmVsUmFkaXVzID0gdGhpcy5pc0NpcmN1bGFyKCkgPyB0aGlzLmxhYmVsUmFkaXVzIDogdGhpcy5nZXRMYWJlbERpc3RhbmNlKHBvaW50LCBkYXRhTGFiZWwpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5nZXRDb25uZWN0b3JTdGFydFBvaW50KHBvaW50LCBjb25uZWN0b3IpO1xuICAgICAgICAgICAgdmFyIGxhYmVsQW5nbGUgPSBlbmQgfHwgcG9pbnQubWlkQW5nbGU7XG4gICAgICAgICAgICB2YXIgbWlkZGxlID0gbmV3IGhlbHBlcl8xLkNoYXJ0TG9jYXRpb24oMCwgMCk7XG4gICAgICAgICAgICB2YXIgZW5kUG9pbnQgPSB0aGlzLmdldEVkZ2VPZkxhYmVsKGxhYmVsLCBsYWJlbEFuZ2xlLCBtaWRkbGUsIGNvbm5lY3Rvci53aWR0aCk7XG4gICAgICAgICAgICBpZiAoY29ubmVjdG9yLnR5cGUgPT09ICdDdXJ2ZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NpcmN1bGFyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBsYWJlbFJhZGl1cyAtIHRoaXMucmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBtaWRkbGUgPSBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKGxhYmVsQW5nbGUsIGxhYmVsUmFkaXVzIC0gKHIgLyAyKSwgdGhpcy5jZW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ00gJyArIHN0YXJ0LnggKyAnICcgKyBzdGFydC55ICsgJyBRJyArIG1pZGRsZS54ICsgJywnICsgbWlkZGxlLnkgKyAnICcgKyBlbmRQb2ludC54ICsgJywnICsgZW5kUG9pbnQueTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBvbHlMaW5lUGF0aChzdGFydCwgZW5kUG9pbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAnTSAnICsgc3RhcnQueCArICcgJyArIHN0YXJ0LnkgKyAnIEwgJyArIG1pZGRsZS54ICsgJyAnICsgbWlkZGxlLnkgKyAnIEwgJyArIGVuZFBvaW50LnggKyAnICcgKyBlbmRQb2ludC55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmdldFBvbHlMaW5lUGF0aCA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbFBvaW50cyA9IFtzdGFydCwgZW5kXTtcbiAgICAgICAgICAgIGlmIChzdGFydC55ID09PSBlbmQueSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnTSAnICsgc3RhcnQueCArICcgJyArIHN0YXJ0LnkgKyAnIEwgJyArIGVuZC54ICsgJyAnICsgZW5kLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGF0aCA9ICdNJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDE2OyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGkgLyAxNjtcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gdGhpcy5nZXRCZXppZXJQb2ludCh0LCBjb250cm9sUG9pbnRzLCAwLCAyKTtcbiAgICAgICAgICAgICAgICBwYXRoICs9IHBvaW50cy54ICsgJywnICsgcG9pbnRzLnk7XG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gJyBMJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRCZXppZXJQb2ludCA9IGZ1bmN0aW9uICh0LCBjb250cm9sUG9pbnRzLCBpbmRleCwgY291bnQpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sUG9pbnRzW2luZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwMCA9IHRoaXMuZ2V0QmV6aWVyUG9pbnQodCwgY29udHJvbFBvaW50cywgaW5kZXgsIGNvdW50IC0gMSk7XG4gICAgICAgICAgICB2YXIgcDEgPSB0aGlzLmdldEJlemllclBvaW50KHQsIGNvbnRyb2xQb2ludHMsIGluZGV4ICsgMSwgY291bnQgLSAxKTtcbiAgICAgICAgICAgIHZhciB4ID0gKHAwLngpID8gcDAueCA6IHAwLng7XG4gICAgICAgICAgICB2YXIgeSA9IChwMC55KSA/IHAwLnkgOiBwMC55O1xuICAgICAgICAgICAgdmFyIHgxID0gKHAxLngpID8gcDEueCA6IHAxLng7XG4gICAgICAgICAgICB2YXIgeTEgPSAocDEueSkgPyBwMS55IDogcDEueTtcbiAgICAgICAgICAgIHZhciB4MiA9ICgxIC0gdCkgKiB4ICsgdCAqIHgxO1xuICAgICAgICAgICAgdmFyIHkyID0gKDEgLSB0KSAqIHkgKyB0ICogeTE7XG4gICAgICAgICAgICBpZiAocDAueCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHg6IHgyLCB5OiB5MiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogeDIsIHk6IHkyIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuZ2V0RWRnZU9mTGFiZWwgPSBmdW5jdGlvbiAobGFiZWxzaGFwZSwgYW5nbGUsIG1pZGRsZSwgYm9yZGVyKSB7XG4gICAgICAgICAgICBpZiAoYm9yZGVyID09PSB2b2lkIDApIHsgYm9yZGVyID0gMTsgfVxuICAgICAgICAgICAgdmFyIGVkZ2UgPSBuZXcgaGVscGVyXzEuQ2hhcnRMb2NhdGlvbihsYWJlbHNoYXBlLngsIGxhYmVsc2hhcGUueSk7XG4gICAgICAgICAgICBpZiAoYW5nbGUgPj0gOTAgJiYgYW5nbGUgPD0gMjcwKSB7XG4gICAgICAgICAgICAgICAgZWRnZS54ICs9IGxhYmVsc2hhcGUud2lkdGggKyBib3JkZXIgLyAyO1xuICAgICAgICAgICAgICAgIGVkZ2UueSArPSBsYWJlbHNoYXBlLmhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgbWlkZGxlLnggPSBlZGdlLnggKyAxMDtcbiAgICAgICAgICAgICAgICBtaWRkbGUueSA9IGVkZ2UueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVkZ2UueCAtPSBib3JkZXIgLyAyO1xuICAgICAgICAgICAgICAgIGVkZ2UueSArPSBsYWJlbHNoYXBlLmhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgbWlkZGxlLnggPSBlZGdlLnggLSAxMDtcbiAgICAgICAgICAgICAgICBtaWRkbGUueSA9IGVkZ2UueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlZGdlO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmdldExhYmVsRGlzdGFuY2UgPSBmdW5jdGlvbiAocG9pbnQsIGRhdGFMYWJlbCkge1xuICAgICAgICAgICAgaWYgKHBvaW50LmxhYmVsUG9zaXRpb24gJiYgZGF0YUxhYmVsLnBvc2l0aW9uICE9PSBwb2ludC5sYWJlbFBvc2l0aW9uIHx8IGRhdGFMYWJlbC5jb25uZWN0b3JTdHlsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBoZWxwZXJfMS5zdHJpbmdUb051bWJlcihkYXRhTGFiZWwuY29ubmVjdG9yU3R5bGUubGVuZ3RoIHx8ICc3MHB4JywgdGhpcy5hY2N1bXVsYXRpb24uaW5pdGlhbENsaXBSZWN0LndpZHRoKTtcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoXzEgPCB0aGlzLmFjY3VtdWxhdGlvbi5pbml0aWFsQ2xpcFJlY3Qud2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxlbmd0aF8xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHBvaW50LmxhYmVsUG9zaXRpb24gfHwgZGF0YUxhYmVsLnBvc2l0aW9uO1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF07XG4gICAgICAgICAgICB2YXIgZXh0cmFTcGFjZSA9ICh0aGlzLmFjY3VtdWxhdGlvbi5pbml0aWFsQ2xpcFJlY3Qud2lkdGggLSBzZXJpZXMudHJpYW5nbGVTaXplLndpZHRoKSAvIDI7XG4gICAgICAgICAgICB2YXIgbGFiZWxMb2NhdGlvbjtcbiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdJbnNpZGUnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICBjYXNlICdPdXRzaWRlJzpcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxMb2NhdGlvbiA9IHBvaW50LnN5bWJvbExvY2F0aW9uLnggKyBwb2ludC5sYWJlbE9mZnNldC54O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY2N1bXVsYXRpb24uaW5pdGlhbENsaXBSZWN0LndpZHRoIC0gbGFiZWxMb2NhdGlvbiAtIGV4dHJhU3BhY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuZ2V0TGFiZWxMb2NhdGlvbiA9IGZ1bmN0aW9uIChwb2ludCwgcG9zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uID0gJ091dHNpZGUnOyB9XG4gICAgICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRpb24udHlwZSAhPT0gJ1BpZScpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvaW50LmxhYmVsUG9zaXRpb24gfHwgcG9zaXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uXzEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LnN5bWJvbExvY2F0aW9uLngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnN5bWJvbExvY2F0aW9uLnkgLSBwb2ludC5sYWJlbE9mZnNldC55XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0luc2lkZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbl8xLnkgPSBwb2ludC5yZWdpb24ueSArIHBvaW50LnJlZ2lvbi5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ091dHNpZGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25fMS54ICs9IHBvaW50LmxhYmVsT2Zmc2V0Lng7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbl8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBlcl8xLmRlZ3JlZVRvTG9jYXRpb24ocG9pbnQubWlkQW5nbGUsIHRoaXMucmFkaXVzLCB0aGlzLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuZ2V0Q29ubmVjdG9yU3RhcnRQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgY29ubmVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NpcmN1bGFyKCkgPyBoZWxwZXJfMS5kZWdyZWVUb0xvY2F0aW9uKHBvaW50Lm1pZEFuZ2xlLCB0aGlzLnJhZGl1cyAtIGNvbm5lY3Rvci53aWR0aCwgdGhpcy5jZW50ZXIpIDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldExhYmVsTG9jYXRpb24ocG9pbnQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmZpbmRBcmVhUmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYXJlYVJlY3QgPSBuZXcgaGVscGVyXzEuUmVjdCgwLCAwLCB0aGlzLmFjY3VtdWxhdGlvbi5hdmFpbGFibGVTaXplLndpZHRoLCB0aGlzLmFjY3VtdWxhdGlvbi5hdmFpbGFibGVTaXplLmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgbWFyZ2luID0gdGhpcy5hY2N1bXVsYXRpb24ubWFyZ2luO1xuICAgICAgICAgICAgaGVscGVyXzIuc3VidHJhY3RUaGlja25lc3ModGhpcy5hcmVhUmVjdCwgbmV3IGhlbHBlcl8yLlRoaWNrbmVzcyhtYXJnaW4ubGVmdCwgbWFyZ2luLnJpZ2h0LCBtYXJnaW4udG9wLCBtYXJnaW4uYm90dG9tKSk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUucmVuZGVyRGF0YUxhYmVsID0gZnVuY3Rpb24gKHBvaW50LCBkYXRhTGFiZWwsIHBhcmVudCwgcG9pbnRzLCBzZXJpZXMsIHRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfZGF0YWxhYmVsX1Nlcmllc18nICsgc2VyaWVzICsgJ18nO1xuICAgICAgICAgICAgdmFyIGRhdGFsYWJlbEdyb3VwID0gdGhpcy5hY2N1bXVsYXRpb24ucmVuZGVyZXIuY3JlYXRlR3JvdXAoeyBpZDogaWQgKyAnZ18nICsgcG9pbnQuaW5kZXggfSk7XG4gICAgICAgICAgICBwb2ludC5sYWJlbCA9IHBvaW50Lm9yaWdpbmFsVGV4dCB8fCBwb2ludC55LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgYXJnc0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsOiBmYWxzZSwgbmFtZTogY29uc3RhbnRzXzEudGV4dFJlbmRlciwgc2VyaWVzOiB0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLCBwb2ludDogcG9pbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogcG9pbnQubGFiZWwsIGJvcmRlcjogZGF0YUxhYmVsLmJvcmRlciwgY29sb3I6IGRhdGFMYWJlbC5maWxsLCB0ZW1wbGF0ZTogZGF0YUxhYmVsLnRlbXBsYXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24udHJpZ2dlcihjb25zdGFudHNfMS50ZXh0UmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICB2YXIgaXNUZW1wbGF0ZSA9IGFyZ3NEYXRhLnRlbXBsYXRlICE9PSBudWxsO1xuICAgICAgICAgICAgcG9pbnQubGFiZWxWaXNpYmxlID0gIWFyZ3NEYXRhLmNhbmNlbDtcbiAgICAgICAgICAgIHBvaW50LnRleHQgPSBwb2ludC5sYWJlbCA9IGFyZ3NEYXRhLnRleHQ7XG4gICAgICAgICAgICB0aGlzLm1hcmdpblZhbHVlID0gYXJnc0RhdGEuYm9yZGVyLndpZHRoID8gKDUgKyBhcmdzRGF0YS5ib3JkZXIud2lkdGgpIDogMTtcbiAgICAgICAgICAgIHZhciBjaGlsZEVsZW1lbnQgPSBlajJfYmFzZV8xLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyAwICsgJ19EYXRhTGFiZWxfJyArIHBvaW50LmluZGV4LFxuICAgICAgICAgICAgICAgIHN0eWxlczogJ3Bvc2l0aW9uOiBhYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOicgKyBhcmdzRGF0YS5jb2xvciArICc7JyArXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlcl81LmdldEZvbnRTdHlsZShkYXRhTGFiZWwuZm9udCkgKyAnO2JvcmRlcjonICsgYXJnc0RhdGEuYm9yZGVyLndpZHRoICsgJ3B4IHNvbGlkICcgKyBhcmdzRGF0YS5ib3JkZXIuY29sb3IgKyAnOydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHRleHRTaXplID0gaXNUZW1wbGF0ZSA/IHRoaXMuZ2V0VGVtcGxhdGVTaXplKGNoaWxkRWxlbWVudCwgcG9pbnQsIGFyZ3NEYXRhKSA6XG4gICAgICAgICAgICAgICAgaGVscGVyXzMubWVhc3VyZVRleHQocG9pbnQubGFiZWwsIGRhdGFMYWJlbC5mb250KTtcbiAgICAgICAgICAgIHRleHRTaXplLmhlaWdodCArPSA0O1xuICAgICAgICAgICAgdGV4dFNpemUud2lkdGggKz0gNDtcbiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxhYmVsUG9zaXRpb24ocG9pbnQsIGRhdGFMYWJlbCwgdGV4dFNpemUsIHBvaW50cywgZGF0YWxhYmVsR3JvdXAsIGlkKTtcbiAgICAgICAgICAgIGlmIChwb2ludC5sYWJlbFZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnJlY3RMYWJlbFJlZ2lvbihwb2ludC5sYWJlbFJlZ2lvbiwgdGV4dFNpemUpO1xuICAgICAgICAgICAgICAgIGlmIChpc1RlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGVTdHlsZShjaGlsZEVsZW1lbnQsIHBvaW50LCB0ZW1wbGF0ZUVsZW1lbnQsIGRhdGFMYWJlbC5mb250LmNvbG9yLCBhcmdzRGF0YS5jb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkYXRhbGFiZWxHcm91cC5hcHBlbmRDaGlsZCh0aGlzLmFjY3VtdWxhdGlvbi5yZW5kZXJlci5kcmF3UmVjdGFuZ2xlKG5ldyBoZWxwZXJfMy5SZWN0T3B0aW9uKGlkICsgJ3NoYXBlXycgKyBwb2ludC5pbmRleCwgYXJnc0RhdGEuY29sb3IsIGFyZ3NEYXRhLmJvcmRlciwgMSwgcG9pbnQubGFiZWxSZWdpb24sIGRhdGFMYWJlbC5yeCwgZGF0YUxhYmVsLnJ5KSkpO1xuICAgICAgICAgICAgICAgICAgICBoZWxwZXJfMy50ZXh0RWxlbWVudChuZXcgaGVscGVyXzEuVGV4dE9wdGlvbihpZCArICd0ZXh0XycgKyBwb2ludC5pbmRleCwgcG9pbnQubGFiZWxSZWdpb24ueCArIHRoaXMubWFyZ2luVmFsdWUsIHBvaW50LmxhYmVsUmVnaW9uLnkgKyAodGV4dFNpemUuaGVpZ2h0ICogMyAvIDQpICsgdGhpcy5tYXJnaW5WYWx1ZSwgJ3N0YXJ0JywgcG9pbnQubGFiZWwsICcnLCAnYXV0bycpLCBkYXRhTGFiZWwuZm9udCwgZGF0YUxhYmVsLmZvbnQuY29sb3IgfHwgdGhpcy5nZXRTYXR1cmF0ZWRDb2xvcihwb2ludCwgYXJnc0RhdGEuY29sb3IpLCBkYXRhbGFiZWxHcm91cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGlvbi5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUgJiYgKGRhdGFMYWJlbC5wb3NpdGlvbiA9PT0gJ091dHNpZGUnIHx8IHRoaXMuYWNjdW11bGF0aW9uLmVuYWJsZVNtYXJ0TGFiZWxzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdLmZpbmRNYXhCb3VuZHModGhpcy5hY2N1bXVsYXRpb24udmlzaWJsZVNlcmllc1swXS5sYWJlbEJvdW5kLCBwb2ludC5sYWJlbFJlZ2lvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb2ludC5sYWJlbFBvc2l0aW9uID09PSAnT3V0c2lkZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLmdldENvbm5lY3RvclBhdGgoZWoyX2Jhc2VfMS5leHRlbmQoe30sIHBvaW50LmxhYmVsUmVnaW9uLCBudWxsLCB0cnVlKSwgcG9pbnQsIGRhdGFMYWJlbCwgcG9pbnQubGFiZWxBbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXRoRWxlbWVudCA9IHRoaXMuYWNjdW11bGF0aW9uLnJlbmRlcmVyLmRyYXdQYXRoKG5ldyBoZWxwZXJfNC5QYXRoT3B0aW9uKGlkICsgJ2Nvbm5lY3Rvcl8nICsgcG9pbnQuaW5kZXgsICd0cmFuc3BhcmVudCcsIGRhdGFMYWJlbC5jb25uZWN0b3JTdHlsZS53aWR0aCwgZGF0YUxhYmVsLmNvbm5lY3RvclN0eWxlLmNvbG9yIHx8IHBvaW50LmNvbG9yLCAxLCAnJywgcGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhbGFiZWxHcm91cC5hcHBlbmRDaGlsZChwYXRoRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChkYXRhbGFiZWxHcm91cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuZ2V0VGVtcGxhdGVTaXplID0gZnVuY3Rpb24gKGVsZW1lbnQsIHBvaW50LCBhcmdzRGF0YSkge1xuICAgICAgICAgICAgdmFyIGNsaWVudFJlY3Q7XG4gICAgICAgICAgICBlbGVtZW50ID0gaGVscGVyXzUuY3JlYXRlVGVtcGxhdGUoZWxlbWVudCwgcG9pbnQuaW5kZXgsIGFyZ3NEYXRhLnRlbXBsYXRlLCB0aGlzLmFjY3VtdWxhdGlvbiwgcG9pbnQsIHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0pO1xuICAgICAgICAgICAgY2xpZW50UmVjdCA9IGhlbHBlcl81Lm1lYXN1cmVFbGVtZW50UmVjdChlbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybiB7IHdpZHRoOiBjbGllbnRSZWN0LndpZHRoLCBoZWlnaHQ6IGNsaWVudFJlY3QuaGVpZ2h0IH07XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkRhdGFMYWJlbC5wcm90b3R5cGUuc2V0VGVtcGxhdGVTdHlsZSA9IGZ1bmN0aW9uIChjaGlsZEVsZW1lbnQsIHBvaW50LCBwYXJlbnQsIGxhYmVsQ29sb3IsIGZpbGwpIHtcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5zdHlsZS5sZWZ0ID0gKHBvaW50LmxhYmVsUmVnaW9uLngpICsgJ3B4JztcbiAgICAgICAgICAgIGNoaWxkRWxlbWVudC5zdHlsZS50b3AgPSAocG9pbnQubGFiZWxSZWdpb24ueSkgKyAncHgnO1xuICAgICAgICAgICAgY2hpbGRFbGVtZW50LnN0eWxlLmNvbG9yID0gbGFiZWxDb2xvciB8fFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2F0dXJhdGVkQ29sb3IocG9pbnQsIGZpbGwpO1xuICAgICAgICAgICAgaWYgKGNoaWxkRWxlbWVudC5jaGlsZEVsZW1lbnRDb3VudCkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZG9UZW1wbGF0ZUFuaW1hdGlvbih0aGlzLmFjY3VtdWxhdGlvbiwgY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRTYXR1cmF0ZWRDb2xvciA9IGZ1bmN0aW9uIChwb2ludCwgY29sb3IpIHtcbiAgICAgICAgICAgIHZhciBzYXR1cmF0ZWRDb2xvcjtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcmdpblZhbHVlID49IDEpIHtcbiAgICAgICAgICAgICAgICBzYXR1cmF0ZWRDb2xvciA9IGNvbG9yID09PSAndHJhbnNwYXJlbnQnID8gdGhpcy5nZXRMYWJlbEJhY2tncm91bmQocG9pbnQpIDogY29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzYXR1cmF0ZWRDb2xvciA9IHRoaXMuZ2V0TGFiZWxCYWNrZ3JvdW5kKHBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNhdHVyYXRlZENvbG9yID0gKHNhdHVyYXRlZENvbG9yID09PSAndHJhbnNwYXJlbnQnKSA/IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHksIG51bGwpLmJhY2tncm91bmRDb2xvciA6IHNhdHVyYXRlZENvbG9yO1xuICAgICAgICAgICAgdmFyIHJnYlZhbHVlID0gaGVscGVyXzQuY29udmVydEhleFRvQ29sb3IoaGVscGVyXzQuY29sb3JOYW1lVG9IZXgoc2F0dXJhdGVkQ29sb3IpKTtcbiAgICAgICAgICAgIHZhciBjb250cmFzdCA9IE1hdGgucm91bmQoKHJnYlZhbHVlLnIgKiAyOTkgKyByZ2JWYWx1ZS5nICogNTg3ICsgcmdiVmFsdWUuYiAqIDExNCkgLyAxMDAwKTtcbiAgICAgICAgICAgIHJldHVybiBjb250cmFzdCA+PSAxMjggPyAnYmxhY2snIDogJ3doaXRlJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5kb1RlbXBsYXRlQW5pbWF0aW9uID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IGFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzWzBdO1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gc2VyaWVzLmFuaW1hdGlvbi5kZWxheSArIHNlcmllcy5hbmltYXRpb24uZHVyYXRpb247XG4gICAgICAgICAgICBpZiAoc2VyaWVzLmFuaW1hdGlvbi5lbmFibGUgJiYgYWNjdW11bGF0aW9uLmFuaW1hdGVTZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICBoZWxwZXJfNS50ZW1wbGF0ZUFuaW1hdGUoZWxlbWVudCwgZGVsYXksIDIwMCwgJ1pvb21JbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmdldExhYmVsQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHBvaW50LmxhYmVsUG9zaXRpb24gPT09ICdPdXRzaWRlJyA/IHRoaXMuYWNjdW11bGF0aW9uLmJhY2tncm91bmQgOiBwb2ludC5jb2xvcjtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5jb3JyZWN0TGFiZWxSZWdpb24gPSBmdW5jdGlvbiAobGFiZWxSZWdpb24sIHRleHRTaXplLCBwYWRkaW5nKSB7XG4gICAgICAgICAgICBpZiAocGFkZGluZyA9PT0gdm9pZCAwKSB7IHBhZGRpbmcgPSA0OyB9XG4gICAgICAgICAgICBsYWJlbFJlZ2lvbi5oZWlnaHQgLT0gcGFkZGluZztcbiAgICAgICAgICAgIGxhYmVsUmVnaW9uLndpZHRoIC09IHBhZGRpbmc7XG4gICAgICAgICAgICBsYWJlbFJlZ2lvbi54ICs9IHBhZGRpbmcgLyAyO1xuICAgICAgICAgICAgbGFiZWxSZWdpb24ueSArPSBwYWRkaW5nIC8gMjtcbiAgICAgICAgICAgIHRleHRTaXplLmhlaWdodCAtPSBwYWRkaW5nO1xuICAgICAgICAgICAgdGV4dFNpemUud2lkdGggLT0gcGFkZGluZztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uRGF0YUxhYmVsLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdBY2N1bXVsYXRpb25EYXRhTGFiZWwnO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25EYXRhTGFiZWwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2N1bXVsYXRpb25EYXRhTGFiZWw7XG4gICAgfShhY2N1bXVsYXRpb25fYmFzZV8xLkFjY3VtdWxhdGlvbkJhc2UpKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkRhdGFMYWJlbCA9IEFjY3VtdWxhdGlvbkRhdGFMYWJlbDtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYWNjdW11bGF0aW9uLWNoYXJ0L3JlbmRlcmVyL2RhdGFMYWJlbC5qc1xuLy8gbW9kdWxlIGlkID0gODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZGVmaW5lKFtcInJlcXVpcmVcIiwgXCJleHBvcnRzXCIsIFwiQHN5bmNmdXNpb24vZWoyLWJhc2VcIiwgXCJAc3luY2Z1c2lvbi9lajItYmFzZVwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiLCBcIi4uL21vZGVsL2FjYy1iYXNlXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIi4uLy4uL2NvbW1vbi9tb2RlbC9jb25zdGFudHNcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBlajJfYmFzZV8xLCBlajJfYmFzZV8yLCBlajJfYmFzZV8zLCBlajJfcG9wdXBzXzEsIGFjY19iYXNlXzEsIGhlbHBlcl8xLCBjb25zdGFudHNfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWNjdW11bGF0aW9uVG9vbHRpcCA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIEFjY3VtdWxhdGlvblRvb2x0aXAoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGlvbiA9IGFjY3VtdWxhdGlvbjtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcE9wdGlvbiA9IGFjY3VtdWxhdGlvbi50b29sdGlwO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRJZCA9IGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19waWVfdG9vbHRpcCc7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXAgPSBuZXcgZWoyX3BvcHVwc18xLlRvb2x0aXAoe1xuICAgICAgICAgICAgICAgIG9wZW5zT246ICdjdXN0b20nLFxuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IHRoaXMudG9vbHRpcEN1c3RvbWl6YXRpb24uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBvcGVuRGVsYXk6IDAsXG4gICAgICAgICAgICAgICAgY2xvc2VEZWxheTogMTAwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXAuYXBwZW5kVG8oYWNjdW11bGF0aW9uLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIEFjY3VtdWxhdGlvblRvb2x0aXAucHJvdG90eXBlLnNldFRlbXBsYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0ZW1wbGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IGVqMl9iYXNlXzEuY29tcGlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVGbiA9IGVqMl9iYXNlXzEuY29tcGlsZSh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblRvb2x0aXAucHJvdG90eXBlLnJlbmRlclRvb2x0aXAgPSBmdW5jdGlvbiAocG9pbnQsIHNlcmllc0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGhlbHBlcl8xLmdldEVsZW1lbnQodGhpcy50YXJnZXRJZCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCAmJiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1pZCcpID09PSBudWxsKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMudG9vbHRpcEluZGV4ICE9PSAnc2VyaWVzXycgKyBzZXJpZXNJbmRleCArICdfcG9pbnRfJyArIHBvaW50LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbih0aGlzLnRhcmdldElkLCBwb2ludC5zeW1ib2xMb2NhdGlvbi54LCBwb2ludC5zeW1ib2xMb2NhdGlvbi55LCB0aGlzLmFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19TZXJpZXNfMF9Qb2ludF8nICsgcG9pbnQuaW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGVtcGxhdGVGdW5jdGlvbih0aGlzLnRvb2x0aXBPcHRpb24udGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBvaW50ID0gcG9pbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLmNvbnRlbnQgPSB0aGlzLmdldFRvb2x0aXBDb250ZW50KHBvaW50LCBzZXJpZXNJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLm9wZW4oaGVscGVyXzEuZ2V0RWxlbWVudCh0aGlzLnRhcmdldElkKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwSW5kZXggPSAnc2VyaWVzXycgKyBzZXJpZXNJbmRleCArICdfcG9pbnRfJyArIHBvaW50LmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25Ub29sdGlwLnByb3RvdHlwZS5mYWRlT3V0VG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsZWFyVG9vbHRpcCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRvb2x0aXAgPSB0aGlzLnJlbW92ZVRvb2x0aXAuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUb29sdGlwID0gc2V0VGltZW91dCh0aGlzLnJlbW92ZVRvb2x0aXAsIDUwMCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblRvb2x0aXAucHJvdG90eXBlLnJlbW92ZVRvb2x0aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblRvb2x0aXAucHJvdG90eXBlLmdldFRvb2x0aXBDb250ZW50ID0gZnVuY3Rpb24gKHBvaW50LCBzZXJpZXNJbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudG9vbHRpcE9wdGlvbi50ZW1wbGF0ZSAmJiB0aGlzLnRlbXBsYXRlRm4pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0gdGhpcy50ZW1wbGF0ZUZuKHBvaW50KTtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGVtcGxhdGVzWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUb29sdGlwVGV4dChwb2ludCwgdGhpcy50b29sdGlwT3B0aW9uLCBzZXJpZXNJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblRvb2x0aXAucHJvdG90eXBlLnRvb2x0aXBDdXN0b21pemF0aW9uID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBhcmdzRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBjYW5jZWw6IGZhbHNlLCBuYW1lOiBjb25zdGFudHNfMS50b29sdGlwUmVuZGVyLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudG9vbHRpcC5jb250ZW50LFxuICAgICAgICAgICAgICAgIHRleHRTdHlsZTogdGhpcy50b29sdGlwT3B0aW9uLnRleHRTdHlsZSxcbiAgICAgICAgICAgICAgICBzZXJpZXM6IHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXNbMF0sXG4gICAgICAgICAgICAgICAgcG9pbnQ6IHRoaXMuY3VycmVudFBvaW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRpb24udHJpZ2dlcihjb25zdGFudHNfMS50b29sdGlwUmVuZGVyLCBhcmdzRGF0YSk7XG4gICAgICAgICAgICBhcmdzLmNhbmNlbCA9IGFyZ3NEYXRhLmNhbmNlbDtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcC5jb250ZW50ID0gYXJnc0RhdGEuY29udGVudDtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcE9wdGlvbi50ZXh0U3R5bGUgPSBhcmdzRGF0YS50ZXh0U3R5bGU7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2UtdG9vbHRpcC13cmFwJylbMF07XG4gICAgICAgICAgICB2YXIgZm9udCA9IHRoaXMudG9vbHRpcE9wdGlvbi50ZXh0U3R5bGU7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnRvb2x0aXAucG9zaXRpb24uc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIHZhciBib3JkZXJDb2xvciA9IHRoaXMudG9vbHRpcE9wdGlvbi5ib3JkZXIuY29sb3IgfHwgdGhpcy5jdXJyZW50UG9pbnQuY29sb3I7XG4gICAgICAgICAgICB2YXIgcG9pbnRlclNpemUgPSA4O1xuICAgICAgICAgICAgdmFyIG91dGVyV2lkdGg7XG4gICAgICAgICAgICB2YXIgaW5uZXJXaWR0aDtcbiAgICAgICAgICAgIGFyZ3MuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlLXBvcHVwLWNsb3NlJyk7XG4gICAgICAgICAgICBhcmdzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZS1wb3B1cC1vcGVuJyk7XG4gICAgICAgICAgICB2YXIgYXJyb3dFbGUgPSBhcmdzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYXJyb3ctdGlwJyk7XG4gICAgICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSB0aGlzLnRvb2x0aXBPcHRpb24uYm9yZGVyLndpZHRoO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZShhcmdzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZENvbG9yJzogdGhpcy50b29sdGlwT3B0aW9uLmZpbGwsICdib3JkZXJDb2xvcic6IGJvcmRlckNvbG9yLFxuICAgICAgICAgICAgICAgICdib3JkZXJXaWR0aCc6IGJvcmRlcldpZHRoLCAnYm9yZGVyUmFkaXVzJzogJzVweCcsICdwb2ludGVyLWV2ZW50cyc6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlajJfYmFzZV8yLnNldFN0eWxlQXR0cmlidXRlKGFyZ3MuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS10aXAtY29udGVudCcpLCB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJzogZm9udC5jb2xvciB8fCAnIzAwMDAwMCcsICdmb250RmFtaWx5JzogZm9udC5mb250RmFtaWx5LCAnZm9udFNpemUnOiBmb250LnNpemUsXG4gICAgICAgICAgICAgICAgJ2ZvbnRXZWlnaHQnOiBmb250LmZvbnRXZWlnaHQsICdvcGFjaXR5JzogZm9udC5vcGFjaXR5LnRvU3RyaW5nKCksICdmb250U3R5bGUnOiBmb250LmZvbnRTdHlsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwb2ludGVyU2l6ZSA9IGFyZ3MuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZS1hcnJvdy10aXAnKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBvdXRlcldpZHRoID0gcG9pbnRlclNpemUgKyAncHgnO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZShhcmdzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmUtYXJyb3ctdGlwLW91dGVyJyksIHtcbiAgICAgICAgICAgICAgICAnYm9yZGVyUmlnaHRDb2xvcic6ICd0cmFuc3BhcmVudCcsICdib3JkZXJMZWZ0Q29sb3InOiAndHJhbnNwYXJlbnQnLCAnYm9yZGVyQm90dG9tQ29sb3InOiBib3JkZXJDb2xvcixcbiAgICAgICAgICAgICAgICAnYm9yZGVyTGVmdFdpZHRoJzogb3V0ZXJXaWR0aCwgJ2JvcmRlclJpZ2h0V2lkdGgnOiBvdXRlcldpZHRoLCAnYm9yZGVyQm90dG9tV2lkdGgnOiBvdXRlcldpZHRoLFxuICAgICAgICAgICAgICAgICdib3JkZXJUb3BDb2xvcic6IGJvcmRlckNvbG9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbm5lcldpZHRoID0gKHBvaW50ZXJTaXplIC0gYm9yZGVyV2lkdGgpICsgJ3B4JztcbiAgICAgICAgICAgIGVqMl9iYXNlXzIuc2V0U3R5bGVBdHRyaWJ1dGUoYXJncy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lLWFycm93LXRpcC1pbm5lcicpLCB7XG4gICAgICAgICAgICAgICAgJ2JvcmRlclJpZ2h0Q29sb3InOiAndHJhbnNwYXJlbnQnLCAnYm9yZGVyTGVmdENvbG9yJzogJ3RyYW5zcGFyZW50JywgJ2JvcmRlckJvdHRvbUNvbG9yJzogYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICAgICAgJ2JvcmRlckxlZnRXaWR0aCc6IGlubmVyV2lkdGgsICdib3JkZXJSaWdodFdpZHRoJzogaW5uZXJXaWR0aCwgJ2JvcmRlckJvdHRvbVdpZHRoJzogaW5uZXJXaWR0aCxcbiAgICAgICAgICAgICAgICAnbGVmdCc6IGJvcmRlcldpZHRoLCAndG9wJzogMCwgJ2JvcmRlclRvcENvbG9yJzogdGhpcy50b29sdGlwT3B0aW9uLmZpbGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWoyX2Jhc2VfMi5zZXRTdHlsZUF0dHJpYnV0ZShhcmdzLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaycsICd0cmFuc2l0aW9uUHJvcGVydHknOiAnbGVmdCx0b3AnLFxuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uRHVyYXRpb24nOiB0aGlzLnRvb2x0aXBPcHRpb24uZW5hYmxlQW5pbWF0aW9uID8gJzUwMG1zJyA6ICcwbXMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcC5kYXRhQmluZCgpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25Ub29sdGlwLnByb3RvdHlwZS51cGRhdGVQb3NpdGlvbiA9IGZ1bmN0aW9uIChpZCwgeCwgeSwgcG9pbnRJZCkge1xuICAgICAgICAgICAgdmFyIHBvaW50RWxlbWVudCA9IGhlbHBlcl8xLmdldEVsZW1lbnQocG9pbnRJZCk7XG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gcG9pbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJyk7XG4gICAgICAgICAgICBpZiAoIWVqMl9iYXNlXzMuaXNOdWxsT3JVbmRlZmluZWQodHJhbnNsYXRlKSAmJiB0cmFuc2xhdGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlID0gdHJhbnNsYXRlLnJlcGxhY2UoJ3RyYW5zbGF0ZSgnLCAnJyk7XG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlID0gdHJhbnNsYXRlLnJlcGxhY2UoJyknLCAnJyk7XG4gICAgICAgICAgICAgICAgdmFyIHR4ID0gcGFyc2VJbnQodHJhbnNsYXRlLnNwbGl0KCcsJylbMF0sIDEwKTtcbiAgICAgICAgICAgICAgICB2YXIgdHkgPSBwYXJzZUludCh0cmFuc2xhdGUuc3BsaXQoJywnKVsxXSwgMTApO1xuICAgICAgICAgICAgICAgIHggPSAhaXNOYU4odHgpID8gdHggKyB4IDogeDtcbiAgICAgICAgICAgICAgICB5ID0gIWlzTmFOKHR5KSA/IHR5ICsgeSA6IHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9vbHRpcCA9IGhlbHBlcl8xLmdldEVsZW1lbnQoaWQpO1xuICAgICAgICAgICAgaWYgKHRvb2x0aXApIHtcbiAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcCA9IGVqMl9iYXNlXzIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogJ3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6JyArIHggKyAncHg7dG9wOicgKyB5ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdweDt3aWR0aDoycHg7aGVpZ2h0OjJweDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGhlbHBlcl8xLmdldEVsZW1lbnQodGhpcy5hY2N1bXVsYXRpb24uZWxlbWVudC5pZCArICdfU2Vjb25kYXJ5X0VsZW1lbnQnKS5hcHBlbmRDaGlsZCh0b29sdGlwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uVG9vbHRpcC5wcm90b3R5cGUuZ2V0VG9vbHRpcFRleHQgPSBmdW5jdGlvbiAocG9pbnQsIHRvb2x0aXAsIHNlcmllc0luZGV4KSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gdG9vbHRpcC5mb3JtYXQgPyB0b29sdGlwLmZvcm1hdCA6ICcke3BvaW50Lnh9IDogJHtwb2ludC55fSc7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gYWNjX2Jhc2VfMS5nZXRTZXJpZXNGcm9tSW5kZXgoc2VyaWVzSW5kZXgsIHRoaXMuYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VUZW1wbGF0ZShwb2ludCwgZm9ybWF0LCBzZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25Ub29sdGlwLnByb3RvdHlwZS5wYXJzZVRlbXBsYXRlID0gZnVuY3Rpb24gKHBvaW50LCBmb3JtYXQsIHNlcmllcykge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgdmFyIHRleHRWYWx1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwb2ludCk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFWYWx1ZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBSZWdFeHAoJyR7cG9pbnQnICsgJy4nICsgZGF0YVZhbHVlICsgJ30nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSh2YWx1ZS5zb3VyY2UsIHBvaW50W2RhdGFWYWx1ZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IE9iamVjdC5rZXlzKE9iamVjdC5nZXRQcm90b3R5cGVPZihzZXJpZXMpKTsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVZhbHVlID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IFJlZ0V4cCgnJHtzZXJpZXMnICsgJy4nICsgZGF0YVZhbHVlICsgJ30nLCAnZ20nKTtcbiAgICAgICAgICAgICAgICB0ZXh0VmFsdWUgPSBzZXJpZXNbZGF0YVZhbHVlXTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSh2YWx1ZS5zb3VyY2UsIHRleHRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25Ub29sdGlwLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdBY2N1bXVsYXRpb25Ub29sdGlwJztcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uVG9vbHRpcC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChjaGFydCkge1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQWNjdW11bGF0aW9uVG9vbHRpcDtcbiAgICB9KCkpO1xuICAgIGV4cG9ydHMuQWNjdW11bGF0aW9uVG9vbHRpcCA9IEFjY3VtdWxhdGlvblRvb2x0aXA7XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC91c2VyLWludGVyYWN0aW9uL3Rvb2x0aXAuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84NV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQHN5bmNmdXNpb24vZWoyLXBvcHVwc1wiXG4vLyBtb2R1bGUgaWQgPSA4NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmRlZmluZShbXCJyZXF1aXJlXCIsIFwiZXhwb3J0c1wiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCIsIFwiLi4vbW9kZWwvYWNjLWJhc2VcIiwgXCIuLi8uLi9jb21tb24vbW9kZWwvYmFzZVwiLCBcIi4uLy4uL2NvbW1vbi9zZWxlY3Rpb24vc2VsZWN0aW9uXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgZWoyX2Jhc2VfMSwgYWNjX2Jhc2VfMSwgYmFzZV8xLCBzZWxlY3Rpb25fMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWNjdW11bGF0aW9uU2VsZWN0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKEFjY3VtdWxhdGlvblNlbGVjdGlvbiwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gQWNjdW11bGF0aW9uU2VsZWN0aW9uKGFjY3VtdWxhdGlvbikge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYWNjdW11bGF0aW9uKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyZXIgPSBhY2N1bXVsYXRpb24ucmVuZGVyZXI7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjdW11bGF0aW9uU2VsZWN0aW9uLnByb3RvdHlwZS5pbml0UHJpdmF0ZVZhcmlhYmxlcyA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVJZCA9IGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19lajJfY2hhcnRfc2VsZWN0aW9uJztcbiAgICAgICAgICAgIHRoaXMudW5zZWxlY3RlZCA9IGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ19lajJfZGVzZWxlY3RlZCc7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUluZGV4ZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVjdFBvaW50cyA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuaW52b2tlU2VsZWN0aW9uID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5pbml0UHJpdmF0ZVZhcmlhYmxlcyhhY2N1bXVsYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5zZXJpZXMgPSBlajJfYmFzZV8xLmV4dGVuZCh7fSwgYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXMsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5zZXJpZXNTdHlsZXMoKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUluZGV4KHRoaXMuY29uY2F0SW5kZXhlcyhhY2N1bXVsYXRpb24uc2VsZWN0ZWREYXRhSW5kZXhlcywgdGhpcy5zZWxlY3RlZERhdGFJbmRleGVzKSwgYWNjdW11bGF0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VsZWN0aW9uLnByb3RvdHlwZS5nZW5lcmF0ZVN0eWxlID0gZnVuY3Rpb24gKHNlcmllcykge1xuICAgICAgICAgICAgcmV0dXJuIChzZXJpZXMuc2VsZWN0aW9uU3R5bGUgfHwgdGhpcy5zdHlsZUlkICsgJ19zZXJpZXNfJyArIHNlcmllcy5pbmRleCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuZmluZEVsZW1lbnRzID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbiwgc2VyaWVzLCBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmdldEVsZW1lbnRCeUluZGV4KGluZGV4KV07XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50SWQgPSB0aGlzLmNvbnRyb2wuZWxlbWVudC5pZCArICdfU2VyaWVzXycgKyBpbmRleC5zZXJpZXMgKyAnX1BvaW50XycgKyBpbmRleC5wb2ludDtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLmNhbGN1bGF0ZVNlbGVjdGVkRWxlbWVudHMgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uLCBldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5pZC5pbmRleE9mKGFjY3VtdWxhdGlvbi5lbGVtZW50LmlkICsgJ18nKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmlkLmluZGV4T2YoJ19TZXJpZXNfJykgPiAtMSB8fCBldmVudC50YXJnZXQuaWQuaW5kZXhPZignX2RhdGFsYWJlbF8nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtU2VsZWN0aW9uKGFjY19iYXNlXzEuaW5kZXhGaW5kZXIoZXZlbnQudGFyZ2V0LmlkKSwgYWNjdW11bGF0aW9uLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLnBlcmZvcm1TZWxlY3Rpb24gPSBmdW5jdGlvbiAoaW5kZXgsIGFjY3VtdWxhdGlvbiwgZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuaWQuaW5kZXhPZignZGF0YWxhYmVsJykgPiAtMSA/XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0aW9uLmdldFNlcmllc0VsZW1lbnQoKS5jaGlsZE5vZGVzW2luZGV4LnNlcmllc10uY2hpbGROb2Rlc1tpbmRleC5wb2ludF1cbiAgICAgICAgICAgICAgICA6IGVsZW1lbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGFjY3VtdWxhdGlvbi5zZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnUG9pbnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGluZGV4LnBvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24oYWNjdW11bGF0aW9uLCBpbmRleCwgW2VsZW1lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1ckVmZmVjdChhY2N1bXVsYXRpb24uZWxlbWVudC5pZCwgYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdGlvbiA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24sIGluZGV4LCBzZWxlY3RlZEVsZW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoIWFjY3VtdWxhdGlvbi5pc011bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNdWx0aVNlbGVjdEVlbG1lbnRzKGFjY3VtdWxhdGlvbiwgdGhpcy5zZWxlY3RlZERhdGFJbmRleGVzLCBpbmRleCwgYWNjdW11bGF0aW9uLnNlcmllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gc2VsZWN0ZWRFbGVtZW50c1swXSAmJiAoc2VsZWN0ZWRFbGVtZW50c1swXS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRWxlbWVudHNbMF0gJiYgY2xhc3NOYW1lLmluZGV4T2YodGhpcy5nZXRTZWxlY3Rpb25DbGFzcyhzZWxlY3RlZEVsZW1lbnRzWzBdLmlkKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3R5bGVzKHNlbGVjdGVkRWxlbWVudHMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlSW5kZXgodGhpcy5zZWxlY3RlZERhdGFJbmRleGVzLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGVzKHNlbGVjdGVkRWxlbWVudHMsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlSW5kZXgodGhpcy5zZWxlY3RlZERhdGFJbmRleGVzLCBpbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUucmVkcmF3U2VsZWN0aW9uID0gZnVuY3Rpb24gKGFjY3VtdWxhdGlvbiwgb2xkTW9kZSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0YUluZGV4ZXMgPSBlajJfYmFzZV8xLmV4dGVuZChbXSwgdGhpcy5zZWxlY3RlZERhdGFJbmRleGVzLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRFbGVtZW50cyhhY2N1bXVsYXRpb24sIHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcyk7XG4gICAgICAgICAgICB0aGlzLmJsdXJFZmZlY3QoYWNjdW11bGF0aW9uLmVsZW1lbnQuaWQsIGFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0RGF0YUluZGV4KHNlbGVjdGVkRGF0YUluZGV4ZXMsIGFjY3VtdWxhdGlvbik7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU2VsZWN0ZWRFbGVtZW50cyA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24sIGluZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXNncm91cCA9IGFjY3VtdWxhdGlvbi5nZXRTZXJpZXNFbGVtZW50KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGluZGV4ZXNfMSA9IGluZGV4ZXM7IF9pIDwgaW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZGV4ZXNfMVtfaV07XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdHlsZXMoW3RoaXMuZ2V0RWxlbWVudEJ5SW5kZXgoaW5kZXgpXSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLmxlZ2VuZFNlbGVjdGlvbiA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpb24sIHNlcmllcywgcG9pbnRJbmRleCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhY2N1bXVsYXRpb24uZ2V0U2VyaWVzRWxlbWVudCgpLmNoaWxkTm9kZXNbc2VyaWVzXS5jaGlsZE5vZGVzW3BvaW50SW5kZXhdO1xuICAgICAgICAgICAgdmFyIHNlcmllc1N0eWxlID0gdGhpcy5nZW5lcmF0ZVN0eWxlKGFjY3VtdWxhdGlvbi52aXNpYmxlU2VyaWVzW3Nlcmllc10pO1xuICAgICAgICAgICAgdmFyIHNlcmllc0VsZW1lbnRzID0gYWNjdW11bGF0aW9uLmdldFNlcmllc0VsZW1lbnQoKS5jaGlsZE5vZGVzW3Nlcmllc10uY2hpbGROb2Rlc1twb2ludEluZGV4XTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uKGFjY3VtdWxhdGlvbiwgbmV3IGJhc2VfMS5JbmRleChzZXJpZXMsIHBvaW50SW5kZXgpLCBbc2VyaWVzRWxlbWVudHNdKTtcbiAgICAgICAgICAgIHRoaXMuYmx1ckVmZmVjdChhY2N1bXVsYXRpb24uZWxlbWVudC5pZCwgYWNjdW11bGF0aW9uLnZpc2libGVTZXJpZXMpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdERhdGFJbmRleCA9IGZ1bmN0aW9uIChpbmRleGVzLCBhY2N1bXVsYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpbmRleGVzXzIgPSBpbmRleGVzOyBfaSA8IGluZGV4ZXNfMi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpbmRleGVzXzJbX2ldO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnRCeUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1TZWxlY3Rpb24oaW5kZXgsIGFjY3VtdWxhdGlvbiwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZU11bHRpU2VsZWN0RWVsbWVudHMgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uLCBpbmRleCwgY3VycmVudEluZGV4LCBzZXJpZXNDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHNlcmllcyA9IHNlcmllc0NvbGxlY3Rpb25baW5kZXhbaV0uc2VyaWVzXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tFcXVhbHMoaW5kZXhbaV0sIGN1cnJlbnRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdHlsZXModGhpcy5maW5kRWxlbWVudHMoYWNjdW11bGF0aW9uLCBzZXJpZXMsIGluZGV4W2ldKSwgaW5kZXhbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpbmRleC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuYmx1ckVmZmVjdCA9IGZ1bmN0aW9uIChwaWVJZCwgdmlzaWJsZVNlcmllcykge1xuICAgICAgICAgICAgdmFyIHZpc2liaWxpdHkgPSB0aGlzLmNoZWNrUG9pbnRWaXNpYmlsaXR5KHRoaXMuc2VsZWN0ZWREYXRhSW5kZXhlcyk7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZpc2libGVTZXJpZXNfMSA9IHZpc2libGVTZXJpZXM7IF9pIDwgdmlzaWJsZVNlcmllc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBzZXJpZXMgPSB2aXNpYmxlU2VyaWVzXzFbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChzZXJpZXMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0aW9uRWxlbWVudHMoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGllSWQgKyAnX1Nlcmllc0NvbGxlY3Rpb24nKSwgdGhpcy5nZW5lcmF0ZVN0eWxlKHNlcmllcyksIHZpc2liaWxpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VsZWN0aW9uLnByb3RvdHlwZS5jaGVja1NlbGVjdGlvbkVsZW1lbnRzID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSwgdmlzaWJpbGl0eSkge1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gKGVsZW1lbnQuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIHZhciBsZWdlbmRTaGFwZTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50Q2xhc3M7XG4gICAgICAgICAgICB2YXIgcGFyZW50Q2xhc3M7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudENsYXNzID0gY2hpbGRyZW5baV0uZ2V0QXR0cmlidXRlKCdjbGFzcycpIHx8ICcnO1xuICAgICAgICAgICAgICAgIHBhcmVudENsYXNzID0gY2hpbGRyZW5baV0ucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJyc7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRDbGFzcy5pbmRleE9mKGNsYXNzTmFtZSkgPT09IC0xICYmIHBhcmVudENsYXNzLmluZGV4T2YoY2xhc3NOYW1lKSA9PT0gLTEgJiYgdmlzaWJpbGl0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFN2Z0NsYXNzKGNoaWxkcmVuW2ldLCB0aGlzLnVuc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdmdDbGFzcyhjaGlsZHJlbltpXSwgdGhpcy51bnNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbC5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUgJiYgdGhpcy5jb250cm9sLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnZW5kU2hhcGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbnRyb2wuZWxlbWVudC5pZCArICdfY2hhcnRfbGVnZW5kX3NoYXBlXycgKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlZ2VuZFNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudENsYXNzLmluZGV4T2YoY2xhc3NOYW1lKSA9PT0gLTEgJiYgcGFyZW50Q2xhc3MuaW5kZXhPZihjbGFzc05hbWUpID09PSAtMSAmJiB2aXNpYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTdmdDbGFzcyhsZWdlbmRTaGFwZSwgdGhpcy51bnNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MobGVnZW5kU2hhcGUsIHRoaXMudW5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuYXBwbHlTdHlsZXMgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzEgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfMVtfaV07XG4gICAgICAgICAgICAgICAgdmFyIGxlZ2VuZFNoYXBlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2wuYWNjdW11bGF0aW9uTGVnZW5kTW9kdWxlICYmIHRoaXMuY29udHJvbC5sZWdlbmRTZXR0aW5ncy52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmRTaGFwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29udHJvbC5lbGVtZW50LmlkICsgJ19jaGFydF9sZWdlbmRfc2hhcGVfJyArIGluZGV4LnBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MobGVnZW5kU2hhcGUsIHRoaXMudW5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFN2Z0NsYXNzKGxlZ2VuZFNoYXBlLCB0aGlzLmdldFNlbGVjdGlvbkNsYXNzKGxlZ2VuZFNoYXBlLmlkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdmdDbGFzcyhlbGVtZW50LnBhcmVudE5vZGUsIHRoaXMudW5zZWxlY3RlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MoZWxlbWVudCwgdGhpcy51bnNlbGVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTdmdDbGFzcyhlbGVtZW50LCB0aGlzLmdldFNlbGVjdGlvbkNsYXNzKGVsZW1lbnQuaWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uQ2xhc3MgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlU3R5bGUodGhpcy5jb250cm9sLnNlcmllc1thY2NfYmFzZV8xLmluZGV4RmluZGVyKGlkKS5zZXJpZXNdKTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHlsZXMgPSBmdW5jdGlvbiAoZWxlbWVudHMsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgbGVnZW5kU2hhcGU7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVsZW1lbnRzXzIgPSBlbGVtZW50czsgX2kgPCBlbGVtZW50c18yLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNfMltfaV07XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbC5hY2N1bXVsYXRpb25MZWdlbmRNb2R1bGUgJiYgdGhpcy5jb250cm9sLmxlZ2VuZFNldHRpbmdzLnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZFNoYXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb250cm9sLmVsZW1lbnQuaWQgKyAnX2NoYXJ0X2xlZ2VuZF9zaGFwZV8nICsgaW5kZXgucG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdmdDbGFzcyhsZWdlbmRTaGFwZSwgdGhpcy5nZXRTZWxlY3Rpb25DbGFzcyhsZWdlbmRTaGFwZS5pZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ZnQ2xhc3MoZWxlbWVudCwgdGhpcy5nZXRTZWxlY3Rpb25DbGFzcyhlbGVtZW50LmlkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLmFkZE9yUmVtb3ZlSW5kZXggPSBmdW5jdGlvbiAoaW5kZXhlcywgaW5kZXgsIGFkZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tFcXVhbHMoaW5kZXhlc1tpXSwgaW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFkZCkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvblNlbGVjdGlvbi5wcm90b3R5cGUuY2hlY2tFcXVhbHMgPSBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgcmV0dXJuICgoZmlyc3QucG9pbnQgPT09IHNlY29uZC5wb2ludCkgJiYgKGZpcnN0LnNlcmllcyA9PT0gc2Vjb25kLnNlcmllcykpO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLmNoZWNrUG9pbnRWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKHNlbGVjdGVkRGF0YUluZGV4ZXMpIHtcbiAgICAgICAgICAgIHZhciB2aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHNlbGVjdGVkRGF0YUluZGV4ZXNfMSA9IHNlbGVjdGVkRGF0YUluZGV4ZXM7IF9pIDwgc2VsZWN0ZWREYXRhSW5kZXhlc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gc2VsZWN0ZWREYXRhSW5kZXhlc18xW19pXTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjX2Jhc2VfMS5wb2ludEJ5SW5kZXgoZGF0YS5wb2ludCwgdGhpcy5jb250cm9sLnZpc2libGVTZXJpZXNbMF0ucG9pbnRzKS52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmlzaWJsZTtcbiAgICAgICAgfTtcbiAgICAgICAgQWNjdW11bGF0aW9uU2VsZWN0aW9uLnByb3RvdHlwZS5nZXRNb2R1bGVOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICdBY2N1bXVsYXRpb25TZWxlY3Rpb24nO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25TZWxlY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoYWNjdW11bGF0aW9uKSB7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBBY2N1bXVsYXRpb25TZWxlY3Rpb247XG4gICAgfShzZWxlY3Rpb25fMS5CYXNlU2VsZWN0aW9uKSk7XG4gICAgZXhwb3J0cy5BY2N1bXVsYXRpb25TZWxlY3Rpb24gPSBBY2N1bXVsYXRpb25TZWxlY3Rpb247XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FjY3VtdWxhdGlvbi1jaGFydC91c2VyLWludGVyYWN0aW9uL3NlbGVjdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5kZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuLi8uLi9jb21tb24vYW5ub3RhdGlvbi9hbm5vdGF0aW9uXCIsIFwiLi4vLi4vY29tbW9uL3V0aWxzL2hlbHBlclwiLCBcIkBzeW5jZnVzaW9uL2VqMi1iYXNlXCJdLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgYW5ub3RhdGlvbl8xLCBoZWxwZXJfMSwgZWoyX2Jhc2VfMSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICB2YXIgQWNjdW11bGF0aW9uQW5ub3RhdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIF9fZXh0ZW5kcyhBY2N1bXVsYXRpb25Bbm5vdGF0aW9uLCBfc3VwZXIpO1xuICAgICAgICBmdW5jdGlvbiBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uKGNvbnRyb2wsIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250cm9sKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMucGllID0gY29udHJvbDtcbiAgICAgICAgICAgIF90aGlzLmFubm90YXRpb25zID0gYW5ub3RhdGlvbnM7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgQWNjdW11bGF0aW9uQW5ub3RhdGlvbi5wcm90b3R5cGUucmVuZGVyQW5ub3RhdGlvbnMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uRWxlbWVudDtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IGVqMl9iYXNlXzEuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLnBpZS5lbGVtZW50LmlkICsgJ19Bbm5vdGF0aW9uX0NvbGxlY3Rpb25zJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmFubm90YXRpb25zLm1hcChmdW5jdGlvbiAoYW5ub3RhdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IG5ldyBoZWxwZXJfMS5DaGFydExvY2F0aW9uKDAsIDApO1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25FbGVtZW50ID0gX3RoaXMucmVuZGVyKGFubm90YXRpb24sIGluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXNbJ3NldEFubm90YXRpb24nICsgYW5ub3RhdGlvbi5jb29yZGluYXRlVW5pdHMgKyAnVmFsdWUnXShsb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0RWxlbWVudFN0eWxlKGxvY2F0aW9uLCBhbm5vdGF0aW9uRWxlbWVudCwgX3RoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXJfMS5hcHBlbmRFbGVtZW50KHRoaXMucGFyZW50RWxlbWVudCwgZWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIEFjY3VtdWxhdGlvbkFubm90YXRpb24ucHJvdG90eXBlLmdldE1vZHVsZU5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0Fubm90YXRpb24nO1xuICAgICAgICB9O1xuICAgICAgICBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEFjY3VtdWxhdGlvbkFubm90YXRpb247XG4gICAgfShhbm5vdGF0aW9uXzEuQW5ub3RhdGlvbkJhc2UpKTtcbiAgICBleHBvcnRzLkFjY3VtdWxhdGlvbkFubm90YXRpb24gPSBBY2N1bXVsYXRpb25Bbm5vdGF0aW9uO1xufSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hY2N1bXVsYXRpb24tY2hhcnQvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIiwgXCIuL21vZGVsL2Jhc2VcIiwgXCIuL21vZGVsL2NvbnN0YW50c1wiLCBcIi4vbW9kZWwvdGhlbWVcIl0sIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBiYXNlXzEsIGNvbnN0YW50c18xLCB0aGVtZV8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiAgICBfX2V4cG9ydChiYXNlXzEpO1xuICAgIF9fZXhwb3J0KGNvbnN0YW50c18xKTtcbiAgICBfX2V4cG9ydCh0aGVtZV8xKTtcbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9uL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9"]}